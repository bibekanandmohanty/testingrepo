(this["webpackJsonpinkxe10-designer"]=this["webpackJsonpinkxe10-designer"]||[]).push([[10],{936:function(e,a,t){"use strict";t.r(a);var r=t(7),s=t(10),n=t(11),l=t(13),i=t(16),o=t(15),d=t(0),c=t.n(d),g=t(120),p=t.n(g),u=t(19),m=t.n(u),h=t(877),v=function(e){if(e.error)return c.a.createElement("div",null,"Error! ",e.error.message);if(e.loading||void 0===e.galleryList)return c.a.createElement("div",{className:"advanced-search"},c.a.createElement("div",{className:"scroll-bar-wrap"},c.a.createElement("div",{className:"thumbView scrollbar d-none d-md-block d-lg-block d-xl-block",style:{overflow:"hidden"}},c.a.createElement("div",{className:"thumbView-wrap"},[1,2,3,4,5,6,7,8,9,10,11,12,13,14].map((function(e){return c.a.createElement("div",{className:"thumbView-elements",key:e},c.a.createElement("div",{className:"imageWrap"},c.a.createElement("figure",{className:"imageWrap-box"},c.a.createElement(m.a,{height:80,width:80}))))})))),c.a.createElement("div",{className:"thumbView scrollbar d-block d-sm-block d-md-none d-lg-none d-xl-none",style:{overflow:"hidden"}},c.a.createElement("div",{className:"thumbView-wrap"},[1,2,3,4,5,6,7,8,9,10,11,12,13,14].map((function(e){return c.a.createElement("div",{className:"thumbView-elements",key:e},c.a.createElement("div",{className:"imageWrap"},c.a.createElement("figure",{className:"imageWrap-box"},c.a.createElement(m.a,{height:80,width:80}))))}))))));return c.a.createElement(d.Fragment,null,c.a.createElement("div",{className:"scroll-bar-wrap"},c.a.createElement("div",{className:"thumbView scrollbar"},e.galleryList&&e.galleryList.length?c.a.createElement(p.a,{className:"thumbView-wrap",pageStart:0,loadMore:function(){return e.loadMoreDesign()},hasMore:e.hasMore,useWindow:!1},e.galleryList&&e.galleryList.map((function(a,t){return c.a.createElement(d.Fragment,{key:a.id+"_"+t},c.a.createElement("div",{className:"thumbView-elements",id:"tooltip-"+t},c.a.createElement("div",{className:"imageWrap"},c.a.createElement("figure",{className:"imageWrap-box",onClick:function(){return e.onDesignSelect(a,"design")}},c.a.createElement("img",{src:a.capture_images[0]?a.capture_images[0].thumb:"",alt:""}))),c.a.createElement("div",{className:"btn btn-sm btn-danger rmButton",onClick:function(){return e.showConfirmationForDelete(a)}},c.a.createElement("i",{className:"nf nf-trash"})),c.a.createElement(h.a,{placement:"left",target:"tooltip-"+t},a.design_name)))}))):e.galleryList&&0===e.galleryList.length?c.a.createElement("div",{className:"alert alert-warning small-txt tip"},c.a.createElement("i",{className:"alert-icon"}),c.a.createElement("span",{className:"alert-txt"},e.language.gallery.nodataMsg)):void 0)),function(){if(e.galleryList&&e.galleryList.length&&e.hasMore&&e.totalDesign-e.galleryList.length>0)return c.a.createElement("div",{className:"info-text"},c.a.createElement("i",{className:"nxi nxi-down"}),e.language.main.scrollToLoadMore)}())},f=t(878),y=t(857),b=function(e){return c.a.createElement(f.a,{id:"clear-popup",isOpen:e.modalIsOpen,toggle:e.closeModal,style:{maxWidth:"400px"},centered:!0,modalClassName:"custom"},e.language&&c.a.createElement(y.a,null,c.a.createElement("h6",{className:"modal-text-title"},c.a.createElement("strong",null,e.language.canvas.sure),e.language.canvas.sureMsg),c.a.createElement("div",{className:"modal-btn-group"},c.a.createElement("button",{className:"btn btn-sm btn-dark text-light",onClick:function(){return e.closeModal()}},e.language.canvas.cancel),c.a.createElement("button",{className:"btn btn-sm btn-success",onClick:function(){return e.deleteSelectedDesign()}},e.language.main.delete))))},E=t(24),O=function(e){Object(i.a)(t,e);var a=Object(o.a)(t);function t(e){var r;return Object(s.a)(this,t),(r=a.call(this,e)).state={},r.deleteSelectedDesign=r.deleteSelectedDesign.bind(Object(l.a)(r)),r}return Object(n.a)(t,[{key:"componentDidMount",value:function(){}},{key:"deleteSelectedDesign",value:function(e){this.props.deleteSelectedDesign()}},{key:"render",value:function(){return c.a.createElement(b,{closeModal:this.props.closeModal,clearAll:this.props.clearAll,language:this.props.language,modalIsOpen:this.props.modalIsOpen,deleteSelectedDesign:this.deleteSelectedDesign})}}]),t}(c.a.Component),D=Object(E.b)((function(e){return{language:e.languageReducer.translation_data.filter((function(a){return a.langCode===e.languageReducer.default_lang}))[0]}}))(O),N=t(57),w=t(6),I=function(e){Object(i.a)(t,e);var a=Object(o.a)(t);function t(e){var r;return Object(s.a)(this,t),(r=a.call(this,e)).closeModal=function(){r.setState({modalIsOpen:!1})},r.state={modalIsOpen:!1},r.galleryInfo={name:"",page:"1",order:"desc",perpage:"40",category:"",customerId:""},r.hasMorePage=!0,r.loadMoreDesign=r.loadMoreDesign.bind(Object(l.a)(r)),r.deleteSelectedDesign=r.deleteSelectedDesign.bind(Object(l.a)(r)),r.showConfirmationForDelete=r.showConfirmationForDelete.bind(Object(l.a)(r)),r}return Object(n.a)(t,[{key:"componentDidMount",value:function(){var e=this;if(!this.props.GalleryLoadStatus){var a=new URLSearchParams(window.location.search),t="";if("Shopify"===this.props.productCanvasReducer.storeType){t=new URLSearchParams(window.location.search);var r=a.get("customer")?a.get("customer"):t.get("customer");this.galleryInfo.customerId=r,this.props.dispatch(Object(N.j)(this.galleryInfo)),this.props.dispatch(Object(N.k)(this.galleryInfo))}else this.props.dispatch(w.i()).then((function(){e.galleryInfo.customerId=e.props.customerData.customerId,e.props.dispatch(Object(N.j)(e.galleryInfo)),e.props.dispatch(Object(N.k)(e.galleryInfo))}))}}},{key:"loadMoreDesign",value:function(){this.galleryInfo.page=this.props.pageNo;var e=Math.ceil(this.props.galleryList.total_records/this.galleryInfo.perpage);this.galleryInfo.page<e&&(this.galleryInfo.page=parseInt(this.galleryInfo.page)+1,this.props.dispatch(Object(N.j)(this.galleryInfo,this.props.galleryList.data)),this.remainingDesign=this.props.galleryList.total_records-this.props.galleryList.data.length,this.remainingDesign<this.galleryInfo.perpage&&(this.hasMorePage=!1))}},{key:"showConfirmationForDelete",value:function(e){this.setState({selectedItem:e,modalIsOpen:!0})}},{key:"deleteSelectedDesign",value:function(){var e=this;this.state.selectedItem.design_id==this.props.designId&&(this.props.setDesignId(""),this.props.setDesignName("")),this.props.dispatch(N.i(this.state.selectedItem.design_id)).then((function(){e.props.dispatch(w.i()).then((function(){e.galleryInfo.customerId=e.props.customerData.customerId,e.props.dispatch(Object(N.j)(e.galleryInfo))}))})),this.setState({modalIsOpen:!1})}},{key:"render",value:function(){var e=this.props.galleryList;return c.a.createElement(d.Fragment,null,c.a.createElement(v,{galleryList:e.data,onDesignSelect:this.props.applyDesign,hasMore:this.hasMorePage,loadMoreDesign:this.loadMoreDesign,totalDesign:e.total_records,language:this.props.language,showConfirmationForDelete:this.showConfirmationForDelete,loading:this.props.loading}),c.a.createElement(D,{modalIsOpen:this.state.modalIsOpen,closeModal:this.closeModal,language:this.props.language,deleteSelectedDesign:this.deleteSelectedDesign}))}}]),t}(c.a.Component),_=Object(E.b)((function(e){return{galleryList:e.gallery.items,loading:e.gallery.loading,error:e.gallery.error,productCanvasReducer:e.productCanvasReducer,GalleryLoadStatus:e.gallery.GalleryLoadStatus,customerData:e.customerReducer?e.customerReducer.items:0,pageNo:e.gallery.pageNo,language:e.languageReducer.translation_data.filter((function(a){return a.langCode===e.languageReducer.default_lang}))[0]}}))(I),L=function(e){if(e.error)return c.a.createElement("div",null,"Error! ",e.error.message);if(e.loading||void 0===e.prevOrderList)return c.a.createElement("div",{className:"advanced-search"},c.a.createElement("div",{className:"scroll-bar-wrap"},c.a.createElement("div",{className:"thumbView scrollbar d-none d-md-block d-lg-block d-xl-block",style:{overflow:"hidden"}},c.a.createElement("div",{className:"thumbView-wrap"},[1,2,3,4,5,6,7,8,9,10,11,12,13,14].map((function(e){return c.a.createElement("div",{className:"thumbView-elements",key:e},c.a.createElement("div",{className:"imageWrap"},c.a.createElement("figure",{className:"imageWrap-box"},c.a.createElement(m.a,{height:80,width:80}))))})))),c.a.createElement("div",{className:"thumbView scrollbar d-block d-sm-block d-md-none d-lg-none d-xl-none",style:{overflow:"hidden"}},c.a.createElement("div",{className:"thumbView-wrap"},[1,2,3,4,5,6,7,8,9,10,11,12,13,14].map((function(e){return c.a.createElement("div",{className:"thumbView-elements",key:e},c.a.createElement("div",{className:"imageWrap"},c.a.createElement("figure",{className:"imageWrap-box"},c.a.createElement(m.a,{height:80,width:80}))))}))))));return c.a.createElement(d.Fragment,null,c.a.createElement("div",{className:"scroll-bar-wrap"},e.prevOrderList&&e.prevOrderList.orders&&e.prevOrderList.orders.length?c.a.createElement(p.a,{className:"order-wrap scrollbar",pageStart:0,loadMore:function(){return e.loadMoreDesign()},hasMore:e.hasMore,useWindow:!1},e.prevOrderList.orders.map((function(a,t){return c.a.createElement("div",{className:"order-box",key:a.id+"_"+t},c.a.createElement("div",{className:"d-flex align-items-center"},c.a.createElement("strong",null,"#",a.id),c.a.createElement("small",{className:"text-muted ml-1"},"(",function(e){var a=new Date(e.replace(/-/g,"/")).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric"}),t=a.split(",")[1].trim(),r=a.split(",")[0],s=r.split(" ")[0],n=r.split(" ")[1];return n<10&&(n="0"+n.trim()),n+"-"+s+"-"+t}(a.created_date),")")),c.a.createElement("div",{className:"thumbView-wrap"},a.lineItems.map((function(a,t){return c.a.createElement("div",{className:"thumbView-elements",key:"line_"+t,onClick:function(){return e.onOrderSelect(a,"order")}},c.a.createElement("div",{className:"imageWrap"},c.a.createElement("figure",{className:"imageWrap-box"},c.a.createElement("img",{src:a.images[0]&&a.images[0].thumbnail?a.images[0].thumbnail:"",alt:""}))))}))))}))):e.prevOrderList&&e.prevOrderList.orders&&0===e.prevOrderList.orders.length?c.a.createElement("div",{className:"alert alert-warning small-txt tip"},c.a.createElement("i",{className:"alert-icon"}),c.a.createElement("span",{className:"alert-txt"},e.language.gallery.nodataMsg)):void 0))},k=function(e){Object(i.a)(t,e);var a=Object(o.a)(t);function t(e){var r;return Object(s.a)(this,t),(r=a.call(this,e)).state={items:[]},r.prevOrderInfo={name:"",page:"1",order:"desc",perpage:"40",category:"",customerId:""},r.hasMorePage=!0,r.loadMoreDesign=r.loadMoreDesign.bind(Object(l.a)(r)),r}return Object(n.a)(t,[{key:"componentDidMount",value:function(){}},{key:"loadMoreDesign",value:function(){this.prevOrderInfo.page=this.props.pageNo;var e=Math.ceil(this.props.prevOrderList.total_records/this.prevOrderInfo.perpage);this.prevOrderInfo.page<e&&(this.prevOrderInfo.page=parseInt(this.prevOrderInfo.page)+1,this.props.dispatch(Object(N.k)(this.prevOrderInfo,this.props.prevOrderList.data)),this.remainingDesign=this.props.prevOrderList.total_records-this.props.prevOrderList.data.length,this.remainingDesign<this.prevOrderInfo.perpage&&(this.hasMorePage=!1))}},{key:"render",value:function(){return c.a.createElement(L,{prevOrderList:this.props.prevOrderList.data,onOrderSelect:this.props.applyDesign,hasMore:this.hasMorePage,loadMoreDesign:this.loadMoreDesign,totalDesign:this.props.prevOrderList.total_records,language:this.props.language,loading:this.props.prevOrdersLoading,error:this.props.error})}}]),t}(c.a.Component),M=Object(E.b)((function(e){return{prevOrderList:e.gallery.prevOrders,loading:e.gallery.loading,prevOrdersLoading:e.gallery.prevOrdersLoading,error:e.gallery.error,productCanvasReducer:e.productCanvasReducer,GalleryLoadStatus:e.gallery.GalleryLoadStatus,customerData:e.customerReducer?e.customerReducer.items:0,pageNo:e.gallery.prevOrderPageNo,language:e.languageReducer.translation_data.filter((function(a){return a.langCode===e.languageReducer.default_lang}))[0]}}))(k),j=t(39),C=function(e){return c.a.createElement(d.Fragment,null,function(){if(e.language)return c.a.createElement("ul",{className:"nav nav-pills custom-pills mt-3 mb-3",id:"pills-tab",role:"tablist"},c.a.createElement("li",{className:"nav-item",onClick:function(){return e.filterGalleryList(!1)}},c.a.createElement("span",{className:"nav-link "+(e.isPreOrder?"":"active")},e.language.gallery.savedDesigns)),c.a.createElement("li",{className:"nav-item",onClick:function(){return e.filterGalleryList(!0)}},c.a.createElement("span",{className:"nav-link "+(e.isPreOrder?"active":"")},e.language.gallery.previousOrders)))}(),e.isPreOrder?c.a.createElement(j.a,{key:"galleryorder"},c.a.createElement(M,{applyDesign:e.applyDesign})):c.a.createElement(j.a,{key:"gallerydesign"},c.a.createElement(_,{applyDesign:e.applyDesign,saveDesignModal:e.saveDesignModal,designId:e.designId,setDesignId:e.setDesignId,setDesignName:e.setDesignName})))},S=t(3),x=t(71),R=function(e){Object(i.a)(t,e);var a=Object(o.a)(t);function t(e){var r;return Object(s.a)(this,t),(r=a.call(this,e)).state={isPreOrder:!1},r.applyDesign=r.applyDesign.bind(Object(l.a)(r)),r.filterGalleryList=r.filterGalleryList.bind(Object(l.a)(r)),r}return Object(n.a)(t,[{key:"componentDidMount",value:function(){}},{key:"applyDesign",value:function(e,a){var t=this;if("order"===a){this.props.showCanvasLoader(!0);var s=this.props.productCanvasReducer.product_details.product_id,n=!1;e.product_id!=s&&(n=!0,this.props.setProductId(e.product_id,e.variant_id,"applyDesign")),x.a.getDecoratedTemplate(e.custom_design_id).then((function(a){if(a.status&&a.data&&a.data.length){for(var r,l=a.data[0].design_data,i=[],o=[],d=!1,c=0;c<l.length;c++)l[c].svg&&(i[c]={},i[c].svg=decodeURI(l[c].svg),i[c].isDesigned=1,d=l[c].svg.search("#engrave_")>-1,o.push(d));t.props.dispatch(w.w(o)),(r=i).length&&t.props.dispatch(w.x(r,n)),a.data&&a.data[0].design_data[0].svg&&S.a.canvas.setSvgString(a.data[0].design_data[0].svg),t.props.setFaceData(r,n),e.product_id===s&&t.props.showCanvasLoader(!1),S.a.canvas.selectCurrentBoundary("bound_0")}}))}else{this.props.showCanvasLoader(!0);var l=this.props.productCanvasReducer.product_details.product_id,i=!1;this.props.setDesignId(e.design_id),this.props.setDesignName(e.design_name),e.product_info.product_id!=l&&(i=!0,this.props.setProductId(e.product_info.product_id,e.product_info.variant_id,"applyDesign")),Object(N.l)(e.id).then((function(a){if(a.status&&a.data.data.length){var s,n;if(a&&a.data.data[0].face_data&&t.props.dispatch(w.x(JSON.parse(a.data.data[0].face_data))),a&&a.data.data[0].layer_data){var o=Object(r.a)(a.data.data[0].layer_data);o=JSON.parse(a.data.data[0].layer_data);for(var d=0;d<o.length;d++)null===o[d]&&(o[d]=[]);t.props.dispatch(w.C(o))}t.props.setFaceData(a.data.data[0].sides,i),e.product_info.product_id===l&&t.props.showCanvasLoader(!1),S.a.canvas.selectCurrentBoundary("bound_0"),(null===a||void 0===a||null===(s=a.data)||void 0===s||null===(n=s.data[0])||void 0===n?void 0:n.product_info)&&l!==a.data.data[0].product_info.variant_id&&t.props.changeDesignedProduct(a.data.data[0].product_info.variant_id)}}))}}},{key:"filterGalleryList",value:function(e){this.setState({isPreOrder:e})}},{key:"render",value:function(){return c.a.createElement(d.Fragment,null,c.a.createElement(C,{applyDesign:this.applyDesign,isPreOrder:this.state.isPreOrder,filterGalleryList:this.filterGalleryList,loading:this.props.loading,saveDesignModal:this.props.saveDesignModal,designId:this.props.designId,setDesignId:this.props.setDesignId,setDesignName:this.props.setDesignName,language:this.props.language}))}}]),t}(c.a.Component),P=Object(E.b)((function(e){return{galleryList:e.gallery.items,loading:e.gallery.loading,error:e.gallery.error,productCanvasReducer:e.productCanvasReducer,language:e.languageReducer.translation_data.filter((function(a){return a.langCode===e.languageReducer.default_lang}))[0]}}))(R);t.d(a,"default",(function(){return P}))}}]);