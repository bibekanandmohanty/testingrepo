(this["webpackJsonpinkxe10-designer"]=this["webpackJsonpinkxe10-designer"]||[]).push([[12],{940:function(e,t,a){"use strict";a.r(t);var s=a(7),l=a(10),r=a(11),i=a(13),n=a(16),o=a(15),c=a(0),d=a.n(c),p=a(24),h=a(120),m=a.n(h),u=a(19),g=a.n(u),f=a(877),b=function(e){if(e.error)return d.a.createElement("div",null,"Error! ",e.error.message);if(e.loading||e.catLoading)return d.a.createElement(c.Fragment,null,d.a.createElement("div",{className:"advanced-search",key:"shape"},d.a.createElement("div",{className:"multiSelect d-none d-md-block d-lg-block d-xl-block"},d.a.createElement(g.a,{height:34,width:255})),d.a.createElement("div",{className:"multiSelect d-block d-sm-block d-md-none d-lg-none d-xl-none"},d.a.createElement(g.a,{height:34,width:350})),d.a.createElement("div",{className:"scroll-bar-wrap d-none d-md-block d-lg-block d-xl-block"},d.a.createElement("div",{className:"thumbView scrollbar",style:{overflow:"hidden"}},d.a.createElement("div",{className:"thumbView-wrap"},[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21].map((function(e){return d.a.createElement("div",{className:"thumbView-elements",key:e},d.a.createElement("div",{className:"imageWrap"},d.a.createElement("figure",{className:"imageWrap-box"},d.a.createElement(g.a,{height:80,width:80}))))}))))),d.a.createElement("div",{className:"scroll-bar-wrap d-block d-sm-block d-md-none d-lg-none d-xl-none"},d.a.createElement("div",{className:"thumbView scrollbar",style:{overflow:"hidden"}},d.a.createElement("div",{className:"thumbView-wrap"},[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21].map((function(e){return d.a.createElement("div",{className:"thumbView-elements",key:e},d.a.createElement("div",{className:"imageWrap"},d.a.createElement("figure",{className:"imageWrap-box"},d.a.createElement(g.a,{height:110,width:110}))))}))))),d.a.createElement("div",{className:"info-text d-none d-md-block d-lg-block d-xl-block"},d.a.createElement(g.a,{height:8,width:180}))));return d.a.createElement(c.Fragment,null,d.a.createElement("div",{className:"scroll-bar-wrap"},d.a.createElement("div",{className:e.shapes&&e.shapes.length>4?"thumbView shapeLists scrollbar":"thumbView shapeLists"},e.shapes&&e.shapes.length&&e.activeView&&e.isValidShapeItems?d.a.createElement(m.a,{className:"",pageStart:0,loadMore:function(){return e.loadMoreShape()},hasMore:e.hasMore,useWindow:!1},e.shapes.map((function(t,a){return d.a.createElement(c.Fragment,{key:a},0===t.is_disable&&t.shapes.length>0&&d.a.createElement("div",{className:"section-header"},d.a.createElement("h6",{className:"mb-0"},t.name),d.a.createElement("button",{className:"btn btn-sm btn-link text-underline pr-1"+(t.shapes.length<10?" hidden":""),onClick:function(){return e.onMoreClicked(t.id,t.name)}},e.language.main.more)),0===t.is_disable&&t.shapes.length>0&&d.a.createElement("div",{className:"thumbView-wrap"},t.shapes.map((function(t,a){return d.a.createElement(c.Fragment,{key:t.xe_id},d.a.createElement("div",{className:"thumbView-elements",id:"tooltip-"+t.xe_id},d.a.createElement("div",{className:"imageWrap"},d.a.createElement("figure",{className:"imageWrap-box",onClick:function(){return e.addShape(t)}},d.a.createElement("img",{src:t.file_name,alt:""})))),d.a.createElement(f.a,{placement:"top",target:"tooltip-"+t.xe_id},t.name))}))))}))):e.shapes&&0===e.shapes.length||!e.isValidShapeItems?d.a.createElement("div",{className:"alert alert-warning small-txt tip"},d.a.createElement("i",{className:"alert-icon"}),d.a.createElement("span",{className:"alert-txt"},e.language.shape.nodataMsg)):void 0)),function(){if(e.shapes&&e.shapes.length&&e.isValidShapeItems&&e.hasMore&&e.totalShapes-e.shapes.length>0&&e.activeView)return d.a.createElement("div",{className:"info-text d-none d-md-block d-lg-block d-xl-block"},d.a.createElement("i",{className:"nxi nxi-down"}),e.language.main.scrollToLoadMore)}())},v=a(3),E=a(70),k=a(9),C=a.n(k),S=a(20),y=a(46),w=a(111),x=a(134),N=a.n(x),_=a(236),P=a.n(_),I=a(12),A=a(880),O=a.n(A),B=a(156),j=a(260),V=a.n(j),L=function(e){function t(){if(e.selectedPrintProfileData){var t=!0;if(e.selectedPrintProfileData.engrave&&e.selectedPrintProfileData.engrave.is_laser_engrave_enabled&&e.engraveAddons&&(t=!e.selectedPrintProfileData.engrave.is_hide_color_options),t)return d.a.createElement("div",{className:"listView-elements"},d.a.createElement("div",{className:"text-options"},d.a.createElement("div",{className:"text-options-left"},e.language.main.artColors),d.a.createElement("div",{className:"text-options-right"},e.objColorList.length&&d.a.createElement("div",{key:e.objColorList[0].id,onClick:function(){return e.colorSelected(e.objColorList[0],0)},className:0===e.selectedUsedColorIndex?"color-btn active":"color-btn"},function(t){if("none"===t.fill)return d.a.createElement("div",{className:"color-swatch",style:{backgroundImage:"url("+N.a+")"}});if(/^#([0-9A-F]{3}){1,2}$/i.test(t.fill))return d.a.createElement(c.Fragment,null,d.a.createElement("div",{className:"color-swatch",style:{backgroundColor:e.selectedElm.prefs.fill}}),d.a.createElement("i",{className:"nxi nxi-move-right ml-2  cursor-pointer"}));var a=t.fill.substring(t.fill.lastIndexOf("#")+1,t.fill.lastIndexOf(")"));if(i=t.fill,new RegExp("^(https?:\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","i").test(i))return d.a.createElement(c.Fragment,null,d.a.createElement("div",{className:"color-swatch",style:{background:"url("+t.fill+")"}}),d.a.createElement("i",{className:"nxi nxi-move-right ml-2  cursor-pointer"}));var s=document.getElementById(a);if(!s)return;for(var l=s.getElementsByTagName("image"),r=0;r<l.length;r++)l[r]&&(t.fill=l[r].getAttribute("xlink:href"));return d.a.createElement(c.Fragment,null,d.a.createElement("div",{className:"color-swatch",style:{background:"url("+t.fill+")"}}),d.a.createElement("i",{className:"nxi nxi-move-right ml-2  cursor-pointer"}));var i}(e.objColorList[0])))),function(){if(!e.selectedElm||e.selectedElm&&e.selectedElm.prefs&&e.selectedElm.prefs.lock&&!1===e.selectedElm.prefs.lock.colorEdit&&e.isShowColorOption&&e.showOutLine)return d.a.createElement("div",{className:"listView-elements"},d.a.createElement("div",{className:"text-options"},d.a.createElement("div",{className:"text-options-left"},e.language.text.outline),d.a.createElement("div",{className:"text-options-right"},d.a.createElement("div",{className:"color-btn"},function(){if(!e.selectedElm)return;if(/^#([0-9A-F]{3}){1,2}$/i.test(e.selectedElm.prefs.stroke))return d.a.createElement("div",{className:"color-swatch",onClick:function(){return e.colorSelected({fill:e.selectedElm.prefs.stroke,id:0},1)},style:{background:e.selectedElm.prefs.stroke}});if("none"===e.selectedElm.prefs.stroke)return d.a.createElement("div",{onClick:function(){return e.colorSelected({fill:e.selectedElm.prefs.stroke,id:0},1)},className:"color-swatch",style:{backgroundImage:"url("+N.a+")"}});var t=e.selectedElm.prefs.stroke.substring(e.strokeColor.lastIndexOf("#")+1,e.strokeColor.lastIndexOf(")")),a="",s=document.getElementById(t);if(!s)return;for(var l=s.getElementsByTagName("image"),r=0;r<l.length;r++)l[r]&&(a=l[r].getAttribute("xlink:href"));return d.a.createElement("div",{className:"color-swatch",onClick:function(){return e.colorSelected({fill:e.selectedElm.prefs.stroke,id:0},1)},style:{background:"url("+a+")"}})}()),d.a.createElement("i",{className:"nxi nxi-move-right ml-2  cursor-pointer",onClick:function(){return e.colorSelected({fill:e.selectedElm.prefs.stroke,id:0},1)}}))))}())}}return d.a.createElement("div",{className:"Shapes"===e.activeView?"Shapes hidden":""},d.a.createElement("div",{className:"element-controls-header d-none d-md-flex d-lg-flex d-xl-flex"},null!=e.selectedUsedColorIndex?d.a.createElement(c.Fragment,null,d.a.createElement("section",{className:"boxTitle back-to-back",onClick:function(){return e.toogleView()}},d.a.createElement("div",{className:"icon",title:e.language.main.backToSection},d.a.createElement("i",{className:"nf nf-left-arrow"})),d.a.createElement("div",{className:"text"},e.language.panel.back))):d.a.createElement(c.Fragment,null,d.a.createElement("section",{className:"boxTitle back-to-back",onClick:function(){return e.openView(e.prevPage)}},d.a.createElement("div",{className:"icon",title:e.language.main.backToSection},d.a.createElement("i",{className:"nf nf-left-arrow"})),d.a.createElement("div",{className:"text"},e.language.panel.back))),d.a.createElement("div",{className:"boxTitle back-to-menu",title:e.language.main.backToMain},d.a.createElement("i",{className:"nf nf-delete"}))),null!=e.selectedUsedColorIndex?d.a.createElement(c.Fragment,null,d.a.createElement("h3",{className:"boxTitle back-link border-bottom justify-content-between d-flex d-sm-flex d-md-none d-lg-none d-xl-none m-0 pt-3 pl-3 pr-3 pb-3"},d.a.createElement("span",null,e.language.shape.chooseColor),d.a.createElement("span",{className:"btn btn-link text-dark"},d.a.createElement("i",{className:"nf nf-tick"})," ",e.language.main.done)),!1===e.isMobileView&&d.a.createElement("div",{className:"bg-wrap mb-2"},d.a.createElement("div",{className:"bg-wrap-colors"},d.a.createElement("div",{className:"thumbView-wrap"},e.objColorList.map((function(t,a){return d.a.createElement("div",{key:t.id,onClick:function(){return e.colorSelected(t,a)},className:e.selectedUsedColorIndex===a?"thumbView-elements active":"thumbView-elements"},d.a.createElement("div",{className:"color-btn",style:{backgroundColor:t.fill}}))}))))),d.a.createElement("div",{className:""===e.selectedUsedColorIndex?"ColorPalette hidden":"ColorPalette"},1===e.selectedUsedColorIndex?d.a.createElement("div",{className:"listView-elements"},d.a.createElement("div",{className:"text-options"},d.a.createElement("div",{className:"text-options-left"},e.language.text.outlineSize),d.a.createElement("div",{className:"text-options-right"},d.a.createElement(O.a,{maxValue:40,minValue:0,value:e.strokeWidth,step:1,onChange:function(t){return e.onStokeWidthChange(t)}}),d.a.createElement(B.DebounceInput,{className:"output",minLength:1,value:e.strokeWidth?e.strokeWidth:"0",onChange:e.validateStokeWidth,pattern:"[0-9]*",disabled:!0})))):null,d.a.createElement(w.a,{onColorSelect:e.onColorSelect,onColorHover:e.onColorHover,activeView:e.activeView,usedColorList:[e.objColorList[e.selectedUsedColorIndex]],selectedColor:e.selectedColor}),d.a.createElement("div",{className:"buttonGroup"},d.a.createElement("button",{className:"btn btn-sm btn-success btn-block mt-3",onClick:function(){return e.toogleView()}},e.language.main.done)))):d.a.createElement("div",{className:"listView"},d.a.createElement("div",{className:"listView-wrap"},e.selectedPrintProfileData&&e.selectedPrintProfileData.misc_data&&"replace"===e.selectedPrintProfileData.misc_data.shape_options&&d.a.createElement("div",{className:"listView-elements"},d.a.createElement("div",{className:"text-options"},d.a.createElement("div",{className:"text-options-left"},e.language.main.changeArt),d.a.createElement("div",{className:"text-options-right",onClick:function(){return e.openView("Shapes",!0)}},d.a.createElement("span",{className:"btn btn-link p-0 effectName"},e.language.main.change)))),d.a.createElement("div",{className:"listView-elements"},d.a.createElement("div",{className:"text-options"},d.a.createElement("div",{className:"text-options-left"},e.language.main.artSize),d.a.createElement("div",{className:"text-options-right"},d.a.createElement("div",{className:"form-row"},d.a.createElement("div",{className:"col"},d.a.createElement("input",{type:"text",value:e.elWidth.toFixed(2),className:"form-control form-control-sm",placeholder:"Width",readOnly:!0})),d.a.createElement("div",{className:"col"},d.a.createElement("input",{type:"text",value:e.elHeight.toFixed(2),className:"form-control form-control-sm",placeholder:"Height",readOnly:!0})),d.a.createElement("label",null,e.scaleUnit))))),t(),e.isTemplate&&d.a.createElement("div",{className:"listView-elements"},d.a.createElement("div",{className:"text-options"},d.a.createElement("div",{className:"text-options-left"},e.language.main.createmask?e.language.main.createmask:"Create Mask"," ",d.a.createElement("br",null),d.a.createElement("div",{className:"mt-1"},d.a.createElement("label",null,d.a.createElement("input",{type:"checkbox",style:{cursor:"pointer"},name:"useMask",onChange:function(t){return e.isCreateMask(t)},checked:e.isMaskEnable})," ",e.language.main.useAsMask?e.language.main.useAsMask:"Use this as mask"))),d.a.createElement("div",{className:"text-options-left d-flex justify-content-end flex-column align-items-end"},e.isMaskEnable&&d.a.createElement(V.a,{onChange:e.browseUploadImage,accepts:e.mimeType},d.a.createElement("div",{className:"p-1 shadow-sm rounded bg-white shape-mask-upload position-relative"},d.a.createElement("input",{type:"file",style:{width:"0px",height:"0px",position:"absolute",padding:"0px",margin:"0px",overflow:"hidden",opacity:0}}),d.a.createElement("img",{src:P.a,alt:"",className:"img-fluid"})),d.a.createElement("div",{className:"btn btn-sm text-secondary btn-link p-0 text-xxs"},e.language.team.upload))))))))},D=a(172),T=a(22),M=a.n(T),W=a(8),U=a(259),R=a(424),F=function(e){Object(n.a)(a,e);var t=Object(o.a)(a);function a(e){var s;return Object(l.a)(this,a),(s=t.call(this,e)).extAddedCb=function(e){D.a.init({$:M.a,editor:v.a,NS:W.a,fabric:y.fabric,Potrace:U,RgbQuant:R})},s.isCreateMask=function(e){s.setState({isMaskEnable:e.target.checked})},s.browseUploadImage=function(e){if(e.length){if(!1===e[0].type.includes("svg")){if(-1!==["jpg","png","jpeg"].indexOf(e[0].extension.toLowerCase())){var t=new FileReader;t.onloadend=function(){var t=Object(S.a)(C.a.mark((function t(a){var l,r,i,n,o,c,d,p,h,m,u,g,f,b;return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return l=a.target.result,n=e[0].name.split(".").pop(),r=s.b64toBlob(l.split(",")[1],e[0].type),i=URL.createObjectURL(r),o=v.a.canvas.getSelectedElems()[0],c=o.getElementsByTagName("path").length?o.getElementsByTagName("path")[0].parentElement.getAttribute("transform"):"",d=o.getBBox(),p=o.getAttribute("transform"),v.a.canvas.deleteSelectedElements(!0),t.next=11,v.a.importBrowseImage(e[0],!1,i,i,s.props.productDetails.scale_unit_id,s.props.globalSettings.file_uploaded.low_resolution,I.a.Dpi,"mask");case 11:v.a.addPreference("updatedFile",i),v.a.addPreference("updatedBlob",r),v.a.addPreference("originalBlob",r),v.a.addPreference("imgExtension",n),h=v.a.canvas.getSelectedElems()[0],m=h.getBBox(),v.a.canvas.moveSelectedElements(d.x-m.x-(m.width-d.width)/2,d.y-m.y-(m.height-d.height)/2),u=h.getAttribute("id"),v.a.addShapeClipPath(o,u,c,p),h.setAttribute("clip-path","url(#mask_"+u+")"),g=document.getElementById("preview_"+u),s.props.strokeWidth>0&&g&&(g.setAttribute("paint-order","stroke"),g.setAttribute("stroke-width",s.props.strokeWidth),g.setAttribute("stroke",s.props.strokeColor),g.setAttribute("vector-effect","non-scaling-stroke"),g.setAttribute("pointer-events","none"),g.removeAttribute("stroke-dasharray"),document.getElementById("preview_"+u)&&(f=document.getElementById("preview_"+u).parentNode,b=document.getElementById(u),f&&b&&(f.remove(),b.parentNode.insertBefore(f,b))));case 23:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),t.readAsDataURL(e[0])}}}else s.props.showNotification("danger",s.props.language.background.invalidFileFormat)},s.getUrlParameter=function(e){return("Shopify"!==window.storeType&&"Others"!==window.storeType&&"Hosted"!==window.storeType?new URLSearchParams(window.parent.location.search):new URLSearchParams(window.location.search)).get(e)},s.state={colorList:[],selectedUsedColorIndex:null,isMaskEnable:!1},s.lastColor=null,s.colorSelected=s.colorSelected.bind(Object(i.a)(s)),s.onColorSelect=s.onColorSelect.bind(Object(i.a)(s)),s.onColorHover=s.onColorHover.bind(Object(i.a)(s)),s.allowedMimeType=[".jpg",".png",".jpeg"],s.isTemplate=s.getUrlParameter("temp"),s.lastSelectedColor="#000000",s.lastSelectedStrokeColor="#000000",s}return Object(r.a)(a,[{key:"componentDidUpdate",value:function(e){"Shapes"===this.props.activeView&&null!=this.state.selectedUsedColorIndex&&this.toogleView()}},{key:"componentDidMount",value:function(){D.a.name in v.a.canvas.extensions||v.a.addExtension(D.a.name,this.extAddedCb,{$:M.a})}},{key:"selectedElement",value:function(e){if(e){this.setState({selectedUsedColorIndex:"",lastSelectedObjId:e.id});var t,a=e.innerHTML,s=/#[A-Fa-f0-9]+/g,l=[];do{(t=s.exec(a))&&l.push(t[0])}while(t);for(var r="",i=[],n=0,o=l.length;n<o;n++)r=l[n],i.push({id:n,fill:r});this.setState({colorList:i,showHideColorEdit:!0,selectedUsedColorIndex:"",lastSelectedObjId:e.id}),this.props.openView("")}}},{key:"colorSelected",value:function(e,t){e&&v.a.getActiveObject()&&(this.setState({currElement:document.getElementById(e.id),selectedUsedColorIndex:t,currSelectedColor:e.fill}),this.lastColor=e.fill)}},{key:"onColorSelect",value:function(e){if(this.state.currSelectedColor&&v.a.getActiveObject()){for(var t=document.getElementsByTagName("pattern"),a=!1,s={},l=0;l<t.length;l++)t[l].getAttribute("id")=="pattern_"+e.id&&(a=!0);0==a&&(e.hex_value||v.a.canvas.setPatternDefs("pattern_"+e.id,e.value));var r=document.getElementById(this.props.lastSelectedObjId),i=r.querySelectorAll("path,polygon,circle,rect,ellipse");if(""===e.hex_value)0==this.state.selectedUsedColorIndex&&i[0]&&i[0].setAttribute("fill","url(#pattern_"+e.id+")"),1==this.state.selectedUsedColorIndex&&i[0]&&i[0].setAttribute("stroke","url(#pattern_"+e.id+")");else if(this.props.isEmbroideryEnable)for(var n="pattern_"+r.getAttribute("id"),o=document.getElementById(n).getElementsByTagName("polygon"),c=0;c<o.length;c++)o[c].setAttribute("fill",e.hex_value);else i[0]&&0==this.state.selectedUsedColorIndex?(s={fill:this.lastSelectedColor||"url(#pattern_"+e.id+")"},i[0].setAttribute("fill",e.hex_value),this.lastSelectedColor=e.hex_value):i[0]&&1==this.state.selectedUsedColorIndex&&(this.lastSelectedStrokeColor=e.hex_value,s={stroke:this.lastSelectedStrokeColor||"url(#pattern_"+e.id+")"},i[0].setAttribute("stroke",e.hex_value)),v.a.canvas.addChangesToHistory(i[0],s);var d=this.props.objColorList;0==this.state.selectedUsedColorIndex&&(d[this.state.selectedUsedColorIndex].fill=e.hex_value),this.setState({colorList:d,currSelectedColor:e.hex_value||"url(#pattern_"+e.id+")"}),this.setColorsToxeProps(d),this.lastColor=e.hex_value,v.a.canvas.call("changed",v.a.canvas.getActiveObject()),v.a.canvas.extractAlphaPx()}}},{key:"onColorHover",value:function(e,t){if(this.state.currSelectedColor&&e.hex_value&&v.a.getActiveObject()){var a=document.getElementById(this.props.lastSelectedObjId),s=a.querySelectorAll("path"),l=a.querySelectorAll("path,polygon,circle,rect,ellipse"),r=a.innerHTML;if(!0===t){if(this.props.isEmbroideryEnable)for(var i=l[0].getAttribute("fill"),n=i.substring(i.lastIndexOf("#")+1,i.lastIndexOf(")")),o=document.getElementById(n).getElementsByTagName("polygon"),c=0;c<o.length;c++)o[c].setAttribute("fill",e.hex_value);else r=r.replace(this.lastColor,e.hex_value),l[0]&&0==this.state.selectedUsedColorIndex?l[0].setAttribute("fill",e.hex_value):l[0]&&1==this.state.selectedUsedColorIndex&&l[0].setAttribute("stroke",e.hex_value);this.lastColor=e.hex_value}else if(!1===t){if(this.props.isEmbroideryEnable)for(var d=s[0].getAttribute("fill"),p=d.substring(d.lastIndexOf("#")+1,d.lastIndexOf(")")),h=document.getElementById(p).getElementsByTagName("polygon"),m=0;m<h.length;m++)h[m].setAttribute("fill",this.state.currSelectedColor);else r=r.replace(this.lastColor,this.state.currSelectedColor),l[0]&&0==this.state.selectedUsedColorIndex?l[0].setAttribute("fill",this.state.currSelectedColor):l[0]&&1==this.state.selectedUsedColorIndex&&l[0].setAttribute("stroke",this.state.currSelectedColor);this.lastColor=this.state.currSelectedColor}}}},{key:"setColorsToxeProps",value:function(e){var t=v.a.getActiveObject(),a=e,s=t.prefs;s.colors=[];for(var l=0,r=a.length;l<r;l++)s.colors.push(a[l].fill);t.prefs=s}},{key:"toogleView",value:function(){this.setState({selectedUsedColorIndex:null})}},{key:"b64toBlob",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:512,s=window.atob(e),l=[],r=0;r<s.length;r+=a){for(var i=s.slice(r,r+a),n=new Array(i.length),o=0;o<i.length;o++)n[o]=i.charCodeAt(o);var c=new Uint8Array(n);l.push(c)}var d=new Blob(l,{type:t});return d}},{key:"render",value:function(){return d.a.createElement(L,{openView:this.props.openView,activeView:this.props.activeView,colorList:this.state.colorList,colorSelected:this.colorSelected,selectedUsedColorIndex:this.state.selectedUsedColorIndex,onColorSelect:this.onColorSelect,onColorHover:this.onColorHover,objColorList:this.props.objColorList,language:this.props.language,toogleView:this.toogleView.bind(this),elHeight:this.props.elHeight,elWidth:this.props.elWidth,selectedPrintProfileData:this.props.selectedPrintProfileData,scaleUnit:this.props.scaleUnit,engraveAddons:this.props.engraveAddons,prevPage:this.props.prevPage,selectedColor:this.lastColor,selectedElm:this.props.selectedElm,strokeColor:this.props.strokeColor,isShowColorOption:!(this.props.selectedPrintProfileData&&this.props.selectedPrintProfileData.engrave&&this.props.selectedPrintProfileData.engrave.is_laser_engrave_enabled&&this.props.selectedPrintProfileData.engrave.is_hide_color_options&&this.engraveAddons),onStokeWidthChange:this.props.onStokeWidthChange,strokeWidth:this.props.strokeWidth,isMaskEnable:this.state.isMaskEnable,isCreateMask:this.isCreateMask,browseUploadImage:this.browseUploadImage,mimeType:this.allowedMimeType,showOutLine:this.props.showOutLine,isTemplate:this.isTemplate})}}]),a}(d.a.Component),H=Object(p.b)((function(e){return{globalSettings:e.globalSettingReducer.global_settings_data.image_setting,productDetails:e.productCanvasReducer.product_details}}))(F),z=a(157),q=[],X=function(){function e(){Object(l.a)(this,e)}return Object(r.a)(e,null,[{key:"setElemDims",value:function(e){q.push(e)}},{key:"getElemDims",value:function(e){for(var t=0;t<q.length;t++)if(e===q[t].id)return q[t].dims;return null}},{key:"updateElmId",value:function(e,t){for(var a=0;a<q.length;a++)if(e===q[a].id){q[a].id=t;break}}}]),e}(),G=function(e){if(e.error)return d.a.createElement("div",null,"Error! ",e.error.message);if(e.loading||e.catLoading)return d.a.createElement(c.Fragment,null,d.a.createElement("div",{className:"advanced-search",key:"shape"},d.a.createElement("div",{className:"multiSelect d-none d-md-block d-lg-block d-xl-block"},d.a.createElement(g.a,{height:34,width:255})),d.a.createElement("div",{className:"multiSelect d-block d-sm-block d-md-none d-lg-none d-xl-none"},d.a.createElement(g.a,{height:34,width:350})),d.a.createElement("div",{className:"scroll-bar-wrap d-none d-md-block d-lg-block d-xl-block"},d.a.createElement("div",{className:"thumbView scrollbar",style:{overflow:"hidden"}},d.a.createElement("div",{className:"thumbView-wrap"},[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21].map((function(e){return d.a.createElement("div",{className:"thumbView-elements",key:e},d.a.createElement("div",{className:"imageWrap"},d.a.createElement("figure",{className:"imageWrap-box"},d.a.createElement(g.a,{height:80,width:80}))))}))))),d.a.createElement("div",{className:"scroll-bar-wrap d-block d-sm-block d-md-none d-lg-none d-xl-none"},d.a.createElement("div",{className:"thumbView scrollbar",style:{overflow:"hidden"}},d.a.createElement("div",{className:"thumbView-wrap"},[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21].map((function(e){return d.a.createElement("div",{className:"thumbView-elements",key:e},d.a.createElement("div",{className:"imageWrap"},d.a.createElement("figure",{className:"imageWrap-box"},d.a.createElement(g.a,{height:110,width:110}))))}))))),d.a.createElement("div",{className:"info-text d-none d-md-block d-lg-block d-xl-block"},d.a.createElement(g.a,{height:8,width:180}))));return d.a.createElement(c.Fragment,null,d.a.createElement("div",{className:"element-controls-header d-flex shapeLists"+("list"===e.activeView?"":" hidden")},d.a.createElement(c.Fragment,null,d.a.createElement("div",{className:"d-none d-sm-none d-md-none d-lg-flex d-xl-flex align-items-center"},d.a.createElement("section",{className:"boxTitle back-to-back",onClick:e.backToShapes},d.a.createElement("div",{className:"icon",title:e.language.main.backToSection},d.a.createElement("i",{className:"nf nf-left-arrow"}))),d.a.createElement("div",{className:"text"},e.selectedCatName)),d.a.createElement("div",{className:"d-flex d-sm-flex d-md-flex d-lg-none d-xl-none align-items-center justify-content-between w-100"},d.a.createElement("div",{className:"boxTitle title cursor-pointer d-block",onClick:e.backToShapes},e.selectedCatName),d.a.createElement("div",{className:"boxTitle back-to-view d-flex align-items-center",title:e.language.main.backToSection,onClick:e.backToShapes},d.a.createElement("i",{className:"nf nf-left-arrow"}),e.language.panel.back))),d.a.createElement("div",{className:"boxTitle back-to-menu",title:e.language.main.backToMain},d.a.createElement("i",{className:"nf nf-delete"}))),d.a.createElement("div",{className:"scroll-bar-wrap"},d.a.createElement("div",{className:"thumbView shapeLists listing scrollbar"},e.shapes&&e.shapes.length&&e.activeView?d.a.createElement(m.a,{className:"thumbView-wrap",pageStart:0,loadMore:function(){return e.loadMoreShape()},hasMore:e.hasMore,useWindow:!1},e.shapes.map((function(t,a){return d.a.createElement("div",{key:t.xe_id,className:"thumbView-elements"},d.a.createElement("div",{className:"imageWrap",id:"tooltip-"+a},d.a.createElement("figure",{className:"imageWrap-box",onClick:function(){return e.addShape(t)}},d.a.createElement("img",{src:t.file_name,alt:""}))),d.a.createElement(f.a,{placement:"top",target:"tooltip-"+a},t.name))}))):e.shapes&&0===e.shapes.length?d.a.createElement("div",{className:"alert alert-warning small-txt tip"},d.a.createElement("i",{className:"alert-icon"}),d.a.createElement("span",{className:"alert-txt"},e.language.shape.nodataMsg)):void 0)),function(){if(e.shapes&&e.shapes.length&&e.hasMore&&e.totalShapes-e.shapes.length>0&&e.activeView)return d.a.createElement("div",{className:"info-text d-none d-md-block d-lg-block d-xl-block"},d.a.createElement("i",{className:"nxi nxi-down"}),e.language.main.scrollToLoadMore)}())},J=a(39),$="",Q=[],K=function(e){Object(n.a)(a,e);var t=Object(o.a)(a);function a(e){var s;return Object(l.a)(this,a),(s=t.call(this,e)).onStokeWidthChange=function(e){s.state.selectedElm&&(s.state.selectedElm.prefs.strokeWidth=e,s.setStrokeVal(e),Q[0].setAttribute("stroke-width",e))},s.setStrokeVal=function(e){s.setState({strokeWidth:e})},s.state={activeView:"Shapes",objColorList:[],elHeight:0,elWidth:0,selectedCatName:"",prevPage:"Shapes",strokeColor:s.props.selectedPrintProfileData.color_data.border_color_code,showOutLine:1,strokeWidth:1},s.loadMoreShape=s.loadMoreShape.bind(Object(i.a)(s)),s.shapeInfo={name:"",page:"1",order:"desc",perpage:"40",print_profile_id:""},s.shapeByCatInfo={name:"",page:"1",order:"desc",perpage:"10",cat_page:"1",cat_order:"desc",cat_perpage:"10",print_profile_id:"",primary_cat:"",type:"tool"},s.hasMorePage=!0,s.remainingShape=0,s.isInitialLoad=!0,s.selectedCatSubCat="",s.openView=s.openView.bind(Object(i.a)(s)),s.addXePropsToObject=s.addXePropsToObject.bind(Object(i.a)(s)),s.addShape=s.addShape.bind(Object(i.a)(s)),s.showShapeFilter=s.showShapeFilter.bind(Object(i.a)(s)),s.onCatSubcatSelect=s.onCatSubcatSelect.bind(Object(i.a)(s)),s.onFilterApplyClicked=s.onFilterApplyClicked.bind(Object(i.a)(s)),s.onFilterSearch=s.onFilterSearch.bind(Object(i.a)(s)),s.afterClearFilter=s.afterClearFilter.bind(Object(i.a)(s)),s.elem={width:null,height:null},s.boundsWH={width:null,height:null},s.showShapeView=s.showShapeView.bind(Object(i.a)(s)),s.prevPropsData="",s.afterPrimeCatSet=s.afterPrimeCatSet.bind(Object(i.a)(s)),s.embAddons=s.props.licenceAddOns.includes("embroidery"),s.isEmbroideryEnable=!!(s.props.selectedPrintProfileData.embroidery&&s.props.selectedPrintProfileData.embroidery.is_embroidery_enabled&&s.embAddons),s.engraveAddons=s.props.licenceAddOns.includes("engrave"),s.isEngraveEnable=!!(s.props.selectedPrintProfileData&&s.props.selectedPrintProfileData.engrave&&s.props.selectedPrintProfileData.engrave.is_laser_engrave_enabled&&s.engraveAddons),s.onMoreClicked=s.onMoreClicked.bind(Object(i.a)(s)),s.backToShapes=s.backToShapes.bind(Object(i.a)(s)),s.loadMoreShapeByCat=s.loadMoreShapeByCat.bind(Object(i.a)(s)),s.hasMoreCatPage=!0,s.isValidShapeItems=!0,s.isBWGrayEnable=!!(s.props.selectedPrintProfileData&&s.props.selectedPrintProfileData.engrave&&s.props.selectedPrintProfileData.engrave.is_laser_engrave_enabled&&s.props.selectedPrintProfileData.engrave.is_BWGray_enabled),s.applyEngraveColor=s.props.selectedPrintProfileData&&s.props.selectedPrintProfileData.engrave&&s.props.selectedPrintProfileData.engrave.is_black_white?"#000000":"#808080",s}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props.printProfileReducer.selected_print_profile,a=this.props.allCatData.filter((function(e){return e.printProfileId===t}))[0];a&&a.catLoadStatus||this.props.dispatch(Object(E.r)(t,this.props.allCatData)).then((function(t){(t&&!t.data||t&&t.data&&0===t.data.length)&&e.afterPrimeCatSet([])})),this.props.tagLoadStatus||this.props.dispatch(Object(E.s)())}},{key:"afterPrimeCatSet",value:function(e){this.selectedCatSubCat=Object(s.a)(e),this.shapeInfo.print_profile_id=this.props.printProfileReducer.selected_print_profile,this.shapeByCatInfo.print_profile_id=this.props.printProfileReducer.selected_print_profile,this.shapeByCatInfo.primary_cat=e.length?e[0]:"";var t=this.props.printProfileReducer.selected_print_profile,a=this.props.allShape.filter((function(e){return e.printProfileId===t}))[0];a&&a.shapeLoadStatus||this.props.dispatch(Object(E.p)(this.shapeByCatInfo,this.props.allShape))}},{key:"componentDidUpdate",value:function(e){this.props.isReplaceShape!==e.isReplaceShape&&!1===this.props.isReplaceShape&&this.openView("")}},{key:"addXePropsToObject",value:function(){var e=v.a.getActiveObject();e.setAttribute("type","shape"),e.prefs={type:"shape",colors:[],price:"0.0",objectTitle:"",lock:{colorEdit:!1,resize:!1,move:!1,rotate:!1,delete:!1,edit:!1},fill:"",stroke:""},this.isEmbroideryEnable&&this.addEmbroideryPreview(e)}},{key:"addShape",value:function(e){var t=this;if(this.props.showHideBackLoader(!0,"shapes"),v.a.canvas.getIsFormEdit()&&null!==this.props.replaceDesignIndex){var a,s,l,r=v.a.canvas.getAllStageElems(),i=this.props.selectedElm.id,n=1,o=1,c=1,d=!1,p=0,h="";r.forEach((function(r,m){if(r.prefs&&"shape"===r.prefs.type&&r.id===i){v.a.canvas.selectOnly([r]),s=v.a.getActiveObject(),p=v.a.canvas.getParentLayerIndex(s),h=r.prefs.objectTitle,X.getElemDims(i)?(a=X.getElemDims(i),d=!0):(a=s.getBBox(),d=!1),v.a.canvas.deleteSelectedElements(!0),v.a.canvas.getLayerName()!=="Layer_"+p&&v.a.canvas.setCurrentLayer("Layer_"+p);var u=new XMLHttpRequest;u.open("GET",e.file_name,!0),u.send(),u.onreadystatechange=function(){4===u.readyState&&200===u.status&&(v.a.canvas.importSvgString(u.responseText),t.addXePropsToObject(e),s=v.a.getActiveObject(),d?X.updateElmId(i,s.id):X.setElemDims({id:s.id,dims:a}),s.prefs.objectTitle=h,l=s.getBBox(),n=a.width/l.width,o=a.height/l.height,c=n>o?o:n,v.a.canvas.scaleText(c),v.a.canvas.moveSelectedElements(a.x-l.x,a.y-l.y),s.prefs.lock=r.prefs.lock,v.a.canvas.clearSelection(),t.props.changeTempReplace(!1,"edit",!1))}}}))}else if(this.props.isTempReplace&&null!==this.props.replaceDesignIndex){var m,u,g,f=v.a.canvas.getSelectedElems()[0],b=f.prefs.edit,E=this.props.selectedElm.id,k=1,C=1,S=1,y=!1,w="";M()(f).children().each((function(a,s){if(s.prefs&&"shape"===s.prefs.type&&s.id===E){v.a.canvas.ungroupSelectedElement(),v.a.canvas.selectOnly([s]),u=v.a.getActiveObject(),w=s.prefs.objectTitle,X.getElemDims(E)?(m=X.getElemDims(E),y=!0):(m=u.getBBox(),y=!1),v.a.canvas.deleteSelectedElements(!0);var l=new XMLHttpRequest;l.open("GET",e.file_name,!0),l.send(),l.onreadystatechange=function(){if(4===l.readyState&&200===l.status)if("svg"===e.file_name.split(".").pop()){v.a.canvas.importSvgString(l.responseText),t.addXePropsToObject(e),u=v.a.getActiveObject(),y?X.updateElmId(E,u.id):X.setElemDims({id:u.id,dims:m}),u.prefs.objectTitle=w,g=u.getBBox(),k=m.width/g.width,C=m.height/g.height,S=k>C?C:k,v.a.canvas.scaleText(S),v.a.canvas.moveSelectedElements(m.x-g.x,m.y-g.y),u.prefs.lock=s.prefs.lock,v.a.canvas.selectAllInCurrentLayer();var a=v.a.canvas.getSelectedElems().filter((function(e){return"background"===e.id}))[0];v.a.canvas.removeFromSelection([a]),v.a.canvas.groupSelectedElements();var r=v.a.canvas.getSelectedElems();r[0].setAttribute("type","template"),r[0].setAttribute("pointer-events","bounding-box"),r[0].prefs={type:"template",edit:b,price:0},v.a.canvas.call("changed",r),t.props.changeTempReplace(!1,"template")}else v.a.importClipArtImg(e)}}}))}else{this.props.isReplaceShape&&v.a.canvas.deleteSelectedElements(!0),this.props.showReplaceShape(!1);var x=new XMLHttpRequest;x.open("GET",e.file_name,!0),x.send(),x.onreadystatechange=function(){if(4===x.readyState&&200===x.status){v.a.canvas.importSvgString(x.responseText);var e=v.a.canvas.getActiveObject();e[0].setAttribute("type","shape"),(Q=e[0].querySelectorAll("path,polygon,circle,rect,ellipse")).length>0&&("none"==Q[0].getAttribute("stroke")&&(Q[0].setAttribute("stroke","#000000"),Q[0].setAttribute("stroke-width",0)),Q[0].getAttribute("fill")||Q[0].setAttribute("fill","#000000"),Q[0].setAttribute("paint-order","stroke"),Q[0].setAttribute("vector-effect","non-scaling-stroke")),v.a.canvas.ungroupSelectedElement(),v.a.canvas.groupSelectedElements(),v.a.canvas.alignSelectedElements("m","page"),v.a.canvas.alignSelectedElements("c","page"),t.addXePropsToObject()}}}this.props.showHideBackLoader(!1,"shapes"),this.setState({prevPage:this.state.activeView})}},{key:"addEmbroideryPreview",value:function(e){var t,a="pattern_"+e.getAttribute("id"),s=!0,l="#000000";0===e.querySelectorAll("defs").length&&(t=document.createElementNS("http://www.w3.org/2000/svg","defs"),s=!1);for(var r=e.getElementsByTagName("path"),i="url(#"+a+")",n=0;n<r.length;n++)l=r[n].getAttribute("fill"),r[n].setAttribute("fill",i);t||(t=e.getElementsByTagName("defs"));var o='<pattern id="'+a+'" viewBox="0,0,1,1" width="4" height="2" patternUnits="userSpaceOnUse" patternTransform="rotate(-60) scale(0.6 0.6)"><polygon points="0,0 2,0 0,2" fill="'+l+'"></polygon><polygon points="0,4 4,0 4,2 2,4" fill="'+l+'"></polygon><polygon points="0,2 0,4 4,0 2,0" fill="#04000000"></polygon><polygon points="0,2 2,2 2,0" fill="#04000000"></polygon></pattern>';s?t[0].innerHTML=o:(t.innerHTML=o,e.appendChild(t))}},{key:"loadMoreShape",value:function(){if(!v.a.canvas.isAreaChange){this.shapeInfo.page=this.props.shapesByCat.pageNo;var e=Math.ceil(this.props.shapesByCat.shapeData.total_records/this.shapeInfo.perpage);this.shapeInfo.page<e&&(this.shapeInfo.page=parseInt(this.shapeInfo.page)+1,this.props.dispatch(Object(E.p)(this.shapeInfo,this.props.allCatShape)),this.remainingShape=this.props.shapesByCat.shapeData.total_records-this.props.shapesByCat.shapeData.data.length,this.remainingShape<this.shapeInfo.perpage&&(this.hasMorePage=!1))}}},{key:"openView",value:function(e,t){var a=this;this.setState({activeView:e},(function(){""===e||"list"===e?a.props.setHeaderDispay(!1):a.props.setHeaderDispay(!0),a.props.showReplaceShape(t)}))}},{key:"elementSelected",value:function(e){if(e){var t=e.getElementsByTagName("defs");t&&t.length&&t[0].remove();var a=[];if(e.getAttribute("fill")||e.setAttribute("fill","#000000"),(Q=e.querySelectorAll("path,polygon,circle,rect,ellipse")).length>0?(Q[0].getAttribute("stroke")||Q[0].setAttribute("stroke","#000000"),this.isBWGrayEnable?(Q[0].setAttribute("fill",this.applyEngraveColor),e.prefs.fill=e.prefs.stroke=a[0]=a[1]=this.applyEngraveColor):(a[0]=Q[0].getAttribute("fill"),a[1]=Q[0].getAttribute("stroke"),e.prefs.fill=Q[0].getAttribute("fill"),e.prefs.stroke=Q[0].getAttribute("stroke"))):Q.length&&(Q[0].getAttribute("stroke")||Q[0].setAttribute("stroke","#000000"),Q[0].getAttribute("fill")||Q[0].setAttribute("fill","#000000"),a[0]=Q[0].getAttribute("fill"),e.prefs.fill=Q[0].getAttribute("fill"),e.prefs.stroke=Q[0].getAttribute("stroke")),this.isEmbroideryEnable){var s=a[0].substring(a[0].lastIndexOf("#")+1,a[0].lastIndexOf(")"));document.getElementById(s)&&document.getElementById(s).getElementsByTagName("polygon")[0]&&(a[0]=document.getElementById(s).getElementsByTagName("polygon")[0].getAttribute("fill"))}for(var l="",r=[],i=0,n=a.length;i<n;i++)l=a[i],r.push({id:i,fill:l});e&&e.prefs&&e.prefs.lock&&e.prefs.lock.colorEdit&&!this.props.canvasReducer.isTemplateEdit?this.openView("Shapes"):this.openView(""),e.prefs.colors=a,this.elem.width=e.getBBox().width,this.elem.height=e.getBBox().height,this.calculateArtSize(),void 0===e.prefs.strokeWidth&&this.state.showOutLine&&(e.prefs.strokeWidth=1,Q[0].setAttribute("stroke-width",1)),this.setState({selectedElm:e,strokeColor:e.prefs.stroke,objColorList:r,lastSelectedObjId:e.id,strokeWidth:e.prefs.strokeWidth||0})}else this.openView("Shapes");this.props.setLayerData()}},{key:"onCatSubcatSelect",value:function(e){this.selectedCatSubCat=Object(s.a)(e)}},{key:"onFilterApplyClicked",value:function(){this.shapeByCatInfo.cat_page=1,this.selectedCatSubCat&&(this.shapeByCatInfo.category=this.selectedCatSubCat.length?JSON.stringify(this.selectedCatSubCat):null),this.props.dispatch(Object(E.p)(this.shapeByCatInfo,this.props.allShape))}},{key:"onFilterSearch",value:function(e){this.shapeByCatInfo.name=e,this.shapeByCatInfo.cat_page=1,this.selectedCatSubCat&&(this.shapeByCatInfo.category=this.selectedCatSubCat.length?JSON.stringify(this.selectedCatSubCat):null),this.props.dispatch(Object(E.p)(this.shapeByCatInfo,this.props.allShape,!0))}},{key:"afterClearFilter",value:function(){this.shapeByCatInfo.cat_page=1,this.selectedCatSubCat&&(this.shapeByCatInfo.category=this.selectedCatSubCat.length?JSON.stringify(this.selectedCatSubCat):null),this.shapeByCatInfo.primary_cat="",this.props.dispatch(Object(E.p)(this.shapeByCatInfo,this.props.allShape,!0)),this.setPrimeCatStatus()}},{key:"showShapeFilter",value:function(e,t,a,s,l,r){var i=this;if(e&&e.catData&&e.catData.length)return d.a.createElement(J.a,{key:"shapemultiselect"},d.a.createElement(z.a,{onRef:function(e){return i.multiselectChild=e},options:e.catData,onSelectOptions:this.onCatSubcatSelect,onApplyClicked:this.onFilterApplyClicked,onSearchDataEntered:this.onFilterSearch,afterClearAll:this.afterClearFilter,tagList:s.data,afterPrimeCatSet:this.afterPrimeCatSet,primeCatStatus:e.primeCatStatus}))}},{key:"calculateArtSize",value:function(){var e,t,a,s=v.a.canvas.getActiveObject();e=v.a.canvas.getStrokedBBox(s,!0);var l=v.a.canvas.getPxToInch();t=e.width*l.width,a=e.height*l.height,this.setState({elHeight:a,elWidth:t})}},{key:"setPrimeCatStatus",value:function(){for(var e=this.props.printProfileReducer.selected_print_profile,t=Object(s.a)(this.props.allCatData),a=0;a<t.length;a++)if(t[a].printProfileId===e){t[a].primeCatStatus=!1;break}this.props.dispatch(Object(E.t)(t))}},{key:"onMoreClicked",value:function(e,t){if(e){this.setState({selectedCatName:t}),$=e,this.openView("list"),this.shapeInfo.category=JSON.stringify([e]),this.shapeInfo.page=1;this.props.printProfileReducer.selected_print_profile;var a=this.props.allCatShape.filter((function(e){return e.catId===$}))[0];a&&a.clipLoadStatus||this.props.dispatch(Object(E.q)(this.shapeInfo,this.props.allCatShape))}}},{key:"loadMoreShapeByCat",value:function(){if(!v.a.canvas.isAreaChange){this.shapeByCatInfo.cat_page=this.props.shapes.pageNo;var e=Math.ceil(this.props.shapes.shapeData.total_records/this.shapeByCatInfo.cat_perpage);this.shapeByCatInfo.cat_page<e&&(this.shapeByCatInfo.cat_page=parseInt(this.shapeByCatInfo.cat_page)+1,this.props.dispatch(Object(E.p)(this.shapeByCatInfo,this.props.allShape)),this.remainingShape=this.props.shapes.shapeData.total_records-this.props.shapes.shapeData.data.length,this.remainingShape<this.shapeByCatInfo.cat_perpage&&(this.hasMoreCatPage=!1))}}},{key:"showShapeView",value:function(e,t,a){return a&&a.shapeData&&a.shapeData.data?(a.shapeData.records<this.shapeInfo.perpage?this.hasMorePage=!1:this.hasMorePage=!0,d.a.createElement(G,{shapes:a.shapeData.data,addShape:this.addShape,loadMoreShape:this.loadMoreShape,error:e,loading:t,hasMore:this.hasMorePage,totalShapes:this.props.shapesByCat.shapeData.total_records,activeView:this.state.activeView,language:this.props.language,catLoading:this.props.catLoading,selectedCatName:this.state.selectedCatName,backToShapes:this.backToShapes})):d.a.createElement(G,{error:e,loading:t,catLoading:this.props.catLoading})}},{key:"showCatShapeList",value:function(e,t,a){return a&&a.shapeData&&a.shapeData.data?(a.shapeData.records<this.shapeByCatInfo.cat_perpage?this.hasMoreCatPage=!1:this.hasMoreCatPage=!0,this.isValidShapeItems=a.shapeData.data.some((function(e){return void 0!==e.shapes})),d.a.createElement(b,{shapes:a.shapeData.data,addShape:this.addShape,loadMoreShape:this.loadMoreShapeByCat,error:e,loading:t,hasMore:this.hasMoreCatPage,totalShapes:this.props.shapes.shapeData.total_records,activeView:this.state.activeView,language:this.props.language,catLoading:this.props.catLoading,onMoreClicked:this.onMoreClicked,selectedElm:this.state.selectedElm,isValidShapeItems:this.isValidShapeItems})):d.a.createElement(b,{error:e,loading:t,catLoading:this.props.catLoading,language:this.props.language})}},{key:"backToShapes",value:function(){this.props.setHeaderDispay(!0),this.openView("Shapes")}},{key:"render",value:function(){var e=this.props,t=e.error,a=e.loading,s=e.shapes,l=e.shapeCat,r=e.catLoading,i=e.catError,n=e.shapeTag,o=e.tagLoading,p=e.tagError,h=e.shapesByCat;return d.a.createElement(c.Fragment,null,d.a.createElement("div",{className:"Shapes"===this.state.activeView?"":"hidden"},this.showShapeFilter(l,r,i,n,o,p)),"Shapes"===this.state.activeView&&this.showCatShapeList(t,a,s),"list"===this.state.activeView&&this.showShapeView(t,a,h),""===this.state.activeView&&d.a.createElement(J.a,{key:"shapecolors"},d.a.createElement(H,{activeView:this.state.activeView,openView:this.openView,objColorList:this.state.objColorList,lastSelectedObjId:this.state.lastSelectedObjId,language:this.props.language,selectedPrintProfileData:this.props.selectedPrintProfileData,elHeight:this.state.elHeight,elWidth:this.state.elWidth,scaleUnit:this.props.canvasReducer.product_details.scale_unit_id,isEmbroideryEnable:!!(this.props.selectedPrintProfileData&&this.props.selectedPrintProfileData.embroidery&&this.props.selectedPrintProfileData.embroidery.is_embroidery_enabled&&this.embAddons),engraveAddons:this.engraveAddons,prevPage:this.state.prevPage,selectedElm:this.state.selectedElm,strokeColor:this.state.strokeColor,onStokeWidthChange:this.onStokeWidthChange,strokeWidth:this.state.strokeWidth,showOutLine:this.state.showOutLine,showNotification:this.props.showNotification})))}}]),a}(d.a.Component),Y=Object(p.b)((function(e){return{shapes:e.shape.items.filter((function(t){return t.printProfileId===e.printProfileReducer.selected_print_profile}))[0],loading:e.shape.loading,error:e.shape.error,isShapesLoaded:e.shape.isShapesLoaded,shapeCat:e.shape.catItem.filter((function(t){return t.printProfileId===e.printProfileReducer.selected_print_profile}))[0],catLoading:e.shape.catLoading,catError:e.shape.catError,categoryLoadStatus:e.shape.categoryLoadStatus,shapeTag:e.shape.tagItem,tagLoading:e.shape.tagLoading,tagError:e.shape.tagError,tagLoadStatus:e.shape.tagLoadStatus,pageNo:e.shape.pageNo,language:e.languageReducer.translation_data.filter((function(t){return t.langCode===e.languageReducer.default_lang}))[0],canvasReducer:e.productCanvasReducer,printProfileReducer:e.printProfileReducer,allShape:e.shape.items,allCatData:e.shape.catItem,selectedPrintProfileData:e.printProfileReducer.print_profile_data.filter((function(t){return t.id===e.printProfileReducer.selected_print_profile}))[0],licenceAddOns:e.productCanvasReducer.licenceAddOns,shapesByCat:e.shape.itemsByCat.filter((function(e){return e.catId===$}))[0],allCatShape:e.shape.itemsByCat}}))(K);a.d(t,"default",(function(){return Y}))}}]);