(this["webpackJsonpinkxe10-designer"]=this["webpackJsonpinkxe10-designer"]||[]).push([[13],{939:function(e,t,a){"use strict";a.r(t);var l,i,n=a(7),s=a(10),r=a(11),o=a(13),c=a(16),m=a(15),d=a(0),p=a.n(d),u=a(24),h=a(43),g=a(120),f=a.n(g),v=a(19),b=a.n(v),E=function(e){if(e.error)return p.a.createElement("div",{className:"alert alert-warning ml-2 mr-2"},"Error! ",e.error.message);if(!e.productBasedTempId&&(e.loading||e.catLoading))return p.a.createElement(d.Fragment,null,p.a.createElement("div",{className:"advanced-search",key:"template"},p.a.createElement("div",{className:"multiSelect d-none d-md-block d-lg-block d-xl-block"},p.a.createElement(b.a,{height:34,width:255})),p.a.createElement("div",{className:"multiSelect d-block d-sm-block d-md-none d-lg-none d-xl-none"},p.a.createElement(b.a,{height:34,width:350})),p.a.createElement("div",{className:"scroll-bar-wrap d-none d-md-block d-lg-block d-xl-block"},p.a.createElement("div",{className:"thumbView templateList scrollbar",style:{overflow:"hidden"}},p.a.createElement("div",{className:"thumbView-wrap"},[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21].map((function(e){return p.a.createElement("div",{className:"thumbView-elements",key:e},p.a.createElement("div",{className:"imageWrap"},p.a.createElement("figure",{className:"imageWrap-box"},p.a.createElement(b.a,{height:122,width:122.08}))))}))))),p.a.createElement("div",{className:"scroll-bar-wrap d-block d-sm-block d-md-none d-lg-none d-xl-none"},p.a.createElement("div",{className:"thumbView scrollbar",style:{overflow:"hidden"}},p.a.createElement("div",{className:"thumbView-wrap"},[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21].map((function(e){return p.a.createElement("div",{className:"thumbView-elements",key:e},p.a.createElement("div",{className:"imageWrap"},p.a.createElement("figure",{className:"imageWrap-box"},p.a.createElement(b.a,{height:110,width:110}))))}))))),p.a.createElement("div",{className:"info-text d-none d-md-block d-lg-block d-xl-block"},p.a.createElement(b.a,{height:8,width:180}))));return p.a.createElement(d.Fragment,null,p.a.createElement("div",{className:""===e.activeView?"scroll-bar-wrap":"hidden"},function(){if(e.templates&&e.templates.length)return p.a.createElement("ul",{className:"nav nav-pills custom-pills mt-3 mb-2",id:"pills-tab",role:"tablist"},p.a.createElement("li",{className:"nav-item"},p.a.createElement("a",{href:"#/",className:"free"===e.filterType?"nav-link active":"nav-link",onClick:function(){return e.selectTemplateType("free")}},e.language.template.recreate)),p.a.createElement("li",{className:"nav-item"},p.a.createElement("a",{href:"#/",className:"quick"===e.filterType?"nav-link active":"nav-link",onClick:function(){return e.selectTemplateType("quick")}},e.language.template.edit)))}(),p.a.createElement("div",{className:"thumbView templateList scrollbar"},e.templates&&e.templates.length?p.a.createElement(f.a,{className:"thumbView-wrap",pageStart:0,loadMore:function(){return e.loadMoreTemplate()},hasMore:e.hasMore,useWindow:!1},e.templates.map((function(t,a){return function(t,a){return 1===t.is_easy_edit&&"quick"===e.filterType||0===t.is_easy_edit&&"free"===e.filterType?p.a.createElement("div",{key:a,className:"thumbView-elements"},p.a.createElement("div",{className:"imageWrap"},p.a.createElement("figure",{className:"imageWrap-box",onClick:function(){return e.addTemplateToCanvas(t.ref_id)}},p.a.createElement("img",{src:t.capture_images.without_product_file?t.capture_images.without_product_file[0].thumb:null,alt:""})))):void 0}(t,a)}))):e.templates&&0===e.templates.length?p.a.createElement("div",{className:"alert alert-warning small-txt tip"},p.a.createElement("i",{className:"alert-icon"}),p.a.createElement("span",{className:"alert-txt"},e.language.template.nodataMsg)):void 0)),function(){if(""===e.activeView&&e.templates&&e.templates.length&&e.hasMore&&e.totalTemp-e.templates.length>0)return p.a.createElement("div",{className:"info-text d-none d-md-block d-lg-block d-xl-block"},p.a.createElement("i",{className:"nxi nxi-down"}),e.language.main.scrollToLoadMore)}())},x=a(9),y=a.n(x),w=a(20),k=a(260),T=a.n(k),N=a(12),C=a(134),S=a.n(C),I=function(e){function t(e,t){return p.a.createElement("figure",{className:"imageWrap-box template_svg mb-0"},p.a.createElement("svg",{id:"thumb_"+t,width:"45",height:"45",dangerouslySetInnerHTML:{__html:e}}))}return p.a.createElement("div",{className:""===e.activeView?"advanced-search":"hidden"},p.a.createElement("div",{id:"text_preview"},p.a.createElement("svg",{id:"xe_text_svg",version:"1.1",width:"600",height:"600",viewBox:"0 0 600 600",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink"},p.a.createElement("g",{id:"xe_txtgrp"}))),p.a.createElement("h3",{className:"boxTitle mb-2 d-none d-md-block d-lg-block d-xl-block"},e.language.template.edit),p.a.createElement("div",{className:"listView templateEdit template-form-edit predeco scrollbar"},p.a.createElement("div",{className:"listView-wrap"},e.textElems.map((function(t){var a,l,i,n,s;return p.a.createElement(p.a.Fragment,{key:t.id},p.a.createElement("div",{className:"listView-elements"},p.a.createElement("div",{className:"text-options flex-column"},p.a.createElement("div",{className:"text-options-left w-100 mb-2"},t.prefs.objectTitle),p.a.createElement("div",{className:"text-options-right w-100"},p.a.createElement("textarea",{className:"form-control mw-100"+(t.prefs.noOfLines>0?"":" hidden"),style:{resize:"none"},cols:"30",dir:"auto",rows:"3",value:t.prefs.text,onChange:function(a){return e.onTextChange(a,t)}}),p.a.createElement("input",{type:"text",className:"form-control mw-100"+(0===t.prefs.noOfLines?"":" hidden"),dir:"auto",value:t.prefs.text,onChange:function(a){return e.onTextChange(a,t)}})))),p.a.createElement("div",{className:"listView-elements border-top-0"+((null===t||void 0===t||null===(a=t.prefs)||void 0===a||null===(l=a.lock)||void 0===l?void 0:l.editFont)?" hidden":"")},p.a.createElement("div",{className:"text-options pt-0"},p.a.createElement("div",{className:"text-options-left"},e.language.template.selectFont),p.a.createElement("div",{className:"text-options-right",onClick:function(){return e.openFontList(t)}},p.a.createElement("div",{className:"text-options-list"},p.a.createElement("div",{id:"selctedFont",className:"font-list",style:{fontFamily:t.prefs.font?t.prefs.font.font_family:""}},e.language.text.fontStyle)),p.a.createElement("i",{className:"nxi nxi-move-right ml-2 cursor-pointer"})))),p.a.createElement("div",{className:"listView-elements border-top-0"+((null===t||void 0===t||null===(i=t.prefs)||void 0===i||null===(n=i.lock)||void 0===n?void 0:n.colorEdit)?" hidden":"")},p.a.createElement("div",{className:"text-options pt-0"},p.a.createElement("div",{className:"text-options-left"},e.language.template.textColor),p.a.createElement("div",{className:"text-options-right"},p.a.createElement("div",{className:"color-btn"},p.a.createElement("div",{className:"color-btn",onClick:function(){return e.openView("textColor",t)}},(s=t.prefs,"none"===e.fillColor?p.a.createElement("div",{className:"color-swatch",style:{backgroundImage:"url("+S.a+")"}}):/^#([0-9A-F]{3}){1,2}$/i.test(s.colors[0])?p.a.createElement("div",{className:"color-swatch",style:{background:s.colors[0]}}):p.a.createElement("div",{className:"color-swatch",style:{background:"url("+N.a.assets_path+"/color_palettes/"+s.colors[0]+")"}})))),p.a.createElement("i",{className:"nxi nxi-move-right ml-2 cursor-pointer",onClick:function(){return e.openView("textColor",t)}})))))})),e.graphicsElements.map((function(t){return p.a.createElement("div",{className:"listView-elements",key:t.id},p.a.createElement("div",{className:"text-options as-column"},p.a.createElement("div",{className:"text-options-left"},p.a.createElement("div",{className:"lable"},t.prefs.objectTitle)),p.a.createElement("div",{className:"text-options-right"},p.a.createElement("input",{type:"text",className:"form-control",dir:"auto",placeholder:"Enter text",value:t.prefs.text,onChange:function(a){return e.onTextChange(a,t)}}))))})),e.designElems.map((function(a,l){var i,n,s,r,o,c,m,d;return p.a.createElement("div",{className:"listView-elements",key:a.obj.id},p.a.createElement("div",{className:"text-options flex-column"},p.a.createElement("div",{className:"text-options-left w-100 mb-2"},a.obj.prefs.objectTitle),p.a.createElement("div",{className:"text-options-right w-100 justify-content-start flex-column align-items-start"},p.a.createElement("div",{className:"media"},p.a.createElement("div",{className:"preview-img mr-2 rounded shadow-sm"},t(a.obj.outerHTML,a.obj.id)),p.a.createElement("div",{className:"media-body text-left d-flex flex-column align-items-start"},p.a.createElement("div",{className:(null===(i=e.designElems[l])||void 0===i||null===(n=i.nodelist)||void 0===n?void 0:n.length)?"":"hidden"},p.a.createElement("div",{className:(null===a||void 0===a||null===(s=a.obj)||void 0===s||null===(r=s.prefs)||void 0===r||null===(o=r.lock)||void 0===o?void 0:o.colorEdit)?"hidden":""},p.a.createElement("h6",{className:"text-xxs mt-1 mb-1"},e.language.template.changeColors),p.a.createElement("div",{className:"color-item-group"},e.designElems&&e.designElems.length&&e.designElems[l].nodelist.map((function(t,a){if(a<5)return p.a.createElement("div",{className:"color-btn",key:t.id},function(t,a,l,i){var n=a.getAttribute("fill")||"#000000";if(/^#([0-9A-F]{3}){1,2}$/i.test(n))return p.a.createElement("div",{className:"color-swatch",onClick:function(){return e.openView("textColor",t,a,l,i)},style:{background:n}});var s=n.substring(n.lastIndexOf("_")+1,n.lastIndexOf(")"));return p.a.createElement("div",{className:"color-swatch",onClick:function(){return e.openView("textColor",t,a,l,i)},style:{background:"url("+N.a.assets_path+"/color_palettes/"+s+")"}})}(e.designElems[l].obj,t,l,a))})),(null===(c=e.designElems[l])||void 0===c?void 0:c.obj)&&(null===(m=e.designElems[l])||void 0===m?void 0:m.nodelist)&&(null===(d=e.designElems[l])||void 0===d?void 0:d.nodelist.length)&&p.a.createElement("div",{className:"color-item-list no-effect",onClick:function(){return e.openView("textColor",e.designElems[l].obj,e.designElems[l].nodelist[0],l,0)}},p.a.createElement("div",{className:"color-item-link text-dark"},p.a.createElement("i",{className:"nxi nxi-move-right"})))))))),p.a.createElement("footer",{className:"d-flex mt-3"},p.a.createElement("button",{className:"btn btn-sm btn-link p-0 text-underline margin-top",onClick:function(){return e.replaceDesign(a.obj,l)}},e.language.template.replaceArt)))))})),e.imgElems.map((function(a){var l,i,n;return p.a.createElement("div",{className:"listView-elements",key:a.id},p.a.createElement("div",{className:"text-options flex-column"},p.a.createElement("div",{className:"text-options-left w-100 mb-2"},a.prefs.objectTitle),p.a.createElement("div",{className:"text-options-right w-100 justify-content-start flex-column align-items-start"},p.a.createElement("div",{className:"media w-100"},p.a.createElement("div",{className:"preview-img mr-2 rounded shadow-sm"},t(a.outerHTML,a.id)),((null===a||void 0===a||null===(l=a.prefs)||void 0===l||null===(i=l.maskInfo)||void 0===i?void 0:i.selectedMask)||"mask"===a.prefs.imgSelectionType)&&p.a.createElement("div",{className:"media-body text-left d-flex justify-content-between align-items-center w-100"},p.a.createElement("div",{className:"movearrow-Wrap ml-3"},p.a.createElement("div",{className:"btn-group"},p.a.createElement("div",{className:"btn template btn-sm btn-default bg-light",onClick:function(){return e.positionMaskImg(a,"top")}},p.a.createElement("i",{className:"nf nf-top-arrow"}),p.a.createElement("span",{className:"btn-txt"},e.language.main.top))),p.a.createElement("div",{className:"btn-group"},p.a.createElement("div",{className:"btn template btn-sm btn-default bg-light",onClick:function(){return e.positionMaskImg(a,"left")}},p.a.createElement("i",{className:"nf nf-left-arrow"}),p.a.createElement("span",{className:"btn-txt"},e.language.main.left)),p.a.createElement("div",{className:"btn template btn-sm btn-default bg-light disabled"},"\xa0"),p.a.createElement("div",{className:"btn template btn-sm btn-default bg-light",onClick:function(){return e.positionMaskImg(a,"right")}},p.a.createElement("i",{className:"nf nf-right-arrow"}),p.a.createElement("span",{className:"btn-txt"},e.language.main.right))),p.a.createElement("div",{className:"btn-group"},p.a.createElement("div",{className:"btn template btn-sm btn-default bg-light",onClick:function(){return e.positionMaskImg(a,"bottom")}},p.a.createElement("i",{className:"nf nf-bottom-arrow "}),p.a.createElement("span",{className:"btn-txt"},e.language.main.bottom)))),p.a.createElement("div",{className:"zoombtn-Wrap template"},p.a.createElement("div",{className:"btn-group"},p.a.createElement("div",{className:"btn btn-sm btn-default bg-light",onClick:function(){return e.onMaskZoomIn(a)}},p.a.createElement("i",{className:"nf nf-zoom-in"})),p.a.createElement("div",{className:"btn btn-sm btn-default bg-light",onClick:function(){return e.onMaskZoomOut(a)}},p.a.createElement("i",{className:"nf nf-zoom-out"})))))),p.a.createElement("footer",{className:"d-flex align-items-center justify-content-between w-100 mt-2"},p.a.createElement("div",null,p.a.createElement(T.a,{className:"files-dropzone",multiple:!1,accepts:["image/png",".jpg",".jpeg",".svg"],onChange:e.changeImage},p.a.createElement("button",{className:"btn btn-sm btn-link p-0 text-underline margin-top",onClick:function(){return e.replaceImage(a)}},e.language.template.uploadImage))),p.a.createElement("div",null,(null===a||void 0===a||null===(n=a.prefs)||void 0===n?void 0:n.lock)&&!1===a.prefs.lock.filter&&p.a.createElement("button",{className:"btn btn-sm btn-link p-0 text-underline",onClick:function(){return e.editImage(a)}},e.language.template.filter))))))})),e.backgroundElem&&p.a.createElement("div",{className:"listView-elements",key:"props.backgroundElem.id"},p.a.createElement("div",{className:"text-options flex-column"},p.a.createElement("div",{className:"text-options-left w-100 mb-2"},e.backgroundElem.prefs.objectTitle),p.a.createElement("div",{className:"text-options-right w-100 justify-content-start flex-column align-items-start"},p.a.createElement("div",{className:"media"},p.a.createElement("div",{className:"preview-img mr-2 rounded shadow-sm"},t(e.backgroundElem.outerHTML,e.backgroundElem.id))),p.a.createElement("footer",{className:"d-flex mt-2"},p.a.createElement("button",{className:"btn btn-sm btn-link p-0 text-underline margin-top",onClick:function(){return e.replaceDesign(e.backgroundElem,null)}},e.language.template.replaceBackground))))),e.setDesignElems())))},_=a(261),F=[],P=function(){function e(){Object(s.a)(this,e)}return Object(r.a)(e,null,[{key:"setFont",value:function(e){F.push(e)}},{key:"getFont",value:function(e){if(!e)return F;for(var t=0;t<F.length;t++)if(e===F[t].font_family)return F[t].glyph;return null}}]),e}(),j=a(3),A=a(180),V=a(187),O=a(111),D=a(22),B=a.n(D),L=function(e){return"textColor"==e.activeView?p.a.createElement(d.Fragment,null,p.a.createElement("div",{className:"element-controls-header d-none d-md-flex d-lg-flex d-xl-flex"},p.a.createElement("section",{className:"boxTitle back-to-back",onClick:function(){return e.openView("")}},p.a.createElement("div",{className:"icon",title:e.language.main.backToSection},p.a.createElement("i",{className:"nf nf-left-arrow"})),p.a.createElement("div",{className:"text"},e.language.panel.back)),p.a.createElement("div",{className:"boxTitle back-to-menu"},p.a.createElement("i",{className:"nf nf-delete"}))),p.a.createElement("div",{className:e.isDesign?"bg-wrap-colors":"bg-wrap-colors d-none"},p.a.createElement("div",{className:"thumbView-wrap temp-col-max-height scrollbar"},e.designElems&&e.designElems.length&&e.designElems[e.selectedIndex].nodelist.map((function(t,a){return p.a.createElement("div",{className:e.selctedPathIndex==a?"thumbView-elements active":"thumbView-elements",key:t.id},function(t,a,l){var i=a.getAttribute("fill")||"#000000";if(/^#([0-9A-F]{3}){1,2}$/i.test(i))return p.a.createElement("div",{onClick:function(){return e.openView("textColor",t,a,"",l)},style:{background:i,width:"30px",height:"30px"}});var n=i.substring(i.lastIndexOf("_")+1,i.lastIndexOf(")"));return p.a.createElement("div",{onClick:function(){return e.openView("textColor",t,a,"",l)},style:{background:"url("+N.a.assets_path+"/color_palettes/"+n+")",width:"30px",height:"30px"}})}(e.designElems[e.selectedIndex].obj,e.designElems[e.selectedIndex].nodelist[a],a))})))),p.a.createElement(O.a,{onColorSelect:e.onFillColorSelect,onColorHover:e.onColorHover,usedColorList:[{fill:e.colFillVal}],selectedColor:e.selectedColor}),p.a.createElement("div",{className:"buttonGroup"},p.a.createElement("button",{className:"btn btn-sm btn-success btn-block m-0 ml-1",onClick:function(){return e.openView("")}},e.language.main.done))):p.a.createElement("div",null)},R=a(39),M=a(262),H=a.n(M),U=a(96),W=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).loadFontLists=function(e){n.setState({fontList:e,loading:!1,selectedFont:e[0]})},n.loadFont=function(e){i=j.a.getActiveObject(),B()(i).children().each((function(t,a){a.prefs&&"text"===a.prefs.type&&a.id===n.state.selectedElem.id&&(l=P.getFont(e.font_family),a.prefs.font=e,l?n.setState({textProp:a.prefs},(function(){n.generateText(l,a.id)})):n.loadFontTTF(a.prefs,a.id))}))},n.setDesignElems=function(){(n.props.designElems.length||n.props.imgElems.length||n.props.backgroundElem)&&setTimeout((function(){for(var e="",t="",a="",l=0,i=document.getElementsByClassName("template_svg").length,n=0;n<i;n++){l=(t=(e=document.getElementsByClassName("template_svg")[n]).children)[0].children.length-1;for(var s=0,r=e.children.length;s<r;s++)e.children[s].children[0].children[0]&&e.children[s].children[0].children[0].hasAttribute("transform")&&e.children[s].children[0].children[0].removeAttribute("transform");e.children[0].setAttribute("preserveAspectRatio","xMinYMin meet"),t[0].children[l].getBBox().width&&t[0].children[l].getBBox().height&&(a=t[0].children[l].getBBox().x+" "+t[0].children[l].getBBox().y+" "+t[0].children[l].getBBox().width+" "+t[0].children[l].getBBox().height,e.children[0].setAttribute("viewBox",a))}}))},n.changeImage=function(e){if(e[0]){var t=new FileReader;t.onloadend=function(){var t=Object(w.a)(y.a.mark((function t(a){var l,i,s;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:l=a.target.result,i=n.b64toBlob(l.split(",")[1],e[0].type),(s=n.state.selectedElem).prefs.url=e[0].preview.url,s.prefs.updatedFile=e[0].preview.url,s.prefs.updatedBlob=i,n.setState({selectedElem:s},(function(){if(B()(s).find("image").attr("xlink:href")[0])B()(s).find("image").attr("xlink:href",e[0].preview.url),n.forceUpdate();else{var t,a,l,i=j.a.canvas.getSelectedElems()[0],r=i.prefs.edit,o=s.id;B()(i).children().each((function(i,s){s.prefs&&"image"===s.prefs.type&&s.id===o&&(j.a.canvas.ungroupSelectedElement(),j.a.canvas.selectOnly([s]),a=j.a.getActiveObject(),s.prefs.objectTitle,t=a.getBBox(),l=a.prefs,j.a.canvas.deleteSelectedElements(!0),n.importTempEditImg(e[0].preview.url,t,s,r,l))}))}}));case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),t.readAsDataURL(e[0])}},n.replaceImage=function(e){n.setState({selectedElem:e})},n.openFontList=function(e){n.setState({selectedElem:e,fullText:e.prefs.text,activeView:"fonts",isTemplateElem:!0},(function(){n.props.setHeaderDispay(!1)}))},n.selectedFont=function(e,t){n.setState({isActiveFont:e,selectedFont:t,activeView:""},(function(){n.props.setHeaderDispay(!0)}))},n.openView=function(e,t,a,l,i){void 0!=l&&""!==l||(l=l||n.state.selectedIndex),t&&t.prefs&&"clipart"==t.prefs.type?n.setState({isDesign:!0}):n.setState({isDesign:!1}),"textColor"==e?(n.setState({activeView:e,selectedObjPrefs:t,selectedPath:a,selctedPathIndex:i,selectedIndex:l},(function(){n.props.setHeaderDispay(!1)})),n.props.dispatch(Object(h.w)(1))):"quickEdit"==e?(n.props.setHeaderDispay(!1),n.props.showQuickEdit(!0)):n.setState({activeView:e},(function(){n.props.setHeaderDispay(!0)}))},n.importTempEditImg=function(e,t,a,l,i){var n=100,s=100,r=new Image;r.style.opacity=0,r.crossOrigin="Anonymous",r.addEventListener("load",(function(){n=r.offsetWidth||r.naturalWidth||r.width,s=r.offsetHeight||r.naturalHeight||r.height,function(n,s){var r=j.a.canvas.addSVGElementFromJson({element:"image",attr:{x:0,y:0,width:n,height:s,id:j.a.canvas.getNextId(),style:"pointer-events:bounding-box"}}),o=j.a.canvas.addSVGElementFromJson({element:"g",attr:{id:j.a.canvas.getNextId(),type:"template"}});o.appendChild(r),j.a.canvas.setHref(r,e),j.a.canvas.selectOnly([o]),j.a.canvas.scaleElem(j.a.canvas.getSelectedElems()[0]),j.a.canvas.alignSelectedElements("m","page"),j.a.canvas.alignSelectedElements("c","page"),j.a.canvas.getSelectedElems()[0].prefs=i;var c,m,d=1,p=1,u=1,h=a.prefs.objectTitle,g=setInterval((function(){if(c=j.a.getActiveObject()){c.prefs.objectTitle=h,m=c.getBBox(),d=t.width/m.width,p=t.height/m.height,u=d>p?p:d,j.a.canvas.scaleText(u),j.a.canvas.moveSelectedElements(t.x-m.x,t.y-m.y),j.a.canvas.selectAllInCurrentLayer();var e=j.a.canvas.getSelectedElems().filter((function(e){return"background"===e.id}))[0];j.a.canvas.removeFromSelection([e]),j.a.canvas.groupSelectedElements();var a=j.a.canvas.getSelectedElems();a[0].setAttribute("type","template"),a[0].setAttribute("pointer-events","bounding-box"),a[0].prefs={type:"template",edit:l,price:0},j.a.canvas.call("changed",a),clearInterval(g)}}),50)}(n,s)})),r.src=e},n.loadCustomFont=function(e,t){i=j.a.getActiveObject(),B()(i).children().each((function(a,i){i.prefs&&"text"===i.prefs.type&&i.id===n.state.selectedElem.id&&(l=P.getFont(t),i.prefs.font=n.state.selectedFont,l?n.setState({textProp:i.prefs},(function(){n.generateText(l,i.id)})):(P.setFont({glyph:e,font_family:t}),n.setState({textProp:i.prefs},(function(){n.generateText(e,i.id)}))))}))},n.onColorHover=function(e,t){var a;if(n.state.selectedObjPrefs){if(!e.hex_value)return;"text"===(a=n.state.selectedObjPrefs).prefs.type&&B()(a).find("path").each((function(l,i){var s,r;""!==e.hex_value&&(n.props.isEmbroideryEnable&&(r="url(#"+(s="pattern_"+a.getAttribute("id"))+")",i.setAttribute("fill",r)),t?n.props.isEmbroideryEnable?document.getElementById(s).getElementsByTagName("polygon")[0].setAttribute("fill",e.hex_value):i.setAttribute("fill",e.hex_value):n.props.isEmbroideryEnable?document.getElementById(s).getElementsByTagName("polygon")[0].setAttribute("fill",n.props.colFillVal):a.prefs&&a.prefs.isPatternFill?i.setAttribute("fill","url(#"+a.prefs.colors[0]+")"):i.setAttribute("fill",n.state.colFillVal))}))}},n.editImage=function(e){var t;n.setState({selectedElem:e,activeView:"tempImageEdit"}),n.props.setHeaderDispay(!1),(null===e||void 0===e||null===(t=e.prefs)||void 0===t?void 0:t.filterInfo)&&n.setState({appliedFilter:e.prefs.filterInfo}),n.templateImgEditRef&&n.templateImgEditRef.resetFilter()},n.closeImageEdit=function(){n.setState({activeView:""}),n.props.setHeaderDispay(!0)},n.onMaskZoomIn=function(e){n.zoomUploadImage(e,10)},n.onMaskZoomOut=function(e){n.zoomUploadImage(e,-10)},n.positionMaskImg=function(e,t){var a,l=e;if((null===l||void 0===l||null===(a=l.prefs)||void 0===a?void 0:a.type)&&"image"===l.prefs.type){var i=document.getElementById(l.id).getElementsByTagName("image")[0],s=i.getBBox();switch(t){case"left":i.setAttribute("x",s.x-5);break;case"right":i.setAttribute("x",s.x+5);break;case"top":i.setAttribute("y",s.y-5);break;case"bottom":i.setAttribute("y",s.y+5)}n.updateThumPreview(e)}},n.zoomUploadImage=function(e,t){var a,l=e;if((null===l||void 0===l||null===(a=l.prefs)||void 0===a?void 0:a.type)&&"image"===l.prefs.type){var i=document.getElementById(l.id).getElementsByTagName("image")[0],s=i.getBBox();e.prefs.imgSelectionType||((s.width>250||s.height>250)&&(s.width=s.height=250),(s.width<150||s.height<150)&&(s.width=s.height=150)),i.setAttribute("width",s.width+t),i.setAttribute("height",s.height+t),n.updateThumPreview(e)}},n.updateThumPreview=function(e){for(var t="",a=document.getElementsByClassName("template_svg").length,l=0;l<a;l++){(t=document.getElementsByClassName("template_svg")[l]).children[0].children.length-1;for(var i=0,n=t.children.length;i<n;i++){if(t.children[i].getAttribute("id").replace("thumb_","")===e.id){var s=document.getElementById(e.id).getElementsByTagName("image")[0],r=t.children[i].getElementsByTagName("image")[0];r.setAttribute("height",s.getAttribute("height")),r.setAttribute("width",s.getAttribute("width")),r.setAttribute("x",s.getAttribute("x")),r.setAttribute("y",s.getAttribute("y"))}}}},n.resetImage=function(e){var t=n.props.imgResetData.filter((function(t){return t.id===e.id}))[0];if(null===t||void 0===t?void 0:t.maskData){var a,l=document.getElementById(e.id).getElementsByTagName("image")[0];l.setAttribute("x",t.maskData.x),l.setAttribute("y",t.maskData.y),l.setAttribute("width",t.maskData.width),l.setAttribute("height",t.maskData.height),(null===e||void 0===e||null===(a=e.prefs)||void 0===a?void 0:a.imgSelectionType)&&"mask"===e.prefs.imgSelectionType&&j.a.canvas.removeFromSelection([e]),n.forceUpdate()}},n.checkResetStatus=function(e){var t=document.getElementById(e.id).getElementsByTagName("image")[0],a=n.props.imgResetData.filter((function(t){return t.id===e.id}))[0];return!(!(null===a||void 0===a?void 0:a.maskData)||a.maskData.x===t.getAttribute("x")&&a.maskData.y===t.getAttribute("y")&&a.maskData.width===t.getAttribute("width")&&a.maskData.height===t.getAttribute("height"))},n.state={fontList:[],fontGlyph:null,fullText:"",textProp:{},designList:[],selectedElem:null,selectedFont:null,activeView:"",isActiveFont:[!0],isTemplateElem:!0,appliedFilter:null,selectedIndex:0},n.onTextChange=n.onTextChange.bind(Object(o.a)(n)),n.loadFontLists=n.loadFontLists.bind(Object(o.a)(n)),n.loadTemplateFonts=n.loadTemplateFonts.bind(Object(o.a)(n)),n.loadCustomFont=n.loadCustomFont.bind(Object(o.a)(n)),n.onFillColorSelect=n.onFillColorSelect.bind(Object(o.a)(n)),n}return Object(r.a)(a,[{key:"componentDidMount",value:function(){(0,this.props.templateEditChildRef)(this),A.a.name in j.a.canvas.extensions||(j.a.addExtension(A.a.name,(function(){A.a.init({$:B.a,editor:j.a})}),{$:B.a}),V.a.name in j.a.canvas.extensions||(j.a.addExtension(V.a.name,(function(){V.a.init({$:B.a,editor:j.a,misCharacter:H.a})}),{$:B.a}),this.loadTemplateFonts(this.props.textElems)))}},{key:"loadTemplateFonts",value:function(e){for(var t=null,a=0;a<e.length;a++)if(t=e[a].prefs.font){if(P.getFont(t.font_family))return;this.downloadFontFile(t)}}},{key:"downloadFontFile",value:function(e){Object(U.a)(e.file_name,(function(t,a){t?console.log("Font could not be loaded: "+t):P.setFont({glyph:a,font_family:e.font_family})}))}},{key:"loadFontTTF",value:function(e,t){var a=this;Object(U.a)(e.font.file_name,(function(l,i){l?console.log("Font could not be loaded: "+l):(P.setFont({glyph:i,font_family:e.font.font_family}),a.setState({textProp:e},(function(){a.generateText(i,t)})))}))}},{key:"onTextChange",value:function(e,t){var a=this;i=j.a.getActiveObject(),B()(i).children().each((function(i,n){if(n.prefs)if("text"!==n.prefs.type||n.prefs.subType||n.id!==t.id)"text"===n.prefs.type&&n.prefs.subType&&n.id===t.id&&(n.prefs.text=e.target.value,a.setState({textProp:n.prefs},(function(){a.generateText(l,n.id)})));else{n.prefs.text=e.target.value;var s="";if(!0===n.prefs.isVertical&&n.prefs.text.length>1){for(var r=0;r<n.prefs.text.length;r++)"\n"!==n.prefs.text.length[r]&&(r<n.prefs.text.length-1?s+=n.prefs.text[r]+"\n":s+=n.prefs.text[r]);n.prefs.text=s}n.prefs.operation="update",(l=P.getFont(n.prefs.font.font_family))?a.setState({textProp:n.prefs},(function(){a.generateText(l,n.id)})):a.loadFontTTF(n.prefs,n.id)}}))}},{key:"generateText",value:function(e,t){e&&this.state.textProp&&"graphicText"!==this.state.textProp.subType?j.a.generateTextElm(this.state.textProp.text,e,this.state.textProp.align,this.state.textProp.effect,this.state.textProp.font,this.state.textProp.letterSpace,this.state.textProp.lineSpace,this.state.textProp.fill,this.state.textProp.stroke,this.state.textProp.strokeWidth,this.state.textProp.noOfLines,t,null,null,null,this.state.textProp.fontSize,null,null,this.state.textProp.artSize):this.state.textProp&&"graphicText"===this.state.textProp.subType?j.a.generateGraphicsText(this.state.textProp.text,this.state.textProp.font,t,this.state.textProp.fontHeight,this.state.textProp.textLen,this.state.textProp.objectTitle):alert("Unable to load font")}},{key:"b64toBlob",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:512,l=window.atob(e),i=[],n=0;n<l.length;n+=a){for(var s=l.slice(n,n+a),r=new Array(s.length),o=0;o<s.length;o++)r[o]=s.charCodeAt(o);var c=new Uint8Array(r);i.push(c)}var m=new Blob(i,{type:t});return m}},{key:"onFillColorSelect",value:function(e){var t=this,a=[],l=[];a=j.a.canvas.getAllStageElems(),e.hex_value&&(this.lastColor=e.hex_value);for(var i=0;i<a.length;i++)if("background"!==a[i].getAttribute("id")){a=a[i].children;break}if(!e.hex_value){var s=e.value.replace(/^.*[\\\/]/,"");j.a.canvas.setPatternDefs(s,e.value)}Object(n.a)(a).forEach((function(a,i){if(a.prefs){if(a.prefs&&a.id==t.state.selectedObjPrefs.id)if("text"!==a.prefs.type||a.prefs.subType){if("clipart"===a.prefs.type||"shape"===a.prefs.type)for(var n=a.querySelectorAll("path,polygon,circle,rect,ellipse"),s=0;s<n.length;s++)for(var r=0;r<n.length;r++)if(n[r].getAttribute("colKey")==t.state.selectedPath.getAttribute("colKey"))if(e.hex_value)n[r].setAttribute("fill",e.hex_value);else{var o=e.value.match(new RegExp("thumb_(.*)."));o&&(n[r].setAttribute("fill","url(#"+o[0]+")"),a.prefs.colors=[o[0]])}}else{var c=a.getElementsByTagName("path"),m=e.value;if(e.hex_value){for(var d=a.getElementsByTagName("path"),p=0;p<d.length;p++)d[p].setAttribute("fill",e.hex_value),a.prefs.colors=[e.hex_value];t.setState({colFillVal:e.hex_value})}else for(var u=m.match(new RegExp("thumb_(.*).")),h=0;h<c.length;h++)e.hex_value?(c[h].setAttribute("fill",e.hex_value),a.prefs.colors=[e.hex_value]):u&&(c[h].setAttribute("fill","url(#"+u[0]+")"),a.prefs.colors=[u[0]]);a.prefs.fill=e.hex_value||e.value}"text"!==a.prefs.type||a.prefs.subType||l.push(a)}})),this.setState({textElems:l})}},{key:"render",value:function(){var e=this;return p.a.createElement(d.Fragment,null,p.a.createElement(R.a,{key:"templateEditView"},p.a.createElement(I,{selectedElems:this.props.selectedElems,activeView:this.state.activeView,textElems:this.props.textElems,imgElems:this.props.imgElems,designElems:this.props.designElems,onTextChange:this.onTextChange,setDesignElems:this.setDesignElems,loadTemplateFonts:this.loadTemplateFonts,replaceDesign:this.props.replaceDesign,replaceImage:this.replaceImage,changeImage:this.changeImage,openFontList:this.openFontList,graphicsElements:this.props.graphicsElements,language:this.props.language,backgroundElem:this.props.backgroundElem,openView:this.openView,editImage:this.editImage,onMaskZoomIn:this.onMaskZoomIn,onMaskZoomOut:this.onMaskZoomOut,positionMaskImg:this.positionMaskImg,resetImage:this.resetImage,checkResetStatus:this.checkResetStatus})),p.a.createElement(R.a,{key:"templateEditFont"},p.a.createElement(_.a,{key:"fonts",openView:this.openView,activeView:this.state.activeView,loadFont:this.loadFont,loadFontLists:this.loadFontLists,selectedFont:this.selectedFont,fullText:this.state.fullText,isTemplateElem:this.state.isTemplateElem,showNotification:this.props.showNotification,loadCustomFont:this.loadCustomFont})),p.a.createElement(R.a,{key:"templateEditColor"},p.a.createElement(L,{onFillColorSelect:this.onFillColorSelect,onColorHover:this.onColorHover,activeView:this.state.activeView,openView:this.openView,language:this.props.language,selectedColor:this.lastColor,selectedIndex:this.state.selectedIndex,designElems:this.props.designElems,selctedPathIndex:this.state.selctedPathIndex,isDesign:this.state.isDesign})),p.a.createElement(R.a,{key:"templateEditImage"},p.a.createElement(O.b,{templateImgEditRef:function(t){return e.templateImgEditRef=t},selectedElems:this.state.selectedElem,activeView:this.state.activeView,appliedFilter:this.state.appliedFilter,closeImageEdit:this.closeImageEdit})))}}]),a}(p.a.Component),z=Object(u.b)((function(e){return{language:e.languageReducer.translation_data.filter((function(t){return t.langCode===e.languageReducer.default_lang}))[0]}}))(W),J=a(157),q=a(77),Z=[],$=[],G=[],K=[],Q=[],X="",Y=0,ee=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(e){var l;return Object(s.a)(this,a),(l=t.call(this,e)).getUrlParameter=function(e){return("Shopify"!==window.storeType&&"Others"!==window.storeType&&"Hosted"!==window.storeType?new URLSearchParams(window.parent.location.search):new URLSearchParams(window.location.search)).get(e)},l.setBackgroundElement=function(){for(var e=j.a.canvas.getCurrentLayerElems(),t=0,a=0;a<e.length;a++){var l,i,n,s,r;if("background"===(null===(l=e[a])||void 0===l||null===(i=l.prefs)||void 0===i?void 0:i.type)&&!(null===(n=e[a])||void 0===n||null===(s=n.prefs)||void 0===s||null===(r=s.lock)||void 0===r?void 0:r.edit)){X=e[a],t++;break}}0===t&&(X="")},l.getMaskImgPosition=function(e){var t,a;if((null===e||void 0===e||null===(t=e.prefs)||void 0===t||null===(a=t.maskInfo)||void 0===a?void 0:a.selectedMask)||"mask"===e.prefs.imgSelectionType){var i=document.getElementById(e.id).getElementsByTagName("image")[0];if(!l.imgResetData.find((function(t){return t.id===e.id}))){var n={id:e.id,isChanged:!1,maskData:{x:i.getAttribute("x"),y:i.getAttribute("y"),width:i.getAttribute("width"),height:i.getAttribute("height")}};l.imgResetData.push(n)}}},l.state={activeView:"",selectedElems:[],textElems:[],imgElems:[],designs:[],graphicsElements:[],filterType:N.a.is_default_edit_template?"quick":"free",currentSideIndex:0,backgroundElem:"",productBasedTempId:""},l.templateInfo={name:"",page:"1",order:"desc",perpage:"40",catagory:"",print_profile:""},l.hasMorePage=!0,l.remainingTemp=0,l.selectedCatSubCat="",l.imgResetData=[],l.loadMoreTemplate=l.loadMoreTemplate.bind(Object(o.a)(l)),l.addTemplateToCanvas=l.addTemplateToCanvas.bind(Object(o.a)(l)),l.onCatSubcatSelect=l.onCatSubcatSelect.bind(Object(o.a)(l)),l.onFilterApplyClicked=l.onFilterApplyClicked.bind(Object(o.a)(l)),l.onFilterSearch=l.onFilterSearch.bind(Object(o.a)(l)),l.afterClearFilter=l.afterClearFilter.bind(Object(o.a)(l)),l.showHideBackLoader=l.showHideBackLoader.bind(Object(o.a)(l)),l.afterPrimeCatSet=l.afterPrimeCatSet.bind(Object(o.a)(l)),l.showTemplateView=l.showTemplateView.bind(Object(o.a)(l)),l.selectTemplateType=l.selectTemplateType.bind(Object(o.a)(l)),l.isEngraveEnable=!!(l.props.selectedPrintProfileData&&l.props.selectedPrintProfileData.engrave&&l.props.selectedPrintProfileData.engrave.is_laser_engrave_enabled),l.isChangeProduct=!!l.getUrlParameter("cid"),l}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props.printProfileReducer.selected_print_profile,a=this.props.allCatData.filter((function(e){return e.printProfileId===t}))[0];a&&a.catLoadStatus||this.props.dispatch(Object(h.t)(t,this.props.allCatData)).then((function(t){(t&&!t.data||t&&t.data&&0===t.data.length)&&e.afterPrimeCatSet([])})),this.props.tagLoadStatus||this.props.dispatch(Object(h.r)()),this.isChangeProduct&&(this.props.templateEditType?this.setState({filterType:"quick"}):this.setState({filterType:"free"}));var l=new URLSearchParams(window.location.search),i="";this.storeType=Object(q.d)(),window.storeType=this.storeType,i="Shopify"!==this.storeType&&"Others"!==this.storeType&&"Hosted"!==this.storeType?new URLSearchParams(window.parent.location.search):new URLSearchParams(window.location.search),this.productBasedTempId=parseInt(l.get("pbti"))?parseInt(l.get("pbti")):parseInt(i.get("pbti")),this.setState({productBasedTempId:this.productBasedTempId})}},{key:"afterPrimeCatSet",value:function(e){this.selectedCatSubCat=Object(n.a)(e),this.selectedCatSubCat&&(this.templateInfo.catagory=this.selectedCatSubCat.length?JSON.stringify(this.selectedCatSubCat):null);var t=this.props.printProfileReducer.selected_print_profile;this.templateInfo.print_profile=JSON.stringify([t]);var a=this.props.allTemplate.filter((function(e){return e.printProfileId===t}))[0];a&&a.templateLoadStatus||this.props.dispatch(Object(h.s)(this.templateInfo,this.props.allTemplate))}},{key:"addTemplateToCanvas",value:function(e){var t=this;K=[],this.imgResetData=[],this.props.resetReplaceDesignIndex(),this.showHideBackLoader(!0),this.props.dispatch(Object(h.u)(e)).then((function(e){var a=0,l=e.data[0];if((null===l||void 0===l?void 0:l.design_data)&&l.design_data.length&&l.design_data.forEach((function(e){(null===e||void 0===e?void 0:e.svg)&&a++})),a>0)if(a>1)t.props.applyTemplate(e.data[0]);else{var i="";(null===l||void 0===l?void 0:l.design_data)&&l.design_data.length&&(l.design_data.forEach((function(e){(null===e||void 0===e?void 0:e.svg)&&(i=e.svg)})),i&&(null===l||void 0===l?void 0:l.color_hash_codes)&&j.a.canvas.loadTemplate(decodeURI(i),l.color_hash_codes,l.is_easy_edit,t.showHideBackLoader,N.a.assets_path,t.isEngraveEnable))}t.props.dispatch(Object(h.x)(e.data[0].is_easy_edit)),e.data[0].is_easy_edit?window.isEasyEdit=!0:window.isEasyEdit=!1}))}},{key:"loadMoreTemplate",value:function(){if(!j.a.canvas.isAreaChange){if(""===this.templateInfo.print_profile){var e=this.props.printProfileReducer.selected_print_profile;this.templateInfo.print_profile=JSON.stringify([e])}this.templateInfo.page=this.props.templates.pageNo;var t=Math.ceil(this.props.templates.templateData.total_records/this.templateInfo.perpage);this.templateInfo.page<t&&(this.templateInfo.page=parseInt(this.templateInfo.page)+1,this.props.dispatch(Object(h.s)(this.templateInfo,this.props.allTemplate)),this.remainingTemp=this.props.templates.templateData.total_records-this.props.templates.templateData.data.length,this.remainingTemp<this.templateInfo.perpage&&(this.hasMorePage=!1))}}},{key:"onCatSubcatSelect",value:function(e){this.selectedCatSubCat=Object(n.a)(e)}},{key:"onFilterApplyClicked",value:function(){this.templateInfo.page=1,this.selectedCatSubCat&&(this.templateInfo.catagory=this.selectedCatSubCat.length?JSON.stringify(this.selectedCatSubCat):null),this.props.dispatch(Object(h.s)(this.templateInfo,this.props.allTemplate))}},{key:"onFilterSearch",value:function(e){this.templateInfo.name=e,this.templateInfo.page=1,this.selectedCatSubCat&&(this.templateInfo.catagory=this.selectedCatSubCat.length?JSON.stringify(this.selectedCatSubCat):null),this.props.dispatch(Object(h.s)(this.templateInfo,this.props.allTemplate,!0))}},{key:"afterClearFilter",value:function(){this.templateInfo.page=1,this.selectedCatSubCat&&(this.templateInfo.catagory=this.selectedCatSubCat.length?JSON.stringify(this.selectedCatSubCat):null),this.props.dispatch(Object(h.s)(this.templateInfo,this.props.allTemplate,!0)),this.setPrimeCatStatus()}},{key:"showTemplateFilter",value:function(e,t,a,l,i,n){var s=this;if(e&&e.catData&&e.catData.length)return p.a.createElement(R.a,{key:"tempmultiselect"},p.a.createElement(J.a,{onRef:function(e){return s.multiselectChild=e},options:e.catData,onSelectOptions:this.onCatSubcatSelect,onApplyClicked:this.onFilterApplyClicked,onSearchDataEntered:this.onFilterSearch,afterClearAll:this.afterClearFilter,tagList:l.data,afterPrimeCatSet:this.afterPrimeCatSet,primeCatStatus:e.primeCatStatus}))}},{key:"elementSelected",value:function(e){var t=this,a=this.props.replaceDesignIndex;Y=this.props.productCanvasReducer.active_product_side,this.state.currentSideIndex!==Y&&this.setState({activeView:"",currentSideIndex:Y}),$=[],G=[],Z=[],Q=[],null!==a&&void 0!=a||"edit"===this.state.activeView||(K=[]);var l=null;e&&e.prefs&&"template"===e.prefs.type&&!0===e.prefs.edit?("edit"!==this.state.activeView&&(B()(e).children().each((function(e,i){if(i.prefs){var n,s,r,o,c,m,d,p;if("text"!==i.prefs.type||i.prefs.subType||(null===(n=i.prefs)||void 0===n||null===(s=n.lock)||void 0===s?void 0:s.edit))if("image"!==i.prefs.type||(null===(r=i.prefs)||void 0===r||null===(o=r.lock)||void 0===o?void 0:o.edit))if("clipart"!==i.prefs.type&&"shape"!==i.prefs.type||(null===(c=i.prefs)||void 0===c||null===(m=c.lock)||void 0===m?void 0:m.edit))"text"===i.prefs.type&&i.prefs.subType&&!(null===(d=i.prefs)||void 0===d||null===(p=d.lock)||void 0===p?void 0:p.edit)&&Q.push(i);else{for(var u=i.querySelectorAll("path,polygon,circle,rect,ellipse"),h=[],g=0;g<u.length;g++){var f=u[g].getAttribute("fill");u[g].setAttribute("colKey",f),h.push(u[g])}K.length&&null!==a&&void 0!=a?(K[a].obj=i,K[a].nodelist=h):K.push({obj:i,nodelist:h})}else(l=B()(i).find("image")[0])&&(i.prefs.url=l.getAttribute("xlink:href")),G.push(i),t.getMaskImgPosition(i);else $.push(i);Z.push(i)}})),this.setBackgroundElement(),($.length||G.length||K.length||Q.length||""!==X)&&this.openView("edit",e)),this.templateEditChildRef&&this.templateEditChildRef.setDesignElems()):this.openView("",e)}},{key:"openView",value:function(e){var t=this;this.setState({activeView:e,selectedElems:Z,textElems:$,imgElems:G,designs:K,graphicsElements:Q,backgroundElem:X},(function(){t.props.setHeaderDispay(!0)}))}},{key:"showHideBackLoader",value:function(e){this.props.showHideBackLoader(e,"template")}},{key:"setPrimeCatStatus",value:function(){for(var e=this.props.printProfileReducer.selected_print_profile,t=Object(n.a)(this.props.allCatData),a=0;a<t.length;a++)if(t[a].printProfileId===e){t[a].primeCatStatus=!1;break}this.props.dispatch(Object(h.v)(t))}},{key:"showTemplateView",value:function(e,t,a,l){return a&&a.templateData&&a.templateData.data?(a.templateData.records<this.templateInfo.perpage?this.hasMorePage=!1:this.hasMorePage=!0,p.a.createElement(E,{templates:a.templateData.data,addTemplateToCanvas:this.addTemplateToCanvas,error:e,loading:t,loadMoreTemplate:this.loadMoreTemplate,hasMore:this.hasMorePage,totalTemp:this.props.templates.templateData.total_records,language:l,activeView:this.state.activeView,catLoading:this.props.catLoading,filterType:this.state.filterType,selectTemplateType:this.selectTemplateType,productBasedTempId:this.state.productBasedTempId})):p.a.createElement(E,{error:e,loading:t,catLoading:this.props.catLoading,productBasedTempId:this.state.productBasedTempId})}},{key:"selectTemplateType",value:function(e){this.setState({filterType:e})}},{key:"render",value:function(){var e=this,t=this.props,a=t.error,l=t.loading,i=t.templates,n=t.templateCat,s=t.catLoading,r=t.catError,o=t.templateTag,c=t.tagLoading,m=t.tagError,u=t.language;return p.a.createElement(d.Fragment,null,""===this.state.activeView&&this.showTemplateFilter(n,s,r,o,c,m),this.showTemplateView(a,l,i,u),"edit"===this.state.activeView&&p.a.createElement(R.a,{key:"tempedit"},p.a.createElement(z,{templateEditChildRef:function(t){return e.templateEditChildRef=t},selectedElems:this.state.selectedElems,textElems:this.state.textElems,imgElems:this.state.imgElems,designElems:this.state.designs,graphicsElements:this.state.graphicsElements,replaceDesign:this.props.replaceDesign,setHeaderDispay:this.props.setHeaderDispay,showNotification:this.props.showNotification,backgroundElem:this.state.backgroundElem,imgResetData:this.imgResetData})))}}]),a}(p.a.Component),te=Object(u.b)((function(e){return{templates:e.template.items.filter((function(t){return t.printProfileId===e.printProfileReducer.selected_print_profile}))[0],loading:e.template.loading,error:e.template.error,template:e.template.details,isTemplatesLoaded:e.template.isTemplatesLoaded,categoryLoadStatus:e.template.categoryLoadStatus,tagLoadStatus:e.template.tagLoadStatus,templateCat:e.template.catItem.filter((function(t){return t.printProfileId===e.printProfileReducer.selected_print_profile}))[0],catLoading:e.template.catLoading,catError:e.template.catError,templateTag:e.template.tagItem,tagLoading:e.template.tagLoading,tagError:e.template.tagError,pageNo:e.template.pageNo,language:e.languageReducer.translation_data.filter((function(t){return t.langCode===e.languageReducer.default_lang}))[0],printProfileReducer:e.printProfileReducer,productCanvasReducer:e.productCanvasReducer,allTemplate:e.template.items,allCatData:e.template.catItem,selectedPrintProfileData:e.printProfileReducer.print_profile_data.filter((function(t){return t.id===e.printProfileReducer.selected_print_profile}))[0],templateEditType:e.template.templateEditType}}))(ee);a.d(t,"default",(function(){return te}))}}]);