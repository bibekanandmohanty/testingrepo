(this["webpackJsonpinkxe10-designer"]=this["webpackJsonpinkxe10-designer"]||[]).push([[3],{925:function(e,t,a){e.exports=a.p+"static/media/dropbox.5a7a473e.svg"},926:function(e,t,a){e.exports=a.p+"static/media/facebook.b5fcf817.svg"},927:function(e,t,a){e.exports=a.p+"static/media/google-drive.7fea10b7.svg"},937:function(e,t,a){"use strict";a.r(t);var o,r,n,l,i,s,c,m,d,u,g=a(23),p=a(4),f=a(7),h=a(9),b=a.n(h),v=a(20),k=a(10),E=a(11),C=a(13),x=a(16),w=a(15),S=a(0),y=a.n(S),I=a(46),N=a(24),_=a(925),V=a.n(_),F=a(926),L=a.n(F),T=a(927),P=a.n(T),M=a(260),O=a.n(M),B=a(859),A=a(861),j=a(258),D=function(e){return y.a.createElement("div",{className:"upload-section"},y.a.createElement("div",{className:"files"},y.a.createElement(S.Fragment,null,y.a.createElement(O.a,{className:"files-dropzone",onChange:e.onFilesChange,onError:e.onFilesError,accepts:e.mimeType,maxFileSize:1048576*e.globalSettings.file_uploaded.max_file,minFileSize:0,multiple:!1,clickable:!e.termConditions.is_enabled||e.termConditions.is_default_status},y.a.createElement("div",{className:"nx-drop-box",style:{cursor:"pointer"}},y.a.createElement("i",{className:"nxi nxi-upload nx-drop-icon",style:{overflow:"hidden"}}),y.a.createElement("span",{className:"nx-drop-text"},e.language.image.dragAndDrop),!e.uploadImageLoader&&y.a.createElement("div",{className:"w-100 orBox"},y.a.createElement("span",null,e.language.main.or)),y.a.createElement("input",{type:"file",style:{width:"0px",height:"0px",position:"absolute",padding:"0px",margin:"0px",overflow:"hidden",opacity:0}}),y.a.createElement("a",{className:"nx-drop-btn",style:{overflow:"hidden"},onClick:function(){return e.displayTcWarn()}},e.language.image.browseFile))),e.uploadImageLoader&&y.a.createElement("div",{className:"loader"},y.a.createElement("div",{className:"loader-gif"},y.a.createElement("svg",{version:"1.1",id:"L4",xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",viewBox:"0 0 50 50",enableBackground:"new 0 0 0 0"},y.a.createElement("circle",{fill:"#28a745",stroke:"none",cx:"5",cy:"25",r:"5"},y.a.createElement("animate",{attributeName:"opacity",dur:"1s",values:"0;1;0",repeatCount:"indefinite",begin:"0.1"})),y.a.createElement("circle",{fill:"#28a745",stroke:"none",cx:"25",cy:"25",r:"5"},y.a.createElement("animate",{attributeName:"opacity",dur:"1s",values:"0;1;0",repeatCount:"indefinite",begin:"0.2"})),y.a.createElement("circle",{fill:"#28a745",stroke:"none",cx:"45",cy:"25",r:"5"},y.a.createElement("animate",{attributeName:"opacity",dur:"1s",values:"0;1;0",repeatCount:"indefinite",begin:"0.3"})))),y.a.createElement("h3",{className:"loader-title"}," ",e.language.image.upload),y.a.createElement("h4",{className:"loader-text"},e.language.image.uploadMessage)))),y.a.createElement("h6",{className:"small-txt"},e.language.image.acceptedFileTypes,"0"!==e.globalSettings.file_uploaded.max_file&&0!==e.globalSettings.file_uploaded.max_file&&y.a.createElement(S.Fragment,null,"(",e.language.image.max_size,": ",e.globalSettings.file_uploaded.max_file," MB)")),y.a.createElement("div",{className:"upload-info mb-3"},e.allowedImageFormat&&e.allowedImageFormat.map((function(e,t){return y.a.createElement("span",{key:e.id},e.name)}))),!e.uploadImageLoader&&e.termConditions.is_enabled&&y.a.createElement(S.Fragment,null,!1===e.isMobileView&&y.a.createElement(B.a,{className:"uploadTerms",trigger:"legacy",placement:"top",target:"termConditions"},y.a.createElement(A.a,null,e.language.image.agreeImageTerms)),e.isMobileView&&y.a.createElement(j.a,{className:"uploadTerms",trigger:"legacy",placement:"top",target:"termConditions",isOpen:e.popoverOpen},y.a.createElement(A.a,null,e.language.image.agreeImageTerms,y.a.createElement("div",{className:"d-block d-sm-block d-md-none d-lg-none d-xl-none"},y.a.createElement("div",{className:"btn btn-sm btn-dark btn-block text-light",onClick:e.togglePopover},"Close")))),y.a.createElement("div",{className:"termBox"},y.a.createElement("div",{className:"custom-control custom-checkbox mt-3"},y.a.createElement("input",{type:"checkbox",className:"custom-control-input",id:"customControlAutosizing",checked:e.termConditions.is_default_status,onChange:function(t){e.onChangeTermCondition(t)}}),y.a.createElement("label",{className:"custom-control-label",htmlFor:"customControlAutosizing"},e.language.main.agree),y.a.createElement("label",{className:"pl-1 text-dark cursor-pointer text-underline",id:"termConditions",onClick:e.togglePopover},e.language.main.tc)),e.isDisplayTcWarn&&y.a.createElement("h6",{className:"alert alert-danger small-txt tip mt-4"},y.a.createElement("i",{className:"alert-icon"}),y.a.createElement("span",{className:"alert-txt"},e.language.image.tc)))),!e.uploadImageLoader&&(e.globalSettings.facebook_import.is_enabled||e.globalSettings.google_drive_import.is_enabled||e.globalSettings.dropbox_import.is_enabled)&&y.a.createElement(S.Fragment,null,y.a.createElement("div",{className:"w-100 orBox mb-3 mt-2"},y.a.createElement("span",null,e.language.main.or)),y.a.createElement("h6",{className:"sec-title"},e.language.image.importSocialMedia),y.a.createElement("ul",{className:"upload-social"},!e.uploadImageLoader&&e.globalSettings.facebook_import.is_enabled&&y.a.createElement("li",{className:"fb-login-button","data-max-rows":"1","data-size":"large","data-button-type":"login_with","data-show-faces":"false","data-scope":"public_profile,email,user_photos,name","data-auto-logout-link":"false","data-use-continue-as":"true",onClick:function(){return e.loginFacebook()}},y.a.createElement("a",null,y.a.createElement("span",{className:"icon"},y.a.createElement("img",{src:L.a,alt:""}))," Facebook")),!e.uploadImageLoader&&e.globalSettings.google_drive_import.is_enabled&&y.a.createElement("li",{onClick:function(){return e.loginGoogleDrive()}},y.a.createElement("a",null,y.a.createElement("span",{className:"icon"},y.a.createElement("img",{src:P.a,alt:""}))," Google Drive")),!0===e.globalSettings.dropbox_import.is_enabled&&y.a.createElement("li",{onClick:function(){return e.loginDropBox()}}," ",y.a.createElement("a",null,y.a.createElement("span",{className:"icon"},y.a.createElement("img",{src:V.a,alt:""}))," Dropbox")))),function(){var t=e.imageSettings.allowed_image_format.filter((function(e){return e.is_selected})),a=!1;if(e.historyImageList&&e.historyImageList.length){for(var o=function(o){var r=e.historyImageList[o].file_name.split(".").pop();if(-1!==t.findIndex((function(e){return e.name===r})))return a=!0,"break"},r=0;r<e.historyImageList.length;r++){if("break"===o(r))break}if(a)return y.a.createElement(S.Fragment,null,!e.uploadImageLoader&&y.a.createElement("div",{className:"w-100 orBox mb-3 mt-3"},y.a.createElement("span",null,e.language.main.or)),y.a.createElement("h6",{className:"sec-title"},e.language.image.recentUploaded),!e.uploadImageLoader&&y.a.createElement("div",{className:"scroll-bar-wrap"},y.a.createElement("div",{className:"thumbView scrollbar"},y.a.createElement("div",{className:"thumbView-wrap"},e.historyImageList.map((function(a,o){return function(t,a,o){var r=t.file_name.split(".").pop();if(-1!==o.findIndex((function(e){return e.name===r})))return y.a.createElement("div",{key:a,className:"thumbView-elements overflow-unset"},y.a.createElement("div",{className:"imageWrap recent-upload-hover"},y.a.createElement("button",{className:"close",onClick:function(){return e.deleteHistoryImage(t.file_name,a)}},"\xd7"),y.a.createElement("figure",{className:"imageWrap-box",onClick:function(){return e.addHistoryImage(t)}},y.a.createElement("img",{src:t.thumbnail,alt:""}))))}(a,o,t)}))))))}}())},R=a(3),W=a(111),H=a(19),G=a.n(H),U=a(134),z=a.n(U),q=function(e){function t(){var t,a,o;return e.autoConvertStatus?"one_color"===e.imageSettings.auto_convert_image_type&&e.imageSettings.is_change_color?y.a.createElement(S.Fragment,null,e.isShowColorOption&&y.a.createElement("div",{className:"onecolor"===e.optionIndexVal?"onecolor d-flex justify-content-between align-items-center mt-2":"d-none"},y.a.createElement("div",{className:"d-flex justify-content-between align-items-center flex-fill"},y.a.createElement("h6",{className:"sectitle"},e.language.image.selectColors),y.a.createElement("div",{className:"color-block"},y.a.createElement("div",(o={id:"oneColor",className:"color-box",style:{backgroundColor:e.oneColor}},Object(g.a)(o,"style","none"===e.oneColor||"transparent"===e.oneColor?{backgroundImage:"url("+z.a+")"}:{backgroundColor:e.oneColor}),Object(g.a)(o,"title",""),Object(g.a)(o,"onClick",(function(){return e.onChangeSingleColor(e.oneColor)})),o)))),y.a.createElement("div",{className:"icon"},y.a.createElement("i",{className:"nxi nxi-move-right"})))):void 0:y.a.createElement("div",{className:"upload-section-list vector-color pt-2"},!1===e.isMobileView&&(1===e.imageSettings.show_color_option.bw||1===e.imageSettings.show_color_option.grey_scale||1===e.imageSettings.show_color_option.one_color||1===e.imageSettings.show_color_option.monochrome)&&y.a.createElement("div",{className:"d-flex justify-content-between align-items-center"},y.a.createElement("h6",{className:"sectitle"},e.language.image.changeColorOptions),y.a.createElement("div",{id:"reduceSvg",style:{display:"none"}})),y.a.createElement("div",{className:"thumbView-wrap"},1===e.imageSettings.show_color_option.bw&&y.a.createElement("div",{className:"blackWhite"===e.optionIndexVal?"thumbView-elements active flex-column":"thumbView-elements flex-column"},y.a.createElement("div",{className:"imageWrap h-auto",onClick:function(){return e.convertImage(e.intermediateFile,"blackWhite",!1)}},y.a.createElement("figure",{className:"imageWrap-box"},y.a.createElement("img",{src:e.intermediateFile,style:{filter:"grayscale(100%) brightness(2)"},alt:"Black & White"}))),y.a.createElement("small",null,"B&W")),1===e.imageSettings.show_color_option.grey_scale&&y.a.createElement("div",{className:"grayScale"===e.optionIndexVal?"thumbView-elements active flex-column":"thumbView-elements flex-column"},y.a.createElement("div",{className:"imageWrap h-auto",onClick:function(){return e.convertImage(e.intermediateFile,"grayScale",!1)}},y.a.createElement("figure",{className:"imageWrap-box"},y.a.createElement("img",{src:e.intermediateFile,alt:"Grayscale",style:{filter:"grayscale(100%)"}}))),y.a.createElement("small",null,e.language.image.grayscale)),1===e.imageSettings.show_color_option.one_color&&y.a.createElement("div",{className:"onecolor"===e.optionIndexVal?"thumbView-elements active flex-column":"thumbView-elements flex-column"},y.a.createElement("div",{className:"imageWrap h-auto",onClick:function(){return e.convertImage(e.intermediateFile,"onecolor",!1)}},e.oneColorLoader&&y.a.createElement(G.a,{height:58,width:58}),!e.oneColorLoader&&y.a.createElement("figure",{className:"imageWrap-box"},y.a.createElement("img",{src:e.oneColorThumb,alt:"onecolor"}))),y.a.createElement("small",null,e.language.image.oneColor)),1===e.imageSettings.show_color_option.monochrome&&y.a.createElement("div",{className:"monochrome"===e.optionIndexVal?"thumbView-elements active flex-column":"thumbView-elements flex-column"},y.a.createElement("div",{className:"imageWrap h-auto",onClick:function(){return e.convertImage(e.intermediateFile,"monochrome",!1)}},e.monoChromeLoader&&y.a.createElement(G.a,{height:58,width:58}),!e.monoChromeLoader&&y.a.createElement("figure",{className:"imageWrap-box"},y.a.createElement("img",{src:e.monochromeThumb,alt:"monochrome"}))),y.a.createElement("small",null,e.language.image.monochrome?e.language.image.monochrome:"Tint"))),e.isShowColorOption&&y.a.createElement("div",{className:"monochrome"===e.optionIndexVal?"onecolor d-flex justify-content-between align-items-center mt-2":"d-none"},y.a.createElement("div",{className:"d-flex justify-content-between align-items-center flex-fill"},y.a.createElement("h6",{className:"sectitle"},e.language.image.selectColors),y.a.createElement("div",{className:"color-block"},y.a.createElement("div",(t={id:"monochromeColor",className:"color-box",style:{backgroundColor:e.monochromeColor}},Object(g.a)(t,"style","none"===e.monochromeColor||"transparent"===e.monochromeColor?{backgroundImage:"url("+z.a+")"}:{backgroundColor:e.monochromeColor}),Object(g.a)(t,"title",""),Object(g.a)(t,"onClick",(function(){return e.onChangeMonochromeColor(e.monochromeColor)})),t)))),y.a.createElement("div",{className:"icon"},y.a.createElement("i",{className:"nxi nxi-move-right"}))),e.isShowColorOption&&y.a.createElement("div",{className:"onecolor"===e.optionIndexVal?"onecolor d-flex justify-content-between align-items-center mt-2":"d-none"},y.a.createElement("div",{className:"d-flex justify-content-between align-items-center flex-fill"},y.a.createElement("h6",{className:"sectitle"},e.language.image.selectColors),y.a.createElement("div",{className:"color-block"},y.a.createElement("div",(a={id:"oneColor",className:"color-box",style:{backgroundColor:e.oneColor}},Object(g.a)(a,"style","none"===e.oneColor||"transparent"===e.oneColor?{backgroundImage:"url("+z.a+")"}:{backgroundColor:e.oneColor}),Object(g.a)(a,"title",""),Object(g.a)(a,"onClick",(function(){return e.onChangeSingleColor(e.oneColor)})),a)))),y.a.createElement("div",{className:"icon"},y.a.createElement("i",{className:"nxi nxi-move-right"}))),1===e.imageSettings.is_more_color_options&&y.a.createElement(S.Fragment,null,y.a.createElement("div",{className:"d-flex justify-content-between align-items-center mt-2"},y.a.createElement("h6",{className:"sectitle",htmlFor:"colorOptions"},e.language.image.moreColorOptions),y.a.createElement("div",{id:"reduceSvg",style:{display:"none"}}))),y.a.createElement("div",{className:e.isColorOptions?"optionBox mt-2":"optionBox d-none",id:"morecolors"},1===e.imageSettings.is_more_color_options&&y.a.createElement("div",{className:"more-color-options"},e.enableMoreColorClick&&y.a.createElement("div",{className:"dropdown"},y.a.createElement("button",{className:"btn btn-light bg-white dropdown-toggle w-100 d-flex justify-content-between align-items-center text-md",type:"button",id:"dropdownMenuButton","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},"Full Color"===e.selectedMoreColorVal?e.language.main.fullColor:e.selectedMoreColorVal),y.a.createElement("div",{className:"dropdown-menu text-md w-100","aria-labelledby":"dropdownMenuButton"},y.a.createElement("div",{className:-1===e.selectedReduceIndex?"dropdown-item px-3 py-1 cursor-pointer active":"dropdown-item px-3 py-1 cursor-pointer",onClick:function(){return e.applyFullColor()}},e.language.main.fullColor),function(){var t=1;return e.removeWhiteIndex&&(t=0,0),new Array(e.imageSettings.color_option_value).fill().map((function(e,t){return++t})).map((function(a,o){return y.a.createElement("div",{key:o,className:e.selectedReduceIndex===o?"dropdown-item px-3 py-1 cursor-pointer active":"dropdown-item px-3 py-1 cursor-pointer",onClick:function(){return e.addSelectedReduceImage(o)}},o+t," ",e.language.main.color)}))}())),!e.enableMoreColorClick&&y.a.createElement(G.a,{height:33,width:260})),y.a.createElement("div",{className:e.selectedReduceIndex>=0&&e.isShowColorOption&&e.enableMoreColorClick?"onecolor d-flex justify-content-between align-items-center mt-2":"d-none"},y.a.createElement("div",{className:"d-flex justify-content-between align-items-center flex-fill"},y.a.createElement("h6",{className:"sectitle"},e.language.main.artColors),y.a.createElement("div",{className:"color-block"},e.selectedImgColor&&e.selectedImgColor.map((function(t,a){return function(t,a){return/^#([0-9A-F]{3}){1,2}$/i.test(t)||"none"===t||"transparent"===t?y.a.createElement("div",{key:a,id:"color_"+a,className:"color-box",style:"none"!==t?{backgroundColor:t}:{backgroundImage:"url("+z.a+")"},title:"",onClick:function(){return e.onChangeImageColor(a,t)}}):y.a.createElement("div",{key:a,id:"color_"+a,className:"color-box",style:{backgroundImage:"url("+t+")"},title:"",onClick:function(){return e.onChangeImageColor(a,t)}})}(t,a)})))),e.selectedImgColor&&y.a.createElement("div",{className:"icon",onClick:function(){return e.onChangeImageColor(0,e.selectedImgColor[0])}},y.a.createElement("i",{className:"nxi nxi-move-right"}))),!e.enableMoreColorClick&&e.selectedReduceIndex>=0&&e.isShowColorOption&&y.a.createElement(G.a,{height:33,width:260})))}function a(){if(!e.selectedElm||e.isTemplateEdit||e.selectedElm&&e.selectedElm.prefs&&e.selectedElm.prefs.lock&&!1===e.selectedElm.prefs.lock.filter)return!0===e.isMobileView?y.a.createElement("li",{className:"nav-item",onClick:function(){return e.openFilterView()}},y.a.createElement("a",{className:"nav-link",id:"profile-tab","data-toggle":"tab",href:"#profile",role:"tab","aria-controls":"profile","aria-selected":"false"},e.language.image.applyFilters)):y.a.createElement(S.Fragment,null,0!==e.imageSettings.image_effects.is_image_filter&&y.a.createElement("div",{className:e.isEnableFilterDiv?"upload-section-list item-filters imgMask border-top-0":"d-none"},y.a.createElement("div",{className:"d-flex justify-content-between align-items-center"},y.a.createElement("h6",{className:"sectitle"},e.language.image.applyFilters),y.a.createElement("div",{className:"btn btn-link btn-sm p-0 text-dark",onClick:function(){return e.openFilterView()}},(void 0===e.filterData||0===Object.keys(e.filterData).length)&&e.language.image.selectFilter,function(){if(void 0!==e.filterData&&Object.keys(e.filterData).length)return y.a.createElement("div",{className:"thumbView-wrap mr-1"},y.a.createElement("div",{className:"thumbView-elements"},y.a.createElement("div",{className:"imageWrap"},y.a.createElement("figure",{className:"imageWrap-box"},y.a.createElement("img",{src:e.selectedFile,alt:"",style:{filter:e.filterData.css}}))),y.a.createElement("div",{className:"removeBtn",onClick:function(){return e.removeSelectedFilter()}},y.a.createElement("i",{className:"nf nf-delete"}))))}(),y.a.createElement("i",{className:"nxi nxi-move-right mr-1"})))))}function o(){if(!e.selectedElm||e.isTemplateEdit||e.selectedElm&&e.selectedElm.prefs&&e.selectedElm.prefs.lock&&!1===e.selectedElm.prefs.lock.mask)return!0===e.isMobileView?y.a.createElement("li",{className:"nav-item",onClick:function(){return e.openMaskView()}},y.a.createElement("a",{className:"nav-link",id:"contact-tab","data-toggle":"tab",href:"#contact",role:"tab","aria-controls":"contact","aria-selected":"false"},e.language.image.applyMask)):y.a.createElement(S.Fragment,null,0!==e.imageSettings.image_effects.is_image_mask&&y.a.createElement("div",{className:e.isEnableMaskDiv?"upload-section-list item-filters imgMask":"d-none"},y.a.createElement("div",{className:"d-flex justify-content-between align-items-center"},y.a.createElement("h6",{className:"sectitle"},e.language.image.applyMask),y.a.createElement("div",{className:"btn btn-link btn-sm p-0 text-dark",onClick:function(){return e.openMaskView()}},(null===e.selectedMask||void 0===e.selectedMask)&&e.language.image.selectMask,function(){if(null!==e.selectedMask&&void 0!==e.selectedMask)return y.a.createElement("div",{className:"thumbView-wrap mr-1"},y.a.createElement("div",{className:"thumbView-elements"},y.a.createElement("div",{className:"imageWrap"},y.a.createElement("div",{className:"imageWrap-box",id:"maskImg"},e.renderSelectedMask(e.selectedMask,"maskImg"))),y.a.createElement("div",{className:"removeBtn",onClick:function(){return e.removeSelectedMask()}},y.a.createElement("i",{className:"nf nf-delete"}))))}(),y.a.createElement("i",{className:"nxi nxi-move-right mr-1"})))))}return y.a.createElement(S.Fragment,null,y.a.createElement("div",{className:"scroll-bar-wrap"},!1===e.isMobileView&&y.a.createElement(S.Fragment,null,y.a.createElement("div",{className:"element-controls-header"},y.a.createElement("section",{className:"boxTitle back-to-back",onClick:function(){return e.openView("")}},y.a.createElement("div",{className:"icon",title:e.language.main.backToSection},y.a.createElement("i",{className:"nf nf-left-arrow"})),y.a.createElement("div",{className:"text"},e.language.panel.back)),y.a.createElement("div",{className:"boxTitle back-to-menu",title:e.language.main.backToMain},y.a.createElement("i",{className:"nf nf-delete"}))),y.a.createElement("div",{className:"d-flex flex-column upload-section-preview"},y.a.createElement("div",{className:"btn-group"},y.a.createElement("div",{className:"btn btn-default bg-light btn-sm d-none d-md-inline-block d-lg-inline-block d-xl-inline-block",onClick:function(){return e.revertToOriginal()}},y.a.createElement("i",{className:"nf nf-reset"})," ",e.language.image.original),1===e.imageSettings.is_white_removal&&e.removeBackgroundStatus&&!e.svgStatus&&y.a.createElement("div",{className:"dropdown btn btn-default bg-light btn-sm"},y.a.createElement("div",{className:"dropdown-toggle",id:"dropdownColorMenu","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},y.a.createElement("i",{className:"nf nf-broom"}),e.language.image.removeColor),y.a.createElement("div",{className:"dropdown-menu","aria-labelledby":"dropdownColorMenu"},y.a.createElement("a",{className:"dropdown-item",href:"#",onClick:function(){return e.convertImage(e.intermediateFile,"removeWhite",!1)}},e.language.image.allWhite),y.a.createElement("a",{className:"dropdown-item",href:"#",onClick:function(){return e.convertImage(e.intermediateFile,"outerWhite",!1)}},e.language.image.outerWhite),y.a.createElement("a",{className:"dropdown-item",href:"#",onClick:function(){return e.openView("anyColor")}},e.language.image.removeAnyColor)))),y.a.createElement("figure",{className:"uploadImg"},y.a.createElement("img",{onLoad:e.onImgLoad,src:e.updatedFile,alt:""})),!e.svgStatus&&y.a.createElement("div",{className:"btn-group"},y.a.createElement("div",{className:"btn btn-default bg-light btn-sm",onClick:function(){return e.openView("crop")}},y.a.createElement("i",{className:"nf nf-crop"})," ",e.language.main.crop),!e.autoConvertStatus&&y.a.createElement("div",{className:"btn btn-default bg-light btn-sm",onClick:function(){return e.openView("settings")}},y.a.createElement("i",{className:"nf nf-penciltool"})," ",e.language.main.edit))),y.a.createElement("div",{className:"upload-section scrollbar edit"},t(),a(),o()),e.globalSettings.file_uploaded.upload_tip&&y.a.createElement("div",{className:"alert alert-primary small-txt tip mt-1"},y.a.createElement("i",{className:"alert-icon"}),y.a.createElement("span",{className:"alert-txt"},e.language.image.imageUploadTip))),!0===e.isMobileView&&y.a.createElement("div",{className:"uploadImg-mScroll"},1===e.imageSettings.is_white_removal&&e.removeBackgroundStatus&&!e.svgStatus&&y.a.createElement("div",{className:"removeColorBtns"},y.a.createElement("h6",{className:"sectitle mt-3"},"Remove Color"),y.a.createElement("div",{className:"btn-group"},y.a.createElement("div",{className:"btn btn-default bg-light",onClick:function(){return e.convertImage(e.intermediateFile,"removeWhite",!1)}},e.language.image.allWhite),y.a.createElement("div",{className:"btn btn-default bg-light",onClick:function(){return e.convertImage(e.selectedFile,"outerWhite",!1)}},e.language.image.outerWhite),y.a.createElement("div",{className:"btn btn-default bg-light",onClick:function(){return e.openView("anyColor")}},"Any color"))),y.a.createElement("div",{className:"upload-section-tab"},y.a.createElement("ul",{className:"nav nav-tabs",id:"myTab",role:"tablist"},y.a.createElement("li",{className:"nav-item"},y.a.createElement("a",{className:"nav-link active",id:"home-tab","data-toggle":"tab",href:"#home",role:"tab","aria-controls":"home","aria-selected":"true"},"Edit Options")),0!==e.imageSettings.image_effects.is_image_filter&&a(),0!==e.imageSettings.image_effects.is_image_mask&&o()),y.a.createElement("div",{className:"tab-content"+(e.imageSettings.is_auto_convert_image&&0===e.imageSettings.is_change_color?" hidden":""),id:"myTabContent"},y.a.createElement("div",{className:"tab-pane fade show active",id:"home",role:"tabpanel","aria-labelledby":"home-tab"},t()),y.a.createElement("div",{className:"tab-pane fade",id:"profile",role:"tabpanel","aria-labelledby":"profile-tab"}),y.a.createElement("div",{className:"tab-pane fade",id:"contact",role:"tabpanel","aria-labelledby":"contact-tab"}))),e.globalSettings.file_uploaded.upload_tip&&y.a.createElement("div",{className:"alert alert-primary small-txt tip"},y.a.createElement("i",{className:"alert-icon"}),y.a.createElement("span",{className:"alert-txt"},e.language.image.imageUploadTip))),function(){if(e.isEmbroideryLoader)return y.a.createElement("div",{className:"loader",style:{width:"calc(100% + 6px)",backgroundColor:"rgba(235, 237, 241, 0.9)",justifyContent:"flex-start",paddingTop:"50px",zIndex:"9"}},y.a.createElement("div",{className:"loader-gif"},y.a.createElement("svg",{version:"1.1",id:"L4",x:"0px",y:"0px",viewBox:"0 0 50 50",enableBackground:"new 0 0 0 0"},y.a.createElement("circle",{fill:"#28a745",stroke:"none",cx:"5",cy:"25",r:"5"},y.a.createElement("animate",{attributeName:"opacity",dur:"1s",values:"0;1;0",repeatCount:"indefinite",begin:"0.1"})),y.a.createElement("circle",{fill:"#28a745",stroke:"none",cx:"25",cy:"25",r:"5"},y.a.createElement("animate",{attributeName:"opacity",dur:"1s",values:"0;1;0",repeatCount:"indefinite",begin:"0.2"})),y.a.createElement("circle",{fill:"#28a745",stroke:"none",cx:"45",cy:"25",r:"5"},y.a.createElement("animate",{attributeName:"opacity",dur:"1s",values:"0;1;0",repeatCount:"indefinite",begin:"0.3"})))),y.a.createElement("h3",{className:"loader-title",style:{textAlign:"center",fontSize:"16px"}},"Setting your image"),y.a.createElement("h4",{className:"loader-text",style:{textAlign:"center"}},"Please wait while we are preparing"))}()))},J=a(338),X=a.n(J),Z=(a(425),function(e){return y.a.createElement("div",{className:"crop"===e.activeView?"":"hidden"},y.a.createElement("div",{className:"element-controls-header d-none d-md-flex d-lg-flex d-xl-flex"},y.a.createElement("section",{className:"boxTitle back-to-back",onClick:function(){return e.openView("edit")}},y.a.createElement("div",{className:"icon",title:e.language.main.backToSection},y.a.createElement("i",{className:"nf nf-left-arrow"}))),y.a.createElement("div",{className:"text"},e.language.image.cropImage),y.a.createElement("div",{className:"boxTitle back-to-menu",title:e.language.main.backToMain},y.a.createElement("i",{className:"nf nf-delete"}))),y.a.createElement("div",{className:"cropSec"},y.a.createElement(X.a,{src:e.selectedFile,crop:e.crop,onChange:function(t){return e.changeCropState(t)},onImageLoaded:function(t){return e.onImageLoadEndState(t)},keepSelection:"true"})),y.a.createElement("div",{className:"d-flex mt-4"},y.a.createElement("button",{className:"btn btn-dark btn-block text-light mr-1",onClick:function(){return e.openView("edit")}},e.language.main.cancel),y.a.createElement("button",{className:"btn btn-success btn-block m-0 ml-1",onClick:function(){return e.onCompleteCrop()}},e.language.main.done)))}),$=function(e){return y.a.createElement("div",{className:"filter"===e.activeView?"":"hidden"},y.a.createElement("div",{className:"element-controls-header d-none d-md-flex d-lg-flex d-xl-flex"},y.a.createElement("section",{className:"boxTitle back-to-back",onClick:function(){return e.cancelFilter()}},y.a.createElement("div",{className:"icon",title:e.language.main.backToSection},y.a.createElement("i",{className:"nf nf-left-arrow"}))),y.a.createElement("div",{className:"text"},e.language.image.filterImage),y.a.createElement("div",{className:"boxTitle back-to-menu",title:e.language.main.backToMain},y.a.createElement("i",{className:"nf nf-delete"}))),y.a.createElement("div",{className:"nav nav-tabs-custom d-flex d-sm-flex d-md-flex d-lg-none d-xl-none"},y.a.createElement("div",{className:"nav-item",onClick:function(){return e.openView("edit")}},y.a.createElement("div",{className:"nav-item-label"},y.a.createElement("div",{className:"label-title"},"Edit Options"))),0!==e.imageSettings.image_effects.is_image_filter&&function(){if(!e.selectedElm||e.isTemplateEdit||e.selectedElm&&e.selectedElm.prefs&&e.selectedElm.prefs.lock&&!1===e.selectedElm.prefs.lock.filter)return y.a.createElement("div",{className:"nav-item active"},y.a.createElement("div",{className:"nav-item-label"},y.a.createElement("div",{className:"label-title"},e.language.image.applyFilters)))}(),0!==e.imageSettings.image_effects.is_image_mask&&function(){if(!e.selectedElm||e.isTemplateEdit||e.selectedElm&&e.selectedElm.prefs&&e.selectedElm.prefs.lock&&!1===e.selectedElm.prefs.lock.mask)return y.a.createElement("div",{className:"nav-item",onClick:function(){return e.openMaskView()}},y.a.createElement("div",{className:"nav-item-label"},y.a.createElement("div",{className:"label-title"},e.language.image.applyMask)))}()),y.a.createElement("div",{className:"thumbView optionBox"},y.a.createElement("div",{className:"thumbView-wrap"},e.filterList.map((function(t){return y.a.createElement("div",{key:t.type,className:e.filterInfo.type===t.type?"thumbView-elements active":"thumbView-elements"},y.a.createElement("div",{className:"imageWrap"},y.a.createElement("div",{className:"imageWrap-box",onClick:function(){return e.addFilterEffect(t)},id:"preview_"+t.type})))})))),y.a.createElement("div",{className:"buttonGroup d-flex mt-3"},y.a.createElement("button",{className:"btn btn-dark btn-sm btn-block text-light mr-1",onClick:function(){return e.cancelFilter()}},e.language.main.cancel),y.a.createElement("button",{className:"btn btn-success btn-sm btn-block m-0 ml-1",onClick:function(){return e.applyFilter()}},e.language.main.done)))},K=a(880),Y=a.n(K),Q=a(156),ee=function(e){return y.a.createElement("div",{className:"mask"===e.activeView?"mask":"mask hidden"},y.a.createElement("div",{className:"element-controls-header d-none d-md-flex d-lg-flex d-xl-flex"},y.a.createElement("section",{className:"boxTitle back-to-back",onClick:function(){return e.cancelMask()}},y.a.createElement("div",{className:"icon",title:e.language.main.backToSection},y.a.createElement("i",{className:"nf nf-left-arrow"}))),y.a.createElement("div",{className:"text"},e.language.image.maskImage)),y.a.createElement("div",{className:"nav nav-tabs-custom d-flex d-sm-flex d-md-flex d-lg-none d-xl-none"},y.a.createElement("div",{className:"nav-item",onClick:function(){return e.openView("edit")}},y.a.createElement("div",{className:"nav-item-label"},y.a.createElement("div",{className:"label-title"},"Edit Options"))),0!==e.imageSettings.image_effects.is_image_filter&&function(){if(!e.selectedElm||e.isTemplateEdit||e.selectedElm&&e.selectedElm.prefs&&e.selectedElm.prefs.lock&&!1===e.selectedElm.prefs.lock.filter)return y.a.createElement("div",{className:"nav-item",onClick:function(){return e.openFilterView()}},y.a.createElement("div",{className:"nav-item-label"},y.a.createElement("div",{className:"label-title"},e.language.image.applyFilters)))}(),0!==e.imageSettings.image_effects.is_image_mask&&function(){if(!e.selectedElm||e.isTemplateEdit||e.selectedElm&&e.selectedElm.prefs&&e.selectedElm.prefs.lock&&!1===e.selectedElm.prefs.lock.mask)return y.a.createElement("div",{className:"nav-item active"},y.a.createElement("div",{className:"nav-item-label"},y.a.createElement("div",{className:"label-title"},e.language.image.applyMask)))}()),e.isMaskSettingActive&&e.isMobileView?y.a.createElement("div",{className:"thumbView scrollbar optionBox hidden"},y.a.createElement("div",{className:"thumbView-wrap"},e.maskList.map((function(t){return y.a.createElement("div",{key:t.xe_id,className:void 0!==e.maskInfo&&e.maskInfo.xe_id===t.xe_id?"thumbView-elements active":"thumbView-elements"},y.a.createElement("div",{className:"imageWrap"},y.a.createElement("div",{className:"imageWrap-box",onClick:function(){return e.addMakEffect(t)},id:t.xe_id},e.renderMaskView(t.mask_name,e.updatedFile,t.xe_id))))})))):y.a.createElement(S.Fragment,null,y.a.createElement("div",{className:(e.isMaskSettingActive?"thumbView scrollbar optionBox item-filters-options-active":"thumbView scrollbar optionBox")+(e.isStrokeColor?" hidden":"")},y.a.createElement("div",{className:"thumbView-wrap"},e.maskList.map((function(t){return y.a.createElement("div",{key:t.xe_id,className:void 0!==e.maskInfo&&e.maskInfo.xe_id===t.xe_id?"thumbView-elements active":"thumbView-elements"},y.a.createElement("div",{className:"imageWrap"},y.a.createElement("div",{className:"imageWrap-box",onClick:function(){return e.addMakEffect(t)},id:t.xe_id},e.renderMaskView(t.mask_name,e.updatedFile,t.xe_id))))})))),y.a.createElement("div",{className:"btn btn-dark btn-sm btn-block p-2 d-block d-sm-block d-md-none d-lg-none d-xl-none",style:{margin:"0 12px",width:"auto"},title:"Mask setting",onClick:function(){return e.maskSettings()}},y.a.createElement("i",{className:"nf nf-adjust mr-1"})," ",e.language.main.settings)),y.a.createElement("div",{className:e.isMaskSettingActive&&void 0!==e.maskInfo&&e.maskInfo.xe_id?"item-filters-options":"item-filters-options hidden"},y.a.createElement("div",{className:e.isStrokeColor?"listView hidden":"listView"},y.a.createElement("div",{className:"listView-wrap"},y.a.createElement("div",{className:"listView-elements"},y.a.createElement("div",{className:"text-options"},y.a.createElement("div",{className:"text-options-left"},e.language.main.strokeSize),y.a.createElement("div",{className:"text-options-right"},y.a.createElement(Y.a,{maxValue:10,minValue:0,value:e.selectStrokeValue,step:1,onChange:function(t){return e.setSelectedStroke(t)},onChangeComplete:function(e){return console.log(e)}}),y.a.createElement(Q.DebounceInput,{className:"output",minLength:1,value:e.selectStrokeValue?e.selectStrokeValue:"0",onChange:e.validateStrokeVal,pattern:"[0-9]*"})))),e.isShowColorOption&&y.a.createElement("div",{className:"listView-elements"},y.a.createElement("div",{className:"text-options"},y.a.createElement("div",{className:"text-options-left"},e.language.main.strokeColor),y.a.createElement("div",{className:"text-options-right"},y.a.createElement("div",{className:"color-btn"},"#"!==e.strokeColor[0]?y.a.createElement("div",{className:"color-swatch",onClick:function(){return e.colorSelected()},style:"none"!==e.strokeColor?{backgroundImage:"url("+e.strokeColor+")"}:{backgroundImage:"url("+z.a+")"}}):y.a.createElement("div",{className:"color-swatch",onClick:function(){return e.colorSelected()},style:"none"!==e.strokeColor?{backgroundColor:e.strokeColor}:{backgroundImage:"url("+z.a+")"}}))))),y.a.createElement("div",{className:"listView-elements"},y.a.createElement("div",{className:"text-options"},y.a.createElement("div",{className:"text-options-left"},e.language.image.imagePosition,y.a.createElement("div",{className:"form-row mt-3"},y.a.createElement("div",{className:"col col-md"},y.a.createElement("div",{className:"movearrow-Wrap"},y.a.createElement("div",{className:"btn-group"},y.a.createElement("div",{className:"btn btn-sm btn-default bg-light",onClick:function(){return e.positionMaskImg("top")}},y.a.createElement("i",{className:"nf nf-top-arrow"}),y.a.createElement("span",{className:"btn-txt"},e.language.main.top))),y.a.createElement("div",{className:"btn-group"},y.a.createElement("div",{className:"btn btn-sm btn-default bg-light",onClick:function(){return e.positionMaskImg("left")}},y.a.createElement("i",{className:"nf nf-left-arrow"}),y.a.createElement("span",{className:"btn-txt"},e.language.main.left)),y.a.createElement("div",{className:"btn btn-sm btn-default bg-light disabled"},"\xa0"),y.a.createElement("div",{className:"btn btn-sm btn-default bg-light",onClick:function(){return e.positionMaskImg("right")}},y.a.createElement("i",{className:"nf nf-right-arrow"}),y.a.createElement("span",{className:"btn-txt"},e.language.main.right))),y.a.createElement("div",{className:"btn-group"},y.a.createElement("div",{className:"btn btn-sm btn-default bg-light",onClick:function(){return e.positionMaskImg("bottom")}},y.a.createElement("i",{className:"nf nf-bottom-arrow"}),y.a.createElement("span",{className:"btn-txt"},e.language.main.bottom))))),y.a.createElement("div",{className:"col col-md"},y.a.createElement("div",{className:"zoombtn-Wrap"},y.a.createElement("div",{className:"form-row"},y.a.createElement("div",{className:"col-auto"},y.a.createElement("div",{className:"btn-group"},y.a.createElement("div",{className:"btn btn-sm btn-default bg-light",onClick:function(){return e.onMaskZoomIn()}},y.a.createElement("i",{className:"nf nf-zoom-in"})),y.a.createElement("div",{className:"btn btn-sm btn-default bg-light",onClick:function(){return e.onMaskZoomOut()}},y.a.createElement("i",{className:"nf nf-zoom-out"})))),y.a.createElement("div",{className:"col-auto"},y.a.createElement("div",{className:"btn-group"},y.a.createElement("div",{className:"btn btn-sm btn-default btn-link"},y.a.createElement("span",{className:"btn-txt"},e.language.image.expand)),y.a.createElement("div",{className:"btn btn-sm btn-default btn-link"},y.a.createElement("span",{className:"btn-txt"},e.language.image.compress))))))))))))),y.a.createElement("div",{className:e.isStrokeColor?"":"hidden"},function(){if(e.isStrokeColor)return y.a.createElement(W.a,{onColorSelect:e.onMaskColorSelect,onColorHover:function(){return e.onColorHover}})}(),y.a.createElement("div",{className:"buttonGroup d-flex mt-2"},y.a.createElement("button",{className:"btn btn-dark btn-sm btn-block text-light mr-1",onClick:function(){return e.colorPickCancel()}},e.language.main.cancel),y.a.createElement("button",{className:"btn btn-success btn-sm btn-block m-0 ml-1",onClick:function(){return e.colorPickOk()}},e.language.main.done)))),!e.isMaskSettingActive&&y.a.createElement("div",{className:"btn btn-light btn-sm btn-block mt-3 d-none d-md-block d-lg-block d-xl-block"+(e.isStrokeColor?" hidden":""),title:"Mask setting",onClick:function(){return e.maskSettings()}},y.a.createElement("i",{className:"nf nf-adjust mr-1"})," ",e.language.main.settings),y.a.createElement("div",{className:e.isStrokeColor?"buttonGroup mt-2 hidden":"buttonGroup d-flex mt-2"},y.a.createElement("button",{className:"btn btn-dark btn-sm btn-block text-light mr-1",onClick:function(){return e.cancelMask()}},e.language.main.cancel),y.a.createElement("button",{className:"btn btn-success btn-sm btn-block m-0 ml-1",onClick:function(){return e.applyMask()}},e.language.main.done)))},te=function(e){return y.a.createElement("div",{className:"settings"===e.activeView?"settings":"hidden"},y.a.createElement("div",{className:"element-controls-header d-none d-md-flex d-lg-flex d-xl-flex"},y.a.createElement("section",{className:"boxTitle back-to-back",onClick:function(){return e.openView("edit")}},y.a.createElement("div",{className:"icon",title:e.language.main.backToSection},y.a.createElement("i",{className:"nf nf-left-arrow"}))),y.a.createElement("div",{className:"text"},e.language.image.edit),y.a.createElement("div",{className:"boxTitle back-to-menu",title:e.language.main.backToMain},y.a.createElement("i",{className:"nf nf-delete"}))),!1===e.isMobileView&&y.a.createElement("div",{className:"d-flex flex-column upload-section-preview"},y.a.createElement("figure",{className:"uploadImg"},y.a.createElement("img",{src:e.updatedFile,alt:""})),y.a.createElement("div",{className:"btn-group"},y.a.createElement("div",{className:"btn btn-default bg-light btn-sm",onClick:function(){return e.openView("crop")}},y.a.createElement("i",{className:"nf nf-crop"}),e.language.main.crop))),y.a.createElement("div",{className:"item-filters-options mt-3"},y.a.createElement("h6",{className:"sectitle"},e.language.image.brightness),y.a.createElement("div",{className:"d-flex form-group"},y.a.createElement(Y.a,{maxValue:1,minValue:-1,value:e.sliderValue.brightValue,step:.1,onChange:function(t){return e.imageFilter(t,"brightValue")}}),y.a.createElement(Q.DebounceInput,{className:"output",minLength:1,debounceTimeout:100,value:e.sliderValue.brightValue?e.sliderValue.brightValue:"0",onChange:function(t){return e.validateImageFilter(t,"brightValue")},pattern:"[-,0-9]*(\\.\\d+)?"})),y.a.createElement("h6",{className:"sectitle"},e.language.image.contrast),y.a.createElement("div",{className:"d-flex form-group"},y.a.createElement(Y.a,{maxValue:1,minValue:-1,value:e.sliderValue.contrastValue,step:.1,onChange:function(t){return e.imageFilter(t,"contrastValue")}}),y.a.createElement(Q.DebounceInput,{className:"output",minLength:1,debounceTimeout:100,value:e.sliderValue.contrastValue?e.sliderValue.contrastValue:"0",onChange:function(t){return e.validateImageFilter(t,"contrastValue")},pattern:"[-,0-9]*(\\.\\d+)?"})),y.a.createElement("h6",{className:"sectitle"},e.language.image.saturation),y.a.createElement("div",{className:"d-flex form-group"},y.a.createElement(Y.a,{maxValue:5,minValue:-5,value:e.sliderValue.saturValue,step:.5,onChange:function(t){return e.imageFilter(t,"saturValue")}}),y.a.createElement(Q.DebounceInput,{className:"output",minLength:1,debounceTimeout:100,value:e.sliderValue.saturValue?e.sliderValue.saturValue:"0",onChange:function(t){return e.validateImageFilter(t,"saturValue")},pattern:"[-,0-9]*(\\.\\d+)?"})),y.a.createElement("h6",{className:"sectitle"},e.language.image.hue),y.a.createElement("div",{className:"d-flex form-group"},y.a.createElement(Y.a,{maxValue:5,minValue:-5,value:e.sliderValue.hueValue,step:.1,onChange:function(t){return e.imageFilter(t,"hueValue")}}),y.a.createElement(Q.DebounceInput,{className:"output",minLength:1,debounceTimeout:100,value:e.sliderValue.hueValue?e.sliderValue.hueValue:"0",onChange:function(t){return e.validateImageFilter(t,"hueValue")},pattern:"[-,0-9]*(\\.\\d+)?"})),y.a.createElement("h6",{className:"sectitle"},e.language.image.blur),y.a.createElement("div",{className:"d-flex form-group"},y.a.createElement(Y.a,{maxValue:1,minValue:0,value:e.sliderValue.blurValue,step:.1,onChange:function(t){return e.imageFilter(t,"blurValue")}}),y.a.createElement(Q.DebounceInput,{className:"output",minLength:1,debounceTimeout:100,value:e.sliderValue.blurValue?e.sliderValue.blurValue:"0",onChange:function(t){return e.validateImageFilter(t,"blurValue")},pattern:"[0-9]*(\\.\\d+)?"}))),y.a.createElement("div",{className:"buttonGroup d-flex mt-4"},y.a.createElement("button",{className:"btn btn-dark btn-block text-light mr-1",onClick:function(){return e.openView("edit")}},e.language.main.cancel),y.a.createElement("button",{className:"btn btn-success btn-block m-0 ml-1",onClick:function(){return e.onCompleteFilter()}},e.language.main.done)))},ae=function(e){return y.a.createElement("div",{className:"anyColor"===e.activeView?"":"d-none"},y.a.createElement("div",{className:"element-controls-header d-none d-md-flex d-lg-flex d-xl-flex"},y.a.createElement("section",{className:"boxTitle back-to-back",onClick:function(){return e.openView("edit")}},y.a.createElement("div",{className:"icon",title:e.language.main.backToSection},y.a.createElement("i",{className:"nf nf-left-arrow"})),y.a.createElement("div",{className:"text"},e.language.panel.back))),y.a.createElement("div",{className:"cropSec rmAnyColor"},y.a.createElement("figure",{className:"uploadImg d-none"},y.a.createElement("img",{onLoad:e.onImgLoad,src:e.updatedFile,alt:""})),y.a.createElement("canvas",{height:"250",id:"image_canvas",width:"250"}),y.a.createElement("div",{className:"canvas-container tooltip-canvas"},y.a.createElement("canvas",{id:"tooltip_canvas",onMouseDown:function(t){return e.tooltipMouseDown(t)},onMouseMove:function(t){return e.tooltipMouseMove(t)}}))),y.a.createElement("div",{className:"d-flex mt-4"},y.a.createElement("button",{className:"btn btn-dark btn-block text-light mr-1",onClick:function(){return e.resetRemoveColor()}},e.language.main.cancel),y.a.createElement("button",{className:"btn btn-success btn-block m-0 ml-1",onClick:function(){return e.applyRemoveColor()}},e.language.main.done)))},oe=a(12),re=function(e){return y.a.createElement("div",{className:"chooseColor"===e.activeView?"":"hidden"},y.a.createElement("div",{className:"element-controls-header d-none d-md-flex d-lg-flex d-xl-flex"},y.a.createElement("section",{className:"boxTitle back-to-back",onClick:function(){return e.closeColorView("backToEdit")}},y.a.createElement("div",{className:"icon",title:e.language.main.backToSection},y.a.createElement("i",{className:"nf nf-left-arrow"}))),y.a.createElement("div",{className:"text"},e.language.image.chooseColor),y.a.createElement("div",{className:"boxTitle back-to-menu",title:e.language.main.backToMain},y.a.createElement("i",{className:"nf nf-delete"}))),y.a.createElement("h6",{className:"d-none d-md-block d-lg-block d-xl-block sec-title"},e.language.main.selectedColor),y.a.createElement("h3",{className:"boxTitle back-link border-bottom justify-content-between d-flex d-sm-flex d-md-none d-lg-none d-xl-none m-0 pt-3 pl-3 pr-3 pb-3"},y.a.createElement("span",null,e.language.main.selectedColor),y.a.createElement("span",{className:"btn btn-link text-dark",onClick:function(){return e.closeColorView()}},y.a.createElement("i",{className:"nf nf-tick"})," ",e.language.main.done)),!e.isMobileView&&y.a.createElement("div",{className:"bg-wrap mb-2"},y.a.createElement("div",{className:"bg-wrap-colors"},y.a.createElement("div",{className:"thumbView-wrap"},e.colorList.map((function(t,a){return y.a.createElement("div",{key:t.id,onClick:function(){return e.onChangeImageColor(a,t.fill)},className:e.selectedIndex===a?"thumbView-elements active":"thumbView-elements"},function(e){if("none"===e.fill||"transparent"===e.fill)return y.a.createElement("div",{className:"color-btn",style:{backgroundImage:"url("+z.a+")"}});if(/^#([0-9A-F]{3}){1,2}$/i.test(e.fill))return y.a.createElement("div",{className:"color-btn",style:{backgroundColor:e.fill}});var t=e.fill,a=t.substring(t.lastIndexOf("#")+1,t.lastIndexOf(")"));return y.a.createElement("div",{className:"color-btn",style:{background:"url("+oe.a.assets_path+"/color_palettes/"+a+")"}})}(t))}))))),y.a.createElement("div",{className:""===e.selectedIndex||e.hideColorPalettes?"ColorPalette d-none":"ColorPalette"},y.a.createElement(W.a,{onColorSelect:e.onColorSelect,onColorHover:e.onColorHover,activeView:e.activeView,oneColorEnable:e.oneColorEnable,usedColorList:e.colorList,selectedColor:e.selectedColor}),y.a.createElement("div",{className:"buttonGroup"},y.a.createElement("button",{className:"btn btn-sm btn-success btn-block mt-3",onClick:function(){return e.closeColorView("backToEdit")}},e.language.main.done))))},ne=a(355),le=a(8),ie=a(172),se=(a(883),a(77)),ce=a(6),me=a(22),de=a.n(me),ue=a(27),ge=function(e){return y.a.createElement("div",{className:"fbImg-wrap"},y.a.createElement("div",{className:"element-controls-header d-none d-md-flex d-lg-flex d-xl-flex"},y.a.createElement("section",{className:"boxTitle back-to-back",onClick:function(){return e.cancelFacebookImport()}},y.a.createElement("div",{className:"icon",title:e.language.main.backToSection},y.a.createElement("i",{className:"nf nf-left-arrow"}))),y.a.createElement("div",{className:"text"},"facebook upload images"),y.a.createElement("div",{className:"boxTitle back-to-menu",title:e.language.main.backToMain},y.a.createElement("i",{className:"nf nf-delete"}))),e.faceBookError?y.a.createElement("div",null,e.faceBookErrorMsg):e.facebookImageList.length<=0?y.a.createElement(S.Fragment,null,y.a.createElement("div",{className:"advanced-search",key:0},y.a.createElement("div",{className:"multiSelect d-none d-md-block d-lg-block d-xl-block"},y.a.createElement(G.a,{height:34,width:255})),y.a.createElement("div",{className:"multiSelect d-block d-sm-block d-md-none d-lg-none d-xl-none"},y.a.createElement(G.a,{height:34,width:350})),y.a.createElement("div",{className:"scroll-bar-wrap d-none d-md-block d-lg-block d-xl-block"},y.a.createElement("div",{className:"thumbView scrollbar",style:{overflow:"hidden"}},y.a.createElement("div",{className:"thumbView-wrap"},[1,2,3,4,5,6,7,8,9,10].map((function(e){return y.a.createElement("div",{className:"thumbView-elements",key:e},y.a.createElement("div",{className:"imageWrap"},y.a.createElement("figure",{className:"imageWrap-box"},y.a.createElement(G.a,{height:80,width:80}))))}))))),y.a.createElement("div",{className:"scroll-bar-wrap d-block d-sm-block d-md-none d-lg-none d-xl-none"},y.a.createElement("div",{className:"thumbView scrollbar",style:{overflow:"hidden"}},y.a.createElement("div",{className:"thumbView-wrap"},[1,2,3,4,5,6,7,8,9,10].map((function(e){return y.a.createElement("div",{className:"thumbView-elements",key:e},y.a.createElement("div",{className:"imageWrap"},y.a.createElement("figure",{className:"imageWrap-box"},y.a.createElement(G.a,{height:110,width:110}))))}))))),y.a.createElement("div",{className:"info-text d-none d-md-block d-lg-block d-xl-block"},y.a.createElement(G.a,{height:8,width:180})))):y.a.createElement("div",{className:"scroll-bar-wrap"},y.a.createElement("div",{className:"thumbView scrollbar"},y.a.createElement("div",{className:"thumbView-wrap"},e.facebookImageList.map((function(t,a){return y.a.createElement("div",{key:a,className:e.selectedFacebookImageId===a?"thumbView-elements active":"thumbView-elements",onClick:function(){return e.addFacebookImage(t,a)}},y.a.createElement("div",{className:"imageWrap"},y.a.createElement("div",{className:"imageWrap-box"},y.a.createElement("img",{src:t,alt:"",style:{maxHeight:"250px"}}))))}))))))},pe=a(325),fe=a.n(pe),he=a(39),be=["https://www.googleapis.com/auth/drive.readonly"],ve=a(259),ke=a(424),Ee=a(928),Ce=[],xe=[],we={},Se=!1,ye=null,Ie=null,Ne=null,_e=null,Ve=[],Fe=function(e){Object(x.a)(a,e);var t=Object(w.a)(a);function a(e){var g;return Object(k.a)(this,a),(g=t.call(this,e)).extAddedCb=function(e){ie.a.init({$:de.a,editor:R.a,NS:le.a,fabric:I.fabric,Potrace:ve,RgbQuant:ke})},g.localStorageGetItem=function(e){try{return localStorage.getItem(e)}catch(t){return null}},g.localStorageSetItem=function(e,t){try{return localStorage.setItem(e,t)}catch(a){}},g.getMousePosition=function(e){var t=de()(e.target).offset();return{x:Math.round((e.clientX||e.pageX)-t.left),y:Math.round((e.clientY||e.pageY)-t.top)}},g.updateDrawPoint=function(e){var t,a,o,r,n=m/parseInt(319),l=d/parseInt(214),i={},s={};if(a=(-69).toFixed(),t=36..toFixed(),i.x1=t/2,i.x2=250-t/2,s.x1=a/2,s.x2=250-a/2,o=e.x-a/2,r=e.y-t/2,e.x>s.x1&&e.x<s.x2&&e.y>i.x1&&e.y<i.x2){if(m==parseInt(319)&&d==parseInt(214))return e.x=parseInt((e.x*n).toFixed()),e.y=parseInt((e.y*l).toFixed()),e;e.x=parseInt((o*n).toFixed()),e.y=parseInt((r*l).toFixed())}else e="";return e},g.applyRemoveColor=function(){R.a.addToStage(g.state.intermediateFile),g.updateBlob(g.state.intermediateFile,""),g.openView("edit"),c=null,R.a.canvas.extractAlphaPx()},g.resetRemoveColor=function(){var e=R.a.canvas.getSelectedElems()[0];e&&(g.setState({intermediateFile:e.prefs.originalImg,updatedFile:e.prefs.originalImg},(function(){e.prefs.intermediateFile=e.prefs.originalImg,e.prefs.updatedFile=e.prefs.originalImg,o=e.prefs.originalImg})),g.openView("edit"),c=null),R.a.canvas.extractAlphaPx()},g.tooltipMouseDown=function(e){g.onMouseDown(e)},g.tooltipMouseMove=function(e){g.onMouseMove(e)},g.onMouseMove=function(e){Ne=g.getMousePosition(e),i.font="14px Graphik Web",i.clearRect(0,0,n.width,n.height),i.fillText("Press",Ne.x,Ne.y+25)},g.onMouseDown=function(e){if(0==e.button&&(Ne=g.getMousePosition(e),""!=(Ne=g.updateDrawPoint(Ne)))){if(u===Ne.x)return;g.drawMask(Ne.x,Ne.y),u=Ne.x}},g.drawMask=function(e,t){if(ye){var a={data:ye.data.data,width:ye.width,height:ye.height,bytes:4};_e=Ee.floodFill(a,e,t,15),_e=Ee.gaussBlurOnlyBorder(_e,5),setTimeout((function(){g.removeSelectedImagePart(),g.drawBorder()}))}},g.drawBorder=function(e){if(_e){var t,a,o,r,n,l=ye.width,i=ye.height,s=ye.context,c=s.createImageData(l,i),m=c.data;e||(Ie=Ee.getBorderIndices(_e)),s.clearRect(0,0,l,i);var d=Ie.length;for(r=0;r<d;r++)n=4*((a=((o=Ie[r])-(t=o%l))/l)*l+t),(t+a+0)%8<4||(m[n]=255,m[n+1]=255,m[n+2]=255),m[n+3]=255;s.putImageData(c,0,0)}},g.removeSelectedImagePart=function(){if(_e){var e=Ee.traceContours(_e);e=Ee.simplifyContours(e,0,30),_e=null;var t=r.getContext("2d");t.clearRect(0,0,ye.width,ye.height),t.beginPath();for(var a=0;a<e.length;a++)if(!e[a].inner){var o=e[a].points;t.moveTo(o[0].x,o[0].y);for(var n=1;n<o.length;n++)t.lineTo(o[n].x,o[n].y)}t.fillStyle="red",t.fill(),t.beginPath();for(var l=0;l<e.length;l++)if(e[l].inner){var i=e[l].points;t.moveTo(i[0].x,i[0].y);for(var s=1;s<i.length;s++)t.lineTo(i[s].x,i[s].y)}t.fillStyle="green",t.fill(),g.removeSelection()}},g.removeSelection=function(){g.drawBorder(!0);var e=r.getContext("2d"),t=e.getImageData(0,0,ye.width-1,ye.height-1).data,a=ye.context;a.drawImage(g.state.imageResolution.imgElem,0,0,ye.width-1,ye.height-1);for(var n=a.getImageData(0,0,ye.width-1,ye.height-1),i=n.data,s=0;s<t.length;s+=4)255==t[s+0]&&0==t[s+1]&&0==t[s+2]&&(i[s+3]=0);e.putImageData(n,0,0);var c=r.toDataURL("image/png"),m=R.a.canvas.getSelectedElems()[0];if(m){var d=g.b64toBlob(c.split(",")[1],"image/png"),u=URL.createObjectURL(d);o=m.prefs.intermediateFile=u,m.prefs.updatedFile=u,m.prefs.updatedBlob=d,g.setState({intermediateFile:u,updatedFile:u},(function(){g.initCanvas()}))}r.getContext("2d").fillText(Ne.x+","+Ne.y,Ne.x,Ne.y),r.getContext("2d").clearRect(0,0,g.state.imageResolution.width,g.state.imageResolution.height),l.getContext("2d").clearRect(0,0,g.state.imageResolution.width,g.state.imageResolution.height),ye=null,n=null,c=null},g.initCanvas=function(){var e=setInterval((function(){if(document.getElementById("image_canvas")){c?(c.clear(),c.clipTo=null):(n=document.getElementById("tooltip_canvas"),c=new I.fabric.Canvas("image_canvas"),de()("#tooltip_canvas").css("cursor","crosshair"),i=n.getContext("2d"),c.selection=!1,c.centeredScaling=!1,c.showRightCornerOnly=!0);var t=c.width,a=c.height,o=R.a.canvas.getSelectedElems()[0],u=o.prefs.intermediateFile?o.prefs.intermediateFile:o.prefs.originalImg;o&&o.prefs&&I.fabric.Image.fromURL(u,(function(e){(s=e.set()).set("url",u),d=s.height=e.height,m=s.width=e.width,s.evented=s.selectable=s.hasControls=!1,r=document.createElement("canvas"),l=document.createElement("canvas");var o=document.createElement("canvas"),i=o.getContext("2d");l.width=r.width=i.canvas.width=m,l.height=r.height=i.canvas.height=d,i.drawImage(g.state.imageResolution.imgElem,0,0,o.width,o.height),(ye={width:e.width,height:e.height,context:l.getContext("2d")}).data=i.getImageData(0,0,m,d),i=o=null,e.width/e.height>1?s.scaleToWidth(t):s.scaleToHeight(a),c.add(s),c.centerObject(s),c.renderAll(),n.width=c.width,n.height=c.height}),{crossOrigin:"anonymous"}),clearInterval(e)}}),50)},g.getColorArray=function(e){var t=[];return e&&e.length&&e.forEach((function(e){e.fill&&"none"!==e.fill&&t.push(e.fill)})),t},g.assignDefaultPrefs=function(e){var t,a,r,n,l,i,s,c,m;t=a=e.prefs.originalImg,""!==e.prefs.updatedFile&&(a=e.prefs.updatedFile),r=e.prefs.optionIndexVal?e.prefs.optionIndexVal:"original",n=e.prefs.filterInfo?e.prefs.filterInfo:g.state.filterInfo,l=e.prefs.maskInfo?e.prefs.maskInfo.properties:g.state.maskInfo,i=e.prefs.maskInfo?e.prefs.maskInfo.selectedMask:null,s=e.prefs.editFilter?e.prefs.editFilter:{brightValue:0,contrastValue:0,saturValue:0,hueValue:0,blurValue:0},m=(c=!e.prefs.reduceColorInfo||e.prefs.reduceColorInfo.isColorOption)?Ve:{},o=e.prefs.intermediateFile,g.setState({selectedFile:t,updatedFile:a,isEnableGrayDiv:!0,isEnableBackgroundDiv:!0,isEnableFilterDiv:!0,isColorOptions:c,isEnableMaskDiv:!0,optionIndexVal:r,filterInfo:n,maskInfo:l,selectedMask:i,sliderValue:s,reduceSvgArr:m.svg,oneColor:e.prefs.oneColorFill}),"mask"!==g.state.activeView&&g.openView("edit"),"mask"===e.prefs.imgSelectionType&&g.openView("")},g.onFilesChange=function(e){if(g.setState({enableMoreColorClick:!1}),g.imageSelectionType="",g.selectedFile=e,!g.state.termConditions.is_enabled||g.state.termConditions.is_default_status){if(e.length)if(!1===e[0].type.includes("svg")){if(-1!==["jpg","png","jpeg"].indexOf(e[0].extension.toLowerCase()))console.log("jpg or png type image"),g.uploadImageToStage(e[0]);else{var t=new FileReader;t.onloadend=function(t){var a=t.target.result,o=g.b64toBlob(a.split(",")[1],e.type);g.setState({uploadImageLoader:!0}),g.props.dispatch(ce.hb(g.props.currentSideIndex,o,e[0].extension,1)).then(function(){var e=Object(v.a)(b.a.mark((function e(t){var a,o,r,n,l;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(1!==t.status){e.next=18;break}return a=t.data.original_file_url,o=t.data.url,n=o.split(".").pop(),e.next=5,g.createURLToFile(o,n);case 5:if(r=e.sent,"svg"!==n){e.next=17;break}if(oe.a.converted_svg_color_change){e.next=11;break}g.uploadImageToStage(r,!1,o,!0,a),e.next=15;break;case 11:return l=0,e.next=14,new Promise((function(e){var t=new FileReader;t.onload=function(){var t=Object(v.a)(b.a.mark((function t(a){var o,r,n;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:o=a.target.result,r=new DOMParser,n=r.parseFromString(o,"image/svg+xml"),l=n.getElementsByTagName("path").length,e();case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),t.readAsText(r)}));case 14:l<20?g.uploadSvgImageToStage(r,!0,"",a):g.uploadImageToStage(r,!1,o,!0,a);case 15:e.next=18;break;case 17:g.uploadImageToStage(r,!0,"",!1,a);case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){g.props.showNotification("danger",e)}))},t.readAsDataURL(e[0])}}else g.uploadSvgImageToStage(e[0])}else g.props.showNotification("warning",g.props.language.image.tc)},g.getUniqueId=function(){var e=new Uint8Array(2),t=window.crypto.getRandomValues(e);return Date.now()+t.join("")},g.uploadHistoryImageToServer=function(e,t){var a=g.localStorageGetItem("browseId")?g.localStorageGetItem("browseId"):0;a||(a=g.getUniqueId()),g.localStorageSetItem("browseId",a);var o=t;ne.a.uploadHistoryImage(a,e).then((function(e){e.data.status&&(document.getElementById(o)&&(document.getElementById(o).prefs.uploadedImg=e.data.image_url,e.data.image_url),ne.a.getHistoryImages(a).then((function(e){g.setState({historyImageList:e.data.data})})))}))},g.uploadSvgImageToStage=function(e,t,a,o){var r=new FileReader;r.onloadend=function(){var r=Object(v.a)(b.a.mark((function r(n){var l,i;return b.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n.target.result,r.next=3,R.a.importBrowseImage(e,g.isEmbroideryEnable,a);case 3:l=R.a.canvas.getSelectedElems()[0],i="",l&&(i=l.getAttribute("id"),o&&(l.prefs.originalImageUrl=o)),t||g.uploadHistoryImageToServer(e,i),g.setState({uploadImageLoader:!1,oneColorEnable:!1}),g.showHideBackLoader(!1);case 8:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}(),r.readAsDataURL(e)},g.updateThumbView=function(e){g.setState({oneColorThumb:e}),R.a.addPreference("oneColorThumb",e),g.disableOneColorLoader(e)},g.disableOneColorLoader=function(){var e=Object(v.a)(b.a.mark((function e(t){var a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R.a.checkImgLoad(t);case 2:a=e.sent,g.setState({oneColorLoader:a});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g.disableMonoChromeLoader=function(){var e=Object(v.a)(b.a.mark((function e(t){var a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R.a.checkImgLoad(t);case 2:a=e.sent,g.setState({monoChromeLoader:a});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g.updateMonochromeThumb=function(e){g.setState({monochromeThumb:e}),R.a.addPreference("monochromeThumb",e),g.disableMonoChromeLoader(e)},g.uploadImageToStage=function(){var e=Object(v.a)(b.a.mark((function e(t,a,o,r,n){var l,i,s,c,m;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:l=!1,i="",m=new FileReader,g.forceReduceColor=!1,g.showHideBackLoader(!0),m.onloadend=function(){var e=Object(v.a)(b.a.mark((function e(m){var d,u,p,f,h,v,k,E,C,x,w,S,y,I,N,_,V,F,L;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(d=m.target.result,"jpg"!==(f=t.name.split(".").pop()).toLowerCase()&&"jpeg"!==f.toLowerCase()){e.next=18;break}return e.next=5,g.getOrientation(t);case 5:if(3!==(h=e.sent)&&8!==h){e.next=14;break}return e.next=9,g.processImage(t);case 9:v=e.sent,u=v.blob,p=v.blobUrl,e.next=16;break;case 14:u=g.b64toBlob(d.split(",")[1],t.type),p=URL.createObjectURL(u);case 16:e.next=20;break;case 18:u=g.b64toBlob(d.split(",")[1],t.type),p=URL.createObjectURL(u);case 20:if(k=!0,!(g.props.globalSettings.file_uploaded&&g.props.globalSettings.file_uploaded.height&&g.props.globalSettings.file_uploaded.width)){e.next=25;break}return e.next=24,R.a.checkImageDimension(p,g.props.globalSettings.file_uploaded);case 24:k=e.sent;case 25:if(!k){e.next=72;break}if((E=R.a.canvas.getSelectedElems()[0])&&E.prefs&&"mask"===E.prefs.imgSelectionType&&(C=E.getBBox(),x=E.getAttribute("id"),s=document.getElementById("mask_"+x),c=document.getElementById("preview_"+x),R.a.canvas.deleteSelectedElements(!0),i="mask"),!r){e.next=33;break}return e.next=31,R.a.importBrowseImage(g.selectedFile[0],g.isEmbroideryEnable,o,o,g.props.productDetails.scale_unit_id,g.props.globalSettings.file_uploaded.low_resolution,oe.a.Dpi,i,r);case 31:e.next=35;break;case 33:return e.next=35,R.a.importBrowseImage(g.selectedFile[0],g.isEmbroideryEnable,o,p,g.props.productDetails.scale_unit_id,g.props.globalSettings.file_uploaded.low_resolution,oe.a.Dpi,i);case 35:if(w=R.a.canvas.getSelectedElems()[0],S="",w&&(S=w.getAttribute("id"),"mask"===i&&(s.setAttribute("id","mask_"+S),c.setAttribute("id","preview_"+S),y=w.getBBox(),I="url(#mask_"+S+")",w.setAttribute("clip-path",I),R.a.canvas.moveSelectedElements(C.x-y.x-(y.width-C.width)/2,C.y-y.y-(y.height-C.height)/2))),a||g.uploadHistoryImageToServer(t,S),N="original",g.props.selectedPrintProfileObj.image_data&&g.props.selectedPrintProfileObj.image_data.show_color_option.one_color&&(_=g.props.selectedPrintProfileObj.image_data.one_color_hexcode?g.props.selectedPrintProfileObj.image_data.one_color_hexcode:"#ff0000",g.setState({oneColorLoader:!0}),R.a.generateOneColorThumb(p,_,g.updateThumbView),R.a.addPreference("oneColorFill",_)),g.props.selectedPrintProfileObj.image_data&&g.props.selectedPrintProfileObj.image_data.show_color_option.monochrome&&(V=g.props.selectedPrintProfileObj.image_data.monochrome_hexcode?g.props.selectedPrintProfileObj.image_data.monochrome_hexcode:"#277E8B",g.setState({monoChromeLoader:!0}),R.a.generateMonochromeThumb(p,V,g.updateMonochromeThumb),R.a.addPreference("monochromeFill",V)),!g.props.selectedPrintProfileObj.image_data||!g.props.selectedPrintProfileObj.image_data.is_auto_convert_image){e.next=55;break}l=!0,e.t0=g.props.selectedPrintProfileObj.image_data.auto_convert_image_type,e.next="one_color"===e.t0?46:"tint"===e.t0?48:"bw"===e.t0?50:"grey_scale"===e.t0?52:54;break;case 46:return N="onecolor",e.abrupt("break",55);case 48:return N="monochrome",e.abrupt("break",55);case 50:return N="blackWhite",e.abrupt("break",55);case 52:return N="grayScale",e.abrupt("break",55);case 54:"original"!==g.props.selectedPrintProfileObj.image_data.auto_convert_image_type&&(N=g.props.selectedPrintProfileObj.image_data.auto_convert_image_type,g.forceReduceColor=!0);case 55:n&&R.a.addPreference("originalImageUrl",n),R.a.addPreference("optionIndexVal",N),R.a.addPreference("imgExtension",t.extension?t.extension:t.name.split(".").pop()),R.a.addPreference("autoConvertStatus",l),r||g.updateBlob(p,u,!0),g.convertImage(p,N,!0),R.a.addPreference("originalBlob",u),g.updateIntermediateFile(p),g.setState({selectedFile:p,updatedFile:p,oneColorThumb:p,monochromeThumb:p,activeView:"edit",isConvertImage:!1,isFilter:!1,isMask:!1,filterInfo:{},isBackground:!1,isColorOptions:!0,reduceSvgArr:[],chooseColorPicker:!1,isEnableGrayDiv:!0,isEnableBackgroundDiv:!0,isEnableFilterDiv:!0,isEnableMaskDiv:!0,optionIndexVal:N,autoConvertImage:l,hideColorPalettes:!1}),g.props.setHeaderDispay(!1),g.setState({uploadImageLoader:!1}),(g.isEmbroideryEnable||g.forceReduceColor)&&(F=g.forceReduceColor&&""!==N?Number(N):8,g.showHideBackLoader(!0),g.setState({isEmbroideryLoader:!0}),R.a.resizeImage(p,500,!0,F,g.reduceImageColor,!0)),g.isEngraveEnable&&R.a.updateEngraveImage(),g.props.selectedPrintProfileObj.image_data&&g.props.selectedPrintProfileObj.image_data.is_more_color_options&&!g.forceReduceColor&&!g.isEmbroideryEnable&&g.handleSwitchChange(!0),r&&g.showHideBackLoader(!1),e.next=76;break;case 72:g.showHideBackLoader(!1),g.setState({uploadImageLoader:!1}),L="Image dimension should be greater than to "+[g.props.globalSettings.file_uploaded.width]+"*"+[g.props.globalSettings.file_uploaded.height]+" px",g.props.showNotification("danger",L);case 76:setTimeout((function(){g.setState({enableMoreColorClick:!0})}),1e3);case 77:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m.readAsDataURL(t);case 6:case"end":return e.stop()}}),e)})));return function(t,a,o,r,n){return e.apply(this,arguments)}}(),g.onImgLoad=function(e){var t=e.target;g.setState({imageResolution:{height:t.offsetHeight,width:t.offsetWidth,imgElem:t}})},g.onFilesError=function(e){g.props.showNotification("danger",e.message)},g.changeCropState=function(e){g.setState({crop:e})},g.onCompleteCrop=function(){var e;e=R.a.addCropImage(g.state.crop,g.imageRef,g.state.optionIndexVal),R.a.applyFilter(e,g.state.sliderValue,(function(e,t){var a="";R.a.addToStage(e,g.state.optionIndexVal),g.updateBlob(e,t),g.updateIntermediateFile(e);var o=R.a.canvas.getSelectedElems()[0];"onecolor"===g.state.optionIndexVal?a=o.prefs.oneColorFill:"monochrome"===g.state.optionIndexVal&&(a=o.prefs.monochromeFill),g.convertImage(e,g.state.optionIndexVal,!1,a),g.openView("edit")}))},g.onImageLoadEndState=function(e){g.imageRef=e},g.addMakEffect=function(e){if(e&&e.xe_id){g.maskEditStatus=!0;var t=document.getElementById("mask_svg_"+e.xe_id).outerHTML,a=(new DOMParser).parseFromString(t,"image/svg+xml"),o=a.getElementsByTagName("path");if(o&&o.length){for(var r=0;r<o.length;r++)g.state.selectStrokeValue&&o[r].setAttribute("stroke-width",g.state.selectStrokeValue),g.state.strokeColor&&o[r].setAttribute("stroke",g.state.strokeColor);t=a.getElementsByTagName("svg")[0].outerHTML;for(var n=0;n<o.length;n++)o[n].setAttribute("transform","scale(0.24)"),g.state.selectStrokeValue&&g.state.selectStrokeValue>1&&o[n].setAttribute("stroke-width",2)}g.setState({selectedMask:a.getElementsByTagName("svg")[0].outerHTML,maskInfo:e,selectStrokeValue:g.state.selectStrokeValue?g.state.selectStrokeValue:1,strokeColor:g.state.strokeColor?g.state.strokeColor:"#000000"},Object(v.a)(b.a.mark((function a(){var o,r,n,l;return b.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return o=R.a.canvas.getSelectedElems()[0],r="",n=[],o&&(r=o.getElementsByTagName("image")?o.getElementsByTagName("image")[0].getAttribute("id"):""),r&&(n=g.reduceColorListArr[r]&&g.reduceColorListArr[r].svg.length?g.reduceColorListArr[r].svg:Ve[r]&&Ve[r].svg.length?Ve[r].svg:[]),a.next=5,R.a.addMaskEffect(t,e.xe_id);case 5:(l=a.sent)&&(g.reduceColorListArr[l]={svg:n},Ve[l]={svg:n}),g.setState({reduceSvgArr:n}),g.addMaskPrefs(),g.isEngraveEnable&&R.a.updateEngraveImage();case 10:case"end":return a.stop()}}),a)}))))}},g.addFilterEffect=function(){var e=Object(v.a)(b.a.mark((function e(t){var a,o;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.filter,!(o=R.a.canvas.getSelectedElems()[0])){e.next=12;break}return g.filterInfo={type:t.type,string:a,filterData:t},e.next=6,R.a.addFilterEffect(t.type,a);case 6:return e.next=8,R.a.addPreference("filterInfo",g.filterInfo);case 8:return e.next=10,R.a.updateImageStatus(o);case 10:o.prefs.updateStatus=e.sent,g.setState({removeBackgroundStatus:o.prefs.updateStatus,filterInfo:g.filterInfo});case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g.renderMaskView=function(e,t,a){if(null!==t)if(""===e){var o,r;o=document.getElementsByTagName("g");for(var n=0;n<o.length;n++)if("shape"===o[n].getAttribute("type")){r=o[n].getElementsByTagName("path")[0];break}if(void 0!==r)r=(new XMLSerializer).serializeToString(r),g.generateClipPath(t,a,r)}else{var l=new XMLHttpRequest;l.open("GET",e),l.onload=function(){l.status>=200&&l.status<300&&g.generateClipPath(t,a,l.responseText)},l.send()}},g.renderFilterView=function(e,t,a){var o,r,n,l,i,s,c,m;null!==t&&(s="filter_"+e,n=document.createElement("svg"),c=document.createElement("defs"),m=document.createElement("g"),n.setAttribute("height","200"),n.setAttribute("width","200"),n.setAttribute("xmlns",le.a.SVG),n.setAttribute("xmlns:xlink",le.a.XLINK),n.setAttribute("viewBox","0 0 200 200"),n.setAttribute("id","mask_svg_"+e),(l=document.createElement("image")).setAttribute("height","100%"),l.setAttribute("width","100%"),l.setAttribute("x","0"),l.setAttribute("y","0"),l.setAttribute("xlink:href",t),l.setAttribute("filter","url(#"+s+")"),(i=document.createElement("filter")).setAttribute("id","filter_"+e),i.innerHTML=a,c.appendChild(i),m.appendChild(c),m.appendChild(l),n.appendChild(m),r=n.outerHTML,(o=document.getElementById("preview_"+e))&&(o.innerHTML=r))},g.generateClipPath=function(e,t,a){var o,r,n,l,i,s,c,m,d,u,p;if((o=document.createElement("div")).innerHTML=a,o.getElementsByTagName("path")&&o.getElementsByTagName("path").length){if(o.getElementsByTagName("path")[0].setAttribute("stroke-width","1"),o.getElementsByTagName("path")[0].setAttribute("stroke","#000000"),o.getElementsByTagName("path")[0].setAttribute("vector-effect","non-scaling-stroke"),o.getElementsByTagName("path")[0].setAttribute("transform","scale(0.45)"),r=document.createElement("svg"),l=document.createElement("g"),c=document.createElement("g"),r.setAttribute("height","200"),r.setAttribute("width","200"),r.setAttribute("xmlns",le.a.SVG),r.setAttribute("xmlns:xlink",le.a.XLINK),r.setAttribute("viewBox","0 0 200 200"),r.setAttribute("id","mask_svg_"+t),(n=document.createElement("image")).setAttribute("height",150),n.setAttribute("width",150),n.setAttribute("x","0"),n.setAttribute("y","0"),n.setAttribute("clip-path","url(#xe_"+t+")"),n.setAttribute("xlink:href",e),"object"!==typeof InstallTrigger?n.setAttribute("style","width: 100%;height: 100%;"):n.setAttribute("style","width: 70px;height: 70px"),i=document.createElement("defs"),s=document.createElementNS(le.a.SVG,"clipPath"),g.state.filterInfo&&void 0!==g.state.filterInfo.type){var f=R.a.canvas.getNextId(),h=R.a.canvas.addSVGElementFromJson({element:"filter",attr:{xmlns:le.a.SVG,id:f,style:"color-interpolation-filters:sRGB",type:g.state.filterInfo.type}});h.innerHTML=g.state.filterInfo.string,i.appendChild(h),n.setAttribute("filter","url(#"+f+")")}l.appendChild(n),r.appendChild(l),(m=document.createElement("g")).setAttribute("id","pathgroup"),m.innerHTML=o.getElementsByTagName("svg")[0]?o.getElementsByTagName("svg")[0].innerHTML:o.getElementsByTagName("path")[0].outerHTML,m.firstElementChild.setAttribute("id","maskpath"),s.innerHTML=m.firstElementChild.outerHTML,s.setAttribute("id","xe_"+t),i.appendChild(s),l.appendChild(m),c.setAttribute("pointer-events","bounding-box"),c.appendChild(i),c.appendChild(l),r.appendChild(c),d=r.outerHTML,u=(new DOMParser).parseFromString(d,"image/svg+xml"),(p=document.getElementById(t))&&(p.getElementsByTagName("svg").length&&p.getElementsByTagName("svg")[0].remove(),p.appendChild(u.getElementsByTagName("svg")[0]))}},g.addSelectedReduceImage=function(e){g.showHideBackLoader(!0),R.a.resizeImage(o,1e3,!0,e+1,g.reduceImageColor),g.selectedReduceIndex=e;var t=e+1+" "+g.props.language.main.color;g.setState({selectedMoreColorVal:t,isEnableFilterDiv:!1,isEnableMaskDiv:!1,enableMoreColorClick:!1});var a=R.a.canvas.getSelectedElems()[0];a&&(a.prefs.selectedMoreColorVal=t)},g.showHideBackLoader=function(e){g.props.showHideBackLoader(e,"Image")},g.checkWhiteColor=function(e){for(var t=!1,a=e.split(""),o=!0,r=1;r<a.length;r++)o&&(1===r||3===r||5===r?"f"===a[r].toLowerCase()?t=!0:(t=!1,o=!1):a[r].match(/^[0-9a-z]+$/)?t=!0:(t=!1,o=!1));return t},g.addSvgToStage=function(e,t){e&&e.svg?R.a.addSvgToStage(e.svg,g.isEmbroideryEnable,g.forceReduceColor,(function(e){var a=R.a.canvas.getActiveObject();a&&!g.isEmbroideryEnable&&a[0].querySelectorAll("path")&&a[0].querySelectorAll("path").length&&t.length&&g.checkWhiteColor(t[0])&&(g.state.removeWhiteIndex||a[0].prefs.removeWhiteIndex)&&(a[0].querySelectorAll("path")[0].setAttribute("fill","none"),t[0]="none",a[0].prefs.removeWhiteIndex=!0),g.setState({selectedImgColor:t,chooseColorPicker:!1,isEnableGrayDiv:!1,isEnableBackgroundDiv:!1,isEnableFilterDiv:!1,isEnableMaskDiv:!1,enableMoreColorClick:!0}),g.selectedColorIndex=-1,g.reduceColorListArr[e]={colorList:t,svg:g.state.reduceSvgArr,index:g.selectedReduceIndex},Ve[e]={colorList:t,svg:g.state.reduceSvgArr,index:g.selectedReduceIndex},R.a.addPreference("reduceColorInfo",{isColorOption:g.state.isColorOptions}),a[0].prefs.selectedSvgColors=t,g.showHideBackLoader(!1),g.setState({isEmbroideryLoader:!1}),R.a.canvas.call("changed",a)})):(g.showHideBackLoader(!1),g.setState({enableMoreColorClick:!0}))},g.updateReduceColorList=function(e,t){g.colorList=t;var a,o=!1;g.svgPreloader=!1;var r=R.a.canvas.getActiveObject()[0];r&&(r.prefs.removeWhiteIndex&&(o=!0),a=r.childNodes[0].getAttribute("id"),Ve[a]={svg:e},g.setState({reduceSvgArr:e,selectedImgColor:t,oneColorEnable:!1,removeWhiteIndex:o}),R.a.addPreference("reduceColorInfo",{isColorOption:g.state.isColorOptions}),r.prefs.selectedSvgColors=t)},g.handleSwitchChange=function(e){if(g.props.isMobileView){var t=document.getElementById("morecolors");t&&setTimeout((function(){t.scrollIntoView()}),1e3)}if(g.setState({isColorOptions:e}),e)R.a.resizeImage(o,500,!1,"",g.reduceImageColor),g.svgPreloader=!0;else{var a=R.a.canvas.getSelectedElems()[0];a&&a.prefs.imgSelectionType&&"convert"===a.prefs.imgSelectionType&&(g.revertToOriginal(o),g.setState({isEnableGrayDiv:!0,isEnableBackgroundDiv:!0,isEnableFilterDiv:!0,isEnableMaskDiv:!0,oneColorEnable:!1}))}},g.reduceImageColor=function(e,t,a,o){t?a&&R.a.reduceImageColor(e,g.addSvgToStage,"add",a,o):(g.selectedColorIndex=-1,g.selectedReduceIndex=-1)},g.onColorHover=function(e,t){if(g.currSelectedColor&&e.hex_value){var a=R.a.canvas.getSelectedElems()[0],o=a.querySelectorAll("path,circle,rect,ellipse,polygon");if(a&&a.prefs){a.innerHTML;if(!0===t)if(g.isEmbroideryEnable)for(var r=o[g.selectedIndex].getAttribute("fill"),n=r.substring(r.lastIndexOf("#")+1,r.lastIndexOf(")")),l=document.getElementById(n)?document.getElementById(n).getElementsByTagName("polygon"):[],i=0;i<l.length;i++)l[i].setAttribute("fill",e.hex_value);else{for(var s=!0,c=0;c<o.length;c++)o.length&&o[c]&&g.previousColor===o[c].getAttribute("fill")&&(g.svgColorList.forEach((function(t){t.fill===e.hex_value&&(s=!1)})),s&&o[c].setAttribute("fill",e.hex_value));s&&(g.previousColor=e.hex_value)}else if(!1===t)if(g.isEmbroideryEnable)for(var m=o[g.selectedIndex].getAttribute("fill"),d=m.substring(m.lastIndexOf("#")+1,m.lastIndexOf(")")),u=document.getElementById(d)?document.getElementById(d).getElementsByTagName("polygon"):[],p=0;p<u.length;p++)u[p].setAttribute("fill",g.prevCol);else{for(var f=0;f<o.length;f++)o.length&&o[f]&&g.previousColor===o[f].getAttribute("fill")&&o[f].setAttribute("fill",g.currSelectedColor);g.previousColor=g.currSelectedColor}}}},g.onColorSelect=function(e){var t=R.a.canvas.getSelectedElems()[0],a={},r=t.querySelectorAll("path,circle,rect,ellipse,polygon");if("none"===e.hex_value){if(g.isEmbroideryEnable){for(var n=r[g.selectedIndex].getAttribute("fill"),l=n.substring(n.lastIndexOf("#")+1,n.lastIndexOf(")")),i=document.getElementById(l)?document.getElementById(l).getElementsByTagName("polygon"):[],s=0;s<i.length;s++)i[s].setAttribute("fill","none");g.svgColorList&&g.svgColorList.length&&(g.svgColorList[g.selectedIndex].fill=e.hex_value,g.setState({svgColorList:g.svgColorList}))}else if(g.svgColorList&&g.svgColorList.length){for(var c=0;c<r.length;c++)r.length&&r[c]&&g.svgColorList[g.selectedIndex].fill===r[c].getAttribute("fill")&&r[c].setAttribute("fill","none");g.svgColorList[g.selectedIndex].fill=e.hex_value,g.setState({svgColorList:g.svgColorList})}}else if("#"!==e.hex_value[0]){var m=e.value.replace(/^.*[\\\/]/,"");if(R.a.canvas.setPatternDefs(m,e.value),r&&r.length&&g.svgColorList&&g.svgColorList.length){for(var d=0;d<r.length;d++)r.length&&r[d]&&g.svgColorList[g.selectedIndex].fill===r[d].getAttribute("fill")&&r[d].setAttribute("fill","url(#"+m+")");g.svgColorList[g.selectedIndex].fill="url(#"+m+")",g.setState({svgColorList:g.svgColorList}),g.lastSelectedColor=r&&r.length&&r[g.selectedIndex].getAttribute("oldFill")||"#000000",r[g.selectedIndex].setAttribute("oldFill","url(#"+m+")"),a={fill:g.lastSelectedColor},R.a.canvas.addChangesToHistory(r[g.selectedIndex],a,!1,t)}}else if(g.isEmbroideryEnable){for(var u=r[g.selectedIndex].getAttribute("fill"),p=u.substring(u.lastIndexOf("#")+1,u.lastIndexOf(")")),h=document.getElementById(p)?document.getElementById(p).getElementsByTagName("polygon"):[],b=0;b<h.length;b++)h[b].setAttribute("fill",e.hex_value);g.svgColorList[g.selectedIndex].fill=e.hex_value,g.setState({svgColorList:g.svgColorList}),g.prevCol=e.hex_value}else if(g.svgColorList&&g.svgColorList.length&&r&&r.length){for(var v=0;v<r.length;v++)r.length&&r[v]&&g.svgColorList[g.selectedIndex].fill===r[v].getAttribute("oldFill")&&r[v].setAttribute("fill",e.hex_value);g.svgColorList[g.selectedIndex].fill=e.hex_value,g.setState({svgColorList:g.svgColorList}),g.prevCol=e.hex_value,g.lastSelectedColor=r[g.selectedIndex].getAttribute("oldFill")||"#000000",r[g.selectedIndex].setAttribute("oldFill",e.hex_value),a={fill:g.lastSelectedColor},R.a.canvas.addChangesToHistory(r[g.selectedIndex],a,!1,t)}if(t){var k=[],E=t.innerHTML;if(E=E.replace(g.currSelectedColor,e.hex_value),"convert"===t.prefs.imgSelectionType){k=Object(f.a)(g.state.selectedImgColor),e.hex_value?k[g.selectedColorIndex]=g.currSelectedColor=e.hex_value:k[g.selectedColorIndex]=g.currSelectedColor=e.value,g.setState({selectedImgColor:k,chooseColorPicker:!1});t.getElementsByTagName("g")[0].getAttribute("id");t.prefs.selectedSvgColors=k}else"onecolor"===t.prefs.imgSelectionType?("none"===e.hex_value?g.currSelectedColor="transparent":g.currSelectedColor=e.hex_value,""!==g.currSelectedColor?g.setState({svgColorList:[{id:0,fill:g.currSelectedColor}],oneColor:g.currSelectedColor,oneColorEnable:!0}):g.setState({svgColorList:[{id:0,fill:g.currSelectedColor}],oneColor:"#000000",oneColorEnable:!0}),g.prevCol=g.currSelectedColor,R.a.applyOneColor(o||t.prefs.originalImg,"onecolor",g.currSelectedColor,g.updateBlob,!0)):"monochrome"===t.prefs.imgSelectionType?("none"===e.hex_value?g.currSelectedColor="transparent":g.currSelectedColor=e.hex_value,""!==g.currSelectedColor?g.setState({svgColorList:[{id:0,fill:g.currSelectedColor}],monochromeColor:g.currSelectedColor,oneColorEnable:!0}):g.setState({svgColorList:[{id:0,fill:g.currSelectedColor}],monochromeColor:"#277E8B",oneColorEnable:!0}),g.prevCol=g.currSelectedColor,R.a.applyMonoChrome(o||t.prefs.originalImg,"monochrome",g.currSelectedColor,g.updateBlob,!0)):(g.currSelectedColor=e.hex_value,g.setState({svgColorList:g.svgColorList,oneColor:g.currSelectedColor,oneColorEnable:!1}));t.prefs.colors=g.getColorArray(g.svgColorList),g.props.setLayerData()}},g.onChangeImageColor=function(e,t){g.selectedIndex=g.selectedColorIndex=e,g.setState({hideColorPalettes:!1}),g.previousColor=g.currSelectedColor=g.prevCol=t;var a=g.state.selectedImgColor.length?g.state.selectedImgColor:g.svgColorList,o=[];a.forEach((function(e,t){o.push({id:t,fill:e})})),g.openView("chooseColor")},g.onChangeSingleColor=function(e){g.setState({svgColorList:[{id:0,fill:e}],oneColorEnable:!0}),g.selectedIndex=0,g.openView("chooseColor"),g.prevCol=e},g.onChangeMonochromeColor=function(e){g.setState({svgColorList:[{id:0,fill:e}],oneColorEnable:!0}),g.selectedIndex=0,g.openView("chooseColor"),g.prevCol=e},g.applyFullColor=function(){if(-1!==g.selectedReduceIndex){g.revertToOriginal(),g.setState({selectedMoreColorVal:"Full Color"});var e=R.a.canvas.getSelectedElems()[0];e&&(e.prefs.selectedMoreColorVal="Full Color")}},g.revertToOriginal=function(){var e=Object(v.a)(b.a.mark((function e(t){var a,o,r,n,l,i;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(g.maskEditStatus=!1,g.showHideBackLoader(!0),!((a=R.a.canvas.getSelectedElems()[0])&&a.prefs&&a.prefs.originalImg)){e.next=17;break}return o="",g.setState({isConvertImage:!1,isFilter:!1,isMask:!1,filterInfo:{},isBackground:!1,isColorOptions:!0}),r=t||a.prefs.originalImg,n=a.childNodes[0].getElementsByTagName("image").length?a.childNodes[0].getElementsByTagName("image")[0].getAttribute("id"):a.childNodes[0].getAttribute("id"),e.next=9,R.a.revertToOriginal(r,g.state.autoConvertImage);case 9:(g.reduceColorListArr[n]||Ve[n])&&(l=g.reduceColorListArr[n]?g.reduceColorListArr[n].svg:Ve[n].svg,(i=R.a.canvas.getSelectedElems()[0])&&i.childNodes[0].getAttribute("id")&&(g.reduceColorListArr[i.childNodes[0].getAttribute("id")]={svg:l})),R.a.addPreference("imgExtension",a.prefs.imgExtension?a.prefs.imgExtension:a.prefs.contentType.split("/").pop()),g.updateBlob(r,a.prefs.originalBlob),g.updateIntermediateFile(r),"onecolor"===g.state.optionIndexVal?o=a.prefs.oneColorFill:"monochrome"===g.state.optionIndexVal&&(o=a.prefs.monochromeFill),g.convertImage(r,g.state.optionIndexVal,!1,o),g.selectedReduceIndex=-1,g.isEngraveEnable&&R.a.updateEngraveImage();case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g.removeOuterWhiteBackground=function(e,t){return new Promise((function(a,o){var r=new XMLHttpRequest;r.open("GET",e,!0),r.responseType="blob",r.onload=function(o){var r=this;if(200==this.status){var n=this.response;ue.u(n,n.type.split("/").pop(),t).then((function(t){1===t.data.status?(R.a.addToStage(t.data.data.url),a(t.data.data.url)):(a(e),r.props.showNotification("warning",r.props.language.image.serverError))}))}},r.send()}))},g.convertImage=function(){var e=Object(v.a)(b.a.mark((function e(t,a,o,r){var n,l,i,s,c,m,d,u,p,f,h;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:g.setState({optionIndexVal:a}),g.optionIndexVal=a,n={brightValue:0,contrastValue:0,saturValue:0,hueValue:0,blurValue:0},R.a.addPreference("editFilter",n),g.setState({tempSliderValue:n,sliderValue:n}),g.showHideBackLoader(!0),l=R.a.canvas.getSelectedElems()[0],e.t0=a,e.next="blackWhite"===e.t0?10:"grayScale"===e.t0?13:"onecolor"===e.t0?16:"monochrome"===e.t0?20:"removeWhite"===e.t0?25:"outerWhite"===e.t0?43:51;break;case 10:return R.a.applyBlackWhite(t,a,g.updateBlob),R.a.addPreference("colors",["#ffffff","#000000"]),e.abrupt("break",54);case 13:return R.a.applyGrayScale(t,a,g.updateBlob),R.a.addPreference("colors",["#ffffff","#000000"]),e.abrupt("break",54);case 16:return i=g.props.selectedPrintProfileObj.image_data.one_color_hexcode?g.props.selectedPrintProfileObj.image_data.one_color_hexcode:"#ff0000",l&&(i=l.prefs.oneColorFill),g.setState({oneColor:r||i},(function(){R.a.applyOneColor(t,a,g.state.oneColor,g.updateBlob),R.a.addPreference("colors",g.getColorArray([{fill:g.state.oneColor}]))})),e.abrupt("break",54);case 20:return s=R.a.canvas.getSelectedElems()[0],c=g.props.selectedPrintProfileObj.image_data.monochrome_hexcode?g.props.selectedPrintProfileObj.image_data.monochrome_hexcode:"#277E8B",s&&s.prefs.monochromeFill&&(c=s.prefs.monochromeFill),g.setState({monochromeColor:r||c},(function(){R.a.applyMonoChrome(t,a,g.state.monochromeColor,g.updateBlob),R.a.addPreference("colors",g.getColorArray([{fill:g.state.monochromeColor}]))})),R.a.addPreference("colors",["Full"]),e.abrupt("break",54);case 25:if(u="","imgMagic"!==g.props.selectedPrintProfileObj.image_data.white_removal_type){e.next=33;break}return e.next=29,g.removeOuterWhiteBackground(t,"removed_white");case 29:m=e.sent,u="",e.next=38;break;case 33:return e.next=35,R.a.removeWhiteBackground(t);case 35:d=e.sent,u=d.blob,m=d.blobUrl;case 38:return g.updateBlob(m,u),g.updateIntermediateFile(m),R.a.addPreference("isRemoveAllWhite",1),R.a.addPreference("colors",["Full"]),e.abrupt("break",54);case 43:return e.next=45,g.removeOuterWhiteBackground(t,"removed_edges");case 45:return p=e.sent,g.updateBlob(p,""),g.updateIntermediateFile(p),R.a.addPreference("isRemoveOuterWhite",1),R.a.addPreference("colors",["Full"]),e.abrupt("break",54);case 51:o||(R.a.resetFilter(t,a,g.updateBlob),f=g.props.selectedPrintProfileObj.image_data.one_color_hexcode?g.props.selectedPrintProfileObj.image_data.one_color_hexcode:"#ff0000",h=g.props.selectedPrintProfileObj.image_data.monochrome_hexcode?g.props.selectedPrintProfileObj.image_data.monochrome_hexcode:"#277E8B",R.a.addPreference("monochromeFill",h),R.a.addPreference("oneColorFill",f)),R.a.addPreference("colors",["Full"]),g.showHideBackLoader(!1);case 54:R.a.canvas.extractAlphaPx();case 55:case"end":return e.stop()}}),e)})));return function(t,a,o,r){return e.apply(this,arguments)}}(),g.updateMaskThumb=function(e){var t=g.state.selectedMask;if(t){var a=(new DOMParser).parseFromString(t,"image/svg+xml"),o=a.getElementsByTagName("image");if(o&&o.length){o[0].setAttribute("xlink:href",e);var r=a.getElementsByTagName("svg")[0].outerHTML;g.setState({selectedMask:r});var n={selectedMask:r,properties:g.state.maskInfo};R.a.addPreference("maskInfo",n)}}},g.updateBlob=function(){var e=Object(v.a)(b.a.mark((function e(t,a,o,r,n){var l,i,s;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l=R.a.canvas.getSelectedElems(),i=!0,!l){e.next=5;break}return e.next=4,R.a.updateImageStatus(l[0]);case 4:i=l[0].prefs.updateStatus=e.sent;case 5:g.setState({removeBackgroundStatus:i,updatedFile:t,optionIndexVal:g.optionIndexVal}),R.a.addPreference("updatedFile",t),a&&R.a.addPreference("updatedBlob",a),g.state.autoConvertImage&&g.updateIntermediateFile(t),g.state.selectedMask&&g.updateMaskThumb(t),o||setTimeout((function(){g.showHideBackLoader(!1)}),1e3),r&&g.reduceColorListArr&&g.reduceColorListArr[r]&&g.reduceColorListArr[r].svg.length&&(s=l[0])&&s.childNodes[0].getAttribute("id")&&s.childNodes[0].getAttribute("id")!==r&&(g.reduceColorListArr[s.childNodes[0].getAttribute("id")]={svg:g.reduceColorListArr[r].svg}),n||R.a.canvas.call("changed",l);case 13:case"end":return e.stop()}}),e)})));return function(t,a,o,r,n){return e.apply(this,arguments)}}(),g.updateIntermediateFile=function(e){o=e,R.a.addPreference("intermediateFile",e)},g.resetImagePeview=function(){if(JSON.stringify(g.state.tempSliderValue)===JSON.stringify(g.state.sliderValue)){var e=JSON.parse(JSON.stringify(g.state.tempSliderValue));we={brightValue:Number(e.brightValue),contrastValue:Number(e.contrastValue),saturValue:Number(e.saturValue),hueValue:Number(e.hueValue),blurValue:Number(e.blurValue)},R.a.applyFilter(g.state.updatedFile,we,(function(e,t){g.updatedBlob=t,g.onImageLoadEndState(e)}))}},g.imageFilter=function(e,t){var a=JSON.parse(JSON.stringify(g.state.tempSliderValue));a[t]="0.0"===Number(e)?0:Number(e),g.filterStatus=!0,we={brightValue:Number(a.brightValue-g.state.sliderValue.brightValue),contrastValue:Number(a.contrastValue-g.state.sliderValue.contrastValue),saturValue:Number(a.saturValue-g.state.sliderValue.saturValue),hueValue:Number(a.hueValue-g.state.sliderValue.hueValue),blurValue:Number(a.blurValue-g.state.sliderValue.blurValue)},g.setState({tempSliderValue:a},(function(){setTimeout((function(){g.filterStatus&&R.a.applyFilter(g.state.updatedFile,we,(function(e,t){g.updatedBlob=t,g.onImageLoadEndState(e),g.filterStatus=!1}))}),500)}))},g.onCompleteFilter=function(){JSON.stringify(g.state.tempSliderValue)!==JSON.stringify(g.state.sliderValue)?g.setState({sliderValue:g.state.tempSliderValue},(function(){R.a.addPreference("editFilter",g.state.sliderValue),R.a.addToStage(g.imageRef,g.state.optionIndexVal),g.updateBlob(g.imageRef,g.updatedBlob),R.a.applyFilter(o,we,(function(e){g.openView("edit")}))})):g.openView("edit")},g.removeSelectedFilter=Object(v.a)(b.a.mark((function e(){var t,a,o;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g.isFilterApplied=0,'<feGaussianBlur stdDeviation="0,0"/>',t={type:"normal",css:"none"},a=R.a.canvas.getSelectedElems()[0],o={},e.next=7,R.a.addFilterEffect(t.type,'<feGaussianBlur stdDeviation="0,0"/>');case 7:return e.next=9,R.a.addPreference("filterInfo",o);case 9:return e.next=11,R.a.updateImageStatus(a);case 11:a.prefs.updateStatus=e.sent,g.setState({removeBackgroundStatus:a.prefs.updateStatus,filterInfo:o}),g.isEngraveEnable&&R.a.updateEngraveImage();case 14:case"end":return e.stop()}}),e)}))),g.openFilterView=function(){g.appliedFilterInfo=g.state.filterInfo,g.openView("filter")},g.applyFilter=function(){g.isFilterApplied=1,R.a.addPreference("filterInfo",g.state.filterInfo),g.openView("edit")},g.cancelFilter=function(){0===g.isFilterApplied?g.removeSelectedFilter():void 0!==g.appliedFilterInfo.filterData&&g.addFilterEffect(g.appliedFilterInfo.filterData),g.openView("edit")},g.openMaskView=function(){g.appliedMaskInfo=g.state.maskInfo,g.maskString=g.state.selectedMask,g.openView("mask"),g.setState({isMaskSettingActive:!1,isStrokeColor:!1})},g.applyMask=function(){g.maskEditStatus=!0,g.setState({isMaskSettingActive:!1,isStrokeColor:!1}),g.isMaskApplied=1,g.addMaskPrefs(),g.openView("edit"),Se=!1},g.addMaskPrefs=function(){var e="",t=R.a.canvas.getSelectedElems()[0],a=g.state.selectedMask;if(t&&t.getElementsByTagName("path")[1]){var o=t.getElementsByTagName("path")[1].getAttribute("stroke"),r=t.getElementsByTagName("path")[1].getAttribute("stroke-width"),n=(e=(new DOMParser).parseFromString(a,"image/svg+xml")).getElementsByTagName("path");if(n&&n.length)for(var l=0;l<n.length;l++)n[l].setAttribute("stroke",o),r>1&&(r=2),n[l].setAttribute("stroke-width",r);var i=e.getElementsByTagName("svg")[0].outerHTML;g.setState({selectedMask:i},(function(){var e={selectedMask:i,properties:g.state.maskInfo};R.a.addPreference("maskInfo",e)}))}else{var s={selectedMask:a,properties:g.state.maskInfo};R.a.addPreference("maskInfo",s)}},g.cancelMask=function(){Se=!1,g.maskEditStatus?(g.state.isMaskSettingActive?(g.setState({isMaskSettingActive:!1,selectStrokeValue:1,strokeColor:"#000000",isStrokeColor:!1}),g.state.maskInfo&&g.state.maskInfo.xe_id&&g.addMakEffect(g.state.maskInfo)):(0===g.isMaskApplied?g.removeSelectedMask():g.addMakEffect(g.appliedMaskInfo),g.openView("edit")),g.maskEditStatus=!1):g.openView("edit")},g.isEmptyObj=function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},g.removeSelectedMask=Object(v.a)(b.a.mark((function e(){var t,a,r,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(g.isMaskApplied=0,!((t=R.a.canvas.getSelectedElems()[0])&&t.prefs&&t.prefs.originalImg)||g.isEmptyObj(t.prefs.maskInfo)){e.next=18;break}return"",r=[],(a=t.getElementsByTagName("image")?t.getElementsByTagName("image")[0].getAttribute("id"):"")&&(r=g.reduceColorListArr[a]&&g.reduceColorListArr[a].svg.length?g.reduceColorListArr[a].svg:Ve[a]&&Ve[a].svg.length?Ve[a].svg:[]),e.next=8,R.a.revertToOriginal(t.prefs.originalImg,!1);case 8:return(n=R.a.canvas.getSelectedElems()[0].getElementsByTagName("image")[0].getAttribute("id"))&&(g.reduceColorListArr[n]={svg:r},Ve[n]={svg:r}),g.setState({reduceSvgArr:r}),e.next=13,R.a.updateImageStatus(t);case 13:t.prefs.updateStatus=e.sent,g.setState({removeBackgroundStatus:t.prefs.updateStatus,selectedMask:null,maskInfo:{},selectStrokeValue:1,strokeColor:"#000000"}),0===g.isMaskApplied&&1===g.isFilterApplied&&g.filterInfo&&(g.addFilterEffect(g.filterInfo.filterData),g.setState({filterInfo:g.filterInfo.filterData}),t.prefs.updatedFile||(t.prefs.updatedFile=t.prefs.intermediateFile)),"original"!==g.optionIndexVal&&g.convertImage(o,g.optionIndexVal,!1),g.isEngraveEnable&&R.a.updateEngraveImage();case 18:case"end":return e.stop()}}),e)}))),g.onMaskZoomIn=function(){R.a.zoomUploadImage(10)},g.onMaskZoomOut=function(){R.a.zoomUploadImage(-10)},g.positionMaskImg=function(e){var t=R.a.canvas.getSelectedElems()[0].getElementsByTagName("image")[0],a=t.getBBox();switch(e){case"left":t.setAttribute("x",a.x-5);break;case"right":t.setAttribute("x",a.x+5);break;case"top":t.setAttribute("y",a.y-5);break;case"bottom":t.setAttribute("y",a.y+5)}},g.setSelectedStroke=function(e){g.setState({selectStrokeValue:Number(e)});var t=R.a.canvas.getSelectedElems()[0].getElementsByTagName("path")[1],a=Number(e);void 0!==t&&t.setAttribute("stroke-width",a)},g.onMaskColorSelect=function(e){var t=R.a.canvas.getSelectedElems()[0].getElementsByTagName("path")[1];void 0!==t&&t.setAttribute("stroke",e.hex_value||"url(#pattern_"+e.id+")"),e.hex_value?g.setState({strokeColor:e.hex_value}):(R.a.canvas.setPatternDefs("pattern_"+e.id,e.value),g.setState({strokeColor:e.value}))},g.onChangeTermCondition=function(e){var t=Object(p.a)({},g.state.termConditions);t.is_default_status=e.target.checked,g.setState({termConditions:t}),e.target.checked&&g.setState({isDisplayTcWarn:!1})},g.displayTcWarn=function(){g.state.termConditions.is_default_status?g.setState({isDisplayTcWarn:!1}):g.setState({isDisplayTcWarn:!0})},g.maskSettings=function(){void 0!==g.state.maskInfo&&g.state.maskInfo.xe_id?(g.setState({isMaskSettingActive:!0}),Se=!1):Se||g.props.showNotification("warning",g.props.language.image.maskError)},g.colorSelected=function(){g.setState({isStrokeColor:!0})},g.closeColorView=function(e){var t=R.a.canvas.getSelectedElems()[0];t&&t.prefs&&"convert"==t.prefs.imgSelectionType?"png"===t.prefs.imgExtension&&t.prefs.imgType&&"svg"===t.prefs.imgType?g.openView("edit"):g.openView(""):"svg"===t.prefs.imgExtension||t.prefs.imgType&&"svg"===t.prefs.imgType?(1==g.state.hideColorPalettes?g.setState({hideColorPalettes:!1}):g.setState({hideColorPalettes:!0}),g.selectedIndex&&1!=g.state.hideColorPalettes||g.openView("")):g.openView("edit"),e||R.a.canvas.call("changed",R.a.canvas.getActiveObject())},g.addHistoryImage=function(){var e=Object(v.a)(b.a.mark((function e(t){var a,o,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(g.displayTcWarn(),!g.state.termConditions.is_enabled||g.state.termConditions.is_default_status){e.next=3;break}return e.abrupt("return");case 3:return g.showHideBackLoader(!0),a=t.file_name.split(".").pop(),e.next=7,g.createURLToFile(t.file_name,a);case 7:if(o=e.sent,g.selectedFile=[o],"svg"!==a){e.next=16;break}return r=0,e.next=13,new Promise((function(e){var t=new FileReader;t.onload=function(){var t=Object(v.a)(b.a.mark((function t(a){var o,n,l;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:o=a.target.result,n=new DOMParser,l=n.parseFromString(o,"image/svg+xml"),r=l.getElementsByTagName("path").length,e();case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),t.readAsText(o)}));case 13:r<20?g.uploadSvgImageToStage(o,!0,t.file_name):g.uploadImageToStage(o,!0,t.file_name,!0),e.next=17;break;case 16:g.uploadImageToStage(o,!0,t.file_name);case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g.addFacebookImage=function(){var e=Object(v.a)(b.a.mark((function e(t,a){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(g.showHideBackLoader(!0),g.displayTcWarn(),g.setState({uploadImageLoader:!0}),g.setState({selectedFacebookImageId:a}),!g.state.termConditions.is_enabled||g.state.termConditions.is_default_status){e.next=6;break}return e.abrupt("return");case 6:Object(se.b)(t,"image/png","",(function(e){var t=g.b64toBlob(e.split(",")[1],"image/png");URL.createObjectURL(t);g.props.dispatch(ce.hb(g.props.currentSideIndex,t,"png",1)).then(function(){var e=Object(v.a)(b.a.mark((function e(t){var a,o,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(1!==t.status){e.next=7;break}return a=t.data.url,r=a.split(".").pop(),e.next=4,g.createURLToFile(a,r);case 4:o=e.sent,g.selectedFile=[o],"svg"===r?g.uploadSvgImageToStage(o,!0,a):g.uploadImageToStage(o,!0,a);case 7:g.showHideBackLoader(!1);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){g.showHideBackLoader(!1),g.props.showNotification("danger",e)}))}));case 7:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),g.setFBUploadImageList=function(e){g.setState({facebookImageList:g.uploadFBImageList.slice(),faceBookError:!1}),g.props.dispatch(ce.e(g.state.facebookImageList))},g.getImagesFromFacebook=function(){window.FB.login((function(e){if(e.authResponse){g.openView("facebookImport");e.authResponse.userID;window.FB.api("/me?fields=albums{photos.limit(99999){images,name,picture}}&limit=99999",(function(t){if(e.error||!t.albums)return g.props.showNotification("warning",g.props.language.image.facebookError),void g.openView("");for(var a=0;a<t.albums.data.length;a++)if(t.albums.data[a].photos)for(var o=0;o<t.albums.data[a].photos.data.length;o++)g.uploadFBImageList.push(t.albums.data[a].photos.data[o].images[0].source);g.uploadFBImageList.length<=0?g.setState({facebookImageList:g.uploadFBImageList.slice(),faceBookError:!0,faceBookErrorMsg:"No data found"}):g.setFBUploadImageList(g.uploadFBImageList)}))}else g.props.showNotification("warning",g.props.language.image.facebookLoginError)}),{scope:"user_photos,public_profile"})},g.deleteCookie=function(e){document.cookie="fblo_".concat(e,"=;expires= ").concat((new Date).toUTCString(),"; domain=").concat(window.location.hostname)},g.loginFacebook=function(){g.getFBImageIdList()},g.cancelFacebookImport=function(){g.openView("")},g.validateStrokeVal=function(e){var t=0;e.target.validity.valid&&(t=parseInt(e.target.value.replace(/^0+/,"")),(t=isNaN(t)?0:t)>10&&(t=10)),g.setSelectedStroke(t)},g.validateImageFilter=function(e,t){if(e.target.value)if("blurValue"===t){var a=0;e.target.validity.valid&&(a=Number(e.target.value.replace(/^0+/,"")),(a=isNaN(a)?0:a)>1&&(a=1)),g.imageFilter(a,t)}else if("brightValue"===t||"contrastValue"===t){var o=0;e.target.validity.valid&&(o=Number(e.target.value.replace(/^0+/,"")),(o=isNaN(o)?0:o)<-1&&(o=-1),o>1&&(o=1)),g.imageFilter(o,t)}else{var r=0;e.target.validity.valid&&(r=Number(e.target.value.replace(/^0+/,"")),(r=isNaN(r)?0:r)<-5&&(r=-5),r>5&&(r=5)),g.imageFilter(r,t)}},g.getUrlParameter=function(e){return("Shopify"!==window.storeType?new URLSearchParams(window.parent.location.search):new URLSearchParams(window.location.search)).get(e)},g.deleteHistoryImage=function(e,t){var a=function(e){if(e){var t=e.toString().match(/.*\/(.+?)\./);if(t&&t.length>1)return t[1]}return""}(e),o=e.split(".").pop(),r=g.state.historyImageList;e=(e=a+"."+o).replace("thumb_",""),ne.a.deleteHistoryImage(e).then((function(e){e.data&&1===e.data.status?(r.splice(t,1),g.setState({historyImageList:r}),g.props.showNotification("success",g.props.language.image.imageDeleted)):g.props.showNotification("danger",g.props.language.image.deleteError)}))},g.state={selectedFile:null,activeView:"",imageResolution:{},filterInfo:{},isConvertImage:!1,isFilter:!1,isMask:!1,isBackground:!1,isColorOptions:!0,reduceSvgArr:[],selectedImgColor:[],chooseColorPicker:!1,isEnableGrayDiv:!0,isEnableBackgroundDiv:!0,isEnableFilterDiv:!0,isEnableMaskDiv:!0,optionIndexVal:"original",crop:{unit:"%",width:50,height:50},oneColor:"#FF0000",monochromeColor:"#277E8B",selectedImgColors:[],tempSliderVal:{brightValue:0,contrastValue:0,saturValue:0,hueValue:0,blurValue:0},sliderValue:{brightValue:0,contrastValue:0,saturValue:0,hueValue:0,blurValue:0},selectedMask:null,maskInfo:{},selectStrokeValue:1,termConditions:{is_enabled:!1,is_default_status:!1},isDisplayTcWarn:!1,updatedFile:null,isMaskSettingActive:null,strokeColor:"#000000",isStrokeColor:!1,uploadImageLoader:!1,removeBackgroundStatus:!0,popoverOpen:!1,selectedElm:null,svgStatus:!1,historyImageList:[],oneColorThumb:"",monochromeThumb:"",autoConvertImage:!1,isEmbroideryLoader:!1,oneColorEnable:!1,facebookImageList:[],faceBookError:!1,selectedFacebookImageId:"",faceBookErrorMsg:"",removeWhiteIndex:!1,selectedMoreColorVal:"Full Color",oneColorLoader:!1,monoChromeLoader:!1,enableMoreColorClick:!0},g.filterInfo={},g.openView=g.openView.bind(Object(C.a)(g)),g.loginFacebook=g.loginFacebook.bind(Object(C.a)(g)),g.loginGoogleDrive=g.loginGoogleDrive.bind(Object(C.a)(g)),g.loginDropBox=g.loginDropBox.bind(Object(C.a)(g)),g.handleGoogleDriveLoad=g.handleGoogleDriveLoad.bind(Object(C.a)(g)),g.PickeronChange=g.PickeronChange.bind(Object(C.a)(g)),g.dropBoxSuccess=g.dropBoxSuccess.bind(Object(C.a)(g)),g.cancelDropbox=g.cancelDropbox.bind(Object(C.a)(g)),g.maskEditStatus=!1,g.filterList=[{type:"normal",css:"none",filter:'<feGaussianBlur stdDeviation="0,0"/>'},{type:"sepia",css:"sepia(100%)",filter:'<feColorMatrix type="matrix" values="0.393 0.769 0.189 0 0 0.349 0.686 0.168 0 0 0.272 0.534 0.131 0 0 0 0 0 1 0"/>'},{type:"grayscale",css:"grayscale(100%)",filter:'<feColorMatrix type="saturate" values="0"/>'},{type:"sepia2",css:"sepia(50%)",filter:'<feColorMatrix type="matrix" values="0.30 0.30 0.30 0 0 0.25 0.25 0.25 0 0 0.20 0.20 0.20 0 0 0.00 0.00 0.00 1 0"/>'},{type:"invert",css:"invert(100%)",filter:'<feColorMatrix in="SourceGraphic" type="matrix" values="-1 0 0 0 1 0 -1 0 0 1 0 0 -1 0 1 0 0 0 1 0"/>'},{type:"green",css:"hue-rotate(90deg)",filter:'<feColorMatrix result="colormatrix" in="SourceGraphic" values="1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 -0.106383 0 -1.28 0.96 0"></feColorMatrix> <feComposite result="composite1" operator="in" in2="SourceGraphic" in="colormatrix"/>'},{type:"noise",css:"blur(1px)",filter:'<feComponentTransfer><feFuncR type="discrete" tableValues="0 .5 1 1"></feFuncR> <feFuncG type="discrete" tableValues="0 .5 1"> </feFuncR> <feFuncB type="discrete" tableValues="0"></feFuncR> </feComponentTransfer>'},{type:"pixelate",css:"blur(2px)",filter:'<feGaussianBlur stdDeviation="5" result="result3"></feGaussianBlur> <feColorMatrix values="1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 50 0 " result="result7"></feColorMatrix> <feComposite operator="in" in2="SourceGraphic" result="result9"></feComposite> <feComposite in2="result7" operator="arithmetic" in="result9" k1="0.5" k3="0.5" result="result1"></feComposite> <feBlend in2="result1" result="result5" mode="screen" in="SourceGraphic"></feBlend> <feBlend in2="result5" mode="darken" in="result5" result="result6"></feBlend> <feComposite in2="SourceGraphic" operator="in" result="result8"></feComposite>'},{type:"bright",css:"brightness(200%)",filter:'<feColorMatrix result="colormatrix" values="1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 -21.25 -71.54 -7.21 55.8511 0 "/>'}],g.maskStrokeList=["1px","2px","3px","4px","5px","6px","7px","8px","9px","10px"],g.is_image_magick_enabled=1,g.is_inkscape_enabled=1,g.checkLoginState=g.checkLoginState.bind(Object(C.a)(g)),g.fbImportClick=g.fbImportClick.bind(Object(C.a)(g)),g.getUserData=g.getUserData.bind(Object(C.a)(g)),g.statusChangeCallback=g.statusChangeCallback.bind(Object(C.a)(g)),g.fabricFilter=I.fabric.Image.filters,g.fabric=I.fabric,g.reduceColorListArr=[],g.isFilterApplied=0,g.appliedFilterInfo=null,g.filterString="",g.isMaskApplied=0,g.appliedMaskInfo=null,g.maskString="",g.originImageStatus=[],g.svgColorList=[],g.colorPickOk=g.colorPickOk.bind(Object(C.a)(g)),g.colorPickCancel=g.colorPickCancel.bind(Object(C.a)(g)),g.togglePopover=g.togglePopover.bind(Object(C.a)(g)),g.initCanvas=g.initCanvas.bind(Object(C.a)(g)),g.optionIndexVal="original",g.embAddons=g.props.licenceAddOns.includes("embroidery"),g.engraveAddons=g.props.licenceAddOns.includes("engrave"),g.isEmbroideryEnable=!!(g.props.selectedPrintProfileObj&&g.props.selectedPrintProfileObj.embroidery&&g.props.selectedPrintProfileObj.embroidery.is_embroidery_enabled&&g.embAddons),g.isEngraveEnable=!!(g.props.selectedPrintProfileObj&&g.props.selectedPrintProfileObj.engrave&&g.props.selectedPrintProfileObj.engrave.is_laser_engrave_enabled&&g.engraveAddons),g.prevCol="",g.isShowColorOption=!(g.props.selectedPrintProfileObj&&g.props.selectedPrintProfileObj.engrave&&g.props.selectedPrintProfileObj.engrave.is_laser_engrave_enabled&&g.props.selectedPrintProfileObj.engrave.is_hide_color_options&&g.engraveAddons),g.forceReduceColor=!1,g.fbImageIdList=[],g.uploadFBImageList=[],g.fbImageIndex=0,g.googleDriveScriptLoading=!1,g.dropBoxScriptLoading=!1,g.svgPreloader=!1,g.validateStrokeVal=g.validateStrokeVal.bind(Object(C.a)(g)),g.validateImageFilter=g.validateImageFilter.bind(Object(C.a)(g)),g.isTemplateEdit=!!g.getUrlParameter("etid"),window.isTemplate=g.getUrlParameter("temp"),g.filterStatus=!0,g.deleteHistoryImage=g.deleteHistoryImage.bind(Object(C.a)(g)),g}return Object(E.a)(a,[{key:"initializeFaceBook",value:function(){var e=this.props.globalSettings.facebook_import.app_id;window.fbAsyncInit=function(){window.FB.init({appId:"".concat(e),autoLogAppEvents:!0,xfbml:!0,version:"v8.0",status:!0}),window.FB.AppEvents.logPageView()},function(e,t,a){var o,r=e.getElementsByTagName(t)[0];e.getElementById(a)||((o=e.createElement(t)).id=a,o.src="//connect.facebook.net/en_US/sdk.js",r.parentNode.insertBefore(o,r))}(document,"script","facebook-jssdk")}},{key:"initializeGoogleDrive",value:function(){this.isGoogleReady()?this.handleGoogleDriveLoad():this.googleDriveScriptLoading||(this.googleDriveScriptLoading=!0,de.a.getScript("https://apis.google.com/js/client.js",this.handleGoogleDriveLoad))}},{key:"initializeDropbox",value:function(){var e=this.props.globalSettings.dropbox_import.dropboxApiKey,t=this.props.globalSettings.dropbox_import.dropboxScriptId;""===e&&(e="kybfwal6yd7wdvv"),""===t&&(t="dropboxjs"),this.isDropboxReady()||this.dropBoxScriptLoading||(this.dropBoxScriptLoading=!0,fe()("https://www.dropbox.com/static/api/2/dropins.js",{attrs:{id:t,"data-app-key":e}}))}},{key:"componentDidMount",value:function(){var e=this,t=Object(p.a)({},this.state.termConditions);t.is_enabled=!!this.props.globalSettings.terms_condition.is_enabled&&this.props.globalSettings.terms_condition.is_enabled,this.setState({termConditions:t},(function(){e.props.globalSettings.terms_condition.is_enabled&&(t.is_default_status=!!e.props.globalSettings.terms_condition.is_default_status&&e.props.globalSettings.terms_condition.is_default_status,t.description=e.props.globalSettings.terms_condition.message,e.setState({termConditions:t}))})),this.props.globalSettings.facebook_import.is_enabled&&this.initializeFaceBook(),this.props.globalSettings.google_drive_import.is_enabled&&this.initializeGoogleDrive(),this.props.globalSettings.dropbox_import.is_enabled&&this.initializeDropbox();var a=this.localStorageGetItem("browseId")?this.localStorageGetItem("browseId"):0;a&&ne.a.getHistoryImages(a).then((function(t){e.setState({historyImageList:t.data.data})})),ne.a.getMakDetails().then((function(t){e.setState({maskList:t.data.data})})).catch((function(t){e.setState({error:t})})),ie.a.name in R.a.canvas.extensions||R.a.addExtension(ie.a.name,this.extAddedCb,{$:de.a})}},{key:"elementSelected",value:function(){var e=Object(v.a)(b.a.mark((function e(t){var a,o,r,n,l,i,s,m,d,u,g,p;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=function(e){return null!=e.match(/\.(jpeg|jpg|png)$/)},c=null,this.setState({selectedElm:t,crop:{unit:"%",width:50,height:50}}),t){e.next=12;break}return a=R.a.canvas.getCurrentLayerElems(),o=!1,a&&a.forEach((function(e){"image"===e.getAttribute("type")&&(o=!0)})),o||"inline"!==document.getElementById("selectorGrip_resize_nwt").getAttribute("display")||(this.props.hideImageWarning(),document.getElementById("selectorGrip_resize_nwt").setAttribute("display","none")),this.openView(""),this.setState({selectStrokeValue:1,strokeColor:"#000000"}),e.abrupt("return");case 12:"none"===document.getElementById("selectorGrip_resize_nwt").getAttribute("display")?t.prefs.imageWarning=!1:t.prefs.imageWarning=!0;case 13:if(n=!1,l="",t.getElementsByTagName("image").length&&(n=r(t.getElementsByTagName("image")[0].getAttribute("xlink:href")),l=t.getElementsByTagName("image")[0].getAttribute("id")),t.prefs&&t.prefs.lock&&(t.prefs.lock.mask||t.prefs.lock.filter)&&!this.props.canvasReducer.isTemplateEdit&&this.openView(""),t.prefs.oneColorThumb?this.setState({oneColorThumb:t.prefs.oneColorThumb}):t.prefs.oneColorFill&&this.props.selectedPrintProfileObj.image_data&&this.props.selectedPrintProfileObj.image_data.show_color_option.one_color&&(this.setState({oneColorLoader:!0}),R.a.generateOneColorThumb(t.prefs.originalImg,t.prefs.oneColorFill,this.updateThumbView)),t.prefs.monochromeThumb?this.setState({monochromeThumb:t.prefs.monochromeThumb}):t.prefs.monochromeFill&&this.props.selectedPrintProfileObj.image_data&&this.props.selectedPrintProfileObj.image_data.show_color_option.monochrome&&(this.setState({monoChromeLoader:!0}),R.a.generateMonochromeThumb(t.prefs.originalImg,t.prefs.monochromeFill,this.updateMonochromeThumb)),!t.prefs||"image"!==t.prefs.type){e.next=66;break}if((t.prefs.isTemplateImg&&"svg"!==t.prefs.imgType||n)&&(i=t.getElementsByTagName("image")?t.getElementsByTagName("image")[0].getAttribute("xlink:href"):"")&&(t.prefs.intermediateFile=t.prefs.updatedFile=i,t.prefs.isRemoveOuterWhite||(t.prefs.originalImg=i),this.isTemplateEdit&&t&&t.prefs?(t.prefs.oneColorFill&&R.a.generateOneColorThumb(i,t.prefs.oneColorFill,this.updateThumbView),t.prefs.monochromeFill&&R.a.generateMonochromeThumb(i,t.prefs.monochromeFill,this.updateMonochromeThumb)):(this.props.selectedPrintProfileObj.image_data&&this.props.selectedPrintProfileObj.image_data.show_color_option.one_color&&R.a.generateOneColorThumb(i,this.state.oneColor,this.updateThumbView),this.props.selectedPrintProfileObj.image_data&&this.props.selectedPrintProfileObj.image_data.show_color_option.monochrome&&R.a.generateMonochromeThumb(i,this.state.oneColor,this.updateMonochromeThumb),!this.props.selectedPrintProfileObj.image_data||!this.props.selectedPrintProfileObj.image_data.is_more_color_options||this.forceReduceColor||this.isEmbroideryEnable||Ve[l]||this.handleSwitchChange(!0))),s=!1,t.prefs.removeWhiteIndex&&(s=!0),this.setState({selectedMoreColorVal:t.prefs.selectedMoreColorVal?t.prefs.selectedMoreColorVal:"Full Color"}),!t.prefs.imgType||"svg"!==t.prefs.imgType||"upload"!==t.prefs.imgSelectionType){e.next=31;break}this.svgColorList=this.extractColorFromObj(t),t.prefs.colors=this.getColorArray(this.svgColorList),this.setState({svgColorList:this.svgColorList,oneColorEnable:!1,removeWhiteIndex:s}),this.selectedIndex="",this.svgColorList&&this.svgColorList.length>0&&this.isShowColorOption&&(t&&t.prefs.lock&&!t.prefs.lock.colorEdit||this.props.canvasReducer.isTemplateEdit)?this.openView("chooseColor"):this.openView(""),e.next=66;break;case 31:if(!t.prefs.imgType||"svg"!==t.prefs.imgType||"convert"!==t.prefs.imgSelectionType){e.next=42;break}m=t.prefs.intermediateFile?t.prefs.intermediateFile:t.prefs.originalImg,this.openView("edit"),d=t.childNodes[0].getAttribute("id"),this.selectedColorIndex=-1,this.updateIntermediateFile(m),this.svgColorList=this.extractColorFromObj(t),t.prefs.colors=this.getColorArray(this.svgColorList),d&&this.reduceColorListArr[d]?(this.setState({selectedFile:m,updatedFile:m,isEnableGrayDiv:!1,isEnableBackgroundDiv:!1,oneColorEnable:!1,isEnableFilterDiv:!1,isEnableMaskDiv:!1,isColorOptions:!0,reduceSvgArr:this.reduceColorListArr[d].svg,selectedImgColor:t.prefs.selectedSvgColors,optionIndexVal:"",svgStatus:!0,svgColorList:this.svgColorList,removeWhiteIndex:s}),this.selectedReduceIndex=this.reduceColorListArr[d].index):(this.setState({selectedFile:m,updatedFile:m,isEnableGrayDiv:!1,isEnableBackgroundDiv:!1,oneColorEnable:!1,isEnableFilterDiv:!1,isEnableMaskDiv:!1,isColorOptions:!0,reduceSvgArr:Ve&&Object.keys(Ve).length&&Ve[d]?Ve[d].svg:[],selectedImgColor:t.prefs.selectedSvgColors?t.prefs.selectedSvgColors:[],optionIndexVal:"",svgStatus:!0,svgColorList:this.svgColorList,removeWhiteIndex:s}),this.selectedReduceIndex=Ve&&Object.keys(Ve).length&&Ve[d]?Ve[d].index:-1),e.next=66;break;case 42:if(!t.childNodes.length){e.next=66;break}return u=t.childNodes[0].getAttribute("id"),g=[],(g=this.reduceColorListArr[u]&&this.reduceColorListArr[u].svg.length?this.reduceColorListArr[u].svg:Ve[u]&&Ve[u].svg.length?Ve[u].svg:[]).length||(t.childNodes[0].getElementsByTagName("image").length?(p=t.childNodes[0].getElementsByTagName("image")[0].getAttribute("id"),g=Ve[p]&&Ve[p].svg.length?Ve[p].svg:[]):R.a.resizeImage(t.prefs.originalImg,500,!1,"",this.reduceImageColor)),this.assignDefaultPrefs(t),this.selectedReduceIndex=-1,e.next=50,R.a.updateImageStatus(t);case 50:if(t.prefs.updateStatus=e.sent,this.setState({removeBackgroundStatus:t.prefs.updateStatus,isColorOptions:!0,svgStatus:!1,autoConvertImage:!!t.prefs.autoConvertStatus&&t.prefs.autoConvertStatus,reduceSvgArr:g,removeWhiteIndex:s}),!t.prefs.optionIndexVal||t.prefs.isRemoveAllWhite||t.prefs.isRemoveOuterWhite||t.prefs.largeSvg){e.next=66;break}e.t0=t.prefs.optionIndexVal.toString().toLowerCase(),e.next="onecolor"===e.t0?56:"monochrome"===e.t0?58:"grayscale"===e.t0?60:"blackwhite"===e.t0?62:"original"===e.t0?64:66;break;case 56:return t.prefs.colors=this.getColorArray([{fill:t.prefs.oneColorFill}]),e.abrupt("break",66);case 58:return t.prefs.colors=this.getColorArray([{fill:t.prefs.monochromeFill}]),e.abrupt("break",66);case 60:case 62:return t.prefs.colors=["#ffffff","#000000"],e.abrupt("break",66);case 64:return t.prefs.colors=["Full"],e.abrupt("break",66);case 66:t.prefs&&t.prefs.largeSvg&&this.openView("");case 67:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"openView",value:function(e){this.setState({activeView:e,crop:{unit:"%",width:50,height:50,hideColorPalettes:!1}}),""===e?(this.props.setHeaderDispay(!0),this.props.handleSplitScreen("full")):(this.props.setHeaderDispay(!1),"settings"===e?this.setState({tempSliderValue:this.state.sliderValue}):"anyColor"===e&&this.initCanvas())}},{key:"getOrientation",value:function(e){return new Promise((function(t){var a=new FileReader;a.onloadend=function(){var e=new DataView(a.result),o=0,r=1;(a.result.length<2||65496!=e.getUint16(o))&&t(1),o+=2;for(var n=e.byteLength;o<n-2;){var l=e.getUint16(o);switch(o+=2,l){case 65505:n=e.getUint16(o)-o,o+=2;break;case 274:r=e.getUint16(o+6,!1),n=0}}t(r)},a.readAsArrayBuffer(e)}))}},{key:"processImage",value:function(e){var t=this;return new Promise((function(a){var o=new FileReader;o.onloadend=function(){var e=new DataView(o.result),r=0,n=0,l=[],i=0;if(65496==e.getUint16(r)){r+=2;var s=e.getUint16(r);for(r+=2;r<e.byteLength;){if(console.log(r,"0x"+s.toString(16),n),65505==s)l[i]={recess:n,offset:r-2},n=r+e.getUint16(r),i++;else if(65498==s)break;r+=e.getUint16(r);s=e.getUint16(r);r+=2}if(l.length>0){var c=[];l.forEach((function(e){c.push(o.result.slice(e.recess,e.offset))}),t),c.push(o.result.slice(n));var m=new Blob(c,{type:"image/jpeg"}),d=URL.createObjectURL(m);a({blob:m,blobUrl:d})}}},o.readAsArrayBuffer(e)}))}},{key:"createURLToFile",value:function(){var e=Object(v.a)(b.a.mark((function e(t,a){var o,r,n,l;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="svg"===a?a="image/svg+xml":"image/"+a,e.next=3,fetch(t);case 3:return o=e.sent,e.next=6,o.blob();case 6:return r=e.sent,n={type:a},e.abrupt("return",new Promise((function(e){l=t.substring(t.lastIndexOf("/")+1),e(new File([r],l,n))})));case 9:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"b64toBlob",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:512,o=window.atob(e),r=[],n=0;n<o.length;n+=a){for(var l=o.slice(n,n+a),i=new Array(l.length),s=0;s<l.length;s++)i[s]=l.charCodeAt(s);var c=new Uint8Array(i);r.push(c)}var m=new Blob(r,{type:t});return m}},{key:"componentDidUpdate",value:function(){var e=this;this.state.isColorOptions&&this.state.reduceSvgArr&&this.state.reduceSvgArr.forEach((function(e){var t=(new DOMParser).parseFromString(e.svg,"image/svg+xml"),a=document.getElementById("image_"+e.color);a&&(a.hasChildNodes()&&a.childNodes.forEach((function(e){return a.removeChild(e)})),a.appendChild(t.getElementsByTagName("svg")[0]))})),"filter"===this.state.activeView&&this.filterList.forEach((function(t){e.renderFilterView(t.type,e.state.updatedFile,t.filter)}))}},{key:"extractColorFromObj",value:function(e){var t,a=e.querySelectorAll("path,circle,rect,ellipse,polygon"),o=(e.innerHTML,[]),r=[];if(this.isEmbroideryEnable){var n=e.getElementsByTagName("defs")[0];if(n)for(var l=n.querySelectorAll("pattern"),i=0;i<l.length;i++)l[i].getElementsByTagName("polygon")[0]&&l[i].getElementsByTagName("polygon")[0].getAttribute("fill")&&!l[i].getElementsByTagName("polygon")[0].getAttribute("fill").includes("url")&&o.push(l[i].getElementsByTagName("polygon")[0].getAttribute("fill"))}else for(var s=0;s<a.length;s++)a[s].getAttribute("fill")&&(o.push(a[s].getAttribute("fill")),a[s].setAttribute("oldFill",a[s].getAttribute("fill")));(t=o).splice.apply(t,[0,t.length].concat(Object(f.a)(new Set(t))));for(var c=0,m=(o=t).length;c<m;c++)r.push({id:c,fill:o[c]});return r}},{key:"getUserData",value:function(){window.FB.api("/me?fields=id,name,name_format,email,birthday,gender,hometown,picture",(function(e){}))}},{key:"statusChangeCallback",value:function(e){"connected"===e.status?this.getUserData():e.status}},{key:"checkLoginState",value:function(){window.FB.getLoginStatus(function(e){this.statusChangeCallback(e)}.bind(this))}},{key:"fbImportClick",value:function(){window.FB.login(this.checkLoginState())}},{key:"renderSelectedMask",value:function(e,t){if(e){var a=(new DOMParser).parseFromString(e,"image/svg+xml"),o=document.getElementById(t);o&&(o.innerHTML="",o.appendChild(a.getElementsByTagName("svg")[0]))}}},{key:"setImageSettings",value:function(){var e;if(xe=[],Ce=[],this.props.selectedPrintProfileObj&&this.props.selectedPrintProfileObj.image_data&&this.props.selectedPrintProfileObj.image_data.allowed_image_format.length)for(var t=0;t<this.props.selectedPrintProfileObj.image_data.allowed_image_format.length;t++)0===Number(this.props.selectedPrintProfileObj.image_data.allowed_image_format[t].is_disabled)&&1===Number(this.props.selectedPrintProfileObj.image_data.allowed_image_format[t].is_selected)&&(Ce.push("."+this.props.selectedPrintProfileObj.image_data.allowed_image_format[t].name.toLowerCase()),xe.push(this.props.selectedPrintProfileObj.image_data.allowed_image_format[t]));else Ce=[".jpg",".png",".jpeg"],xe=[(e={id:1,name:"jpg",is_selected:2},Object(g.a)(e,"id",1),Object(g.a)(e,"name","png"),Object(g.a)(e,"is_selected",1),Object(g.a)(e,"id",3),Object(g.a)(e,"name","jpeg"),Object(g.a)(e,"is_selected",1),e)]}},{key:"addImageToEditView",value:function(e,t,a){if(null!==e){var o=new XMLHttpRequest;o.open("GET",e),o.onload=function(){o.status>=200&&o.status},o.send()}}},{key:"colorPickOk",value:function(){this.setState({isStrokeColor:!1})}},{key:"colorPickCancel",value:function(){var e=R.a.canvas.getSelectedElems()[0].getElementsByTagName("path")[1];void 0!==e&&e.setAttribute("stroke","#000000"),this.setState({isStrokeColor:!1,strokeColor:"#000000"})}},{key:"togglePopover",value:function(){this.setState({popoverOpen:!this.state.popoverOpen})}},{key:"getFBImageIdList",value:function(){var e=this;window.FB.getLoginStatus((function(t){"connected"==t.status?e.state.facebookImageList.length>0?e.openView("facebookImport"):e.props.facebookImageList&&e.props.facebookImageList.length?(e.setState({facebookImageList:e.props.facebookImageList}),e.openView("facebookImport")):e.getImagesFromFacebook():e.state.facebookImageList.length<=0&&("unknown"==t.status&&e.deleteCookie(e.props.globalSettings.facebook_import.app_id),e.getImagesFromFacebook())}))}},{key:"handleGoogleDriveLoad",value:function(){window.gapi.load("auth"),window.gapi.load("picker")}},{key:"isGoogleReady",value:function(){return!!window.gapi}},{key:"isGoogleAuthReady",value:function(){return!!window.gapi.auth}},{key:"isGooglePickerReady",value:function(){return!!window.google.picker}},{key:"doAuth",value:function(e){var t=this.props.globalSettings.google_drive_import.googleDriveClientId;""===t&&(t="206339496672-eie1j7vvr0plioslt41l2qsddmdjloqj.apps.googleusercontent.com"),window.gapi.auth.authorize({client_id:t,scope:be,immediate:!1},e)}},{key:"loginGoogleDrive",value:function(){var e=this;if(!this.isGoogleReady()||!this.isGoogleAuthReady()||!this.isGooglePickerReady())return this.props.showNotification("info","".concat(this.props.language.image.googleDriveLoading)),null;if(this.state.termConditions.is_enabled&&!this.state.termConditions.is_default_status)return this.props.showNotification("warning",this.props.language.image.tc),null;var t=window.gapi.auth.getToken(),a=t&&t.access_token;a?this.createPicker(a):this.doAuth((function(t){t.access_token?e.createPicker(t.access_token):e.props.showNotification("warning","".concat(e.props.language.image.userAuthFailed))}))}},{key:"createPicker",value:function(e){for(var t=window.google.picker.ViewId.DOCS,a=new window.google.picker.View(t),o=[],r=0;r<xe.length;r++)"png"===xe[r].name||"jpeg"===xe[r].name||"jpg"===xe[r].name?o.push("image/".concat(xe[r].name)):"svg"===xe[r].name?o.push("image/".concat(xe[r].name,"+xml")):"pdf"===xe[r].name?o.push("application/".concat(xe[r].name)):("gif"===xe[r].name||"bmp"===xe[r].name)&&o.push("image/".concat(xe[r].name));if(o&&a.setMimeTypes(o.join(",")),!a)throw new Error("Can't find view by viewId");var n=this.props.globalSettings.google_drive_import.googleDriveAppId,l=this.props.globalSettings.google_drive_import.googleDriveDeveloperKey;""===n&&(n="imprintnext-288909"),""===l&&(l="AIzaSyChPXI8ByCl68kcpy0zwjrfjEc_8mtwH_w");var i=(new window.google.picker.PickerBuilder).addView(a).setAppId(n).setOAuthToken(e).setDeveloperKey(l).setCallback(this.PickeronChange),s=window.location.protocol+"//"+window.location.host;i.setOrigin(s),i.enableFeature(window.google.picker.Feature.NAV_HIDDEN),i.enableFeature(window.google.picker.Feature.MULTISELECT_ENABLED),i.build().setVisible(!0)}},{key:"PickeronChange",value:function(e){if("loaded"===e.action);else if("cancel"===e.action);else if("picked"===e.action){var t=e.docs[0].id,a=e.docs[0].mimeType,o=window.gapi.auth.getToken().access_token,r="https://www.googleapis.com/drive/v3/files/"+t+"?alt=media";this.addToStageFromPicker(r,o,"fromGoogleDrive",a)}}},{key:"isDropboxReady",value:function(){return!!window.Dropbox}},{key:"loginDropBox",value:function(){var e=xe.map((function(e){return".".concat(e.name)}));if(!this.isDropboxReady())return this.props.showNotification("info","".concat(this.props.language.image.dropboxLoading)),null;window.Dropbox.choose({multiselect:!1,linkType:"direct",success:this.dropBoxSuccess,cancel:this.cancelDropbox,extensions:e})}},{key:"dropBoxSuccess",value:function(e){var t=e[0].id,a=e[0].link;this.addToStageFromPicker(a,t,"fromDropbox")}},{key:"addToStageFromPicker",value:function(e,t,a,o){var r=new XMLHttpRequest;r.open("GET",e),r.setRequestHeader("Authorization","Bearer "+t),r.responseType="blob";var n=this,l="";l="fromGoogleDrive"===a?"application/pdf"===o?"pdf":"image/svg+xml"===o?"svg":"image/gif"===o?"gif":"image/bmp"===o?"bmp":"png":e.split(".").pop(),n.showHideBackLoader(!0),r.addEventListener("load",(function(e){var t=this,a=this.response;n.props.dispatch(ce.hb(n.props.currentSideIndex,a,l,1)).then(function(){var e=Object(v.a)(b.a.mark((function e(t){var a,o,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(1!==t.status){e.next=7;break}return a=t.data.url,r=a.split(".").pop(),e.next=4,n.createURLToFile(a,r);case 4:o=e.sent,n.selectedFile=[o],"svg"===r?n.uploadSvgImageToStage(o,!0):n.uploadImageToStage(o,!0);case 7:n.showHideBackLoader(!1);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){n.showHideBackLoader(!1),t.props.showNotification("danger",n.props.language.notification.error)}))})),r.send()}},{key:"cancelDropbox",value:function(){}},{key:"renderSwitch",value:function(e){if(this.props.selectedPrintProfileObj)switch(e){case"edit":return y.a.createElement(he.a,{key:"edit"},y.a.createElement(q,{key:"ImageEditView",openView:this.openView,selectedFile:this.state.selectedFile,onImgLoad:this.onImgLoad,isConvertImage:this.state.isConvertImage,handleSwitchChange:this.handleSwitchChange,isBackground:this.state.isBackground,convertImage:this.convertImage,isColorOptions:this.state.isColorOptions,reduceSvgArr:this.state.reduceSvgArr,addSelectedReduceImage:this.addSelectedReduceImage,selectedImgColor:this.state.selectedImgColor,chooseColorPicker:this.state.chooseColorPicker,onColorSelect:this.onColorSelect,onColorHover:this.onColorHover,onChangeImageColor:this.onChangeImageColor,selectedReduceIndex:this.selectedReduceIndex,selectedColorIndex:this.selectedColorIndex,isEnableGrayDiv:this.state.isEnableGrayDiv,isEnableBackgroundDiv:this.state.isEnableBackgroundDiv,isEnableFilterDiv:this.state.isEnableFilterDiv,isEnableMaskDiv:this.state.isEnableMaskDiv,optionIndexVal:this.state.optionIndexVal,oneColor:this.state.oneColor,monochromeColor:this.state.monochromeColor,onChangeSingleColor:this.onChangeSingleColor,onChangeMonochromeColor:this.onChangeMonochromeColor,revertToOriginal:this.revertToOriginal,filterData:Object.keys(this.state.filterInfo).length?this.state.filterInfo.filterData:{},selectedMask:this.state.selectedMask,renderSelectedMask:this.renderSelectedMask,removeSelectedMask:this.removeSelectedMask,removeSelectedFilter:this.removeSelectedFilter,activeView:this.state.activeView,openFilterView:this.openFilterView,openMaskView:this.openMaskView,imageSettings:this.props.selectedPrintProfileObj.image_data,intermediateFile:o,updatedFile:this.state.updatedFile,language:this.props.language,removeBackgroundStatus:this.state.removeBackgroundStatus,isMobileView:this.props.isMobileView,selectedElm:this.state.selectedElm,svgStatus:this.state.svgStatus,globalSettings:this.props.globalSettings,oneColorThumb:this.state.oneColorThumb,monochromeThumb:this.state.monochromeThumb,autoConvertStatus:this.state.autoConvertImage,isShowColorOption:!(this.props.selectedPrintProfileObj&&this.props.selectedPrintProfileObj.engrave&&this.props.selectedPrintProfileObj.engrave.is_laser_engrave_enabled&&this.props.selectedPrintProfileObj.engrave.is_hide_color_options&&this.engraveAddons),isEmbroideryLoader:this.state.isEmbroideryLoader,applyFullColor:this.applyFullColor,removeWhiteIndex:this.state.removeWhiteIndex,svgPreloader:this.svgPreloader,isTemplateEdit:this.props.canvasReducer.isTemplateEdit,selectedMoreColorVal:this.state.selectedMoreColorVal,oneColorLoader:this.state.oneColorLoader,monoChromeLoader:this.state.monoChromeLoader,enableMoreColorClick:this.state.enableMoreColorClick}));case"crop":return y.a.createElement(he.a,{key:"crop"},y.a.createElement(Z,{key:"CropView",openView:this.openView,updatedFile:this.state.updatedFile,selectedFile:this.state.updatedFile,crop:this.state.crop,changeCropState:this.changeCropState,onCompleteCrop:this.onCompleteCrop,onImageLoadEndState:this.onImageLoadEndState,imageSettings:this.props.selectedPrintProfileObj.image_data,activeView:this.state.activeView,language:this.props.language}));case"settings":return this.resetImagePeview(),y.a.createElement(he.a,{key:"settings"},y.a.createElement(te,{key:"SettingsView",openView:this.openView,updatedFile:this.state.updatedFile,imageFilter:this.imageFilter,sliderValue:this.state.tempSliderValue,onCompleteFilter:this.onCompleteFilter,onImageLoadEndState:this.onImageLoadEndState,imageSettings:this.props.selectedPrintProfileObj.image_data,activeView:this.state.activeView,language:this.props.language,isMobileView:this.props.isMobileView,validateImageFilter:this.validateImageFilter}));case"filter":return y.a.createElement(he.a,{key:"filter"},y.a.createElement($,{key:"FilterView",openView:this.openView,filterList:this.filterList,selectedFile:this.state.updatedFile,addFilterEffect:this.addFilterEffect,filterInfo:this.state.filterInfo,applyFilter:this.applyFilter,cancelFilter:this.cancelFilter,imageSettings:this.props.selectedPrintProfileObj.image_data,activeView:this.state.activeView,openMaskView:this.openMaskView,language:this.props.language,updatedFile:this.state.updatedFile,renderFilterView:this.renderFilterView,selectedElm:this.state.selectedElm,isTemplateEdit:this.props.canvasReducer.isTemplateEdit}));case"mask":return y.a.createElement(he.a,{key:"mask"},y.a.createElement(ee,{key:"MaskView",openView:this.openView,selectedFile:this.state.updatedFile,maskList:this.state.maskList,addMakEffect:this.addMakEffect,renderMaskView:this.renderMaskView,activeView:this.state.activeView,applyMask:this.applyMask,cancelMask:this.cancelMask,maskInfo:this.state.maskInfo,onMaskZoomIn:this.onMaskZoomIn,onMaskZoomOut:this.onMaskZoomOut,positionMaskImg:this.positionMaskImg,maskStrokeList:this.maskStrokeList,selectStrokeValue:this.state.selectStrokeValue,setSelectedStroke:this.setSelectedStroke,onColorHover:this.onColorHover,imageSettings:this.props.selectedPrintProfileObj.image_data,onMaskColorSelect:this.onMaskColorSelect,maskSettings:this.maskSettings,isMaskSettingActive:this.state.isMaskSettingActive,openFilterView:this.openFilterView,strokeColor:this.state.strokeColor,colorSelected:this.colorSelected,isStrokeColor:this.state.isStrokeColor,language:this.props.language,updatedFile:this.state.updatedFile,isMobileView:this.props.isMobileView,colorPickOk:this.colorPickOk,colorPickCancel:this.colorPickCancel,isShowColorOption:!(this.props.selectedPrintProfileObj&&this.props.selectedPrintProfileObj.engrave&&this.props.selectedPrintProfileObj.engrave.is_laser_engrave_enabled&&this.props.selectedPrintProfileObj.engrave.is_hide_color_options&&this.engraveAddons),selectedElm:this.state.selectedElm,validateStrokeVal:this.validateStrokeVal,isTemplateEdit:this.props.canvasReducer.isTemplateEdit}));case"chooseColor":return y.a.createElement(he.a,{key:"chooseColor"},y.a.createElement(re,{key:"colors",openView:this.openView,colorList:this.state.svgColorList,selectedIndex:this.selectedIndex,onChangeImageColor:this.onChangeImageColor,onColorSelect:this.onColorSelect,onColorHover:this.onColorHover,imageSettings:this.props.selectedPrintProfileObj&&this.props.selectedPrintProfileObj.image_data,activeView:this.state.activeView,language:this.props.language,closeColorView:this.closeColorView,oneColorEnable:this.state.oneColorEnable,isEmbroideryEnable:!!(this.props.selectedPrintProfileObj&&this.props.selectedPrintProfileObj.embroidery&&this.props.selectedPrintProfileObj.embroidery.is_embroidery_enabled&&this.embAddons),hideColorPalettes:this.state.hideColorPalettes,selectedColor:this.prevCol}));case"anyColor":return y.a.createElement(he.a,{key:"anyColor"},y.a.createElement(ae,{key:"removeColor",openView:this.openView,activeView:this.state.activeView,applyRemoveColor:this.applyRemoveColor,language:this.props.language,onImgLoad:this.onImgLoad,updatedFile:this.state.updatedFile,resetRemoveColor:this.resetRemoveColor,tooltipMouseDown:this.tooltipMouseDown,tooltipMouseMove:this.tooltipMouseMove}));case"facebookImport":return y.a.createElement(he.a,{key:"facebookImport"},y.a.createElement(ge,{key:"facebookImport",openView:this.openView,selectedFile:this.state.updatedFile,language:this.props.language,updatedFile:this.state.updatedFile,selectedElm:this.state.selectedElm,facebookImageList:this.state.facebookImageList,cancelFacebookImport:this.cancelFacebookImport,faceBookError:this.state.faceBookError,selectedFacebookImageId:this.state.selectedFacebookImageId,addFacebookImage:this.addFacebookImage,faceBookErrorMsg:this.state.faceBookErrorMsg}));default:return this.setImageSettings(),y.a.createElement(he.a,{key:"view"},y.a.createElement(D,{key:"ImageView",openView:this.openView,language:this.props.language,onFilesChange:this.onFilesChange,onFilesError:this.onFilesError,fbImportClick:this.fbImportClick,imageSettings:this.props.selectedPrintProfileObj.image_data,allowedImageFormat:xe,globalSettings:this.props.globalSettings,isDisplayTcWarn:this.state.isDisplayTcWarn,onChangeTermCondition:this.onChangeTermCondition,displayTcWarn:this.displayTcWarn,termConditions:this.state.termConditions,mimeType:Ce,selectedFile:this.selectedFile,uploadImageLoader:this.state.uploadImageLoader,isMobileView:this.props.isMobileView,togglePopover:this.togglePopover,popoverOpen:this.state.popoverOpen,addHistoryImage:this.addHistoryImage,historyImageList:this.state.historyImageList,loginFacebook:this.loginFacebook,loginGoogleDrive:this.loginGoogleDrive,loginDropBox:this.loginDropBox,deleteHistoryImage:this.deleteHistoryImage}))}}},{key:"mobileTopMenuBar",value:function(){var e=this;if(""!==this.state.activeView&&"chooseColor"!==this.state.activeView)return y.a.createElement("div",{className:"nav nav-tabs-custom d-flex d-sm-flex d-md-flex d-lg-none d-xl-none",key:"mobile-top-bar"},y.a.createElement("div",{className:"nav-item"+("edit"===this.state.activeView?" active":""),onClick:function(){return e.openView("edit")}},y.a.createElement("div",{className:"nav-item-icon"},y.a.createElement("i",{className:"nf nf-adjust"})),y.a.createElement("div",{className:"nav-item-label"},y.a.createElement("div",{className:"label-title"},"Edit"))),y.a.createElement("div",{className:"nav-item"+("settings"===this.state.activeView?" active":""),onClick:function(){return e.openView("settings")}},y.a.createElement("div",{className:"nav-item-icon"},y.a.createElement("i",{className:"nf nf-transparency"})),y.a.createElement("div",{className:"nav-item-label"},y.a.createElement("div",{className:"label-title"},"Settings"))),y.a.createElement("div",{className:"nav-item"+("crop"===this.state.activeView?" active":""),onClick:function(){return e.openView("crop")}},y.a.createElement("div",{className:"nav-item-icon"},y.a.createElement("i",{className:"nf nf-crop"})),y.a.createElement("div",{className:"nav-item-label"},y.a.createElement("div",{className:"label-title"},"Crop"))),y.a.createElement("div",{className:"nav-item",onClick:function(){return e.revertToOriginal()}},y.a.createElement("div",{className:"nav-item-icon"},y.a.createElement("i",{className:"nf nf-reset"})),y.a.createElement("div",{className:"nav-item-label"},y.a.createElement("div",{className:"label-title"},"Reset"))))}},{key:"render",value:function(){return[this.mobileTopMenuBar(),this.renderSwitch(this.state.activeView)]}}]),a}(y.a.Component),Le=Object(N.b)((function(e){return{currentSideIndex:e.productCanvasReducer.active_product_side,language:e.languageReducer.translation_data.filter((function(t){return t.langCode===e.languageReducer.default_lang}))[0],selectedPrintProfileObj:e.printProfileReducer.print_profile_data.filter((function(t){return t.id===e.printProfileReducer.selected_print_profile}))[0],globalSettings:e.globalSettingReducer.global_settings_data.image_setting,imageDetails:e.ImageReducer.items,globalSettingsData:e.globalSettingReducer.global_settings_data,productDetails:e.productCanvasReducer.product_details,licenceAddOns:e.productCanvasReducer.licenceAddOns,selectedColors:e.productCanvasReducer.color,facebookImageList:e.ImageReducer.facebookImageList,layerData:e.productCanvasReducer.layer_data,canvasReducer:e.productCanvasReducer}}))(Fe);a.d(t,"default",(function(){return Le}))}}]);