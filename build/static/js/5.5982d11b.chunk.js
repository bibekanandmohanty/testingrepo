(this["webpackJsonpinkxe10-designer"]=this["webpackJsonpinkxe10-designer"]||[]).push([[5],{884:function(e,t,a){e.exports=a.p+"static/media/BebasNeue-Regular.47f711bd.ttf"},945:function(e,t,a){"use strict";a.r(t);var n=a(10),l=a(11),i=a(13),s=a(16),o=a(15),r=a(0),c=a.n(r),d=a(24),m=a(19),u=a.n(m),g=a(3),f=function(e){return c.a.createElement(r.Fragment,null,c.a.createElement("div",{id:"text_menu_preview"},c.a.createElement("svg",{id:"xe_text_svg",version:"1.1",width:"600",height:"600",viewBox:"0 0 600 600",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink"},c.a.createElement("g",{id:"xe_txtgrp"}))),e.language&&c.a.createElement("h3",{className:"boxTitle mb-2 d-none d-md-none d-lg-block d-xl-block"},e.language.team.title),e.language&&c.a.createElement("h3",{className:"sectitle mb-3 font-weight-normal d-none d-md-none d-lg-block d-xl-block"},e.language.team.message),e.language&&c.a.createElement("h3",{className:"boxTitle back-link border-bottom justify-content-between d-flex d-sm-flex d-md-flex d-lg-none d-xl-none m-0 pt-3 pl-3 pr-3 pb-3"},c.a.createElement("span",null,e.language.team.title),c.a.createElement("span",{className:"btn btn-link text-dark",onClick:e.onDoneButtonClicked},c.a.createElement("i",{className:"nf nf-tick"})," ",e.language.main.done)),c.a.createElement("div",{className:"listView nameNumber"},e.selectedPrintProfileData&&e.selectedPrintProfileData.name_number_data.params&&!e.loading&&e.language?c.a.createElement("div",{className:"listView-wrap nameNumber-list "},e.selectedPrintProfileData.name_number_data.params.map((function(t,a){return c.a.createElement(r.Fragment,{key:a},c.a.createElement("div",{className:"listView-elements",onClick:function(){return e.addElement(t)}},c.a.createElement("div",{className:"text-options"},c.a.createElement("div",{className:"text-options-left"},c.a.createElement("div",{className:"nav-link-label"},c.a.createElement("div",{className:"label-title"},e.language.team.add," ",t.name))),c.a.createElement("div",{className:"text-options-right"},c.a.createElement("div",{className:"nav-link-icon"},c.a.createElement("i",{className:"nf nf-plus"}))))))}))):c.a.createElement("div",{className:"listView-wrap nameNumber-list "},c.a.createElement("div",{className:"listView-elements"},c.a.createElement(u.a,{height:39})),c.a.createElement("div",{className:"listView-elements"},c.a.createElement(u.a,{height:39})),c.a.createElement("div",{className:"listView-elements"},c.a.createElement(u.a,{height:39})))),function(){var t=0,a=g.a.canvas.team;if(Object.keys(a).forEach((function(e){t+=a[e]})),e.language)return t?c.a.createElement(r.Fragment,null,c.a.createElement("div",{className:"d-none d-md-none d-lg-flex d-xl-flex"},c.a.createElement("div",{className:"btn btn-dark mr-1",onClick:e.clearAll},e.language.team.cancel),c.a.createElement("div",{className:"btn btn-success btn-block btn-next"+(e.isDisableOrderOption?" disabled":""),onClick:e.onTeamDataHandle},e.language.team.addPlayers)),c.a.createElement("div",{className:"d-flex d-sm-flex d-md-flex d-lg-none d-xl-none",style:{padding:"0 16px"}},c.a.createElement("div",{className:"btn btn-success btn-block btn-next",onClick:e.onTeamDataHandle},e.language.team.addPlayers))):c.a.createElement(r.Fragment,null,c.a.createElement("div",{className:"d-none d-md-none d-lg-flex d-xl-flex"},c.a.createElement("div",{className:"btn btn-dark mr-1",onClick:e.clearAll},e.language.team.cancel),c.a.createElement("div",{className:"btn btn-success btn-block btn-next disabled",onClick:e.onTeamDataHandle},e.language.team.addPlayers)),c.a.createElement("div",{className:"d-flex d-sm-flex d-md-flex d-lg-none d-xl-none",style:{padding:"0 16px"}},c.a.createElement("div",{className:"btn btn-success btn-block btn-next disabled",onClick:e.onTeamDataHandle},e.language.team.addPlayers)))}())},p=a(261),h=a(180),b=a(9),x=a.n(b),v=a(20),E="team",y=function(e){return Object(v.a)(x.a.mark((function t(){var a,n,l,i,s,o,r,c,d,m,u,g,f,p,h,b,v,E,y,S,k,N,w,F,_,T,P,D,C,O,I,B,A,H,W;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return H=function(e,t,a){try{v=A(e),h=e.split("\n"),b=m.getPath(e,0,t*v,t,{letterSpacing:E,lineSpacing:y}),(s=document.getElementById("namenumbergrp")).innerHTML="";var n=document.createElementNS(c,"rect");n.setAttributeNS(c,"x",0),n.setAttributeNS(c,"y",0),n.setAttributeNS(c,"id",i.getNextId()),n.setAttributeNS(c,"fill","none"),n.setAttributeNS(c,"opacity","0"),s.appendChild(n);for(var l="",r=0,d=0,p=0,x=0,S=0;S<h.length;S++)x=Math.max(h[S].length,x);for(var k=0;k<b.length;k++)k<=x&&(r+=b[k].width+E),d=Math.max(d,b[k].height),b[k].starty&&(p=Math.min(p,b[k].starty));g.clearRect(0,0,u.width,u.height);for(var N=document.createElementNS(c,"g"),F=0;F<b.length;F++)b[F].fill=w.fill,b[F].stroke=w.stroke,b[F].strokeWidth=w.strokeWidth,b[F].totalwidth=r,b[F].maxheight=d,b[F].starty=p,b[F].arttype=f,b[F].id=i.getNextId(),l+=b[F].toSVG();n.setAttributeNS(c,"width",d),n.setAttributeNS(c,"height",d),N.innerHTML=l.trim(),N.setAttribute("id",i.getNextId()),s.appendChild(N),p=Math.min(p,N.getBBox().y),n.setAttributeNS(c,"y",p),o=s.getBBox()}catch(_){console.warn("Error : ",_)}},A=function(e){return e.substr(0,e.selectionStart).split("\n").length},B=function(e,t){w.text=e,w.textLen=e.length,d.prefs=w,C=a(d).find("rect")[0].getBBox().height,_=i.getRotationAngle(),i.setRotationAngle(0,!0),T=d.getBBox(),d.innerHTML=document.getElementById("namenumbergrp").innerHTML,i.selectOnly([d]),O=a(d).find("rect")[0].getBBox().height,P=d.getBBox(),D=O/C,i.scaleText(1/D),i.moveSelectedElements(T.x-P.x-(P.width/D-T.width)/2,T.y-P.y-(P.height/D-T.height)/2),i.setRotationAngle(_,!0),i.selectOnly([d]),i.isUpdateNameNumber=!1},I=function(e){i.importSvgString(a("#team_jersey_menu").html()),i.alignSelectedElements("c","page"),i.alignSelectedElements("m","page");var t=i.getSelectedElems()[0];i.selectOnly([t]),i.scaleText(2),t.setAttribute("type","text"),t.setAttribute("subType",N),t.setAttribute("pointer-events","bounding-box"),t.prefs=w},a=e.$,n=e.editor,i=(l=n).canvas,500,72,10,r=1,c="http://www.w3.org/2000/svg",u=document.getElementById("cnv"),g=u.getContext("2d"),f="",p="",h=[],v=1,E=0,y=1,S="",k="",0,0,N="","",w={},F={delete:!1,move:!1,rotate:!1,resize:!1,filter:!1,mask:!1},D=1,l.generateNameNumberElm=function(e,t,a,n,l,c,u,g,h,b,x,v,F){var _,T;m=t,E=c/100,y=u/100+1,w={name:F,type:"text",subType:N=v,text:e,font:p=l,fill:S=g,fillName:S,stroke:k=h,strokeName:k,textLen:1,strokeWidth:b,noOfLines:x,lineSpace:u,letterSpace:c,effect:f=n,colors:[S,k],xeId:p.xe_id,objectTitle:"",lock:{colorEdit:!1,delete:!1,move:!1,rotate:!1,resize:!1,editFont:!1,edit:!1}},""===e&&(e=" "),H(e,72),0===o.width&&(o.width=312),o.width>500?(T="scale("+(r=480/o.width)+","+r+") ",_="translate("+(10/r-o.x)+","+200/r+") "):(r=1,T=" ",_="translate("+(500-o.width)/2+","+190/r+") "),s.setAttribute("transform",T+_),i.isUpdateNameNumber?(d=i.getSelectedElems()[0])&&d.prefs&&"team"===d.prefs.type&&" "!==e&&B(e):" "!==e&&I()},l.importBrowseImage=function(e,t,a,n,l){return new Promise((function(s){var o;if((w={}).type="team",w.subType="image",w.objectTitle="",w.isTemplateImg=!1,w.contentType=e.type,w.imgExtension=e.extension,w.oneColorFill="#FF0000",e.type.includes("svg")){var r=i.getSelectedElems()[0];r&&r.prefs&&"team"===r.prefs.type&&(w.originalImg=r.prefs.originalImg,w.optionIndexVal=r.prefs.optionIndexVal,w.filterInfo=r.prefs.filterInfo,w.reduceColorInfo=r.prefs.reduceColorInfo,w.isRemoveAllWhite=r.prefs.isRemoveAllWhite,w.isRemoveOuterWhite=r.prefs.isRemoveOuterWhite,w.editFilter=r.prefs.editFilter,w.maskInfo=r.prefs.maskInfo,w.lock=r.prefs.lock,w.updatedFile=r.prefs.updatedFile,w.intermediateFile=r.prefs.intermediateFile,w.updatedBlob=r.prefs.updatedBlob,i.deleteSelectedElements(!0)),(o=new FileReader).onloadend=function(e){i.importSvgString(e.target.result,!0);i.ungroupSelectedElement(),i.groupSelectedElements(),i.alignSelectedElements("m","page"),i.alignSelectedElements("c","page");var t=i.getSelectedElems()[0];t.setAttribute("type","image"),t.setAttribute("pointer-events","bounding-box"),w.imgType="svg",w.imgSelectionType="upload",t.prefs=w},o.readAsText(e)}else{var c,d,m=new Image,u=0,g=0,f=l,p=l;m.style.opacity=0,m.addEventListener("load",(function(){if(c=m.offsetWidth||m.naturalWidth||m.width,d=m.offsetHeight||m.naturalHeight||m.height,w.resStatus=n,n)switch(a){case"cm":u=(2.54*c/f).toFixed(3),g=(2.54*d/p).toFixed(1);break;case"mm":u=(25.4*c/f).toFixed(3),g=(25.4*d/p).toFixed(3);break;case"feet":u=(c/f*.0833333).toFixed(3),g=(d/p*.0833333).toFixed(3);break;default:u=(c/f).toFixed(1),g=(d/p).toFixed(1)}var e=i.aWidth,l=i.aHeight,s=0,o=0;i.getBounds().width&&(s=.9*i.getBounds().width),i.getBounds().height&&(o=.9*i.getBounds().height),e/l>s/o&&(e=l,l=i.aWidth);var r=s/e,h=o/l;w.perInchWPx=r,w.perInchHPx=h,w.maxScaleWt=u,w.maxScaleHt=g,W(c,d,t,w,s,o)})),m.src=t}setTimeout((function(){s()}),100)}))},l.importImg=function(e,t,a){var n=e;w={name:t,type:"team",subType:"image",fileType:a};var l=100,s=100,o=new Image;o.style.opacity=0,o.crossOrigin="Anonymous",o.addEventListener("load",(function(){l=o.offsetWidth||o.naturalWidth||o.width,s=o.offsetHeight||o.naturalHeight||o.height,function(e,t){var a=i.addSVGElementFromJson({element:"image",attr:{x:0,y:0,width:e,height:t,id:i.getNextId(),style:"pointer-events:bounding-box"}}),l=i.addSVGElementFromJson({element:"g",attr:{id:i.getNextId(),type:"team",subType:"image"}});l.appendChild(a),i.setHref(a,n),i.selectOnly([l]),i.scaleElem(i.getSelectedElems()[0]),i.alignSelectedElements("m","page"),i.alignSelectedElements("c","page"),i.getSelectedElems()[0].prefs=w}(l,s)})),o.src=n},W=function(e,t,a,n,l,s){var o=i.addSVGElementFromJson({element:"image",attr:{x:0,y:0,width:e,height:t,id:i.getNextId(),style:"pointer-events:inherit"}}),r=i.addSVGElementFromJson({element:"g",attr:{id:i.getNextId(),type:"team",subType:"image"}});r.appendChild(o),i.setHref(o,a),i.selectOnly([r]);var c=n.maxScaleWt*n.perInchWPx,d=n.maxScaleHt*n.perInchHPx;n.resStatus?i.scaleElem(i.getSelectedElems()[0],c,d):i.scaleElem(i.getSelectedElems()[0]),i.alignSelectedElements("m","page"),i.alignSelectedElements("c","page");var m=i.getSelectedElems()[0];n.originalImg=n.originalImg?n.originalImg:a,n.optionIndexVal="original",n.imgExtension="",n.filterInfo={},n.reduceColorInfo={isColorOption:!1,reduceColorList:{}},n.isRemoveAllWhite=0,n.isRemoveOuterWhite=0,n.editFilter={brightValue:0,contrastValue:0,saturValue:0,hueValue:0,blurValue:0},n.maskInfo={},n.lock=n.lock?n.lock:F,n.updatedFile="",n.intermediateFile=n.intermediateFile?n.intermediateFile:a,n.updatedBlob="",n.oneColorFill="#FF0000",m.prefs=n},t.abrupt("return",{callback:function(){}});case 14:case"end":return t.stop()}}),t)})))()},S=a(22),k=a.n(S),N=a(884),w=a.n(N),F=a(90),_=a(39),T=a(96),P={},D=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var l;return Object(n.a)(this,a),(l=t.call(this,e)).onTeamDataHandle=function(){var e=0;Object.keys(P).forEach((function(t){e+=P[t]})),0===e||l.props.canvasData.isDisableOrderOption||(g.a.canvas.team=P,g.a.canvas.clearSelection(!0),l.props.onChangeTeamData(!1,!1,!0))},l.loadFontLists=function(e){e&&e.length?(l.loadFont(e[0]),l.setState({selectedFont:e[0]})):(l.loadDefaultFont(),l.setState({selectedFont:{xe_id:0,font_Family:"Bebas Neue",name:"Bebas"}}))},l.loadFont=function(e){var t=F.a.getFont(e.font_family);t?l.setState({fontGlyph:t,loading:!1},(function(){l.generateNameNumber()})):Object(T.a)(e.file_name,(function(t,a){t?console.log("Font could not be loaded: "+t):(F.a.setFont({glyph:a,font_family:e.font_family}),l.setState({fontGlyph:a,loading:!1},(function(){l.generateNameNumber()})))}))},l.loadDefaultFont=function(){Object(T.a)(w.a,(function(e,t){e?console.log("Font could not be loaded: "+e):(F.a.setFont({glyph:t,font_family:"Bebas Neue"}),l.setState({fontGlyph:t,loading:!1}))}))},l.state={align:"none",selectedFont:null,selectedEffect:"none",loading:!0,fullText:"",selectedElm:null,fillColor:l.props.selectedPrintProfileData.color_data.fill_color_code,fillColorName:l.props.selectedPrintProfileData.color_data.fill_color_code,strokeColor:l.props.selectedPrintProfileData.color_data.border_color_code,strokeColorName:l.props.selectedPrintProfileData.color_data.border_color_code,strokeWidth:0,letterSpace:0,lineSpace:0,numoflines:0,fontGlyph:null,elementObj:{},fontSize:72},l.addElement=l.addElement.bind(Object(i.a)(l)),l.clearAll=l.clearAll.bind(Object(i.a)(l)),l.onDoneButtonClicked=l.onDoneButtonClicked.bind(Object(i.a)(l)),l}return Object(l.a)(a,[{key:"componentDidMount",value:function(){h.a.name in g.a.canvas.extensions||(g.a.addExtension(h.a.name,(function(){h.a.init({$:k.a,editor:g.a})}),{$:k.a}),E in g.a.canvas.extensions||g.a.addExtension(E,(function(){y({$:k.a,editor:g.a})}),{$:k.a}))}},{key:"componentDidUpdate",value:function(){if(this.props.selectedPrintProfileData&&Object.keys(this.props.selectedPrintProfileData.name_number_data).length&&JSON.stringify(P)===JSON.stringify({})&&this.props.selectedPrintProfileData&&this.props.selectedPrintProfileData.name_number_data){var e="";JSON.parse(JSON.stringify(this.props.selectedPrintProfileData.name_number_data)).params.forEach((function(t){e=t.name.replace(/\s/g,""),P[e]=0})),g.a.canvas.team=P}}},{key:"elementSelected",value:function(e){if(e&&"team"===e.prefs.type&&("name"===e.prefs.subType||"number"===e.prefs.subType)){var t=F.a.getFont(e.prefs.font.font_family);t?this.setState({fontGlyph:t}):this.loadFont(e.prefs.font),this.setState({selectedElm:e,fullText:e.prefs.text,fillColor:e.prefs.fill,fillColorName:e.prefs.fillName,strokeColor:e.prefs.stroke,strokeColorName:e.prefs.strokeName,strokeWidth:e.prefs.strokeWidth,selectedFont:e.prefs.font,numoflines:e.prefs.noOfLines,lineSpace:e.prefs.lineSpace,letterSpace:e.prefs.letterSpace}),this.lastSelectedText=e}}},{key:"addElement",value:function(e){var t=this;g.a.canvas.clearSelection(!0);var a=e.name.replace(/\s/g,"");if("name"===e.type||"number"===e.type){var n=e.placeholder.toString();"number"===e.type&&n.length<2&&(n="0"+n),a in P?P[a]+=1:P[a]=1,g.a.canvas.team=P,this.setState({fullText:n},(function(){t.generateNameNumber(e.type,a)}))}else{a in P?P[a]+=1:P[a]=1,g.a.canvas.team=P;var l=e.file.split(".").pop(),i={file_name:e.file,height:0,is_scaling:0,name:a,price:10,width:0,xe_id:91175},s=new XMLHttpRequest;s.open("GET",i.file_name,!0),s.send(),s.onreadystatechange=function(){4===s.readyState&&200===s.status&&("svg"===l||g.a.importImg(i.file_name,a,l))}}}},{key:"generateNameNumber",value:function(e,t){this.state.fontGlyph?""!==this.state.fullText&&(g.a.generateTextElm(this.state.fullText,this.state.fontGlyph,this.state.align,this.state.selectedEffect,this.state.selectedFont,this.state.letterSpace,this.state.lineSpace,this.state.fillColor,this.state.strokeColor,this.state.strokeWidth,this.state.numoflines,"",!1,e,t,this.state.fontSize),this.props.isMobileView||g.a.canvas.clearSelection(!0)):alert("Unable to load font")}},{key:"clearAll",value:function(){this.props.backToModules()}},{key:"onDoneButtonClicked",value:function(){this.props.backToModules(),this.props.handleSplitScreen("")}},{key:"render",value:function(){return c.a.createElement(r.Fragment,null,c.a.createElement(_.a,null,c.a.createElement(f,{onTeamDataHandle:this.onTeamDataHandle,addElement:this.addElement,clearAll:this.clearAll,selectedPrintProfileData:this.props.selectedPrintProfileData,loading:this.state.loading,onDoneButtonClicked:this.onDoneButtonClicked,language:this.props.language,isDisableOrderOption:this.props.canvasData.isDisableOrderOption}),c.a.createElement(p.a,{key:"fonts",loadFontLists:this.loadFontLists,selectedFont:this.selectedFont,fullText:this.state.fullText,showNotification:this.props.showNotification,isNameNumberElem:!0})))}}]),a}(c.a.Component),C=Object(d.b)((function(e){return{canvasData:e.productCanvasReducer,selectedPrintProfileData:e.printProfileReducer.print_profile_data.filter((function(t){return t.id===e.printProfileReducer.selected_print_profile}))[0],globalSettingsData:e.globalSettingReducer.global_settings_data,globalSettings:e.globalSettingReducer.global_settings_data.image_setting,language:e.languageReducer.translation_data.filter((function(t){return t.langCode===e.languageReducer.default_lang}))[0]}}))(D);a.d(t,"default",(function(){return C}))}}]);