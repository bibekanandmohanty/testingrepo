(this["webpackJsonpinkxe10-designer"]=this["webpackJsonpinkxe10-designer"]||[]).push([[8],{938:function(e,t,a){"use strict";a.r(t);var l=a(4),i=a(7),r=a(10),s=a(11),n=a(13),o=a(16),c=a(15),p=a(0),d=a.n(p),m=a(24),h=a(120),g=a.n(h),u=a(19),f=a.n(u),b=a(877),v=function(e){if(e.error)return d.a.createElement("div",null,"Error! ",e.error.message);if(e.loading||e.catLoading)return d.a.createElement(p.Fragment,null,d.a.createElement("div",{className:"advanced-search",key:0},d.a.createElement("div",{className:"multiSelect d-none d-md-block d-lg-block d-xl-block"},d.a.createElement(f.a,{height:34,width:255})),d.a.createElement("div",{className:"multiSelect d-block d-sm-block d-md-none d-lg-none d-xl-none"},d.a.createElement(f.a,{height:34,width:350})),d.a.createElement("div",{className:"scroll-bar-wrap d-none d-md-block d-lg-block d-xl-block"},d.a.createElement("div",{className:"thumbView scrollbar",style:{overflow:"hidden"}},d.a.createElement("div",{className:"thumbView-wrap"},[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21].map((function(e){return d.a.createElement("div",{className:"thumbView-elements",key:e},d.a.createElement("div",{className:"imageWrap"},d.a.createElement("figure",{className:"imageWrap-box"},d.a.createElement(f.a,{height:80,width:80}))))}))))),d.a.createElement("div",{className:"scroll-bar-wrap d-block d-sm-block d-md-none d-lg-none d-xl-none"},d.a.createElement("div",{className:"thumbView scrollbar",style:{overflow:"hidden"}},d.a.createElement("div",{className:"thumbView-wrap"},[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21].map((function(e){return d.a.createElement("div",{className:"thumbView-elements",key:e},d.a.createElement("div",{className:"imageWrap"},d.a.createElement("figure",{className:"imageWrap-box"},d.a.createElement(f.a,{height:110,width:110}))))}))))),d.a.createElement("div",{className:"info-text d-none d-md-block d-lg-block d-xl-block"},d.a.createElement(f.a,{height:8,width:180}))));return d.a.createElement(p.Fragment,null,d.a.createElement("div",{className:"scroll-bar-wrap"},d.a.createElement("div",{className:e.cliparts&&e.cliparts.length>=3?"thumbView scrollbar":"thumbView"},e.cliparts&&e.cliparts.length&&e.activeView?d.a.createElement(g.a,{className:"",pageStart:0,loadMore:function(){return e.loadMoreClipArt()},hasMore:e.hasMore,useWindow:!1},e.cliparts.map((function(t,a){return d.a.createElement(p.Fragment,{key:a},0===t.is_disable&&t.cliparts.length>0&&d.a.createElement("div",{className:"section-header"},d.a.createElement("h6",{className:"mb-0"},t.name),d.a.createElement("button",{className:"btn btn-sm btn-link text-underline pr-1"+(t.cliparts.length<6?" hidden":""),onClick:function(){return e.onMoreClicked(t.id,t.name)}},e.language.main.more)),0===t.is_disable&&t.cliparts.length>0&&d.a.createElement("div",{className:"thumbView-wrap"},t.cliparts.map((function(t,a){return d.a.createElement(p.Fragment,{key:a},function(t,a){return"png"!==t.file_name.split(".").pop().toLowerCase()&&"jpg"!==t.file_name.split(".").pop().toLowerCase()&&"jpeg"!==t.file_name.split(".").pop().toLowerCase()&&"bmp"!==t.file_name.split(".").pop().toLowerCase()?d.a.createElement(p.Fragment,{key:a},d.a.createElement("div",{className:"thumbView-elements",id:"tooltip-"+t.xe_id},d.a.createElement("figure",{className:"imageWrap-box",onClick:function(){return e.addDesign(t)}},d.a.createElement("img",{src:t.file_name,alt:""}))),d.a.createElement(b.a,{placement:"top",target:"tooltip-"+t.xe_id},t.name)):e.isEmbroideryEnable?void 0:d.a.createElement(p.Fragment,null,d.a.createElement("div",{className:"thumbView-elements",id:"tooltip-"+t.xe_id},d.a.createElement("div",{className:"imageWrap",key:t.xe_id},d.a.createElement("figure",{className:"imageWrap-box",onClick:function(){return e.addDesign(t)}},d.a.createElement("img",{src:t.thumbnail,alt:""})))),d.a.createElement(b.a,{placement:"top",target:"tooltip-"+t.xe_id},t.name))}(t,a))}))))}))):e.cliparts&&0===e.cliparts.length?d.a.createElement("div",{className:"alert alert-warning small-txt tip"},d.a.createElement("i",{className:"alert-icon"}),d.a.createElement("span",{className:"alert-txt"},e.language.clipart.nodataMsg)):void 0)),function(){if(e.cliparts&&e.cliparts.length&&e.hasMore&&e.totalClip-e.cliparts.length>0&&e.activeView)return d.a.createElement("div",{className:"info-text d-none d-md-block d-lg-block d-xl-block"},d.a.createElement("i",{className:"nxi nxi-down"}),e.language.main.scrollToLoadMore)}())},C=a(3),E=a(59),y=a(157),w=a(111),_=a(134),A=a.n(_),k=function(e){function t(e){return!!new RegExp("^(https?:\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","i").test(e)}return d.a.createElement("div",{className:"ClipArts"===e.activeView?"clipArts-edit hidden":"clipArts-edit"},d.a.createElement("div",{className:"element-controls-header d-none d-md-flex d-lg-flex d-xl-flex"},null!=e.selectedUsedColorIndex?d.a.createElement("section",{className:"boxTitle back-to-back",onClick:function(){return e.toogleView()}},d.a.createElement("div",{className:"icon",title:e.language.main.backToSection},d.a.createElement("i",{className:"nf nf-left-arrow"})),d.a.createElement("div",{className:"text"},e.language.panel.back)):d.a.createElement("section",{className:"boxTitle back-to-back",onClick:function(){return e.openView(e.prevPage)}},d.a.createElement("div",{className:"icon",title:e.language.main.backToSection},d.a.createElement("i",{className:"nf nf-left-arrow"})),d.a.createElement("div",{className:"text"},e.language.panel.back)),d.a.createElement("div",{className:"boxTitle back-to-menu",title:e.language.main.backToMain},d.a.createElement("i",{className:"nf nf-delete"}))),null!=e.selectedUsedColorIndex?d.a.createElement(p.Fragment,null,d.a.createElement("h6",{className:"d-none d-md-block d-lg-block d-xl-block"},e.language.clipart.chooseColor),d.a.createElement("h6",{className:"d-block d-md-none d-lg-none d-xl-none p-3 border-bottom"},e.language.clipart.chooseColor),d.a.createElement("div",{className:"bg-wrap"},d.a.createElement("div",{className:"bg-wrap-colors"},d.a.createElement("div",{className:"thumbView-wrap"},e.elemColorList.map((function(a,l){return d.a.createElement("div",{key:a.id,onClick:function(){return e.colorSelected(a,l)},className:e.selectedUsedColorIndex===l?"thumbView-elements active":"thumbView-elements"},function(e){var a=t(e.url);return e.url&&a?d.a.createElement("div",{className:"color-btn",style:{backgroundImage:"url("+e.url+")"}}):"none"===e.fill?d.a.createElement("div",{className:"color-btn",style:{backgroundImage:"url("+A.a+")"}}):d.a.createElement("div",{className:"color-btn",style:{backgroundColor:e.fill}})}(a))}))))),d.a.createElement("div",{className:""===e.selectedUsedColorIndex?"ColorPalette hidden":"ColorPalette mt-2"},d.a.createElement(w.a,{onColorSelect:e.onColorSelect,onColorHover:e.onColorHover,activeView:e.activeView,usedColorList:e.elemColorList,selectedColor:e.selectedColor}),d.a.createElement("div",{className:"buttonGroup"},d.a.createElement("button",{className:"btn btn-sm btn-success btn-block mt-3",onClick:function(){return e.toogleView()}},e.language.main.done)))):d.a.createElement("div",{className:"listView"},d.a.createElement("div",{className:"listView-wrap"},e.selectedPrintProfileData&&e.selectedPrintProfileData.misc_data&&"replace"===e.selectedPrintProfileData.misc_data.clipart_options&&d.a.createElement("div",{className:"listView-elements"},d.a.createElement("div",{className:"text-options"},d.a.createElement("div",{className:"text-options-left"},e.language.main.changeArt),d.a.createElement("div",{className:"text-options-right",onClick:function(){return e.openView("ClipArts",!0)}},d.a.createElement("span",{className:"btn btn-link p-0 effectName"},e.language.main.change)))),d.a.createElement("div",{className:"listView-elements"},d.a.createElement("div",{className:"text-options"},d.a.createElement("div",{className:"text-options-left"},e.language.main.artSize),d.a.createElement("div",{className:"text-options-right"},d.a.createElement("div",{className:"form-row"},d.a.createElement("div",{className:"col"},d.a.createElement("input",{type:"text",value:e.elWidth.toFixed(2),className:"form-control form-control-sm",placeholder:"Width",readOnly:!0})),d.a.createElement("div",{className:"col"},d.a.createElement("input",{type:"text",value:e.elHeight.toFixed(2),className:"form-control form-control-sm",placeholder:"Height",readOnly:!0})),d.a.createElement("div",{className:"col-auto"},d.a.createElement("small",{className:"form-text"},e.language.measurements[e.scaleUnit])))))),e.isShowColorOption&&d.a.createElement("div",{className:"listView-elements"},d.a.createElement("div",{className:"text-options"},d.a.createElement("div",{className:"text-options-left"},e.language.main.artColors),d.a.createElement("div",{className:"text-options-right"},e.elemColorList.length>0&&d.a.createElement("div",{className:"color-btn"},e.elemColorList.map((function(a,l){return d.a.createElement(p.Fragment,{key:a.id},function(a,l){var i=t(a.url);return a.url&&i?d.a.createElement("div",{onClick:function(){return e.colorSelected(a,l)},className:e.selectedUsedColorIndex===l?"color-swatch active":"color-swatch"+(l>3?" d-none":""),style:{backgroundImage:"url("+a.url+")"}}):"none"===a.fill?d.a.createElement("div",{onClick:function(){return e.colorSelected(a,l)},className:e.selectedUsedColorIndex===l?"color-swatch active":"color-swatch"+(l>3?" d-none":""),style:{backgroundImage:"url("+A.a+")"}}):d.a.createElement("div",{onClick:function(){return e.colorSelected(a,l)},className:e.selectedUsedColorIndex===l?"color-swatch active":"color-swatch"+(l>3?" d-none":""),style:{backgroundColor:a.fill}})}(a,l))})),e.elemColorList.length>4&&d.a.createElement("i",{className:"nxi nxi-move-right ml-2",onClick:e.rightArrowClicked})),0===e.elemColorList.length&&d.a.createElement("div",{className:"color-btn"},e.language.main.fullColor)))))))},x=a(39),P=function(e){Object(o.a)(a,e);var t=Object(c.a)(a);function a(e){var l;return Object(r.a)(this,a),(l=t.call(this,e)).state={selectedUsedColorIndex:null},l.lastColor=null,l.colorSelected=l.colorSelected.bind(Object(n.a)(l)),l.onColorSelect=l.onColorSelect.bind(Object(n.a)(l)),l.onColorHover=l.onColorHover.bind(Object(n.a)(l)),l.setColorsToxeProps=l.setColorsToxeProps.bind(Object(n.a)(l)),l.engraveAddons=l.props.licenceAddOns.includes("engrave"),l}return Object(s.a)(a,[{key:"componentDidUpdate",value:function(e){0!==this.props.elemColorList.length?("ClipArts"===this.props.activeView&&null!=this.state.selectedUsedColorIndex&&this.toogleView(),this.props.lastSelectedObjId!==e.lastSelectedObjId&&null!=this.state.selectedUsedColorIndex&&this.toogleView(),this.state.selectedUsedColorIndex>this.props.elemColorList.length-1&&this.setState({selectedUsedColorIndex:this.props.elemColorList.length-1})):this.props.openView("ClipArts")}},{key:"colorSelected",value:function(e,t){e&&C.a.getActiveObject()&&(this.setState({currElement:document.getElementById(e.id),selectedUsedColorIndex:t,currSelectedColor:e.fill,selectedNodeId:e.id}),this.lastColor=e.fill)}},{key:"onColorSelect",value:function(e){if(this.state.currSelectedColor&&C.a.getActiveObject()){e.hex_value||C.a.canvas.setPatternDefs("pattern_"+e.id,e.value);for(var t=document.getElementById(this.props.lastSelectedObjId),a={},l=t.querySelectorAll("path,polygon,circle,rect,ellipse"),i=[],r=0;r<l.length;r++)if(i.push(l[r].getAttribute("fill")),l[r].id===this.state.selectedNodeId)if(this.props.isEmbroideryEnable&&"none"!==e.hex_value){var s="pattern_"+l[r].id;if(document.getElementById(s))for(var n=t.querySelectorAll("path,polygon,circle,rect,ellipse"),o=0;o<n.length;o++)if(l[r].getAttribute("colKey")===n[o].getAttribute("colKey")){var c=n[o].getAttribute("fill"),p=c.substring(c.lastIndexOf("#")+1,c.lastIndexOf(")")),d=document.getElementById(p).getElementsByTagName("polygon");d[0].setAttribute("fill",e.hex_value),d[1].setAttribute("fill",e.hex_value)}}else for(var m=0;m<l.length;m++)l[r].getAttribute("colKey")===l[m].getAttribute("colKey")&&(this.lastSelectedColor=l[m].getAttribute("oldFill"),a={fill:this.lastSelectedColor||"url(#pattern_"+e.id+")"},C.a.canvas.addChangesToHistory(l[m],a),l[m].setAttribute("oldFill",e.hex_value||"url(#pattern_"+e.id+")"),l[m].setAttribute("fill",e.hex_value||"url(#pattern_"+e.id+")"));var h=this.props.elemColorList;h[this.state.selectedUsedColorIndex].fill=e.hex_value||"url(#pattern_"+e.id+")",this.setState({currSelectedColor:e.hex_value||"url(#pattern_"+e.id+")"}),this.setColorsToxeProps(h),this.lastColor=e.hex_value,C.a.canvas.call("changed",C.a.canvas.getActiveObject()),C.a.canvas.extractAlphaPx()}}},{key:"onColorHover",value:function(e,t){if(this.state.currSelectedColor&&e.hex_value&&C.a.getActiveObject()){var a=document.getElementById(this.props.lastSelectedObjId);a.innerHTML;if(-1===a.prefs.colors.indexOf(e.hex_value))if(!0===t){this.lastColor=e.hex_value;for(var l=a.querySelectorAll("path,polygon"),i=[],r=0;r<l.length;r++)if(i.push(l[r].getAttribute("fill")),l[r].id===this.state.selectedNodeId)if(this.props.isEmbroideryEnable){for(var s=a.querySelectorAll("path,polygon,circle,rect,ellipse"),n=0;n<s.length;n++)if(l[r].getAttribute("colKey")===s[n].getAttribute("colKey")){var o=s[n].getAttribute("fill"),c=o.substring(o.lastIndexOf("#")+1,o.lastIndexOf(")")),p=document.getElementById(c).getElementsByTagName("polygon");p[0].setAttribute("fill",e.hex_value),p[1].setAttribute("fill",e.hex_value)}}else for(var d=0;d<l.length;d++)l[r].getAttribute("colKey")===l[d].getAttribute("colKey")&&l[d].setAttribute("fill",e.hex_value||"url(#pattern_"+e.id+")")}else if(!1===t){for(var m=a.querySelectorAll("path,polygon"),h=[],g=0;g<m.length;g++)if(h.push(m[g].getAttribute("fill")),m[g].id===this.state.selectedNodeId)if(this.props.isEmbroideryEnable){for(var u="pattern_"+m[g].id,f=a.querySelectorAll("path,polygon,circle,rect,ellipse"),b=0;b<f.length;b++)if(m[g].getAttribute("colKey")===f[b].getAttribute("colKey")){var v=f[b].getAttribute("fill"),E=v.substring(v.lastIndexOf("#")+1,v.lastIndexOf(")")),y=document.getElementById(E).getElementsByTagName("polygon");y[0].setAttribute("fill",this.state.currSelectedColor),y[1].setAttribute("fill",this.state.currSelectedColor)}document.getElementById(u).getElementsByTagName("polygon")[0].setAttribute("fill",this.state.currSelectedColor)}else for(var w=0;w<m.length;w++)m[g].getAttribute("colKey")===m[w].getAttribute("colKey")&&m[w].setAttribute("fill",this.state.currSelectedColor||"url(#pattern_"+e.id+")");this.lastColor=this.state.currSelectedColor}}}},{key:"setColorsToxeProps",value:function(e){var t=C.a.getActiveObject(),a=e,l=t.prefs;l.colors=[];for(var i=0,r=a.length;i<r;i++)l.colors.push(a[i].fill);t.prefs=l}},{key:"toogleView",value:function(){this.setState({selectedUsedColorIndex:null})}},{key:"rightArrowClicked",value:function(){this.colorSelected(this.props.elemColorList[0],0)}},{key:"render",value:function(){return d.a.createElement(x.a,null,d.a.createElement(k,{openView:this.props.openView,activeView:this.props.activeView,colorSelected:this.colorSelected,selectedUsedColorIndex:this.state.selectedUsedColorIndex,onColorSelect:this.onColorSelect,onColorHover:this.onColorHover,elemColorList:this.props.elemColorList,language:this.props.language,toogleView:this.toogleView.bind(this),elHeight:this.props.elHeight,elWidth:this.props.elWidth,rightArrowClicked:this.rightArrowClicked.bind(this),selectedPrintProfileData:this.props.selectedPrintProfileData,scaleUnit:this.props.scaleUnit,isShowColorOption:!(this.props.selectedPrintProfileData&&this.props.selectedPrintProfileData.engrave&&this.props.selectedPrintProfileData.engrave.is_laser_engrave_enabled&&this.props.selectedPrintProfileData.engrave.is_hide_color_options&&this.engraveAddons),prevPage:this.props.prevPage,selectedColor:this.lastColor}))}}]),a}(d.a.Component),N=Object(m.b)((function(e){return{language:e.languageReducer.translation_data.filter((function(t){return t.langCode===e.languageReducer.default_lang}))[0],selectedPrintProfileData:e.printProfileReducer.print_profile_data.filter((function(t){return t.id===e.printProfileReducer.selected_print_profile}))[0],licenceAddOns:e.productCanvasReducer.licenceAddOns}}))(P),S=[],I=function(){function e(){Object(r.a)(this,e)}return Object(s.a)(e,null,[{key:"setElemDims",value:function(e){S.push(e)}},{key:"getElemDims",value:function(e){for(var t=0;t<S.length;t++)if(e===S[t].id)return S[t].dims;return null}},{key:"updateElmId",value:function(e,t){for(var a=0;a<S.length;a++)if(e===S[a].id){S[a].id=t;break}}}]),e}(),D=a(9),V=a.n(D),O=a(20),F={name:"clipartExt",init:function(e){return Object(O.a)(V.a.mark((function t(){var a,l,i,r;return V.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.$,a=e.editor,e.NS,i=(l=a).canvas,r={type:"clipart",fileType:"",objectTitle:"",colors:[],price:"",lock:{delete:!1,move:!1,rotate:!1,resize:!1,edit:!1}},l.importClipArtImg=function(e,t,a){var l=e.file_name,s=e.raw_file_name.split(".").pop();r.fileType=s,r.price=e.price,r.restrictScaling=e.is_scaling,r.xeId=e.xe_id;var n=100,o=100,c=new Image;c.style.opacity=0,c.crossOrigin="Anonymous",c.addEventListener("load",(function(){n=c.offsetWidth||c.naturalWidth||c.width,o=c.offsetHeight||c.naturalHeight||c.height,function(s,n){var o=i.addSVGElementFromJson({element:"image",attr:{x:0,y:0,width:s,height:n,id:i.getNextId(),style:"pointer-events:bounding-box"}}),c=i.addSVGElementFromJson({element:"g",attr:{id:i.getNextId(),type:"clipart"}});if(t){var p=i.getLayerName();if(p){var d="url(#engrave_"+Number(p.split("_")[1])+")";c.setAttribute("filter",d)}}c.appendChild(o),i.setHref(o,l),i.selectOnly([c]);var m=i.getSelectedElems()[0];if(i.scaleElem(m),m.prefs=r,e.width&&e.height){var h=i.getPxToInch(),g=e.width/h.width,u=e.height/h.height,f=m.getBBox();i.scaleSelectedElements(g/f.width,u/f.height)}e.is_scaling&&i.selectOnly([m]),i.alignSelectedElements("m","page"),i.alignSelectedElements("c","page"),a&&a()}(n,o)})),c.src=l};case 5:case"end":return t.stop()}}),t)})))()}},L=a(8),j=a(22),T=a.n(j),B=function(e){if(e.error)return d.a.createElement("div",null,"Error! ",e.error.message);if(e.loading||e.catLoading)return d.a.createElement(p.Fragment,null,d.a.createElement("div",{className:"advanced-search",key:0},d.a.createElement("div",{className:"multiSelect d-none d-md-block d-lg-block d-xl-block"},d.a.createElement(f.a,{height:34,width:255})),d.a.createElement("div",{className:"multiSelect d-block d-sm-block d-md-none d-lg-none d-xl-none"},d.a.createElement(f.a,{height:34,width:350})),d.a.createElement("div",{className:"scroll-bar-wrap d-none d-md-block d-lg-block d-xl-block"},d.a.createElement("div",{className:"thumbView scrollbar",style:{overflow:"hidden"}},d.a.createElement("div",{className:"thumbView-wrap"},[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21].map((function(e){return d.a.createElement("div",{className:"thumbView-elements",key:e},d.a.createElement("div",{className:"imageWrap"},d.a.createElement("figure",{className:"imageWrap-box"},d.a.createElement(f.a,{height:80,width:80}))))}))))),d.a.createElement("div",{className:"scroll-bar-wrap d-block d-sm-block d-md-none d-lg-none d-xl-none"},d.a.createElement("div",{className:"thumbView scrollbar",style:{overflow:"hidden"}},d.a.createElement("div",{className:"thumbView-wrap"},[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21].map((function(e){return d.a.createElement("div",{className:"thumbView-elements",key:e},d.a.createElement("div",{className:"imageWrap"},d.a.createElement("figure",{className:"imageWrap-box"},d.a.createElement(f.a,{height:110,width:110}))))}))))),d.a.createElement("div",{className:"info-text d-none d-md-block d-lg-block d-xl-block"},d.a.createElement(f.a,{height:8,width:180}))));return d.a.createElement(p.Fragment,null,d.a.createElement("div",{className:"element-controls-header d-flex listing-inner"+("list"===e.activeView?"":" hidden")},d.a.createElement(p.Fragment,null,d.a.createElement("div",{className:"d-none d-sm-none d-md-none d-lg-flex d-xl-flex align-items-center"},d.a.createElement("section",{className:"boxTitle back-to-back",onClick:e.backToCliparts},d.a.createElement("div",{className:"icon",title:e.language.main.backToSection},d.a.createElement("i",{className:"nf nf-left-arrow"}))),d.a.createElement("div",{className:"text"},e.selectedCatName)),d.a.createElement("div",{className:"d-flex d-sm-flex d-md-flex d-lg-none d-xl-none align-items-center justify-content-between w-100"},d.a.createElement("div",{className:"boxTitle title cursor-pointer d-block",onClick:e.backToCliparts},e.selectedCatName),d.a.createElement("div",{className:"boxTitle back-to-view d-flex align-items-center",title:e.language.main.backToSection,onClick:e.backToCliparts},d.a.createElement("i",{className:"nf nf-left-arrow"}),e.language.panel.back))),d.a.createElement("div",{className:"boxTitle back-to-menu",title:e.language.main.backToMain},d.a.createElement("i",{className:"nf nf-delete"}))),d.a.createElement("div",{className:"scroll-bar-wrap"+("list"===e.activeView?"":" hidden")},d.a.createElement("div",{className:e.cliparts&&e.cliparts.length>=18?"thumbView scrollbar listing":"thumbView"},e.cliparts&&e.cliparts.length&&e.activeView?d.a.createElement(g.a,{className:"thumbView-wrap",pageStart:0,loadMore:function(){return e.loadMoreClipArt()},hasMore:e.hasMore,useWindow:!1},e.cliparts.map((function(t,a){return d.a.createElement(p.Fragment,{key:a},function(t,a){return"png"!==t.file_name.split(".").pop().toLowerCase()&&"jpg"!==t.file_name.split(".").pop().toLowerCase()&&"jpeg"!==t.file_name.split(".").pop().toLowerCase()&&"bmp"!==t.file_name.split(".").pop().toLowerCase()?d.a.createElement(p.Fragment,{key:a},d.a.createElement("div",{className:"thumbView-elements",id:"tooltip-"+t.xe_id},d.a.createElement("figure",{className:"imageWrap-box",onClick:function(){return e.addDesign(t)}},d.a.createElement("img",{src:t.file_name,alt:""}))),d.a.createElement(b.a,{placement:"top",target:"tooltip-"+t.xe_id},t.name)):e.isEmbroideryEnable?void 0:d.a.createElement(p.Fragment,null,d.a.createElement("div",{className:"thumbView-elements",id:"tooltip-"+t.xe_id},d.a.createElement("div",{className:"imageWrap",key:t.xe_id},d.a.createElement("figure",{className:"imageWrap-box",onClick:function(){return e.addDesign(t)}},d.a.createElement("img",{src:t.thumbnail,alt:""})))),d.a.createElement(b.a,{placement:"top",target:"tooltip-"+t.xe_id},t.name))}(t,a))}))):e.cliparts&&0===e.cliparts.length?d.a.createElement("div",{className:"alert alert-warning small-txt tip"},d.a.createElement("i",{className:"alert-icon"}),d.a.createElement("span",{className:"alert-txt"},e.language.clipart.nodataMsg)):void 0)),function(){if(e.cliparts&&e.cliparts.length&&e.hasMore&&e.totalClip-e.cliparts.length>0&&"list"===e.activeView)return d.a.createElement("div",{className:"info-text d-none d-md-block d-lg-block d-xl-block"},d.a.createElement("i",{className:"nxi nxi-down"}),e.language.main.scrollToLoadMore)}())},M=function(e){if(e.error)return d.a.createElement("div",null,"Error! ",e.error.message);if(e.loading||e.catLoading)return d.a.createElement(p.Fragment,null,d.a.createElement("div",{className:"advanced-search",key:0},d.a.createElement("div",{className:"multiSelect d-block d-sm-block d-md-none d-lg-none d-xl-none"},d.a.createElement(f.a,{height:34,width:350})),d.a.createElement("div",{className:"scroll-bar-wrap d-none d-md-block d-lg-block d-xl-block"},d.a.createElement("div",{className:"thumbView scrollbar",style:{overflow:"hidden"}},d.a.createElement("div",{className:"thumbView-wrap"},[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21].map((function(e){return d.a.createElement("div",{className:"thumbView-elements",key:e},d.a.createElement("div",{className:"imageWrap"},d.a.createElement("figure",{className:"imageWrap-box"},d.a.createElement(f.a,{height:80,width:80}))))}))))),d.a.createElement("div",{className:"scroll-bar-wrap d-block d-sm-block d-md-none d-lg-none d-xl-none"},d.a.createElement("div",{className:"thumbView scrollbar",style:{overflow:"hidden"}},d.a.createElement("div",{className:"thumbView-wrap"},[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21].map((function(e){return d.a.createElement("div",{className:"thumbView-elements",key:e},d.a.createElement("div",{className:"imageWrap"},d.a.createElement("figure",{className:"imageWrap-box"},d.a.createElement(f.a,{height:110,width:110}))))}))))),d.a.createElement("div",{className:"info-text d-none d-md-block d-lg-block d-xl-block"},d.a.createElement(f.a,{height:8,width:180}))));return d.a.createElement(p.Fragment,null,d.a.createElement("div",{className:"scroll-bar-wrap"},d.a.createElement("div",{className:e.cliparts&&e.cliparts.length>=18?"thumbView scrollbar":"thumbView"},e.cliparts&&e.cliparts.length&&e.activeView?d.a.createElement(g.a,{className:"thumbView-wrap",pageStart:0,loadMore:function(){return e.loadMoreFilteredClipArt()},hasMore:e.hasMore,useWindow:!1},e.cliparts.map((function(t,a){return d.a.createElement(p.Fragment,{key:a},function(t,a){return"png"!==t.file_name.split(".").pop().toLowerCase()&&"jpg"!==t.file_name.split(".").pop().toLowerCase()&&"jpeg"!==t.file_name.split(".").pop().toLowerCase()&&"bmp"!==t.file_name.split(".").pop().toLowerCase()?d.a.createElement(p.Fragment,{key:a},d.a.createElement("div",{className:"thumbView-elements",id:"tooltip-"+t.xe_id},d.a.createElement("figure",{className:"imageWrap-box",onClick:function(){return e.addDesign(t)}},d.a.createElement("img",{src:t.file_name,alt:""}))),d.a.createElement(b.a,{placement:"top",target:"tooltip-"+t.xe_id},t.name)):e.isEmbroideryEnable?void 0:d.a.createElement(p.Fragment,null,d.a.createElement("div",{className:"thumbView-elements",id:"tooltip-"+t.xe_id},d.a.createElement("div",{className:"imageWrap",key:t.xe_id},d.a.createElement("figure",{className:"imageWrap-box",onClick:function(){return e.addDesign(t)}},d.a.createElement("img",{src:t.thumbnail,alt:""})))),d.a.createElement(b.a,{placement:"top",target:"tooltip-"+t.xe_id},t.name))}(t,a))}))):e.cliparts&&0===e.cliparts.length?d.a.createElement("div",{className:"alert alert-warning small-txt tip"},d.a.createElement("i",{className:"alert-icon"}),d.a.createElement("span",{className:"alert-txt"},e.language.clipart.nodataMsg)):void 0)),function(){if(e.cliparts&&e.cliparts.length&&e.hasMore&&e.totalClip-e.cliparts.length>0)return d.a.createElement("div",{className:"info-text d-none d-md-block d-lg-block d-xl-block"},d.a.createElement("i",{className:"nxi nxi-down"}),e.language.main.scrollToLoadMore)}())},R="",H=function(e){Object(o.a)(a,e);var t=Object(c.a)(a);function a(e){var l;return Object(r.a)(this,a),(l=t.call(this,e)).extAddedCb=function(e){F.init({$:T.a,editor:C.a,NS:L.a})},l.decoProductReplceDesign=function(e){var t,a,i,r=C.a.canvas.getAllStageElems(),s=l.props.selectedElm.id,n=1,o=1,c=1,p=!1,d=0,m="";r.forEach((function(r,h){if(r.prefs&&"clipart"===r.prefs.type&&r.id===s){C.a.canvas.selectOnly([r]),a=C.a.getActiveObject(),d=C.a.canvas.getParentLayerIndex(a),m=r.prefs.objectTitle,I.getElemDims(s)?(t=I.getElemDims(s),p=!0):(t=a.getBBox(),p=!1),C.a.canvas.deleteSelectedElements(!0),C.a.canvas.getLayerName()!=="Layer_"+d&&C.a.canvas.setCurrentLayer("Layer_"+d);var g=new XMLHttpRequest;g.open("GET",e.file_name,!0),g.send(),g.onreadystatechange=function(){4===g.readyState&&200===g.status&&("svg"===e.raw_file_name.split(".").pop()?(C.a.canvas.importSvgString(g.responseText),l.addXePropsToObject(e),a=C.a.getActiveObject(),p?I.updateElmId(s,a.id):I.setElemDims({id:a.id,dims:t}),a.prefs.objectTitle=m,i=a.getBBox(),n=t.width/i.width,o=t.height/i.height,c=n>o?o:n,C.a.canvas.scaleText(c),C.a.canvas.moveSelectedElements(t.x-i.x,t.y-i.y),a.prefs.lock=r.prefs.lock,C.a.canvas.clearSelection(),l.props.changeTempReplace(!1,"edit",!1)):C.a.importClipArtImg(e,l.isEngraveEnable,l.resizeTempClipart("predeco",p,t,r,"",a,i)))}}}))},l.tempEditRepaceDesign=function(e){var t,a,i,r=C.a.canvas.getSelectedElems()[0],s=r.prefs.edit,n=l.props.selectedElm.id,o=1,c=1,p=1,d=!1,m="";T()(r).children().each((function(r,h){if(h.prefs&&"clipart"===h.prefs.type&&h.id===n){C.a.canvas.ungroupSelectedElement(),C.a.canvas.selectOnly([h]),a=C.a.getActiveObject(),m=h.prefs.objectTitle,I.getElemDims(n)?(t=I.getElemDims(n),d=!0):(t=a.getBBox(),d=!1),C.a.canvas.deleteSelectedElements(!0);var g=new XMLHttpRequest;g.open("GET",e.file_name,!0),g.send(),g.onreadystatechange=function(){if(4===g.readyState&&200===g.status)if("svg"===e.raw_file_name.split(".").pop()){C.a.canvas.importSvgString(g.responseText),l.addXePropsToObject(e),a=C.a.getActiveObject(),d?I.updateElmId(n,a.id):I.setElemDims({id:a.id,dims:t}),a.prefs.objectTitle=m,i=a.getBBox(),o=t.width/i.width,c=t.height/i.height,p=o>c?c:o,C.a.canvas.scaleText(p),C.a.canvas.moveSelectedElements(t.x-i.x,t.y-i.y),a.prefs.lock=h.prefs.lock,C.a.canvas.selectAllInCurrentLayer();var r=C.a.canvas.getSelectedElems().filter((function(e){return"background"===e.id}))[0];C.a.canvas.removeFromSelection([r]),C.a.canvas.groupSelectedElements();var u=C.a.canvas.getSelectedElems();u[0].setAttribute("type","template"),u[0].setAttribute("pointer-events","bounding-box"),u[0].prefs={type:"template",edit:s,price:0},C.a.canvas.call("changed",u),l.props.changeTempReplace(!1,"template",!0)}else C.a.importClipArtImg(e,l.isEngraveEnable,l.resizeTempClipart("template",d,t,h,s,a,i))}}}))},l.loadMoreFilteredClipArt=function(){l.clipFilterInfo.page=l.props.filteredClipart.pageNo;var e=Math.ceil(l.props.filteredClipart.clipArtData.total_records/l.clipFilterInfo.perpage);l.clipFilterInfo.page<e&&(l.clipFilterInfo.page=parseInt(l.clipFilterInfo.page)+1,l.props.dispatch(Object(E.x)(l.clipFilterInfo,l.props.allFilteredClipart)),l.remainingClip=l.props.filteredClipart.clipArtData.total_records-l.props.filteredClipart.clipArtData.data.length,l.remainingClip<l.clipFilterInfo.perpage&&(l.hasMoreFilterPage=!1))},l.showClipartFilterView=function(e,t,a,i){return a&&a.clipArtData&&a.clipArtData.data?(a.clipArtData.records<l.clipByCatInfo.cat_perpage?l.hasMoreFilterPage=!1:l.hasMoreFilterPage=!0,d.a.createElement(M,{cliparts:a.clipArtData.data,language:i,addDesign:l.addDesign,loadMoreFilteredClipArt:l.loadMoreFilteredClipArt,error:e,loading:t,hasMore:l.hasMoreFilterPage,totalClip:a.clipArtData.total_records,activeView:l.state.activeView,perPage:l.clipByCatInfo.cat_perpage,catLoading:l.props.catLoading,isEmbroideryEnable:!!(l.props.selectedPrintProfileData&&l.props.selectedPrintProfileData.embroidery&&l.props.selectedPrintProfileData.embroidery.is_embroidery_enabled&&l.embAddons),backToCliparts:l.backToCliparts})):d.a.createElement(M,{error:e,loading:t,catLoading:l.props.catLoading,isEmbroideryEnable:!!(l.props.selectedPrintProfileData&&l.props.selectedPrintProfileData.embroidery&&l.props.selectedPrintProfileData.embroidery.is_embroidery_enabled&&l.embAddons),language:i,cliparts:[]})},l.state={activeView:"ClipArts",elemColorList:[],lastSelectedObjId:"",elHeight:0,elWidth:0,pfChanged:!1,isColorWarningShown:!1,selectedCatName:"",prevPage:"ClipArts"},l.loadMoreClipArt=l.loadMoreClipArt.bind(Object(n.a)(l)),l.clipInfo={name:"",page:"1",order:"desc",perpage:"40",category:"",print_profile_id:""},l.clipByCatInfo={name:"",page:"1",order:"desc",perpage:"6",cat_page:"1",cat_order:"desc",cat_perpage:"10",print_profile_id:"",primary_cat:"",type:"tool"},l.clipFilterInfo={name:"",page:"1",order:"desc",perpage:"40",category:"",print_profile_id:"",searchType:"tool"},l.hasMorePage=!0,l.remainingClip=0,l.onCatSubcatSelect=l.onCatSubcatSelect.bind(Object(n.a)(l)),l.selectedCatSubCat="",l.onFilterApplyClicked=l.onFilterApplyClicked.bind(Object(n.a)(l)),l.onFilterSearch=l.onFilterSearch.bind(Object(n.a)(l)),l.showClipArtsFilter=l.showClipArtsFilter.bind(Object(n.a)(l)),l.afterClearFilter=l.afterClearFilter.bind(Object(n.a)(l)),l.showHideClipArtView=l.showHideClipArtView.bind(Object(n.a)(l)),l.openView=l.openView.bind(Object(n.a)(l)),l.addXePropsToObject=l.addXePropsToObject.bind(Object(n.a)(l)),l.addDesign=l.addDesign.bind(Object(n.a)(l)),l.showClipArtView=l.showClipArtView.bind(Object(n.a)(l)),l.elem={width:null,height:null},l.boundsWH={width:null,height:null},l.prevPropsData="",l.afterPrimeCatSet=l.afterPrimeCatSet.bind(Object(n.a)(l)),l.embAddons=l.props.licenceAddOns.includes("embroidery"),l.engraveAddons=l.props.licenceAddOns.includes("engrave"),l.isEmbroideryEnable=!!(l.props.selectedPrintProfileData&&l.props.selectedPrintProfileData.embroidery&&l.props.selectedPrintProfileData.embroidery.is_embroidery_enabled&&l.embAddons),l.isEngraveEnable=!!(l.props.selectedPrintProfileData&&l.props.selectedPrintProfileData.engrave&&l.props.selectedPrintProfileData.engrave.is_laser_engrave_enabled&&l.engraveAddons),l.onMoreClicked=l.onMoreClicked.bind(Object(n.a)(l)),l.backToCliparts=l.backToCliparts.bind(Object(n.a)(l)),l.loadMoreClipArtByCat=l.loadMoreClipArtByCat.bind(Object(n.a)(l)),l.hasMoreCatPage=!0,l.hasMoreFilterPage=!0,l.isBWGrayEnable=!!(l.props.selectedPrintProfileData&&l.props.selectedPrintProfileData.engrave&&l.props.selectedPrintProfileData.engrave.is_laser_engrave_enabled&&l.props.selectedPrintProfileData.engrave.is_BWGray_enabled),l.applyEngraveColor=l.props.selectedPrintProfileData&&l.props.selectedPrintProfileData.engrave&&l.props.selectedPrintProfileData.engrave.is_black_white?"#000000":"#808080",l}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props.printProfileReducer.selected_print_profile,a=this.props.allCatData.filter((function(e){return e.printProfileId===t}))[0];a&&a.catLoadStatus||this.props.dispatch(Object(E.v)(t,this.props.allCatData)).then((function(t){(t&&!t.data||t&&t.data&&0===t.data.length)&&e.afterPrimeCatSet([])})),this.props.tagLoadStatus||this.props.dispatch(Object(E.w)()),F in C.a.canvas.extensions||C.a.addExtension(F,this.extAddedCb,{$:T.a})}},{key:"afterPrimeCatSet",value:function(e){this.selectedCatSubCat=Object(i.a)(e),this.selectedCatSubCat&&(this.clipFilterInfo.category=this.selectedCatSubCat.length?JSON.stringify(this.selectedCatSubCat):null);var t=this.props.printProfileReducer.selected_print_profile;this.clipInfo.print_profile_id=this.props.printProfileReducer.selected_print_profile,this.clipByCatInfo.print_profile_id=this.props.printProfileReducer.selected_print_profile,this.clipFilterInfo.print_profile_id=this.props.printProfileReducer.selected_print_profile;var a=this.props.allClipArt.filter((function(e){return e.printProfileId===t}))[0];if(a&&a.clipLoadStatus||this.props.dispatch(Object(E.t)(this.clipByCatInfo,this.props.allClipArt)),this.clipFilterInfo.category||this.clipFilterInfo.name){var l=this.props.allFilteredClipart.filter((function(e){return e.printProfileId===t}))[0];l&&l.clipLoadStatus||this.props.dispatch(Object(E.x)(this.clipFilterInfo,this.props.allFilteredClipart)),this.openView("clipartFilter")}}},{key:"componentDidUpdate",value:function(e){this.prevPropsData=e,this.props.isUpdateClipart!==e.isUpdateClipart&&!1===this.props.isUpdateClipart&&this.openView("")}},{key:"getUpdatedPrintDetails",value:function(){try{var e=C.a.canvas.getLayerName(),t=Number(e.split("_")[1]),a=this.props.canvasReducer.active_product_side?this.props.canvasReducer.active_product_side:0,l=this.props.canvasReducer.product_sides[a].decoration_settings[t].activePrintProfile;return this.props.printProfileReducer.print_profile_data.filter((function(e){return e.id===l}))[0]}catch(i){return this.props.selectedPrintProfileData}}},{key:"elementSelected",value:function(e){if(e){var t=this.getUpdatedPrintDetails();this.isEmbroideryEnable=!!(t&&t.embroidery&&t.embroidery.is_embroidery_enabled);var a,l,r,s,n,o=e.querySelectorAll("path,polygon,circle,rect,ellipse"),c=[],p=[],d=!0;0===e.querySelectorAll("defs").length&&(r=document.createElementNS("http://www.w3.org/2000/svg","defs"),d=!1),r||(r=e.getElementsByTagName("defs"));for(var m=0,h=o.length;m<h;m++)if(o[m].getAttribute("id")&&(a="pattern_"+o[m].getAttribute("id"),o[m].parentElement&&o[m].parentElement.getAttribute("fill")&&!o[m].getAttribute("fill")?this.isBWGrayEnable?(o[m].parentElement.setAttribute("fill",this.applyEngraveColor),p.push({id:o[m].parentElement.getAttribute("id"),fill:this.applyEngraveColor,url:""})):this.isEmbroideryEnable&&o[m].getAttribute("fill")&&"#"!==o[m].getAttribute("fill")[0]&&"none"!==o[m].getAttribute("fill")?document.getElementById(a)&&(s=document.getElementById(a).getElementsByTagName("polygon")[0].getAttribute("fill"),p.push({id:o[m].getAttribute("id"),fill:s,url:""})):(p.push({id:o[m].getAttribute("id"),fill:o[m].parentElement.getAttribute("fill"),url:""}),o[m].setAttribute("fill",o[m].parentElement.getAttribute("fill")),s=o[m].parentElement.getAttribute("fill")):this.isBWGrayEnable?(o[m].setAttribute("fill",this.applyEngraveColor),p.push({id:o[m].getAttribute("id"),fill:this.applyEngraveColor,url:""})):this.isEmbroideryEnable&&o[m].getAttribute("fill")&&"#"!==o[m].getAttribute("fill")[0]&&"none"!==o[m].getAttribute("fill")?document.getElementById(a)&&(s=document.getElementById(a).getElementsByTagName("polygon")[0].getAttribute("fill"),p.push({id:o[m].getAttribute("id"),fill:s,url:""}),o[m].getAttribute("colKey")||o[m].setAttribute("colKey",o[m].getAttribute("fill"))):(o[m].getAttribute("colKey")||(o[m].setAttribute("colKey",o[m].getAttribute("fill")),o[m].setAttribute("oldFill",o[m].getAttribute("fill"))),p.push({id:o[m].getAttribute("id"),fill:o[m].getAttribute("fill"),url:""}),s=o[m].getAttribute("fill")),this.isEmbroideryEnable)){var g=a,u="#000000";l="url(#"+g+")",o[m].setAttribute("fill",l),"none"===s&&(u="none");var f=!(!window||!window.browserAccessName||"safari"!==window.browserAccessName.toLowerCase())?1.8:.7;n+='<pattern id="'+g+'" viewBox="0,0,1,1" width="4" height="2" patternUnits="userSpaceOnUse" patternTransform="rotate(-60) scale('+f+" "+f+')"><polygon points="0,0 2,0 0,2" fill="'+s+'"  ></polygon><polygon points="0,4 4,0 4,2 2,4" fill="'+s+'"></polygon><polygon points="0,2 0,4 4,0 2,0" fill="'+u+'"></polygon><polygon points="0,2 2,2 2,0" fill="'+u+'"></polygon></pattern>'}this.isEmbroideryEnable&&(d?r[0].innerHTML=n:(r.innerHTML=n,e.appendChild(r))),this.state.lastSelectedObjId!==e.id&&this.setState({isColorWarningShown:!1});for(var b=0;b<p.length;b++){if(p[b].fill||(p[b].fill="#000000"),p[b].fill.includes("url")&&this.props.colorList&&this.props.colorList.length>0)for(var v=0;v<this.props.colorList.length;v++)for(var C=0;C<this.props.colorList[v].subcategory.length;C++)for(var E=0;this.props.colorList[v].subcategory[C]&&E<this.props.colorList[v].subcategory[C].color_data.length;E++){var y=p[b].fill;if(y.match(/\d/g))y.match(/\d+/g).map(Number)[0]===this.props.colorList[v].subcategory[C].color_data[E].id&&(p[b].url=this.props.colorList[v].subcategory[C].color_data[E].value)}}e&&e.prefs&&!e.prefs.colorReplace&&(this.replaceColor(o,p),e.prefs.colorReplace=!0);for(var w={},_=0,A=p.length;_<A;_++)w[p[_].fill]=p[_];for(var k in p=[],w)p.push(w[k]);for(var x=0;x<p.length;x++)c.push(p[x].fill);this.setState({lastSelectedObjId:e.id,elemColorList:p}),e&&e.prefs&&e.prefs.lock&&e.prefs.lock.colorEdit&&!this.props.canvasReducer.isTemplateEdit?this.openView("ClipArts"):this.openView(""),(P=c).splice.apply(P,[0,P.length].concat(Object(i.a)(new Set(P)))),c=P,e.prefs.colors=c,this.elem.width=e.getBBox().width,this.elem.height=e.getBBox().height,this.calculateArtSize()}else this.openView("ClipArts");var P;this.props.setLayerData()}},{key:"addXePropsToObject",value:function(e){var t=C.a.getActiveObject(),a={type:"clipart",fileType:"svg",colors:[],price:e.price,objectTitle:"",xeId:e.xe_id,restrictScaling:e.is_scaling,colorReplace:!1,lock:{colorEdit:!1,delete:!1,move:!1,rotate:!1,resize:!1,edit:!1}};t.setAttribute("type","clipart"),t.setAttribute("pointer-events","bounding-box"),t.prefs=a}},{key:"addDesign",value:function(e){var t=this;if(this.props.showHideBackLoader(!0,"clipart"),C.a.canvas.getIsFormEdit()&&null!==this.props.replaceDesignIndex)this.decoProductReplceDesign(e);else if(this.props.isTempReplace&&null!==this.props.replaceDesignIndex)this.tempEditRepaceDesign(e);else{this.props.isUpdateClipart&&C.a.canvas.deleteSelectedElements(!0),this.props.showReplaceClipart(!1);var a=new XMLHttpRequest;a.open("GET",e.file_name,!0),a.send(),a.onreadystatechange=function(){if(4===a.readyState&&200===a.status)if("svg"===e.raw_file_name.split(".").pop()){C.a.canvas.importSvgString(a.responseText),t.addXePropsToObject(e);var l=C.a.canvas.getSelectedElems()[0],i=l.getBBox();if(e.width&&e.height){var r=C.a.canvas.getPxToInch(),s=e.width/r.width,n=e.height/r.height;C.a.canvas.scaleSelectedElements(s/i.width,n/i.height)}else C.a.canvas.placeElementOnStage();e.is_scaling&&C.a.canvas.selectOnly([l]),e.width&&e.height&&(C.a.canvas.alignSelectedElements("m","page"),C.a.canvas.alignSelectedElements("c","page"))}else C.a.importClipArtImg(e,t.isEngraveEnable)}}this.props.showHideBackLoader(!1,"clipart"),this.setState({prevPage:this.state.activeView})}},{key:"loadMoreClipArt",value:function(){this.clipInfo.page=this.props.clipartsByCat.pageNo;var e=Math.ceil(this.props.clipartsByCat.clipArtData.total_records/this.clipInfo.perpage);this.clipInfo.page<e&&(this.clipInfo.page=parseInt(this.clipInfo.page)+1,this.props.dispatch(Object(E.u)(this.clipInfo,this.props.allCatClipArt)),this.remainingClip=this.props.clipartsByCat.clipArtData.total_records-this.props.clipartsByCat.clipArtData.data.length,this.remainingClip<this.clipInfo.perpage&&(this.hasMorePage=!1))}},{key:"onCatSubcatSelect",value:function(e){this.selectedCatSubCat=Object(i.a)(e)}},{key:"onFilterApplyClicked",value:function(){this.clipFilterInfo.page=1,this.selectedCatSubCat&&(this.clipFilterInfo.category=this.selectedCatSubCat.length?JSON.stringify(this.selectedCatSubCat):null,this.openView("clipartFilter")),this.props.dispatch(Object(E.x)(this.clipFilterInfo,this.props.allFilteredClipart))}},{key:"onFilterSearch",value:function(e){this.clipFilterInfo.name=e,this.clipFilterInfo.page=1,this.selectedCatSubCat&&(this.clipFilterInfo.category=this.selectedCatSubCat.length?JSON.stringify(this.selectedCatSubCat):null,this.openView("clipartFilter")),this.props.dispatch(Object(E.x)(this.clipFilterInfo,this.props.allFilteredClipart,!0))}},{key:"afterClearFilter",value:function(){this.clipFilterInfo.page=1,this.selectedCatSubCat&&(this.clipFilterInfo.category=this.selectedCatSubCat.length?JSON.stringify(this.selectedCatSubCat):null),this.props.dispatch(Object(E.x)(this.clipFilterInfo,this.props.allFilteredClipart,!0)),this.setPrimeCatStatus(),this.clipFilterInfo.category||this.clipFilterInfo.name||this.openView("ClipArts")}},{key:"showHideClipArtView",value:function(e){this.setState({activeView:e})}},{key:"openView",value:function(e,t){var a=this;"clipartFilter"!==e||this.clipFilterInfo.category||this.clipFilterInfo.name||(e="ClipArts"),"ClipArts"===e&&(this.clipFilterInfo.category||this.clipFilterInfo.name)&&(e="clipartFilter"),this.setState({activeView:e},(function(){""===e||"list"===e?a.props.setHeaderDispay(!1):a.props.setHeaderDispay(!0),a.props.showReplaceClipart(t)}))}},{key:"showClipArtsFilter",value:function(e,t,a,l,i,r){var s=this;if(e&&e.catData&&e.catData.length)return d.a.createElement("div",{className:"ClipArts"!==this.state.activeView&&"clipartFilter"!==this.state.activeView?"hidden":""},d.a.createElement(y.a,{onRef:function(e){return s.multiselectChild=e},options:e.catData,onSelectOptions:this.onCatSubcatSelect,onApplyClicked:this.onFilterApplyClicked,onSearchDataEntered:this.onFilterSearch,afterClearAll:this.afterClearFilter,tagList:l.data,afterPrimeCatSet:this.afterPrimeCatSet,primeCatStatus:e.primeCatStatus}))}},{key:"addClipartColors",value:function(){return d.a.createElement(N,{showHideClipArtView:this.showHideClipArtView,openView:this.openView,setHeaderDispay:this.props.setHeaderDispay,activeView:this.state.activeView,elemColorList:this.state.elemColorList,lastSelectedObjId:this.state.lastSelectedObjId,elHeight:this.state.elHeight,elWidth:this.state.elWidth,selectedPrintProfileData:this.props.selectedPrintProfileData,scaleUnit:this.props.canvasReducer.product_details.scale_unit_id,isEmbroideryEnable:!!(this.props.selectedPrintProfileData&&this.props.selectedPrintProfileData.embroidery&&this.props.selectedPrintProfileData.embroidery.is_embroidery_enabled&&this.embAddons),prevPage:this.state.prevPage})}},{key:"calculateArtSize",value:function(){var e,t,a,l=C.a.canvas.getActiveObject();e=C.a.canvas.getStrokedBBox(l,!0);var i=C.a.canvas.getPxToInch();t=e.width*i.width,a=e.height*i.height,this.setState({elHeight:a,elWidth:t})}},{key:"setPrimeCatStatus",value:function(){for(var e=this.props.printProfileReducer.selected_print_profile,t=Object(i.a)(this.props.allCatData),a=0;a<t.length;a++)if(t[a].printProfileId===e){t[a].primeCatStatus=!1;break}this.props.dispatch(Object(E.y)(t))}},{key:"resizeTempClipart",value:function(e,t,a,i,r){var s,n,o=this,c=1,p=1,d=1,m=this.props.selectedElm.id,h=i.prefs.objectTitle,g=setInterval((function(){if(s=C.a.getActiveObject()){t?I.updateElmId(m,s.id):I.setElemDims({id:s.id,dims:a});var u=JSON.parse(JSON.stringify(s.prefs));if(u.objectTitle=h,s.prefs=Object(l.a)({},u),n=s.getBBox(),c=a.width/n.width,p=a.height/n.height,d=c>p?p:c,C.a.canvas.scaleText(d),C.a.canvas.moveSelectedElements(a.x-n.x,a.y-n.y),"template"===e){C.a.canvas.selectAllInCurrentLayer();var f=C.a.canvas.getSelectedElems().filter((function(e){return"background"===e.id}))[0];C.a.canvas.removeFromSelection([f]),C.a.canvas.groupSelectedElements();var b=C.a.canvas.getSelectedElems();b[0].setAttribute("type","template"),b[0].setAttribute("pointer-events","bounding-box"),b[0].prefs={type:"template",edit:r,price:0},C.a.canvas.call("changed",b),o.props.changeTempReplace(!1,"template",!0)}else"predeco"===e&&(s.prefs.lock=i.prefs.lock,C.a.canvas.clearSelection(),o.props.changeTempReplace(!1,"edit",!1));clearInterval(g)}}),25)}},{key:"onMoreClicked",value:function(e,t){if(e){this.props.dispatch(Object(E.z)(e)),this.setState({selectedCatName:t}),R=e,this.openView("list"),this.clipInfo.category=JSON.stringify([e]),this.clipInfo.page=1;this.props.printProfileReducer.selected_print_profile;var a=this.props.allCatClipArt.filter((function(e){return e.catId===R}))[0];a&&a.clipLoadStatus||this.props.dispatch(Object(E.u)(this.clipInfo,this.props.allCatClipArt))}}},{key:"backToCliparts",value:function(){this.clipByCatInfo.name="",this.props.setHeaderDispay(!0),this.openView("ClipArts")}},{key:"loadMoreClipArtByCat",value:function(){this.clipByCatInfo.cat_page=this.props.cliparts.pageNo;var e=Math.ceil(this.props.cliparts.clipArtData.total_records/this.clipByCatInfo.cat_perpage);this.clipByCatInfo.cat_page<e&&(this.clipByCatInfo.cat_page=parseInt(this.clipByCatInfo.cat_page)+1,this.props.dispatch(Object(E.t)(this.clipByCatInfo,this.props.allClipArt)),this.remainingClip=this.props.cliparts.clipArtData.total_records-this.props.cliparts.clipArtData.data.length,this.remainingClip<this.clipByCatInfo.cat_perpage&&(this.hasMoreCatPage=!1))}},{key:"closest",value:function(e,t){function a(e,t){return(e=e.replace("#","")).length&&t.length?a(e.slice(2),t.slice(2))+Math.abs(parseInt(e.slice(0,2),16)-parseInt(t.slice(0,2),16)):0}var l,i,r,s=16777215;for(r=0;r<e.length;r++)(i=a(e[r],t))<s&&(s=i,l=e[r]);return l}},{key:"replaceColor",value:function(e,t){var a=this;if(this.props.selectedPrintProfileData&&this.props.selectedPrintProfileData.misc_data&&this.props.selectedPrintProfileData.misc_data.force_fill_color){var l,i,r,s=[],n=[];this.props.selectedPrintProfileData.misc_data.force_fill_color_arr.forEach((function(e){s.push(e.hex_value)})),e.forEach((function(e){l=e.getAttribute("fill"),a.props.selectedPrintProfileData.misc_data.force_fill_color_arr.filter((function(e){return e.hex_value===l})).length||(i=(i=l.replace("#","")).length<6?i.replace(/(.)/g,"$1$1"):i,r=a.closest(s,i),e.setAttribute("fill",r),n.push(r))})),t.forEach((function(e,t){n[t]&&(e.fill=n[t])}))}}},{key:"backFilterToCliparts",value:function(){this.clipFilterInfo.name="",this.clipFilterInfo.category=null,this.props.setHeaderDispay(!0),this.openView("ClipArts"),this.multiselectChild&&this.multiselectChild.resetAll(),this.setPrimeCatStatus()}},{key:"showClipArtView",value:function(e,t,a,l){return a&&a.clipArtData&&a.clipArtData.data?(a.clipArtData.records<this.clipInfo.perpage?this.hasMorePage=!1:this.hasMorePage=!0,d.a.createElement(B,{cliparts:a.clipArtData.data,language:l,addDesign:this.addDesign,loadMoreClipArt:this.loadMoreClipArt,error:e,loading:t,hasMore:this.hasMorePage,totalClip:this.props.clipartsByCat.clipArtData.total_records,showHideClipArt:this.state.activeView,activeView:this.state.activeView,perPage:this.clipInfo.perpage,catLoading:this.props.catLoading,isEmbroideryEnable:!!(this.props.selectedPrintProfileData&&this.props.selectedPrintProfileData.embroidery&&this.props.selectedPrintProfileData.embroidery.is_embroidery_enabled&&this.embAddons),selectedCatName:this.state.selectedCatName,backToCliparts:this.backToCliparts})):d.a.createElement(v,{error:e,loading:t,catLoading:this.props.catLoading,isEmbroideryEnable:!!(this.props.selectedPrintProfileData&&this.props.selectedPrintProfileData.embroidery&&this.props.selectedPrintProfileData.embroidery.is_embroidery_enabled&&this.embAddons)})}},{key:"showCatClipartList",value:function(e,t,a,l){return a&&a.clipArtData&&a.clipArtData.data?(a.clipArtData.records<this.clipByCatInfo.cat_perpage?this.hasMoreCatPage=!1:this.hasMoreCatPage=!0,d.a.createElement(v,{cliparts:a.clipArtData.data,language:l,addDesign:this.addDesign,loadMoreClipArt:this.loadMoreClipArtByCat,error:e,loading:t,hasMore:this.hasMoreCatPage,totalClip:this.props.cliparts.clipArtData.total_records,showHideClipArt:this.state.activeView,activeView:this.state.activeView,perPage:this.clipByCatInfo.cat_perpage,catLoading:this.props.catLoading,isEmbroideryEnable:!!(this.props.selectedPrintProfileData&&this.props.selectedPrintProfileData.embroidery&&this.props.selectedPrintProfileData.embroidery.is_embroidery_enabled&&this.embAddons),onMoreClicked:this.onMoreClicked})):d.a.createElement(v,{error:e,loading:t,catLoading:this.props.catLoading,isEmbroideryEnable:!!(this.props.selectedPrintProfileData&&this.props.selectedPrintProfileData.embroidery&&this.props.selectedPrintProfileData.embroidery.is_embroidery_enabled&&this.embAddons),language:l,cliparts:[]})}},{key:"render",value:function(){var e=this.props,t=e.error,a=e.loading,l=e.cliparts,i=e.clipCat,r=e.catLoading,s=e.catError,n=e.clipTag,o=e.tagLoading,c=e.tagError,m=e.language,h=e.clipartsByCat,g=e.filteredItemLoading,u=e.filteredItemError,f=e.filteredClipart;return d.a.createElement(p.Fragment,null,this.showClipArtsFilter(i,r,s,n,o,c),"ClipArts"===this.state.activeView&&this.showCatClipartList(t,a,l,m),"list"===this.state.activeView&&this.showClipArtView(t,a,h,m),"clipartFilter"===this.state.activeView&&this.showClipartFilterView(u,g,f,m),""===this.state.activeView&&this.addClipartColors())}}]),a}(d.a.Component),W=Object(m.b)((function(e){return{cliparts:e.clipart.items.filter((function(t){return t.printProfileId===e.printProfileReducer.selected_print_profile}))[0],loading:e.clipart.loading,error:e.clipart.error,clipCat:e.clipart.catItem.filter((function(t){return t.printProfileId===e.printProfileReducer.selected_print_profile}))[0],catLoading:e.clipart.catLoading,catError:e.clipart.catError,clipTag:e.clipart.tagItem,tagLoading:e.clipart.tagLoading,tagError:e.clipart.tagError,clipartsLoadStatus:e.clipart.clipartLoadStatus,categoryLoadStatus:e.clipart.categoryLoadStatus,tagLoadStatus:e.clipart.tagLoadStatus,pageNo:e.clipart.pageNo,language:e.languageReducer.translation_data.filter((function(t){return t.langCode===e.languageReducer.default_lang}))[0],canvasReducer:e.productCanvasReducer,printProfileReducer:e.printProfileReducer,allClipArt:e.clipart.items,allCatData:e.clipart.catItem,selectedPrintProfileData:e.printProfileReducer.print_profile_data.filter((function(t){return t.id===e.printProfileReducer.selected_print_profile}))[0],licenceAddOns:e.productCanvasReducer.licenceAddOns,clipartsByCat:e.clipart.itemsByCat.filter((function(t){return t.catId===e.clipart.selectedCatId}))[0],allCatClipArt:e.clipart.itemsByCat,filteredItemLoading:e.clipart.filteredItemLoading,filteredItemError:e.clipart.filteredItemError,filteredClipart:e.clipart.filteredClipart.filter((function(t){return t.printProfileId===e.printProfileReducer.selected_print_profile}))[0],allFilteredClipart:e.clipart.filteredClipart,colorList:0!==e.colorPaletteReducer.colorList.filter((function(t){return t.printProfileId===e.printProfileReducer.selected_print_profile})).length&&e.colorPaletteReducer.colorList.filter((function(t){return t.printProfileId===e.printProfileReducer.selected_print_profile}))[0].colorData?e.colorPaletteReducer.colorList.filter((function(t){return t.printProfileId===e.printProfileReducer.selected_print_profile}))[0].colorData:[]}}))(H);a.d(t,"default",(function(){return W}))}}]);