/*! For license information please see main.ec38534a.chunk.js.LICENSE.txt */
(this["webpackJsonpinkxe10-designer"]=this["webpackJsonpinkxe10-designer"]||[]).push([[16],{101:function(e,t,a){"use strict";a.d(t,"g",(function(){return S})),a.d(t,"d",(function(){return k})),a.d(t,"c",(function(){return N})),a.d(t,"f",(function(){return z})),a.d(t,"a",(function(){return J})),a.d(t,"b",(function(){return Z})),a.d(t,"e",(function(){return K}));var r,n,i,o,s,l=a(10),c=a(11),u=a(7),d=a(22),p=a.n(d),m=(a(142),a(8)),h=a(32),g=a(40),f=a(41),v=a(18),b=a(2),A=a(28),y=p.a,_={2:["x","y"],4:["x","y"],6:["x","y","x1","y1","x2","y2"],8:["x","y","x1","y1"],10:["x","y","r1","r2","angle","largeArcFlag","sweepFlag"],12:["x"],14:["y"],16:["x","y","x2","y2"],18:["x","y"]},E={},S=function(e){Object.assign(E,e.ui)},C=[],x=!0,w={},k=null,I=null,N=function(e){I=e,C=[0,"ClosePath"];y.each(["Moveto","Lineto","CurvetoCubic","CurvetoQuadratic","Arc","LinetoHorizontal","LinetoVertical","CurvetoCubicSmooth","CurvetoQuadraticSmooth"],(function(e,t){C.push(t+"Abs"),C.push(t+"Rel")}))},O=function(e,t,a){var r=e.pathSegList;if(Object(A.m)())r.insertItemBefore(t,a);else{for(var n=r.numberOfItems,i=[],o=0;o<n;o++){var s=r.getItem(o);i.push(s)}r.clear();for(var l=0;l<n;l++)l===a&&r.appendItem(t),r.appendItem(i[l])}},P=function(e,t){return _[e].map((function(e){return t[e]}))},D=function(e,t){var a=e.path,r={x:t?t.x:e.item.x,y:t?t.y:e.item.y};a.matrix&&(r=Object(v.i)(r.x,r.y,a.matrix));var n=I.getCurrentZoom();return r.x*=n,r.y*=n,r},R=function(e,t){var a={x:e.x,y:e.y};t.matrix&&(e=Object(v.i)(a.x,a.y,t.imatrix),a.x=e.x,a.y=e.y);var r=I.getCurrentZoom();return a.x/=r,a.y/=r,a},T=function(e,t,a){var r=L(),n=Object(b.n)("pathpointgrip_"+e);if(!n){n=document.createElementNS(m.a.SVG,"circle");var i={id:"pathpointgrip_"+e,display:"none",r:4,fill:"#0FF",stroke:"#00F","stroke-width":2,cursor:"move",style:"pointer-events:all"};"pathNodeTooltip"in E&&(i["xlink:title"]=E.pathNodeTooltip),Object(b.a)(n,i),n=r.appendChild(n),y("#pathpointgrip_"+e).dblclick((function(){k&&k.setSegType()}))}return t&&a&&Object(b.a)(n,{cx:t,cy:a,display:"inline"}),n},L=function(){var e=Object(b.n)("pathpointgrip_container");e||((e=Object(b.n)("selectorParentGroup").appendChild(document.createElementNS(m.a.SVG,"g"))).id="pathpointgrip_container");return e},M=function(e){var t=Object(b.n)("ctrlpointgrip_"+e);if(t)return t;t=document.createElementNS(m.a.SVG,"circle");var a={id:"ctrlpointgrip_"+e,display:"none",r:4,fill:"#0FF",stroke:"#55F","stroke-width":1,cursor:"move",style:"pointer-events:all"};return"pathCtrlPtTooltip"in E&&(a["xlink:title"]=E.pathCtrlPtTooltip),Object(b.a)(t,a),L().append(t),t},B=function(e){var t=Object(b.n)("ctrlLine_"+e);return t||(t=document.createElementNS(m.a.SVG,"line"),Object(b.a)(t,{id:"ctrlLine_"+e,stroke:"#555","stroke-width":1,style:"pointer-events:none"}),L().append(t),t)},j=function(e){var t=e.item,a=e.index;if(!("x1"in t)||!("x2"in t))return null;var r={};L();for(var n=[k.segs[a-1].item,t],i=1;i<3;i++){var o=a+"c"+i,s=r["c"+i+"_line"]=B(o),l=D(e,{x:t["x"+i],y:t["y"+i]}),c=D(e,{x:n[i-1].x,y:n[i-1].y});Object(b.a)(s,{x1:l.x,y1:l.y,x2:c.x,y2:c.y,display:"inline"}),r["c"+i+"_line"]=s;var u=r["c"+i]=M(o);Object(b.a)(u,{cx:l.x,cy:l.y,display:"inline"}),r["c"+i]=u}return r},F=function(e,t,a,r){var n=r||k.elem,i=n["createSVGPathSeg"+C[e]].apply(n,Object(u.a)(a));if(Object(A.n)())n.pathSegList.replaceItem(i,t);else{for(var o=n.pathSegList,s=o.numberOfItems,l=[],c=0;c<s;c++){var d=o.getItem(c);l.push(d)}o.clear();for(var p=0;p<s;p++)p===t?o.appendItem(i):o.appendItem(l[p])}},U=function(e,t){var a=e.index,r=Object(b.n)("segline_"+a);if(!r){var n=L();r=document.createElementNS(m.a.SVG,"path"),Object(b.a)(r,{id:"segline_"+a,display:"none",fill:"none",stroke:"#0FF","stroke-width":2,style:"pointer-events:none",d:"M0,0 0,0"}),n.append(r)}if(t){var i=e.prev;if(!i)return r.setAttribute("display","none"),r;var o=D(i);F(2,0,[o.x,o.y],r);for(var s=P(e.type,e.item),l=0;l<s.length;l+=2){var c=D(e,{x:s[l],y:s[l+1]});s[l]=c.x,s[l+1]=c.y}F(e.type,1,s,r)}return r},V=function(e,t,a){var r=e.x-a.x,n=e.y-a.y,i=t.x-a.x,o=t.y-a.y;if((0!==r||0!==n)&&(0!==i||0!==o)){var s=Math.sqrt(r*r+n*n),l=Math.sqrt(i*i+o*o),c=I.getSVGRoot().createSVGPoint(),u=I.getSVGRoot().createSVGPoint(),d=Math.atan2(n,r),p=Math.atan2(o,i);d<0&&(d+=2*Math.PI),p<0&&(p+=2*Math.PI);var m,h,g=Math.abs(d-p),f=Math.abs(Math.PI-g)/2;return d-p>0?(m=g<Math.PI?d+f:d-f,h=g<Math.PI?p-f:p+f):(m=g<Math.PI?d-f:d+f,h=g<Math.PI?p+f:p-f),c.x=s*Math.cos(m)+a.x,c.y=s*Math.sin(m)+a.y,u.x=l*Math.cos(h)+a.x,u.y=l*Math.sin(h)+a.y,[c,u]}},G=function(){function e(t,a){Object(l.a)(this,e),this.selected=!1,this.index=t,this.item=a,this.type=a.pathSegType,this.ctrlpts=[],this.ptgrip=null,this.segsel=null}return Object(c.a)(e,[{key:"showCtrlPts",value:function(e){for(var t in this.ctrlpts)({}).hasOwnProperty.call(this.ctrlpts,t)&&this.ctrlpts[t].setAttribute("display",e?"inline":"none")}},{key:"selectCtrls",value:function(e){y("#ctrlpointgrip_"+this.index+"c1, #ctrlpointgrip_"+this.index+"c2").attr("fill",e?"#0FF":"#EEE")}},{key:"show",value:function(e){this.ptgrip&&(this.ptgrip.setAttribute("display",e?"inline":"none"),this.segsel.setAttribute("display",e?"inline":"none"),this.showCtrlPts(e))}},{key:"select",value:function(e){this.ptgrip&&(this.ptgrip.setAttribute("stroke",e?"#0FF":"#00F"),this.segsel.setAttribute("display",e?"inline":"none"),this.ctrlpts&&this.selectCtrls(e),this.selected=e)}},{key:"addGrip",value:function(){this.ptgrip=function(e,t){var a=e.index,r=T(a);if(t){var n=D(e);Object(b.a)(r,{cx:n.x,cy:n.y,display:"inline"})}return r}(this,!0),this.ctrlpts=j(this),this.segsel=U(this,!0)}},{key:"update",value:function(e){if(this.ptgrip){var t=D(this);Object(b.a)(this.ptgrip,{cx:t.x,cy:t.y}),U(this,!0),this.ctrlpts&&(e&&(this.item=k.elem.pathSegList.getItem(this.index),this.type=this.item.pathSegType),j(this))}}},{key:"move",value:function(e,t){var a=this.item,r=this.ctrlpts?[a.x+=e,a.y+=t,a.x1,a.y1,a.x2+=e,a.y2+=t]:[a.x+=e,a.y+=t];if(F(this.type,this.index,10===this.type?P(this.type,a):r),this.next&&this.next.ctrlpts){var n=this.next.item,i=[n.x,n.y,n.x1+=e,n.y1+=t,n.x2,n.y2];F(this.next.type,this.next.index,i)}if(this.mate){var o=this.mate.item,s=[o.x+=e,o.y+=t];F(this.mate.type,this.mate.index,s)}this.update(!0),this.next&&this.next.update(!0)}},{key:"setLinked",value:function(e){var t,a,r;if(2===e){if(a=1,!(t=this.next))return;r=this.item}else{if(a=2,!(t=this.prev))return;r=t.item}var n=t.item;n["x"+a]=r.x+(r.x-this.item["x"+e]),n["y"+a]=r.y+(r.y-this.item["y"+e]);var i=[n.x,n.y,n.x1,n.y1,n.x2,n.y2];F(t.type,t.index,i),t.update(!0)}},{key:"moveCtrl",value:function(e,t,a){var r=this.item;r["x"+e]+=t,r["y"+e]+=a;var n=[r.x,r.y,r.x1,r.y1,r.x2,r.y2];F(this.type,this.index,n),this.update(!0)}},{key:"setType",value:function(e,t){F(e,this.index,t),this.type=e,this.item=k.elem.pathSegList.getItem(this.index),this.showCtrlPts(6===e),this.ctrlpts=j(this),this.update(!0)}}]),e}(),q=function(){function e(t){if(Object(l.a)(this,e),!t||"path"!==t.tagName)throw new Error("svgedit.path.Path constructed without a <path> element");this.elem=t,this.segs=[],this.selected_pts=[],k=this,this.init()}return Object(c.a)(e,[{key:"init",value:function(){y(L()).find("*").each((function(){y(this).attr("display","none")}));var e=this.elem.pathSegList,t=e.numberOfItems;this.segs=[],this.selected_pts=[],this.first_seg=null;for(var a=0;a<t;a++){var r=e.getItem(a),n=new G(a,r);n.path=this,this.segs.push(n)}for(var i=this.segs,o=null,s=0;s<t;s++){var l=i[s],c=s+1>=t?null:i[s+1],u=s-1<0?null:i[s-1];if(2===l.type){if(u&&1!==u.type){var d=i[o];d.next=i[o+1],d.next.prev=d,d.addGrip()}o=s}else if(c&&1===c.type)l.next=i[o+1],l.next.prev=l,l.mate=i[o],l.addGrip(),Object(b.x)(this.first_seg)&&(this.first_seg=l);else if(c)1!==l.type&&(l.addGrip(),c&&2!==c.type&&(l.next=c,l.next.prev=l));else if(1!==l.type){var p=i[o];p.next=i[o+1],p.next.prev=p,p.addGrip(),l.addGrip(),this.first_seg||(this.first_seg=i[o])}}return this}},{key:"eachSeg",value:function(e){for(var t=this.segs.length,a=0;a<t;a++){if(!1===e.call(this.segs[a],a))break}}},{key:"addSeg",value:function(e){var t=this.segs[e];if(t.prev){var a,r,n,i=t.prev;switch(t.item.pathSegType){case 4:r=(t.item.x+i.item.x)/2,n=(t.item.y+i.item.y)/2,a=this.elem.createSVGPathSegLinetoAbs(r,n);break;case 6:var o=(i.item.x+t.item.x1)/2,s=(t.item.x1+t.item.x2)/2,l=(t.item.x2+t.item.x)/2,c=(o+s)/2,u=(s+l)/2;r=(c+u)/2;var d=(i.item.y+t.item.y1)/2,p=(t.item.y1+t.item.y2)/2,m=(t.item.y2+t.item.y)/2,h=(d+p)/2,g=(p+m)/2;n=(h+g)/2,a=this.elem.createSVGPathSegCurvetoCubicAbs(r,n,o,d,c,h);var f=[t.item.x,t.item.y,u,g,l,m];F(t.type,e,f)}O(this.elem,a,e)}}},{key:"deleteSeg",value:function(e){var t=this.segs[e],a=this.elem.pathSegList;t.show(!1);var r=t.next;if(t.mate){var n=[r.item.x,r.item.y];F(2,r.index,n),F(4,t.index,n),a.removeItem(t.mate.index)}else if(t.prev)a.removeItem(e);else{var i=[r.item.x,r.item.y];F(2,t.next.index,i),a.removeItem(e)}}},{key:"removePtFromSelection",value:function(e){var t=this.selected_pts.indexOf(e);-1!==t&&(this.segs[e].select(!1),this.selected_pts.splice(t,1))}},{key:"clearSelection",value:function(){this.eachSeg((function(){this.select(!1)})),this.selected_pts=[]}},{key:"storeD",value:function(){this.last_d=this.elem.getAttribute("d")}},{key:"show",value:function(e){return this.eachSeg((function(){this.show(e)})),e&&this.selectPt(this.first_seg.index),this}},{key:"movePts",value:function(e,t){for(var a=this.selected_pts.length;a--;){this.segs[this.selected_pts[a]].move(e,t)}}},{key:"moveCtrl",value:function(e,t){var a=this.segs[this.selected_pts[0]];a.moveCtrl(this.dragctrl,e,t),x&&a.setLinked(this.dragctrl)}},{key:"setSegType",value:function(e){this.storeD();for(var t,a=this.selected_pts.length;a--;){var r=this.selected_pts[a],n=this.segs[r],i=n.prev;if(i){if(!e)t="Toggle Path Segment Type",e=6===n.type?4:6;e=Number(e);var o=n.item.x,s=n.item.y,l=i.item.x,c=i.item.y,u=void 0;switch(e){case 6:if(n.olditem){var d=n.olditem;u=[o,s,d.x1,d.y1,d.x2,d.y2]}else{var p=o-l,m=s-c;u=[o,s,l+p/3,c+m/3,o-p/3,s-m/3]}break;case 4:u=[o,s],n.olditem=n.item}n.setType(e,u)}}k.endChanges(t)}},{key:"selectPt",value:function(e,t){this.clearSelection(),Object(b.x)(e)&&this.eachSeg((function(t){this.prev&&(e=t)})),this.addPtsToSelection(e),t&&(this.dragctrl=t,x&&this.segs[e].setLinked(t))}},{key:"update",value:function(){var e=this.elem;return Object(b.r)(e)?(this.matrix=Object(v.a)(e),this.imatrix=this.matrix.inverse()):(this.matrix=null,this.imatrix=null),this.eachSeg((function(t){this.item=e.pathSegList.getItem(t),this.update()})),this}},{key:"endChanges",value:function(e){Object(A.g)()&&I.resetD(this.elem);var t=new f.ChangeElementCommand(this.elem,{d:this.last_d},e);I.endChanges({cmd:t,elem:this.elem})}},{key:"addPtsToSelection",value:function(t){var a=this;Array.isArray(t)||(t=[t]),t.forEach((function(e){a.segs[e].ptgrip&&!a.selected_pts.includes(e)&&e>=0&&a.selected_pts.push(e)})),this.selected_pts.sort();var r=this.selected_pts.length,n=[];for(n.length=r;r--;){var i=this.selected_pts[r],o=this.segs[i];o.select(!0),n[r]=o.ptgrip}var s=e.subpathIsClosed(this.selected_pts[0]);I.addPtsToSelection({grips:n,closedSubpath:s})}}],[{key:"subpathIsClosed",value:function(e){var t=!1;return k.eachSeg((function(a){return a<=e||2!==this.type&&(1!==this.type||(t=!0,!1))})),t}}]),e}(),H=function(e){var t=w[e.id];return t||(t=w[e.id]=new q(e)),t},z=function(e){e in w&&delete w[e]},W=function(e,t){var a=e-i,l=t-o,c=Math.sqrt(a*a+l*l),u=Math.atan2(l,a)+s;return a=c*Math.cos(u)+i,l=c*Math.sin(u)+o,a-=r,l-=n,c=Math.sqrt(a*a+l*l),u=Math.atan2(l,a)-s,{x:c*Math.cos(u)+r,y:c*Math.sin(u)+n}},Q=function(){var e=k.elem;if(s=Object(b.r)(e,!0)){var t=k.oldbbox;i=t.x+t.width/2,o=t.y+t.height/2;var a=Object(b.l)(e);r=a.x+a.width/2,n=a.y+a.height/2;var l=r-i,c=n-o,u=Math.sqrt(l*l+c*c),d=Math.atan2(c,l)+s;r=u*Math.cos(d)+i,n=u*Math.sin(d)+o;for(var p=e.pathSegList,m=p.numberOfItems;m;){m-=1;var g=p.getItem(m),f=g.pathSegType;if(1!==f){var v=W(g.x,g.y),A=[v.x,v.y];if(!Object(b.x)(g.x1)&&!Object(b.x)(g.x2)){var y=W(g.x1,g.y1),_=W(g.x2,g.y2);A.splice(A.length,0,y.x,y.y,_.x,_.y)}F(f,m,A)}}Object(b.l)(e);var E=I.getSVGRoot().createSVGTransform(),S=Object(h.b)(e);E.setRotate(180*s/Math.PI,r,n),S.replaceItem(E,0)}},J=function(){w={}},Y=[0,"z","M","m","L","l","C","c","Q","q","A","a","H","h","V","v","S","s","T","t"],Z=function(e,t){for(var a=e.pathSegList,r=a.numberOfItems,n=0,i=0,o="",s=null,l=0;l<r;++l){var c=a.getItem(l),u=c.x||0,d=c.y||0,p=c.x1||0,m=c.y1||0,h=c.x2||0,g=c.y2||0,f=c.pathSegType,v=Y[f]["to"+(t?"Lower":"Upper")+"Case"]();switch(f){case 1:o+="z",s&&!t&&(n=s[0],i=s[1]);break;case 12:u-=n;case 13:t?(n+=u,v="l"):(n=u+=n,v="L"),o+=X(v,[[u,i]]);break;case 14:d-=i;case 15:t?(i+=d,v="l"):(i=d+=i,v="L"),o+=X(v,[[n,d]]);break;case 2:case 4:case 18:u-=n,d-=i;case 5:case 3:case 19:t?(n+=u,i+=d):(n=u+=n,i=d+=i),2!==f&&3!==f||(s=[n,i]),o+=X(v,[[u,d]]);break;case 6:u-=n,p-=n,h-=n,d-=i,m-=i,g-=i;case 7:t?(n+=u,i+=d):(p+=n,h+=n,m+=i,g+=i,n=u+=n,i=d+=i),o+=X(v,[[p,m],[h,g],[u,d]]);break;case 8:u-=n,p-=n,d-=i,m-=i;case 9:t?(n+=u,i+=d):(p+=n,m+=i,n=u+=n,i=d+=i),o+=X(v,[[p,m],[u,d]]);break;case 10:u-=n,d-=i;case 11:t?(n+=u,i+=d):(n=u+=n,i=d+=i),o+=X(v,[[c.r1,c.r2]],[c.angle,c.largeArcFlag?1:0,c.sweepFlag?1:0],[u,d]);break;case 16:u-=n,h-=n,d-=i,g-=i;case 17:t?(n+=u,i+=d):(h+=n,g+=i,n=u+=n,i=d+=i),o+=X(v,[[h,g],[u,d]])}}return o};function X(e,t,a,r){y.each(t,(function(e,a){t[e]=Object(g.g)(a)}));var n=e+t.join(" ");return a&&(n+=" "+a.join(" ")),r&&(n+=" "+Object(g.g)(r)),n}var K=function(){var e,t,a=!1,r=null,n=!1;return{mouseDown:function(t,r,n,i){var o;if("path"!==I.getCurrentMode()){if(k){var s;if(k.storeD(),"pathpointgrip_"===(o=t.target.id).substr(0,14)){s=k.cur_pt=parseInt(o.substr(14)),k.dragging=[n,i];var l=k.segs[s];t.shiftKey?l.selected?k.removePtFromSelection(s):k.addPtsToSelection(s):((k.selected_pts.length<=1||!l.selected)&&k.clearSelection(),k.addPtsToSelection(s))}else if(o.startsWith("ctrlpointgrip_")){k.dragging=[n,i];var c=o.split("_")[1].split("c");s=Number(c[0]);var u=Number(c[1]);k.selectPt(s,u)}if(!k.dragging){var d=I.getRubberBox();Object(b.x)(d)&&(d=I.setRubberBox(I.selectorManager.getRubberBandBox()));p=I.getCurrentZoom();Object(b.a)(d,{x:n*p,y:i*p,width:0,height:0,display:"inline"},100)}}}else{var p,h=n,g=i,f=h/(p=I.getCurrentZoom()),A=g/p,_=Object(b.n)("path_stretch_line");e=[f,A],I.getGridSnapping()&&(f=Object(b.B)(f),A=Object(b.B)(A),h=Object(b.B)(h),g=Object(b.B)(g)),_||(_=document.createElementNS(m.a.SVG,"path"),Object(b.a)(_,{id:"path_stretch_line",stroke:"#22C","stroke-width":"0.5",fill:"none"}),_=Object(b.n)("selectorParentGroup").appendChild(_)),_.setAttribute("display","inline");var E,S=I.getDrawnPath();if(S){for(var C=S.pathSegList,x=C.numberOfItems,w=6/p,O=!1;x;){x--;var P=C.getItem(x),D=P.x,R=P.y;if(f>=D-w&&f<=D+w&&A>=R-w&&A<=R+w){O=!0;break}}o=I.getId(),z(o);var L,M,B=Object(b.n)(o),j=C.numberOfItems;if(O){if(x<=1&&j>=2){var F=C.getItem(0).x,U=C.getItem(0).y;L=4===(M=_.pathSegList.getItem(1)).pathSegType?S.createSVGPathSegLinetoAbs(F,U):S.createSVGPathSegCurvetoCubicAbs(F,U,M.x1/p,M.y1/p,F,U);var V=S.createSVGPathSegClosePath();C.appendItem(L),C.appendItem(V)}else if(j<3)return!1;if(y(_).remove(),I.setDrawnPath(null),I.setStarted(!1),a){k.matrix&&I.remapElement(B,{},k.matrix.inverse());var G=B.getAttribute("d"),q=y(k.elem).attr("d");return y(k.elem).attr("d",q+G),y(B).remove(),k.matrix&&Q(),N(),K.toEditMode(k.elem),k.selectPt(),!1}}else{if(!y.contains(I.getContainer(),I.getMouseTarget(t)))return!1;var H=S.pathSegList.numberOfItems,W=S.pathSegList.getItem(H-1),J=W.x,Y=W.y;if(t.shiftKey){var Z=Object(v.f)(J,Y,f,A);f=Z.x,A=Z.y}L=4===(M=_.pathSegList.getItem(1)).pathSegType?S.createSVGPathSegLinetoAbs(I.round(f),I.round(A)):S.createSVGPathSegCurvetoCubicAbs(I.round(f),I.round(A),M.x1/p,M.y1/p,M.x2/p,M.y2/p),S.pathSegList.appendItem(L),f*=p,A*=p,_.setAttribute("d",["M",f,A,f,A].join(" ")),E=H,a&&(E+=k.segs.length),T(E,f,A)}}else{var X="M"+f+","+A+" ";I.setDrawnPath(I.addSVGElementFromJson({element:"path",curStyles:!0,attr:{d:X,id:I.getNextId(),type:"penDrawing",opacity:I.getOpacity()/2}})),_.setAttribute("d",["M",h,g,h,g].join(" ")),E=a?k.segs.length:0,T(E,h,g)}}},mouseMove:function(a,r){var i=I.getCurrentZoom();n=!0;var o=I.getDrawnPath();if("path"!==I.getCurrentMode())if(k.dragging){var s=R({x:k.dragging[0],y:k.dragging[1]},k),l=R({x:a,y:r},k),c=l.x-s.x,u=l.y-s.y;k.dragging=[a,r],k.dragctrl?k.moveCtrl(c,u):k.movePts(c,u)}else k.selected_pts=[],k.eachSeg((function(e){if(this.next||this.prev){var t=I.getRubberBox().getBBox(),a=D(this),r={x:a.x,y:a.y,width:0,height:0},n=Object(v.e)(t,r);this.select(n),n&&k.selected_pts.push(this.index)}}));else{if(!o)return;var d=o.pathSegList,p=d.numberOfItems-1;if(e){var m=M("1c1"),h=M("0c2");m.setAttribute("cx",a),m.setAttribute("cy",r),m.setAttribute("display","inline");var g=e[0],f=e[1],A=g+(g-a/i),y=f+(f-r/i);h.setAttribute("cx",A*i),h.setAttribute("cy",y*i),h.setAttribute("display","inline");var _=B(1);if(Object(b.a)(_,{x1:a,y1:r,x2:A*i,y2:y*i,display:"inline"}),0===p)t=[a,r];else{var E=d.getItem(p-1),S=E.x,C=E.y;6===E.pathSegType?(S+=S-E.x2,C+=C-E.y2):t&&(S=t[0]/i,C=t[1]/i),F(6,p,[g,f,S,C,A,y],o)}}else{var x=Object(b.n)("path_stretch_line");if(x){var w=d.getItem(p);if(6===w.pathSegType){var N=w.x+(w.x-w.x2),O=w.y+(w.y-w.y2);F(6,1,[a,r,N*i,O*i,a,r],x)}else t?F(6,1,[a,r,t[0],t[1],a,r],x):F(4,1,[a,r],x)}}}},mouseUp:function(a,r,i,o){var s=I.getDrawnPath();if("path"===I.getCurrentMode())return e=null,s||(r=Object(b.n)(I.getId()),I.setStarted(!1),t=null),{keep:!0,element:r};var l=I.getRubberBox();if(k.dragging){var c=k.cur_pt;k.dragging=!1,k.dragctrl=!1,k.update(),n&&k.endChanges("Move path point(s)"),a.shiftKey||n||k.selectPt(c)}else l&&"none"!==l.getAttribute("display")?(l.setAttribute("display","none"),l.getAttribute("width")<=2&&l.getAttribute("height")<=2&&K.toSelectMode(a.target)):K.toSelectMode(a.target);n=!1},toEditMode:function(e){k=H(e),I.setCurrentMode("pathedit"),I.clearSelection(),k.show(!0).update(),k.oldbbox=Object(b.l)(k.elem),a=!1},toSelectMode:function(e){var t=e===k.elem;I.setCurrentMode("select"),k.show(!1),r=!1,I.clearSelection(),k.matrix&&Q(),t&&(I.call("selected",[e]),I.addToSelection([e],!0))},addSubPath:function(e){e?(I.setCurrentMode("path"),a=!0):(K.clear(!0),K.toEditMode(k.elem))},select:function(e){r===e?(K.toEditMode(e),I.setCurrentMode("pathedit")):r=e},reorient:function(){var e=I.getSelectedElements()[0];if(e&&0!==Object(b.r)(e)){var t=new f.BatchCommand("Reorient path"),a={d:e.getAttribute("d"),transform:e.getAttribute("transform")};t.addSubCommand(new f.ChangeElementCommand(e,a)),I.clearSelection(),this.resetOrientation(e),I.addCommandToHistory(t),H(e).show(!1).matrix=null,this.clear(),I.addToSelection([e],!0),I.call("changed",I.getSelectedElements())}},clear:function(e){var a=I.getDrawnPath();if(r=null,a){var n=Object(b.n)(I.getId());y(Object(b.n)("path_stretch_line")).remove(),y(n).remove(),y(Object(b.n)("pathpointgrip_container")).find("*").attr("display","none"),t=null,I.setDrawnPath(null),I.setStarted(!1)}else"pathedit"===I.getCurrentMode()&&this.toSelectMode();k&&k.init().show(!1)},resetOrientation:function(e){if(Object(b.x)(e)||"path"!==e.nodeName)return!1;var t=Object(h.b)(e),a=Object(v.h)(t).matrix;t.clear(),e.removeAttribute("transform");for(var r=e.pathSegList,n=r.numberOfItems,i=function(t){var n=r.getItem(t),i=n.pathSegType;if(1===i)return"continue";var o=[];y.each(["",1,2],(function(e,t){var r=n["x"+t],i=n["y"+t];if(void 0!==r&&void 0!==i){var s=Object(v.i)(r,i,a);o.splice(o.length,0,s.x,s.y)}})),F(i,t,o,e)},o=0;o<n;++o)i(o);!function(e,t){for(var a=Object(b.l)(e),r=0;r<2;r++){var n=0===r?"fill":"stroke",i=e.getAttribute(n);if(i&&i.startsWith("url(")){var o=Object(b.q)(i);if("linearGradient"===o.tagName){var s=o.getAttribute("x1")||0,l=o.getAttribute("y1")||0,c=o.getAttribute("x2")||1,u=o.getAttribute("y2")||0;s=a.width*s+a.x,l=a.height*l+a.y,c=a.width*c+a.x,u=a.height*u+a.y;var d=Object(v.i)(s,l,t),p=Object(v.i)(c,u,t),m={x1:(d.x-a.x)/a.width,y1:(d.y-a.y)/a.height,x2:(p.x-a.x)/a.width,y2:(p.y-a.y)/a.height},h=o.cloneNode(!0);y(h).attr(m),h.id=I.getNextId(),Object(b.k)().append(h),e.setAttribute(n,"url(#"+h.id+")")}}}}(e,a)},zoomChange:function(){"pathedit"===I.getCurrentMode()&&k.update()},getNodePoint:function(){var e=k.selected_pts.length?k.selected_pts[0]:1,t=k.segs[e];return{x:t.item.x,y:t.item.y,type:t.type}},linkControlPoints:function(e){x=e},clonePathNode:function(){k.storeD();for(var e=k.selected_pts,t=e.length,a=[];t--;){var r=e[t];k.addSeg(r),a.push(r+t),a.push(r+t+1)}k.init().addPtsToSelection(a),k.endChanges("Clone path node(s)")},opencloseSubPath:function(){var e=k.selected_pts;if(1===e.length){var t,a,r=k.elem,n=r.pathSegList,i=e[0],o=null,s=null;if(k.eachSeg((function(e){return 2===this.type&&e<=i&&(s=this.item),e<=i||(2===this.type?(o=e,!1):1!==this.type||(o=!1,!1))})),Object(b.x)(o)&&(o=k.segs.length-1),!1!==o){var l=r.createSVGPathSegLinetoAbs(s.x,s.y),c=r.createSVGPathSegClosePath();return o===k.segs.length-1?(n.appendItem(l),n.appendItem(c)):(O(r,c,o),O(r,l,o)),void k.init().selectPt(o+1)}if(k.segs[i].mate)return n.removeItem(i),n.removeItem(i),void k.init().selectPt(i-1);for(var u=0;u<n.numberOfItems;u++){var d=n.getItem(u);if(2===d.pathSegType)t=u;else if(u===i)n.removeItem(t);else if(1===d.pathSegType&&i<u){a=u-1,n.removeItem(u);break}}for(var p=i-t-1;p--;)O(r,n.getItem(t),a);var m=n.getItem(t);F(2,t,[m.x,m.y]),k.init().selectPt(0)}},deletePathNode:function(){if(K.canDeleteNodes){k.storeD();for(var e=k.selected_pts,t=e.length;t--;){var a=e[t];k.deleteSeg(a)}if(function e(){var t=k.elem.pathSegList,a=t.numberOfItems,r=function(e,a){for(;a--;)t.removeItem(e)};if(a<=1)return!0;for(;a--;){var n=t.getItem(a);if(1===n.pathSegType){var i=t.getItem(a-1),o=t.getItem(a-2);if(2===i.pathSegType){r(a-1,2),e();break}if(2===o.pathSegType){r(a-2,3),e();break}}else if(2===n.pathSegType&&a>0){var s=t.getItem(a-1).pathSegType;if(2===s){r(a-1,1),e();break}if(1===s&&t.numberOfItems-1===a){r(a,1),e();break}}}return!1}(),k.elem.pathSegList.numberOfItems<=1)return K.toSelectMode(k.elem),void I.canvas.deleteSelectedElements();if(k.init(),k.clearSelection(),window.opera){var r=y(k.elem);r.attr("d",r.attr("d"))}k.endChanges("Delete path node(s)")}},smoothPolylineIntoPath:function(e){var t,a=e.points,r=a.numberOfItems;if(r>=4){var n=a.getItem(0),i=null,o=[];for(o.push(["M",n.x,",",n.y," C"].join("")),t=1;t<=r-4;t+=3){var s=a.getItem(t),l=a.getItem(t+1),c=a.getItem(t+2);if(i){var u=V(i,s,n);if(u&&2===u.length){var d=o[o.length-1].split(",");d[2]=u[0].x,d[3]=u[0].y,o[o.length-1]=d.join(","),s=u[1]}}o.push([s.x,s.y,l.x,l.y,c.x,c.y].join(",")),n=c,i=l}for(o.push("L");t<r;){var p=a.getItem(t);o.push([p.x,p.y].join(",")),t++}o=o.join(" "),e=I.addSVGElementFromJson({element:"path",curStyles:!0,attr:{id:I.getId(),d:o,fill:"none"}})}return e},setSegType:function(e){k.setSegType(e)},moveNode:function(e,t){var a=k.selected_pts;if(a.length){k.storeD();var r=k.segs[a[0]],n={x:0,y:0};n[e]=t-r.item[e],r.move(n.x,n.y),k.endChanges("Move path point")}},fixEnd:function(e){for(var t,a=e.pathSegList,r=a.numberOfItems,n=0;n<r;++n){var i=a.getItem(n);if(2===i.pathSegType&&(t=i),1===i.pathSegType){var o=a.getItem(n-1);if(o.x!==t.x||o.y!==t.y){var s=e.createSVGPathSegLinetoAbs(t.x,t.y);O(e,s,n),K.fixEnd(e);break}}}Object(A.g)()&&I.resetD(e)},convertPath:Z}}()},106:function(e,t,a){"use strict";a.d(t,"e",(function(){return n})),a.d(t,"f",(function(){return i})),a.d(t,"a",(function(){return o})),a.d(t,"c",(function(){return s})),a.d(t,"b",(function(){return l})),a.d(t,"d",(function(){return c}));var r=a(27);function n(){arguments.length>0&&void 0!==arguments[0]&&arguments[0],arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(e){return e(u()),r.f().then((function(t){void 0===t.cart.tier_price&&(t.cart.tier_price={},t.cart.tier_price.is_enabled=!1,t.cart.tier_price.discount_display="sentence",t.cart.tier_price.savings_display="number"),void 0===t.cart.stock&&(t.cart.stock={},t.cart.stock.is_displayed=!1),e(d(t))})).catch((function(t){return e(p(t))}))}}function i(e){return function(t){t(m(e))}}var o="FETCH_GLOBAL_SETTINGS_BEGIN",s="FETCH_GLOBAL_SETTINGS_SUCCESS",l="FETCH_GLOBAL_SETTINGS_FAILURE",c="SET_GLOBAL_STORE_ID",u=function(){return{type:o}},d=function(e){return{type:s,payload:e}},p=function(e){return{type:l,payload:e}},m=function(e){return{type:c,payload:e}}},108:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var r=a(36);function n(e){var t=e.fn.attr;return e.fn.attr=function(e,a){var n=this.length;if(!n)return t.call(this,e,a);for(var i=0;i<n;++i){var o=this[i];if("http://www.w3.org/2000/svg"!==o.namespaceURI)return t.call(this,e,a);if(void 0!==a)o.setAttribute(e,a);else if(Array.isArray(e)){for(var s={},l=e.length;l--;){var c=e[l],u=o.getAttribute(c);(u||"0"===u)&&(u=isNaN(u)?u:u-0),s[c]=u}return s}if("object"!==typeof e){var d=o.getAttribute(e);return(d||"0"===d)&&(d=isNaN(d)?d:d-0),d}for(var p=0,m=Object.entries(e);p<m.length;p++){var h=Object(r.a)(m[p],2),g=h[0],f=h[1];o.setAttribute(g,f)}}return this},e}},111:function(e,t,a){"use strict";var r=a(7),n=a(10),i=a(11),o=a(13),s=a(16),l=a(15),c=a(0),u=a.n(c),d=(a(453),a(877)),p=a(134),m=a.n(p),h=a(4),g=a(256),f=function(e){Object(s.a)(a,e);var t=Object(l.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).onColorChange=function(e){r.setState({cmykObj:r.rgbToCmyk(e.rgb.r,e.rgb.g,e.rgb.b)},(function(){r.cmykObj=r.state.cmykObj})),r.props.onChange(e),r.updateStatus=!0},r.updateCmykVal=function(e,t){r.updateStatus=!1;var a;if(e.target.validity.valid&&/^([0-9]{0,3})+(\.([0-9]{1,4})?)?$/.test(e.target.value)){a=e.target.value,a=isNaN(a)?0:a,r.cmykObj=r.state.cmykObj,r.cmykObj[t]=a,r.setState((function(e){return{cmykObj:Object(h.a)({},e.cmykObj,{type:a})}}));var n=r.cmykToHex(Number(r.cmykObj.c),Number(r.cmykObj.m),Number(r.cmykObj.y),Number(r.cmykObj.k));r.props.setColor(n),setTimeout((function(){r.updateStatus=!0}),2e3)}},r.rgbToCmyk=function(e,t,a){var r=1-e/255,n=1-t/255,i=1-a/255,o=Math.min(r,Math.min(n,i));return r=(r-o)/(1-o),n=(n-o)/(1-o),i=(i-o)/(1-o),r=Math.round(1e4*r)/100,n=Math.round(1e4*n)/100,i=Math.round(1e4*i)/100,o=Math.round(1e4*o)/100,{c:r=isNaN(r)?0:r.toFixed(),m:n=isNaN(n)?0:n.toFixed(),y:i=isNaN(i)?0:i.toFixed(),k:o=isNaN(o)?0:o.toFixed()}},r.cmykToHex=function(e,t,a,n){e=e<1?e:parseFloat(e)/100,t=t<1?t:parseFloat(t)/100,a=a<1?a:parseFloat(a)/100;var i=1-(e=e*(1-(n=n<1?n:parseFloat(n)/100))+n),o=1-(t=t*(1-n)+n),s=1-(a=a*(1-n)+n);return i=Math.round(255*i),o=Math.round(255*o),s=Math.round(255*s),"#"+r.componentToHex(i)+r.componentToHex(o)+r.componentToHex(s)},r.state={cmykObj:{c:0,m:0,y:0,k:0}},r.cmykObj={c:0,m:0,y:0,k:0},r.updateStatus=!0,r}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this;if(this.props.selectedColor&&/^#([0-9A-F]{3}){1,2}$/i.test(this.props.selectedColor)){var t=this.hexToRgb(this.props.selectedColor);this.setState({cmykObj:this.rgbToCmyk(t.r,t.g,t.b)},(function(){e.cmykObj=e.state.cmykObj}))}}},{key:"componentDidUpdate",value:function(){if(this.props.selectedColor&&/^#([0-9A-F]{3}){1,2}$/i.test(this.props.selectedColor)){var e=this.hexToRgb(this.props.selectedColor),t=this.rgbToCmyk(e.r,e.g,e.b);JSON.stringify(t)!==JSON.stringify(this.cmykObj)&&this.updateStatus&&(this.cmykObj=t,this.setState({cmykObj:this.cmykObj}))}}},{key:"componentToHex",value:function(e){var t=e.toString(16);return 1==t.length?"0"+t:t}},{key:"hexToRgb",value:function(e){var t=0,a=0,r=0;return 4==e.length?(t="0x"+e[1]+e[1],a="0x"+e[2]+e[2],r="0x"+e[3]+e[3]):7==e.length&&(t="0x"+e[1]+e[2],a="0x"+e[3]+e[4],r="0x"+e[5]+e[6]),"rgb("+ +t+","+ +a+","+ +r+")"}},{key:"render",value:function(){var e=this;return u.a.createElement(c.Fragment,null,u.a.createElement("div",null,u.a.createElement(g.SketchPicker,{disableAlpha:!0,color:this.props.selectedColor,onChange:this.onColorChange,onChangeComplete:this.props.onChangeComplete,presetColors:this.props.presetColors}),u.a.createElement("div",{className:"color-cmyk"},u.a.createElement("div",{className:"form-row"},u.a.createElement("div",{className:"col-3"},u.a.createElement("input",{type:"text",className:"form-control text-center",value:this.cmykObj.c,onChange:function(t){return e.updateCmykVal(t,"c")}}),"C"),u.a.createElement("div",{className:"col-3"},u.a.createElement("input",{type:"text",className:"form-control text-center",value:this.cmykObj.m,onChange:function(t){return e.updateCmykVal(t,"m")}}),"M"),u.a.createElement("div",{className:"col-3"},u.a.createElement("input",{type:"text",className:"form-control text-center",value:this.cmykObj.y,onChange:function(t){return e.updateCmykVal(t,"y")}}),"Y"),u.a.createElement("div",{className:"col-3"},u.a.createElement("input",{type:"text",className:"form-control text-center",value:this.cmykObj.k,onChange:function(t){return e.updateCmykVal(t,"k")}}),"K")))))}}]),a}(u.a.Component),v=Object(g.CustomPicker)(f),b=a(19),A=a.n(b),y=function(e){function t(t){if(""!==t.hex_value){var r=a(t.hex_value);return u.a.createElement(c.Fragment,null,u.a.createElement("div",{key:t.id,className:r,style:{backgroundColor:t.hex_value},id:"tooltip-"+t.id,onClick:function(){return e.onColorSelect(t)},onMouseEnter:function(){return e.onColorHover(t,!0)},onMouseLeave:function(){return e.onColorHover(t,!1)}}),!1===e.isMobileView&&u.a.createElement(d.a,{placement:"top",target:"tooltip-"+t.id},t.name))}}function a(t){var a=-1;return e.canvasReducer.layer_data&&e.canvasReducer.layer_data[e.canvasReducer.active_product_side]&&e.canvasReducer.layer_data[e.canvasReducer.active_product_side][e.layerIndex]&&e.canvasReducer.layer_data[e.canvasReducer.active_product_side][e.layerIndex].colors&&(a=e.canvasReducer.layer_data[e.canvasReducer.active_product_side][e.layerIndex].colors.findIndex((function(e){return e===t}))),t&&t.includes("png")&&(t="url(#"+t+")"),-1!==(e.usedColorList?e.usedColorList.findIndex((function(e){return e.fill===t})):-1)?"color-box active":-1!==a?"color-box select":"color-box"}function r(t){if(""===t.hex_value&&!e.oneColorEnable){var r=a(t.value.split("/").pop());return u.a.createElement(c.Fragment,null,u.a.createElement("div",{key:t.id,className:r,style:{backgroundImage:"url("+t.value+")"},id:"pattern-"+t.id,onClick:function(){return e.onColorSelect(t)},onMouseEnter:function(){return e.onColorHover(t,!0)},onMouseLeave:function(){return e.onColorHover(t,!1)}}),!1===e.isMobileView&&u.a.createElement(d.a,{placement:"top",target:"pattern-"+t.id},t.name))}}function n(){if(e.isMobileView){if(!e.colorListByCat.length)return u.a.createElement("span",{className:"font-normal text-sm d-none"},e.language.shared.noColor)}else if(!e.isColorList)return u.a.createElement("span",{className:"font-normal text-sm d-none"},e.language.shared.noColor)}return u.a.createElement(c.Fragment,null,!1===e.isMobileView&&!1!==e.showColorPalette&&function(){if(e.selectedPrintProfile)return u.a.createElement(c.Fragment,null,u.a.createElement("div",null,u.a.createElement("div",{className:e.colPopUpClass,onScroll:e.handleScroll},!e.oneColorEnable&&u.a.createElement("div",{className:"color-block d-flex align-items-center"},u.a.createElement("div",{className:"color-box-wrap"},u.a.createElement("div",{className:"color-box",style:{backgroundImage:"url("+m.a+")"},onClick:function(){return e.onColorSelect({hex_value:"none"})}})),u.a.createElement("div",{className:"color-box-title active"},"Remove")),e.colorListLoader?u.a.createElement("div",{className:"color-block"},u.a.createElement("div",{className:"color-box-title",key:"loader1"},u.a.createElement(A.a,{height:20,width:240})),u.a.createElement("div",{className:"color-box-wrap",key:"loader2"},[1,2,3,4,5,6,7,8,9,10,11,12,13,14].map((function(e){return u.a.createElement("div",{className:"color-box",key:e},u.a.createElement(A.a,{height:30,width:30}))})))):"",e.colorList.map((function(a,n){return u.a.createElement(c.Fragment,{key:n},a.subcategory.map((function(a,n){return u.a.createElement(c.Fragment,{key:"sub-cat-"+n},a.color_data.length>0&&u.a.createElement("div",{className:"color-block"},u.a.createElement("div",{className:e.selectedSubCat.subcat_id===a.subcat_id?"color-box-title active":"color-box-title"},a.subcat_name),u.a.createElement("div",{className:"color-box-wrap"},a.color_data.map((function(e,a){return u.a.createElement(c.Fragment,{key:e.id},t(e),r(e))})))))})))})),n()),e.isColorList&&u.a.createElement("div",{className:"color-fill-pc"},u.a.createElement("div",{className:"triangle-topleft"}),u.a.createElement("small",null,"= ",e.language.main.alreadyDesignMsg))))}(),!0===e.isMobileView&&!1!==e.showColorPalette&&u.a.createElement(c.Fragment,null,u.a.createElement("div",{className:"color-popup"},u.a.createElement("div",{className:"color-heading"},u.a.createElement("ul",{className:"nav nav-pills custom-pills mt-2",id:"pills-tab",role:"tablist"},u.a.createElement("li",{className:"nav-item",onClick:function(){return e.getColorListByCat("nocolor")}},u.a.createElement("a",{className:"nocolor"===e.selectedSubCat?"nav-link active":"nav-link"},"Remove")),e.colorList.map((function(t,a){return u.a.createElement(c.Fragment,{key:a},t.subcategory.map((function(a,r){return u.a.createElement(c.Fragment,{key:"sub-cat-"+r},a.color_data.length>0&&u.a.createElement("li",{className:"nav-item",key:r,onClick:function(){return e.getColorListByCat(t,a)}},u.a.createElement("a",{className:e.selectedSubCat.subcat_id===a.subcat_id?"nav-link active":"nav-link"},a.subcat_name)))})))})))),u.a.createElement("div",{className:"nocolor"!==e.selectedSubCat?"d-none":"color-block"},u.a.createElement("div",{className:"color-box",style:{backgroundImage:"url("+m.a+")"},onClick:function(){return e.onColorSelect({hex_value:"none"})}})),u.a.createElement("div",{className:"nocolor"===e.selectedSubCat?"d-none":e.forMobile},e.colorListByCat.map((function(e,a){return u.a.createElement(c.Fragment,{key:e.id},t(e),r(e))})),n())),e.colorListByCat.length>0&&u.a.createElement("div",{className:"color-fill-mobile"},u.a.createElement("div",{className:"triangle-topleft"}),u.a.createElement("small",null,"= ",e.language.main.alreadyDesignMsg))),e.printProfileData.map((function(t,a){return u.a.createElement(c.Fragment,{key:a},t.id===e.selectedPrintProfile&&1===t.color_data.show_color_picker&&u.a.createElement(c.Fragment,null,u.a.createElement("div",{className:"w-100 orBox"},u.a.createElement("span",null,e.language.shared.choosePicker)),u.a.createElement(v,{setColor:e.setColor,onChange:e.onSwatchHover,onChangeComplete:e.handleChangeComplete,presetColors:[],selectedColor:e.selectedColor})))})))},_=a(3),E=a(24),S=function(e){Object(s.a)(a,e);var t=Object(l.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).onSwatchHover=function(e,t){r.setState({background:e.hex}),r.props.onColorHover({hex_value:e.hex},!0)},r.handleChangeComplete=function(e){r.setState({background:e.hex}),r.props.onColorSelect({hex_value:e.hex})},r.setColor=function(e){r.setState({background:e}),r.props.onColorSelect({hex_value:e})},r.getChunkedColorData=function(e,t,a){var n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=0,o=150,s=!1,l=[],c=0,u=0,d=0,p=0,m=0,h=0,g=!0;if(n&&(0===e?(l=r.deepCopyFunction(r.props.colorList)).forEach((function(e){e.subcategory.forEach((function(e){e.color_data=[]}))})):(c=r.props.colorList.findIndex((function(t){return t.cat_id===e})),u=r.props.colorList[c].subcategory.findIndex((function(e){return e.subcat_id===t})),(d=r.props.colorList[c].subcategory[u].color_data.findIndex((function(e){return e.id===a})))+1===r.props.colorList[c].subcategory[u].color_data.length?(d=0,u+1===r.props.colorList[c].subcategory.length?(u=0,c+1===r.props.colorList.length?(c=0,g=!1,r.setState({hasMoreColorData:!1})):c+=1):u+=1):d+=1,l=r.deepCopyFunction(r.state.chunkedColorList)),g)){for(var f=c;f<r.props.colorList.length;f++)for(var v=u;v<r.props.colorList[f].subcategory.length;v++){v===r.props.colorList[f].subcategory.length-1&&(u=0);for(var b=d;b<r.props.colorList[f].subcategory[v].color_data.length;b++){if(b===r.props.colorList[f].subcategory[v].color_data.length-1&&(d=0),!(i<o)){s=!1,r.setState({chunkedColorList:r.deepCopyFunction(l),lastCatId:p,lastSubCatId:m,lastColId:h});break}l[f].subcategory[v].color_data.push(r.props.colorList[f].subcategory[v].color_data[b]),p=r.props.colorList[f].cat_id,m=r.props.colorList[f].subcategory[v].subcat_id,h=r.props.colorList[f].subcategory[v].color_data[b].id,s=!0,f===r.props.colorList.length-1&&v===r.props.colorList[f].subcategory.length-1&&b===r.props.colorList[f].subcategory[v].color_data.length-1&&(g=!1,s=!1,r.setState({chunkedColorList:r.deepCopyFunction(l),lastCatId:p,lastSubCatId:m,lastColId:h,hasMoreColorData:!1})),i+=1}}s&&r.setState({chunkedColorList:r.deepCopyFunction(l),lastCatId:p,lastSubCatId:m,lastColId:h,hasMoreColorData:!1})}},r.handleScroll=function(e){var t=e.target;t.scrollHeight-t.scrollTop===t.clientHeight&&r.getChunkedColorData(r.state.lastCatId,r.state.lastSubCatId,r.state.lastColId,r.state.hasMoreColorData)},r.deepCopyFunction=function(e){var t,a,n;if("object"!==typeof e||null===e)return e;for(n in t=Array.isArray(e)?[]:{},e)a=e[n],t[n]=r.deepCopyFunction(a);return t},r.state={colorList:[],colorListByCat:[],isCatActive:[!0],selectedSubCat:{},background:"#fff",isMobileView:window.innerWidth<1023,isColorList:!1,chunkedColorList:[],lastCatId:0,lastSubCatId:0,lastColId:0,hasMoreColorData:!0},r.getColorListByCat=r.getColorListByCat.bind(Object(o.a)(r)),r.onColorSelect=r.onColorSelect.bind(Object(o.a)(r)),r.onColorHover=r.onColorHover.bind(Object(o.a)(r)),r.onSwatchHover=r.onSwatchHover.bind(Object(o.a)(r)),r.handleChangeComplete=r.handleChangeComplete.bind(Object(o.a)(r)),r.layerIndex=0,r}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=!1;if(this.props.colorList&&this.props.colorList.length>0){this.getChunkedColorData(0,0,0);for(var t=0;t<this.props.colorList.length;t++){var a=this.props.colorList[t];if(a.subcategory&&a.subcategory.length){e=!0,this.getColorListByCat(this.props.colorList[t],this.props.colorList[t].subcategory[0]);break}}}for(var r="color-popup-full-view",n="color-block",i=0;i<this.props.printProfileData.print_profile_data.length;i++)this.props.printProfileData.selected_print_profile==this.props.printProfileData.print_profile_data[i].id&&1===this.props.printProfileData.print_profile_data[i].color_data.show_color_picker&&(r="color-popup",n="color-block for-mobile");this.setState({colPopUpClass:r,forMobile:n,isColorList:e});var o=_.a.canvas.getLayerName();this.layerIndex=Number(o.split("_")[1])}},{key:"componentDidUpdate",value:function(e){this.props.colorList!==e.colorList&&0!==this.props.colorList.length&&this.getChunkedColorData(this.state.lastCatId,this.state.lastSubCatId,this.state.lastColId)}},{key:"getColorListByCat",value:function(e,t){var a,n=[],i=!1;if("nocolor"===e)a="nocolor";else for(var o=0;o<this.props.colorList.length;o++)if(e.cat_id===this.props.colorList[o].cat_id)for(var s=0;s<this.props.colorList[o].subcategory.length;s++)if(t.subcat_id===this.props.colorList[o].subcategory[s].subcat_id){a=t,n=[].concat(Object(r.a)(n),Object(r.a)(this.props.colorList[o].subcategory[s].color_data));break}if(!1===this.state.isMobileView&&(i=!1,this.props.colorList))e:for(var l=0;l<this.props.colorList.length;l++)for(var c=0;c<this.props.colorList[l].subcategory.length;c++)if(this.props.colorList[l].subcategory[c].color_data.length){i=!0;break e}this.setState({colorListByCat:n,isCatActive:[],selectedSubCat:a,isColorList:i})}},{key:"onColorSelect",value:function(e){this.props.onColorSelect(e);var t=this.state.colorListByCat;this.setState({colorListByCat:t})}},{key:"onColorHover",value:function(e,t){this.props.onColorHover(e,t)}},{key:"render",value:function(){return u.a.createElement(y,{colorList:this.state.chunkedColorList,colorListByCat:this.state.colorListByCat,getColorListByCat:this.getColorListByCat,isCatActive:this.state.isCatActive,onColorSelect:this.onColorSelect,onColorHover:this.onColorHover,selectedSubCat:this.state.selectedSubCat,setColor:this.setColor,handleChangeComplete:this.handleChangeComplete,selectedPrintProfile:this.props.printProfileData.selected_print_profile,printProfileData:this.props.printProfileData.print_profile_data,canvasReducer:this.props.canvasReducer,layerIndex:this.layerIndex,onSwatchHover:this.onSwatchHover,language:this.props.language,isMobileView:this.state.isMobileView,isColorList:this.state.isColorList,oneColorEnable:this.props.oneColorEnable,colPopUpClass:this.state.colPopUpClass,forMobile:this.state.forMobile,showColorPalette:this.props.showColorPalette,usedColorList:this.props.usedColorList,selectedColor:this.props.selectedColor,handleScroll:this.handleScroll,colorListLoader:this.props.colorListLoader})}}]),a}(u.a.Component),C=Object(E.b)((function(e){return{colorListLoader:e.colorPaletteReducer.loading,printProfileData:e.printProfileReducer,language:e.languageReducer.translation_data.filter((function(t){return t.langCode===e.languageReducer.default_lang}))[0],canvasReducer:e.productCanvasReducer,colorList:0!==e.colorPaletteReducer.colorList.filter((function(t){return t.printProfileId===e.printProfileReducer.selected_print_profile})).length&&e.colorPaletteReducer.colorList.filter((function(t){return t.printProfileId===e.printProfileReducer.selected_print_profile}))[0].colorData?e.colorPaletteReducer.colorList.filter((function(t){return t.printProfileId===e.printProfileReducer.selected_print_profile}))[0].colorData:[]}}))(S),x=a(9),w=a.n(x),k=a(20),I=function(e){return u.a.createElement("div",{className:"tempImageEdit"===e.activeView?"":"hidden"},u.a.createElement("div",{className:"element-controls-header d-none d-md-flex d-lg-flex d-xl-flex"},u.a.createElement("section",{className:"boxTitle back-to-back",onClick:function(){return e.cancelImageEdit()}},u.a.createElement("div",{className:"icon",title:e.language.main.backToSection},u.a.createElement("i",{className:"nf nf-left-arrow"}))),u.a.createElement("div",{className:"text"},e.language.image.filterImage)),u.a.createElement("div",{className:"nav nav-tabs-custom d-flex d-sm-flex d-md-flex"},u.a.createElement("div",{className:"item-filters-options w-100"},function(){var t,a;if((null===(t=e.selElem)||void 0===t||null===(a=t.prefs)||void 0===a?void 0:a.lock)&&!1===e.selElem.prefs.lock.filter)return u.a.createElement(c.Fragment,null,u.a.createElement("div",{className:"thumbView optionBox"},u.a.createElement("div",{className:"thumbView-wrap"},e.filterList.map((function(t){return u.a.createElement("div",{key:t.type,className:e.filterInfo.type===t.type?"thumbView-elements active":"thumbView-elements"},u.a.createElement("div",{className:"imageWrap"},u.a.createElement("div",{className:"imageWrap-box",onClick:function(){return e.addFilterEffect(t)},id:"preview_"+t.type})))})))))}())),u.a.createElement("div",{className:"buttonGroup d-flex mt-3"},u.a.createElement("button",{className:"btn btn-dark btn-sm btn-block text-light mr-1",onClick:function(){return e.cancelImageEdit()}},e.language.main.cancel),u.a.createElement("button",{className:"btn btn-success btn-sm btn-block m-0 ml-1",onClick:function(){return e.doneImageEdit()}},e.language.main.done)))},N=a(8),O=a(172),P=a(46),D=a(22),R=a.n(D),T=a(259),L=a(424),M=function(e){Object(s.a)(a,e);var t=Object(l.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).extAddedCb=function(e){O.a.init({$:R.a,editor:_.a,NS:N.a,fabric:P.fabric,Potrace:T,RgbQuant:L})},r.cancelImageEdit=function(){var e,t;(null===(e=r.props.appliedFilter)||void 0===e?void 0:e.type)&&(null===(t=r.props.appliedFilter)||void 0===t?void 0:t.filterData)?r.addFilterEffect(r.props.appliedFilter.filterData):r.removeSelectedFilter(),r.props.closeImageEdit()},r.doneImageEdit=function(){r.props.closeImageEdit()},r.onMaskZoomIn=function(){r.zoomUploadImage(10)},r.onMaskZoomOut=function(){r.zoomUploadImage(-10)},r.positionMaskImg=function(e){var t,a=r.props.selectedElems;if((null===a||void 0===a||null===(t=a.prefs)||void 0===t?void 0:t.type)&&"image"===a.prefs.type){var n=document.getElementById(a.id).getElementsByTagName("image")[0],i=n.getBBox();switch(e){case"left":n.setAttribute("x",i.x-5);break;case"right":n.setAttribute("x",i.x+5);break;case"top":n.setAttribute("y",i.y-5);break;case"bottom":n.setAttribute("y",i.y+5)}}},r.zoomUploadImage=function(e){var t,a=r.props.selectedElems;if((null===a||void 0===a||null===(t=a.prefs)||void 0===t?void 0:t.type)&&"image"===a.prefs.type){var n=document.getElementById(a.id).getElementsByTagName("image")[0],i=n.getBBox();(i.width>250||i.height>250)&&(i.width=i.height=250),(i.width<150||i.height<150)&&(i.width=i.height=150),n.setAttribute("width",i.width+e),n.setAttribute("height",i.height+e)}},r.renderFilterView=function(e,t,a){var r,n,i,o,s,l,c,u;null!==t&&(l="filter_"+e,i=document.createElement("svg"),c=document.createElement("defs"),u=document.createElement("g"),i.setAttribute("height","200"),i.setAttribute("width","200"),i.setAttribute("xmlns",N.a.SVG),i.setAttribute("xmlns:xlink",N.a.XLINK),i.setAttribute("viewBox","0 0 200 200"),i.setAttribute("id","mask_svg_"+e),(o=document.createElement("image")).setAttribute("height","100%"),o.setAttribute("width","100%"),o.setAttribute("x","0"),o.setAttribute("y","0"),o.setAttribute("xlink:href",t),o.setAttribute("filter","url(#"+l+")"),(s=document.createElement("filter")).setAttribute("id","filter_"+e),s.innerHTML=a,c.appendChild(s),u.appendChild(c),u.appendChild(o),i.appendChild(u),n=i.outerHTML,(r=document.getElementById("preview_"+e))&&(r.innerHTML=n))},r.addFilterEffect=function(){var e=Object(k.a)(w.a.mark((function e(t){var a,n,i,o;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(null===(n=r.props.selectedElems)||void 0===n||null===(a=n.prefs)||void 0===a?void 0:a.type)||"image"!==n.prefs.type){e.next=14;break}if(i=t.filter,!(o=document.getElementById(n.id))){e.next=14;break}return r.filterInfo={type:t.type,string:i,filterData:t},e.next=8,_.a.addFilterEffect(t.type,i,n.id);case 8:return e.next=10,_.a.addPreference("filterInfo",r.filterInfo,n.id);case 10:return e.next=12,_.a.updateImageStatus(o);case 12:o.prefs.updateStatus=e.sent,r.setState({filterInfo:r.filterInfo});case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.removeSelectedFilter=Object(k.a)(w.a.mark((function e(){var t,a,n,i,o;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if('<feGaussianBlur stdDeviation="0,0"/>',a={type:"normal",css:"none"},!(null===(n=r.props.selectedElems)||void 0===n||null===(t=n.prefs)||void 0===t?void 0:t.type)||"image"!==n.prefs.type){e.next=14;break}return i=document.getElementById(n.id),o={},e.next=8,_.a.addFilterEffect(a.type,'<feGaussianBlur stdDeviation="0,0"/>',n.id);case 8:return e.next=10,_.a.addPreference("filterInfo",o,n.id);case 10:return e.next=12,_.a.updateImageStatus(i);case 12:i.prefs.updateStatus=e.sent,r.setState({filterInfo:o});case 14:case"end":return e.stop()}}),e)}))),r.resetFilter=function(){r.setState({filterInfo:{}})},r.state={filterInfo:{}},r.filterList=[{type:"normal",css:"none",filter:'<feGaussianBlur stdDeviation="0,0"/>'},{type:"sepia",css:"sepia(100%)",filter:'<feColorMatrix type="matrix" values="0.393 0.769 0.189 0 0 0.349 0.686 0.168 0 0 0.272 0.534 0.131 0 0 0 0 0 1 0"/>'},{type:"grayscale",css:"grayscale(100%)",filter:'<feColorMatrix type="saturate" values="0"/>'},{type:"sepia2",css:"sepia(50%)",filter:'<feColorMatrix type="matrix" values="0.30 0.30 0.30 0 0 0.25 0.25 0.25 0 0 0.20 0.20 0.20 0 0 0.00 0.00 0.00 1 0"/>'},{type:"invert",css:"invert(100%)",filter:'<feColorMatrix in="SourceGraphic" type="matrix" values="-1 0 0 0 1 0 -1 0 0 1 0 0 -1 0 1 0 0 0 1 0"/>'},{type:"green",css:"hue-rotate(90deg)",filter:'<feColorMatrix result="colormatrix" in="SourceGraphic" values="1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 -0.106383 0 -1.28 0.96 0"></feColorMatrix> <feComposite result="composite1" operator="in" in2="SourceGraphic" in="colormatrix"/>'},{type:"noise",css:"blur(1px)",filter:'<feComponentTransfer><feFuncR type="discrete" tableValues="0 .5 1 1"></feFuncR> <feFuncG type="discrete" tableValues="0 .5 1"> </feFuncR> <feFuncB type="discrete" tableValues="0"></feFuncR> </feComponentTransfer>'},{type:"pixelate",css:"blur(2px)",filter:'<feGaussianBlur stdDeviation="5" result="result3"></feGaussianBlur> <feColorMatrix values="1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 50 0 " result="result7"></feColorMatrix> <feComposite operator="in" in2="SourceGraphic" result="result9"></feComposite> <feComposite in2="result7" operator="arithmetic" in="result9" k1="0.5" k3="0.5" result="result1"></feComposite> <feBlend in2="result1" result="result5" mode="screen" in="SourceGraphic"></feBlend> <feBlend in2="result5" mode="darken" in="result5" result="result6"></feBlend> <feComposite in2="SourceGraphic" operator="in" result="result8"></feComposite>'},{type:"bright",css:"brightness(200%)",filter:'<feColorMatrix result="colormatrix" values="1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 -21.25 -71.54 -7.21 55.8511 0 "/>'}],r}return Object(i.a)(a,[{key:"componentDidMount",value:function(){(0,this.props.templateImgEditRef)(this),O.a.name in _.a.canvas.extensions||_.a.addExtension(O.a.name,this.extAddedCb,{$:R.a})}},{key:"componentDidUpdate",value:function(e,t){var a,r,n,i=this;(null===(a=this.props)||void 0===a||null===(r=a.selectedElems)||void 0===r||null===(n=r.prefs)||void 0===n?void 0:n.url)&&this.filterList.forEach((function(e){i.renderFilterView(e.type,i.props.selectedElems.prefs.url,e.filter)}))}},{key:"render",value:function(){var e,t,a={};return(null===(e=this.props.selectedElems)||void 0===e||null===(t=e.prefs)||void 0===t?void 0:t.filterInfo)&&(a=this.props.selectedElems.prefs.filterInfo),u.a.createElement(I,{activeView:this.props.activeView,language:this.props.language,selElem:this.props.selectedElems,filterList:this.filterList,filterInfo:0!==Object.keys(this.state.filterInfo).length?this.state.filterInfo:a,cancelImageEdit:this.cancelImageEdit,doneImageEdit:this.doneImageEdit,onMaskZoomIn:this.onMaskZoomIn,onMaskZoomOut:this.onMaskZoomOut,positionMaskImg:this.positionMaskImg,addFilterEffect:this.addFilterEffect})}}]),a}(u.a.Component),B=Object(E.b)((function(e){return{language:e.languageReducer.translation_data.filter((function(t){return t.langCode===e.languageReducer.default_lang}))[0]}}))(M);a(129);a.d(t,"a",(function(){return C})),a.d(t,"b",(function(){return B}))},12:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var r={production:!0,base_path:window.BASE_URL+"api/v1/",store_url:window.STORE_URL,assets_path:window.BASE_URL+"assets/",lang:window.LANG,Dpi:window.DPI,color_no:window.COLOR_NO,converted_svg_color_change:window.CONVERTED_SVG_COLOR_CHANGE,rvn:window.RVN,license_Key:window.LICENCE_KEY,force_retain_design:window.FORCE_RETAIN_DESIGN,tool_bar:window.SHOW_TOOL_BAR,is_default_edit_template:window.DEFAULT_EDIT_TEMPLATE,pathLc:"BhECUAcVEj0VBBgfFE1SGAQEAEpfXxkdAAIZHgQeFQgEXhMfHV8cGRMVHgMVLxMYFRMbXwYRHBkUEQQVXgAYAFJLGRZYHB8TEQQZHx5eAAIfBB8THxxQTU1QUhgEBAADSlJZCwcVEj0VBBgfFE1SGAQEAANKX18ZHQACGR4EHhUIBF4THx1fHBkTFR4DFS8TGBUTG18GERwZFBEEFV4AGABSSw0VHAMVCwcVEj0VBBgfFE1SGAQEAEpfXxkdAAIZHgQeFQgEXhMfHV8cGRMVHgMVLxMYFRMbXwYRHBkUEQQVXgAYAFJLDQYRAlAAEQIRHRUEFQIDTR4VB1AlIjwjFRECExggEQIRHQNYCwMEAkpSESdBBxMdHAUUN0UcFTghBREnSAMqNyZCPB0cBBM4OgASHiIFKigYQDwdHAY8NwgGKUI2AxE3SQoUMU1NUlwcHxMRHAMEAkoHGR4UHwdeHB8TEQQZHx5eGB8DBB4RHRVcHBkTFR4TFTsVCUpSJh0+BiU1CCo/NwAiIRocJyInCCYTMU1NUg1ZSxYVBBMYWAcVEj0VBBgfFFtST1JbABECER0VBBUCA14EHyMEAhkeF1hZXAsdFQQYHxRKUjc1JFJcGBURFBUCA0oLUjMfHgQVHgRdJAkAFVJKUhEAABwZExEEGR8eXxoDHx5SDVwNWV4EGBUeWBYFHhMEGR8eWAIVA1kLAhUDXhoDHx5YWV4EGBUeWBYFHhMEGR8eWAIVA1kLBhECUARNEQQfElgCFQNZXgMAHBkEWFIwUllLUh8bUlFNBCtBLVZWWBQfEwUdFR4EXgIVHR8GFTMYGRwUWBQfEwUdFR4EXhQfEwUdFR4ENRwVHRUeBFlcHB8TEQQZHx5eGAIVFk1SGAQEAANKX18ZHQACGR4EHhUIBF4THx1fGR4GERwZFF0cGRMVHgMVX1JZDVlLDVlL",pathSc:"BhECUBEITT0RBBheFhwfHwJYPREEGF4CER4UHx1YWVpBQFtBWUsZFlgRCExNQ1kLGRZYWBwfExEEGR8eXhgCFRZeAxURAhMYWFIZHQACGR4EHhUIBF4ZH1JZTU1dQVlWVlgcHxMRBBkfHl4YAhUWXgMVEQITGFhSFBUGXhkdAAIZHgQeFQgEXhkfUllNTV1BWVZWWBwfExEEGR8eXhgCFRZeAxURAhMYWFIcHxMRHBgfAwRSWU1NXUFZWQsUHxMFHRUeBF4CFR0fBhUzGBkcFFgUHxMFHRUeBF4UHxMFHRUeBDUcFR0VHgRZSxwfExEEGR8eXhgCFRZNUhgEBAADSl9fGR0AAhkeBB4VCAReEx8dXxkeBhEcGRRdHBkTFR4DFV9SSw0NGRZYEQhOQ1ZWEQhMR1kLGRZYWBQfEwUdFR4EXiUiPF4DFRECExhYUhkdAAIZHgQeFQgEXhkfUllNTV1BWVZWWBQfEwUdFR4EXiUiPF4DFRECExhYUhQVBl4ZHQACGR4EHhUIBF4ZH1JZTU1dQVlWVlgUHxMFHRUeBF4lIjxeAxURAhMYWFIcHxMRHBgfAwRSWU1NXUFZWQsUHxMFHRUeBF4CFR0fBhUzGBkcFFgUHxMFHRUeBF4UHxMFHRUeBDUcFR0VHgRZSxwfExEEGR8eXhgCFRZNUhgEBAADSl9fGR0AAhkeBB4VCAReEx8dXxkeBhEcGRRdHBkTFR4DFV9SSw0NGRZYEQhOTUdZCxkWWFgHGR4UHwdeHB8TEQQZHx5eGB8DBB4RHRVeAxURAhMYWFIZHQACGR4EHhUIBF4ZH1JZTU1dQVlWVlgHGR4UHwdeHB8TEQQZHx5eGB8DBB4RHRVeAxURAhMYWFIUFQZeGR0AAhkeBB4VCAReGR9SWU1NXUFZVlZYBxkeFB8HXhwfExEEGR8eXhgfAwQeER0VXgMVEQITGFhSHB8TERwYHwMEUllNTV1BWVkLFB8TBR0VHgReAhUdHwYVMxgZHBRYFB8TBR0VHgReFB8TBR0VHgQ1HBUdFR4EWUscHxMRBBkfHl4YAhUWTVIYBAQAA0pfXxkdAAIZHgQeFQgEXhMfHV8ZHgYRHBkUXRwZExUeAxVfUksNDQ==",modules:[{id:1,isSub:!0,name:"designs",label:"Add Designs",desc:"designsDesc",icon:"nxi nxi-designs",isAddon:!1},{id:2,isSub:!1,name:"image",label:"Upload Image",desc:"imageDesc",icon:"nxi nxi-upload",isAddon:!1},{id:3,isSub:!1,name:"text",label:"Add Text",desc:"textDesc",icon:"nxi nxi-text",isAddon:!1},{id:4,isSub:!1,name:"template",label:"Design Ideas",desc:"templateDesc",icon:"nxi nxi-template",isAddon:!1},{id:5,isSub:!1,name:"ar",label:"ar",desc:"arDesc",icon:"nf nf-ar-scan",isAddon:!0},{id:7,isSub:!1,name:"configurator",label:"configurator",desc:"configuratorDesc",icon:"nxi nxi-product",isAddon:!1},{id:6,isSub:!1,name:"team",label:"Team Jearsy",desc:"teamDesc",icon:"nxi nxi-name-number",isAddon:!0}],sub_modules:[{id:1,p_id:1,name:"clipart",label:"Clipart library",desc:"Lorem ipsum dolor sit amet",icon:"nxi nxi-cliparts"},{id:3,p_id:1,name:"background",label:"Backgrounds",desc:"Lorem ipsum dolor sit amet",icon:"nxi nxi-background"},{id:4,p_id:1,name:"drawing",label:"Draw with your hand",desc:"Lorem ipsum dolor sit amet",icon:"nxi nxi-hand-drawing"},{id:5,p_id:1,name:"shape",label:"Shapes library",desc:"Lorem ipsum dolor sit amet",icon:"nxi nxi-shapes"},{id:6,p_id:1,name:"gallery",label:"Gallery library",desc:"Lorem ipsum dolor sit amet",icon:"nxi nxi-gallery"},{id:7,p_id:1,name:"qr",label:"Qr Code",desc:"qrcodeDesc",icon:"nxi nxi-barcode"}]}},129:function(e,t,a){"use strict";a.r(t);var r=a(10),n=a(11),i=a(13),o=a(16),s=a(15),l=a(0),c=a.n(l),u=(a(175),a(878)),d=a(856),p=a(857),m=a(858),h=function(e){if(e.isLogInModalOpen){var t=c.a.createElement("button",{className:"close",onClick:e.closeModal},"\xd7");return c.a.createElement(u.a,{id:"account-modal",style:{maxWidth:"400px"},isOpen:e.isLogInModalOpen,toggle:e.closeModal,centered:!0,modalClassName:"custom login"},e.language&&c.a.createElement(d.a,{close:t},c.a.createElement("span",{className:"text-success"},c.a.createElement("i",{className:"nf nf-lock"})," ",e.language.shared.accountLogin)),e.language&&c.a.createElement(p.a,null,!0===e.isValidEmail?c.a.createElement("h6",{className:!1===e.userLoginError?"hidden":"alert alert-danger small-txt tip mt-4"},c.a.createElement("i",{className:"alert-icon"}),c.a.createElement("span",{className:"alert-txt"},e.language.shared.invalidEmailPwd)):!1===e.isValidEmail?c.a.createElement("h6",{className:"alert alert-danger small-txt tip mt-4"},c.a.createElement("i",{className:"alert-icon"}),c.a.createElement("span",{className:"alert-txt"},e.language.shared.invalidEmail)):void 0,c.a.createElement("div",{className:"form-group"},c.a.createElement("label",null,e.language.shared.email),c.a.createElement("input",{refs:"email",onChange:function(t){return e.setLoginDetails("email",t)},className:""===e.uPassword&&e.isFormSubmitted?"form-control require-field":"form-control",onKeyDown:function(t){return e.onEnterPress(t)}})),c.a.createElement("div",{className:"form-group"},c.a.createElement("label",null,e.language.shared.password),c.a.createElement("input",{type:"text",onChange:function(t){return e.setLoginDetails("password",t)},className:""===e.uPassword&&e.isFormSubmitted?"form-control pw require-field":"form-control pw",onKeyDown:function(t){return e.onEnterPress(t)}})),c.a.createElement("button",{type:"button",className:"btn btn-link",onClick:function(){return e.userRegistration()}},e.language.shared.newUser," ",c.a.createElement("span",null,e.language.shared.registerNow))),e.language&&c.a.createElement(m.a,null,c.a.createElement("button",{type:"button",className:"btn btn-success",onClick:function(){return e.userLogin()}},e.language.shared.login)))}return c.a.createElement(l.Fragment,null)},g=a(27),f=a(57),v=a(24),b=function(e){Object(o.a)(a,e);var t=Object(s.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).onEnterPress=function(e){13===e.keyCode&&n.userLogin()},n.state={uEmail:"",uPassword:"",userLoginError:!1,isSuccess:!0,currCustomerId:0,isFormSubmitted:!1,isValidEmail:!0},n.userRegistration=n.userRegistration.bind(Object(i.a)(n)),n.userLogin=n.userLogin.bind(Object(i.a)(n)),n.setLoginDetails=n.setLoginDetails.bind(Object(i.a)(n)),n.closeModal=n.closeModal.bind(Object(i.a)(n)),n.onEnterPress=n.onEnterPress.bind(Object(i.a)(n)),n}return Object(n.a)(a,[{key:"componentDidMount",value:function(){}},{key:"userRegistration",value:function(){this.props.customerAuthStatus(!1)}},{key:"userLogin",value:function(){var e=this;if(""!==this.state.uEmail&&""!==this.state.uPassword){var t=this.validateEmail(this.state.uEmail);this.setState({isValidEmail:t}),t&&g.z(this.state.uEmail,this.state.uPassword).then((function(t){0===t.data.customerId?e.setState({userLoginError:!0}):1===t.data.status&&(e.setState({isSuccess:!0,currCustomerId:t.data.customerId}),t.data.customerId>0&&e.props.userAuthSuccess(t.data.customerId,!0,"login"),t.data.customerId>1?(e.props.saveDesignModal(!1),e.props.dispatch(Object(f.m)()),e.props.openGalleryModule&&e.props.openGalleryModule()):e.setState({userLoginError:!0}))}))}else this.setState({isFormSubmitted:!0})}},{key:"setLoginDetails",value:function(e,t){"email"===e?this.setState({uEmail:t.target.value}):"password"===e&&this.setState({uPassword:t.target.value}),this.setState({userLoginError:!1,isValidEmail:!0})}},{key:"validateEmail",value:function(e){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase())}},{key:"closeModal",value:function(){this.setState({userLoginError:!1,isFormSubmitted:!1,isValidEmail:!0}),this.props.saveDesignModal(!1)}},{key:"render",value:function(){return c.a.createElement(h,{openModal:this.props.openModal,userRegistration:this.userRegistration,userLogin:this.userLogin,setLoginDetails:this.setLoginDetails,userLoginError:this.state.userLoginError,uPassword:this.state.uPassword,uEmail:this.state.uEmail,isFormSubmitted:this.state.isFormSubmitted,closeModal:this.closeModal,isLogInModalOpen:this.props.isLogInModalOpen,isValidEmail:this.state.isValidEmail,onEnterPress:this.onEnterPress,language:this.props.language})}}]),a}(c.a.Component),A=Object(v.b)((function(e){return{language:e.languageReducer.translation_data.filter((function(t){return t.langCode===e.languageReducer.default_lang}))[0]}}))(b),y=function(e){if(e.isLogInModalOpen){var t=c.a.createElement("button",{className:"close",onClick:e.closeModal},"\xd7");return c.a.createElement(u.a,{id:"account-modal-register",style:{maxWidth:"400px"},isOpen:e.isLogInModalOpen,toggle:e.closeModal,centered:!0,modalClassName:"custom login"},c.a.createElement(d.a,{close:t},c.a.createElement("span",{className:"text-success"},c.a.createElement("i",{className:"nf nf-lock"})," ",e.language.shared.registerHere)),c.a.createElement(p.a,null,function(){var t;return!0===e.isValidEmail?(t="AE"===e.registrationDetails.msg?"User already exists.":"SE"===e.registrationDetails.msg?"Server error.":"Registration failed.",c.a.createElement("h6",{className:!1===e.userRegistrationError?"hidden":"alert alert-danger small-txt tip"},c.a.createElement("i",{className:"alert-icon"}),c.a.createElement("span",{className:"alert-txt"},t))):!1===e.isValidEmail?c.a.createElement("h6",{className:!0===e.isValidEmail?"hidden":"alert alert-danger small-txt tip"},c.a.createElement("i",{className:"alert-icon"}),c.a.createElement("span",{className:"alert-txt"},e.language.shared.invalidEmail)):void 0}(),c.a.createElement("div",{className:"form-row"},c.a.createElement("div",{className:"col-12 col-md-6"},c.a.createElement("div",{className:"form-group"},c.a.createElement("label",null,e.language.shared.firstName),c.a.createElement("input",{type:"text",onChange:function(t){return e.setRegistrationDetails("fName",t)},className:""===e.firstName&&e.isFormSubmitted?"form-control require-field":"form-control","aria-describedby":"nameHelp"}))),c.a.createElement("div",{className:"col-12 col-md-6"},c.a.createElement("div",{className:"form-group"},c.a.createElement("label",null,e.language.shared.lastName),c.a.createElement("input",{type:"text",onChange:function(t){return e.setRegistrationDetails("lName",t)},className:""===e.lastName&&e.isFormSubmitted?"form-control require-field":"form-control"}))),c.a.createElement("div",{className:"col-12"},c.a.createElement("div",{className:"form-group"},c.a.createElement("label",null,e.language.shared.email),c.a.createElement("input",{refs:"email",onChange:function(t){return e.setRegistrationDetails("uEmail",t)},className:""===e.email&&e.isFormSubmitted?"form-control require-field":"form-control","aria-describedby":"emailHelp"}))),c.a.createElement("div",{className:"col-12"},c.a.createElement("div",{className:"form-group"},c.a.createElement("label",null,e.language.shared.password),c.a.createElement("input",{type:"text",onChange:function(t){return e.setRegistrationDetails("uPassword",t)},className:""===e.password&&e.isFormSubmitted?"form-control pw require-field":"form-control pw"})))),c.a.createElement("button",{type:"button",className:"btn btn-link",onClick:function(){return e.userLogIn()}},e.language.shared.existingUser," ",c.a.createElement("span",null,e.language.shared.loginHere))),c.a.createElement(m.a,null,c.a.createElement("button",{type:"button",className:"btn btn-success",onClick:function(){return e.registerNewUser()}},e.language.shared.register)))}return c.a.createElement(l.Fragment,null)},_=function(e){Object(o.a)(a,e);var t=Object(s.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).state={email:"",password:"",firstName:"",lastName:"",userRegistrationError:!1,currCustomerId:"",isFormSubmitted:!1,isValidEmail:!0,registrationDetails:{}},n.userLogIn=n.userLogIn.bind(Object(i.a)(n)),n.registerNewUser=n.registerNewUser.bind(Object(i.a)(n)),n.setRegistrationDetails=n.setRegistrationDetails.bind(Object(i.a)(n)),n.closeModal=n.closeModal.bind(Object(i.a)(n)),n}return Object(n.a)(a,[{key:"componentDidMount",value:function(){}},{key:"userLogIn",value:function(){this.props.customerAuthStatus(!0)}},{key:"registerNewUser",value:function(){var e=this,t=this.validateEmail(this.state.email);this.setState({isFormSubmitted:!0,isValidEmail:t}),""===this.state.email?this.setState({isValidEmail:!0}):t&&""!==this.state.email&&g.t(this.state.email,this.state.password,this.state.firstName,this.state.lastName).then((function(t){1===t.data.status&&e.state.firstName&&e.state.email&&e.state.password&&e.state.lastName&&(e.setState({currCustomerId:t.data.customerId}),e.state.currCustomerId>0?(e.props.userAuthSuccess(e.state.currCustomerId,!0,"registration"),e.props.saveDesignModal(!1)):e.setState({userRegistrationError:!0})),e.setState({registrationDetails:t.data})}))}},{key:"setRegistrationDetails",value:function(e,t){switch(e){case"fName":this.setState({firstName:t.target.value});break;case"lName":this.setState({lastName:t.target.value});break;case"uEmail":this.setState({email:t.target.value});break;case"uPassword":this.setState({password:t.target.value})}}},{key:"closeModal",value:function(){this.setState({email:"",password:"",firstName:"",lastName:"",userRegistrationError:!1,currCustomerId:"",isFormSubmitted:!1,isValidEmail:!0,registrationDetails:{}}),this.props.saveDesignModal(!1)}},{key:"validateEmail",value:function(e){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase())}},{key:"render",value:function(){return c.a.createElement(y,{userLogIn:this.userLogIn,registerNewUser:this.registerNewUser,setRegistrationDetails:this.setRegistrationDetails,userRegistrationError:this.state.userRegistrationError,email:this.state.email,password:this.state.password,firstName:this.state.firstName,lastName:this.state.lastName,isFormSubmitted:this.state.isFormSubmitted,isOpen:this.props.isOpen,closeModal:this.closeModal,isLogInModalOpen:this.props.isLogInModalOpen,isValidEmail:this.state.isValidEmail,registrationDetails:this.state.registrationDetails,language:this.props.language})}}]),a}(c.a.Component),E=Object(v.b)((function(e){return{language:e.languageReducer.translation_data.filter((function(t){return t.langCode===e.languageReducer.default_lang}))[0]}}))(_),S=function(e){return 0===e.customerId?c.a.createElement(E,{customerAuthStatus:e.customerAuthStatus,userAuthSuccess:e.userAuthSuccess,isOpen:e.isOpen,isLogInModalOpen:e.isLogInModalOpen,saveDesignModal:e.saveDesignModal}):c.a.createElement(A,{customerAuthStatus:e.customerAuthStatus,userAuthSuccess:e.userAuthSuccess,openModal:e.isLogInModalOpen,saveDesignModal:e.saveDesignModal,isOpen:e.isOpen,isLogInModalOpen:e.isLogInModalOpen,openGalleryModule:e.openGalleryModule})},C=function(e){Object(o.a)(a,e);var t=Object(s.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).state={customerId:1},n.customerAuthStatus=n.customerAuthStatus.bind(Object(i.a)(n)),n}return Object(n.a)(a,[{key:"componentDidMount",value:function(){}},{key:"customerAuthStatus",value:function(e){!0===e?this.setState({customerId:1}):this.setState({customerId:0})}},{key:"render",value:function(){return c.a.createElement(S,{customerId:this.state.customerId,customerAuthStatus:this.customerAuthStatus,userAuthSuccess:this.props.userAuthSuccess,onChangeOrderOption:this.props.onChangeOrderOption,isLogInModalOpen:this.props.isLogInModalOpen,isOpen:this.props.isOpen,saveDesignModal:this.props.saveDesignModal,openGalleryModule:this.props.openGalleryModule})}}]),a}(c.a.Component);a.d(t,"default",(function(){return C}))},131:function(e,t,a){"use strict";a.d(t,"d",(function(){return n})),a.d(t,"a",(function(){return i})),a.d(t,"c",(function(){return o})),a.d(t,"b",(function(){return s}));var r=a(27);function n(e){return function(t,a){return t(l()),r.l(e).then((function(r){if(r.status){var n=JSON.parse(JSON.stringify(a().colorPaletteReducer)).colorList;n.push({printProfileId:e,colorData:r.data}),t(c(n))}else t(u(r.data))})).catch((function(e){return t(u(e))}))}}var i="FETCH_COLOR_LIST_BEGIN",o="FETCH_COLOR_LIST_SUCCESS",s="FETCH_COLOR_LIST_FAILURE",l=function(){return{type:i}},c=function(e){return{type:o,payload:e}},u=function(e){return{type:s,payload:e}}},132:function(e,t,a){"use strict";a.d(t,"d",(function(){return i})),a.d(t,"a",(function(){return o})),a.d(t,"c",(function(){return s})),a.d(t,"b",(function(){return l}));var r=a(12),n=a(60);function i(){return function(e){return e(c()),n.get(r.a.store_url+"frontendlc.php",{headers:{"Content-Type":"application/json"}}).then((function(t){return e(u(t.data)),t.data})).catch((function(t){e(d(t))}))}}var o="FETCH_CUSTOMER_ID_BEGIN",s="FETCH_CUSTOMER_ID_SUCCESS",l="FETCH_CUSTOMER_ID_FAILURE",c=function(){return{type:o}},u=function(e){return{type:s,payload:e}},d=function(e){return{type:l,payload:e}}},134:function(e,t){e.exports="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wBDAAMDAwMDAwQEBAQFBQUFBQcHBgYHBwsICQgJCAsRCwwLCwwLEQ8SDw4PEg8bFRMTFRsfGhkaHyYiIiYwLTA+PlT/wAALCAAYABgBAREA/8QAPgABAQADAAAAAAAAAAAAAAAABwYCCAkQAAEEAQQABgIDAAAAAAAAAAMBAgQFBgAHERITFCEyQVEIIjFhY//aAAgBAQAAPwDqWq6BoW61rY5/Xxole8+OWRpEGIcbFUpSxuFJKT/Fqr11Yxc4lX2ZJT0EUUuvr3OS4sXOVBjfx+oQKnvJz/Os90TW78ZbVVLS+cu5oa5pBoqqIRuVMT+urEXQHupuTX0FeHE8Oa0YoQFgGsRJ7GNRO8cD/tfRSO0q/j9ZhsNuIgWAGF0GWeO/o3r3VFR6PX7cqO9V1QbgRc3viBx+g4r4syMR864c5FUTU9PAE1F7d3/K/WgTItrNxb2sx6gFjlXABTodnnQTEUB1N15K5q/ujl68rrZTAMNi4JjMWnCTxntc4sg/HXxTE9yonwnwmv/Z"},142:function(e,t,a){"use strict";var r=a(16),n=a(15),i=a(10),o=a(11);!function(){if(!("SVGPathSeg"in window)){var e=function(){function e(t,a,r){Object(i.a)(this,e),this.pathSegType=t,this.pathSegTypeAsLetter=a,this._owningPathSegList=r}return Object(o.a)(e,[{key:"_segmentChanged",value:function(){this._owningPathSegList&&this._owningPathSegList.segmentChanged(this)}}]),e}();e.prototype.classname="SVGPathSeg",e.PATHSEG_UNKNOWN=0,e.PATHSEG_CLOSEPATH=1,e.PATHSEG_MOVETO_ABS=2,e.PATHSEG_MOVETO_REL=3,e.PATHSEG_LINETO_ABS=4,e.PATHSEG_LINETO_REL=5,e.PATHSEG_CURVETO_CUBIC_ABS=6,e.PATHSEG_CURVETO_CUBIC_REL=7,e.PATHSEG_CURVETO_QUADRATIC_ABS=8,e.PATHSEG_CURVETO_QUADRATIC_REL=9,e.PATHSEG_ARC_ABS=10,e.PATHSEG_ARC_REL=11,e.PATHSEG_LINETO_HORIZONTAL_ABS=12,e.PATHSEG_LINETO_HORIZONTAL_REL=13,e.PATHSEG_LINETO_VERTICAL_ABS=14,e.PATHSEG_LINETO_VERTICAL_REL=15,e.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS=16,e.PATHSEG_CURVETO_CUBIC_SMOOTH_REL=17,e.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS=18,e.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL=19;var t=function(t){Object(r.a)(s,t);var a=Object(n.a)(s);function s(t){return Object(i.a)(this,s),a.call(this,e.PATHSEG_CLOSEPATH,"z",t)}return Object(o.a)(s,[{key:"toString",value:function(){return"[object SVGPathSegClosePath]"}},{key:"_asPathString",value:function(){return this.pathSegTypeAsLetter}},{key:"clone",value:function(){return new s(void 0)}}]),s}(e),a=function(t){Object(r.a)(s,t);var a=Object(n.a)(s);function s(t,r,n){var o;return Object(i.a)(this,s),(o=a.call(this,e.PATHSEG_MOVETO_ABS,"M",t))._x=r,o._y=n,o}return Object(o.a)(s,[{key:"toString",value:function(){return"[object SVGPathSegMovetoAbs]"}},{key:"_asPathString",value:function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y}},{key:"clone",value:function(){return new s(void 0,this._x,this._y)}}]),s}(e);Object.defineProperties(a.prototype,{x:{get:function(){return this._x},set:function(e){this._x=e,this._segmentChanged()},enumerable:!0},y:{get:function(){return this._y},set:function(e){this._y=e,this._segmentChanged()},enumerable:!0}});var s=function(t){Object(r.a)(s,t);var a=Object(n.a)(s);function s(t,r,n){var o;return Object(i.a)(this,s),(o=a.call(this,e.PATHSEG_MOVETO_REL,"m",t))._x=r,o._y=n,o}return Object(o.a)(s,[{key:"toString",value:function(){return"[object SVGPathSegMovetoRel]"}},{key:"_asPathString",value:function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y}},{key:"clone",value:function(){return new s(void 0,this._x,this._y)}}]),s}(e);Object.defineProperties(s.prototype,{x:{get:function(){return this._x},set:function(e){this._x=e,this._segmentChanged()},enumerable:!0},y:{get:function(){return this._y},set:function(e){this._y=e,this._segmentChanged()},enumerable:!0}});var l=function(t){Object(r.a)(s,t);var a=Object(n.a)(s);function s(t,r,n){var o;return Object(i.a)(this,s),(o=a.call(this,e.PATHSEG_LINETO_ABS,"L",t))._x=r,o._y=n,o}return Object(o.a)(s,[{key:"toString",value:function(){return"[object SVGPathSegLinetoAbs]"}},{key:"_asPathString",value:function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y}},{key:"clone",value:function(){return new s(void 0,this._x,this._y)}}]),s}(e);Object.defineProperties(l.prototype,{x:{get:function(){return this._x},set:function(e){this._x=e,this._segmentChanged()},enumerable:!0},y:{get:function(){return this._y},set:function(e){this._y=e,this._segmentChanged()},enumerable:!0}});var c=function(t){Object(r.a)(s,t);var a=Object(n.a)(s);function s(t,r,n){var o;return Object(i.a)(this,s),(o=a.call(this,e.PATHSEG_LINETO_REL,"l",t))._x=r,o._y=n,o}return Object(o.a)(s,[{key:"toString",value:function(){return"[object SVGPathSegLinetoRel]"}},{key:"_asPathString",value:function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y}},{key:"clone",value:function(){return new s(void 0,this._x,this._y)}}]),s}(e);Object.defineProperties(c.prototype,{x:{get:function(){return this._x},set:function(e){this._x=e,this._segmentChanged()},enumerable:!0},y:{get:function(){return this._y},set:function(e){this._y=e,this._segmentChanged()},enumerable:!0}});var u=function(t){Object(r.a)(s,t);var a=Object(n.a)(s);function s(t,r,n,o,l,c,u){var d;return Object(i.a)(this,s),(d=a.call(this,e.PATHSEG_CURVETO_CUBIC_ABS,"C",t))._x=r,d._y=n,d._x1=o,d._y1=l,d._x2=c,d._y2=u,d}return Object(o.a)(s,[{key:"toString",value:function(){return"[object SVGPathSegCurvetoCubicAbs]"}},{key:"_asPathString",value:function(){return this.pathSegTypeAsLetter+" "+this._x1+" "+this._y1+" "+this._x2+" "+this._y2+" "+this._x+" "+this._y}},{key:"clone",value:function(){return new s(void 0,this._x,this._y,this._x1,this._y1,this._x2,this._y2)}}]),s}(e);Object.defineProperties(u.prototype,{x:{get:function(){return this._x},set:function(e){this._x=e,this._segmentChanged()},enumerable:!0},y:{get:function(){return this._y},set:function(e){this._y=e,this._segmentChanged()},enumerable:!0},x1:{get:function(){return this._x1},set:function(e){this._x1=e,this._segmentChanged()},enumerable:!0},y1:{get:function(){return this._y1},set:function(e){this._y1=e,this._segmentChanged()},enumerable:!0},x2:{get:function(){return this._x2},set:function(e){this._x2=e,this._segmentChanged()},enumerable:!0},y2:{get:function(){return this._y2},set:function(e){this._y2=e,this._segmentChanged()},enumerable:!0}});var d=function(t){Object(r.a)(s,t);var a=Object(n.a)(s);function s(t,r,n,o,l,c,u){var d;return Object(i.a)(this,s),(d=a.call(this,e.PATHSEG_CURVETO_CUBIC_REL,"c",t))._x=r,d._y=n,d._x1=o,d._y1=l,d._x2=c,d._y2=u,d}return Object(o.a)(s,[{key:"toString",value:function(){return"[object SVGPathSegCurvetoCubicRel]"}},{key:"_asPathString",value:function(){return this.pathSegTypeAsLetter+" "+this._x1+" "+this._y1+" "+this._x2+" "+this._y2+" "+this._x+" "+this._y}},{key:"clone",value:function(){return new s(void 0,this._x,this._y,this._x1,this._y1,this._x2,this._y2)}}]),s}(e);Object.defineProperties(d.prototype,{x:{get:function(){return this._x},set:function(e){this._x=e,this._segmentChanged()},enumerable:!0},y:{get:function(){return this._y},set:function(e){this._y=e,this._segmentChanged()},enumerable:!0},x1:{get:function(){return this._x1},set:function(e){this._x1=e,this._segmentChanged()},enumerable:!0},y1:{get:function(){return this._y1},set:function(e){this._y1=e,this._segmentChanged()},enumerable:!0},x2:{get:function(){return this._x2},set:function(e){this._x2=e,this._segmentChanged()},enumerable:!0},y2:{get:function(){return this._y2},set:function(e){this._y2=e,this._segmentChanged()},enumerable:!0}});var p=function(t){Object(r.a)(s,t);var a=Object(n.a)(s);function s(t,r,n,o,l){var c;return Object(i.a)(this,s),(c=a.call(this,e.PATHSEG_CURVETO_QUADRATIC_ABS,"Q",t))._x=r,c._y=n,c._x1=o,c._y1=l,c}return Object(o.a)(s,[{key:"toString",value:function(){return"[object SVGPathSegCurvetoQuadraticAbs]"}},{key:"_asPathString",value:function(){return this.pathSegTypeAsLetter+" "+this._x1+" "+this._y1+" "+this._x+" "+this._y}},{key:"clone",value:function(){return new s(void 0,this._x,this._y,this._x1,this._y1)}}]),s}(e);Object.defineProperties(p.prototype,{x:{get:function(){return this._x},set:function(e){this._x=e,this._segmentChanged()},enumerable:!0},y:{get:function(){return this._y},set:function(e){this._y=e,this._segmentChanged()},enumerable:!0},x1:{get:function(){return this._x1},set:function(e){this._x1=e,this._segmentChanged()},enumerable:!0},y1:{get:function(){return this._y1},set:function(e){this._y1=e,this._segmentChanged()},enumerable:!0}});var m=function(t){Object(r.a)(s,t);var a=Object(n.a)(s);function s(t,r,n,o,l){var c;return Object(i.a)(this,s),(c=a.call(this,e.PATHSEG_CURVETO_QUADRATIC_REL,"q",t))._x=r,c._y=n,c._x1=o,c._y1=l,c}return Object(o.a)(s,[{key:"toString",value:function(){return"[object SVGPathSegCurvetoQuadraticRel]"}},{key:"_asPathString",value:function(){return this.pathSegTypeAsLetter+" "+this._x1+" "+this._y1+" "+this._x+" "+this._y}},{key:"clone",value:function(){return new s(void 0,this._x,this._y,this._x1,this._y1)}}]),s}(e);Object.defineProperties(m.prototype,{x:{get:function(){return this._x},set:function(e){this._x=e,this._segmentChanged()},enumerable:!0},y:{get:function(){return this._y},set:function(e){this._y=e,this._segmentChanged()},enumerable:!0},x1:{get:function(){return this._x1},set:function(e){this._x1=e,this._segmentChanged()},enumerable:!0},y1:{get:function(){return this._y1},set:function(e){this._y1=e,this._segmentChanged()},enumerable:!0}});var h=function(t){Object(r.a)(s,t);var a=Object(n.a)(s);function s(t,r,n,o,l,c,u,d){var p;return Object(i.a)(this,s),(p=a.call(this,e.PATHSEG_ARC_ABS,"A",t))._x=r,p._y=n,p._r1=o,p._r2=l,p._angle=c,p._largeArcFlag=u,p._sweepFlag=d,p}return Object(o.a)(s,[{key:"toString",value:function(){return"[object SVGPathSegArcAbs]"}},{key:"_asPathString",value:function(){return this.pathSegTypeAsLetter+" "+this._r1+" "+this._r2+" "+this._angle+" "+(this._largeArcFlag?"1":"0")+" "+(this._sweepFlag?"1":"0")+" "+this._x+" "+this._y}},{key:"clone",value:function(){return new s(void 0,this._x,this._y,this._r1,this._r2,this._angle,this._largeArcFlag,this._sweepFlag)}}]),s}(e);Object.defineProperties(h.prototype,{x:{get:function(){return this._x},set:function(e){this._x=e,this._segmentChanged()},enumerable:!0},y:{get:function(){return this._y},set:function(e){this._y=e,this._segmentChanged()},enumerable:!0},r1:{get:function(){return this._r1},set:function(e){this._r1=e,this._segmentChanged()},enumerable:!0},r2:{get:function(){return this._r2},set:function(e){this._r2=e,this._segmentChanged()},enumerable:!0},angle:{get:function(){return this._angle},set:function(e){this._angle=e,this._segmentChanged()},enumerable:!0},largeArcFlag:{get:function(){return this._largeArcFlag},set:function(e){this._largeArcFlag=e,this._segmentChanged()},enumerable:!0},sweepFlag:{get:function(){return this._sweepFlag},set:function(e){this._sweepFlag=e,this._segmentChanged()},enumerable:!0}});var g=function(t){Object(r.a)(s,t);var a=Object(n.a)(s);function s(t,r,n,o,l,c,u,d){var p;return Object(i.a)(this,s),(p=a.call(this,e.PATHSEG_ARC_REL,"a",t))._x=r,p._y=n,p._r1=o,p._r2=l,p._angle=c,p._largeArcFlag=u,p._sweepFlag=d,p}return Object(o.a)(s,[{key:"toString",value:function(){return"[object SVGPathSegArcRel]"}},{key:"_asPathString",value:function(){return this.pathSegTypeAsLetter+" "+this._r1+" "+this._r2+" "+this._angle+" "+(this._largeArcFlag?"1":"0")+" "+(this._sweepFlag?"1":"0")+" "+this._x+" "+this._y}},{key:"clone",value:function(){return new s(void 0,this._x,this._y,this._r1,this._r2,this._angle,this._largeArcFlag,this._sweepFlag)}}]),s}(e);Object.defineProperties(g.prototype,{x:{get:function(){return this._x},set:function(e){this._x=e,this._segmentChanged()},enumerable:!0},y:{get:function(){return this._y},set:function(e){this._y=e,this._segmentChanged()},enumerable:!0},r1:{get:function(){return this._r1},set:function(e){this._r1=e,this._segmentChanged()},enumerable:!0},r2:{get:function(){return this._r2},set:function(e){this._r2=e,this._segmentChanged()},enumerable:!0},angle:{get:function(){return this._angle},set:function(e){this._angle=e,this._segmentChanged()},enumerable:!0},largeArcFlag:{get:function(){return this._largeArcFlag},set:function(e){this._largeArcFlag=e,this._segmentChanged()},enumerable:!0},sweepFlag:{get:function(){return this._sweepFlag},set:function(e){this._sweepFlag=e,this._segmentChanged()},enumerable:!0}});var f=function(t){Object(r.a)(s,t);var a=Object(n.a)(s);function s(t,r){var n;return Object(i.a)(this,s),(n=a.call(this,e.PATHSEG_LINETO_HORIZONTAL_ABS,"H",t))._x=r,n}return Object(o.a)(s,[{key:"toString",value:function(){return"[object SVGPathSegLinetoHorizontalAbs]"}},{key:"_asPathString",value:function(){return this.pathSegTypeAsLetter+" "+this._x}},{key:"clone",value:function(){return new s(void 0,this._x)}}]),s}(e);Object.defineProperty(f.prototype,"x",{get:function(){return this._x},set:function(e){this._x=e,this._segmentChanged()},enumerable:!0});var v=function(t){Object(r.a)(s,t);var a=Object(n.a)(s);function s(t,r){var n;return Object(i.a)(this,s),(n=a.call(this,e.PATHSEG_LINETO_HORIZONTAL_REL,"h",t))._x=r,n}return Object(o.a)(s,[{key:"toString",value:function(){return"[object SVGPathSegLinetoHorizontalRel]"}},{key:"_asPathString",value:function(){return this.pathSegTypeAsLetter+" "+this._x}},{key:"clone",value:function(){return new s(void 0,this._x)}}]),s}(e);Object.defineProperty(v.prototype,"x",{get:function(){return this._x},set:function(e){this._x=e,this._segmentChanged()},enumerable:!0});var b=function(t){Object(r.a)(s,t);var a=Object(n.a)(s);function s(t,r){var n;return Object(i.a)(this,s),(n=a.call(this,e.PATHSEG_LINETO_VERTICAL_ABS,"V",t))._y=r,n}return Object(o.a)(s,[{key:"toString",value:function(){return"[object SVGPathSegLinetoVerticalAbs]"}},{key:"_asPathString",value:function(){return this.pathSegTypeAsLetter+" "+this._y}},{key:"clone",value:function(){return new s(void 0,this._y)}}]),s}(e);Object.defineProperty(b.prototype,"y",{get:function(){return this._y},set:function(e){this._y=e,this._segmentChanged()},enumerable:!0});var A=function(t){Object(r.a)(s,t);var a=Object(n.a)(s);function s(t,r){var n;return Object(i.a)(this,s),(n=a.call(this,e.PATHSEG_LINETO_VERTICAL_REL,"v",t))._y=r,n}return Object(o.a)(s,[{key:"toString",value:function(){return"[object SVGPathSegLinetoVerticalRel]"}},{key:"_asPathString",value:function(){return this.pathSegTypeAsLetter+" "+this._y}},{key:"clone",value:function(){return new s(void 0,this._y)}}]),s}(e);Object.defineProperty(A.prototype,"y",{get:function(){return this._y},set:function(e){this._y=e,this._segmentChanged()},enumerable:!0});var y=function(t){Object(r.a)(s,t);var a=Object(n.a)(s);function s(t,r,n,o,l){var c;return Object(i.a)(this,s),(c=a.call(this,e.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS,"S",t))._x=r,c._y=n,c._x2=o,c._y2=l,c}return Object(o.a)(s,[{key:"toString",value:function(){return"[object SVGPathSegCurvetoCubicSmoothAbs]"}},{key:"_asPathString",value:function(){return this.pathSegTypeAsLetter+" "+this._x2+" "+this._y2+" "+this._x+" "+this._y}},{key:"clone",value:function(){return new s(void 0,this._x,this._y,this._x2,this._y2)}}]),s}(e);Object.defineProperties(y.prototype,{x:{get:function(){return this._x},set:function(e){this._x=e,this._segmentChanged()},enumerable:!0},y:{get:function(){return this._y},set:function(e){this._y=e,this._segmentChanged()},enumerable:!0},x2:{get:function(){return this._x2},set:function(e){this._x2=e,this._segmentChanged()},enumerable:!0},y2:{get:function(){return this._y2},set:function(e){this._y2=e,this._segmentChanged()},enumerable:!0}});var _=function(t){Object(r.a)(s,t);var a=Object(n.a)(s);function s(t,r,n,o,l){var c;return Object(i.a)(this,s),(c=a.call(this,e.PATHSEG_CURVETO_CUBIC_SMOOTH_REL,"s",t))._x=r,c._y=n,c._x2=o,c._y2=l,c}return Object(o.a)(s,[{key:"toString",value:function(){return"[object SVGPathSegCurvetoCubicSmoothRel]"}},{key:"_asPathString",value:function(){return this.pathSegTypeAsLetter+" "+this._x2+" "+this._y2+" "+this._x+" "+this._y}},{key:"clone",value:function(){return new s(void 0,this._x,this._y,this._x2,this._y2)}}]),s}(e);Object.defineProperties(_.prototype,{x:{get:function(){return this._x},set:function(e){this._x=e,this._segmentChanged()},enumerable:!0},y:{get:function(){return this._y},set:function(e){this._y=e,this._segmentChanged()},enumerable:!0},x2:{get:function(){return this._x2},set:function(e){this._x2=e,this._segmentChanged()},enumerable:!0},y2:{get:function(){return this._y2},set:function(e){this._y2=e,this._segmentChanged()},enumerable:!0}});var E=function(t){Object(r.a)(s,t);var a=Object(n.a)(s);function s(t,r,n){var o;return Object(i.a)(this,s),(o=a.call(this,e.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS,"T",t))._x=r,o._y=n,o}return Object(o.a)(s,[{key:"toString",value:function(){return"[object SVGPathSegCurvetoQuadraticSmoothAbs]"}},{key:"_asPathString",value:function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y}},{key:"clone",value:function(){return new s(void 0,this._x,this._y)}}]),s}(e);Object.defineProperties(E.prototype,{x:{get:function(){return this._x},set:function(e){this._x=e,this._segmentChanged()},enumerable:!0},y:{get:function(){return this._y},set:function(e){this._y=e,this._segmentChanged()},enumerable:!0}});var S=function(t){Object(r.a)(s,t);var a=Object(n.a)(s);function s(t,r,n){var o;return Object(i.a)(this,s),(o=a.call(this,e.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL,"t",t))._x=r,o._y=n,o}return Object(o.a)(s,[{key:"toString",value:function(){return"[object SVGPathSegCurvetoQuadraticSmoothRel]"}},{key:"_asPathString",value:function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y}},{key:"clone",value:function(){return new s(void 0,this._x,this._y)}}]),s}(e);Object.defineProperties(S.prototype,{x:{get:function(){return this._x},set:function(e){this._x=e,this._segmentChanged()},enumerable:!0},y:{get:function(){return this._y},set:function(e){this._y=e,this._segmentChanged()},enumerable:!0}}),SVGPathElement.prototype.createSVGPathSegClosePath=function(){return new t(void 0)},SVGPathElement.prototype.createSVGPathSegMovetoAbs=function(e,t){return new a(void 0,e,t)},SVGPathElement.prototype.createSVGPathSegMovetoRel=function(e,t){return new s(void 0,e,t)},SVGPathElement.prototype.createSVGPathSegLinetoAbs=function(e,t){return new l(void 0,e,t)},SVGPathElement.prototype.createSVGPathSegLinetoRel=function(e,t){return new c(void 0,e,t)},SVGPathElement.prototype.createSVGPathSegCurvetoCubicAbs=function(e,t,a,r,n,i){return new u(void 0,e,t,a,r,n,i)},SVGPathElement.prototype.createSVGPathSegCurvetoCubicRel=function(e,t,a,r,n,i){return new d(void 0,e,t,a,r,n,i)},SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticAbs=function(e,t,a,r){return new p(void 0,e,t,a,r)},SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticRel=function(e,t,a,r){return new m(void 0,e,t,a,r)},SVGPathElement.prototype.createSVGPathSegArcAbs=function(e,t,a,r,n,i,o){return new h(void 0,e,t,a,r,n,i,o)},SVGPathElement.prototype.createSVGPathSegArcRel=function(e,t,a,r,n,i,o){return new g(void 0,e,t,a,r,n,i,o)},SVGPathElement.prototype.createSVGPathSegLinetoHorizontalAbs=function(e){return new f(void 0,e)},SVGPathElement.prototype.createSVGPathSegLinetoHorizontalRel=function(e){return new v(void 0,e)},SVGPathElement.prototype.createSVGPathSegLinetoVerticalAbs=function(e){return new b(void 0,e)},SVGPathElement.prototype.createSVGPathSegLinetoVerticalRel=function(e){return new A(void 0,e)},SVGPathElement.prototype.createSVGPathSegCurvetoCubicSmoothAbs=function(e,t,a,r){return new y(void 0,e,t,a,r)},SVGPathElement.prototype.createSVGPathSegCurvetoCubicSmoothRel=function(e,t,a,r){return new _(void 0,e,t,a,r)},SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticSmoothAbs=function(e,t){return new E(void 0,e,t)},SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticSmoothRel=function(e,t){return new S(void 0,e,t)},"getPathSegAtLength"in SVGPathElement.prototype||(SVGPathElement.prototype.getPathSegAtLength=function(e){if(void 0===e||!isFinite(e))throw new Error("Invalid arguments.");var t=document.createElementNS("http://www.w3.org/2000/svg","path");t.setAttribute("d",this.getAttribute("d"));var a=t.pathSegList.numberOfItems-1;if(a<=0)return 0;do{if(t.pathSegList.removeItem(a),e>t.getTotalLength())break;a--}while(a>0);return a}),window.SVGPathSeg=e,window.SVGPathSegClosePath=t,window.SVGPathSegMovetoAbs=a,window.SVGPathSegMovetoRel=s,window.SVGPathSegLinetoAbs=l,window.SVGPathSegLinetoRel=c,window.SVGPathSegCurvetoCubicAbs=u,window.SVGPathSegCurvetoCubicRel=d,window.SVGPathSegCurvetoQuadraticAbs=p,window.SVGPathSegCurvetoQuadraticRel=m,window.SVGPathSegArcAbs=h,window.SVGPathSegArcRel=g,window.SVGPathSegLinetoHorizontalAbs=f,window.SVGPathSegLinetoHorizontalRel=v,window.SVGPathSegLinetoVerticalAbs=b,window.SVGPathSegLinetoVerticalRel=A,window.SVGPathSegCurvetoCubicSmoothAbs=y,window.SVGPathSegCurvetoCubicSmoothRel=_,window.SVGPathSegCurvetoQuadraticSmoothAbs=E,window.SVGPathSegCurvetoQuadraticSmoothRel=S}if(!("SVGPathSegList"in window)||!("appendItem"in window.SVGPathSegList.prototype)){var C=function(){function e(t){Object(i.a)(this,e),this._pathElement=t,this._list=this._parsePath(this._pathElement.getAttribute("d")),this._mutationObserverConfig={attributes:!0,attributeFilter:["d"]},this._pathElementMutationObserver=new MutationObserver(this._updateListFromPathMutations.bind(this)),this._pathElementMutationObserver.observe(this._pathElement,this._mutationObserverConfig)}return Object(o.a)(e,[{key:"_checkPathSynchronizedToList",value:function(){this._updateListFromPathMutations(this._pathElementMutationObserver.takeRecords())}},{key:"_updateListFromPathMutations",value:function(e){if(this._pathElement){var t=!1;e.forEach((function(e){"d"===e.attributeName&&(t=!0)})),t&&(this._list=this._parsePath(this._pathElement.getAttribute("d")))}}},{key:"_writeListToPath",value:function(){this._pathElementMutationObserver.disconnect(),this._pathElement.setAttribute("d",e._pathSegArrayAsString(this._list)),this._pathElementMutationObserver.observe(this._pathElement,this._mutationObserverConfig)}},{key:"segmentChanged",value:function(e){this._writeListToPath()}},{key:"clear",value:function(){this._checkPathSynchronizedToList(),this._list.forEach((function(e){e._owningPathSegList=null})),this._list=[],this._writeListToPath()}},{key:"initialize",value:function(e){return this._checkPathSynchronizedToList(),this._list=[e],e._owningPathSegList=this,this._writeListToPath(),e}},{key:"_checkValidIndex",value:function(e){if(isNaN(e)||e<0||e>=this.numberOfItems)throw new Error("INDEX_SIZE_ERR")}},{key:"getItem",value:function(e){return this._checkPathSynchronizedToList(),this._checkValidIndex(e),this._list[e]}},{key:"insertItemBefore",value:function(e,t){return this._checkPathSynchronizedToList(),t>this.numberOfItems&&(t=this.numberOfItems),e._owningPathSegList&&(e=e.clone()),this._list.splice(t,0,e),e._owningPathSegList=this,this._writeListToPath(),e}},{key:"replaceItem",value:function(e,t){return this._checkPathSynchronizedToList(),e._owningPathSegList&&(e=e.clone()),this._checkValidIndex(t),this._list[t]=e,e._owningPathSegList=this,this._writeListToPath(),e}},{key:"removeItem",value:function(e){this._checkPathSynchronizedToList(),this._checkValidIndex(e);var t=this._list[e];return this._list.splice(e,1),this._writeListToPath(),t}},{key:"appendItem",value:function(e){return this._checkPathSynchronizedToList(),e._owningPathSegList&&(e=e.clone()),this._list.push(e),e._owningPathSegList=this,this._writeListToPath(),e}},{key:"_parsePath",value:function(e){if(!e||!e.length)return[];var t=this,a=function(){function e(){Object(i.a)(this,e),this.pathSegList=[]}return Object(o.a)(e,[{key:"appendSegment",value:function(e){this.pathSegList.push(e)}}]),e}(),r=function(){function e(t){Object(i.a)(this,e),this._string=t,this._currentIndex=0,this._endIndex=this._string.length,this._previousCommand=SVGPathSeg.PATHSEG_UNKNOWN,this._skipOptionalSpaces()}return Object(o.a)(e,[{key:"_isCurrentSpace",value:function(){var e=this._string[this._currentIndex];return e<=" "&&(" "===e||"\n"===e||"\t"===e||"\r"===e||"\f"===e)}},{key:"_skipOptionalSpaces",value:function(){for(;this._currentIndex<this._endIndex&&this._isCurrentSpace();)this._currentIndex++;return this._currentIndex<this._endIndex}},{key:"_skipOptionalSpacesOrDelimiter",value:function(){return!(this._currentIndex<this._endIndex&&!this._isCurrentSpace()&&","!==this._string.charAt(this._currentIndex))&&(this._skipOptionalSpaces()&&this._currentIndex<this._endIndex&&","===this._string.charAt(this._currentIndex)&&(this._currentIndex++,this._skipOptionalSpaces()),this._currentIndex<this._endIndex)}},{key:"hasMoreData",value:function(){return this._currentIndex<this._endIndex}},{key:"peekSegmentType",value:function(){var e=this._string[this._currentIndex];return this._pathSegTypeFromChar(e)}},{key:"_pathSegTypeFromChar",value:function(e){switch(e){case"Z":case"z":return SVGPathSeg.PATHSEG_CLOSEPATH;case"M":return SVGPathSeg.PATHSEG_MOVETO_ABS;case"m":return SVGPathSeg.PATHSEG_MOVETO_REL;case"L":return SVGPathSeg.PATHSEG_LINETO_ABS;case"l":return SVGPathSeg.PATHSEG_LINETO_REL;case"C":return SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS;case"c":return SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL;case"Q":return SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS;case"q":return SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL;case"A":return SVGPathSeg.PATHSEG_ARC_ABS;case"a":return SVGPathSeg.PATHSEG_ARC_REL;case"H":return SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS;case"h":return SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL;case"V":return SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS;case"v":return SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL;case"S":return SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS;case"s":return SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL;case"T":return SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS;case"t":return SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL;default:return SVGPathSeg.PATHSEG_UNKNOWN}}},{key:"_nextCommandHelper",value:function(e,t){return("+"===e||"-"===e||"."===e||e>="0"&&e<="9")&&t!==SVGPathSeg.PATHSEG_CLOSEPATH?t===SVGPathSeg.PATHSEG_MOVETO_ABS?SVGPathSeg.PATHSEG_LINETO_ABS:t===SVGPathSeg.PATHSEG_MOVETO_REL?SVGPathSeg.PATHSEG_LINETO_REL:t:SVGPathSeg.PATHSEG_UNKNOWN}},{key:"initialCommandIsMoveTo",value:function(){if(!this.hasMoreData())return!0;var e=this.peekSegmentType();return e===SVGPathSeg.PATHSEG_MOVETO_ABS||e===SVGPathSeg.PATHSEG_MOVETO_REL}},{key:"_parseNumber",value:function(){var e=0,t=0,a=1,r=0,n=1,i=1,o=this._currentIndex;if(this._skipOptionalSpaces(),this._currentIndex<this._endIndex&&"+"===this._string.charAt(this._currentIndex)?this._currentIndex++:this._currentIndex<this._endIndex&&"-"===this._string.charAt(this._currentIndex)&&(this._currentIndex++,n=-1),!(this._currentIndex===this._endIndex||(this._string.charAt(this._currentIndex)<"0"||this._string.charAt(this._currentIndex)>"9")&&"."!==this._string.charAt(this._currentIndex))){for(var s=this._currentIndex;this._currentIndex<this._endIndex&&this._string.charAt(this._currentIndex)>="0"&&this._string.charAt(this._currentIndex)<="9";)this._currentIndex++;if(this._currentIndex!==s)for(var l=this._currentIndex-1,c=1;l>=s;)t+=c*(this._string.charAt(l--)-"0"),c*=10;if(this._currentIndex<this._endIndex&&"."===this._string.charAt(this._currentIndex)){if(this._currentIndex++,this._currentIndex>=this._endIndex||this._string.charAt(this._currentIndex)<"0"||this._string.charAt(this._currentIndex)>"9")return;for(;this._currentIndex<this._endIndex&&this._string.charAt(this._currentIndex)>="0"&&this._string.charAt(this._currentIndex)<="9";)a*=10,r+=(this._string.charAt(this._currentIndex)-"0")/a,this._currentIndex+=1}if(this._currentIndex!==o&&this._currentIndex+1<this._endIndex&&("e"===this._string.charAt(this._currentIndex)||"E"===this._string.charAt(this._currentIndex))&&"x"!==this._string.charAt(this._currentIndex+1)&&"m"!==this._string.charAt(this._currentIndex+1)){if(this._currentIndex++,"+"===this._string.charAt(this._currentIndex)?this._currentIndex++:"-"===this._string.charAt(this._currentIndex)&&(this._currentIndex++,i=-1),this._currentIndex>=this._endIndex||this._string.charAt(this._currentIndex)<"0"||this._string.charAt(this._currentIndex)>"9")return;for(;this._currentIndex<this._endIndex&&this._string.charAt(this._currentIndex)>="0"&&this._string.charAt(this._currentIndex)<="9";)e*=10,e+=this._string.charAt(this._currentIndex)-"0",this._currentIndex++}var u=t+r;if(u*=n,e&&(u*=Math.pow(10,i*e)),o!==this._currentIndex)return this._skipOptionalSpacesOrDelimiter(),u}}},{key:"_parseArcFlag",value:function(){if(!(this._currentIndex>=this._endIndex)){var e=!1,t=this._string.charAt(this._currentIndex++);if("0"===t)e=!1;else{if("1"!==t)return;e=!0}return this._skipOptionalSpacesOrDelimiter(),e}}},{key:"parseSegment",value:function(){var e=this._string[this._currentIndex],a=this._pathSegTypeFromChar(e);if(a===SVGPathSeg.PATHSEG_UNKNOWN){if(this._previousCommand===SVGPathSeg.PATHSEG_UNKNOWN)return null;if((a=this._nextCommandHelper(e,this._previousCommand))===SVGPathSeg.PATHSEG_UNKNOWN)return null}else this._currentIndex++;switch(this._previousCommand=a,a){case SVGPathSeg.PATHSEG_MOVETO_REL:return new SVGPathSegMovetoRel(t,this._parseNumber(),this._parseNumber());case SVGPathSeg.PATHSEG_MOVETO_ABS:return new SVGPathSegMovetoAbs(t,this._parseNumber(),this._parseNumber());case SVGPathSeg.PATHSEG_LINETO_REL:return new SVGPathSegLinetoRel(t,this._parseNumber(),this._parseNumber());case SVGPathSeg.PATHSEG_LINETO_ABS:return new SVGPathSegLinetoAbs(t,this._parseNumber(),this._parseNumber());case SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL:return new SVGPathSegLinetoHorizontalRel(t,this._parseNumber());case SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS:return new SVGPathSegLinetoHorizontalAbs(t,this._parseNumber());case SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL:return new SVGPathSegLinetoVerticalRel(t,this._parseNumber());case SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS:return new SVGPathSegLinetoVerticalAbs(t,this._parseNumber());case SVGPathSeg.PATHSEG_CLOSEPATH:return this._skipOptionalSpaces(),new SVGPathSegClosePath(t);case SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL:var r={x1:this._parseNumber(),y1:this._parseNumber(),x2:this._parseNumber(),y2:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()};return new SVGPathSegCurvetoCubicRel(t,r.x,r.y,r.x1,r.y1,r.x2,r.y2);case SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS:var n={x1:this._parseNumber(),y1:this._parseNumber(),x2:this._parseNumber(),y2:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()};return new SVGPathSegCurvetoCubicAbs(t,n.x,n.y,n.x1,n.y1,n.x2,n.y2);case SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL:var i={x2:this._parseNumber(),y2:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()};return new SVGPathSegCurvetoCubicSmoothRel(t,i.x,i.y,i.x2,i.y2);case SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS:var o={x2:this._parseNumber(),y2:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()};return new SVGPathSegCurvetoCubicSmoothAbs(t,o.x,o.y,o.x2,o.y2);case SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL:var s={x1:this._parseNumber(),y1:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()};return new SVGPathSegCurvetoQuadraticRel(t,s.x,s.y,s.x1,s.y1);case SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS:var l={x1:this._parseNumber(),y1:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()};return new SVGPathSegCurvetoQuadraticAbs(t,l.x,l.y,l.x1,l.y1);case SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL:return new SVGPathSegCurvetoQuadraticSmoothRel(t,this._parseNumber(),this._parseNumber());case SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS:return new SVGPathSegCurvetoQuadraticSmoothAbs(t,this._parseNumber(),this._parseNumber());case SVGPathSeg.PATHSEG_ARC_REL:var c={x1:this._parseNumber(),y1:this._parseNumber(),arcAngle:this._parseNumber(),arcLarge:this._parseArcFlag(),arcSweep:this._parseArcFlag(),x:this._parseNumber(),y:this._parseNumber()};return new SVGPathSegArcRel(t,c.x,c.y,c.x1,c.y1,c.arcAngle,c.arcLarge,c.arcSweep);case SVGPathSeg.PATHSEG_ARC_ABS:var u={x1:this._parseNumber(),y1:this._parseNumber(),arcAngle:this._parseNumber(),arcLarge:this._parseArcFlag(),arcSweep:this._parseArcFlag(),x:this._parseNumber(),y:this._parseNumber()};return new SVGPathSegArcAbs(t,u.x,u.y,u.x1,u.y1,u.arcAngle,u.arcLarge,u.arcSweep);default:throw new Error("Unknown path seg type.")}}}]),e}(),n=new a,s=new r(e);if(!s.initialCommandIsMoveTo())return[];for(;s.hasMoreData();){var l=s.parseSegment();if(!l)return[];n.appendSegment(l)}return n.pathSegList}}],[{key:"_pathSegArrayAsString",value:function(e){var t="",a=!0;return e.forEach((function(e){a?(a=!1,t+=e._asPathString()):t+=" "+e._asPathString()})),t}}]),e}();C.prototype.classname="SVGPathSegList",Object.defineProperty(C.prototype,"numberOfItems",{get:function(){return this._checkPathSynchronizedToList(),this._list.length},enumerable:!0}),Object.defineProperties(SVGPathElement.prototype,{pathSegList:{get:function(){return this._pathSegList||(this._pathSegList=new C(this)),this._pathSegList},enumerable:!0},normalizedPathSegList:{get:function(){return this.pathSegList},enumerable:!0},animatedPathSegList:{get:function(){return this.pathSegList},enumerable:!0},animatedNormalizedPathSegList:{get:function(){return this.pathSegList},enumerable:!0}}),window.SVGPathSegList=C}}()},157:function(e,t,a){"use strict";var r=a(7),n=a(10),i=a(11),o=a(13),s=a(16),l=a(15),c=a(0),u=a.n(c),d=a(1),p=a.n(d),m=function(e){return u.a.createElement("div",{className:"multiSelect"},u.a.createElement("div",{className:"searchInput"},u.a.createElement("div",{className:"input-group input-group-sm"},u.a.createElement("div",{className:"input-group-prepend"},u.a.createElement("span",{className:"input-group-text"},u.a.createElement("i",{className:"nf nf-search"}))),u.a.createElement("input",{type:"text",name:"Search",placeholder:e.language.main.search,className:"input-box form-control",value:e.searchFileldVal,onChange:function(t){return e.searchFun(t)},onKeyDown:function(t){return e.searchFun(t)},autoComplete:"off"}),function(){if(e.checkedData&&e.checkedData.length)return u.a.createElement("div",{className:"input-group-append",onClick:function(t){return e.clearAllData()}},u.a.createElement("span",{className:"input-group-text clearField"},u.a.createElement("i",{className:"nf nf-delete"})))}()),u.a.createElement("div",{className:"filter-append"},u.a.createElement("span",{className:"filter-btn dropdown-toggle","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},u.a.createElement("i",{className:"nf nf-filter-line"})),u.a.createElement("div",{className:"dropdown-menu search-result"},u.a.createElement("div",{className:"listScroll scrollbar"},e.listData?e.listData.map((function(t,a){return u.a.createElement("div",{className:"dropdown-item",key:"category_"+t.value},u.a.createElement("div",{className:"custom-control custom-checkbox"},u.a.createElement("input",{type:"checkbox",className:"custom-control-input",id:"cat_"+t.value,value:t.value,onChange:function(t){return e.checkBox(t.target.value,t.target.checked)},checked:!!e.checkedData.includes(t.value),name:a,ref:function(e){e&&(e.indeterminate=t.indeterminate)}}),u.a.createElement("label",{className:"custom-control-label",htmlFor:"cat_"+t.value},t.name),function(t,a,r){if(t&&t.length)return u.a.createElement("label",null,u.a.createElement("span",{className:"btn btn-link"+(e.toggleCheckedData.includes(r)?" active":""),"data-toggle":"collapse","data-target":"#multiCollapse_"+a,"aria-expanded":"false","aria-controls":"multiCollapse_"+a},u.a.createElement("i",{className:"nf nf-delete"}),u.a.createElement("input",{type:"checkbox",value:"toggleIcon_"+r,checked:!!e.toggleCheckedData.includes(r),onChange:function(t){return e.onToggleIconClicked(t.target.value,t.target.checked)},className:"hidden"})))}(t.subCat,a,t.value)),u.a.createElement("div",{className:"dropdown-item-sub collapse multi-collapse"+(e.toggleCheckedData.includes(t.value)?" show":""),id:"multiCollapse_"+a},function(t,a){return t?t.map((function(t,r){return u.a.createElement("div",{className:"dropdown-item",key:"subCategory_"+t.value+"_"+r},u.a.createElement("div",{className:"custom-control custom-checkbox"},u.a.createElement("input",{type:"checkbox",className:"custom-control-input",id:"subCat_"+t.value,value:t.value,onChange:function(t){return e.checkBox(t.target.value,t.target.checked)},checked:!!e.checkedData.includes(t.value),name:a}),u.a.createElement("label",{className:"custom-control-label",htmlFor:"subCat_"+t.value},t.name)))})):null}(t.subCat,a)))})):null),u.a.createElement("div",{className:"listFixed"},u.a.createElement("div",{className:"dropdown-item"},e.checkedData&&e.checkedData.length?u.a.createElement("div",{className:"btn btn-block btn-dark btn-sm",onClick:function(t){return e.applyFilter(t)}},e.language.shared.apply):u.a.createElement("div",{className:"btn btn-block btn-dark btn-sm"},e.language.shared.apply)))))),function(){if(e.filteredTag&&e.filteredTag.length)return u.a.createElement("div",{className:"search-drop"},u.a.createElement("div",{className:"search scrollbar"},e.filteredTag.map((function(t){return u.a.createElement("div",{className:"search-list",key:t.name,onClick:function(a){return e.onFilteredItemSelected(t.name)}},u.a.createElement("i",{className:"nf nf-search"}),u.a.createElement("span",null,t.name))}))))}())},h=a(22),g=a.n(h),f=a(24),v=function(e){Object(s.a)(a,e);var t=Object(l.a)(a);function a(e){var i;return Object(n.a)(this,a),(i=t.call(this,e)).setIndeterminate=function(e){if(null!=e){e=parseInt(e);var t=0,a=i.state.checked,n=Object(r.a)(i.state.dropDownValue);n[e].subCat.forEach((function(e){-1!==a.indexOf(e.value)&&t++})),t>0?t===n[e].subCat.length?n[e].indeterminate=!1:t<n[e].subCat.length&&(n[e].indeterminate=!0):n[e].indeterminate=!1,i.setState({dropDownValue:n})}},i.sortCategory=function(e){return e.sort((function(e,t){return e.order-t.order})),e},i.state={checked:[],dropDownValue:[],tagList:[],filteredTag:[],searchFileldVal:"",toggleChecked:[]},i.checkBox=i.checkBox.bind(Object(o.a)(i)),i.clearAllData=i.clearAllData.bind(Object(o.a)(i)),i.searchFun=i.searchFun.bind(Object(o.a)(i)),i.applyFilter=i.applyFilter.bind(Object(o.a)(i)),i.handleDropdownClick=i.handleDropdownClick.bind(Object(o.a)(i)),i.onFilteredItemSelected=i.onFilteredItemSelected.bind(Object(o.a)(i)),i.onToggleIconClicked=i.onToggleIconClicked.bind(Object(o.a)(i)),i.hideTagSuggestionList=i.hideTagSuggestionList.bind(Object(o.a)(i)),i}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.props.onRef(this);var t=Object(r.a)(this.props.options);(t=this.sortCategory(t)).forEach((function(e){e.indeterminate=!1})),this.setState({dropDownValue:t},(function(){if(e.state.dropDownValue.forEach((function(e){e.subCat.map((function(t){t.pValue=e.value}))})),e.state.dropDownValue&&e.props.primeCatStatus)for(var t=0,a=0;a<e.state.dropDownValue.length;a++)if(1===e.state.dropDownValue[a].isDefault){t=0;for(var r=0;r<e.state.dropDownValue[a].subCat.length;r++)if(1===e.state.dropDownValue[a].subCat[r].isDefault){e.checkBox(e.state.dropDownValue[a].subCat[r].value,!0,a),t++;break}0===t&&e.checkBox(e.state.dropDownValue[a].value,!0,a);break}"function"===typeof e.props.afterPrimeCatSet&&e.props.afterPrimeCatSet(e.state.checked)})),this.setState({tagList:this.props.tagList});var a=this;g()(document).mouseup((function(e){g()(".listScroll.scrollbar").off("click").on("click",(function(e){if(e.stopPropagation(),e.target.value)if(e.target.value.includes("toggleIcon_")){var t=e.target.value.split("_");t=t[1],a.onToggleIconClicked(t,e.target.checked)}else a.checkBox(e.target.value,e.target.checked,e.target.name);a.hideTagSuggestionList()}))}))}},{key:"componentWillUnmount",value:function(){this.props.onRef(void 0)}},{key:"removeChip",value:function(e){this.checkBox(e,!1)}},{key:"clearAllData",value:function(){var e=this,t=this.state.checked;t=[],this.setState({checked:t},(function(){e.props.onSelectOptions(e.state.checked),e.props.afterClearAll();var t=Object(r.a)(e.props.options);(t=e.sortCategory(t)).forEach((function(e){e.indeterminate=!1})),e.setState({dropDownValue:t})}))}},{key:"checkBox",value:function(e,t,a){var r=this;e&&(e=parseInt(e));var n=this.state.checked;if(t){n.push(e);var i=this.state.dropDownValue.findIndex((function(t){return t.value===e}));if(-1!==i)this.state.dropDownValue[i].subCat.forEach((function(e){-1===n.indexOf(e.value)&&n.push(e.value)}));else{var o,s=0,l=0,c={};if(this.state.dropDownValue.forEach((function(t){t.subCat.forEach((function(t){t.value===e&&(s=t.pValue)}))})),o=(c=this.state.dropDownValue.filter((function(e){return e.value===s}))[0]).subCat.length,c.subCat.forEach((function(e){-1!==n.indexOf(e.value)&&l++})),o===l)-1===n.indexOf(s)&&n.push(s)}}else{var u=n.indexOf(e);n.splice(u,1);var d=this.state.dropDownValue.findIndex((function(t){return t.value===e}));if(-1!==d)this.state.dropDownValue[d].subCat.forEach((function(e){var t=n.indexOf(e.value);-1!==t&&n.splice(t,1)}));else{var p,m=0,h=0,g={};if(this.state.dropDownValue.forEach((function(t){t.subCat.forEach((function(t){t.value===e&&(m=t.pValue)}))})),p=(g=this.state.dropDownValue.filter((function(e){return e.value===m}))[0]).subCat.length,g.subCat.forEach((function(e){-1!==n.indexOf(e.value)&&h++})),h===p-1){var f=n.indexOf(m);-1!==f&&n.splice(f,1)}}}this.setState({checked:n},(function(){r.props.onSelectOptions(r.state.checked),r.setIndeterminate(a)}))}},{key:"searchFun",value:function(e){if(this.setState({searchFileldVal:e.target.value}),0!==e.target.value.length){var t=e.target.value.toLowerCase(),a=this.props.tagList.filter((function(e){return("string"===typeof e.name?e.name:e.name.toString()).indexOf(t)>-1}));this.setState({filteredTag:a}),13===e.keyCode&&(this.setState({filteredTag:[]}),this.props.onSearchDataEntered(e.target.value))}else"keydown"!==e.type&&(this.setState({filteredTag:[]}),this.props.onSearchDataEntered(e.target.value))}},{key:"applyFilter",value:function(e){this.props.onApplyClicked()}},{key:"handleDropdownClick",value:function(e){e.stopPropagation()}},{key:"onFilteredItemSelected",value:function(e){this.setState({searchFileldVal:e}),this.setState({filteredTag:[]}),this.props.onSearchDataEntered(e)}},{key:"onToggleIconClicked",value:function(e,t){e&&(e=parseInt(e));var a=this.state.toggleChecked;if(t)a.push(e);else{var r=a.indexOf(e);a.splice(r,1)}this.setState({toggleChecked:a})}},{key:"hideTagSuggestionList",value:function(){this.setState({filteredTag:[]})}},{key:"resetAll",value:function(){var e=this;this.setState({searchFileldVal:"",checked:[]},(function(){e.props.onSelectOptions(e.state.checked);var t=Object(r.a)(e.props.options);(t=e.sortCategory(t)).forEach((function(e){e.indeterminate=!1})),e.setState({dropDownValue:t})}))}},{key:"render",value:function(){return u.a.createElement(m,{listData:this.state.dropDownValue,checkedData:this.state.checked,checkBox:this.checkBox,clearAllData:this.clearAllData,searchFun:this.searchFun,applyFilter:this.applyFilter,handleDropdownClick:this.handleDropdownClick,filteredTag:this.state.filteredTag,searchFileldVal:this.state.searchFileldVal,onFilteredItemSelected:this.onFilteredItemSelected,toggleCheckedData:this.state.toggleChecked,onToggleIconClicked:this.onToggleIconClicked,hideTagSuggestionList:this.hideTagSuggestionList,language:this.props.language})}}]),a}(c.Component);v.defaultProps={options:[]},v.prototypes={options:p.a.array.isRequired,onSelectOptions:p.a.func,onApplyClicked:p.a.func,onSearchDataEntered:p.a.func,afterClearAll:p.a.func};var b=Object(f.b)((function(e){return{language:e.languageReducer.translation_data.filter((function(t){return t.langCode===e.languageReducer.default_lang}))[0]}}))(v);a.d(t,"a",(function(){return b}))},17:function(e,t,a){"use strict";function r(e){return function(t,a){return new Promise((function(r,n){var i=[],o=-1,s=0,l={},c=JSON.parse(JSON.stringify(e)).print_profiles;if(delete e.print_profiles,0===e.is_variable_decoration&&(i=JSON.parse(JSON.stringify(e)).sides,delete e.sides),t(ze(e)),t(Qe()),0===e.is_variable_decoration)Promise.all(i.map((function(e,r){(e.id=r,0===r)&&(1===e.decoration_settings.length?(l=JSON.parse(JSON.stringify(a().productCanvasReducer)),s=e.decoration_settings.length-1,-1===l.prevActivePrintProfile?(o=e.decoration_settings[s].print_profiles[0].id,t(yt(o))):e.decoration_settings[s].print_profiles?0===e.decoration_settings[s].print_profiles.filter((function(e){return e.id.toString()===l.prevActivePrintProfile.toString()})).length?(o=e.decoration_settings[s].print_profiles[0].id,t(yt(o))):o=l.prevActivePrintProfile:(o=-1,t(yt(-1)))):(o=-1,t(yt(-1))));return Promise.all(e.decoration_settings.map((function(e,t){return e.id=t,e.activePrintProfile=0===r&&0===t&&-1!==o?o:e.print_profiles[0].id,e}))).then((function(){e.active_deco_area=e.decoration_settings.length?e.decoration_settings[e.decoration_settings.length-1].id:""}))}))).then((function(){t(Je({sides:i,all_print_profiles:c})),r(i)}));else{try{if(-1===(l=JSON.parse(JSON.stringify(a().productCanvasReducer))).prevActivePrintProfile)o=c[0].id,t(yt(o));else 0===c.filter((function(e){return e.id.toString()===l.prevActivePrintProfile.toString()})).length?(o=c[0].id,t(yt(o))):(o=l.prevActivePrintProfile,t(yt(o)));e.product_decoration.activePrintProfile=o}catch(u){e.product_decoration.activePrintProfile=c[0].id}e.product_decoration.active_deco_area=0,e.product_decoration.image={},e.product_decoration.image.thumbnail="",e.product_decoration.image.src="",i.push(e.product_decoration),t(Je({sides:i,all_print_profiles:c})),r(i)}}))}}function n(e){return function(t){t(We(e))}}function i(e){return function(t){t(He(e))}}function o(e){return function(t,a){return new Promise((function(r,n){var i=JSON.parse(JSON.stringify(a().productCanvasReducer)),o=i.active_product_side;0!==i.product_sides.length&&(t(Xe()),i.product_sides[o].active_deco_area=Number(e),t(Ke(i.product_sides)),r())}))}}function s(e){return function(t){return new Promise((function(a,r){t(Ye()),t(Ze(e)),a()}))}}function l(e){return function(t,a){return new Promise((function(r,n){t($e());var i=JSON.parse(JSON.stringify(a().productCanvasReducer)),o=i.active_product_side,s=i.product_sides[o];i.product_details.is_variable_decoration?s.activePrintProfile=e:s.decoration_settings[s.active_deco_area].activePrintProfile=e,0===a().productCanvasReducer.product_details.is_variable_decoration?0===a().productCanvasReducer.active_product_side&&1===a().productCanvasReducer.product_sides[0].decoration_settings.length&&t(yt(e)):t(yt(e)),t(et(i.product_sides)),r()}))}}function c(e){return function(t){return new Promise((function(a,r){t(tt()),t(at(e)),a()}))}}function u(e,t){return function(a,r){var n=JSON.parse(JSON.stringify(r()));if(void 0!==n.productCanvasReducer.faceData[e]&&n.productCanvasReducer.faceData[e].svg){var i=n.productCanvasReducer.faceData[e].svg;t.forEach((function(e){i=i.replace(e.blobUrl,e.imgUrl)})),a(mt({side:e,data:i}))}}}function d(e){return function(t){t(rt()),t(nt(e))}}function p(e){return function(t){t(it(e))}}function m(e){return function(t){return new Promise((function(a,r){t(ot(e)),a()}))}}function h(e){return function(t){t(st(e))}}function g(e){return function(t){return new Promise((function(a,r){t(lt(e)),a()}))}}function f(e){return function(t){return new Promise((function(a,r){t(ct(e)),a()}))}}function v(e){return function(t){return new Promise((function(a,r){t(ut(e)),a()}))}}function b(e){return function(t){return new Promise((function(a,r){t(pt(e)),a()}))}}function A(){return function(e){return new Promise((function(t,a){e(ht()),t()}))}}function y(e){return function(t){return new Promise((function(a,r){t(gt(e)),a()}))}}function _(e){return function(t){return new Promise((function(a,r){t(ft(e)),a()}))}}function E(e){return function(t){return new Promise((function(a,r){t(dt(e)),a()}))}}function S(){return function(e){return new Promise((function(t,a){e(vt()),t()}))}}function C(e){return function(t){return new Promise((function(a,r){t(bt(e)),a()}))}}function x(e){return function(t,a){return new Promise((function(a,r){t(et(e)),a()}))}}function w(e){return function(t){return new Promise((function(a,r){t(At(e)),a()}))}}function k(){return function(e){return new Promise((function(t,a){e(yt(-1)),t()}))}}function I(e){return function(t){return new Promise((function(a,r){t(_t(e)),a()}))}}function N(e){return function(t){return new Promise((function(a,r){t(Et(e)),a()}))}}function O(e,t,a){return function(r){return new Promise((function(n,i){r(St(e)),r(at(t)),r(lt(a)),n()}))}}function P(e){return function(t){return new Promise((function(a,r){t(Ct(e)),a()}))}}function D(e){return function(t){return new Promise((function(a,r){t(xt(e)),a()}))}}function R(e){return function(t){return new Promise((function(a,r){t(wt(e)),a()}))}}function T(e){return function(t){return new Promise((function(a,r){t(kt(e)),a()}))}}function L(e){return function(t){return new Promise((function(a,r){t(It(e)),a()}))}}function M(e){return function(t){return new Promise((function(a,r){t(Nt(e)),a()}))}}function B(e){return function(t){return new Promise((function(a,r){t(Ot(e)),a()}))}}function j(e){return function(t){return new Promise((function(a,r){t(Pt(e)),a()}))}}function F(e){return function(t){t(Dt(e))}}function U(e){return function(t){t(Rt(e))}}function V(e){return function(t){return new Promise((function(a,r){t(Tt(e)),a()}))}}function G(e){return function(t){return new Promise((function(a,r){t(Lt(e)),a()}))}}function q(e){return function(t){t(Mt(e))}}function H(e){return function(t){return new Promise((function(a,r){t(Bt(e)),a()}))}}function z(e){return function(t){return new Promise((function(a,r){t(jt(e)),a()}))}}function W(e){return function(t){return new Promise((function(a,r){t(Ft(e)),a()}))}}a.d(t,"Bb",(function(){return r})),a.d(t,"Z",(function(){return n})),a.d(t,"Lb",(function(){return i})),a.d(t,"Jb",(function(){return o})),a.d(t,"Kb",(function(){return s})),a.d(t,"Nb",(function(){return l})),a.d(t,"nb",(function(){return c})),a.d(t,"Ob",(function(){return u})),a.d(t,"Ab",(function(){return d})),a.d(t,"ob",(function(){return p})),a.d(t,"mb",(function(){return m})),a.d(t,"Qb",(function(){return h})),a.d(t,"sb",(function(){return g})),a.d(t,"yb",(function(){return f})),a.d(t,"gb",(function(){return v})),a.d(t,"fb",(function(){return b})),a.d(t,"eb",(function(){return A})),a.d(t,"kb",(function(){return y})),a.d(t,"Mb",(function(){return _})),a.d(t,"ib",(function(){return E})),a.d(t,"ab",(function(){return S})),a.d(t,"ub",(function(){return C})),a.d(t,"zb",(function(){return x})),a.d(t,"Pb",(function(){return w})),a.d(t,"db",(function(){return k})),a.d(t,"jb",(function(){return I})),a.d(t,"vb",(function(){return N})),a.d(t,"cb",(function(){return O})),a.d(t,"Cb",(function(){return P})),a.d(t,"Eb",(function(){return D})),a.d(t,"hb",(function(){return R})),a.d(t,"Fb",(function(){return T})),a.d(t,"tb",(function(){return L})),a.d(t,"Gb",(function(){return M})),a.d(t,"Ib",(function(){return B})),a.d(t,"bb",(function(){return j})),a.d(t,"pb",(function(){return F})),a.d(t,"rb",(function(){return U})),a.d(t,"Db",(function(){return V})),a.d(t,"lb",(function(){return G})),a.d(t,"xb",(function(){return q})),a.d(t,"wb",(function(){return H})),a.d(t,"qb",(function(){return z})),a.d(t,"Hb",(function(){return W})),a.d(t,"E",(function(){return Q})),a.d(t,"a",(function(){return J})),a.d(t,"G",(function(){return Y})),a.d(t,"I",(function(){return Z})),a.d(t,"H",(function(){return X})),a.d(t,"T",(function(){return K})),a.d(t,"U",(function(){return $})),a.d(t,"P",(function(){return ee})),a.d(t,"S",(function(){return te})),a.d(t,"Q",(function(){return ae})),a.d(t,"R",(function(){return re})),a.d(t,"o",(function(){return ne})),a.d(t,"p",(function(){return ie})),a.d(t,"C",(function(){return oe})),a.d(t,"D",(function(){return se})),a.d(t,"r",(function(){return le})),a.d(t,"n",(function(){return ce})),a.d(t,"k",(function(){return ue})),a.d(t,"Y",(function(){return de})),a.d(t,"A",(function(){return pe})),a.d(t,"g",(function(){return me})),a.d(t,"i",(function(){return he})),a.d(t,"v",(function(){return ge})),a.d(t,"f",(function(){return fe})),a.d(t,"X",(function(){return ve})),a.d(t,"e",(function(){return be})),a.d(t,"h",(function(){return Ae})),a.d(t,"V",(function(){return ye})),a.d(t,"b",(function(){return _e})),a.d(t,"x",(function(){return Ee})),a.d(t,"W",(function(){return Se})),a.d(t,"B",(function(){return Ce})),a.d(t,"j",(function(){return xe})),a.d(t,"y",(function(){return we})),a.d(t,"d",(function(){return ke})),a.d(t,"J",(function(){return Ie})),a.d(t,"L",(function(){return Ne})),a.d(t,"c",(function(){return Oe})),a.d(t,"F",(function(){return Pe})),a.d(t,"w",(function(){return De})),a.d(t,"M",(function(){return Re})),a.d(t,"O",(function(){return Te})),a.d(t,"q",(function(){return Le})),a.d(t,"s",(function(){return Me})),a.d(t,"u",(function(){return Be})),a.d(t,"K",(function(){return je})),a.d(t,"m",(function(){return Fe})),a.d(t,"z",(function(){return Ue})),a.d(t,"l",(function(){return Ve})),a.d(t,"t",(function(){return Ge})),a.d(t,"N",(function(){return qe}));var Q="SET_PRODUCT_DETAILS",J="ADD_PRODUCT_DETAILS",Y="SET_PRODUCT_SIDE_DATA_BEGIN",Z="SET_PRODUCT_SIDE_DATA_SUCCESS",X="SET_PRODUCT_SIDE_DATA_FAILURE",K="UPDATE_ACTIVE_PRODUCT_SIDE_BEGIN",$="UPDATE_ACTIVE_PRODUCT_SIDE_SUCCESS",ee="UPDATE_ACTIVE_DECO_AREA_BEGIN",te="UPDATE_ACTIVE_DECO_AREA_SUCCESS",ae="UPDATE_ACTIVE_DECO_AREA_SEL_PRINT_PROFILE_BEGIN",re="UPDATE_ACTIVE_DECO_AREA_SEL_PRINT_PROFILE_SUCCESS",ne="SET_FACE_DATA_BEGIN",ie="SET_FACE_DATA_SUCCESS",oe="SET_PRODUCT_COLOR_BEGIN",se="SET_PRODUCT_COLOR_SUCCESS",le="SET_GLOBAL_COLOR_ATTRIBUTE",ce="SET_ENGRAVE_BY_SIDES",ue="SET_COLOR_ATTRIBUTES",de="UPDATE_VARIANT_ID",pe="SET_ORDER_QTY",me="SAVE_COLORS_QUANTITY",he="SET_CART_COLOR_PRICE_DATA",ge="SET_LAYER_DATA",fe="SAVE_CART_IMAGE",ve="UPDATE_SVG_STRING",be="RESET_PRODUCT_DATA",Ae="SET_CANVAS_DIMENSION_DATA",ye="UPDATE_CANVAS_DIMENSION_DATA",_e="ADD_VARIABLE_DECO_SIDE",Ee="SET_MIN_ORDER_QTY",Se="UPDATE_PREDECO_VARIABLE_DECO_SIDE",Ce="SET_PREV_PROD_ACTIVE_PRINT_PROFILE",xe="SET_CART_PROD_ATTRS",we="SET_NO_PRINT_METHOD_STATUS",ke="REMOVE_VARIABLE_DECO_SIDE",Ie="SET_SELECTED_VARIABLE_SIZE",Ne="SET_STORE_SIZE_ATTRIBUTES",Oe="IS_VALID_STORE_SIZE",Pe="SET_PRODUCT_PRICE_RULE_DATA",De="SET_LICENCE_ADDONS",Re="SET_STORE_TYPE",Te="SET_VAR_SIZE_PRICE",Le="SET_FETCH_SIZE_QTY_FLAG",Me="SET_GLOBAL_SIZE_ATTRIBUTE",Be="SET_IS_TEMPLATE_EDIT",je="SET_SIDE_THUMB_SVG",Fe="SET_DESIGN_AREA_DIMENSION",Ue="SET_ORDER_OPTION_DISABLE",Ve="SET_CROP_ELEMENT_STATUS",Ge="SET_IS_COLOR_ATTRIBUTE",qe="SET_USED_COLOR_EXISTS_FLAG",He=function(e){return{type:ue,payload:e}},ze=function(e){return{type:Q,payload:e}},We=function(e){return{type:J,payload:e}},Qe=function(){return{type:Y}},Je=function(e){return{type:Z,payload:e}},Ye=function(){return{type:K}},Ze=function(e){return{type:$,payload:e}},Xe=function(){return{type:ee}},Ke=function(e){return{type:te,payload:e}},$e=function(){return{type:ae}},et=function(e){return{type:re,payload:e}},tt=function(){return{type:ne}},at=function(e){return{type:ie,payload:e}},rt=function(){return{type:oe}},nt=function(e){return{type:se,payload:e}},it=function(e){return{type:le,payload:e}},ot=function(e){return{type:ce,payload:e}},st=function(e){return{type:de,payload:e}},lt=function(e){return{type:ge,payload:e}},ct=function(e){return{type:pe,payload:e}},ut=function(e){return{type:me,payload:e}},dt=function(e){return{type:he,payload:e}},pt=function(e){return{type:fe,payload:e}},mt=function(e){return{type:ve,payload:e}},ht=function(){return{type:be}},gt=function(e){return{type:Ae,payload:e}},ft=function(e){return{type:ye,payload:e}},vt=function(){return{type:_e}},bt=function(e){return{type:Ee,payload:e}},At=function(e){return{type:Se,payload:e}},yt=function(e){return{type:Ce,payload:e}},_t=function(e){return{type:xe,payload:e}},Et=function(e){return{type:we,payload:e}},St=function(e){return{type:ke,payload:e}},Ct=function(e){return{type:Ie,payload:e}},xt=function(e){return{type:Ne,payload:e}},wt=function(e){return{type:Pe,payload:e}},kt=function(e){return{type:Oe,payload:e}},It=function(e){return{type:De,payload:e}},Nt=function(e){return{type:Re,payload:e}},Ot=function(e){return{type:Te,payload:e}},Pt=function(e){return{type:Le,payload:e}},Dt=function(e){return{type:Me,payload:e}},Rt=function(e){return{type:Be,payload:e}},Tt=function(e){return{type:je,payload:e}},Lt=function(e){return{type:Fe,payload:e}},Mt=function(e){return{type:Ue,payload:e}},Bt=function(e){return{type:Ve,payload:e}},jt=function(e){return{type:Ge,payload:e}},Ft=function(e){return{type:qe,payload:e}}},172:function(e,t,a){"use strict";var r=a(9),n=a.n(r),i=a(20);t.a={name:"imageExt",init:function(e){return Object(i.a)(n.a.mark((function t(){var a,r,o,s,l,c,u,d,p,m,h,g,f,v,b,A,y,_,E,S,C,x,w,k,I,N,O,P,D,R,T,L,M,B,j;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return j=function(e,t,a){var r=[new s.Image.filters.Brightness({brightness:parseFloat(t.brightValue)}),new s.Image.filters.Contrast({contrast:parseFloat(t.contrastValue)}),new s.Image.filters.Saturation({saturation:parseFloat(t.saturValue)}),new s.Image.filters.HueRotation({rotation:parseFloat(t.hueValue)}),new s.Image.filters.Blur({blur:parseFloat(t.blurValue)})];S.getObjects()[0].applyFilters(r);var n=S.toDataURL("image/png",1);e.prefs.imgExtension="png";var i=I(n.split(",")[1],"image/png"),o=URL.createObjectURL(i);u.addToPreview(o),a(o,i)},B=function(e,t,a){return"#"+M(e)+M(t)+M(a)},M=function(e){var t=e.toString(16);return 1===t.length?"0"+t:t},L=function(e){var t={};return t.r=parseInt(e.substr(1,2),16),t.g=parseInt(e.substr(3,2),16),t.b=parseInt(e.substr(5,2),16),t},T=function(e,t,a,r){for(var n=L(e),i=R(g,h),o=0,s=i.data.length;o<s;o+=4)i.data[o]===n.r&&i.data[o+1]===n.g&&i.data[o+2]===n.b?(i.data[o]=0,i.data[o+1]=0,i.data[o+2]=0):(i.data[o]=255,i.data[o+1]=255,i.data[o+2]=255);var c=document.createElement("canvas"),u=c.getContext("2d");c.height=h.height,c.width=h.width,u.clearRect(0,0,h.width,h.height),u.putImageData(i,0,0);var d=c.toDataURL("image/png"),m=new l.Potrace;m.setParameters({color:e}),m.loadImage(d,(function(e){if(e)throw e;var n=m.getPathTag();document.getElementById("svgPath")&&(document.getElementById("svgPath").innerHTML+=n),u.putImageData(h,0,0),p++,setTimeout((function(){O(t,a,r)}),50)}))},R=function(e,t){var a=e.createImageData(t.width,t.height);return a.data.set(t.data),a},D=function(e,t,a){if(t){var r=t.getElementsByTagName("path");if(a<=8&&a<=r.length)for(var n=0,i=r.length;n<i;n++)n<a?r[n].setAttribute("fill",e[n]):r[n].setAttribute("fill",e[a-1]);return'<svg  version="1.1" width="'+v+'" height="'+b+'" xmlns="'+o.SVG+'" xmlns:xlink="'+o.XLINK+'" viewBox = "0 0 '+v+" "+b+'"><g id="svgPath">'+t.innerHTML+"</g></svg>"}return""},P=function(){f=[];for(var e=m,t=1;t<=8;t++)if(document.getElementById("svgPath")){var a=document.getElementById("svgPath").cloneNode(!0),r=D(e,a,t);f.push({color:t,svg:r})}return f},O=function(e,t,a){p<m.length&&T(m[p],e,t,a),p===m.length&&(A=P(),e(e&&"create"===t?A:A[a-1],m))},N=function(e){for(var t=!1,a=e.split(""),r=!0,n=1;n<a.length;n++)r&&(1===n||3===n||5===n?"f"===a[n].toLowerCase()?t=!0:(t=!1,r=!1):a[n].match(/^[0-9a-z]+$/)?t=!0:(t=!1,r=!1));return t},x=function(e){for(var t,a,r,n,i,s=e.querySelectorAll("path,polygon,circle,rect,ellipse"),l=!0,c=0,u=s.length;c<u;c++)if(s[c].getAttribute("id"))if(t="pattern_"+s[c].getAttribute("id"),a=s[c].getAttribute("fill"),0===c&&N(a))s[c].setAttribute("fill","none");else{i="url(#"+t+")",s[c].setAttribute("fill",i);var d=!(!window||!window.browserAccessName||"safari"!==window.browserAccessName.toLowerCase())?1.8:.9;n+='<pattern id="'+t+'" viewBox="0,0,1,1" width="4" height="2" patternUnits="userSpaceOnUse" patternTransform="rotate(-60) scale('+d+" "+d+')"><polygon points="0,0 2,0 0,2" fill="'+a+'"></polygon><polygon points="0,4 4,0 4,2 2,4" fill="'+a+'"></polygon><polygon points="0,2 0,4 4,0 2,0" fill="'+a+'"></polygon><polygon points="0,2 2,2 2,0" fill="'+a+'"></polygon></pattern>'}0===e.querySelectorAll("defs").length&&(r=document.createElementNS(o.SVG,"defs"),l=!1),r||(r=e.getElementsByTagName("defs")),l?r[0].innerHTML=n:(r.innerHTML=n,e.appendChild(r))},a=e.$,r=e.editor,o=e.NS,s=e.fabric,l=e.Potrace,c=e.RgbQuant,d=(u=r).canvas,p=0,m=[],y={type:"",isTemplateImg:!1,objectTitle:"",lock:{delete:!1,move:!1,rotate:!1,resize:!1,filter:!1,mask:!1,edit:!1}},_={delete:!1,move:!1,rotate:!1,resize:!1,filter:!1,mask:!1,edit:!1},E={colorEdit:!1,delete:!1,move:!1,rotate:!1,resize:!1,edit:!1},S=new s.Canvas("canvas"),C=d.getIsTemplateEdit(),u.importBrowseImage=function(e,t,a,r,n,i,o,s,l){return new Promise((function(c){var u;if((y={}).type="image",y.objectTitle="",y.isTemplateImg=!1,y.contentType=e.type,y.imgExtension=e.extension,y.oneColorFill="#FF0000",y.largeSvg=l,e.type.includes("svg")&&!l){var p=d.getSelectedElems()[0];p&&p.prefs&&"image"===p.prefs.type&&(y.uploadedImg=a||"",y.originalImg=p.prefs.originalImg,y.optionIndexVal=p.prefs.optionIndexVal,y.filterInfo=p.prefs.filterInfo,y.reduceColorInfo=p.prefs.reduceColorInfo,y.isRemoveAllWhite=p.prefs.isRemoveAllWhite,y.isRemoveOuterWhite=p.prefs.isRemoveOuterWhite,y.editFilter=p.prefs.editFilter,y.maskInfo=p.prefs.maskInfo,y.lock=p.prefs.lock,y.updatedFile=p.prefs.updatedFile,y.intermediateFile=p.prefs.intermediateFile,y.updatedBlob=p.prefs.updatedBlob,y.removeWhiteIndex=!!p.prefs.removeWhiteIndex&&p.prefs.removeWhiteIndex,d.deleteSelectedElements(!0)),(u=new FileReader).onloadend=function(e){d.importSvgString(e.target.result);d.ungroupSelectedElement(),d.groupSelectedElements(),d.alignSelectedElements("m","page"),d.alignSelectedElements("c","page");var a=d.getSelectedElems()[0];if(a.hasChildNodes("defs")){var r=a.getElementsByTagName("defs")[0];r&&r.remove()}a.setAttribute("type","image"),a.setAttribute("pointer-events","bounding-box"),y.imgType="svg",y.imgSelectionType="upload",y.lock=y.lock?y.lock:E,a.prefs=y,t&&x(a)},u.readAsText(e)}else{var m,h,g=new Image,f=0,v=0,b=o,A=o;g.style.opacity=0,g.addEventListener("load",(function(){if(m=g.offsetWidth||g.naturalWidth||g.width,h=g.offsetHeight||g.naturalHeight||g.height,y.resStatus=i,i){var e=n.toLowerCase();switch("centimeter"===e&&(e="cm"),"millimeter"!==e&&"milimeter"!==e||(e="mm"),e.toLowerCase()){case"cm":f=(2.54*m/b).toFixed(3),v=(2.54*h/A).toFixed(3);break;case"mm":f=(25.4*m/b).toFixed(3),v=(25.4*h/A).toFixed(3);break;case"feet":f=(m/b*.0833333).toFixed(3),v=(h/A*.0833333).toFixed(3);break;default:f=(m/b).toFixed(1),v=(h/A).toFixed(1)}}var t=d.aWidth,o=d.aHeight,l=0,c=0;d.getBounds().width&&(l=d.getBounds().width),d.getBounds().height&&(c=d.getBounds().height),t/o>l/c&&(t=o,o=d.aWidth);var u=l/t,p=c/o;y.perInchWPx=u,y.perInchHPx=p,y.maxScaleWt=f,y.maxScaleHt=v,w(m,h,r,y,l,!1,c,"",a,s)})),g.src=r}setTimeout((function(){c()}),100)}))},u.generateMonochromeThumb=function(){var e=Object(i.a)(n.a.mark((function e(t,a,r){var i;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(i=new Image).crossOrigin="anonymous",i.onload=function(){var e=document.createElement("canvas");e.height=i.height,e.width=i.width;var t=i.width>i.height?i.width:i.height;t>s.textureSize&&(s.textureSize=t);var n=new s.Canvas(e),o=new s.Image(i,{width:i.width,height:i.height,left:0,top:0});s.filterBackend=s.initFilterBackend(),n.add(o);var l=new s.Image.filters.BlendColor({color:a,mode:"add",opacity:0}),c=new s.Image.filters.RemoveColor;n.getObjects()[0].filters.push(c),n.getObjects()[0].filters.push(l),n.getObjects()[0].applyFilters(),n.requestRenderAll();var u=n.toDataURL("image/png"),d=I(u.split(",")[1],"image/png"),p=URL.createObjectURL(d);r(p)},e.next=5,k(t);case 5:i.src=e.sent;case 6:case"end":return e.stop()}}),e)})));return function(t,a,r){return e.apply(this,arguments)}}(),u.checkImgLoad=function(e){return new Promise((function(t){var a=new Image;a.crossOrigin="anonymous",a.onload=function(){t(!1)},a.src=e}))},u.generateOneColorThumb=function(e,t,a){var r=new Image;r.crossOrigin="anonymous",r.onload=function(){var e=document.createElement("canvas");e.height=r.height,e.width=r.width;var n=r.width>r.height?r.width:r.height;n>s.textureSize&&(s.textureSize=n);var i=new s.Canvas(e),o=new s.Image(r,{width:r.width,height:r.height,left:0,top:0});s.filterBackend=s.initFilterBackend(),i.add(o);var l=new s.Image.filters.BlendColor({color:t,mode:"tint",opacity:0}),c=new s.Image.filters.RemoveColor;i.getObjects()[0].filters.push(c),i.getObjects()[0].filters.push(l),i.getObjects()[0].applyFilters(),i.requestRenderAll();var u=i.toDataURL("image/png"),d=I(u.split(",")[1],"image/png"),p=URL.createObjectURL(d);a(p)},r.src=e},w=function(e,t,a,r,n,i,o,s,l,c){var u=d.addSVGElementFromJson({element:"image",attr:{x:0,y:0,width:e,height:t,id:d.getNextId(),style:"pointer-events:inherit"}}),p=d.addSVGElementFromJson({element:"g",attr:{id:d.getNextId(),type:"image"}});p.appendChild(u),d.setHref(u,a),d.selectOnly([p]);var m=r.maxScaleWt*r.perInchWPx,h=r.maxScaleHt*r.perInchHPx;"revert"===s&&r.bbbox?d.scaleElem(d.getSelectedElems()[0],r.bbbox.width,r.bbbox.height):r.resStatus&&n>=m&&o>=h?d.scaleElem(d.getSelectedElems()[0],m,h):d.scaleElem(d.getSelectedElems()[0]),d.alignSelectedElements("m","page"),d.alignSelectedElements("c","page");var g=d.getSelectedElems()[0],f=d.getBBox(g);r.uploadedImg=l||"",r.originalImg=r.originalImg?r.originalImg:a,r.optionIndexVal=i?r.optionIndexVal:"original",r.imgExtension="",r.filterInfo={},r.reduceColorInfo={isColorOption:!1,reduceColorList:{}},r.isRemoveAllWhite=0,r.isRemoveOuterWhite=0,r.editFilter={brightValue:0,contrastValue:0,saturValue:0,hueValue:0,blurValue:0},r.maskInfo={},r.lock=r.lock?r.lock:_,r.updatedFile="",r.intermediateFile=r.intermediateFile?r.intermediateFile:a,r.updatedBlob=r.originalBlob?r.originalBlob:"",r.originalBlob=r.originalBlob,r.imgSelectionType=c||"",r.removeWhiteIndex=!!r.removeWhiteIndex&&r.removeWhiteIndex,r.oneColorFill=i?r.oneColorFill:"#FF0000",g.prefs=r,"revert"===s&&r.bbbox&&(d.moveSelectedElements(r.bbbox.x-f.x-(f.width-r.bbbox.width)/2,r.bbbox.y-f.y-(f.height-r.bbbox.height)/2),d.calculateImageRating(g))},u.addSvgToStage=function(e,t,a,r){y.type="image",y.objectTitle="",y.isTemplateImg=!1,y.imgType="svg",y.imgSelectionType=t||a?"upload":"convert";var n=d.getSelectedElems()[0];n&&n.prefs&&"image"===n.prefs.type&&(y.originalImg=n.prefs.originalImg,y.optionIndexVal=n.prefs.optionIndexVal,y.imgExtension=n.prefs.imgExtension,y.filterInfo=n.prefs.filterInfo,y.reduceColorInfo=n.prefs.reduceColorInfo,y.oneColorFill=n.prefs.oneColorFill,y.isRemoveAllWhite=n.prefs.isRemoveAllWhite,y.isRemoveOuterWhite=n.prefs.isRemoveOuterWhite,y.editFilter=n.prefs.editFilter,y.maskInfo=n.prefs.maskInfo,y.lock=n.prefs.lock,y.updatedFile=n.prefs.updatedFile,y.intermediateFile=n.prefs.intermediateFile,y.updatedBlob=n.prefs.updatedBlob,y.originalBlob=n.prefs.originalBlob,y.oneColorThumb=n.prefs.oneColorThumb,y.monochromeThumb=n.prefs.monochromeThumb,d.deleteSelectedElements(!0)),d.importSvgString(e),d.ungroupSelectedElement(),d.groupSelectedElements(),d.alignSelectedElements("m","page"),d.alignSelectedElements("c","page");var i=d.getSelectedElems()[0];i.setAttribute("type","image"),i.setAttribute("pointer-events","bounding-box"),i.prefs=y,t&&x(i),r(i.childNodes[0].getAttribute("id")),!C&&y.lock&&(y.lock.delete||y.lock.move||y.lock.resize||y.lock.rotate)&&d.selectOnly([i])},u.revertToOriginal=function(e,t){return new Promise((function(r){var n,i;y.lock;(y={}).type="image",y.objectTitle="",y.isTemplateImg=!1;var o=d.getSelectedElems()[0],s=d.getBBox(o);if(o&&o.prefs&&"image"===o.prefs.type){if(y.contentType=o.prefs.contentType,y.originalImg=o.prefs.originalImg,y.resStatus=o.prefs.resStatus,y.perInchWPx=o.prefs.perInchWPx,y.perInchHPx=o.prefs.perInchHPx,y.maxScaleWt=o.prefs.maxScaleWt,y.maxScaleHt=o.prefs.maxScaleHt,y.optionIndexVal=t?o.prefs.optionIndexVal:"original",y.imgExtension=o.prefs.imgExtension,y.filterInfo={},y.reduceColorInfo={isColorOption:!1,reduceColorList:{}},y.isRemoveAllWhite=0,y.isRemoveOuterWhite=0,y.oneColorFill=t?o.prefs.oneColorFill:"#FF0000",y.oneColorThumb=o.prefs.oneColorThumb,y.monochromeThumb=o.prefs.monochromeThumb,y.editFilter={brightValue:0,contrastValue:0,saturValue:0,hueValue:0,blurValue:0},y.maskInfo={},y.lock=o.prefs.lock,y.updatedFile="",y.intermediateFile=e,y.autoConvertStatus=o.prefs.autoConvertStatus,y.updatedBlob=o.prefs.originalBlob,y.originalBlob=o.prefs.originalBlob,y.bbbox=s||"",y.uploadedImg=o.prefs.uploadedImg,y.removeWhiteIndex=o.prefs.removeWhiteIndex,!C&&y.lock&&(y.lock.delete||y.lock.move||y.lock.resize||y.lock.rotate)){var l=o;return l.prefs.url=e,void a(l).find("image").attr("xlink:href",e)}d.deleteSelectedElements(!0)}var c=new Image;c.style.opacity=0;var u=0,p=0;d.getBounds().width&&(u=.9*d.getBounds().width),d.getBounds().height&&(p=.9*d.getBounds().height),c.addEventListener("load",(function(){n=c.offsetWidth||c.naturalWidth||c.width,i=c.offsetHeight||c.naturalHeight||c.height,w(n,i,e,y,u,t,p,"revert",y.uploadedImg),setTimeout((function(){r(),!C&&y.lock&&(y.lock.delete||y.lock.move||y.lock.resize||y.lock.rotate)&&d.selectOnly([o])}),50)})),c.src=e}))},u.addFilterEffect=function(e,t,r){return new Promise((function(n){var i=null;if(i=r?document.getElementById(r):d.getSelectedElems()[0]){if(0===i.querySelectorAll("defs").length){var s=document.createElementNS(o.SVG,"defs");i.appendChild(s)}if(a(i).find("defs").length>0&&a(i).find("defs").children("filter").length>0)a(i).find("defs").children("filter").attr("type",e),a(i).find("defs").children("filter").html(t);else{var l=d.getNextId(),c=d.addSVGElementFromJson({element:"filter",attr:{xmlns:o.SVG,id:l,type:e}});c.innerHTML=t,i.querySelectorAll("defs")[0].append(c),i.querySelectorAll("image").length>0&&i.querySelectorAll("image")[0].setAttribute("filter","url(#"+l+")")}}n()}))},u.addMaskEffect=function(e,t){return new Promise((function(a){var r=d.getSelectedElems()[0];if(r){var n=d.getBBox(r),i=r.prefs,o=d.getNextId(),s=d.getNextId(),l=e.replace(new RegExp("xe_"+t,"g"),o);l=(l=(l=(l=(l=l.replace(new RegExp("maskpath","g"),d.getNextId())).replace(new RegExp("pathgroup","g"),s)).replace(/transform="scale\(0.45\)"/g,"")).replace('style="width: 100%;height: 100%;"',"")).replace('style="width: 70px;height: 70px"',""),d.deleteSelectedElements(!0),d.importSvgString(l),d.selectOnly([d.getSelectedElems()[0]]),d.getBounds().width&&d.getBounds().width,n?d.scaleElem(d.getSelectedElems()[0],n.width,n.height):d.scaleElem(d.getSelectedElems()[0]),d.alignSelectedElements("m","page"),d.alignSelectedElements("c","page");var c=d.getSelectedElems()[0];c.setAttribute("type","image"),c.prefs=i;var u=d.getBBox(c);d.moveSelectedElements(n.x-u.x-(u.width-n.width)/2,n.y-u.y-(u.height-n.height)/2),d.calculateImageRating(c),!C&&i.lock&&(i.lock.delete||i.lock.move||i.lock.resize||i.lock.rotate)&&d.selectOnly([c]),a(c.getElementsByTagName("image")[0].getAttribute("id"))}}))},u.addToStage=function(e,t){var r=d.getSelectedElems()[0];r&&(r.prefs.updateStatus=u.updateImageStatus(r),a(r).find("image").length>0&&(a(r).find("image").attr("xlink:href",e),r.prefs.optionIndexVal=t))},u.updateImageStatus=function(e){return new Promise((function(t){var a=!0;Object.keys(e.prefs.editFilter).forEach((function(t){0!==e.prefs.editFilter[t]&&(a=!1)})),("original"!==e.prefs.optionIndexVal||e.prefs.filterInfo&&e.prefs.filterInfo.type||e.prefs.maskInfo&&e.prefs.maskInfo.selectedMask||e.prefs.imgSelectionType&&"convert"!==e.prefs.imgSelectionType&&"onecolor"!==e.prefs.imgSelectionType&&"monochrome"!==e.prefs.imgSelectionType)&&(a=!1),t(a)}))},u.addToPreview=function(e){var t=document.getElementsByClassName("uploadImg")[0];t&&a(t).find("img").length>0&&a(t).find("img").attr("src",e)},u.applyGrayScale=function(){var e=Object(i.a)(n.a.mark((function e(t,a,r){var i,o,s;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=d.getSelectedElems()[0],o=i.childNodes[0].getAttribute("id"),!i.prefs.imgType||"svg"!==i.prefs.imgType){e.next=4;break}return e.next=4,u.revertToOriginal(t,!0);case 4:i&&((s=new Image).crossOrigin="anonymous",s.onload=function(){var e=document.createElement("canvas"),t=e.getContext("2d"),n=e.width=s.width,l=e.height=s.height;t.drawImage(s,0,0);for(var c=t.getImageData(0,0,s.width,s.height),d=0;d<l;d++)for(var p=0;p<n;p++){var m=4*d*n+4*p,h=(c.data[m]+c.data[m+1]+c.data[m+2])/3;c.data[m]=h,c.data[m+1]=h,c.data[m+2]=h}t.putImageData(c,0,0,0,0,c.width,c.height);var g=e.toDataURL("image/png");i.prefs.imgExtension="png";var f=I(g.split(",")[1],"image/png"),v=URL.createObjectURL(f);u.addToStage(v,a),e.remove(),r(v,f,"",o)},s.src=t);case 5:case"end":return e.stop()}}),e)})));return function(t,a,r){return e.apply(this,arguments)}}(),u.checkImageDimension=function(e,t){return new Promise((function(a){var r=!0,n=new Image;n.addEventListener("load",(function(){(Number(t.width)>n.width||Number(t.height)>n.height)&&(r=!1),a(r)})),n.src=e}))},k=function(e){return new Promise((function(t){var a=new Image;a.crossOrigin="anonymous",a.onload=function(){var e=document.createElement("canvas"),r=e.getContext("2d"),n=e.width=a.width,i=e.height=a.height;r.drawImage(a,0,0);for(var o=r.getImageData(0,0,a.width,a.height),s=0;s<i;s++)for(var l=0;l<n;l++){var c=4*s*n+4*l,u=(o.data[c]+o.data[c+1]+o.data[c+2])/3;o.data[c]=u,o.data[c+1]=u,o.data[c+2]=u}r.putImageData(o,0,0,0,0,o.width,o.height);var d=e.toDataURL("image/png");t(d)},a.src=e}))},u.applyMonoChrome=function(){var e=Object(i.a)(n.a.mark((function e(t,a,r,i,o){var l,c,p;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l=d.getSelectedElems()[0],c=l.childNodes[0].getAttribute("id"),!l.prefs.imgType||"svg"!==l.prefs.imgType){e.next=4;break}return e.next=4,u.revertToOriginal(t,!0);case 4:if(!l){e.next=12;break}return S.clear(),(p=new Image).crossOrigin="anonymous",p.onload=function(){var e=p.width>p.height?p.width:p.height;e>s.textureSize&&(s.textureSize=e),S.setDimensions({width:p.width,height:p.height});var t=new s.Image(p,{width:p.width,height:p.height,left:0,top:0});s.filterBackend=s.initFilterBackend(),S.add(t);var n=new s.Image.filters.BlendColor({color:r,mode:"add",opacity:0}),d=new s.Image.filters.RemoveColor;S.getObjects()[0].filters.push(d),S.getObjects()[0].filters.push(n),S.getObjects()[0].applyFilters(),S.requestRenderAll();var m=S.toDataURL("image/png");S.clear(),l.prefs.imgExtension="png",l.prefs.imgSelectionType="monochrome",l.prefs.monochromeFill=""!==r?r:"#277E8B";var h=I(m.split(",")[1],"image/png"),g=URL.createObjectURL(h);u.addToStage(g,a),y.imgSelectionType="monochrome",i(g,h,"",c,o)},e.next=11,k(t);case 11:p.src=e.sent;case 12:case"end":return e.stop()}}),e)})));return function(t,a,r,n,i){return e.apply(this,arguments)}}(),u.applyOneColor=function(){var e=Object(i.a)(n.a.mark((function e(t,a,r,i,o){var l,c,p;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l=d.getSelectedElems()[0],c=l.childNodes[0].getAttribute("id"),!l.prefs.imgType||"svg"!==l.prefs.imgType){e.next=4;break}return e.next=4,u.revertToOriginal(t,!0);case 4:l&&(S.clear(),(p=new Image).crossOrigin="anonymous",p.onload=function(){var e=p.width>p.height?p.width:p.height;e>s.textureSize&&(s.textureSize=e),S.setDimensions({width:p.width,height:p.height});var t=new s.Image(p,{width:p.width,height:p.height,left:0,top:0});s.filterBackend=s.initFilterBackend(),S.add(t);var n=new s.Image.filters.BlendColor({color:r,mode:"tint",opacity:0}),d=new s.Image.filters.RemoveColor;S.getObjects()[0].filters.push(d),S.getObjects()[0].filters.push(n),S.getObjects()[0].applyFilters(),S.requestRenderAll();var m=S.toDataURL("image/png");S.clear(),l.prefs.imgExtension="png",l.prefs.imgSelectionType="onecolor",l.prefs.oneColorFill=""!==r?r:"#000000";var h=I(m.split(",")[1],"image/png"),g=URL.createObjectURL(h);u.addToStage(g,a),y.imgSelectionType="onecolor",i(g,h,"",c,o)},p.src=t);case 5:case"end":return e.stop()}}),e)})));return function(t,a,r,n,i){return e.apply(this,arguments)}}(),I=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:512,r=window.atob(e),n=[],i=0;i<r.length;i+=a){for(var o=r.slice(i,i+a),s=new Array(o.length),l=0;l<o.length;l++)s[l]=o.charCodeAt(l);var c=new Uint8Array(s);n.push(c)}var u=new Blob(n,{type:t});return u},u.applyBlackWhite=function(){var e=Object(i.a)(n.a.mark((function e(t,a,r){var i,o,s,l,p,m,f,v,b;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=d.getSelectedElems()[0],o=i.childNodes[0].getAttribute("id"),!i.prefs.imgType||"svg"!==i.prefs.imgType){e.next=4;break}return e.next=4,u.revertToOriginal(t,!0);case 4:i&&(2,s=new c({colors:2,minHueCols:0,dithKern:null,dithSerp:!1,weighPopularity:!0,weighEntropy:!1,reIndex:!0,blur:0,paletteCount:1,palette:[[255,255,255],[0,0,0]]}),(l=new Image).crossOrigin="anonymous",l.onload=function(){s.sample(l),s.palette(!0,!0),p=s.reduce(l),f=document.createElement("canvas"),v=f.getContext("2d"),f.width=l.width,f.height=l.height,m=v.getImageData(0,0,l.width,l.height),h=m,m.data.set(p),v.putImageData(m,0,0),g=v,b=f.toDataURL("image/png"),i.prefs.imgExtension="png";var e=I(b.split(",")[1],"image/png"),t=URL.createObjectURL(e);u.addToStage(t,a),r(t,e,"",o)},l.src=t);case 5:case"end":return e.stop()}}),e)})));return function(t,a,r){return e.apply(this,arguments)}}(),u.resetFilter=function(){var e=Object(i.a)(n.a.mark((function e(t,a,r){var i,o,l;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=d.getSelectedElems()[0],o=i.childNodes[0].getAttribute("id"),!i.prefs.imgType||"svg"!==i.prefs.imgType){e.next=4;break}return e.next=4,u.revertToOriginal(t,!0);case 4:i&&((l=new Image).crossOrigin="anonymous",l.onload=function(){var e=document.createElement("canvas");e.height=l.height,e.width=l.width;var t=l.width>l.height?l.width:l.height;t>s.textureSize&&(s.textureSize=t);var n=new s.Canvas(e),c=new s.Image(l,{width:l.width,height:l.height,left:0,top:0});n.add(c);var d=n.toDataURL("image/png");i.prefs.imgExtension="png";var p=I(d.split(",")[1],"image/png"),m=URL.createObjectURL(p);u.addToStage(m,a),r(m,p,"",o)},l.src=t);case 5:case"end":return e.stop()}}),e)})));return function(t,a,r){return e.apply(this,arguments)}}(),u.removeWhiteBackground=function(e){var t=d.getSelectedElems()[0];if(t)return new Promise((function(a){var r=new Image;r.crossOrigin="anonymous",r.onload=function(){var e=document.createElement("canvas");e.height=r.height,e.width=r.width;var n=r.width>r.height?r.width:r.height;n>s.textureSize&&(s.textureSize=n);var i=new s.Canvas(e),o=new s.Image(r,{width:r.width,height:r.height,left:0,top:0});i.add(o);var l=new s.Image.filters.RemoveColor;i.getObjects()[0].filters.push(l),i.getObjects()[0].applyFilters();var c=i.toDataURL("image/png");t.prefs.imgExtension="png";var d=I(c.split(",")[1],"image/png"),p=URL.createObjectURL(d);u.addToStage(p),a({blobUrl:p,blob:d})},r.src=e}))},u.removeOuterWhiteBackground=function(e,t){var a=new Image;a.crossOrigin="anonymous",a.onload=function(){var e,r=document.createElement("canvas"),n=r.getContext("2d");r.width=250,r.height=250,n.drawImage(a,0,0);for(var i=n.getImageData(0,0,r.width,r.height),o={},s=i.data,l=0,c=s.length;l<c;l+=4)if(0!==s[l+3]){var u=l/4%i.height,d=Math.floor(l/4/i.width);255!==s[l+0]&&254!==s[l+0]||255!==s[l+1]&&254!==s[l+1]||255!==s[l+2]&&254!==s[l+2]||(o.x=u+2,o.y=d+1)}e={width:a.width,height:a.height},t(o,e)},a.src=e},u.addCropImage=function(e,t,a){var r=d.getSelectedElems()[0];if(r){var n=document.createElement("canvas"),i=t.naturalWidth/t.width,o=t.naturalHeight/t.height;n.width=Math.ceil(e.width*i),n.height=Math.ceil(e.height*o),n.getContext("2d").drawImage(t,e.x*i,e.y*o,e.width*i,e.height*o,0,0,e.width*i,e.height*o);var s=n.toDataURL("image/png",1);r.prefs.imgExtension="png";var l=I(s.split(",")[1],"image/png"),c=URL.createObjectURL(l);return u.addToStage(c,a),c}},u.reduceImageColor=function(e,t,a,n,i){var s,l,u,d,f,y,_;p=0,m=[],s=new c({colors:n||8,minHueCols:0,dithKern:null,dithSerp:!1,weighPopularity:!0,weighEntropy:!1,reIndex:!0,blur:0}),(l=new Image).crossOrigin="anonymous",l.onload=function(){s.sample(l),u=s.palette(!0,!0),d=s.reduce(l),y=document.createElement("canvas"),_=y.getContext("2d"),v=y.width=l.width,b=y.height=l.height,f=_.getImageData(0,0,l.width,l.height),h=f,f.data.set(d),_.putImageData(f,0,0),g=_;for(var e=0;e<u.length;e++)u[e]&&m.push(B(u[e][0],u[e][1],u[e][2]));y.remove();var c='<svg id="svgContent" version="1.1" width="'+l.width+'" height="'+l.height+'" style="position: relative; width: 320px; height: 320px; margin:auto; user-select: none; cursor: default;" xmlns="'+o.SVG+'" xmlns:xlink="'+o.XLINK+'" viewBox = "0 0 '+l.width+" "+l.height+'"><g id="svgPath"></g></svg>';if(!document.getElementById("reduceSvg")){var p=document.createElement("div");p.setAttribute("style","display:none"),p.setAttribute("id","reduceSvg"),document.getElementById("root").appendChild(p)}document.getElementById("svgPath")&&(document.getElementById("svgPath").innerHTML=""),document.getElementById("reduceSvg").innerHTML=c,A=[],O(t,a,n),r.canvas.getActiveObject()[0]&&i&&m.length&&N(m[0])&&(r.canvas.getActiveObject()[0].prefs.removeWhiteIndex=!0)},l.src=e},u.applyFilter=function(e,t,a){var r=d.getSelectedElems()[0];if(r)if(S&&S.getObjects()[0]&&"filter"===S.getObjects()[0].objType&&S.getObjects()[0].blobUrl===e)j(r,t,a);else{var n=new Image;n.crossOrigin="anonymous",n.onload=function(){var i=n.width>n.height?n.width:n.height;i>s.textureSize&&(s.textureSize=i),S.clear(),S.setDimensions({width:n.width,height:n.height});var o=new s.Image(n,{width:n.width,height:n.height,left:0,top:0,objType:"filter",blobUrl:e});S.add(o),j(r,t,a)},n.src=e}},u.resizeImage=function(e,t,a,r,n,i){var o=d.getSelectedElems()[0];if(o){var s=new Image;s.crossOrigin="anonymous",s.onload=function(){var e=(s.width||0)/(s.height||0),l=t,c=t;e>1?c=l/e:e<1&&(l=c*e),s.width=l,s.height=c;var u=s,d=document.createElement("canvas"),p=d.getContext("2d");d.width=l,d.height=c,p.drawImage(u,0,0,l,c);var m=d.toDataURL("image/png");o.prefs.imgExtension="png";var h=I(m.split(",")[1],"image/png"),g=URL.createObjectURL(h);n(g,a,r,i)},s.src=e}},u.addPreference=function(e,t,r){return new Promise((function(n){var i=null;(i=r?document.getElementById(r):d.getSelectedElems()[0])&&a(i).find("image").length>0&&(i.prefs[e]=t),n()}))},u.updateEngraveImage=Object(i.a)(n.a.mark((function e(){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if('<feColorMatrix result="colormatrix" in="SourceGraphic" values="1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 -0.106383 0 -1.28 0.96 0"></feColorMatrix> <feComposite result="composite1" operator="in" in2="SourceGraphic" in="colormatrix"></feComposite>',!d.getSelectedElems()[0]){e.next=5;break}return e.next=5,u.addFilterEffect("engrave",'<feColorMatrix result="colormatrix" in="SourceGraphic" values="1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 -0.106383 0 -1.28 0.96 0"></feColorMatrix> <feComposite result="composite1" operator="in" in2="SourceGraphic" in="colormatrix"></feComposite>');case 5:case"end":return e.stop()}}),e)}))),u.zoomUploadImage=function(e){var t=r.canvas.getSelectedElems()[0].getElementsByTagName("image")[0],a=t.getBBox();(a.width>250||a.height>250)&&(a.width=a.height=250),(a.width<150||a.height<150)&&(a.width=a.height=150),t.setAttribute("width",a.width+e),t.setAttribute("height",a.height+e)},t.abrupt("return",{callback:function(){}});case 45:case"end":return t.stop()}}),t)})))()}}},175:function(e,t,a){},18:function(e,t,a){"use strict";a.d(t,"i",(function(){return s})),a.d(t,"c",(function(){return l})),a.d(t,"d",(function(){return c})),a.d(t,"b",(function(){return u})),a.d(t,"g",(function(){return d})),a.d(t,"h",(function(){return p})),a.d(t,"a",(function(){return m})),a.d(t,"f",(function(){return h})),a.d(t,"e",(function(){return g}));var r=a(8),n=a(32),i=a(2),o=document.createElementNS(r.a.SVG,"svg"),s=function(e,t,a){return{x:a.a*e+a.c*t+a.e,y:a.b*e+a.d*t+a.f}},l=function(e){return 1===e.a&&0===e.b&&0===e.c&&1===e.d&&0===e.e&&0===e.f},c=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];var r=t.reduceRight((function(e,t){return t.multiply(e)}));return Math.abs(r.a)<1e-14&&(r.a=0),Math.abs(r.b)<1e-14&&(r.b=0),Math.abs(r.c)<1e-14&&(r.c=0),Math.abs(r.d)<1e-14&&(r.d=0),Math.abs(r.e)<1e-14&&(r.e=0),Math.abs(r.f)<1e-14&&(r.f=0),r},u=function(e){if(!e)return!1;for(var t=e.numberOfItems;t--;){var a=e.getItem(t);if(1===a.type&&!l(a.matrix))return!0}return!1},d=function(e,t,a,r,n){var i=s(e,t,n),o=s(e+a,t,n),l=s(e,t+r,n),c=s(e+a,t+r,n),u=Math.min(i.x,o.x,l.x,c.x),d=Math.max(i.x,o.x,l.x,c.x),p=Math.min(i.y,o.y,l.y,c.y);return{tl:i,tr:o,bl:l,br:c,aabox:{x:u,y:p,width:d-u,height:Math.max(i.y,o.y,l.y,c.y)-p}}},p=function(e,t,a){if(Object(i.x)(e))return o.createSVGTransformFromMatrix(o.createSVGMatrix());if(t=t||0,a=a||e.numberOfItems-1,(t=parseInt(t))>(a=parseInt(a))){var r=a;a=t,t=r}for(var n=o.createSVGMatrix(),s=t;s<=a;++s){var l=s>=0&&s<e.numberOfItems?e.getItem(s).matrix:o.createSVGMatrix();n=c(n,l)}return o.createSVGTransformFromMatrix(n)},m=function(e){var t=Object(n.b)(e);return p(t).matrix},h=function(e,t,a,r){var n=Math.PI/4,i=a-e,o=r-t,s=Math.atan2(o,i),l=Math.sqrt(i*i+o*o),c=Math.round(s/n)*n;return{x:e+l*Math.cos(c),y:t+l*Math.sin(c),a:c}},g=function(e,t){return t.x<e.x+e.width&&t.x+t.width>e.x&&t.y<e.y+e.height&&t.y+t.height>e.y}},180:function(e,t,a){"use strict";var r=a(9),n=a.n(r),i=a(4),o=a(20),s=a(318);t.a={name:"textExt",init:function(e){return Object(o.a)(n.a.mark((function t(){var a,r,o,l,c,u,d,p,m,h,g,f,v,b,A,y,_,E,S,C,x,w,k,I,N,O,P,D,R,T,L,M,B,j,F,U,V,G,q,H,z,W,Q,J,Y,Z,X,K;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return K=function(e,t,r,n){var o=Object(i.a)({},h.prefs.lock);I.text=e,I.textLen=O,h.prefs=I,j=a(h).find("image")[0].getBBox().height,T=l.getRotationAngle(),l.setRotationAngle(0,!0),L=h.getBBox(),l.deleteSelectedElements(!0),q(e,r,n),h=l.getSelectedElems()[0],l.selectOnly([h]),z(e,t,r),M=h.getBBox(),B=L.height/M.height,l.scaleText(B),l.moveSelectedElements(L.x-M.x-(M.width*B-L.width)/2,L.y-M.y-(M.height*B-L.height)/2),l.setRotationAngle(T,!0),h.prefs.lock=o,l.selectOnly([h])},X=function(e,t){try{E=Z(e),y=e.split("\n"),_="none"===b&&y.length>1?g.getPath(e,0,t*E,t,{letterSpacing:S,lineSpacing:C}):g.getPaths(e,0,t*E,t,{letterSpacing:S,lineSpacing:C}),(c=document.getElementById("xe_txtgrp")).innerHTML="";var a=document.createElementNS(m,"rect");a.setAttributeNS(m,"x",0),a.setAttributeNS(m,"y",0),a.setAttributeNS(m,"id",l.getNextId()),a.setAttributeNS(m,"fill","none"),a.setAttributeNS(m,"opacity","0"),c.appendChild(a);var r="",n=0,i=0,o=0;O=0;for(var s=0;s<y.length;s++)O=Math.max(y[s].length,O);for(var d=0;d<_.length;d++)d<=O&&(n+=_[d].width+S),i=Math.max(i,_[d].height),_[d].starty&&(o=Math.min(o,_[d].getBoundingBox().y1));var p,h=0,A=0,x=0,w=360,k=S>.2?S:.2,N=n/_.length;"uppercircle"===b&&(w=180,k=S>.3?S:.3),p=n*k*D,v.clearRect(0,0,f.width,f.height);for(var P=document.createElementNS(m,"g"),R=0;R<_.length;R++)_[R].fill=I.fill,_[R].stroke=I.stroke,_[R].strokeWidth=I.strokeWidth,_[R].totalwidth=n,_[R].maxheight=i,_[R].artSize=D,_[R].starty=o,_[R].arttype=b,_[R].id=l.getNextId(),x=w*k*(h+=N/p),A=w/2+N,_[R].angle=x-A+A*(D-1)/D,"circle"!==b&&"uppercircle"!==b||!_[R].commands.length||(_[R].transform="rotate("+_[R].angle+" 0 "+p+") translate("+-_[R].getBoundingBox().x1+" 0)"),r+=_[R].toSVG();a.setAttributeNS(m,"width",i),a.setAttributeNS(m,"height",i),P.innerHTML=r.trim(),P.setAttribute("id",l.getNextId()),c.appendChild(P),o=Math.min(o,P.getBBox().y),a.setAttributeNS(m,"y",o),u=c.getBBox()}catch(T){console.warn("Error in text generation: ",T)}},Z=function(e){return e.substr(0,e.selectionStart).split("\n").length},Y=function(e,t){var n=l.getAllStageElems(),i=1,s="center";n.forEach((function(t,n){t.prefs&&"text"===t.prefs.type&&t.id===k&&(t.prefs.text=e,t.prefs.operation="update",l.selectOnly([t]),j=a(t).find("rect")[0].getBBox().height,j=Q(t.id,j),T=l.getRotationAngle(),l.setRotationAngle(0,!0),L=t.getBBox(),t.innerHTML=document.getElementById("xe_txtgrp").innerHTML,l.selectOnly([t]),t.prefs.width||(t.prefs.width=L.width),t.prefs.height||(t.prefs.height=L.height),F=a(t).find("rect")[0].getBBox().height,M=t.getBBox(),B=j/F,j&&F||(B=1),i=t.prefs.isVertical?t.prefs.height/M.height:t.prefs.width/M.width,"left"!==(s=t.prefs.align?t.prefs.align:"center")&&"none"===b&&t.prefs.noOfLines>0&&o.setTextAlign(s,t),e.length===t.prefs.textLen&&1===t.prefs.textLen?(l.scaleSelectedElements(i,B),"left"===s?l.moveSelectedElements(L.x-M.x,L.y-M.y-(M.height*B-L.height)/2):"right"===s?l.moveSelectedElements(L.x-M.x-(M.width*i-L.width),L.y-M.y-(M.height*B-L.height)/2):l.moveSelectedElements(L.x-M.x-(M.width*i-L.width)/2,L.y-M.y-(M.height*B-L.height)/2)):e.length<=t.prefs.textLen&&t.prefs.width>=M.width?(l.scaleText(B),"left"===s?l.moveSelectedElements(L.x-M.x,L.y-M.y-(M.height*B-L.height)/2):"right"===s?l.moveSelectedElements(L.x-M.x-(M.width*B-L.width),L.y-M.y-(M.height*B-L.height)/2):l.moveSelectedElements(L.x-M.x-(M.width*B-L.width)/2,L.y-M.y-(M.height*B-L.height)/2)):(l.scaleText(i),"left"===s?l.moveSelectedElements(L.x-M.x,L.y-M.y-(M.height*i-L.height)/2):"right"===s?l.moveSelectedElements(L.x-M.x-(M.width*i-L.width),L.y-M.y-(M.height*i-L.height)/2):l.moveSelectedElements(L.x-M.x-(M.width*i-L.width)/2,L.y-M.y-(M.height*i-L.height)/2)),l.setRotationAngle(T,!0),r.canvas.clearSelection())}))},J=function(e,t){var n=l.getSelectedElems()[0],i=n.prefs.edit,s=1,c="center";a(n).children().each((function(t,n){if(n.prefs&&"text"===n.prefs.type&&n.id===k){l.ungroupSelectedElement(),n.prefs.text=e,n.prefs.operation="update",l.selectOnly([n]),j=a(n).find("rect")[0].getBBox().height,j=Q(n.id,j),T=l.getRotationAngle(),l.setRotationAngle(0,!0),L=n.getBBox(),n.innerHTML=document.getElementById("xe_txtgrp").innerHTML,l.selectOnly([n]),n.prefs.width||(n.prefs.width=L.width),n.prefs.height||(n.prefs.height=L.height),F=a(n).find("rect")[0].getBBox().height,M=n.getBBox(),B=j/F,j&&F||(B=1),s=n.prefs.isVertical?n.prefs.height/M.height:n.prefs.width/M.width,"left"!==(c=n.prefs.align?n.prefs.align:"center")&&"none"===b&&n.prefs.noOfLines>0&&o.setTextAlign(c,n),e.length===n.prefs.textLen&&1===n.prefs.textLen?(l.scaleSelectedElements(s,B),"left"===c?l.moveSelectedElements(L.x-M.x,L.y-M.y-(M.height*B-L.height)/2):"right"===c?l.moveSelectedElements(L.x-M.x-(M.width*s-L.width),L.y-M.y-(M.height*B-L.height)/2):l.moveSelectedElements(L.x-M.x-(M.width*s-L.width)/2,L.y-M.y-(M.height*B-L.height)/2)):e.length<=n.prefs.textLen&&n.prefs.width>=M.width?(l.scaleText(B),"left"===c?l.moveSelectedElements(L.x-M.x,L.y-M.y-(M.height*B-L.height)/2):"right"===c?l.moveSelectedElements(L.x-M.x-(M.width*B-L.width),L.y-M.y-(M.height*B-L.height)/2):l.moveSelectedElements(L.x-M.x-(M.width*B-L.width)/2,L.y-M.y-(M.height*B-L.height)/2)):(l.scaleText(s),"left"===c?l.moveSelectedElements(L.x-M.x,L.y-M.y-(M.height*s-L.height)/2):"right"===c?l.moveSelectedElements(L.x-M.x-(M.width*s-L.width),L.y-M.y-(M.height*s-L.height)/2):l.moveSelectedElements(L.x-M.x-(M.width*s-L.width)/2,L.y-M.y-(M.height*s-L.height)/2)),l.setRotationAngle(T,!0),l.selectAllInCurrentLayer();var u=r.canvas.getSelectedElems().filter((function(e){return"background"===e.id}))[0];r.canvas.removeFromSelection([u]),l.groupSelectedElements();var d=l.getSelectedElems();d[0].setAttribute("type","template"),d[0].setAttribute("pointer-events","bounding-box"),d[0].prefs={type:"template",edit:i,price:0},l.call("changed",d)}}))},Q=function(e,t){for(var a=0;a<W.length;a++)if(W[a].id===e)return W[a].height;return W.push({id:e,height:t}),t},z=function(e,t,r){if(I.text=e,I.textLen=O,I.operation="update",I.objectTitle=h.prefs.objectTitle,I.lock=h.prefs.lock,I.isTemplateElem=h.prefs.isTemplateElem,I.isTemplateImg=h.prefs.isTemplateImg,h.prefs.isTemplateImg){h.prefs.text=e,h.prefs.operation="update",h.prefs.objectTitle=I.objectTitle,h.prefs.lock=I.lock,h.prefs.isTemplateElem=I.isTemplateElem,h.prefs.isTemplateImg=I.isTemplateImg,j=a(h).find("rect")[0].getBBox().height,j=Q(h.id,j),T=l.getRotationAngle(),l.setRotationAngle(0,!0),L=h.getBBox(),h.innerHTML=document.getElementById("xe_txtgrp").innerHTML,l.selectOnly([h]),h.prefs.width||(h.prefs.width=L.width),F=a(h).find("rect")[0].getBBox().height,M=h.getBBox(),B=j/F,j&&F||(B=1),U=h.prefs.width/M.width;var n=h.prefs.align?h.prefs.align:"center";"left"!==n&&"none"===b&&h.prefs.noOfLines>0&&o.setTextAlign(n,h),e.length===h.prefs.textLen&&1===h.prefs.textLen?(l.scaleSelectedElements(U,B),"left"===n?l.moveSelectedElements(L.x-M.x,L.y-M.y-(M.height*B-L.height)/2):"right"===n?l.moveSelectedElements(L.x-M.x-(M.width*U-L.width),L.y-M.y-(M.height*B-L.height)/2):l.moveSelectedElements(L.x-M.x-(M.width*U-L.width)/2,L.y-M.y-(M.height*B-L.height)/2)):e.length<=h.prefs.textLen&&h.prefs.width>=M.width?(l.scaleText(B),"left"===n?l.moveSelectedElements(L.x-M.x,L.y-M.y-(M.height*B-L.height)/2):"right"===n?l.moveSelectedElements(L.x-M.x-(M.width*B-L.width),L.y-M.y-(M.height*B-L.height)/2):l.moveSelectedElements(L.x-M.x-(M.width*B-L.width)/2,L.y-M.y-(M.height*B-L.height)/2)):(l.scaleText(U),"left"===n?l.moveSelectedElements(L.x-M.x,L.y-M.y-(M.height*U-L.height)/2):"right"===n?l.moveSelectedElements(L.x-M.x-(M.width*U-L.width),L.y-M.y-(M.height*U-L.height)/2):l.moveSelectedElements(L.x-M.x-(M.width*U-L.width)/2,L.y-M.y-(M.height*U-L.height)/2))}else if(j=a(h).find("rect")[0].getBBox().height,T=l.getRotationAngle(),l.setRotationAngle(0,!0),L=h.getBBox(),h.innerHTML=document.getElementById("xe_txtgrp").innerHTML,l.selectOnly([h]),"left"!==(t=h.prefs.align?h.prefs.align:t)&&"none"===b&&y.length>1&&(o.setTextAlign(t,h),I.align=t),h.prefs=I,F=a(h).find("rect")[0].getBBox().height,M=h.getBBox(),B=L.height/M.height,!P&&L.height/L.width>1&&(B=1),B||(B=1),U=L.width/M.width,h.prefs&&h.prefs.isTemplateElem&&("circle"===h.prefs.effect||"uppercircle"===h.prefs.effect||"lowercircle"===h.prefs.effect))l.scaleText(U),l.moveSelectedElements(L.x-M.x-(M.width*U-L.width)/2,L.y-M.y-(M.height*U-L.height)/2);else{V=l.getBoundDimensions().boundWidth,G=l.getBoundDimensions().boundHeight;var i=L.width,s=V,c=72;h.prefs&&("circle"===h.prefs.effect&&V>G||P)&&(i=L.height,s=G,U=L.height/M.height),s=s>50?s-20:s,N?"left"===t?l.moveSelectedElements(L.x-M.x,L.y-M.y-(M.height-L.height)/2):"right"===t?l.moveSelectedElements(L.x-M.x-(M.width-L.width),L.y-M.y-(M.height-L.height)/2):l.moveSelectedElements(L.x-M.x-(M.width-L.width)/2,L.y-M.y-(M.height-L.height)/2):i<s?P?l.moveSelectedElements(L.x-M.x-(M.width-L.width)/2,L.y-M.y-(M.height-L.height)/2):((c=Math.round(h.prefs.fontSize*B))>120&&(c=120),c<R&&(c=R),h.prefs.fontSize=c,l.scaleText(B),"left"===t?l.moveSelectedElements(L.x-M.x,L.y-M.y-(M.height*B-L.height)/2):"right"===t?l.moveSelectedElements(L.x-M.x-(M.width*B-L.width),L.y-M.y-(M.height*B-L.height)/2):l.moveSelectedElements(L.x-M.x-(M.width*B-L.width)/2,L.y-M.y-(M.height*B-L.height)/2)):((c=Math.round(h.prefs.fontSize*U))>120&&(c=120),c<R&&(c=R),h.prefs.fontSize=c,l.scaleText(U),"left"===t?l.moveSelectedElements(L.x-M.x,L.y-M.y-(M.height*U-L.height)/2):"right"===t?l.moveSelectedElements(L.x-M.x-(M.width*U-L.width),L.y-M.y-(M.height*U-L.height)/2):l.moveSelectedElements(L.x-M.x-(M.width*U-L.width)/2,L.y-M.y-(M.height*U-L.height)/2))}l.setRotationAngle(T,!0),r&&H(h),l.isUpdateNameNumber&&(l.isUpdateNameNumber=!1)},H=function(e){var t,a="pattern_"+e.getAttribute("id"),r="stroke_"+e.getAttribute("id"),n=e.prefs.fill,i=e.prefs.stroke;0===e.querySelectorAll("defs").length&&(t=document.createElementNS(m,"defs")),t||(t=e.getElementsByTagName("defs"));var o='<pattern id="'+a+'" viewBox="0,0,1,1" width="4" height="2" patternUnits="userSpaceOnUse" patternTransform="rotate(-60) scale(0.6 0.6)"><polygon points="0,0 2,0 0,2" fill="'+n+'"></polygon><polygon points="0,4 4,0 4,2 2,4" fill="'+n+'"></polygon><polygon points="0,2 0,4 4,0 2,0" fill="#04000000"></polygon><polygon points="0,2 2,2 2,0" fill="#04000000"></polygon></pattern>';o+='<pattern id="'+r+'" viewBox="0,0,1,1" width="4" height="2" patternUnits="userSpaceOnUse" patternTransform="rotate(-60) scale(0.6 0.6)"><polygon points="0,0 2,0 0,2" fill="'+i+'"></polygon><polygon points="0,4 4,0 4,2 2,4" fill="'+i+'"></polygon><polygon points="0,2 0,4 4,0 2,0" fill="#04000000"></polygon><polygon points="0,2 2,2 2,0" fill="#04000000"></polygon></pattern>',t.innerHTML=o,e.appendChild(t);for(var s=e.getElementsByTagName("path"),l="url(#"+a+")",c="url(#"+r+")",u=0;u<s.length;u++)s[u].setAttribute("fill",l),s[u].setAttribute("stroke",c)},q=function(e,t,r,n){l.importSvgString(a("#text_menu_preview").html(),!0);var i=l.getSelectedElems()[0];i.setAttribute("type","text"),i.setAttribute("pointer-events","bounding-box"),i.prefs=I,"longshadow"!==b&&(o.alignText(n),l.alignSelectedElements("m","page")),t&&H(i)},a=e.$,r=e.editor,l=(o=r).canvas,600,d=72,10,p=1,m="http://www.w3.org/2000/svg",f=document.getElementById("cnv"),v=f.getContext("2d"),b="",A="",y=[],E=1,S=0,C=1,x="",w="",0,0,k=null,I={},"","",N=!1,O=0,P=!1,D=1,R=0,B=1,U=1,V=200,G=200,W=[],o.generateTextElm=function(e,t,a,r,n,i,o,s,m,f,v,y,_,E,O,T,L,M,B,j,F){var U,V;g=t,S=i/100,C=o/100+1,k=y,d=T||72,N=L||!1,P=!!j,R=F||8,I={name:O,type:"text",subType:E,text:e,font:A=n,fill:x=s||"#000000",fillName:x,stroke:w=m,strokeName:w,textLen:1,strokeWidth:f,noOfLines:v,lineSpace:o,letterSpace:i,fontSize:T,artSize:D=B||1,effect:b=r,align:a,colors:[x,w],xeId:A.xe_id,objectTitle:"",operation:"add",isTemplateElem:!1,isVertical:P,isTemplateImg:!1,lock:{colorEdit:!1,delete:!1,move:!1,rotate:!1,resize:!1,editFont:!1,edit:!1},isPatternFill:!1,isPatternStroke:!1},""===e&&(e=" "),X(e,d),u||(u={x:0,y:0,height:0,width:0}),0===u.width&&(u.width=312),u.width>600?(V="scale("+(p=580/u.width)+","+p+") ",U="translate("+(10/p-u.x)+","+200/p+") "):(p=1,V=" ",U="translate("+(600-u.width)/2+","+190/p+") "),c||(c=document.getElementById("xe_txtgrp")),c.setAttribute("transform",V+U),l.getIsFormEdit()&&" "!==e&&""!==y?Y(e):(h=l.getSelectedElems()[0])&&h.prefs&&"text"===h.prefs.type&&"graphicText"!==h.prefs.subType&&" "!==e?z(e,a,_):h&&h.prefs&&"template"===h.prefs.type&&" "!==e?J(e):h&&h.prefs&&"text"===h.prefs.type&&"graphicText"===h.prefs.subType&&" "!==e?K(e,a,_,M):" "!==e&&q(e,_,M,a)},o.setTextAlign=function(e,t){if(t.childNodes[1].childNodes.length>1){var a,r,n,i=l.getBBox(t),o=t.childNodes[1].childNodes;if("text"===t.prefs.type)for(var c=0;c<o.length;c++)"path"===o[c].nodeName&&(n=l.getBBox(o[c]),"left"===e?(a=o[c].getAttribute("d"),"function"==typeof s&&(a=s.transformPath(a,"t0,0"),o[c].setAttribute("d",a))):"center"===e?(a=o[c].getAttribute("d"),r=(i.width-n.width)/2,"function"==typeof s&&(a=s.transformPath(a,"t"+r+",0"),o[c].setAttribute("d",a))):(a=o[c].getAttribute("d"),"function"==typeof s&&(a=s.transformPath(a,"t"+(i.width-n.width)+",0"),o[c].setAttribute("d",a))))}},o.alignText=function(e){I.align=e,"left"===e?l.alignSelectedElements("l","page"):"right"===e?l.alignSelectedElements("r","page"):l.alignSelectedElements("c","page")},t.abrupt("return",{callback:function(){}});case 19:case"end":return t.stop()}}),t)})))()}}},187:function(e,t,a){"use strict";var r=a(9),n=a.n(r),i=a(4),o=a(20);t.a={name:"graphicTextExt",init:function(e){return Object(o.a)(n.a.mark((function t(){var a,r,o,s,l,c,u,d,p,m,h,g,f,v,b,A,y,_,E;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return E=function(e,t,a){var n;l.getAllStageElems().forEach((function(i,s){if(i.prefs&&"text"===i.prefs.type&&i.id===t){i.prefs.text=e,i.prefs.operation="update",l.selectOnly([i]),n=l.getRotationAngle(),l.setRotationAngle(0,!0);var u=l.getActiveObject()[0];v=e.length;var d=l.getBBox(u);u.getAttribute("charHeight")||u.setAttribute("charHeight",d.height),f={oldgbbox:d,angle:n,textLen:u.prefs.textLen,fontHeight:u.getAttribute("charHeight")},u.innerHTML="",c=l.addSVGElementFromJson({element:"g",attr:{id:u.id,type:"text"}});for(var h=0;h<p.length;h++)if(" "!==p[h]){for(var g=0,b=0;b<a.characters.length;b++)isNaN(a.characters[b].name)?p[h]===a.characters[b].name.toLowerCase()&&(m.push(a.characters[b].file_name),g++):p[h]==a.characters[b].name&&(m.push(a.characters[b].file_name),g++);0===g&&m.push(o)}else m.push(" ");m.length&&y(m,c,f,f.textLen),r.canvas.clearSelection()}}))},_=function(e,t,r){var n,i=l.getSelectedElems()[0],s=i.prefs.edit;a(i).children().each((function(a,i){if(i.prefs&&"text"===i.prefs.type&&i.id===t){l.ungroupSelectedElement(),i.prefs.text=e,i.prefs.operation="update",l.selectOnly([i]),n=l.getRotationAngle(),l.setRotationAngle(0,!0);var u=l.getActiveObject()[0];v=e.length;var d=l.getBBox(u);u.getAttribute("charHeight")||u.setAttribute("charHeight",d.height),b||(b=d.width,A=d.y),(parseInt(b)>parseInt(d.width)||1==e.length)&&(d.y=A),f={oldgbbox:d,angle:n,textLen:u.prefs.textLen,fontHeight:u.getAttribute("charHeight")},u.innerHTML="",c=l.addSVGElementFromJson({element:"g",attr:{id:u.id,type:"text"}});for(var h=0;h<p.length;h++)if(" "!==p[h]){for(var g=0,_=0;_<r.characters.length;_++)"string"===typeof r.characters[_].name?p[h]!==r.characters[_].name.toLowerCase()&&p[h].toLowerCase()!==r.characters[_].name.toLowerCase()||(m.push(r.characters[_].file_name),g++):p[h]!=r.characters[_].name&&p[h]!=r.characters[_].name||(m.push(r.characters[_].file_name),g++);0===g&&m.push(o)}else m.push(" ");m.length&&y(m,c,f,f.textLen),l.selectAllInCurrentLayer(),l.groupSelectedElements();var E=l.getSelectedElems();E[0].setAttribute("type","template"),E[0].setAttribute("pointer-events","bounding-box"),E[0].prefs={type:"template",edit:s,price:0},l.call("changed",E)}}))},y=function(e,t,a,r){if(" "===e[h]){var n=l.addSVGElementFromJson({element:"rect",attr:{id:l.getNextId(),x:l.getBBox(t).width,y:0,height:20,width:10*g,fill:"none"}});t.appendChild(n),++h<e.length&&y(e,t,a)}else if(e[h]){var o,s=l.addSVGElementFromJson({element:"image",attr:{x:0,id:l.getNextId(),"xlink:href":e[h],preserveAspectRatio:"none"}});(new Image).src=e[h];var c=l.getBBox(t);s.setAttribute("x",c.width),s.setAttribute("width",20*g),s.setAttribute("height",20),t.appendChild(s),++h<e.length&&y(e,t,a,r),l.selectOnly([t]);var u=l.getActiveObject()[0],p={},m=1;if(a.oldgbbox){r&&v<=a.textLen&&(a.oldgbbox.height=a.fontHeight),m=(p=u.getBBox()).height/a.oldgbbox.height;var f=a.oldgbbox.width/p.width;r?v<=a.textLen?(l.scaleText(1/m),l.moveSelectedElements(a.oldgbbox.x-p.x-(p.width/m-a.oldgbbox.width)/2,a.oldgbbox.y-p.y-(p.height/m-a.oldgbbox.height)/2)):(l.scaleText(f),l.moveSelectedElements(a.oldgbbox.x-p.x-(p.width*f-a.oldgbbox.width)/2,a.oldgbbox.y-p.y-(p.height*f-a.oldgbbox.height)/2)):(l.scaleText(1/m),l.moveSelectedElements(a.oldgbbox.x-p.x-(p.width/m-a.oldgbbox.width)/2,a.oldgbbox.y-p.y-(p.height/m-a.oldgbbox.height)/2))}else l.scaleText(1.7),l.alignSelectedElements("m","page"),l.alignSelectedElements("c","page");(null===a||void 0===a?void 0:a.angle)&&l.setRotationAngle(a.angle,!0),(null===u||void 0===u||null===(o=u.prefs)||void 0===o?void 0:o.lock)&&(d.lock=Object(i.a)({},u.prefs.lock)),t.prefs=d}},a=e.$,r=e.editor,o=e.misCharacter,l=(s=r).canvas,"",d={},p="",m=[],h=0,g=.7,f={},v=1,b=0,A=0,s.generateGraphicsText=function(e,t,a,r,n,i){p=e.split(""),m=[],h=0,d={type:"text",subType:"graphicText",text:e,font:t,fillName:"Black",effect:"",objectTitle:i||"",colors:[],strokeWidth:0,xeId:t.xe_id,lock:{colorEdit:!1,delete:!1,move:!1,rotate:!1,resize:!1,editFont:!1,edit:!1},textLen:n,fontHeight:r},u=l.getSelectedElems()[0];var s=l.getActiveObject()[0];if(u&&u.prefs&&"template"===u.prefs.type)""!==e&&_(e,a,t);else if(l.getIsFormEdit())""!==e&&E(e,a,t);else if(s){var g=l.getBBox(s),v=e.length,b=l.getRotationAngle();if(0==v)return;l.deleteSelectedElements(!0),f={oldgbbox:g,angle:b,oldTxtLen:v},d.fontHeight=g.height,d.textLen=v,d.lock=s.prefs.lock,c=l.addSVGElementFromJson({element:"g",attr:{id:l.getNextId(),type:"text"}});for(var A=0;A<p.length;A++)if(" "!==p[A]){for(var S=0,C=0;C<t.characters.length;C++)"string"===typeof t.characters[C].name?p[A]!==t.characters[C].name.toLowerCase()&&p[A].toLowerCase()!==t.characters[C].name.toLowerCase()||(m.push(t.characters[C].file_name),S++):p[A]!=t.characters[C].name&&p[A]!=t.characters[C].name||(m.push(t.characters[C].file_name),S++);0===S&&m.push(o)}else m.push(" ");m.length&&y(m,c,f,n)}},s.onAllFontsLoad=function(e){if(e.characters){f={};var t=0;!function a(r){var n=new Image;n.onload=function(){t<e.characters.length&&(t++,a(r))},n.src=r}(e.characters[t].file_name)}},t.abrupt("return",{callback:function(){}});case 10:case"end":return t.stop()}}),t)})))()}}},188:function(e,t,a){"use strict";var r=a(23),n=a(7),i=a(45),o=a(9),s=a.n(o),l=a(4),c=a(20),u=a(10),d=a(11),p=a(13),m=a(16),h=a(15),g=a(0),f=a.n(g),v=a(24),b=a(19),A=a.n(b),y=a(877),_=a(255),E=a.n(_),S=a(859),C=a(860),x=a(861),w=a(258),k=a(111),I=a(406),N=a.n(I),O=function(e){function t(){if(e.productDetails&&e.productDetails.is_custom_size)return f.a.createElement(g.Fragment,null,e.isMobileView&&f.a.createElement("span",{className:"borderSettings pt-0 ml-2 text-decoration-none text-md",key:"customSize",onClick:function(){return e.onCustomSizeSelect()}},f.a.createElement("i",{className:"nf nf-penciltool"})),!e.isMobileView&&f.a.createElement("span",{className:"borderSettings",key:"customSize",onClick:function(){return e.onCustomSizeSelect()}},"Custom Size"))}return f.a.createElement(g.Fragment,null,e.language&&f.a.createElement(g.Fragment,null,function(){if(e.productDetails&&e.productDetails.product_decoration&&e.productDetails.product_decoration.is_border_enable&&"sticker"!==e.productDetails.decoration_type)return f.a.createElement(g.Fragment,null,!e.isMobileView&&f.a.createElement(S.a,{className:"border-setting",trigger:"legacy",placement:"top",target:"borderSettings"},f.a.createElement(C.a,null,f.a.createElement("span",{className:"d-block"},e.language.main.borderSetting),f.a.createElement(E.a,{className:"form-control form-control-sm",min:0,max:20,value:e.customPrintAreaDimen.borderWidth,step:1,mobile:!0,onChange:function(t){return e.onUpdateBorderWidth(t)}})),f.a.createElement(x.a,null,f.a.createElement("div",{className:"ColorPalette"},f.a.createElement(k.a,{onColorHover:e.onBorderColorHover,onColorSelect:e.onBorderColorSelect,usedColorList:[{fill:e.customPrintAreaDimen.borderColor?e.customPrintAreaDimen.borderColor:""}],selectedColor:e.customPrintAreaDimen.borderColor?e.customPrintAreaDimen.borderColor:""})))),e.isMobileView&&f.a.createElement(w.a,{className:"border-setting",trigger:"legacy",placement:"top",target:"borderSettings",isOpen:e.popoverOpen},f.a.createElement(C.a,null,f.a.createElement("section",{className:"w-100 d-flex align-items-center justify-content-between"},f.a.createElement("div",null,e.language.main.borderSetting),f.a.createElement("div",{className:"border-setting-qty"},f.a.createElement("button",{type:"button",value:"-",className:"btn btn-default minus",onClick:function(){return e.updateBorderWidth("minus")}},"-"),f.a.createElement("input",{type:"number",id:"quantity_5fc49bf387ee9",className:"form-control text-center disable",disabled:!0,step:"1",min:"1",max:"20",name:"quantity",value:e.customPrintAreaDimen.borderWidth||"0"}),f.a.createElement("button",{type:"button",value:"+",className:"btn btn-default plus",onClick:function(){return e.updateBorderWidth("plus")}},"+")),f.a.createElement("div",null,f.a.createElement("button",{type:"button",className:"close",onClick:function(){return e.closePopover()}},"\xd7")))),f.a.createElement(x.a,null,f.a.createElement("div",{className:"ColorPalette"},f.a.createElement(k.a,{onColorHover:e.onBorderColorHover,onColorSelect:e.onBorderColorSelect,usedColorList:[{fill:e.customPrintAreaDimen.borderColor?e.customPrintAreaDimen.borderColor:""}],selectedColor:e.customPrintAreaDimen.borderColor?e.customPrintAreaDimen.borderColor:""})))))}(),f.a.createElement("div",{className:"productInfo-vdp customSize"},function(){if(e.productDetails&&e.productDetails.product_decoration&&e.productDetails.product_decoration.is_border_enable&&!e.isStickerEnable)return f.a.createElement("div",{className:"border-wrap"},f.a.createElement("div",{className:"border-row"},f.a.createElement("div",{className:"border-col"},f.a.createElement("div",{className:"form-group"},f.a.createElement("label",null,e.language.main.border),f.a.createElement("div",{className:"d-flex align-items-center"},!e.isMobileView&&f.a.createElement(E.a,{className:"form-control form-control-sm",min:0,max:20,value:e.customPrintAreaDimen.borderWidth,step:1,mobile:!0,onChange:function(t){return e.onUpdateBorderWidth(t)}}),e.isMobileView&&f.a.createElement("div",{className:"border-setting-qty"},f.a.createElement("button",{type:"button",value:"-",className:"btn btn-default minus",onClick:function(){return e.updateBorderWidth("minus")}},"-"),f.a.createElement("input",{type:"number",id:"quantity_5fc49bf387ee9",className:"form-control text-center disable",disabled:!0,step:"1",min:"1",max:"20",name:"quantity",value:e.customPrintAreaDimen.borderWidth||"0"}),f.a.createElement("button",{type:"button",value:"+",className:"btn btn-default plus",onClick:function(){return e.updateBorderWidth("plus")}},"+")),e.isMobileView&&f.a.createElement("span",{id:"borderSettings",className:"borderSettings pt-0 w-auto",onClick:function(){return e.openPopover()}},f.a.createElement("img",{className:"border-setting-icon",src:N.a}))),!e.isMobileView&&f.a.createElement("span",{id:"borderSettings",className:"borderSettings",onClick:function(){return e.openPopover()}},e.language.main.settings)))))}(),function(){if(e.sizeList&&e.sizeList.length&&!e.isStickerEnable&&"standard"===e.selectedSizeData.type)return f.a.createElement("div",{className:"border-wrap"},f.a.createElement("div",{className:"border-row"},f.a.createElement("div",{className:"form-group"},f.a.createElement("label",null,e.language.main.size," (W X H) in ",e.scaleUnit),f.a.createElement("div",{className:"d-flex align-items-center"},f.a.createElement("div",{className:"dropup"},f.a.createElement("div",{className:"btn btn-default bg-light btn-sm btn-block text-left"+(e.isQuot?" disabled":" dropdown-toggle"),id:"dropdownColorMenu","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},f.a.createElement("span",{className:"pr-3"},e.selectedSize&&e.selectedSize.name?e.selectedSize.name:e.sizeList[0].name)),f.a.createElement("div",{className:"dropdown-menu vdp-dropdown-fullscreen","aria-labelledby":"dropdownColorMenu",id:"sizeDropdown"},e.sizeList.map((function(t,a){return f.a.createElement("li",{className:"dropdown-item",key:t.name,onClick:function(){return e.onSizeSelect(t)}},t.name)})))),e.isMobileView&&t()))),!e.isMobileView&&t())}(),(e.isStickerEnable||"custom"===e.selectedSizeData.type)&&f.a.createElement("div",{className:"widthHeight-wrap d-flex align-items-center"},f.a.createElement("div",{className:"d-flex"},f.a.createElement("div",{className:"widthHeight-row"},f.a.createElement("div",{className:"widthHeight-col"},f.a.createElement("div",{className:"form-group"},function(){if(e.productDetails&&void 0!==e.productDetails.scale_unit_id&&e.scaleUnit)return f.a.createElement("label",null,e.language.main.width," (",e.scaleUnit,")")}(),f.a.createElement("input",{type:"text",id:"canw",className:"form-control form-control-sm",disabled:"h"===e.customPrintAreaDimen.minErr||"h"===e.customPrintAreaDimen.maxErr||"w"===e.customPrintAreaDimen.calErr||0===e.productDetails.is_custom_size?"disabled":"",value:e.customPrintAreaDimen.width,onBlur:function(t){return e.onInputBlur(t.target.value,"w")},onChange:function(t){return e.onUpdatePrintAreaDimen(t.target.value,"w")}}),"w"===e.customPrintAreaDimen.minErr?f.a.createElement("span",{className:"alert alert-warning small-txt"}," ",e.language.main.minWidth," : ",e.customPrintAreaDimen.minWidth,"."):"w"===e.customPrintAreaDimen.maxErr?f.a.createElement("span",{className:"alert alert-warning small-txt"},e.language.main.maxWidth," : ",e.customPrintAreaDimen.maxWidth,"."):void 0)),f.a.createElement("div",{className:"widthHeight-col"},f.a.createElement("div",{className:"form-group"},function(){if(e.productDetails&&void 0!==e.productDetails.scale_unit_id&&e.scaleUnit)return f.a.createElement("label",null,e.language.main.height," (",e.scaleUnit,")")}(),f.a.createElement("input",{type:"text",id:"canh",className:"form-control form-control-sm",disabled:"w"===e.customPrintAreaDimen.minErr||"w"===e.customPrintAreaDimen.maxErr||"h"===e.customPrintAreaDimen.calErr||0===e.productDetails.is_custom_size?"disabled":"",value:e.customPrintAreaDimen.height,onBlur:function(t){return e.onInputBlur(t.target.value,"h")},onChange:function(t){return e.onUpdatePrintAreaDimen(t.target.value,"h")}}),"h"===e.customPrintAreaDimen.minErr?f.a.createElement("span",{className:"alert alert-warning small-txt"},e.language.main.minHeight," : ",e.customPrintAreaDimen.minHeight,"."):"h"===e.customPrintAreaDimen.maxErr?f.a.createElement("span",{className:"alert alert-warning small-txt"},e.language.main.maxHeight," : ",e.customPrintAreaDimen.maxHeight,"."):void 0))),f.a.createElement("div",{className:"locker "+(0===e.productDetails.is_custom_size?"disableDiv":"")},e.customPrintAreaDimen.isAspectRatio&&f.a.createElement("i",{className:"nf nf-lock cursor-pointer",onClick:function(){return e.onToggleAspectRatio()}}),!e.customPrintAreaDimen.isAspectRatio&&f.a.createElement("i",{className:"nf nf-lock fade cursor-pointer",onClick:function(){return e.onToggleAspectRatio()}})),!e.isStickerEnable&&e.isValidStoreSize&&!e.isMobileView&&f.a.createElement("span",{className:"borderSettings",onClick:function(){return e.onStandardSizeClicked()}},"Standard Size")),!e.isStickerEnable&&e.isValidStoreSize&&e.isMobileView&&f.a.createElement("span",{className:"borderSettings ml-2 text-xl text-decoration-none margin-bottom--12",onClick:function(){return e.onStandardSizeClicked()}},f.a.createElement("i",{className:"nxi nxi-eye"}))),"w"===e.customPrintAreaDimen.calErr?f.a.createElement("span",{className:"alert alert-warning small-txt"},e.language.main.widthError):"h"===e.customPrintAreaDimen.calErr?f.a.createElement("span",{className:"alert alert-warning small-txt"},e.language.main.heightError):void 0)))},P=a(3),D=a(6),R={isCropMark:0,isSafeMark:0,cropVal:0,safeVal:0,isRuler:0},T="",L=[],M={name:"Custom size"},B=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(e){var r;return Object(u.a)(this,a),(r=t.call(this,e)).openPopover=function(){r.setState({popoverOpen:!0})},r.closePopover=function(){r.setState({popoverOpen:!1})},r.updateBorderWidth=function(e){if("minus"===e){if(r.props.customPrintAreaDimen.borderWidth<1)return;r.onUpdateBorderWidth(r.props.customPrintAreaDimen.borderWidth-1)}else{if(r.props.customPrintAreaDimen.borderWidth>19)return;r.onUpdateBorderWidth(r.props.customPrintAreaDimen.borderWidth+1)}},r.state={selectedSize:null,isCustomSize:!1,popoverOpen:!1,isMobileView:window.innerWidth<1023},r.onUpdatePrintAreaDimen=r.onUpdatePrintAreaDimen.bind(Object(p.a)(r)),r.onToggleAspectRatio=r.onToggleAspectRatio.bind(Object(p.a)(r)),r.onInputBlur=r.onInputBlur.bind(Object(p.a)(r)),r.onUpdateBorderWidth=r.onUpdateBorderWidth.bind(Object(p.a)(r)),r.onBorderColorSelect=r.onBorderColorSelect.bind(Object(p.a)(r)),r.onBorderColorHover=r.onBorderColorHover.bind(Object(p.a)(r)),r.onSizeSelect=r.onSizeSelect.bind(Object(p.a)(r)),r.onCustomSizeSelect=r.onCustomSizeSelect.bind(Object(p.a)(r)),r.onStandardSizeClicked=r.onStandardSizeClicked.bind(Object(p.a)(r)),r.updateBorderWidth=r.updateBorderWidth.bind(Object(p.a)(r)),r}return Object(d.a)(a,[{key:"onUpdatePrintAreaDimen",value:function(e,t){var a=this,r=0,n=0,i=1,o={},s="",l="",c=this.props.licenceAddOns.includes("sticker"),u=!!(this.props.printProfileReducer.sticker&&this.props.printProfileReducer.sticker.is_sticker_enabled&&c);(""===e||/^[0-9]+(\.([0-9]{1,2})?)?$/.test(e))&&(this.props.customPrintAreaDimen.isAspectRatio?(i=this.props.productDetails.product_decoration.print_area.width/this.props.productDetails.product_decoration.print_area.height,"w"===t?(r=e,n=(Number(e)/i).toFixed(2),Number(e)>Number(this.props.customPrintAreaDimen.maxWidth)?s="w":Number(e)<Number(this.props.customPrintAreaDimen.minWidth)&&(l="w"),this.props.dispatch(D.bb({width:r,height:n,minErr:l,maxErr:s})).then((function(){a.props.setLayerData()})),""===l&&""===s&&(n>Number(this.props.customPrintAreaDimen.maxHeight)?s="h":n<Number(this.props.customPrintAreaDimen.minHeight)&&(l="h"),""===l&&""===s?(this.props.dispatch(D.bb({height:n.toString(),prevWidth:r,prevHeight:n.toString(),minErr:l,maxErr:s})).then((function(){a.props.setLayerData()})),(o=JSON.parse(JSON.stringify(this.props.productDetails.product_decoration))).print_area.width=r,o.print_area.height=n,P.a.canvas.drawVariableBound(o,R,{borderWidth:this.props.customPrintAreaDimen.borderWidth,borderColor:this.props.customPrintAreaDimen.borderColor},0,u),P.a.updateRulers("","",r,n),u&&this.props.dispatch(D.fb({height:n,width:r}))):this.props.dispatch(D.bb({calErr:"h"})).then((function(){a.props.setLayerData()})))):"h"===t&&(n=e,r=(Number(e)*i).toFixed(2),Number(e)>Number(this.props.customPrintAreaDimen.maxHeight)?s="h":Number(e)<Number(this.props.customPrintAreaDimen.minHeight)&&(l="h"),this.props.dispatch(D.bb({height:n,minErr:l,maxErr:s})).then((function(){a.props.setLayerData()})),""===l&&""===s&&(r>Number(this.props.customPrintAreaDimen.maxWidth)?s="w":r<Number(this.props.customPrintAreaDimen.minWidth)&&(l="w"),""===l&&""===s?(this.props.dispatch(D.bb({width:r.toString(),prevWidth:r.toString(),prevHeight:n,minErr:l,maxErr:s})).then((function(){a.props.setLayerData()})),u&&this.props.dispatch(D.fb({height:n,width:r})),(o=JSON.parse(JSON.stringify(this.props.productDetails.product_decoration))).print_area.width=r,o.print_area.height=n,P.a.canvas.drawVariableBound(o,R,{borderWidth:this.props.customPrintAreaDimen.borderWidth,borderColor:this.props.customPrintAreaDimen.borderColor},0,u),P.a.updateRulers("","",r,n)):this.props.dispatch(D.bb({calErr:"w"})).then((function(){a.props.setLayerData()}))))):("w"===t?(r=e,Number(e)>Number(this.props.customPrintAreaDimen.maxWidth)?s="w":Number(e)<Number(this.props.customPrintAreaDimen.minWidth)&&(l="w"),n=this.props.customPrintAreaDimen.height):"h"===t&&(n=e,Number(e)>Number(this.props.customPrintAreaDimen.maxHeight)?s="h":Number(e)<Number(this.props.customPrintAreaDimen.minHeight)&&(l="h"),r=this.props.customPrintAreaDimen.width),this.props.dispatch(D.bb({width:r,height:n,minErr:l,maxErr:s})).then((function(){a.props.setLayerData()})),""===l&&""===s&&(this.props.dispatch(D.bb({prevWidth:r,prevHeight:n})).then((function(){a.props.setLayerData()})),u&&this.props.dispatch(D.fb({height:n,width:r})),(o=JSON.parse(JSON.stringify(this.props.productDetails.product_decoration))).print_area.width=r,o.print_area.height=n,P.a.canvas.drawVariableBound(o,R,{borderWidth:this.props.customPrintAreaDimen.borderWidth,borderColor:this.props.customPrintAreaDimen.borderColor},0,u),P.a.updateRulers())))}},{key:"onToggleAspectRatio",value:function(){var e=this;this.props.dispatch(D.bb({isAspectRatio:!this.props.customPrintAreaDimen.isAspectRatio})).then((function(){e.props.customPrintAreaDimen.isAspectRatio&&e.onUpdatePrintAreaDimen(e.props.customPrintAreaDimen.width,"w"),e.props.setLayerData()}))}},{key:"onUpdateBorderWidth",value:function(e){var t=this;e>20&&(e=20),this.props.dispatch(D.bb({borderWidth:e})).then((function(){var a=JSON.parse(JSON.stringify(t.props.productDetails.product_decoration));t.props.customPrintAreaDimen.isAspectRatio||(a.print_area.width=t.props.customPrintAreaDimen.width,a.print_area.height=t.props.customPrintAreaDimen.height),P.a.canvas.drawVariableBound(a,R,{borderWidth:e,borderColor:t.props.customPrintAreaDimen.borderColor}),t.props.setLayerData()}))}},{key:"onInputBlur",value:function(e,t){var a=this;if("w"===t){"w"!==this.props.customPrintAreaDimen.calErr?this.props.dispatch(D.bb({width:Number(this.props.customPrintAreaDimen.prevWidth).toFixed(2).toString(),minErr:"",maxErr:"",calErr:""})).then((function(){a.props.setLayerData()})):0===Number(e)||Number(e)<Number(this.props.customPrintAreaDimen.minWidth)||Number(e)>Number(this.props.customPrintAreaDimen.maxWidth)?this.props.dispatch(D.bb({width:Number(this.props.customPrintAreaDimen.prevWidth).toFixed(2).toString(),minErr:"",maxErr:""})).then((function(){a.props.setLayerData()})):this.props.dispatch(D.bb({width:Number(e).toFixed(2).toString()})).then((function(){a.props.setLayerData()}));var r=Number(e).toString()+" x "+this.props.customPrintAreaDimen.prevHeight;this.props.dispatch(D.N({type:"custom",selSize:{name:r}}))}else if("h"===t){"h"!==this.props.customPrintAreaDimen.calErr?this.props.dispatch(D.bb({height:Number(this.props.customPrintAreaDimen.prevHeight).toFixed(2).toString(),minErr:"",maxErr:"",calErr:""})).then((function(){a.props.setLayerData()})):0===Number(e)||Number(e)<Number(this.props.customPrintAreaDimen.minHeight)||Number(e)>Number(this.props.customPrintAreaDimen.maxHeight)?this.props.dispatch(D.bb({height:Number(this.props.customPrintAreaDimen.prevHeight).toFixed(2).toString(),minErr:"",maxErr:""})).then((function(){a.props.setLayerData()})):this.props.dispatch(D.bb({height:Number(e).toFixed(2).toString()})).then((function(){a.props.setLayerData()}));var n=this.props.customPrintAreaDimen.prevWidth+" x "+Number(e).toString();this.props.dispatch(D.N({type:"custom",selSize:{name:n}}))}}},{key:"onBorderColorHover",value:function(e,t){}},{key:"onBorderColorSelect",value:function(e){var t=this,a="";e.hex_value?a=e.hex_value:(P.a.canvas.setPatternDefs("pattern_"+e.id,e.value),a="url(#pattern_"+e.id+")"),this.props.dispatch(D.bb({borderColor:a,selBorderColor:e})).then((function(){var e=JSON.parse(JSON.stringify(t.props.productDetails.product_decoration));t.props.customPrintAreaDimen.isAspectRatio||(e.print_area.width=t.props.customPrintAreaDimen.width,e.print_area.height=t.props.customPrintAreaDimen.height),P.a.canvas.drawVariableBound(e,R,{borderWidth:t.props.customPrintAreaDimen.borderWidth,borderColor:t.props.customPrintAreaDimen.borderColor}),t.props.setLayerData()}))}},{key:"onSizeSelect",value:function(e){var t=this,a=JSON.parse(JSON.stringify(this.props.productCavasData.selectedVarSize.selSize));this.setState({selectedSize:e},(function(){var r=e.name.replace("(","").replace(")","").split(/[^0-9\.]+/);if(t.updateVariableBoundary(r[0],r[1],!1),t.props.dispatch(D.N({type:"standard",selSize:e})),t.props.setLayerData(),t.props.productCavasData.color&&t.props.productCavasData.color.length&&L&&L.length){var n=t.props.productCavasData.color[0].name,i=[];L.some((function(e){return e.name===n}))&&(i[0]=e,t.props.dispatch(D.K(i)),t.props.updateCartAttrForSignBanner())}setTimeout((function(){JSON.stringify(a)!==JSON.stringify(t.state.selectedSize)&&t.props.updateCartAttrForSignBanner()}),200)}))}},{key:"updateVariableBoundary",value:function(e,t,a){var r=this;this.props.dispatch(D.bb({width:e,height:t,prevWidth:e,prevHeight:t,isAspectRatio:a,minErr:"",maxErr:"",calErr:""})).then((function(){r.props.setLayerData()}));var n=JSON.parse(JSON.stringify(this.props.productDetails.product_decoration));n.print_area.width=e,n.print_area.height=t,P.a.canvas.drawVariableBound(n,R,{borderWidth:this.props.customPrintAreaDimen.borderWidth,borderColor:this.props.customPrintAreaDimen.borderColor}),P.a.updateRulers()}},{key:"onCustomSizeSelect",value:function(){var e=this;this.setState({selectedSize:M,isCustomSize:!0},(function(){e.props.productCavasData&&e.props.productCavasData.selectedVarSize&&(e.props.dispatch(D.N({type:"custom",selSize:{name:e.props.productCavasData.selectedVarSize.selSize.name}})),e.props.setLayerData())}))}},{key:"onStandardSizeClicked",value:function(){var e=this,t=JSON.parse(JSON.stringify(this.props.productCavasData.selectedVarSize.selSize));this.setState({selectedSize:L[0],isCustomSize:!1},(function(){var a=L[0].name.replace("(","").replace(")","").split(/[^0-9\.]+/);e.updateVariableBoundary(a[0],a[1]),e.props.dispatch(D.N({type:"standard",selSize:L[0]})),e.props.setLayerData(),setTimeout((function(){JSON.stringify(t)!==JSON.stringify(e.state.selectedSize)&&e.props.updateCartAttrForSignBanner()}),200)}))}},{key:"render",value:function(){this.props.productDetails&&(R={isCropMark:this.props.productDetails.is_crop_mark,isSafeMark:this.props.productDetails.is_safe_zone,cropVal:this.props.productDetails.crop_value,safeVal:this.props.productDetails.safe_value,isRuler:this.props.productDetails.is_ruler},void 0!==this.props.productDetails.scale_unit_id&&(T=this.props.productDetails.scale_unit_id),this.props.globalSettings&&this.props.globalSettings.unit_name===T&&(T=this.props.globalSettings.unit),this.props.productCavasData&&this.props.productCavasData.storeSizeAttribute&&this.props.productCavasData.storeSizeAttribute.length&&(L=this.props.productCavasData.storeSizeAttribute));var e=this.props.licenceAddOns.includes("sticker");return f.a.createElement(O,{productDetails:this.props.productDetails,customPrintAreaDimen:this.props.customPrintAreaDimen,onUpdatePrintAreaDimen:this.onUpdatePrintAreaDimen,onToggleAspectRatio:this.onToggleAspectRatio,onUpdateBorderWidth:this.onUpdateBorderWidth,onInputBlur:this.onInputBlur,onBorderColorSelect:this.onBorderColorSelect,onBorderColorHover:this.onBorderColorHover,language:this.props.language,scaleUnit:T,sizeList:L,onSizeSelect:this.onSizeSelect,selectedSize:this.props.productCavasData.selectedVarSize.selSize,onCustomSizeSelect:this.onCustomSizeSelect,isCustomSize:this.state.isCustomSize,onStandardSizeClicked:this.onStandardSizeClicked,selectedSizeData:this.props.productCavasData.selectedVarSize,isStickerEnable:!!(this.props.printProfileReducer&&this.props.printProfileReducer.sticker&&this.props.printProfileReducer.sticker.is_sticker_enabled&&e),isValidStoreSize:this.props.productCavasData.isValidStoreSize,isMobileView:this.state.isMobileView,openPopover:this.openPopover,closePopover:this.closePopover,popoverOpen:this.state.popoverOpen,updateBorderWidth:this.updateBorderWidth,isQuot:this.props.isQuot})}}]),a}(f.a.Component),j=Object(v.b)((function(e){return{customPrintAreaDimen:e.productCanvasReducer.customPrintAreaDimension,productDetails:e.productCanvasReducer.product_details,globalSettings:e.globalSettingReducer.global_settings_data,language:e.languageReducer.translation_data.filter((function(t){return t.langCode===e.languageReducer.default_lang}))[0],printProfileReducer:e.printProfileReducer.print_profile_data[0],extraDetails:e.productCanvasReducer.product_extra_details,productSides:e.productCanvasReducer.product_sides,productCavasData:e.productCanvasReducer,licenceAddOns:e.productCanvasReducer.licenceAddOns}}))(B),F=a(862),U=a(879),V=a(876),G=a(863),q=function(e){function t(t){if(t.length)return t.map((function(t,a){return f.a.createElement(g.Fragment,{key:a},f.a.createElement(F.a,{className:"dropdown-item",onClick:function(t){return e.onChangeContour(t)}},t.name))}))}return f.a.createElement(g.Fragment,null,f.a.createElement("div",{className:"productInfo-vdp sticker"},f.a.createElement("div",{className:"widthHeight-wrap"},f.a.createElement("div",{className:"widthHeight-row"},f.a.createElement("div",{className:"widthHeight-col"},f.a.createElement("div",{className:"form-group"},f.a.createElement("label",null,"Cutline"),f.a.createElement(U.a,null,f.a.createElement(V.a,{caret:!0,className:"btn btn-light btn-sm",onClick:function(){return e.handleStickerDropdownClass(!0)}},e.selectedCutLine),f.a.createElement(G.a,{className:"p-0"},f.a.createElement("span",{className:"dropdown-item label",id:"basicShapes",style:{display:(e.basicShapes&&e.basicShapes.length)>0?"":"none"}},"Basic shapes"),t(e.basicShapes),f.a.createElement("span",{className:"dropdown-item label",id:"dieCut",style:{display:(e.dieCutShapes&&e.dieCutShapes.length)>0?"":"none"}},"Die cut"),t(e.dieCutShapes))))),f.a.createElement("div",{className:e.disableDropDown?"widthHeight-col viewOnly":"widthHeight-col"},f.a.createElement("div",{className:"form-group"},f.a.createElement("label",null,"Material"),f.a.createElement(U.a,null,f.a.createElement(V.a,{caret:!0,className:"btn btn-light btn-sm",onClick:function(){return e.handleStickerDropdownClass(!0)}},e.selectedMaterial),f.a.createElement(G.a,{className:"p-0"},e.materialList&&e.materialList.length?e.materialList.map((function(t,a){return f.a.createElement(g.Fragment,{key:"material"+a},f.a.createElement(F.a,{className:"dropdown-item",onClick:function(t){return e.onChangeMaterial(t)}},t.name))})):""))))))),f.a.createElement("div",{className:"productInfo-vdp"},e.cutLineEnable&&f.a.createElement("div",{className:e.disableDropDown?"widthHeight-wrap viewOnly":"widthHeight-wrap"},f.a.createElement("div",{className:"widthHeight-row"},f.a.createElement("div",{className:"widthHeight-col"},f.a.createElement("div",{className:"form-group"},function(){if(e.productDetails&&void 0!==e.productDetails.scale_unit_id)return f.a.createElement("label",null,"Width (",e.productDetails.scale_unit_id,")")}(),f.a.createElement("input",{type:"text",id:"canw",className:"form-control form-control-sm",disabled:!0,value:e.objDimension.dimensionWidth,onChange:function(t){return e.onUpdatedimensions(t.target.value,"w")}}))),f.a.createElement("div",{className:"widthHeight-col"},f.a.createElement("div",{className:"form-group"},function(){if(e.productDetails&&void 0!==e.productDetails.scale_unit_id)return f.a.createElement("label",null,"Height (",e.productDetails.scale_unit_id,")")}(),f.a.createElement("input",{type:"text",id:"canh",className:"form-control form-control-sm",disabled:!0,value:e.objDimension.dimensionHeight,onChange:function(t){return e.onUpdatedimensions(t.target.value,"h")}}))))),f.a.createElement("div",{className:e.disableDropDown?"widthHeight-wrap preview viewOnly":"widthHeight-wrap preview"},f.a.createElement("div",{className:"widthHeight-row"},f.a.createElement("div",{className:"widthHeight-col"},f.a.createElement("div",{className:"form-group"},e.enableContourPreview&&f.a.createElement("label",null,"Preview"),function(){if(e.enableContourPreview)return f.a.createElement("ul",{className:"nav nav-pills custom-pills",role:"tablist"},f.a.createElement("li",{className:"nav-item"},f.a.createElement("a",{className:e.stickerPreview?"nav-link":"nav-link active",onClick:function(){return e.toggleEditDesign(!1)}},f.a.createElement("i",{className:"nf nf-penciltool"}))),f.a.createElement("li",{className:"nav-item"},f.a.createElement("a",{className:e.stickerPreview?"nav-link active":"nav-link",onClick:function(){return e.toggleEditDesign(!0)}},f.a.createElement("i",{className:"nxi nxi-eye"}))))}()))))))},H=a(325),z=a.n(H),W=a(47),Q=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(e){var r;return Object(u.a)(this,a),(r=t.call(this,e)).onChangeMaterial=function(e){r.selectedMaterial=e.currentTarget.textContent;var t=r.state.materialList.filter((function(e){return e.name===r.selectedMaterial}));t&&t.length&&(P.a.canvas.addMaterialPreview(t[0],r.state.selectedCutLine),r.setState({selectedMaterial:t[0].name},(function(){r.props.dispatch(D.Q({selectedCutLine:r.state.selectedCutLine,selectedMaterial:r.state.selectedMaterial}))})));var a=!1;"Small"!==r.state.selectedCutLine&&"Medium"!==r.state.selectedCutLine&&"Large"!==r.state.selectedCutLine||(a=!0),a&&r.editPreviewStatus&&r.toggleEditDesign(!0),r.props.setLayerData(),r.props.handleStickerDropdownClass(!1)},r.toggleEditDesign=function(e){r.editPreviewStatus=e,r.props.enableStickerpreview(e)},r.checkElementStatus=function(){var e=!1;P.a.canvas.getAllStageElems().length||"Small"!==r.state.selectedCutLine&&"Medium"!==r.state.selectedCutLine&&"Large"!==r.state.selectedCutLine||(e=!0),r.setState({disableDropDown:e})},r.onUpdatedimensions=function(e,t){var a=0,n=0,i=1,o="",s="";(""===e||/^[0-9]+(\.([0-9]{1,2})?)?$/.test(e))&&(i=r.props.objDimension.dimensionWidth/r.props.objDimension.dimensionHeight,"w"===t?(a=e,n=(Number(e)/i).toFixed(2),Number(e)>Number(r.props.productCanvasReducer.customPrintAreaDimension.maxWidth)?o="w":Number(e)<Number(r.props.productCanvasReducer.customPrintAreaDimension.minWidth)&&(s="w"),""===s&&""===o&&(n>Number(r.props.productCanvasReducer.customPrintAreaDimension.maxHeight)?o="h":n<Number(r.props.productCanvasReducer.customPrintAreaDimension.minHeight)&&(s="h"),""===s&&""===o?P.a.canvas.setElementDimension(a,n.toString()):r.props.dispatch(D.bb({calErr:"h"})))):"h"===t&&(n=e,a=(Number(e)*i).toFixed(2),Number(e)>Number(r.props.productCanvasReducer.customPrintAreaDimension.maxHeight)?o="h":Number(e)<Number(r.props.productCanvasReducer.customPrintAreaDimension.minHeight)&&(s="h"),""===s&&""===o&&(a>Number(r.props.productCanvasReducer.customPrintAreaDimension.maxWidth)?o="w":a<Number(r.props.productCanvasReducer.customPrintAreaDimension.minWidth)&&(s="w"),""===s&&""===o?P.a.canvas.setElementDimension(a.toString(),n):r.props.dispatch(D.bb({calErr:"w"})))))},r.getPathFromSvg=function(){var e=Object(c.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){var a=new XMLHttpRequest;a.open("GET",t,!0),a.send(),a.onreadystatechange=function(){if(4===a.readyState&&200===a.status){var t=a.responseXML.children[0].getElementsByTagName("path")[0].getAttribute("d");e(t)}}})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.onChangeContour=function(){var e=Object(c.a)(s.a.mark((function e(t){var a,n,i,o,l,u;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=r.state.cutline.filter((function(e){return e.name===t.currentTarget.textContent})),n=r.props.productCanvasReducer.product_details.product_decoration,i={},o={cropVal:0,isCropMark:0,isSafeMark:0,safeVal:0},l={borderColor:"#000",borderWidth:0},a&&a.length&&(i.x=0,i.y=0,i.width=600,i.height=600,n.print_area.width=r.props.productCanvasReducer.customPrintAreaDimension.width,n.print_area.height=r.props.productCanvasReducer.customPrintAreaDimension.height),"Rectangle"!==a[0].name){e.next=7;break}i.type="rect",e.next=17;break;case 7:if("Small"!==a[0].name&&"Medium"!==a[0].name&&"Large"!==a[0].name){e.next=12;break}i.type="rect",i.path="",e.next=17;break;case 12:return e.next=14,r.getPathFromSvg(a[0].file_name);case 14:u=e.sent,i.type="path",i.path=u;case 17:n.dimension=i,P.a.canvas.drawStickerBound(n,o,l,1,a[0].name),r.setState({selectedCutLine:a[0].name},Object(c.a)(s.a.mark((function e(){var t,a,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("select"!==r.state.selectedMaterial&&(t=r.state.materialList.filter((function(e){return e.name===r.state.selectedMaterial})),P.a.canvas.addMaterialPreview(t[0],r.state.selectedCutLine)),a=!1,"Small"!==r.state.selectedCutLine&&"Medium"!==r.state.selectedCutLine&&"Large"!==r.state.selectedCutLine||(a=!0),r.setState({enableContourPreview:a},(function(){r.props.updateStickerVal()})),r.props.dispatch(D.Q({selectedCutLine:r.state.selectedCutLine,selectedMaterial:r.state.selectedMaterial})),a&&r.editPreviewStatus&&r.toggleEditDesign(!0),"Small"!==r.state.selectedCutLine&&"Medium"!==r.state.selectedCutLine&&"Large"!==r.state.selectedCutLine){e.next=11;break}return e.next=9,P.a.canvas.getElemDimension();case 9:n=e.sent,r.props.dispatch(D.fb({height:n.dimensionHeight,width:n.dimensionWidth,cutline:r.state.selectedCutLine}));case 11:r.checkElementStatus();case 12:case"end":return e.stop()}}),e)})))),r.props.setLayerData(),r.props.handleStickerDropdownClass(!1);case 22:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.loadD3Library=function(){window.d3||z()("https://cdnjs.cloudflare.com/ajax/libs/d3/7.0.0/d3.min.js",(function(e,t){e?console.log(e):console.log(t.src)}))},r.state={cutline:[],materialList:[],selectedCutLine:"",selectedMaterial:"",designImg:"",enableContourPreview:!1,disableDropDown:!1},r.selectedMaterial="None",r.basicShapes=[],r.dieCutShapes=[],r.designImg="",r.selectedCutlinePath="",r.editPreviewStatus=!1,W.a.subscribe(W.b.SELECT_STAGE_ELEMS,(function(){return r.checkElementStatus()})),r}return Object(d.a)(a,[{key:"componentWillUnmount",value:function(){W.a.unsubscribe(W.b.SELECT_STAGE_ELEMS)}},{key:"componentDidMount",value:function(){var e=this,t=this.props.licenceAddOns.includes("sticker");if(this.props.printProfileData[0]&&this.props.printProfileData[0].sticker&&this.props.printProfileData[0].sticker.is_sticker_enabled&&t){var a=[],r=[];this.props.printProfileData[0].sticker.shapes&&this.props.printProfileData[0].sticker.shapes.is_selected&&(this.basicShapes=this.props.printProfileData[0].sticker.shapes.option_list[0].options.filter((function(e){return e.is_selected})),this.dieCutShapes=this.props.printProfileData[0].sticker.shapes.option_list[1].options.filter((function(e){return e.is_selected})),this.props.printProfileData[0].sticker.shapes.option_list.forEach((function(e){e.options.forEach((function(e){e.is_selected&&a.push(e)}))}))),this.props.printProfileData[0].sticker.material&&this.props.printProfileData[0].sticker.material.is_selected&&(r=[{id:0,name:"None",is_selected:1}],this.props.printProfileData[0].sticker.material.option_list.forEach((function(e){e.is_selected&&r.push(e)}))),0===a.length&&a.push({id:2,is_selected:1,name:"Rectangle"});var n=this.props.stickerReducer&&this.props.stickerReducer.stickerPreviewData&&this.props.stickerReducer.stickerPreviewData.selectedCutLine?this.props.stickerReducer.stickerPreviewData.selectedCutLine:a[0].name,i=this.props.stickerReducer&&this.props.stickerReducer.stickerPreviewData&&this.props.stickerReducer.stickerPreviewData.selectedMaterial?this.props.stickerReducer.stickerPreviewData.selectedMaterial:"None",o=!1;"Small"!==n&&"Medium"!==n&&"Large"!==n||(o=!0),this.setState({cutline:a,materialList:r,selectedCutLine:n,selectedMaterial:i,enableContourPreview:o},(function(){e.props.dispatch(D.Q({selectedCutLine:n,selectedMaterial:i})),e.selectedMaterial=e.state.selectedMaterial}))}document.getElementById("basicShapes").addEventListener("click",(function(e){"basicShapes"===e.target.id&&e.stopPropagation()})),document.getElementById("dieCut").addEventListener("click",(function(e){"dieCut"===e.target.id&&e.stopPropagation()})),this.loadD3Library()}},{key:"render",value:function(){return f.a.createElement(q,{cutlineList:this.state.cutline,materialList:this.state.materialList,onChangeContour:this.onChangeContour,onChangeMaterial:this.onChangeMaterial,selectedMaterial:this.selectedMaterial,selectedCutLine:this.state.selectedCutLine,basicShapes:this.basicShapes,dieCutShapes:this.dieCutShapes,toggleEditDesign:this.toggleEditDesign,stickerPreview:this.props.editStatus,enableContourPreview:this.state.enableContourPreview,productDetails:this.props.productCanvasReducer.product_details,cutLineEnable:this.props.cutLineEnable,objDimension:this.props.objDimension,onUpdatedimensions:this.onUpdatedimensions,disableDropDown:this.state.disableDropDown,handleStickerDropdownClass:this.props.handleStickerDropdownClass})}}]),a}(f.a.Component),J=Object(v.b)((function(e){return{language:e.languageReducer.translation_data.filter((function(t){return t.langCode===e.languageReducer.default_lang}))[0],productCanvasReducer:e.productCanvasReducer,stickerReducer:e.StickerReducer,printProfileData:e.printProfileReducer.print_profile_data,licenceAddOns:e.productCanvasReducer.licenceAddOns}}))(Q),Y=a(12),Z=function(e){function t(t,a){if(e.isProductTemplate&&0===e.productDetails.is_configurator)return f.a.createElement("img",{src:t.image,alt:"",style:"#"===t.colorCode[0]?{backgroundColor:t.colorCode}:{backgroundImage:"url("+t.colorCode+")",backgroundSize:"cover"}});if(1===e.productDetails.is_configurator&&0===e.productDetails.is_image_based)return f.a.createElement("figure",{className:"imageWrap-box",id:"configurator_side_"+a});var r=setInterval((function(){var n=document.getElementById("preview_"+a);if(t.svg&&n){clearInterval(r);var i=(new DOMParser).parseFromString(t.svg,"image/svg+xml").getElementsByTagName("svg")[0];n.getElementsByTagName("svg").length&&n.getElementsByTagName("svg")[0].remove();for(var o=i.getElementsByClassName("layer"),s=[],l=0;l<o.length;l++)s.push(o[l].getAttribute("id"));for(var c=0;c<s.length;c++)i.getElementById(s[c]).setAttribute("class","layer_"+c);if(1===e.productDetails.is_variable_decoration)return f.a.createElement("img",{src:t.image,alt:""});n.append(i)}}),500);return 0===e.productDetails.is_variable_decoration||e.productDetails.is_variable_decoration?f.a.createElement("img",{src:t.image,alt:""}):void 0}function a(t){if(e.productDetails&&1===e.productDetails.is_variable_decoration&&e.customPrintAreaDimen&&!1===e.isOrderOptionsShow&&0!==t)return f.a.createElement("span",{className:"removeItemBtn",onClick:function(){return e.onRemoveVarDecoSide(t)}},f.a.createElement("i",{className:"nf nf-delete"}))}function r(){return e.productSides&&e.productSides.length&&e.language&&(1!=e.productDetails.is_configurator||1!=e.productDetails.is_image_based)?f.a.createElement(g.Fragment,null,!1===e.isOrderOptionsShow&&!e.stickerPreviewEnable&&f.a.createElement("div",{className:"productInfo-sides"},e.productSides.length>e.maxThumbCount&&!e.isMobileView&&f.a.createElement("div",{className:"btn controls controls-prev"+(0===e.startIndex?" disabled":""),onClick:function(){return e.productSidePrevNext("prev")}},f.a.createElement("i",{className:"nxi nxi-move-left"})),f.a.createElement("div",{className:"thumbView"},f.a.createElement("div",{className:"thumbView-row",style:{flexWrap:e.productDetails&&1===e.productDetails.is_variable_decoration?"nowrap":""}},e.productSides.map((function(t,r){return f.a.createElement(g.Fragment,{key:r},r>=e.startIndex&&r<=e.endIndex&&(!e.isMobileView||0===e.productDetails.is_variable_decoration)&&f.a.createElement("div",{key:r,className:"thumbView-col "+(e.isSideActive[r]?"active":"")},a(r),f.a.createElement("div",{className:"imageWrap",onClick:function(){return e.sideSelected(t,r)}},n(r,t),i(t))),e.isMobileView&&1===e.productDetails.is_variable_decoration&&f.a.createElement("div",{key:r,className:"thumbView-col "+(e.isSideActive[r]?"active":"")},a(r),f.a.createElement("div",{className:"imageWrap",onClick:function(){return e.sideSelected(t,r)}},n(r,t),i(t))))})))),e.productSides.length>e.maxThumbCount&&!e.isMobileView&&f.a.createElement("div",{className:"btn controls controls-next"+(e.endIndex===e.productSides.length-1?" disabled":""),onClick:function(){return e.productSidePrevNext("next")}},f.a.createElement("i",{className:"nxi nxi-move-right"})),e.productDetails&&1===e.productDetails.is_variable_decoration&&1===e.productDetails.product_decoration.is_sides_allow&&e.productDetails.product_decoration.no_of_sides>e.productSides.length&&f.a.createElement("div",{className:"add-side",style:{marginLeft:e.productSides.length<3?"5px":""},onClick:function(){return e.onAddVarDecoSide()},title:e.language.productSides&&e.language.productSides.Side?"Add "+e.language.productSides.Side:"Add Side"},f.a.createElement("div",{className:"add-side-lable"},"Add"),f.a.createElement("div",{className:"btn controls add-side"},f.a.createElement("i",{className:"nf nf-plus"})))),!0===e.isOrderOptionsShow&&!e.stickerPreviewEnable&&f.a.createElement("div",{className:"productInfo-sides"},e.cartCaptureImage.length>6&&f.a.createElement("div",{className:"btn controls controls-prev"+(0===e.captureStartIndex?" disabled":""),onClick:function(){return e.capturedImagePrevNext("prev")}},f.a.createElement("i",{className:"nxi nxi-move-left"})),f.a.createElement("div",{className:"thumbView"},f.a.createElement("div",{className:"thumbView-row"},!(1===e.productDetails.is_configurator&&0===e.productDetails.is_image_based)&&e.cartCaptureImage&&e.cartCaptureImage.map((function(a,r){return f.a.createElement(g.Fragment,{key:r},r>=e.captureStartIndex&&r<=e.captureEndIndex&&f.a.createElement("div",{className:"thumbView-col"},f.a.createElement("div",{className:"imageWrap"},f.a.createElement("figure",{className:"imageWrap-box",id:"preview_"+r,style:{cursor:"default"}},t(a,r)))))})),1===e.productDetails.is_configurator&&0===e.productDetails.is_image_based&&e.productSides&&e.productSides.map((function(e,a){return f.a.createElement(g.Fragment,{key:a},f.a.createElement("div",{className:"thumbView-col"},f.a.createElement("div",{className:"imageWrap"},f.a.createElement("figure",{className:"imageWrap-box",id:"preview_"+a,style:{cursor:"default"}},t(e,a)))))})))),e.cartCaptureImage.length>6&&f.a.createElement("div",{className:"btn controls controls-next"+(e.captureEndIndex===e.cartCaptureImage.length-1?" disabled":""),onClick:function(){return e.capturedImagePrevNext("next")}},f.a.createElement("i",{className:"nxi nxi-move-right"})))):e.loading?f.a.createElement("div",{className:"productInfo-sides"},f.a.createElement("div",{className:"thumbView"},f.a.createElement("div",{className:"thumbView-row"},f.a.createElement("div",{className:"thumbView-col"},f.a.createElement("div",{className:"imageWrap"},f.a.createElement("figure",{className:"imageWrap-box"},f.a.createElement(A.a,{width:50,height:50})),f.a.createElement("div",{className:"imageWrap-title"},f.a.createElement(A.a,{width:30,height:8})))),f.a.createElement("div",{className:"thumbView-col"},f.a.createElement("div",{className:"imageWrap"},f.a.createElement("figure",{className:"imageWrap-box"},f.a.createElement(A.a,{width:50,height:50})),f.a.createElement("div",{className:"imageWrap-title"},f.a.createElement(A.a,{width:30,height:8})))),f.a.createElement("div",{className:"thumbView-col"},f.a.createElement("div",{className:"imageWrap"},f.a.createElement("figure",{className:"imageWrap-box"},f.a.createElement(A.a,{width:50,height:50})),f.a.createElement("div",{className:"imageWrap-title"},f.a.createElement(A.a,{width:30,height:8})))),f.a.createElement("div",{className:"thumbView-col"},f.a.createElement("div",{className:"imageWrap"},f.a.createElement("figure",{className:"imageWrap-box"},f.a.createElement(A.a,{width:50,height:50})),f.a.createElement("div",{className:"imageWrap-title"},f.a.createElement(A.a,{width:30,height:8}))))))):e.error?f.a.createElement("div",{className:"productInfo-sides",style:{color:"red"}},"Error in loading."):void 0}function n(t,a){return 1!==e.productDetails.is_configurator||0!==e.productDetails.is_image_based||e.isMobileView?e.isProductTemplate&&e.selectedColor?f.a.createElement("figure",{className:"imageWrap-box"},(""!==e.selectedColor.hex_code||""!==e.selectedColor.file_name)&&f.a.createElement("img",{src:a.image.thumbnail,alt:"",style:{backgroundColor:""!==e.selectedColor.hex_code?e.selectedColor.hex_code:"",backgroundImage:""!==e.selectedColor.file_name?"url("+e.selectedColor.file_name+")":"",backgroundSize:"cover"}}),""===e.selectedColor.hex_code&&""===e.selectedColor.file_name&&f.a.createElement("img",{src:a.image.thumbnail,alt:""})):f.a.createElement("figure",{className:"imageWrap-box"},f.a.createElement("img",{src:a.image.thumbnail,alt:"",style:{backgroundColor:"#fff"}})):f.a.createElement(g.Fragment,{key:t},f.a.createElement("figure",{className:"imageWrap-box",id:"configurator_side_"+t}),f.a.createElement("figure",{className:"imageWrap-box",style:{position:"absolute"}},f.a.createElement("img",{src:e.productDetails.configurator_image[t].sidePreview,alt:"",style:{position:"absolute",zIndex:9}})))}function i(t){if(t.name){if((t.name+"").toLowerCase().includes("side")){var a=t.name.split(" ");return f.a.createElement("div",{className:"imageWrap-title"},e.language.productSides&&e.language.productSides[a[0]]?e.language.productSides[a[0]]+" "+a[1]:t.name)}return f.a.createElement("div",{className:"imageWrap-title"},e.language.productSides&&e.language.productSides[t.name]?e.language.productSides[t.name]:t.name)}}return f.a.createElement("div",{className:"dt-elements dt-productInfo"},e.language&&f.a.createElement("div",{className:"productInfo d-none d-lg-flex d-xl-flex"},function(){if(e.productName&&e.language&&e.selectedProfile)return f.a.createElement("div",{className:"show-for-theme-two mb-4 pb-2"},f.a.createElement("canvas",{className:"d-none",id:"cCanvas",width:"600",height:"600"}),f.a.createElement("div",{className:"pName"},f.a.createElement("h2",{className:"pName-title",id:"tooltip",dangerouslySetInnerHTML:{__html:e.productName}}),e.productName.length>20&&f.a.createElement(y.a,{placement:"top",target:"tooltip",dangerouslySetInnerHTML:{__html:e.productName}}),"1"!==e.isQuot&&!e.isPredeco&&e.popoverDetails&&f.a.createElement("div",{className:"btn btn-link pName-link","data-toggle":"modal",onClick:function(){return e.onProductChange(e.productDetails.product_id)}},e.language.profile.changeProduct),null===e.popoverDetails&&f.a.createElement(A.a,{height:8,width:90})),f.a.createElement("div",{className:"pMethod"},f.a.createElement("div",{className:"pMethod-title"},e.printProfiles.length?e.selectedProfile.name:""),e.printProfiles.length>1&&f.a.createElement("div",{className:"pMethod-link"},f.a.createElement("div",{className:"dropdown"},f.a.createElement("button",{className:"btn btn-link dropdown-toggle",type:"button",id:"dropdownMenuButton","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},e.language.profile.decorationProcess),f.a.createElement("div",{className:"dropdown-menu scrollbar","aria-labelledby":"dropdownMenuButton"},e.printProfiles.map((function(t,a){return f.a.createElement("div",{key:t.id+"_"+a,className:"dropdown-item"+(e.selectedProfile.id===t.id?" active":""),onClick:function(){return e.profileSelected(t)}},f.a.createElement("div",{className:"dropdown-item-img"},f.a.createElement("img",{src:t.thumbnail,alt:""})),f.a.createElement("div",{className:"dropdown-item-label"},f.a.createElement("div",{className:"label-title"},t.name),f.a.createElement("div",{className:"label-desc",dangerouslySetInnerHTML:{__html:t.description}})))})))))))}(),!e.stickerPreviewEnable&&f.a.createElement("label",{className:"sec-title show-for-theme-two"},e.language.profile.productSides),r(),function(){var t=P.a.canvas.team,a=Y.a.color_no?Y.a.color_no:6;return Object.keys(t).forEach((function(e){t[e]})),e.colors&&!e.stickerPreviewEnable&&e.colors.length>1&&e.language&&!e.isOrderOptionsShow&&0===e.productDetails.is_configurator?f.a.createElement(g.Fragment,null,f.a.createElement("label",{className:"sec-title show-for-theme-two mt-4"},e.language.main.product," ",e.globalColorAttr?e.globalColorAttr:"color"),f.a.createElement("div",{className:0===e.productDetails.is_image_based&&1===e.productDetails.is_configurator?"productInfo-colors d-none":"productInfo-colors"},f.a.createElement("div",{className:"imageWrap-title text-dark mb-1 d-none d-md-block d-lg-block d-xl-block"},e.language.main.product," ",e.globalColorAttr?e.globalColorAttr:"color"),f.a.createElement("div",{className:"thumbView"},f.a.createElement("div",{className:"thumbView-row"},e.colors.map((function(t,r){return f.a.createElement(g.Fragment,{key:t.attribute_id},r<a&&e.selectedColorIndex<a&&f.a.createElement("div",{className:"thumbView-col"},f.a.createElement("div",{className:"dropdown"},f.a.createElement("button",{className:"btn btn-link dropdown-toggle"+(e.selectedColorIndex===r?" active":""),type:"button",onClick:function(){return e.changeStageColor(t.attribute_id,t.variant_id,r)},title:t.name},f.a.createElement("div",{className:"pColorBox",style:{backgroundColor:""!==t.hex_code?t.hex_code:"",backgroundImage:""!==t.file_name?"url("+t.file_name+")":"",backgroundSize:"cover"}})))),r<a-1&&e.selectedColorIndex>=a&&f.a.createElement("div",{className:"thumbView-col"},f.a.createElement("div",{className:"dropdown"},f.a.createElement("button",{className:"btn btn-link dropdown-toggle"+(e.selectedColorIndex===r?" active":""),type:"button",onClick:function(){return e.changeStageColor(t.attribute_id,t.variant_id,r)},title:t.name},f.a.createElement("div",{className:"pColorBox",style:{backgroundColor:""!==t.hex_code?t.hex_code:"",backgroundImage:""!==t.file_name?"url("+t.file_name+")":"",backgroundSize:"cover"}})))),e.selectedColorIndex===r&&e.selectedColorIndex>=a&&f.a.createElement("div",{className:"thumbView-col"},f.a.createElement("div",{className:"dropdown"},f.a.createElement("button",{className:"btn btn-link dropdown-toggle active",type:"button",onClick:function(){return e.changeStageColor(t.attribute_id,t.variant_id,r)},title:t.name},f.a.createElement("div",{className:"pColorBox",style:{backgroundColor:""!==t.hex_code?t.hex_code:"",backgroundImage:""!==t.file_name?"url("+t.file_name+")":"",backgroundSize:"cover"}})))))})))),e.colors.length>a&&f.a.createElement("div",{className:"dropdown product-color-wrapper"},f.a.createElement("button",{className:"btn btn-sm btn-link dropdown-toggle p-0",type:"button",id:"dropdownAddColor","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},e.language.main.seeMore?e.language.main.seeMore:"See more"),f.a.createElement("div",{className:"dropdown-menu scrollbar","aria-labelledby":"dropdownAddColor"},f.a.createElement("div",{className:"product-color-nav"},e.colors.map((function(t,a){return f.a.createElement("div",{className:"nav-item"+(e.selectedColorIndex===a?" active":""),key:a},f.a.createElement("div",{className:"nav-link",style:{backgroundColor:""!==t.hex_code?t.hex_code:"",backgroundImage:""!==t.file_name?"url("+t.file_name+")":"",backgroundSize:"cover"},onMouseEnter:function(){return e.onColorHover(t.attribute_id,!0)},onClick:function(){return e.changeStageColor(t.attribute_id,t.variant_id,a)},onMouseLeave:function(){return e.onColorHover(t.attribute_id,!1)},title:t.name}))}))),f.a.createElement("div",{className:"footer-btn"},f.a.createElement("button",{className:"btn btn-sm btn-success"},e.language.main.done)))))):e.loading?f.a.createElement("div",{className:"productInfo-colors d-none"},f.a.createElement("div",{className:"thumbView"},f.a.createElement("div",{className:"thumbView-row"},f.a.createElement("div",{className:"thumbView-col"},f.a.createElement("div",{className:"dropdown"},f.a.createElement("div",{className:"pColorBox"},f.a.createElement(A.a,{width:24,height:24})))),f.a.createElement("div",{className:"thumbView-col"},f.a.createElement("div",{className:"dropdown"},f.a.createElement("div",{className:"pColorBox"},f.a.createElement(A.a,{width:24,height:24}))))))):void 0}(),e.stickerPreviewEnable&&!e.isOrderOptionsShow&&f.a.createElement(J,{enableStickerpreview:e.enableStickerpreview,cutLineEnable:e.cutLineEnable,objDimension:e.objDimension,updateStickerVal:e.updateStickerVal,editStatus:e.editStatus,setLayerData:e.setLayerData,handleStickerDropdownClass:e.handleStickerDropdownClass}),e.productDetails&&1===e.productDetails.is_variable_decoration&&e.customPrintAreaDimen&&!1===e.isOrderOptionsShow&&!e.cutLineEnable&&!e.isMobileView&&f.a.createElement(g.Fragment,null,!e.stickerPreviewEnable&&f.a.createElement("label",{className:"sec-title show-for-theme-two mt-4"},"Variable decoration area"),f.a.createElement(j,{setLayerData:e.setLayerData,updateCartAttrForSignBanner:e.updateCartAttrForSignBanner,isQuot:e.isQuot}))),function(t,a){if(e.productDetails.is_configurator)return f.a.createElement("div",{className:"configurator-thumb"},e.productSides&&e.productSides.map((function(t,a){return f.a.createElement(g.Fragment,{key:a},f.a.createElement("div",{className:e.isSideActive[a]?"productInfo d-block d-sm-block d-lg-none d-xl-none active":"productInfo d-block d-sm-block d-lg-none d-xl-none"},function(t,a){return f.a.createElement("figure",{className:"imageWrap-box",id:"configurator_side_"+a,onClick:function(){return e.sideSelected(t,a)}})}(t,a)))})))}(),f.a.createElement("div",{className:"productInfo d-block d-sm-block d-lg-none d-xl-none"},e.productSides&&(e.productSides.length>1||1===e.productDetails.is_variable_decoration)&&0===e.productDetails.is_configurator&&"sticker"!==e.productDetails.decoration_type&&f.a.createElement("div",{className:"dropup productInfo-sides-wrap",style:{bottom:e.productDetails.is_variable_decoration?"78px":""}},e.productSides.map((function(t,a){return f.a.createElement(g.Fragment,{key:a},e.isSideActive[a]&&f.a.createElement("div",{className:"d-flex flex-column justify-content-center dropdown-toggle","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},n(a,t),f.a.createElement("label",{className:"sec-title text-center m-0"},t.name)))})),f.a.createElement("div",{className:"dropdown-menu"},r())),e.colors&&e.colors.length>1&&e.language&&!e.isOrderOptionsShow&&e.selectedColor&&0===e.productDetails.is_configurator&&f.a.createElement("div",{className:"dropup productInfo-colors-wrap",style:{bottom:e.productDetails.is_variable_decoration?"78px":""}},f.a.createElement("div",{className:"d-flex flex-column justify-content-center dropdown-toggle","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},""!==e.selectedColor.hex_code&&f.a.createElement("div",{className:"color-box",style:{backgroundColor:e.selectedColor.hex_code},title:e.selectedColor.name,key:e.selectedColor.id}),""!==e.selectedColor.file_name&&f.a.createElement("div",{className:"color-box",style:{backgroundImage:"url("+e.selectedColor.file_name+")",backgroundSize:"cover"},title:e.selectedColor.name,key:e.selectedColor.id}),f.a.createElement("label",{className:"sec-title text-center m-0"},e.language.main.colors)),f.a.createElement("div",{className:"dropdown-menu scrollbar","aria-labelledby":"dropdownColor"},f.a.createElement("div",{className:"dropdown-item color-items"},f.a.createElement("div",{className:"color-block"},e.tempColors.map((function(t,a){return f.a.createElement(g.Fragment,{key:a},""!==t.hex_code&&f.a.createElement("div",{className:"color-box",style:{backgroundColor:t.hex_code},title:t.name,key:t.id,onMouseEnter:function(){return e.onColorHover(t.id,!0)},onClick:function(){return e.onColorSelect(t.attribute_id,t.variant_id)},onMouseLeave:function(){return e.onColorHover(t.attribute_id,!1)}}),""!==t.file_name&&f.a.createElement("div",{className:"color-box",style:{backgroundImage:"url("+t.file_name+")",backgroundSize:"cover"},title:t.name,key:t.id,onMouseEnter:function(){return e.onColorHover(t.id,!0)},onClick:function(){return e.onColorSelect(t.attribute_id,t.variant_id)},onMouseLeave:function(){return e.onColorHover(t.attribute_id,!1)}}))})))))),e.productDetails&&1===e.productDetails.is_variable_decoration&&e.customPrintAreaDimen&&!1===e.isOrderOptionsShow&&f.a.createElement("div",{className:"m-view"+(e.isStickerDropDown?" no-overflow":"")},e.stickerPreviewEnable&&!e.isOrderOptionsShow&&f.a.createElement(J,{enableStickerpreview:e.enableStickerpreview,cutLineEnable:e.cutLineEnable,objDimension:e.objDimension,updateStickerVal:e.updateStickerVal,editStatus:e.editStatus,setLayerData:e.setLayerData,handleStickerDropdownClass:e.handleStickerDropdownClass}),!e.cutLineEnable&&e.isMobileView&&f.a.createElement(j,{setLayerData:e.setLayerData,updateCartAttrForSignBanner:e.updateCartAttrForSignBanner}))))},X=a(878),K=a(857),$=function(e){return e.profileChageIsOpen?f.a.createElement(X.a,{id:"clear-popup",isOpen:e.profileChageIsOpen,toggle:e.closeModal,centered:!0,style:{maxWidth:"400px"},modalClassName:"custom"},e.language&&f.a.createElement(K.a,null,f.a.createElement("h6",{className:"modal-text-title"},f.a.createElement("strong",null,e.language.canvas.sure),e.language.canvas.designLostError),f.a.createElement("div",{className:"modal-btn-group"},f.a.createElement("button",{className:"btn btn-sm btn-dark text-light",onClick:function(){return e.closeModal()}},e.language.canvas.cancel),f.a.createElement("button",{className:"btn btn-sm btn-success",onClick:function(){return e.changePrintProfile()}},e.language.canvas.ok)))):f.a.createElement(g.Fragment,null)},ee=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(e){var r;return Object(u.a)(this,a),(r=t.call(this)).state={},r}return Object(d.a)(a,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return f.a.createElement($,{profileChageIsOpen:this.props.profileChageIsOpen,closeModal:this.props.closeModal,changePrintProfile:this.props.changePrintProfile,language:this.props.language})}}]),a}(f.a.Component),te=Object(v.b)((function(e){return{language:e.languageReducer.translation_data.filter((function(t){return t.langCode===e.languageReducer.default_lang}))[0]}}))(ee),ae=function(e){return e.sideDeleteIsOpen?f.a.createElement(X.a,{id:"clear-popup",isOpen:e.sideDeleteIsOpen,toggle:e.closeSideDelModal,centered:!0,style:{maxWidth:"400px"},modalClassName:"custom"},e.language&&f.a.createElement(K.a,null,f.a.createElement("h6",{className:"modal-text-title"},f.a.createElement("strong",null,e.language.canvas.sure),e.language.canvas.sureMsg),f.a.createElement("div",{className:"modal-btn-group"},f.a.createElement("button",{className:"btn btn-sm btn-dark text-light",onClick:function(){return e.closeSideDelModal()}},e.language.canvas.cancel),f.a.createElement("button",{className:"btn btn-sm btn-success",onClick:function(){return e.deleteSide()}},e.language.canvas.ok)))):f.a.createElement(g.Fragment,null)},re=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(e){var r;return Object(u.a)(this,a),(r=t.call(this)).state={},r}return Object(d.a)(a,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return f.a.createElement(ae,{sideDeleteIsOpen:this.props.sideDeleteIsOpen,closeSideDelModal:this.props.closeSideDelModal,deleteSide:this.props.deleteSide,language:this.props.language})}}]),a}(f.a.Component),ne=Object(v.b)((function(e){return{language:e.languageReducer.translation_data.filter((function(t){return t.langCode===e.languageReducer.default_lang}))[0]}}))(re),ie=a(17),oe=a(77),se=null,le=null,ce=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(){var e;return Object(u.a)(this,a),(e=t.call(this)).updateEditStatus=function(t){e.setState({editStatus:t})},e.productSidePrevNext=function(t){var a=e.state,r=a.startIndex,n=a.endIndex;if("prev"===t){if(0===r)return;e.setState({startIndex:r-1,endIndex:n-1})}else if("next"===t){if(n===e.props.sides.length-1)return;e.setState({startIndex:r+1,endIndex:n+1})}},e.capturedImagePrevNext=function(t){var a=e.state,r=a.captureStartIndex,n=a.captureEndIndex;if("prev"===t){if(0===r)return;e.setState({captureStartIndex:r-1,captureEndIndex:n-1})}else if("next"===t){if(n===e.props.productCanvasReducer.cartProductImage.length-1)return;e.setState({captureStartIndex:r+1,captureEndIndex:n+1})}},e.profileSelected=function(t){if((se=t).id!==e.props.selectedPrintProfileObj.id)if(P.a.canvas.getCurrentLayerElems().length?1:0)e.setState({profileChageIsOpen:!0});else{e.loadPrintProfile();var a=P.a.canvas.getLayerName(),r=Number(a.split("_")[1]);document.getElementById("Layer_"+r).removeAttribute("filter")}},e.loadPrintProfile=function(){e.props.dispatch(D.cb(se.id)).then((function(){e.props.dispatch(D.M()).then((function(){e.props.setLayerData(!0),e.props.getColorPallets()}))}))},e.changePrintProfile=function(){e.setState({profileChageIsOpen:!1}),e.loadPrintProfile(),P.a.canvas.clearCurrentLayer();var t=P.a.canvas.getLayerName(),a=Number(t.split("_")[1]);document.getElementById("Layer_"+a).removeAttribute("filter"),e.props.checkBackgroundElm()},e.closeModal=function(){e.setState({profileChageIsOpen:!1})},e.enableStickerpreview=function(t){e.props.enableStickerpreview(t)},e.updateStickerVal=Object(c.a)(s.a.mark((function t(){var a,r,n;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=e.props.stickerReducer.selectedCutLine,r=!1,n={},"Small"!==a&&"Medium"!==a&&"Large"!==a){t.next=6;break}return t.next=4,P.a.canvas.getElemDimension();case 4:n=t.sent,r=!0;case 6:e.setState({cutLineEnable:r,objDimension:n});case 7:case"end":return t.stop()}}),t)}))),e.onRemoveVarDecoSide=function(t){le=t,e.setState({sideDeleteIsOpen:!0})},e.deleteSide=function(){e.setState({sideDeleteIsOpen:!1}),e.productSidePrevNext("prev"),e.props.onRemoveVarDecoSide(le)},e.closeSideDelModal=function(){e.setState({sideDeleteIsOpen:!1})},e.getUrlParameter=function(e){return("Shopify"!==window.storeType&&"Others"!==window.storeType&&"Hosted"!==window.storeType?new URLSearchParams(window.parent.location.search):new URLSearchParams(window.location.search)).get(e)},e.handleStickerDropdownClass=function(t){e.props.isMobileView&&e.setState({isStickerDropDown:t})},e.renderProfileWarnModal=function(){if(e.state.profileChageIsOpen)return f.a.createElement(te,{profileChageIsOpen:e.state.profileChageIsOpen,closeModal:e.closeModal,changePrintProfile:e.changePrintProfile})},e.renderSideDeleteWarnModal=function(){if(e.state.sideDeleteIsOpen)return f.a.createElement(ne,{sideDeleteIsOpen:e.state.sideDeleteIsOpen,closeSideDelModal:e.closeSideDelModal,deleteSide:e.deleteSide})},e.state={isSideActive:[!0],currentSideIndex:0,faceDataArr:[],colorIndex:0,startIndex:0,endIndex:0,captureStartIndex:0,captureEndIndex:5,maxThumbCount:0,sideDeleteIsOpen:!1,cutLineEnable:!1,objDimension:{},editStatus:!1,isStickerDropDown:!1},W.a.subscribe(W.b.SELECT_STAGE_ELEMS,(function(t){return e.onCanvasMouseDown(t)})),e}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=new URLSearchParams(window.location.search),t="";this.storeType=Object(oe.d)(),this.props.dispatch(Object(ie.Gb)(this.storeType)),window.storeType=this.storeType,t="Shopify"!==this.storeType&&"Others"!==this.storeType&&"Hosted"!==this.storeType?new URLSearchParams(window.parent.location.search):new URLSearchParams(window.location.search),this.isQuot=e.get("quot")?e.get("quot"):t.get("quot"),(0,this.props.sidesRef)(this),this.isPredeco=!!this.getUrlParameter("dpid")}},{key:"componentWillUnmount",value:function(){W.a.unsubscribe(W.b.SELECT_STAGE_ELEMS)}},{key:"componentDidUpdate",value:function(e){!this.props||void 0===this.props.isVariableDeco||0!==this.state.maxThumbCount&&e.isVariableDeco===this.props.isVariableDeco||(this.props.isVariableDeco?this.setState({endIndex:1,maxThumbCount:2}):this.props.productCanvasReducer.product_details&&1===this.props.productCanvasReducer.product_details.is_svg_configurator&&this.props.sides&&this.props.sides.length?this.setState({endIndex:this.props.sides.length,maxThumbCount:this.props.sides.length}):this.setState({endIndex:3,maxThumbCount:4}))}},{key:"onCanvasMouseDown",value:function(){var e=Object(c.a)(s.a.mark((function e(t){var a,r,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t&&t.prefs&&this.props.stickerReducer.selectedCutLine)){e.next=9;break}if(a=this.props.stickerReducer.selectedCutLine,r=!1,n={},"Small"!==a&&"Medium"!==a&&"Large"!==a){e.next=8;break}return e.next=5,P.a.canvas.getElemDimension();case 5:n=e.sent,this.props.dispatch(D.fb({height:n.dimensionHeight,width:n.dimensionWidth,cutline:a})),r=!0;case 8:this.setState({cutLineEnable:r,objDimension:n});case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(e){var t,a,r=this.props,n=r.error,i=r.sides,o=r.colors,s=r.loading,l=r.productDesc,c=r.productName,u=r.selectedColor,d=r.isProductTemplate,p=r.onProductColorHover,m=r.onProductColorSelect,h=r.addAnotherColor,g=r.onProductColorBoxSelect,v=r.tempColors,b=r.removeProductColor,A=r.changeStageColor,y=r.selectedColorIndex,_=this.props.language,E=this.props.licenceAddOns.includes("sticker");return f.a.createElement(f.a.Fragment,null,f.a.createElement(Z,{productSides:i,productName:c,productDesc:l,sideSelected:this.props.sideSelected,isSideActive:this.props.isSideActive,loading:s,error:n,colors:o,onColorHover:p,onColorSelect:m,selectedColor:u,language:_,onColorHovor:this.props.onColorHovor,isProductTemplate:d,productColorsArr:this.props.productCanvasReducer.color,colorIndex:this.state.colorIndex,addAnotherColor:h,onProductColorBoxSelect:g,isOrderOptionsShow:this.props.isOrderOptionsShow,tempColors:v,removeProductColor:b,startIndex:this.state.startIndex,endIndex:this.state.endIndex,maxThumbCount:this.state.maxThumbCount,productSidePrevNext:this.productSidePrevNext,cartCaptureImage:this.props.productCanvasReducer.cartProductImage,productDetails:this.props.productCanvasReducer.product_details,customPrintAreaDimen:this.props.productCanvasReducer.customPrintAreaDimension,onAddVarDecoSide:this.props.onAddVarDecoSide,captureStartIndex:this.state.captureStartIndex,captureEndIndex:this.state.captureEndIndex,capturedImagePrevNext:this.capturedImagePrevNext,onProductChange:this.props.onProductChange,selectedProfile:this.props.selectedPrintProfileObj,printProfiles:this.props.printProfiles,profileSelected:this.profileSelected,isCustomerFormProcessing:this.props.isCustomerFormProcessing,isOrderPlaced:this.props.isOrderPlaced,stickerPreviewEnable:!(!(null===(t=this.props.selectedPrintProfileData)||void 0===t||null===(a=t.sticker)||void 0===a?void 0:a.is_sticker_enabled)||!E),enableStickerpreview:this.enableStickerpreview,onRemoveVarDecoSide:this.onRemoveVarDecoSide,cutLineEnable:this.state.cutLineEnable,objDimension:this.state.objDimension,updateStickerVal:this.updateStickerVal,editStatus:this.state.editStatus,isMobileView:this.props.isMobileView,setLayerData:this.props.setLayerData,updateCartAttrForSignBanner:this.props.updateCartAttrForSignBanner,changeStageColor:A,selectedColorIndex:y,isQuot:this.isQuot,isPredeco:this.isPredeco,popoverDetails:this.props.popoverDetails,isStickerDropDown:this.state.isStickerDropDown,handleStickerDropdownClass:this.handleStickerDropdownClass,globalColorAttr:this.props.globalColorAttr}),this.renderProfileWarnModal(),this.renderSideDeleteWarnModal())}}]),a}(f.a.Component),ue=Object(v.b)((function(e){return{language:e.languageReducer.translation_data.filter((function(t){return t.langCode===e.languageReducer.default_lang}))[0],printProfiles:e.printProfileReducer.active_print_profile_list,printProfileData:e.printProfileReducer.print_profile_data,productCanvasReducer:e.productCanvasReducer,selectedPrintProfileObj:e.printProfileReducer.active_print_profile_list.filter((function(t){return t.id===e.printProfileReducer.selected_print_profile}))[0],stickerReducer:e.StickerReducer.stickerPreviewData,licenceAddOns:e.productCanvasReducer.licenceAddOns,selectedPrintProfileData:e.printProfileReducer.print_profile_data.filter((function(t){return t.id===e.printProfileReducer.selected_print_profile}))[0],globalColorAttr:e.productCanvasReducer.globalColorAttr}}))(ce),de=a(189),pe=function(e){return f.a.createElement("div",{id:"warningPop"},f.a.createElement("div",{className:"txt-13 tip alert alert-"+e.type},f.a.createElement("i",{className:"alert-icon"}),f.a.createElement("span",{className:"alert-txt"},e.message),f.a.createElement("button",{type:"button",className:"close",onClick:function(){return e.closeWarningModal()}},f.a.createElement("span",{"aria-hidden":"true"},"\xd7"))))},me=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(e){var r;return Object(u.a)(this,a),(r=t.call(this)).state={},r}return Object(d.a)(a,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return f.a.createElement(pe,{modalWarningIsOpen:this.props.modalWarningIsOpen,closeWarningModal:this.props.closeWarningModal,message:this.props.modalWarningMsg,type:this.props.modalWarningType})}}]),a}(f.a.Component),he=Object(v.b)((function(e){return{globalImageSettings:e.globalSettingReducer.global_settings_data.image_setting,language:e.languageReducer.translation_data.filter((function(t){return t.langCode===e.languageReducer.default_lang}))[0]}}))(me),ge=a(8),fe=a(259),ve=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(e){var r;return Object(u.a)(this,a),(r=t.call(this,e)).removeAllWhiteFromImage=function(){r.imgCanvas=r.refs.removeWhiteCanvas,r.canvas.width=r.img.width,r.canvas.height=r.img.width,r.imgCtx=r.imgCanvas.getContext("2d"),r.imgCtx.drawImage(r.img,0,0);for(var e=r.imgCtx.getImageData(0,0,r.img.width,r.img.width),t=e.data,a=0,n=0,i=0,o=0,s=0,l=t.length;s<l;s+=4){var c=t[s],u=t[s+1],d=t[s+2];255==c&&255==u&&255==d&&(t[s]=a,t[s+1]=n,t[s+2]=i,t[s+3]=o)}r.imgCtx.putImageData(e,0,0),r.img=new Image,r.img.crossOrigin="anonymous",r.img.src=r.imgCanvas.toDataURL(),r.img.onload=function(){if("select"!==r.props.stickerReducerData.stickerPreviewData.selectedMaterial.toLowerCase()){var e=r.props.stickerReducerData.stickerSettings.material.option_list.filter((function(e){return e.name===r.props.stickerReducerData.stickerPreviewData.selectedMaterial}));if(e&&e.length){var t=new Image;t.crossOrigin="anonymous",t.onload=function(){r.generateSticker(t)},t.src=e[0].file_name}else r.generateSticker()}else r.generateSticker()}},r.generateSticker=function(e){for(r.canvas.width=r.cw=r.img.width,r.canvas.height=r.ch=r.img.height,r.ctx.drawImage(r.img,0,0);r.moveDiscreteElementToNewCanvas(););for(var t=0;t<r.canvases.length;t++)r.addStickerEffect(r.canvases[t],r.strokeWeight,e),r.ctx.drawImage(r.canvases[t],0,0);r.ctx.drawImage(r.img,0,0);r.ctx.getImageData(0,0,r.img.width,r.img.height);var a=r.canvas.toDataURL("image/png");r.addOutlineToText(a)},r.generateSvg=function(e,t){for(var a=r.hexToRGB("#FF1493"),n=r.copyImageData(r.ctx,e),i=0,o=n.data.length;i<o;i+=4)n.data[i]===a.r&&n.data[i+1]===a.g&&n.data[i+2]===a.b?(n.data[i]=0,n.data[i+1]=0,n.data[i+2]=0):(n.data[i]=255,n.data[i+1]=255,n.data[i+2]=255);var s=document.createElement("canvas"),l=s.getContext("2d");s.height=e.height,s.width=e.width,l.clearRect(0,0,e.width,e.height),l.putImageData(n,0,0);var c=s.toDataURL("image/png"),u=new fe.Potrace;u.setParameters({color:"#FF1493"}),u.loadImage(c,(function(e){if(e)throw e;var a=document.createElementNS(ge.a.SVG,"g"),n=u.getSVG(),i=(new DOMParser).parseFromString(n,"image/svg+xml"),o=i.getElementsByTagName("path");o[0].setAttribute("stroke","#FF1493"),o[0].setAttribute("stroke-width","1"),o[0].setAttribute("id","path_elem");var s=i.getElementsByTagName("svg")[0].cloneNode(!0);document.getElementsByClassName("sticker-preview-stage")[0].append(s),a.setAttribute("x",s.getElementsByTagName("path")[0].getBBox().x),a.setAttribute("y",s.getElementsByTagName("path")[0].getBBox().y),a.setAttribute("height",s.getElementsByTagName("path")[0].getBBox().height),a.setAttribute("width",s.getElementsByTagName("path")[0].getBBox().width),s.setAttribute("display","none"),a.append(o[0]),i.getElementsByTagName("svg")[0].append(a);var l=i.getElementsByTagName("svg")[0].outerHTML;r.props.dispatch(D.P({base64:t,svg:l,status:!0}))}))},r.addStickerEffect=function(e,t,a){e.toDataURL();var n=e.getContext("2d"),i=e.outlinePoints;r.resultantOutline&&r.polygonValue.push(i),r.addStickerLayer(n,i,t,a),r.addOutLine(e.getContext("2d"),e.outlinePoints)},r.addOutLine=function(e,t){r.imageData=e.getImageData(0,0,r.canvas.width,r.canvas.height),r.data1=r.imageData.data;t=r.geomContour(r.defineNonTransparent);r.defineGeomPath(e,t),e.lineJoin="round",e.lineCap="round",e.lineWidth=1,r.resultantOutline&&(e.strokeStyle=r.outLineColor),e.stroke()},r.addStickerLayer=function(e,t,a,n){r.imageData=e.getImageData(0,0,r.canvas.width,r.canvas.height),r.data1=r.imageData.data;t=r.geomContour(r.defineNonTransparent);r.defineGeomPath(e,t),e.lineJoin="round",e.lineCap="round";var i="white";"select"!==r.props.stickerReducerData.stickerPreviewData.selectedMaterial.toLowerCase()&&(i=e.createPattern(n,"repeat"));var o,s=r.props.stickerReducerData.stickerPreviewData.selectedCutLine;if("Small"!==s&&"Medium"!==s&&"Large"!==s||(o=r.props.stickerReducerData.stickerSettings.shapes.option_list[1].options.filter((function(e){return e.name===s}))),e.strokeStyle=i,e.shadowColor="black",r.resultantOutline){var l=o?o[0].value:8;console.log(l);var c=l*(Math.min(r.cropCanvasWidth,r.cropCanvasHeight)/600);e.lineWidth=c}else{var u=20;r.cropCanvasWidth<100&&r.cropCanvasHeight<60?u=Math.max(r.cropCanvasWidth,r.cropCanvasHeight)/600*20:r.cropCanvasWidth>150&&r.cropCanvasWidth<350?u=35:r.cropCanvasWidth>350&&r.cropCanvasWidth<450&&(u=40),r.cropCanvasWidth>450&&(u=45),e.lineWidth=u}e.stroke()},r.moveDiscreteElementToNewCanvas=function(){r.imageData=r.ctx.getImageData(0,0,r.canvas.width,r.canvas.height),r.data1=r.imageData.data;for(var e=!1,t=0;t<r.data1.length;t+=4)if(r.data1[t+3]>0){e=!0;break}if(e){var a=r.geomContour(r.defineNonTransparent),n=document.createElement("canvas");n.width=r.canvas.width,n.height=r.canvas.height,n.style.display="none",document.body.appendChild(n),r.canvases.push(n);var i=n.getContext("2d");return n.outlinePoints=a,r.defineGeomPath(i,a),i.save(),i.clip(),i.drawImage(r.canvas,0,0),i.restore(),r.defineGeomPath(r.ctx,a),r.ctx.save(),r.ctx.clip(),r.ctx.globalCompositeOperation="destination-out",r.ctx.clearRect(0,0,r.canvas.width,r.canvas.height),r.ctx.restore(),!0}},r.defineGeomPath=function(e,t){e.beginPath(),e.moveTo(t[0][0],t[0][1]);for(var a=1;a<t.length;a++)e.lineTo(t[a][0],t[a][1]);e.lineTo(t[0][0],t[0][1]),e.closePath()},r.geomContour=function(e,t){var a=t||r.d3_geom_contourStart(e),n=[],i=a[0],o=a[1],s=0,l=0,c=NaN,u=NaN,d=0;do{d=0,e(i-1,o-1)&&(d+=1),e(i,o-1)&&(d+=2),e(i-1,o)&&(d+=4),e(i,o)&&(d+=8),6===d?(s=-1===u?-1:1,l=0):9===d?(s=0,l=1===c?-1:1):(s=r.d3_geom_contourDx[d],l=r.d3_geom_contourDy[d]),s!=c&&l!=u&&(n.push([i,o]),c=s,u=l),i+=s,o+=l}while(a[0]!=i||a[1]!=o);return n},r.d3_geom_contourStart=function(e){for(var t=0,a=0;;){if(e(t,a))return[t,a];0===t?(t=a+1,a=0):(t-=1,a+=1)}},r.autoCropCanvas=function(e,t){for(var a={left:0,right:e.width,top:0,bottom:e.height},n=[],i=[],o=t.getImageData(0,0,e.width,e.height),s=0;s<e.width;s++){i[s]=i[s]||!1;for(var l=0;l<e.height;l++){n[l]=n[l]||!1;var c=l*(4*e.width)+4*s,u=[o.data[c],o.data[c+1],o.data[c+2],o.data[c+3]],d=u[0],p=u[1],m=u[2],h=u[3];0===Math.max(d,p,m,h)||(i[s]=!0,n[l]=!0)}}for(var g=0;g<n.length;g++)if(n[g]){a.top=g?g-1:g;break}for(var f=n.length;f--;)if(n[f]){a.bottom=f<e.height?f+1:f;break}for(var v=0;v<i.length;v++)if(i[v]){a.left=v?v-1:v;break}for(var b=i.length;b--;)if(i[b]){a.right=b<e.width?b+1:b;break}var A=a.right-a.left,y=a.bottom-a.top,_=t.getImageData(a.left,a.top,A,y);e.width=A,e.height=y,r.cropCanvasWidth=e.width,r.cropCanvasHeight=e.height,t.putImageData(_,0,0),r.designData[0]=e.toDataURL()},r.state={designImg:""},r}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.canvas=this.refs.stickerCanvas,this.canvas.width=600,this.canvas.height=600,this.ctx=this.canvas.getContext("2d"),this.canvases=[],this.imageData="",this.data="",this.imageData1="",this.data1=[],this.cw="",this.ch="",this.cropCanvasWidth=0,this.cropCanvasHeight=0,this.outLineColor="white",this.resultantOutline=!1,this.d3_geom_contourDx=[1,0,1,1,-1,0,-1,1,0,0,0,0,-1,0,-1,NaN],this.d3_geom_contourDy=[0,-1,0,0,0,-1,0,0,1,-1,1,1,0,-1,0,NaN],this.strokeWeight=28,this.defineNonTransparent=function(t,a){return e.data1[4*(a*e.cw+t)+3]>0},this.img=new Image,this.currentSideDesignData="";var t=new Image;t.onload=function(){var a=document.createElement("canvas");a.width=t.width,a.height=t.height;var r=a.getContext("2d");r.drawImage(t,0,0),e.autoCropCanvas(a,r)},t.src=this.props.designImg,this.designData=[],this.img=new Image,this.img.crossOrigin="anonymous",this.img.src=this.props.designImg,localStorage.removeItem("isStickerPreview"),this.img.onload=function(){e.removeAllWhiteFromImage()},this.polygonValue=[]}},{key:"copyImageData",value:function(e,t){var a=e.createImageData(t.width,t.height);return a.data.set(t.data),a}},{key:"hexToRGB",value:function(e){var t={};return t.r=parseInt(e.substr(1,2),16),t.g=parseInt(e.substr(3,2),16),t.b=parseInt(e.substr(5,2),16),t}},{key:"addOutlineToText",value:function(e){var t=this,a=new Image;a.onload=function(){for(t.canvas.width=t.cw=a.width,t.canvas.height=t.ch=a.height,t.img=a,t.ctx.drawImage(t.img,0,0),t.outLineColor="#FF1493",t.canvases=[],t.resultantOutline=!0;t.moveDiscreteElementToNewCanvas(););for(var e=0;e<t.canvases.length;e++)t.addStickerEffect(t.canvases[e],t.strokeWeight,a),t.ctx.drawImage(t.canvases[e],0,0);var r=[];Object.keys(t.props.stickerReducerData.sheetInfo).length>0&&(r=t.props.stickerReducerData.sheetInfo.sheetList);var n=t.ctx.getImageData(0,0,t.img.width,t.img.height);t.props.dispatch(D.T({designbase64:t.canvas.toDataURL("image/png"),imageUrl:"",sheetList:r,status:!0}));var i=t.canvas.toDataURL("image/png");if(window.d3){var o=window.d3.create("svg");o.attr("id","contour").attr("width",600).attr("height",600);for(var s=0;s<t.polygonValue.length;s++){var l=t.polygonValue[s][t.polygonValue.length-1],c=window.d3.line().x((function(e){return l[0]===e[0]&&l[1]===e[1]?e[0]+3.8:e[0]})).y((function(e){return e[1]}));o.append("path").attr("d",c(t.polygonValue[s])).attr("stroke","#FF1493").attr("stroke-width",1).attr("fill","none")}var u=(new XMLSerializer).serializeToString(o.node()),d=document.createElementNS(ge.a.SVG,"g"),p=(new DOMParser).parseFromString(u,"image/svg+xml"),m=p.getElementsByTagName("path");m[0].setAttribute("stroke","#FF1493"),m[0].setAttribute("stroke-width","1"),m[0].setAttribute("id","path_elem");var h=p.getElementsByTagName("svg")[0].cloneNode(!0);document.getElementsByClassName("sticker-preview-stage")[0].append(h),d.setAttribute("x",h.getElementsByTagName("path")[0].getBBox().x),d.setAttribute("y",h.getElementsByTagName("path")[0].getBBox().y),d.setAttribute("height",h.getElementsByTagName("path")[0].getBBox().height),d.setAttribute("width",h.getElementsByTagName("path")[0].getBBox().width),h.setAttribute("display","none"),d.append(m[0]),p.getElementsByTagName("svg")[0].append(d);var g=p.getElementsByTagName("svg")[0].outerHTML;t.props.dispatch(D.P({base64:i,svg:g,status:!0}))}else t.generateSvg(n,i)},a.src=e}},{key:"render",value:function(){return f.a.createElement("div",null,f.a.createElement(f.a.Fragment,null,f.a.createElement("div",{className:"sticker-preview-stage"},f.a.createElement("div",{className:"imageWrap"},f.a.createElement("figure",{className:"imageWrap-box"},f.a.createElement("canvas",{className:"hidden",ref:"removeWhiteCanvas",width:600,height:600,id:"removeWhiteCanvas"}),f.a.createElement("canvas",{ref:"stickerCanvas",width:600,height:600,id:"stickerCanvas"}))))))}}]),a}(f.a.Component),be=Object(v.b)((function(e){return{language:e.languageReducer.translation_data.filter((function(t){return t.langCode===e.languageReducer.default_lang}))[0],stickerReducerData:e.StickerReducer}}))(ve),Ae=function(e){return f.a.createElement("div",{className:"dt-elements dt-canvas"+("half"===e.splitScreenMobile?" dt-pop":"")},function(){if(e.modalWarningIsOpen)return f.a.createElement(he,{modalWarningIsOpen:e.modalWarningIsOpen,closeWarningModal:e.closeWarningModal,modalWarningMsg:e.modalWarningMsg,modalWarningType:e.modalWarningType})}(),f.a.createElement("div",{className:"canvasWrap",id:"canvas_wrap",onMouseDown:function(t){return e.handleMouseDownEvent(t)}},f.a.createElement("div",{className:"canvasWrap-stage",style:{display:e.togglePreview||e.stickerPreview?"none":"flex"}},f.a.createElement("div",{className:"imageWrap",id:"stage_image"},function(){if(e.productDetails&&0===e.productDetails.is_variable_decoration){if(e.isProductTemplate&&e.selectedColor&&0===e.productDetails.is_configurator)return f.a.createElement("figure",{className:"imageWrap-box",id:"stage_image_wrap",style:{top:e.imgTop}},(""!==e.selectedColor.hex_code||""!==e.selectedColor.file_name)&&f.a.createElement("img",{height:"600",width:"600",src:e.productDetails?e.productDetails.sides[e.sideIndex].image.src+"?"+e.sideIndex:"",alt:"",onLoad:function(t){return e.onImageLoaded(t)},style:{backgroundColor:""!==e.selectedColor.hex_code?e.selectedColor.hex_code:"",backgroundImage:""!==e.selectedColor.file_name?"url("+e.selectedColor.file_name+")":"",backgroundSize:"cover"}}),""===e.selectedColor.hex_code&&""===e.selectedColor.file_name&&f.a.createElement("img",{height:"600",width:"600",src:e.productDetails?e.productDetails.sides[e.sideIndex].image.src+"?"+e.sideIndex:"",alt:"",onLoad:function(t){return e.onImageLoaded(t)}}));if(1===e.productDetails.is_configurator&&0==e.productDetails.is_image_based&&e.configuratorSideList.productDetails&&e.configuratorSideList.productDetails.data&&e.configuratorSideList.productDetails.data[0].sideList)return f.a.createElement("figure",{className:"imageWrap-box",id:"stage_image_wrap",key:e.sideIndex,style:{top:e.imgTop}},e.configuratorSideList.productDetails.data[0]&&e.configuratorSideList.productDetails.data[0].sideList&&e.configuratorSideList.productDetails.data[0].sideList.length>0&&e.configuratorSideList.productDetails.data[0].sideList[e.sideIndex].sidePreview?f.a.createElement("img",{height:"600",width:"600",src:e.configuratorSideList.productDetails.data[0].sideList?e.configuratorSideList.productDetails.data[0].sideList[e.sideIndex].sidePreview:"",alt:"",onLoad:function(t){return e.onImageLoaded(t)},style:{position:"absolute",zIndex:"1",pointerEvents:"none"}}):f.a.createElement("img",{height:"600",width:"600",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII=",alt:"",onLoad:function(t){return e.onImageLoaded(t)},style:{position:"absolute",zIndex:"1"}}),f.a.createElement("svg",{height:"600",version:"1.1",width:"600",id:"configurator_svg-loader_"+e.sideIndex,className:"configuratorLoader"}));if(1===e.productDetails.is_configurator&&1==e.productDetails.is_image_based)return f.a.createElement("figure",{className:"imageWrap-box",id:"stage_image_wrap"},f.a.createElement("img",{height:"600",width:"600",src:e.productDetails?e.productDetails.sides[e.sideIndex].image.src:"",alt:"",onLoad:function(t){return e.onImageLoaded(t)},style:{display:e.isConfiguratorLoaded?"none":"flex"}}),f.a.createElement("svg",{height:"600",version:"1.1",width:"600",id:"configurator_image-loader",className:"configuratorLoader",onLoad:function(t){return e.onImageLoaded(t)}}));if(1!=e.productDetails.is_configurator)return f.a.createElement("figure",{className:"imageWrap-box",id:"stage_image_wrap",style:{top:e.imgTop}},f.a.createElement("img",{height:"600",width:"600",src:e.productDetails?e.productDetails.sides[e.sideIndex].image.src+"?"+e.sideIndex:"",alt:"",onLoad:function(t){return e.onImageLoaded(t)}}))}}()),f.a.createElement("div",{className:"svgWrap"},f.a.createElement("div",{id:"svg_container"},f.a.createElement("div",{id:"svg_editor",role:"main"},f.a.createElement("div",{id:"workarea"},f.a.createElement("div",{id:"snapcenters"},f.a.createElement("div",{id:"snapvertical"}),f.a.createElement("div",{id:"snaphorizontal"})),f.a.createElement("div",{id:"svgcanvas"},function(){var t,a,r;if(e.bounds&&e.productDetails&&e.productDetails.is_ruler){if(e.productDetails.is_variable_decoration)a=e.customPrintAreaDimension.width,r=e.customPrintAreaDimension.height,e.productDetails.is_crop_mark&&(a=(Number(a)+2*e.productDetails.crop_value).toString(),r=(Number(r)+2*e.productDetails.crop_value).toString());else{if(!e.activeProductSide||!e.activeProductSide.decoration_settings||0!==e.productDetails.is_variable_decoration)return f.a.createElement(g.Fragment,null);t=e.activeProductSide.decoration_settings[e.activeProductSide.active_deco_area].print_area,JSON.parse(e.activeProductSide.decoration_settings[e.activeProductSide.active_deco_area].dimension).rotate?(a=t.height,r=t.width):(a=t.width,r=t.height)}return f.a.createElement(g.Fragment,null,f.a.createElement("div",{id:"rulers",style:{display:!e.productDetails.is_variable_decoration||e.isOrderOptionsShow||e.isTeamJerseyData?"none":"block",left:e.bounds.x-16+"px",top:e.bounds.y-17+"px"}},f.a.createElement("div",{id:"ruler_x",style:{width:e.bounds.width+1,marginLeft:"15px"}},f.a.createElement("span",null,f.a.createElement("canvas",{height:"15"}))),f.a.createElement("div",{id:"ruler_y",style:{height:e.bounds.height+1,marginTop:"0px"}},f.a.createElement("span",null,f.a.createElement("canvas",{width:"15"})))),f.a.createElement("div",{id:"rulers_label",style:{display:e.isOrderOptionsShow||e.isTeamJerseyData?"none":"block",left:e.bounds.x-23+"px",top:e.bounds.y-25+"px"}},f.a.createElement("div",{id:"ruler_x_asis_label",style:{height:"0px"}},f.a.createElement("svg",{width:"600px",height:"606px"},f.a.createElement("line",{x1:"22",y1:"4",x2:e.bounds.width+22,y2:"4"}),f.a.createElement("line",{x1:"22",y1:"0",x2:"22",y2:"8"}),f.a.createElement("line",{x1:e.bounds.width+22,y1:"0",x2:e.bounds.width+22,y2:"8"}),f.a.createElement("line",{x1:"4",y1:"24",x2:"4",y2:e.bounds.height+24}),f.a.createElement("line",{x1:"0",y1:"24",x2:"8",y2:"24"}),f.a.createElement("line",{x1:"0",y1:e.bounds.height+24,x2:"8",y2:e.bounds.height+24}))),f.a.createElement("div",{id:"ruler_x_label",className:"unitBox",style:{width:e.bounds.width,marginLeft:"22px"}},f.a.createElement("span",{className:"unitVal"},a," ",e.productDetails.scale_unit_id)),f.a.createElement("div",{id:"ruler_y_label",className:"unitBox",style:{height:e.bounds.height,marginTop:"24px"}},f.a.createElement("span",{className:"unitVal"},r," ",e.productDetails.scale_unit_id))))}}())),f.a.createElement("div",{id:"tools_top",className:"tools_panel"},f.a.createElement("div",{id:"history_panel"},f.a.createElement("div",{className:"tool_sep"}),f.a.createElement("div",{className:"push_button tool_button_disabled",id:"tool_undo",title:"Undo [Z]"}),f.a.createElement("div",{className:"push_button tool_button_disabled",id:"tool_redo",title:"Redo [Y]"})),f.a.createElement("div",{id:"selected_panel"},f.a.createElement("div",{className:"toolset"},f.a.createElement("div",{className:"tool_sep"}),f.a.createElement("div",{className:"push_button",id:"tool_clone",title:"Duplicate Element [D]"}),f.a.createElement("div",{className:"push_button",id:"tool_delete",title:"Delete Element [Delete/Backspace]"}),f.a.createElement("div",{className:"tool_sep"}),f.a.createElement("div",{className:"push_button",id:"tool_move_top",title:"Bring to Front [ Ctrl+Shift+] ]"}),f.a.createElement("div",{className:"push_button",id:"tool_move_bottom",title:"Send to Back [ Ctrl+Shift+[ ]"}),f.a.createElement("div",{className:"push_button",id:"tool_topath",title:"Convert to Path"}),f.a.createElement("div",{className:"push_button",id:"tool_reorient",title:"Reorient path"}),f.a.createElement("div",{className:"tool_sep"})),f.a.createElement("label",{id:"tool_angle",title:"Change rotation angle",className:"toolset"},f.a.createElement("span",{id:"angleLabel",className:"icon_label"}),f.a.createElement("input",{id:"angle",size:"2",defaultValue:"0",type:"text"})),f.a.createElement("div",{className:"toolset",id:"tool_blur",title:"Change gaussian blur value"},f.a.createElement("label",null,f.a.createElement("span",{id:"blurLabel",className:"icon_label"}),f.a.createElement("input",{id:"blur",size:"2",defaultValue:"0",type:"text"}))),f.a.createElement("div",{className:"dropdown toolset",id:"tool_position",title:"Align Element to Page"},f.a.createElement("div",{id:"cur_position",className:"icon_label"}),f.a.createElement("button",null))),f.a.createElement("div",{id:"multiselected_panel"},f.a.createElement("div",{className:"tool_sep"}),f.a.createElement("div",{className:"push_button",id:"tool_clone_multi",title:"Clone Elements [C]"}),f.a.createElement("div",{className:"push_button",id:"tool_delete_multi",title:"Delete Selected Elements [Delete/Backspace]"}),f.a.createElement("div",{className:"tool_sep"}),f.a.createElement("div",{className:"push_button",id:"tool_group_elements",title:"Group Elements [G]"}),f.a.createElement("div",{className:"push_button",id:"tool_make_link_multi",title:"Make (hyper)link"}),f.a.createElement("div",{className:"push_button",id:"tool_alignleft",title:"Align Left"}),f.a.createElement("div",{className:"push_button",id:"tool_aligncenter",title:"Align Center"}),f.a.createElement("div",{className:"push_button",id:"tool_alignright",title:"Align Right"}),f.a.createElement("div",{className:"push_button",id:"tool_aligntop",title:"Align Top"}),f.a.createElement("div",{className:"push_button",id:"tool_alignmiddle",title:"Align Middle"}),f.a.createElement("div",{className:"push_button",id:"tool_alignbottom",title:"Align Bottom"}),f.a.createElement("label",{id:"tool_align_relative"},f.a.createElement("span",{id:"relativeToLabel"},"relative to:"),f.a.createElement("select",{id:"align_relative_to",title:"Align relative to ..."},f.a.createElement("option",{id:"selected_objects",value:"selected"},"selected objects"),f.a.createElement("option",{id:"largest_object",value:"largest"},"largest object"),f.a.createElement("option",{id:"smallest_object",value:"smallest"},"smallest object"),f.a.createElement("option",{id:"page",value:"page"},"page"))),f.a.createElement("div",{className:"tool_sep"}))),f.a.createElement("div",{id:"cur_context_panel"}),f.a.createElement("div",{id:"tools_bottom",className:"tools_panel"},f.a.createElement("div",{id:"option_lists",className:"dropdown"},f.a.createElement("ul",{id:"linejoin_opts"},f.a.createElement("li",{className:"tool_button current",id:"linejoin_miter",title:"Linejoin: Miter"}),f.a.createElement("li",{className:"tool_button",id:"linejoin_round",title:"Linejoin: Round"}),f.a.createElement("li",{className:"tool_button",id:"linejoin_bevel",title:"Linejoin: Bevel"})),f.a.createElement("ul",{id:"linecap_opts"},f.a.createElement("li",{className:"tool_button current",id:"linecap_butt",title:"Linecap: Butt"}),f.a.createElement("li",{className:"tool_button",id:"linecap_square",title:"Linecap: Square"}),f.a.createElement("li",{className:"tool_button",id:"linecap_round",title:"Linecap: Round"})),f.a.createElement("ul",{id:"position_opts",className:"optcols3"},f.a.createElement("li",{className:"push_button",id:"tool_posleft",title:"Align Left"}),f.a.createElement("li",{className:"push_button",id:"tool_poscenter",title:"Align Center"}),f.a.createElement("li",{className:"push_button",id:"tool_posright",title:"Align Right"}),f.a.createElement("li",{className:"push_button",id:"tool_postop",title:"Align Top"}),f.a.createElement("li",{className:"push_button",id:"tool_posmiddle",title:"Align Middle"}),f.a.createElement("li",{className:"push_button",id:"tool_posbottom",title:"Align Bottom"}))))),f.a.createElement("div",{id:"dialog_box"},f.a.createElement("div",{className:"overlay"}),f.a.createElement("div",{id:"dialog_container"},f.a.createElement("div",{id:"dialog_content"}),f.a.createElement("div",{id:"dialog_buttons"}))),f.a.createElement("ul",{id:"cmenu_canvas",className:"contextMenu"},f.a.createElement("li",{id:"cut"},f.a.createElement("a",null,"Cut",f.a.createElement("span",{className:"shortcut"},"CTRL+X"))),f.a.createElement("li",{id:"copy"},f.a.createElement("a",null,"Copy",f.a.createElement("span",{className:"shortcut"},"CTRL+C"))),f.a.createElement("li",{id:"paste"},f.a.createElement("a",null,"Paste",f.a.createElement("span",{className:"shortcut"},"CTRL+V"))),f.a.createElement("li",{id:"paste_in_place"},f.a.createElement("a",null,"Paste in Place")),f.a.createElement("li",{className:"separator",id:"delete"},f.a.createElement("a",null,"Delete",f.a.createElement("span",{className:"shortcut"},"DELETE"))),f.a.createElement("li",{className:"separator",id:"group"},f.a.createElement("a",null,"Group",f.a.createElement("span",{className:"shortcut"},"G"))),f.a.createElement("li",{id:"ungroup"},f.a.createElement("a",null,"Ungroup",f.a.createElement("span",{className:"shortcut"},"G"))),f.a.createElement("li",{className:"separator",id:"move_front"},f.a.createElement("a",null,"Bring to Front",f.a.createElement("span",{className:"shortcut"},"CTRL+SHFT+]"))),f.a.createElement("li",{id:"move_up"},f.a.createElement("a",null,"Bring Forward",f.a.createElement("span",{className:"shortcut"},"CTRL+]"))),f.a.createElement("li",{id:"move_down"},f.a.createElement("a",null,"Send Backward",f.a.createElement("span",{className:"shortcut"},"CTRL+["))),f.a.createElement("li",{id:"move_back"},f.a.createElement("a",null,"Send to Back",f.a.createElement("span",{className:"shortcut"},"CTRL+SHFT+[")))))),function(){var t,a,r,n;if(e.productDetails)if(e.productDetails.is_variable_decoration){if(null===(t=e.productDetails)||void 0===t||null===(a=t.product_decoration)||void 0===a?void 0:a.is_image_overlay)return f.a.createElement("div",{id:"overlay_img",style:{position:"absolute",pointerEvents:"none"}},f.a.createElement("figure",{id:"overlay_img_wrap",style:{top:e.imgTop}},f.a.createElement("img",{height:"600",width:"600",src:e.productDetails.product_decoration.overlay_image,alt:""})))}else if(e.productDetails.sides&&(null===(r=e.productDetails)||void 0===r||null===(n=r.sides[e.sideIndex])||void 0===n?void 0:n.is_image_overlay))return f.a.createElement("div",{id:"overlay_img",style:{position:"absolute",pointerEvents:"none"}},f.a.createElement("figure",{id:"overlay_img_wrap",style:{top:e.imgTop}},f.a.createElement("img",{height:"600",width:"600",src:e.productDetails.sides[e.sideIndex].overlay_image,alt:""})))}()),function(){if(e.togglePreview)return f.a.createElement(de.a,{json3DData:e.productDetails,sideIndex:e.sideIndex,faceData:e.faceData,objectOnStage:e.objectOnStage,mesh3DObject:e.mesh3DObject,selectedColor:e.selectedColor,isColorChange:e.isColorChange,language:e.language,base64forMultiLayer3DPreview:e.base64forMultiLayer3DPreview})}(),e.stickerPreview&&e.designImg&&f.a.createElement(be,{designImg:e.designImg}),function(){var t,a,r,n,i,o;if(!e.isOrderOptionsShow&&!e.isTeamJerseyData&&e.language)return f.a.createElement(g.Fragment,null,f.a.createElement("div",{className:"d-none d-md-none d-lg-block d-xl-block"},f.a.createElement("ul",{className:e.isElmOnStage?"canvasWrap-nav canvasWrap-nav-left nav nav-pills custom-pills":"hidden",role:"tablist"},f.a.createElement("li",{className:"nav-item"},f.a.createElement("a",{className:"nav-link",onClick:function(){return e.onUndoClick()},id:"undo"},f.a.createElement("i",{className:"nf nf-undo"})),f.a.createElement(y.a,{placement:"top",target:"undo"},e.language.canvas.undo)),f.a.createElement("li",{className:e.isUndoClick?"nav-item":"nav-item hidden"},f.a.createElement("a",{className:"nav-link",onClick:function(){return e.onRedoClick()},id:"redo"},f.a.createElement("i",{className:"nf nf-redo"})),f.a.createElement(y.a,{placement:"top",target:"redo"},e.language.canvas.redo))),e.selectedElem&&e.showControlOptions&&f.a.createElement("ul",{className:"canvasWrap-nav-right-2 nav",role:"tablist"},f.a.createElement("li",{className:"nav-item"},f.a.createElement("a",{className:"nav-link",onClick:function(){return e.changeObject("clone")},id:"clone"},f.a.createElement("i",{className:"clone-svg-icon"})),f.a.createElement(y.a,{placement:"left",target:"clone"},e.language.canvas.clone)),f.a.createElement("li",{className:"nav-item"},f.a.createElement("a",{className:"nav-link",onClick:function(){return e.changeObject("fswap")},id:"forwardSwap"},f.a.createElement("i",{className:"nxi nxi-swap-forward"})),f.a.createElement(y.a,{placement:"left",target:"forwardSwap"},e.language.canvas.forwardSwap)),f.a.createElement("li",{className:"nav-item"},f.a.createElement("a",{className:"nav-link",onClick:function(){return e.changeObject("bswap")},id:"backwardSwap"},f.a.createElement("i",{className:"nxi nxi-swap-backward"})),f.a.createElement(y.a,{placement:"left",target:"backwardSwap"},e.language.canvas.backwardSwap)),f.a.createElement("li",{className:"nav-item"},f.a.createElement("a",{className:"nav-link",onClick:function(){return e.changeObject("alignH")},id:"horizontalAlign"},f.a.createElement("i",{className:"nxi nxi-align-h"})),f.a.createElement(y.a,{placement:"left",target:"horizontalAlign"},e.language.canvas.horizontalAlign)),f.a.createElement("li",{className:"nav-item"},f.a.createElement("a",{className:"nav-link",onClick:function(){return e.changeObject("alignV")},id:"verticalAlign"},f.a.createElement("i",{className:"nxi nxi-align-v"})),f.a.createElement(y.a,{placement:"left",target:"verticalAlign"},e.language.canvas.verticalAlign)),f.a.createElement("li",{className:"nav-item"},f.a.createElement("a",{className:"nav-link",onClick:function(){return e.changeObject("fliph")},id:"flipHorizontal"},f.a.createElement("i",{className:"nxi nxi-flip-h"})),f.a.createElement(y.a,{placement:"left",target:"flipHorizontal"},e.language.canvas.flipHorizontal)),f.a.createElement("li",{className:"nav-item"},f.a.createElement("a",{className:"nav-link",onClick:function(){return e.changeObject("flipv")},id:"flipVertical"},f.a.createElement("i",{className:"nxi nxi-flip-v"})),f.a.createElement(y.a,{placement:"left",target:"flipVertical"},e.language.canvas.flipVertical)),f.a.createElement("li",{className:"nav-item"},f.a.createElement("a",{className:"nav-link",onClick:function(){return e.ungroupSelectedElement(!0)},id:"ungroup"},f.a.createElement("i",{className:"ungroup-svg-icon"})),f.a.createElement(y.a,{placement:"left",target:"ungroup"},e.language.canvas.ungroup))),f.a.createElement("ul",{className:"canvasWrap-nav canvasWrap-nav-right nav nav-pills custom-pills"+(1===e.mesh3DObject.is3dEnable?"":" top"),role:"tablist"},f.a.createElement("li",{className:e.layerElmCount>1&&!e.isPredeco?"nav-item":"nav-item hidden"},f.a.createElement("a",{className:"nav-link",onClick:function(){return e.onLayersClick()}},f.a.createElement("i",{className:"nf nf-layers"}),e.language.canvas.layer)),f.a.createElement("li",{className:e.isZoom?"nav-item":"nav-item hidden"},f.a.createElement("a",{className:"nav-link",onClick:function(){return e.onZoomClick("original")}},f.a.createElement("i",{className:"nf nf-zoom-out"}),e.language.canvas.zoom)),f.a.createElement("li",{className:!e.isZoom&&e.layerElmCount>0?"nav-item dropdown":"nav-item dropdown hidden"},f.a.createElement("a",{className:"nav-link dropdown-toggle","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},f.a.createElement("i",{className:"nf nf-zoom-in"}),e.language.canvas.zoom),f.a.createElement("div",{className:e.layerElmCount>0?"dropdown-menu":"dropdown-menu hidden","aria-labelledby":"dropdownMenuButton"},f.a.createElement("a",{className:"dropdown-item",onClick:function(){return e.onZoomClick("bounds")}},e.language.canvas.fitToArea),f.a.createElement("a",{className:e.selectedElem?"dropdown-item":"dropdown-item hidden",onClick:function(){return e.onZoomClick("selection")}},e.language.canvas.fitToSelection),f.a.createElement("a",{className:"dropdown-item",onClick:function(){return e.onZoomClick("designs")}},e.language.canvas.fitToDesigns))),f.a.createElement("li",{className:e.isGrid&&!e.stickerPreviewEnable?"nav-item":"nav-item hidden"},f.a.createElement("a",{className:"nav-link",onClick:function(){return e.onGridClick()}},f.a.createElement("div",{className:"grid-svg-wrapper"},!e.isGridApply&&f.a.createElement("i",{className:"grid-svg-icon"}),e.isGridApply&&f.a.createElement("i",{className:"grid-active-svg-icon"}),f.a.createElement("div",{className:"text"},e.language.canvas.grid?e.language.canvas.grid:"Grid")))),f.a.createElement("li",{className:e.selectedElem&&!e.showControlOptions?"nav-item dropdown":"nav-item dropdown hidden"},f.a.createElement("a",{className:"nav-link dropdown-toggle","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},f.a.createElement("i",{className:"nxi nxi-menu"}),e.language.main.edit),f.a.createElement("div",{className:e.selectedElem?"dropdown-menu":"dropdown-menu hidden","aria-labelledby":"dropdownMenuButton"},f.a.createElement("a",{className:"dropdown-item",onClick:function(){return e.changeObject("clone")}},f.a.createElement("i",{className:"clone-svg-icon"})," ",e.language.canvas.clone),f.a.createElement("a",{className:"dropdown-item",onClick:function(){return e.changeObject("fswap")}},f.a.createElement("i",{className:"nxi nxi-swap-forward pr-2"})," ",e.language.canvas.forwardSwap),f.a.createElement("a",{className:"dropdown-item",onClick:function(){return e.changeObject("bswap")}},f.a.createElement("i",{className:"nxi nxi-swap-backward pr-2"})," ",e.language.canvas.backwardSwap),f.a.createElement("a",{className:"dropdown-item",onClick:function(){return e.changeObject("alignH")}},f.a.createElement("i",{className:"nxi nxi-align-h pr-2"})," ",e.language.canvas.horizontalAlign),f.a.createElement("a",{className:"dropdown-item",onClick:function(){return e.changeObject("alignV")}},f.a.createElement("i",{className:"nxi nxi-align-v pr-2"})," ",e.language.canvas.verticalAlign),f.a.createElement("a",{className:"dropdown-item",onClick:function(){return e.changeObject("fliph")}},f.a.createElement("i",{className:"nxi nxi-flip-h pr-2"})," ",e.language.canvas.flipHorizontal),f.a.createElement("a",{className:"dropdown-item",onClick:function(){return e.changeObject("flipv")}},f.a.createElement("i",{className:"nxi nxi-flip-v pr-2"})," ",e.language.canvas.flipVertical),f.a.createElement("a",{className:"dropdown-item",onClick:function(){return e.ungroupSelectedElement(!0)}},f.a.createElement("i",{className:"ungroup-svg-icon"})," ",e.language.canvas.ungroup))))),f.a.createElement("div",{className:"d-none d-md-none d-lg-block d-xl-block"},f.a.createElement("ul",{className:"canvasWrap-nav canvasWrap-nav-left nav nav-pills custom-pills",role:"tablist",style:{top:"auto",bottom:"10px"}},f.a.createElement("li",{className:e.isElmOnStage&&!e.isPredeco?"nav-item":"nav-item hidden"},f.a.createElement("a",{className:"nav-link d-row",onClick:function(){return e.clearAllClick()}},f.a.createElement("i",{className:"nf nf-broom"}),e.language.canvas.clearAll)),f.a.createElement("li",{className:e.isBackgroundElms&&!(null===(t=e.currBackgroundElms)||void 0===t||null===(a=t.prefs)||void 0===a||null===(r=a.lock)||void 0===r?void 0:r.delete)?"nav-item":"nav-item hidden"},f.a.createElement("a",{className:"nav-link d-row",onClick:function(){return e.removeBackground()}},f.a.createElement("i",{className:"nf nf-trash"})," ",e.language.canvas.background)),f.a.createElement("li",{className:e.isBackgroundElms&&"background"!==e.activeModule&&!(null===(n=e.currBackgroundElms)||void 0===n||null===(i=n.prefs)||void 0===i||null===(o=i.lock)||void 0===o?void 0:o.edit)?"nav-item":"nav-item hidden"},f.a.createElement("a",{className:"nav-link d-row",onClick:function(){return e.editBackground()}},f.a.createElement("i",{className:"nf nf-edit"})," ",e.language.canvas.background)),f.a.createElement("li",{className:e.isElmOnStage&&e.sides&&e.sides.length>1&&e.globalSettings.advance_settings.is_copy_design?"nav-item":"nav-item hidden"},f.a.createElement("a",{className:"nav-link d-row",onClick:function(){return e.cloneElements()}},f.a.createElement("i",{className:"nf nf-copy"}),e.language.canvas.copyDesign)))))}(),f.a.createElement("div",{className:"d-sm-block d-md-block d-lg-none d-xl-none"+(""!==e.splitScreenMobile?" d-none":" d-block")},f.a.createElement("ul",{className:"canvasWrap-nav canvasWrap-nav-left nav nav-pills custom-pills",role:"tablist"},f.a.createElement("li",{className:e.layerElmCount>1&&!e.isPredeco?"nav-item":"nav-item hidden"},f.a.createElement("a",{className:"nav-link"},f.a.createElement("i",{className:"nf nf-layers",onClick:function(){return e.onLayersClick()}}))),1===e.mesh3DObject.is3dEnable&&f.a.createElement("li",{className:"nav-item"},f.a.createElement("a",{className:"nav-link  ".concat(e.togglePreview?"":"active"),onClick:function(){return e.togglePreviewClick("2d")}},"2D")),1===e.mesh3DObject.is3dEnable&&f.a.createElement("li",{className:"nav-item"},f.a.createElement("a",{className:"nav-link ".concat(e.togglePreview?"active":""),style:{pointerEvents:e.mesh3DObject.loadingValue<100?"none":""},onClick:function(){return e.togglePreviewClick("3d")}}," ",e.mesh3DObject.loadingValue<100?"".concat(e.mesh3DObject.loadingValue,"%"):"3D")),f.a.createElement("li",{className:e.isZoom?"nav-item":"nav-item hidden"},f.a.createElement("a",{className:"nav-link"},f.a.createElement("i",{className:"nf nf-zoom-out",onClick:function(){return e.onZoomClick("original")}}))),f.a.createElement("li",{className:!e.isZoom&&e.layerElmCount>0?"nav-item dropdown":"nav-item dropdown hidden"},f.a.createElement("a",{className:"nav-link dropdown-toggle","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},f.a.createElement("i",{className:"nf nf-zoom-in"})),e.language&&f.a.createElement("div",{className:e.layerElmCount>0?"zoom-menu dropdown-menu":"zoom-menu dropdown-menu hidden","aria-labelledby":"dropdownMenuButton"},f.a.createElement("a",{className:"dropdown-item",onClick:function(){return e.onZoomClick("bounds")}},e.language.canvas.fitToArea),f.a.createElement("a",{className:e.selectedElem?"dropdown-item":"dropdown-item hidden",onClick:function(){return e.onZoomClick("selection")}},e.language.canvas.fitToSelection),f.a.createElement("a",{className:"dropdown-item",onClick:function(){return e.onZoomClick("designs")}},e.language.canvas.fitToDesigns))),f.a.createElement("li",{className:e.isGrid&&!e.stickerPreviewEnable?"nav-item":"nav-item hidden"},f.a.createElement("a",{className:"nav-link",onClick:function(){return e.onGridClick()}},f.a.createElement("div",{className:"grid-svg-wrapper"},f.a.createElement("i",{className:"grid-svg-icon"})))),f.a.createElement("li",{className:e.isElmOnStage?"nav-item":"nav-item hidden"},f.a.createElement("a",{className:"nav-link",onClick:function(){return e.onUndoClick()}},f.a.createElement("i",{className:"nf nf-undo"}))),f.a.createElement("li",{className:e.isUndoClick?"nav-item":"nav-item hidden"},f.a.createElement("a",{className:"nav-link",onClick:function(){return e.onRedoClick()}},f.a.createElement("i",{className:"nf nf-redo"}))),f.a.createElement("li",{className:e.isElmOnStage?"nav-item":"nav-item hidden"},f.a.createElement("a",{className:"nav-link",onClick:function(){return e.clearAllClick()}},f.a.createElement("i",{className:"nf nf-broom"}))),f.a.createElement("li",{className:e.isBackgroundElms?"nav-item":"nav-item hidden"},f.a.createElement("a",{className:"nav-link",onClick:function(){return e.removeBackground()}},f.a.createElement("i",{className:"nf nf-trash"}))),f.a.createElement("li",{className:e.isBackgroundElms&&"background"!==e.activeModule?"nav-item":"nav-item hidden"},f.a.createElement("a",{className:"nav-link",onClick:function(){return e.editBackground()}},f.a.createElement("i",{className:"nf nf-edit"}))),f.a.createElement("li",{className:e.isElmOnStage&&e.sides&&e.sides.length>1&&e.globalSettings.advance_settings.is_copy_design?"nav-item":"nav-item hidden"},f.a.createElement("a",{className:"nav-link",onClick:function(){return e.cloneElements()}},f.a.createElement("i",{className:"nf nf-copy"}))),e.selectedElem&&f.a.createElement("li",{className:"nav-item dropdown"},f.a.createElement("a",{className:"nav-link dropdown-toggle","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},f.a.createElement("i",{className:"nxi nxi-menu"})),f.a.createElement("div",{className:"dropdown-menu","aria-labelledby":"dropdownMenuButton"},f.a.createElement("a",{className:"dropdown-item",onClick:function(){return e.changeObject("clone")}},f.a.createElement("i",{className:"clone-svg-icon"})," ",e.language.canvas.clone),f.a.createElement("a",{className:"dropdown-item",onClick:function(){return e.changeObject("fswap")}},f.a.createElement("i",{className:"nxi nxi-swap-forward pr-2"})," ",e.language.canvas.forwardSwap),f.a.createElement("a",{className:"dropdown-item",onClick:function(){return e.changeObject("bswap")}},f.a.createElement("i",{className:"nxi nxi-swap-backward pr-2"})," ",e.language.canvas.backwardSwap),f.a.createElement("a",{className:"dropdown-item",onClick:function(){return e.changeObject("alignH")}},f.a.createElement("i",{className:"nxi nxi-align-h pr-2"})," ",e.language.canvas.horizontalAlign),f.a.createElement("a",{className:"dropdown-item",onClick:function(){return e.changeObject("alignV")}},f.a.createElement("i",{className:"nxi nxi-align-v pr-2"})," ",e.language.canvas.verticalAlign),f.a.createElement("a",{className:"dropdown-item",onClick:function(){return e.changeObject("fliph")}},f.a.createElement("i",{className:"nxi nxi-flip-h pr-2"})," ",e.language.canvas.flipHorizontal),f.a.createElement("a",{className:"dropdown-item",onClick:function(){return e.changeObject("flipv")}},f.a.createElement("i",{className:"nxi nxi-flip-v pr-2"})," ",e.language.canvas.flipVertical),f.a.createElement("a",{className:"dropdown-item",onClick:function(){return e.ungroupSelectedElement(!0)}},f.a.createElement("i",{className:"ungroup-svg-icon"})," ",e.language.canvas.ungroup))))),function(){if(1===e.mesh3DObject.is3dEnable)return f.a.createElement("ul",{className:"canvasWrap-preview-nav nav nav-pills custom-pills",role:"tablist"},f.a.createElement("li",{className:"nav-item"},f.a.createElement("a",{className:"nav-link  ".concat(e.togglePreview?"":"active"),onClick:function(){return e.togglePreviewClick("2d")}},"2D")),f.a.createElement("li",{className:"nav-item"},f.a.createElement("a",{className:"nav-link ".concat(e.togglePreview?"active":""),style:{pointerEvents:e.mesh3DObject.loadingValue<100?"none":""},onClick:function(){return e.togglePreviewClick("3d")}}," ",e.mesh3DObject.loadingValue<100?"".concat(e.mesh3DObject.loadingValue,"%"):"3D")))}()),f.a.createElement("div",{className:"drawcanvas"},f.a.createElement("canvas",{id:"cnv",width:"600",height:"600"}),f.a.createElement("img",{id:"output",alt:""})),f.a.createElement("div",{id:"test-gr"},f.a.createElement("svg",null,f.a.createElement("g",{id:"testgrp"}))),f.a.createElement("div",{id:"canvasWrapper"}),f.a.createElement("canvas",{id:"configCanvas",width:"600",height:"600",className:"d-none"}),e.imageLoaded||e.isVariableBound||!e.language?null:f.a.createElement("div",{className:"loader"},f.a.createElement("div",{className:"loader-gif mb-3"},f.a.createElement("svg",{width:"38",height:"38",viewBox:"0 0 38 38"},f.a.createElement("g",{fill:"none",fillRule:"evenodd"},f.a.createElement("g",{transform:"translate(1 1)",strokeWidth:"2"},f.a.createElement("circle",{strokeOpacity:".5",cx:"18",cy:"18",r:"18"}),f.a.createElement("path",{d:"M36 18c0-9.94-8.06-18-18-18"},f.a.createElement("animateTransform",{attributeName:"transform",type:"rotate",from:"0 18 18",to:"360 18 18",dur:"1s",repeatCount:"indefinite"})))))),f.a.createElement("h3",{className:"loader-title"},e.language.canvas.loadingProduct),f.a.createElement("h4",{className:"loader-text"},e.language.canvas.loaderMessage)),function(){if(e.isbackLoader&&e.language){var t="",a="";return"background"===e.loaderModule?(t=e.language.background.loaderMessage,a=e.language.background.loaderMessageDescription):"template"===e.loaderModule?(t=e.language.template.loaderMessage,a=e.language.template.loaderMessageDescription):"clipart"===e.loaderModule?(t=e.language.clipart.loaderMessage,a=e.language.clipart.loaderMessageDescription):"shapes"===e.loaderModule?(t=e.language.shape.loaderMessage,a=e.language.shape.loaderMessageDescription):"Image"===e.loaderModule?(t=e.language.image.loaderMessage,a=e.language.image.loaderMessageDescription):"configurator"===e.loaderModule?(t=e.language.configurator.loaderMsg,a=e.language.configurator.loaderMsgDesc):"userDesign"===e.loaderModule&&(t=e.language.template.designLoaderMsg,a=e.language.template.designLoaderMsgDesc),f.a.createElement("div",{className:"loader transparent"},f.a.createElement("div",{className:"loader-gif mb-3"},f.a.createElement("svg",{width:"38",height:"38",viewBox:"0 0 38 38"},f.a.createElement("g",{fill:"none",fillRule:"evenodd"},f.a.createElement("g",{transform:"translate(1 1)",strokeWidth:"2"},f.a.createElement("circle",{strokeOpacity:".5",cx:"18",cy:"18",r:"18"}),f.a.createElement("path",{d:"M36 18c0-9.94-8.06-18-18-18"},f.a.createElement("animateTransform",{attributeName:"transform",type:"rotate",from:"0 18 18",to:"360 18 18",dur:"1s",repeatCount:"indefinite"})))))),f.a.createElement("h3",{className:"loader-title"},t),f.a.createElement("h4",{className:"loader-text"},a))}return null}(),function(){var t="";if(t="sideChange"===e.source?"":"Please wait",e.isLoader&&e.language&&e.timesProdLoad)return f.a.createElement("div",{className:"loader transparent"},f.a.createElement("div",{className:"loader-gif mb-3"},f.a.createElement("svg",{width:"38",height:"38",viewBox:"0 0 38 38"},f.a.createElement("g",{fill:"none",fillRule:"evenodd"},f.a.createElement("g",{transform:"translate(1 1)",strokeWidth:"2"},f.a.createElement("circle",{strokeOpacity:".5",cx:"18",cy:"18",r:"18"}),f.a.createElement("path",{d:"M36 18c0-9.94-8.06-18-18-18"},f.a.createElement("animateTransform",{attributeName:"transform",type:"rotate",from:"0 18 18",to:"360 18 18",dur:"1s",repeatCount:"indefinite"})))))),f.a.createElement("h3",{className:"loader-title"},e.language.main.loading),f.a.createElement("h4",{className:"loader-text"},t))}())},ye=function(e){return e.modalIsOpen?f.a.createElement(X.a,{id:"clear-popup",isOpen:e.modalIsOpen,toggle:e.closeModal,centered:!0,style:{maxWidth:"400px"},modalClassName:"custom"},e.language&&f.a.createElement(K.a,null,f.a.createElement("h6",{className:"modal-text-title"},f.a.createElement("strong",null,e.language.canvas.sure),e.language.canvas.sureMsg),f.a.createElement("div",{className:"modal-btn-group"},f.a.createElement("button",{className:"btn btn-sm btn-dark text-light",onClick:function(){return e.closeModal()}},e.language.canvas.cancel),f.a.createElement("button",{className:"btn btn-sm btn-success",onClick:function(){return e.clearAll()}},e.language.canvas.delete)))):f.a.createElement(g.Fragment,null)},_e=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(e){var r;return Object(u.a)(this,a),(r=t.call(this)).state={},r}return Object(d.a)(a,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return f.a.createElement(ye,{modalIsOpen:this.props.modalIsOpen,closeModal:this.props.closeModal,clearAll:this.props.clearAll,language:this.props.language})}}]),a}(f.a.Component),Ee=Object(v.b)((function(e){return{language:e.languageReducer.translation_data.filter((function(t){return t.langCode===e.languageReducer.default_lang}))[0]}}))(_e),Se=a(22),Ce=a.n(Se),xe=function(e){function t(t){return e.isProductTemplate&&e.selectedColor?f.a.createElement(g.Fragment,null,(""!==e.selectedColor.hex_code||""!==e.selectedColor.file_name)&&f.a.createElement("img",{src:t.image.thumbnail,alt:"",style:{backgroundColor:""!==e.selectedColor.hex_code?e.selectedColor.hex_code:"",backgroundImage:""!==e.selectedColor.file_name?"url("+e.selectedColor.file_name+")":"",backgroundSize:"cover"}}),""===e.selectedColor.hex_code&&""===e.selectedColor.file_name&&f.a.createElement("img",{src:t.image.thumbnail,alt:""})):f.a.createElement("img",{src:t.image.thumbnail,alt:"",style:{backgroundColor:"#fff"}})}return e.modalIsOpen?f.a.createElement(X.a,{id:"clear-popup",isOpen:e.modalIsOpen,toggle:e.closeModal,centered:!0,modalClassName:"custom clone"},e.language&&f.a.createElement(K.a,null,f.a.createElement("h6",{className:"modal-text-title"},e.language.canvas.copyDesignDesc),f.a.createElement("section",{className:"custom-side-wrapper"},f.a.createElement("div",{className:"dropdown"},f.a.createElement("button",{className:"btn btn-white dropdown-toggle d-flex align-items-center",type:"button",id:"dropdownMenuButton","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},f.a.createElement("div",{className:"custom-side-row"},e.productSides.map((function(a,r){return f.a.createElement(g.Fragment,{key:r},e.selectedSideIndex===r&&f.a.createElement("div",{className:"custom-side-col p-0"},f.a.createElement("div",{className:"custom-side-img"},t(a)),f.a.createElement("div",{className:"custom-side-text"},a.name)))})))),f.a.createElement("div",{className:"dropdown-menu w-100","aria-labelledby":"dropdownMenuButton"},f.a.createElement("div",{className:"custom-side-row fix-height"},e.productSides.map((function(a,r){return f.a.createElement(g.Fragment,{key:r},e.sideIndex!==r&&f.a.createElement("div",{className:"custom-side-col"+(e.selectedSideIndex===r?" active":""),onClick:function(){return e.onSideSelect(a,r)}},f.a.createElement("div",{className:"custom-side-img"},t(a)),f.a.createElement("div",{className:"custom-side-text"},a.name)))})))))),f.a.createElement("div",{className:"modal-btn-group"},f.a.createElement("button",{className:"btn btn-sm btn-dark text-light",onClick:function(){return e.closeModal()}},e.language.canvas.cancel),f.a.createElement("button",{className:"btn btn-sm btn-success"+(null===e.selectedSideIndex?" disabled":""),disabled:null===e.selectedSideIndex,onClick:function(){return e.copyAllElements(e.selectedSide,e.selectedSideIndex)}},e.language.canvas.applydesign)))):f.a.createElement(g.Fragment,null)},we=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(e){var r;return Object(u.a)(this,a),(r=t.call(this)).onSideSelect=function(e,t){r.props.sideIndex!==t&&r.setState({selectedSide:e,selectedSideIndex:t})},r.state={selectedSide:null,selectedSideIndex:null},r}return Object(d.a)(a,[{key:"componentDidMount",value:function(){if(this.props.sides&&2===this.props.sides.length){var e=0===this.props.sideIndex?1:0;this.onSideSelect(this.props.sides[e],e)}else{var t=this.props.sideIndex+1;t=t<this.props.sides.length?t:0,this.onSideSelect(this.props.sides[t],t)}}},{key:"render",value:function(){return f.a.createElement(xe,{productSides:this.props.sides,sideIndex:this.props.sideIndex,modalIsOpen:this.props.modalIsOpen,closeModal:this.props.closeModal,copyAllElements:this.props.copyAllElements,language:this.props.language,onSideSelect:this.onSideSelect,selectedSideIndex:this.state.selectedSideIndex,selectedSide:this.state.selectedSide,selectedColor:this.props.selectedColor,isProductTemplate:this.props.isProductTemplate})}}]),a}(f.a.Component),ke=Object(v.b)((function(e){return{language:e.languageReducer.translation_data.filter((function(t){return t.langCode===e.languageReducer.default_lang}))[0]}}))(we),Ie=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(e){var r;return Object(u.a)(this,a),(r=t.call(this,e)).isCheckoutPreview=function(e){r.checkoutPreview=e},r.onImageLoaded=function(e){var t=new Image,a=600,n=600;t.onload=function(){var e=t.width/t.height;t.width>t.height?n=a/e:t.height>t.width&&(a=n*e);var i=document.getElementById("stage_image_wrap");i&&i.getElementsByTagName("img")[0]&&(i.getElementsByTagName("img")[0].setAttribute("width",a),i.getElementsByTagName("img")[0].setAttribute("height",n)),r.setState({imageLoaded:!0,imgTop:"-113px"}),r.props.showCanvasLoader(!1)},t.src=e.target.src},r.hideLoader=function(e){r.props.showCanvasLoader(!1)},r.onUndoClick=function(){r.togglePreviewClick("2d"),P.a.clickUndo(),r.setState({isUndoClick:!0})},r.togglePreviewClick=function(e){"2d"===e?(r.setState({togglePreview:!1}),r.props.preview3DTabStatus(!1)):"3d"===e&&r.props.mesh3DObject&&1===r.props.mesh3DObject.is3dEnable&&(r.props.preview3DTabStatus(!0),r.setState({togglePreview:!0}),r.props.backToModuleCallback())},r.updateColorInModel=function(){r.setState({isColorChange:!0},(function(){r.setState({isColorChange:!1})}))},r.onLayersClick=function(){(P.a.canvas.getCurrentLayerElems().length?1:0)?(r.props.openLayer(),r.togglePreviewClick("2d")):r.showNotification("warning",r.props.language.canvas.addDesign)},r.handleMouseDownEvent=function(e){"mousedown"===e.type&&(r.state.togglePreview||r.props.onChangeOrderOption(!1))},r.removeBackground=function(){var e,t=Ce()(P.a.canvas.getLayerStage()).children("g"),a="bg_area_"+Number(P.a.canvas.getLayerStage().getAttribute("id").split("_")[1]),n=P.a.canvas.getActiveObject()[0];n&&n.prefs&&"background"===n.prefs.type&&P.a.canvas.clearSelection();for(var i=0;i<t.length;i++)t[i]&&t[i].getAttribute("type")===a&&((e=t[i]).prefs=null,Ce()(e).empty());r.props.removeBackground(),r.props.checkBackgroundElm(),P.a.canvas.extractAlphaPx()},r.showHideBackLoader=function(e,t){r.setState({isbackLoader:e,loaderModule:t})},r.clearAllClick=function(){r.setState({modalIsOpen:!0})},r.clearAll=function(){var e=0,t=P.a.canvas.getAllStageElems(),a=P.a.canvas.team;Object.keys(a).forEach((function(t){e+=a[t]})),e&&t.forEach((function(e){"number"!==e.prefs.subType&&"name"!==e.prefs.subType&&"image"!==e.prefs.subType||(a[e.prefs.name]-=1)})),r.setState({modalIsOpen:!1},(function(){P.a.canvas.clearAll(r.clearAllBackground)}))},r.clearAllBackground=function(){r.props.removeBackground(),r.props.checkBackgroundElm()},r.closeModal=function(){r.setState({modalIsOpen:!1})},r.warningCheck=function(e){r.setState({modalWarningIsOpen:e,modalWarningMsg:r.props.language.image.lowResolutionMessage,modalWarningType:"warning"},(function(){var t=document.getElementById("warningPop");t&&e&&(t.className="show",setTimeout((function(){t.className=t.className.replace("show",""),r.setState({modalWarningIsOpen:!1})}),5e3))}))},r.closeWarningModal=function(){r.setState({modalWarningIsOpen:!1})},r.editBackground=function(){r.props.editBackground()},r.setActiveModule=function(e){r.setState({activeModule:e})},r.showHideStickerPreview=function(e){e?P.a.exportFaceData({},!1,!1,(function(t){r.designImg=t.datauri,r.setState({stickerPreview:e,designImg:r.designImg})})):r.state.stickerPreview&&r.setState({stickerPreview:e})},r.changeObject=function(e){switch(e){case"clone":P.a.canvas.cloneSelectedElements(10,10);break;case"fswap":P.a.canvas.moveUpDownSelected("Up");break;case"bswap":P.a.canvas.moveUpDownSelected("Down");break;case"alignH":P.a.canvas.alignSelectedElements("c","page");break;case"alignV":P.a.canvas.alignSelectedElements("m","page");break;case"fliph":P.a.flipHSelected();break;case"flipv":P.a.flipVSelected()}r.togglePreviewClick("2d")},r.loadConfigurator=function(e){r.resetConfiguratorElem();for(var t=e,a=0;a<t.length;a++){var n=r.createNewElement("image","".concat(t[a].id),"".concat(t[a].sectionName),"","",600,600,"","",t[a].designDetails.file_name,""),i=r.createNewElement("g","".concat(t[a].id),"","","","","","","","","");i.append(n),Ce()("#configurator_image-loader").append(i)}r.setState({isConfiguratorLoaded:!0})},r.createNewElement=function(e,t,a,r,n,i,o,s,l,c,u){var d=document.createElementNS("http://www.w3.org/2000/svg",e);return t&&"g"==e&&d.setAttribute("id",t),a&&d.setAttribute("name",a),r&&d.setAttribute("x",r),n&&d.setAttribute("y",n),i&&d.setAttribute("width",i),o&&d.setAttribute("height",o),"g"!=e&&d.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),""!=s&&d.setAttribute("preserveAspectRatio",s),""!=l&&d.setAttribute("patternUnits",l),""!=c&&d.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c),u&&d.setAttribute("fill",u),d},r.updateConfigurator=function(e){document.getElementById("configurator_image-loader").getElementById(e.parentId).childNodes[0].setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",e.file_name)},r.resetConfiguratorElem=function(){r.setState({isConfiguratorLoaded:!1});var e=document.getElementById("configurator_image-loader");e&&e.querySelectorAll("*").forEach((function(e){return e.remove()}))},r.showNotification=function(e,t){r.state.modalWarningIsOpen||r.setState({modalWarningIsOpen:!0,modalWarningMsg:t,modalWarningType:e},(function(){var e=document.getElementById("warningPop");e.className="show",e.scrollIntoView({behavior:"smooth"}),setTimeout((function(){e.className=e.className.replace("show",""),r.setState({modalWarningIsOpen:!1})}),5e3)}))},r.cloneElements=function(){r.setState({cloneModalIsOpen:!0})},r.closeCloneModal=function(){r.setState({cloneModalIsOpen:!1})},r.copyAllElements=function(e,t){r.closeCloneModal(),P.a.canvas.cloneElements=!0,P.a.canvas.selectAllInCurrentLayer(),P.a.canvas.copySelectedElements(),P.a.canvas.clearSelection(),r.props.sideSelected(e,t)},r.getUrlParameter=function(e){return("Shopify"!==window.storeType&&"Others"!==window.storeType&&"Hosted"!==window.storeType?new URLSearchParams(window.parent.location.search):new URLSearchParams(window.location.search)).get(e)},r.ungroupSelectedElement=function(e){P.a.canvas.ungroupSelectedElement(e)},r.showCropElemWarning=function(e){r.setState({modalWarningIsOpen:e,modalWarningMsg:"Design Element is outside the boundary",modalWarningType:"warning"},(function(){var t=document.getElementById("warningPop");t&&e&&(t.className="showDesignWarning")}))},r.state={productDetails:null,error:null,loading:!1,imageLoaded:!1,togglePreview:!1,isUndoClick:!1,stickerPreview:!1,isbackLoader:!1,loaderModule:"",modalIsOpen:!1,modalWarningIsOpen:!1,activeModule:"",isConfiguratorLoaded:!1,designImg:"",isColorChange:!1,bounds:null,imgTop:"0px",modalWarningMsg:"",modalWarningType:"",cloneModalIsOpen:!1},r.designImg="",r.AddTempCount=0,r.checkoutPreview=!1,W.a.subscribe(W.b.OPEN_WARNING_POPUP,(function(e){return r.warningCheck(e)})),W.a.subscribe(W.b.SHOW_CROP_ELEMENT_POPUP,(function(e){return r.showCropElemWarning(e)})),r}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=this;if((0,this.props.canvasRef)(this),this.isPredeco=!!this.getUrlParameter("dpid"),this.props.configuratorSideList.productDetails&&this.props.configuratorSideList.productDetails.data&&this.props.configuratorSideList.productDetails.data[0].sideList){var t=new XMLHttpRequest;t.open("GET",this.props.configuratorSideList.productDetails.data[0].sideList[this.props.sideIndex].sideSvg),t.onload=function(){document.getElementById("configurator_svg-loader_"+e.props.sideIndex).appendChild(t.responseXML.documentElement.children[0]),P.a.canvas.resizeStage()},t.send()}}},{key:"componentWillUnmount",value:function(){W.a.unsubscribe(W.b.OPEN_WARNING_POPUP)}},{key:"componentDidUpdate",value:function(){var e=this;setTimeout((function(){var t=document.getElementById("bounds")?document.getElementById("bounds").getBBox():"";null!==e.state.bounds&&e.state.bounds.x===t.x&&e.state.bounds.y===t.y&&e.state.bounds.width===t.width&&e.state.bounds.height===t.height||e.setState({bounds:t})}))}},{key:"onRedoClick",value:function(){this.togglePreviewClick("2d"),P.a.clickRedo()}},{key:"render",value:function(){var e,t,a=this.props.licenceAddOns.includes("sticker"),r=this.props,n=r.loading,i=r.productDetails,o=r.sideIndex,s=r.selectedColor,l=r.isProductTemplate,c=r.splitScreenMobile,u=r.isElmOnStage,d=r.layerElmCount,p=r.isOrderOptionsShow,m=r.isBackgroundElms,h=r.faceData,v=r.objectOnStage,b=r.selectedElem,A=r.mesh3DObject,y=r.isTeamJerseyData,_=r.base64forMultiLayer3DPreview,E=r.currBackgroundElms,S=r.timesProdLoad,C=r.showControlOptions,x=r.sides,w=r.globalSettings;return f.a.createElement(g.Fragment,null,f.a.createElement(Ae,{productDetails:i,sideIndex:o,loading:n,imageLoaded:this.state.imageLoaded,onImageLoaded:this.onImageLoaded,selectedColor:s,isProductTemplate:l,onUndoClick:this.onUndoClick,onRedoClick:this.onRedoClick,onLayersClick:this.onLayersClick,onZoomClick:this.props.onZoomClick,splitScreenMobile:c,isLoader:this.props.isLoader,togglePreview:this.state.togglePreview,togglePreviewClick:this.togglePreviewClick,isVariableBound:this.props.isVariableBound,isElmOnStage:u,isUndoClick:this.state.isUndoClick,layerElmCount:d,isOrderOptionsShow:p,handleMouseDownEvent:this.handleMouseDownEvent,removeBackground:this.removeBackground,clearAllClick:this.clearAllClick,isBackgroundElms:m,isZoom:this.props.isZoom,isGrid:this.props.isGrid,onGridClick:this.props.onGridClick,faceData:h,objectOnStage:v,isbackLoader:this.state.isbackLoader,loaderModule:this.state.loaderModule,source:this.props.source,language:this.props.language,editBackground:this.editBackground,activeModule:this.state.activeModule,changeObject:this.changeObject,selectedElem:b,modalWarningIsOpen:this.state.modalWarningIsOpen,closeWarningModal:this.closeWarningModal,loadConfigurator:this.loadConfigurator,isConfiguratorLoaded:this.state.isConfiguratorLoaded,updateConfigurator:this.updateConfigurator,mesh3DObject:A,isTeamJerseyData:y,stickerPreview:this.state.stickerPreview,designImg:this.state.designImg,isColorChange:this.state.isColorChange,base64forMultiLayer3DPreview:_,customPrintAreaDimension:this.props.customPrintAreaDimension,activeProductSide:this.props.activeProductSide,bounds:this.state.bounds,imgTop:window.innerWidth<768?this.state.imgTop:"",isGridApply:this.props.isGridApply,modalWarningMsg:this.state.modalWarningMsg,modalWarningType:this.state.modalWarningType,currBackgroundElms:E,timesProdLoad:S,cloneElements:this.cloneElements,sides:x,globalSettings:w,isPredeco:this.isPredeco,showControlOptions:C,ungroupSelectedElement:this.ungroupSelectedElement,configuratorSideList:this.props.configuratorSideList,hideLoader:this.hideLoader,stickerPreviewEnable:!(!(null===(e=this.props.selectedPrintProfileData)||void 0===e||null===(t=e.sticker)||void 0===t?void 0:t.is_sticker_enabled)||!a)}),this.state.modalIsOpen&&f.a.createElement(Ee,{modalIsOpen:this.state.modalIsOpen,closeModal:this.closeModal,clearAll:this.clearAll}),this.state.cloneModalIsOpen&&f.a.createElement(ke,{sides:x,sideIndex:o,modalIsOpen:this.state.cloneModalIsOpen,closeModal:this.closeCloneModal,copyAllElements:this.copyAllElements,sideSelected:this.props.sideSelected,selectedColor:s,isProductTemplate:l}))}}]),a}(f.a.Component),Ne=Object(v.b)((function(e){return{language:e.languageReducer.translation_data.filter((function(t){return t.langCode===e.languageReducer.default_lang}))[0],faceData:e.productCanvasReducer.faceData,customPrintAreaDimension:e.productCanvasReducer.customPrintAreaDimension,activeProductSide:e.productCanvasReducer.product_sides.filter((function(t,a){return a===e.productCanvasReducer.active_product_side}))[0],configuratorSideList:e.ConfiguratorDesignData,globalSettings:e.globalSettingReducer.global_settings_data,selectedPrintProfileData:e.printProfileReducer.print_profile_data.filter((function(t){return t.id===e.printProfileReducer.selected_print_profile}))[0],licenceAddOns:e.productCanvasReducer.licenceAddOns}}))(Ie),Oe=a(99),Pe=a.n(Oe),De=function(e){function t(){if(e.language&&e.printProfiles)return f.a.createElement("div",{className:"dropdown-menu scrollbar","aria-labelledby":"dropdownMenuButton",id:"printViewList"},e.printProfiles.map((function(t,a){return f.a.createElement("div",{key:t.id+"_"+a,className:"dropdown-item"+(e.selectedProfile.id===t.id?" active":""),onClick:function(){return e.profileSelected(t)}},f.a.createElement("div",{className:"dropdown-item-img"},f.a.createElement("img",{src:t.thumbnail,alt:""})),f.a.createElement("div",{className:"dropdown-item-label"},f.a.createElement("div",{className:"label-title"},e.language.print_profiles&&e.language.print_profiles[t.id]&&e.language.print_profiles[t.id].title||t.name),f.a.createElement("div",{className:"label-desc",dangerouslySetInnerHTML:{__html:e.language.print_profiles&&e.language.print_profiles[t.id]&&e.language.print_profiles[t.id].description||t.description}})))})))}return e.language&&e.selectedProfile?f.a.createElement("div",{className:"dt-elements dt-header"+(e.isProfileMobile?" show":"")},f.a.createElement("div",{className:e.isOrderOptionsShow||e.isTeamJerseyData?"hidden":"titleRow"},f.a.createElement("div",{className:"titleRow-action d-flex d-sm-flex d-md-flex d-lg-none d-xl-none"},f.a.createElement("div",{className:"titleRow-action-link",onClick:function(){return e.handleProfileMobile(!1)}},f.a.createElement("i",{className:"nf nf-delete"})," ",e.language.main.cancel),f.a.createElement("div",{className:"titleRow-action-link",onClick:function(){return e.handleProfileMobile(!1)}},f.a.createElement("i",{className:"nf nf-tick"})," ",e.language.main.done)),f.a.createElement("div",{className:"titleRow-info"},e.productName&&f.a.createElement("div",{className:"pName"},f.a.createElement("h2",{className:"pName-title"},f.a.createElement("div",{className:"d-flex",id:"PopoverLegacy"},f.a.createElement("div",{className:"txt mr-1",id:"tooltip",dangerouslySetInnerHTML:{__html:e.productName}}),f.a.createElement("div",{className:"icon"},f.a.createElement("i",{className:"nf nf-info"})),e.productName.length>20&&f.a.createElement(y.a,{placement:"top",target:"tooltip",dangerouslySetInnerHTML:{__html:e.productName}})),f.a.createElement(S.a,{className:"big-popover",trigger:"legacy",placement:"bottom",target:"PopoverLegacy"},e.popoverDetails&&f.a.createElement(C.a,null,e.popoverDetails.name),f.a.createElement(x.a,null,function(){var t,a;return f.a.createElement("div",{className:"quick-preview"},f.a.createElement("div",{className:"quick-preview-body"},f.a.createElement("div",{className:"pDetail-wrap scrollbar"},f.a.createElement("div",{className:"row"},f.a.createElement("div",{className:"col-12 col-md-auto"},f.a.createElement("div",{className:"pd-image-wrap"},f.a.createElement("figure",{className:"pd-image"+(e.imageLoaded?"":" d-none")},f.a.createElement("img",{src:(null===(t=e.popoverDetails)||void 0===t||null===(a=t.images)||void 0===a?void 0:a.length)?e.popoverDetails.images[0].thumbnail:Pe.a,alt:"",onLoad:e.onImageLoaded,width:184})),!e.imageLoaded&&f.a.createElement("figure",{className:"pd-image"},f.a.createElement(A.a,{width:184,height:184})),f.a.createElement("div",{className:"productInfo-sides"},f.a.createElement("div",{className:"btn controls controls-prev"},f.a.createElement("i",{className:"nxi nxi-move-left"})),e.popoverDetails&&f.a.createElement("div",{className:"thumbView"},e.popoverDetails.images&&e.popoverDetails.images.length>1&&f.a.createElement("div",{className:"thumbView-row"},e.popoverDetails.images.map((function(e,t){return f.a.createElement("div",{className:"thumbView-col active",key:t},f.a.createElement("div",{className:"imageWrap"},f.a.createElement("figure",{className:"imageWrap-box"},f.a.createElement("img",{src:e.thumbnail,alt:""}))))}))))||f.a.createElement(A.a,{height:45,width:30,count:4}),f.a.createElement("div",{className:"btn controls controls-next"},f.a.createElement("i",{className:"nxi nxi-move-right"}))))),f.a.createElement("div",{className:"col-12 col-md"},e.popoverDetails&&f.a.createElement("div",{className:"pd-variants"},e.popoverDetails.attributes.map((function(e){return f.a.createElement(g.Fragment,{key:e.id},e.attribute_term&&e.attribute_term.length>0&&e.attribute_term[0].hex_code&&f.a.createElement("div",{className:"pd-variants-child"},f.a.createElement("h3",{className:"pd-title"},e.name),f.a.createElement("div",{className:"color-block"},e.attribute_term.map((function(e,t){return f.a.createElement(g.Fragment,{key:t},e.hex_code&&f.a.createElement("div",{className:"color-box",key:e.id,style:{backgroundColor:e.hex_code},title:e.name}),e.file_name&&f.a.createElement("div",{className:"color-box",key:e.id,style:{backgroundImage:"url("+e.file_name+")",backgroundSize:"cover"},title:e.name}))})))),e.attribute_term&&e.attribute_term.length>0&&!e.attribute_term[0].hex_code&&f.a.createElement("div",{className:"pd-variants-child"},f.a.createElement("h3",{className:"pd-title"},e.name),f.a.createElement("div",{className:"size-block"},e.attribute_term.map((function(e){return f.a.createElement("div",{className:"size-box",key:e.id},e.name)})))))})),f.a.createElement("div",{className:"pd-variants-child"},e.popoverDetails.print_profile.length>0&&f.a.createElement("h3",{className:"pd-title mt-3"},e.language.main.assignedPrintProfile),e.popoverDetails.print_profile.length>0&&f.a.createElement("div",{className:"size-block printP"},e.popoverDetails.print_profile.map((function(e){return f.a.createElement("div",{className:"size-box",key:e.id},e.name)})))))||f.a.createElement("div",{className:"pd-variants"},f.a.createElement("div",{className:"pd-variants-child"},f.a.createElement(A.a,null),f.a.createElement("h4",null,f.a.createElement(A.a,null))),f.a.createElement("div",{className:"pd-variants-child"},f.a.createElement(A.a,null),f.a.createElement("h4",null,f.a.createElement(A.a,null))),f.a.createElement("div",{className:"pd-variants-child"},f.a.createElement(A.a,null),f.a.createElement("h4",null,f.a.createElement(A.a,null)))))),f.a.createElement("div",{className:"pd-description"},e.popoverDetails&&f.a.createElement("h3",{className:"pd-title"},e.language.main.description)||f.a.createElement(A.a,null),e.popoverDetails&&f.a.createElement("div",{className:"pd-des",dangerouslySetInnerHTML:{__html:e.popoverDetails.description}})||f.a.createElement(A.a,{count:5})))))}()))),"1"!==e.isQuot&&!e.isPredeco&&e.popoverDetails&&f.a.createElement("div",{className:"btn btn-link pName-link",onClick:function(){return e.onProductChange(e.productDetails.product_id)}},e.language.profile.changeProduct),null===e.popoverDetails&&f.a.createElement(A.a,{height:8,width:90})),f.a.createElement("div",{className:"pMethod"},f.a.createElement("div",{className:"pMethod-title"},e.language.print_profiles&&e.language.print_profiles[e.selectedProfile.id]?e.language.print_profiles[e.selectedProfile.id].title:e.selectedProfile.name),e.printProfiles.length>1&&f.a.createElement("div",{className:"pMethod-link"},f.a.createElement("div",{className:"dropdown"},f.a.createElement("button",{className:"btn btn-link dropdown-toggle",type:"button",id:"dropdownMenuButton","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},e.language.profile.decorationProcess),t())))),function(){if(e.licenceAddOns.includes("sticker"),!e.isTemplate)return f.a.createElement("div",{className:"titleRow-links"},!e.isKioskFeature&&"1"!==e.isQuot&&e.settings.advance_settings.social_share&&e.selectedPrintProfileData&&f.a.createElement("div",{className:e.isElmOnStage?"titleRow-links-items":"hidden"},f.a.createElement("div",{className:"btn btn-link share-btn",value:"modal",onClick:function(){return e.modalMethod(!0)},id:"shareModal"},f.a.createElement("i",{className:"nf nf-share"})," ",e.language.profile.share)),function(){if(e.selectedPrintProfileData){e.selectedPrintProfileData.feature_data.findIndex((function(e){return"gallery"===e.slug&&1===e.is_selected}));if("1"!==e.isQuot&&e.settings.advance_settings.save_design_my_gallery)return f.a.createElement("div",{className:e.isElmOnStage?"titleRow-links-items":"hidden"},f.a.createElement("div",{className:"btn btn-link save-btn",onClick:function(){return e.onSaveDesign()}},f.a.createElement("i",{className:"nf nf-save"})," ",e.language.profile.saveDesign))}}(),function(){if(e.selectedPrintProfileData&&e.language&&(e.customerId>0||"Shopify"===e.storeType||"shopify"===e.storeType)&&(!e.decoProductId||e.isCartEdit)&&"1"!==e.isQuot&&e.settings.advance_settings.save_design_my_gallery&&!e.isMobileView)return f.a.createElement("div",{className:"titleRow-links-items d-flex align-items-center"},f.a.createElement("span",{className:e.isElmOnStage?"ml-2":"hidden"}," :"),f.a.createElement("div",{className:"btn btn-link save-btn",onClick:function(){return e.openMyGallery()}},e.language.gallery.myGallery))}(),f.a.createElement("div",{className:"titleRow-links-items"},function(){if(e.multilanguage&&e.langList&&e.langList.length&&e.language)return f.a.createElement("div",{className:"titleRow-links-items"},f.a.createElement("div",{className:"dropdown language-drop"},f.a.createElement("button",{className:"btn btn-link dropdown-toggle",type:"button",id:"dropdownLangButton","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},f.a.createElement("img",{src:e.defaultLangObj.flag,width:20,height:20}),f.a.createElement("div",{className:"d-flex d-sm-flex d-md-none d-lg-none d-xl-none"},e.language.main.language)),f.a.createElement("div",{className:"dropdown-menu scrollbar","aria-labelledby":"dropdownLangButton",id:"langListView"},e.langList.map((function(t,a){return f.a.createElement("div",{key:a,className:"dropdown-item"+(e.defaultLangObj.name===t.name?" active":""),onClick:function(){return e.onChangeLanguage(t)}},f.a.createElement("div",{className:"dropdown-item-label"},f.a.createElement("div",{className:"label-title"},t.name)),f.a.createElement("div",{className:"dropdown-item-img"},f.a.createElement("img",{src:t.flag,alt:""})))})))))}()),e.isMobileView&&f.a.createElement("div",{className:"titleRow-links-items"},1===e.printProfiles.length&&f.a.createElement("div",{className:"dropdown printArea-drop"},f.a.createElement("button",{className:"btn",type:"button"},e.language.print_profiles&&e.language.print_profiles[e.selectedProfile.id]?e.language.print_profiles[e.selectedProfile.id].title:e.selectedProfile.name)),e.printProfiles.length>1&&f.a.createElement("div",{className:"dropdown printArea-drop"},f.a.createElement("button",{className:"btn btn-link dropdown-toggle",type:"button",id:"dropdownMenuButton","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},e.language.print_profiles&&e.language.print_profiles[e.selectedProfile.id]?e.language.print_profiles[e.selectedProfile.id].title:e.selectedProfile.name),t())))}()),(e.isOrderOptionsShow||e.isTeamJerseyData)&&!e.isOrderPlaced&&f.a.createElement("h3",{className:"boxTitle back-link d-none d-md-block d-lg-block d-xl-block back-to-back",onClick:e.handleBack},f.a.createElement("i",{className:"nxi nxi-move-left"})," ",e.language.panel.back)):f.a.createElement("div",{className:"dt-elements dt-header"},f.a.createElement("div",{className:"titleRow"},f.a.createElement("div",{className:"titleRow-info"},f.a.createElement("div",{className:"pName"},f.a.createElement("h2",{className:"pName-title"},f.a.createElement("div",{className:"d-flex"},f.a.createElement("div",{className:"txt mr-1"},f.a.createElement(A.a,{height:16,width:200})))),f.a.createElement("div",{className:"btn btn-link pName-link"},f.a.createElement(A.a,{height:8,width:90}))),f.a.createElement("div",{className:"pMethod"},f.a.createElement("div",{className:"pMethod-title"},f.a.createElement(A.a,{height:16,width:140})),f.a.createElement("div",{className:"pMethod-link"},f.a.createElement("div",{className:"dropdown"},f.a.createElement("button",{className:"btn btn-link dropdown-toggle",type:"button"},f.a.createElement(A.a,{height:8,width:90})))))),f.a.createElement("div",{className:"titleRow-links"},f.a.createElement("div",{className:"titleRow-links-items"},f.a.createElement(A.a,{height:16,width:100})))))},Re=a(858),Te=a(856),Le=a(416),Me=a.n(Le),Be=a(864),je=a(865),Fe=a(866),Ue=a(867),Ve=a(868),Ge=a(869),qe=a(870),He=a(871),ze=a(872),We=a(873),Qe=a(874),Je=a(875),Ye=function(e){if(e.modalIsOpen){var t=f.a.createElement("button",{className:"close",onClick:e.closeModal},"\xd7");return f.a.createElement(X.a,{id:"sharePop",isOpen:e.modalIsOpen,toggle:e.closeModal,centered:!0,modalClassName:"custom"},e.language&&f.a.createElement(Te.a,{close:t},f.a.createElement("span",{id:"exampleModalCenterTitle"},e.language.share.heading)),function(){if(e.language)return e.renderDesigns&&e.renderDesigns.length?f.a.createElement(f.a.Fragment,null,f.a.createElement(K.a,null,f.a.createElement("div",{className:"share-stage"},f.a.createElement("div",{className:"imageWrap"},f.a.createElement("figure",{className:"imageWrap-box"},f.a.createElement("img",{src:e.renderDesigns,alt:""}))),f.a.createElement("textarea",{className:"form-control form-control-sm",placeholder:e.language.share.message,onBlur:function(t){return e.handleChange(t)}})),f.a.createElement(g.Fragment,null,f.a.createElement("div",{className:"sec-title text-center mt-4 mb-3 pt-2"},e.language.share.socialMedia),f.a.createElement("div",{className:"form-row social-icons"},f.a.createElement(Be.a,{quote:e.fbShareMessage,url:e.fbShareUrl},f.a.createElement(je.a,{size:40,round:!0})),f.a.createElement(Fe.a,{url:e.shareMessageWithDesign?e.shareMessageWithDesign:e.designLink},f.a.createElement(Ue.a,{size:40,round:!0})),f.a.createElement(Ve.a,{url:e.shareMessageWithDesign?e.shareMessageWithDesign:e.designLink},f.a.createElement(Ge.a,{size:40,round:!0})),f.a.createElement(qe.a,{url:e.shareMessageWithDesign?e.shareMessageWithDesign:e.designLink},f.a.createElement(He.a,{size:40,round:!0})),f.a.createElement(ze.a,{url:e.shareMessageWithDesign?e.shareMessageWithDesign:e.designLink},f.a.createElement(We.a,{size:40,round:!0})),f.a.createElement(Qe.a,{url:e.shareMessageWithDesign?e.shareMessageWithDesign:e.designLink},f.a.createElement(Je.a,{size:40,round:!0}))))),f.a.createElement(Re.a,null,f.a.createElement("div",{className:"sec-title"},e.language.share.copyURL),e.copySuccess?f.a.createElement("span",{className:"alert alert-success alert-rounded alert-rounded-sm m-0"},e.language.share.copied):null,f.a.createElement("div",{className:"input-group"},f.a.createElement("div",{className:"input-group-prepend",onClick:function(){return e.copyCodeToClipboard()}},f.a.createElement("span",{className:"input-group-text cursor-pointer"},f.a.createElement("i",{className:"nf nf-copy"}))),f.a.createElement("input",{ref:function(t){return e.copyArea(t)},className:"form-control",type:"text",value:e.toolLink,style:{background:"#fff"},readOnly:!0})))):f.a.createElement(g.Fragment,null,f.a.createElement(K.a,null,f.a.createElement("div",{className:"pre-loader"},f.a.createElement("figure",{className:"pre-loader-img"},f.a.createElement("img",{src:Me.a,alt:""})),f.a.createElement("h6",{className:"pre-loader-txt"},e.language.share.shareMessage))))}())}return f.a.createElement(g.Fragment,null)},Ze=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(e){var r;return Object(u.a)(this,a),(r=t.call(this,e)).state={modalIsOpen:!1,description:"",shareMessageWithDesign:"",fbShareMessage:""},r.openModal=r.openModal.bind(Object(p.a)(r)),r.closeModal=r.closeModal.bind(Object(p.a)(r)),r.handleChange=r.handleChange.bind(Object(p.a)(r)),r.copyCodeToClipboard=r.copyCodeToClipboard.bind(Object(p.a)(r)),r.copyArea=r.copyArea.bind(Object(p.a)(r)),r}return Object(d.a)(a,[{key:"handleChange",value:function(e){var t=this;this.setState({description:e.target.value},(function(){var e=t.state.description+"\n"+t.props.toolLink+"\n"+t.props.renderDesigns,a=t.state.description;t.setState({shareMessageWithDesign:e,fbShareMessage:a})}))}},{key:"openModal",value:function(){this.setState({modalIsOpen:!0,copySuccess:!1})}},{key:"closeModal",value:function(){this.setState({modalIsOpen:!1,copySuccess:!1}),this.props.modalMethod(!1)}},{key:"copyCodeToClipboard",value:function(){this.copyarea.select(),document.execCommand("copy"),this.setState({copySuccess:!0})}},{key:"copyArea",value:function(e){this.copyarea=e}},{key:"render",value:function(){return f.a.createElement(Ye,{openModal:this.openModal,modalIsOpen:this.props.modalIsOpen,closeModal:this.closeModal,renderDesigns:this.props.renderDesigns,handleChange:this.handleChange,shareMessageWithDesign:this.state.shareMessageWithDesign,description:this.state.description,copyCodeToClipboard:this.copyCodeToClipboard,copyArea:this.copyArea,copySuccess:this.state.copySuccess,language:this.props.language,designLink:this.props.toolLink+"\n"+this.props.renderDesigns,fbShareMessage:this.state.fbShareMessage,toolLink:this.props.toolLink,fbShareUrl:this.props.toolLink+"?img="+this.props.renderDesigns})}}]),a}(f.a.Component),Xe=Object(v.b)((function(e){return{language:e.languageReducer.translation_data.filter((function(t){return t.langCode===e.languageReducer.default_lang}))[0]}}))(Ze),Ke=a(27),$e=a(129),et=a(57),tt=a(71),at=null,rt=function(e){Object(m.a)(r,e);var t=Object(h.a)(r);function r(e){var i;return Object(u.a)(this,r),(i=t.call(this)).profileSelected=function(e){if((at=e).id!==i.props.selectedPrintProfileObj.id)if(P.a.canvas.getCurrentLayerElems().length?1:0)i.setState({profileChageIsOpen:!0});else{i.loadPrintProfile();var t=P.a.canvas.getLayerName(),a=Number(t.split("_")[1]);document.getElementById("Layer_"+a).removeAttribute("filter")}},i.closeModal=function(){i.setState({profileChageIsOpen:!1})},i.loadPrintProfile=function(){i.props.dispatch(D.cb(at.id)).then((function(){i.props.dispatch(D.M()).then((function(){i.props.setLayerData(!0),i.props.getColorPallets(),i.props.dispatch(D.h()).then((function(){i.props.setDefaultFont()}))}))}))},i.changePrintProfile=function(){i.setState({profileChageIsOpen:!1}),i.loadPrintProfile();var e=0,t=P.a.canvas.getCurrentLayerElems(),a=P.a.canvas.team;Object.keys(a).forEach((function(t){e+=a[t]})),e&&t.forEach((function(e){"number"!==e.prefs.subType&&"name"!==e.prefs.subType&&"image"!==e.prefs.subType||(a[e.prefs.name]-=1)})),P.a.canvas.clearCurrentLayer();var r=P.a.canvas.getLayerName(),n=Number(r.split("_")[1]);document.getElementById("Layer_"+n).removeAttribute("filter"),i.props.checkBackgroundElm()},i.onChangeLanguage=function(e){i.props.handleProfileMobile(!1),i.props.dispatch(D.c(e))},i.modalMethod=function(){var e=Object(c.a)(s.a.mark((function e(t){var a,r,n,o,l,c,u,d,p,m,h,g,f,v;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i.props.handleProfileMobile(!1),i.props.backToModuleCallback(),P.a.canvas.getAllStageElems().length?1:0){e.next=7;break}return i.props.showNotification("warning",i.props.language.profile.addDesign),i.setState({modalIsOpen:!1}),e.abrupt("return");case 7:if(t){if(a=i.props.canvasData,r=!1,a.engraveSides&&(r=!!a.engraveSides[i.props.activeSide]&&a.engraveSides[i.props.activeSide]),n=!1,i.props.decoProductId&&(n=!0),i.setState({renderDesigns:""}),o=a.color.findIndex((function(e){return 1===e.isActive})),l=1===a.product_details.is_product_image?a.color&&a.color.length&&-1!==o?"#"===a.color[o].hex_code[0]?a.color[o].hex_code:a.color[o].file_name:"#ffffff":"",c="",c=i.props.productDetails.is_variable_decoration?i.props.productDetails.product_decoration.is_image_overlay?i.props.productDetails.product_decoration.overlay_image:null:i.props.productDetails.sides[i.props.activeSide].image.src,u=!1,i.props.selectedPrintProfileData.sticker&&i.props.selectedPrintProfileData.sticker.is_sticker_enabled&&(u=!0),d="",d=i.props.productDetails.is_variable_decoration?i.props.productDetails.product_decoration.is_image_overlay?i.props.productDetails.product_decoration.overlay_image:"":(null===(p=i.props.productDetails)||void 0===p||null===(m=p.sides[i.props.activeSide])||void 0===m?void 0:m.is_image_overlay)?i.props.productDetails.sides[i.props.activeSide].overlay_image:"",1===i.props.productDetails.is_configurator&&1===i.props.productDetails.is_image_based){for(h={x:0,y:0,height:600,width:600},1,g=[],f=document.getElementById("configurator_image-loader").cloneNode(!0),v=0;v<f.children.length;v++)f.getElementsByTagName("g")[v].setAttribute("transform","translate("+-h.x+","+-h.y+")scale(1,1)"),g.push(f.getElementsByTagName("g")[v].getElementsByTagName("image")[0].href.baseVal);f.getElementsByTagName("g")[0].setAttribute("transform","translate("+-h.x+","+-h.y+")scale(1,1)"),P.a.exportConfiguratorPng({},f.outerHTML,g,"true",(function(e){c=e,l="",P.a.exportFaceData({productUrl:c,productColor:l},r,n,i.captureHandler,u,!1,!1,d)}))}else P.a.exportFaceData({productUrl:c,productColor:l},r,n,i.captureHandler,u,!1,!1,d);i.setState({modalIsOpen:t})}else i.setState({modalIsOpen:t});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),i.captureHandler=function(e){if(!i.isSavingOnProcess){i.isSavingOnProcess=!0;var t=i.props.faceData,a={},r={},o=[],s=new FormData;e.isDesigned=P.a.canvas.getAllStageElems().length?1:0,i.uploadImg(P.a.canvas.getAllStageElems().slice(),function(){var i=this;t[this.props.activeSide]=e,e.isDesigned&&this.props.uploadedImgData[this.props.activeSide]&&this.props.uploadedImgData[this.props.activeSide].forEach((function(e){t[i.props.activeSide].svg=t[i.props.activeSide].svg.replace(e.blobUrl,e.imgUrl)}));var l=setInterval((function(){if(t){if(clearInterval(l),i.props.productDetails.is_variable_decoration)s.append("images[]",t[0].imgObject),o.push({svg:t[0].svg});else for(var c=0;c<i.props.productDetails.sides.length;c++)t[c]&&t[c].isDesigned&&0===i.props.productDetails.is_variable_decoration?(i.props.faceData?o.push({svg:i.props.faceData[c].svg}):o.push({svg:t[c].svg}),s.append("images[]",t[c].imgObject)):o.push({svg:""});r={product_id:i.props.productDetails.product_id,variant_id:i.props.extraDetails.variant_id},a={version:10,product_info:r,sides:o,design_name:i.props.designName};var u=Object(n.a)(t),d=i.props.canvasData;d.product_sides.forEach((function(e,t){u[t]&&u[t].imgObject&&s.append("design_urls[]",u[t].imgObject)})),s.append("customer_id",""),s.append("type","user_designs"),s.append("thumb",100),s.append("data",JSON.stringify(a)),s.append("face_data",JSON.stringify(u)),s.append("layer_data",JSON.stringify(d.layer_data)),tt.a.saveCustomerDesign(s).then((function(t){t.data.status?(i.generateLink(t.data.user_design_id),Ke.s([e],[e.imgObject],"shares").then((function(e){1===e.data.status?i.setState({renderDesigns:e.data.data.images[0].url},(function(){document.getElementById("og-url").content=e.data.data.images[0].url})):(i.props.showNotification("warning",i.props.language.profile.captureError),i.setState({modalIsOpen:!1}))})).catch((function(e){console.log(e),i.props.showNotification("warning",i.props.language.profile.captureError),i.setState({modalIsOpen:!1})}))):t.data.message?i.props.showNotification("danger",t.data.message):i.props.showNotification("danger",i.props.language.main.error),i.isSavingOnProcess=!1})).catch((function(e){console.log("error",e),i.props.showNotification("danger",e)}))}}),50)}.bind(Object(p.a)(i)))}},i.onSaveDesign=function(){var e=new URLSearchParams(window.location.search),t="";if("Shopify"===i.props.canvasData.storeType){t=new URLSearchParams(window.location.search);var a=e.get("customer")?e.get("customer"):t.get("customer");return 0!=a&&a||i.props.showNotification("warning",i.props.language.profile.login),void i.saveDesignWrtCustomerId(a)}0!==i.props.customerData.customerId&&i.props.customerData.customerId?i.props.customerData&&i.props.customerData.customerId?i.saveDesignWrtCustomerId():i.props.dispatch(D.i()).then((function(e){i.saveDesignWrtCustomerId()})):i.setState({isLogInModalOpen:!0})},i.getUrlParameter=function(e){return("Shopify"!==window.storeType&&"Others"!==window.storeType&&"Hosted"!==window.storeType?new URLSearchParams(window.parent.location.search):new URLSearchParams(window.location.search)).get(e)},i.handleBack=function(){i.props.onChangeOrderOption(!1,!0)},i.saveDesignModal=function(){var e=Object(c.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i.setState({saveDesignModal:t,isLogInModalOpen:t});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),i.openMyGallery=function(){i.props.openMyGallery(!0)},i.generateLink=function(e){var t=Y.a.base_path.split("api")[0]+"index.html?&id="+i.props.productDetails.product_id+"&vid="+i.props.extraDetails.variant_id+"&did="+e,r=a(650),n=Object(p.a)(i);r.shorten(t).then((function(e){n.setState({toolLink:e})}),(function(e){console.log(e)}))},i.renderShareModal=function(){if(i.state.modalIsOpen)return f.a.createElement(Xe,{opened:i.state.open,modalIsOpen:i.state.modalIsOpen,modalMethod:i.modalMethod,renderDesigns:i.state.renderDesigns,isElmOnStage:i.props.isElmOnStage,toolLink:i.state.toolLink})},i.renderAuthModal=function(){if(i.state.isLogInModalOpen)return f.a.createElement($e.default,{userAuthSuccess:i.props.userAuthSuccess,isOpen:i.state.isLoginModalOpen,isLogInModalOpen:i.state.isLogInModalOpen,saveDesignModal:i.saveDesignModal})},i.renderProfileWarnModal=function(){if(i.state.profileChageIsOpen)return f.a.createElement(te,{profileChageIsOpen:i.state.profileChageIsOpen,closeModal:i.closeModal,changePrintProfile:i.changePrintProfile})},i.state={productDetails:null,productName:"",productDesc:"",profile:[],sides:[],sideIndex:0,error:null,loading:!1,modalIsOpen:!1,profileChageIsOpen:!1,renderDesigns:"",imageLoaded:!1,isLoginModalOpen:e.isLoginModalOpen,polling:{url:"http://imprintnext.io"},customerId:0,toolLink:""},window.registerPrintProfileComponent=Object(p.a)(i),i.galleryInfo={name:"",page:"1",order:"desc",perpage:"40",category:"",customerId:""},i.isSavingOnProcess=!1,i}return Object(d.a)(r,[{key:"componentDidMount",value:function(){var e=this,t=new URLSearchParams(window.location.search),a="";this.storeType=Object(oe.d)(),this.props.dispatch(Object(ie.Gb)(this.storeType)),window.storeType=this.storeType,a="Shopify"!==this.storeType&&"Others"!==this.storeType&&"Hosted"!==this.storeType?new URLSearchParams(window.parent.location.search):new URLSearchParams(window.location.search),this.isTemplate=this.getUrlParameter("temp"),this.isQuot=t.get("quot")?t.get("quot"):a.get("quot"),this.props.dispatch(D.i()).then((function(){e.setState({customerId:e.props.customerData.customerId})})),this.isPredeco=!!this.getUrlParameter("dpid"),this.isCartEdit=!!this.getUrlParameter("cart_item_id")}},{key:"getCustomerId",value:function(e,t){console.log("getCustomerId",e)}},{key:"saveDesignWrtCustomerId",value:function(e){var t=P.a.canvas.getAllStageElems().length?1:0;e>0&&1===t?this.props.saveForExistingCustomer(e):this.props.customerData&&this.props.customerData.customerId&&1===t?this.props.saveForExistingCustomer(this.props.customerData.customerId):(1===t||this.props.showNotification("warning",this.props.language.profile.designError),this.props.showCanvasLoader(!1)),this.props.dispatch(Object(et.m)())}},{key:"onImageLoaded",value:function(e){var t,a;this.setState({imageLoaded:!1}),e.target.src=(null===(t=this.props.popoverDetails)||void 0===t||null===(a=t.images)||void 0===a?void 0:a.length)?this.props.popoverDetails.images[0].src:Pe.a,this.setState({imageLoaded:!0})}},{key:"uploadImg",value:function(e,t){var a=this,r=[],n=[],i=[],o=[],s=[];e.forEach((function(e){"image"===e.prefs.type&&"svg"!==e.prefs.imgType&&r.push(e.prefs.updatedFile),e.prefs.originalImageUrl||"image"!==e.prefs.type||"svg"===e.prefs.imgType||""===e.prefs.updatedFile||0===Object.keys(e.prefs.updatedBlob).length&&e.prefs.updatedBlob.constructor===Object||(n.push(e.prefs.updatedBlob),i.push(e.prefs.updatedFile),o.push(e.prefs.imgExtension),s.push(e.prefs.uploadedImg))})),n.length&&this.props.dispatch(D.ib(this.props.activeSide,n,i,r,o,1,s)).then((function(e){"error"===e?(t&&a.props.showCanvasLoader(!1),a.props.showNotification("danger",a.props.language.canvas.imageUploadError)):t&&t()})),0===i.length&&t&&t()}},{key:"render",value:function(){var e=this.props,t=e.loading,a=e.language,r=e.langList,n=e.productName,i=e.defaultLang,o=e.isMultilanguage,s=e.onProductChange,l=e.productDetails,c=e.popoverDetails,u=e.isProfileMobile,d=e.handleProfileMobile,p=e.isElmOnStage,m=e.isOrderOptionsShow,h=e.defaultLangObj;return f.a.createElement(f.a.Fragment,null,f.a.createElement(De,{productName:n,printProfiles:this.props.printProfiles,loading:t,openTemplatePopup:this.openTemplatePopup,onChangeLanguage:this.onChangeLanguage,productDetails:l,changeProduct:this.changeProduct,onProductChange:s,selectedProfile:this.props.selectedPrintProfileObj,profileSelected:this.profileSelected,defaultLang:i,langList:r,language:a,multilanguage:o,modalMethod:this.modalMethod,popoverDetails:c,onSaveDesign:this.onSaveDesign,isTemplate:this.isTemplate,isProfileMobile:u,handleProfileMobile:d,isElmOnStage:p,imageLoaded:this.state.imageLoaded,onImageLoaded:this.onImageLoaded.bind(this),isOrderOptionsShow:m,handleBack:this.handleBack,defaultLangObj:h,settings:this.props.globalSettings,polling:this.state.polling,selectedPrintProfileData:this.props.selectedPrintProfileData,isMobileView:this.props.isMobileView,isOrderPlaced:this.props.isOrderPlaced,isQuot:this.isQuot,isTeamJerseyData:this.props.isTeamJerseyData,licenceAddOns:this.props.licenceAddOns,openMyGallery:this.openMyGallery,customerId:this.state.customerId,storeType:this.props.canvasData.storeType,decoProductId:this.props.decoProductId,isPredeco:this.isPredeco,isKioskFeature:this.props.isKioskFeature,isCartEdit:this.isCartEdit}),this.renderShareModal(),this.renderAuthModal(),this.renderProfileWarnModal())}}]),r}(f.a.Component),nt=Object(v.b)((function(e){return{defaultLang:e.languageReducer.default_lang,langList:e.languageReducer.lang_list,language:e.languageReducer.translation_data.filter((function(t){return t.langCode===e.languageReducer.default_lang}))[0],isMultilanguage:e.languageReducer.is_multilanguage,printProfiles:e.printProfileReducer.active_print_profile_list,printProfileData:e.printProfileReducer.print_profile_data,selectedPrintProfileObj:e.printProfileReducer.active_print_profile_list.filter((function(t){return t.id===e.printProfileReducer.selected_print_profile}))[0],selectedPrintProfileData:e.printProfileReducer.print_profile_data.filter((function(t){return t.id===e.printProfileReducer.selected_print_profile}))[0],faceData:e.productCanvasReducer.faceData,activeSide:e.productCanvasReducer.active_product_side,allPrintProfiles:e.printProfileReducer.print_profile_list,customerData:e.customerReducer?e.customerReducer.items:0,layerData:e.productCanvasReducer.layer_data,canvasData:e.productCanvasReducer,defaultLangObj:e.languageReducer.default_lang_obj,globalSettings:e.globalSettingReducer.global_settings_data,licenceAddOns:e.productCanvasReducer.licenceAddOns,extraDetails:e.productCanvasReducer.product_extra_details,uploadedImgData:e.ImageReducer.sides}}))(rt),it=a(61),ot=function(e){return e.modalIsOpen?f.a.createElement(X.a,{id:"clear-popup",isOpen:e.modalIsOpen,centered:!0,style:{maxWidth:"400px"},modalClassName:"custom"},e.language&&f.a.createElement(K.a,null,f.a.createElement("h6",{className:"modal-text-title"},e.language.main.notCustomizableProduct),f.a.createElement("h6",{className:"modal-text-title",style:{color:"red"}},"Error code: #",e.errCode),f.a.createElement("div",{className:"modal-btn-group"},f.a.createElement("button",{className:"btn btn-sm btn-success",onClick:function(){e.onProductChange(e.productDetails.product_id),e.closeModal()}},e.language.main.selectAnother)))):f.a.createElement(g.Fragment,null)},st=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(e){var r;return Object(u.a)(this,a),(r=t.call(this)).state={},r}return Object(d.a)(a,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return f.a.createElement(ot,{modalIsOpen:this.props.modalIsOpen,closeModal:this.props.closeModal,onProductChange:this.props.onProductChange,language:this.props.language,productDetails:this.props.productDetails,errCode:this.props.errCode})}}]),a}(f.a.Component),lt=Object(v.b)((function(e){return{language:e.languageReducer.translation_data.filter((function(t){return t.langCode===e.languageReducer.default_lang}))[0]}}))(st),ct=a(193),ut=function(e){return f.a.createElement(X.a,{id:"save-design-popup",isOpen:e.modalIsOpen,toggle:e.closeModal,centered:!0,style:{maxWidth:"400px"},modalClassName:"custom"},f.a.createElement(K.a,null,f.a.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",onClick:e.closeModal},f.a.createElement("span",{"aria-hidden":"true"},"\xd7")),f.a.createElement("div",{className:"form-group"},f.a.createElement("label",{className:"modal-text-title"},e.language.canvas.designName),f.a.createElement("input",{type:"text",onChange:function(t){return e.setDesignName(t)},value:e.designName,className:"form-control form-control-lg"})),f.a.createElement("div",{className:"modal-btn-group"},e.designId?e.designName?f.a.createElement("div",null,f.a.createElement("button",{className:"btn btn-sm btn-success",onClick:function(){return e.updateDesign()}},e.language.canvas.update),f.a.createElement("button",{className:"btn btn-sm btn-outline-dark",onClick:function(){return e.saveNewDesign()}},e.language.canvas.saveAsNew)):f.a.createElement("div",null,f.a.createElement("button",{className:"btn btn-sm btn-success",style:{cursor:"not-allowed"}},e.language.canvas.update),f.a.createElement("button",{className:"btn btn-sm btn-outline-dark",style:{cursor:"not-allowed"}},e.language.canvas.saveAsNew)):e.designName?f.a.createElement("button",{className:"btn btn-sm btn-outline-dark",onClick:function(){return e.saveNewDesign()}},e.language.canvas.save):f.a.createElement("button",{className:"btn btn-sm btn-outline-dark",style:{cursor:"not-allowed"}},e.language.canvas.save))))},dt=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(e){var r;return Object(u.a)(this,a),(r=t.call(this)).state={},r.saveNewDesign=r.saveNewDesign.bind(Object(p.a)(r)),r.updateDesign=r.updateDesign.bind(Object(p.a)(r)),r.setDesignName=r.setDesignName.bind(Object(p.a)(r)),r}return Object(d.a)(a,[{key:"componentDidMount",value:function(){}},{key:"saveNewDesign",value:function(e){this.props.saveDesign(),this.setState({designName:""})}},{key:"updateDesign",value:function(e){this.props.saveDesign("update")}},{key:"setDesignName",value:function(e){this.props.setDesignName(e.target.value)}},{key:"render",value:function(){return f.a.createElement(ut,{modalIsOpen:this.props.modalIsOpen,closeModal:this.props.closeModal,clearAll:this.props.clearAll,language:this.props.language,saveNewDesign:this.saveNewDesign,updateDesign:this.updateDesign,saveDesign:this.props.saveDesign,designId:this.props.designId,designName:this.props.designName,setDesignName:this.setDesignName})}}]),a}(f.a.Component),pt=Object(v.b)((function(e){return{language:e.languageReducer.translation_data.filter((function(t){return t.langCode===e.languageReducer.default_lang}))[0]}}))(dt),mt=a(62),ht=a(58),gt={name:"grid",init:function(e){return Object(c.a)(s.a.mark((function t(){var a,r,n,i,o,l,c,u,d,p,m,h,g,f,v,b,A,y,_,E;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return E=function(){g&&_(l.getZoom()),a("#canvasGrid").toggle(g),a("#view_grid").toggleClass("push_button_pressed tool_button")},_=function(e){var t=m[o.curConfig.baseUnit]*e,a=100/t,r=1;h.some((function(e){return r=e,a<=e}));var n=r*t;d.width=n,d.height=n;var i=d.getContext("2d"),s=n/10;i.globalAlpha=.2,i.strokeStyle=o.curConfig.gridColor;for(var c=1;c<10;c++){var u=Math.round(s*c)+.5;i.moveTo(u,n),i.lineTo(u,0),i.moveTo(n,u),i.lineTo(0,u)}i.stroke(),i.beginPath(),i.globalAlpha=.5,i.moveTo(.5,n),i.lineTo(.5,0),i.moveTo(n,.5),i.lineTo(0,.5),i.stroke();A.setAttribute("width",n),A.setAttribute("height",n),A.parentNode.setAttribute("width",n),A.parentNode.setAttribute("height",n),l.setHref(A,"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAYAAABw4pVUAAAB8UlEQVR4Xu3c0U0DMRCE4UkZlMAzDdIGVEMDPFMCbSBQFAT44hVnyb7oi5Q36yKtbzz7z17ulOTl/E3nc5fkvbcoiXXtIpXqckryeP72av2Q5LW3KIl17SKV6mJDtu+wUgFH34A2xIZcKjDlDhx9R4++HoVQCIVca4wohEIohEJ+VmDpZuLzyHpK8lwAvvskb9b9qcDQuvAQHsJDeMjBPES4uCMMROqLnfk2xIYw4U6rP5RrtL2LKc6GLLghSL29KUMJPEnpehSyoEJwCA75qsDQ7uRWrufIcmThGuGicNETjg0VlDyTh/AQHtLzEKSO1HHIlkp4CA/hIT0PkWXJsngID/muQAnQZoWVTJ2pM3WmfrBwEakjdV2WLkuXdc26KIRCKIRCflWgBKTAEBgCQ2B4MDAUvy8WvyN1pI5DcAgOwSE45AZe0gkMgSEwBIbA0N8RGioQLm4cDaXCzHwMCKkjdaSO1JE6UkfqSL2pgqW7mFndU/V3RSeiE9GJ6ER0IjrZE50gdaSO1JE6UkfqSB2pI/UqgVfXIXWkjtSROlJH6ki9+G716jvYZ61j6kydqTN1ps7U95i6/xi2z5ApzwYwdabO1Jk6U2fqe0zdTN1M3UzdTN1M3UzdTN1M3Uy9OiuvrkPqSB2pI3WkjtT/S+of3ODq3Q443ZAAAAAASUVORK5CYII=")},a=e.$,r=e.NS,n=e.getTypeMap,i=e.editor,l=(o=i).canvas,c=document.getElementById("svgcanvas").ownerDocument,u=l.assignAttributes,d=document.createElement("canvas"),p=a("#canvasBackground"),m=n(),h=[.01,.1,1,10,100,1e3],g=!0,"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMDAuNSIgaGVpZ2h0PSIxMDAuNSIgdmlld0JveD0iMCAwIDEwMC41IDEwMC41Ij4NCiAgPGcgaWQ9Ikdyb3VwXzEiIGRhdGEtbmFtZT0iR3JvdXAgMSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTg4NSAtNjg0KSI+DQogICAgPGxpbmUgaWQ9IkxpbmVfMSIgZGF0YS1uYW1lPSJMaW5lIDEiIHkyPSIxMDAiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDg4NS41IDY4NC41KSIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjNzA3MDcwIiBzdHJva2Utd2lkdGg9IjEiLz4NCiAgICA8bGluZSBpZD0iTGluZV8yIiBkYXRhLW5hbWU9IkxpbmUgMiIgeTI9IjEwMCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoODk1LjUgNjg0LjUpIiBmaWxsPSJub25lIiBzdHJva2U9IiM3MDcwNzAiIHN0cm9rZS13aWR0aD0iMSIgb3BhY2l0eT0iMC41Ii8+DQogICAgPGxpbmUgaWQ9IkxpbmVfMyIgZGF0YS1uYW1lPSJMaW5lIDMiIHkyPSIxMDAiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDkwNS41IDY4NC41KSIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjNzA3MDcwIiBzdHJva2Utd2lkdGg9IjEiIG9wYWNpdHk9IjAuNSIvPg0KICAgIDxsaW5lIGlkPSJMaW5lXzQiIGRhdGEtbmFtZT0iTGluZSA0IiB5Mj0iMTAwIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg5MTUuNSA2ODQuNSkiIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzcwNzA3MCIgc3Ryb2tlLXdpZHRoPSIxIiBvcGFjaXR5PSIwLjUiLz4NCiAgICA8bGluZSBpZD0iTGluZV81IiBkYXRhLW5hbWU9IkxpbmUgNSIgeTI9IjEwMCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoOTI1LjUgNjg0LjUpIiBmaWxsPSJub25lIiBzdHJva2U9IiM3MDcwNzAiIHN0cm9rZS13aWR0aD0iMSIgb3BhY2l0eT0iMC41Ii8+DQogICAgPGxpbmUgaWQ9IkxpbmVfNiIgZGF0YS1uYW1lPSJMaW5lIDYiIHkyPSIxMDAiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDkzNS41IDY4NC41KSIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjNzA3MDcwIiBzdHJva2Utd2lkdGg9IjEiIG9wYWNpdHk9IjAuNSIvPg0KICAgIDxsaW5lIGlkPSJMaW5lXzciIGRhdGEtbmFtZT0iTGluZSA3IiB5Mj0iMTAwIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg5NDUuNSA2ODQuNSkiIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzcwNzA3MCIgc3Ryb2tlLXdpZHRoPSIxIiBvcGFjaXR5PSIwLjUiLz4NCiAgICA8bGluZSBpZD0iTGluZV84IiBkYXRhLW5hbWU9IkxpbmUgOCIgeTI9IjEwMCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoOTU1LjUgNjg0LjUpIiBmaWxsPSJub25lIiBzdHJva2U9IiM3MDcwNzAiIHN0cm9rZS13aWR0aD0iMSIgb3BhY2l0eT0iMC41Ii8+DQogICAgPGxpbmUgaWQ9IkxpbmVfOSIgZGF0YS1uYW1lPSJMaW5lIDkiIHkyPSIxMDAiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDk2NS41IDY4NC41KSIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjNzA3MDcwIiBzdHJva2Utd2lkdGg9IjEiIG9wYWNpdHk9IjAuNSIvPg0KICAgIDxsaW5lIGlkPSJMaW5lXzEwIiBkYXRhLW5hbWU9IkxpbmUgMTAiIHkyPSIxMDAiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDk3NS41IDY4NC41KSIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjNzA3MDcwIiBzdHJva2Utd2lkdGg9IjEiIG9wYWNpdHk9IjAuNSIvPg0KICAgIDxsaW5lIGlkPSJMaW5lXzExIiBkYXRhLW5hbWU9IkxpbmUgMTEiIHgyPSIxMDAiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDg4NS41IDY4NC41KSIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjNzA3MDcwIiBzdHJva2Utd2lkdGg9IjEiLz4NCiAgICA8bGluZSBpZD0iTGluZV8xMiIgZGF0YS1uYW1lPSJMaW5lIDEyIiB5MT0iMTAwIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg5ODUuNSA2OTQuNSkgcm90YXRlKDkwKSIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjNzA3MDcwIiBzdHJva2Utd2lkdGg9IjEiIG9wYWNpdHk9IjAuNSIvPg0KICAgIDxsaW5lIGlkPSJMaW5lXzEzIiBkYXRhLW5hbWU9IkxpbmUgMTMiIHkxPSIxMDAiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDk4NS41IDcwNC41KSByb3RhdGUoOTApIiBmaWxsPSJub25lIiBzdHJva2U9IiM3MDcwNzAiIHN0cm9rZS13aWR0aD0iMSIgb3BhY2l0eT0iMC41Ii8+DQogICAgPGxpbmUgaWQ9IkxpbmVfMTQiIGRhdGEtbmFtZT0iTGluZSAxNCIgeTE9IjEwMCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoOTg1LjUgNzE0LjUpIHJvdGF0ZSg5MCkiIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzcwNzA3MCIgc3Ryb2tlLXdpZHRoPSIxIiBvcGFjaXR5PSIwLjUiLz4NCiAgICA8bGluZSBpZD0iTGluZV8xNSIgZGF0YS1uYW1lPSJMaW5lIDE1IiB5MT0iMTAwIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg5ODUuNSA3MjQuNSkgcm90YXRlKDkwKSIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjNzA3MDcwIiBzdHJva2Utd2lkdGg9IjEiIG9wYWNpdHk9IjAuNSIvPg0KICAgIDxsaW5lIGlkPSJMaW5lXzE2IiBkYXRhLW5hbWU9IkxpbmUgMTYiIHkxPSIxMDAiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDk4NS41IDczNC41KSByb3RhdGUoOTApIiBmaWxsPSJub25lIiBzdHJva2U9IiM3MDcwNzAiIHN0cm9rZS13aWR0aD0iMSIgb3BhY2l0eT0iMC41Ii8+DQogICAgPGxpbmUgaWQ9IkxpbmVfMTciIGRhdGEtbmFtZT0iTGluZSAxNyIgeTE9IjEwMCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoOTg1LjUgNzQ0LjUpIHJvdGF0ZSg5MCkiIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzcwNzA3MCIgc3Ryb2tlLXdpZHRoPSIxIiBvcGFjaXR5PSIwLjUiLz4NCiAgICA8bGluZSBpZD0iTGluZV8xOCIgZGF0YS1uYW1lPSJMaW5lIDE4IiB5MT0iMTAwIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg5ODUuNSA3NTQuNSkgcm90YXRlKDkwKSIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjNzA3MDcwIiBzdHJva2Utd2lkdGg9IjEiIG9wYWNpdHk9IjAuNSIvPg0KICAgIDxsaW5lIGlkPSJMaW5lXzE5IiBkYXRhLW5hbWU9IkxpbmUgMTkiIHkxPSIxMDAiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDk4NS41IDc2NC41KSByb3RhdGUoOTApIiBmaWxsPSJub25lIiBzdHJva2U9IiM3MDcwNzAiIHN0cm9rZS13aWR0aD0iMSIgb3BhY2l0eT0iMC41Ii8+DQogICAgPGxpbmUgaWQ9IkxpbmVfMjAiIGRhdGEtbmFtZT0iTGluZSAyMCIgeTE9IjEwMCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoOTg1LjUgNzc0LjUpIHJvdGF0ZSg5MCkiIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzcwNzA3MCIgc3Ryb2tlLXdpZHRoPSIxIiBvcGFjaXR5PSIwLjUiLz4NCiAgPC9nPg0KPC9zdmc+DQo=",a(d).hide().appendTo("body"),f=c.createElementNS(r.SVG,"svg"),u(f,{id:"canvasGrid",width:"100%",height:"100%",x:1,y:-3,overflow:"visible",display:"none"}),p.append(f),v=c.createElementNS(r.SVG,"defs"),b=c.createElementNS(r.SVG,"pattern"),u(b,{id:"gridpattern",patternUnits:"userSpaceOnUse",x:0,y:0,width:100,height:100}),A=c.createElementNS(r.SVG,"image"),u(A,{x:0,y:0,width:100,height:100,"xlink:href":"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMDAuNSIgaGVpZ2h0PSIxMDAuNSIgdmlld0JveD0iMCAwIDEwMC41IDEwMC41Ij4NCiAgPGcgaWQ9Ikdyb3VwXzEiIGRhdGEtbmFtZT0iR3JvdXAgMSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTg4NSAtNjg0KSI+DQogICAgPGxpbmUgaWQ9IkxpbmVfMSIgZGF0YS1uYW1lPSJMaW5lIDEiIHkyPSIxMDAiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDg4NS41IDY4NC41KSIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjNzA3MDcwIiBzdHJva2Utd2lkdGg9IjEiLz4NCiAgICA8bGluZSBpZD0iTGluZV8yIiBkYXRhLW5hbWU9IkxpbmUgMiIgeTI9IjEwMCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoODk1LjUgNjg0LjUpIiBmaWxsPSJub25lIiBzdHJva2U9IiM3MDcwNzAiIHN0cm9rZS13aWR0aD0iMSIgb3BhY2l0eT0iMC41Ii8+DQogICAgPGxpbmUgaWQ9IkxpbmVfMyIgZGF0YS1uYW1lPSJMaW5lIDMiIHkyPSIxMDAiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDkwNS41IDY4NC41KSIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjNzA3MDcwIiBzdHJva2Utd2lkdGg9IjEiIG9wYWNpdHk9IjAuNSIvPg0KICAgIDxsaW5lIGlkPSJMaW5lXzQiIGRhdGEtbmFtZT0iTGluZSA0IiB5Mj0iMTAwIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg5MTUuNSA2ODQuNSkiIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzcwNzA3MCIgc3Ryb2tlLXdpZHRoPSIxIiBvcGFjaXR5PSIwLjUiLz4NCiAgICA8bGluZSBpZD0iTGluZV81IiBkYXRhLW5hbWU9IkxpbmUgNSIgeTI9IjEwMCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoOTI1LjUgNjg0LjUpIiBmaWxsPSJub25lIiBzdHJva2U9IiM3MDcwNzAiIHN0cm9rZS13aWR0aD0iMSIgb3BhY2l0eT0iMC41Ii8+DQogICAgPGxpbmUgaWQ9IkxpbmVfNiIgZGF0YS1uYW1lPSJMaW5lIDYiIHkyPSIxMDAiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDkzNS41IDY4NC41KSIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjNzA3MDcwIiBzdHJva2Utd2lkdGg9IjEiIG9wYWNpdHk9IjAuNSIvPg0KICAgIDxsaW5lIGlkPSJMaW5lXzciIGRhdGEtbmFtZT0iTGluZSA3IiB5Mj0iMTAwIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg5NDUuNSA2ODQuNSkiIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzcwNzA3MCIgc3Ryb2tlLXdpZHRoPSIxIiBvcGFjaXR5PSIwLjUiLz4NCiAgICA8bGluZSBpZD0iTGluZV84IiBkYXRhLW5hbWU9IkxpbmUgOCIgeTI9IjEwMCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoOTU1LjUgNjg0LjUpIiBmaWxsPSJub25lIiBzdHJva2U9IiM3MDcwNzAiIHN0cm9rZS13aWR0aD0iMSIgb3BhY2l0eT0iMC41Ii8+DQogICAgPGxpbmUgaWQ9IkxpbmVfOSIgZGF0YS1uYW1lPSJMaW5lIDkiIHkyPSIxMDAiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDk2NS41IDY4NC41KSIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjNzA3MDcwIiBzdHJva2Utd2lkdGg9IjEiIG9wYWNpdHk9IjAuNSIvPg0KICAgIDxsaW5lIGlkPSJMaW5lXzEwIiBkYXRhLW5hbWU9IkxpbmUgMTAiIHkyPSIxMDAiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDk3NS41IDY4NC41KSIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjNzA3MDcwIiBzdHJva2Utd2lkdGg9IjEiIG9wYWNpdHk9IjAuNSIvPg0KICAgIDxsaW5lIGlkPSJMaW5lXzExIiBkYXRhLW5hbWU9IkxpbmUgMTEiIHgyPSIxMDAiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDg4NS41IDY4NC41KSIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjNzA3MDcwIiBzdHJva2Utd2lkdGg9IjEiLz4NCiAgICA8bGluZSBpZD0iTGluZV8xMiIgZGF0YS1uYW1lPSJMaW5lIDEyIiB5MT0iMTAwIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg5ODUuNSA2OTQuNSkgcm90YXRlKDkwKSIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjNzA3MDcwIiBzdHJva2Utd2lkdGg9IjEiIG9wYWNpdHk9IjAuNSIvPg0KICAgIDxsaW5lIGlkPSJMaW5lXzEzIiBkYXRhLW5hbWU9IkxpbmUgMTMiIHkxPSIxMDAiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDk4NS41IDcwNC41KSByb3RhdGUoOTApIiBmaWxsPSJub25lIiBzdHJva2U9IiM3MDcwNzAiIHN0cm9rZS13aWR0aD0iMSIgb3BhY2l0eT0iMC41Ii8+DQogICAgPGxpbmUgaWQ9IkxpbmVfMTQiIGRhdGEtbmFtZT0iTGluZSAxNCIgeTE9IjEwMCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoOTg1LjUgNzE0LjUpIHJvdGF0ZSg5MCkiIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzcwNzA3MCIgc3Ryb2tlLXdpZHRoPSIxIiBvcGFjaXR5PSIwLjUiLz4NCiAgICA8bGluZSBpZD0iTGluZV8xNSIgZGF0YS1uYW1lPSJMaW5lIDE1IiB5MT0iMTAwIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg5ODUuNSA3MjQuNSkgcm90YXRlKDkwKSIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjNzA3MDcwIiBzdHJva2Utd2lkdGg9IjEiIG9wYWNpdHk9IjAuNSIvPg0KICAgIDxsaW5lIGlkPSJMaW5lXzE2IiBkYXRhLW5hbWU9IkxpbmUgMTYiIHkxPSIxMDAiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDk4NS41IDczNC41KSByb3RhdGUoOTApIiBmaWxsPSJub25lIiBzdHJva2U9IiM3MDcwNzAiIHN0cm9rZS13aWR0aD0iMSIgb3BhY2l0eT0iMC41Ii8+DQogICAgPGxpbmUgaWQ9IkxpbmVfMTciIGRhdGEtbmFtZT0iTGluZSAxNyIgeTE9IjEwMCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoOTg1LjUgNzQ0LjUpIHJvdGF0ZSg5MCkiIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzcwNzA3MCIgc3Ryb2tlLXdpZHRoPSIxIiBvcGFjaXR5PSIwLjUiLz4NCiAgICA8bGluZSBpZD0iTGluZV8xOCIgZGF0YS1uYW1lPSJMaW5lIDE4IiB5MT0iMTAwIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg5ODUuNSA3NTQuNSkgcm90YXRlKDkwKSIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjNzA3MDcwIiBzdHJva2Utd2lkdGg9IjEiIG9wYWNpdHk9IjAuNSIvPg0KICAgIDxsaW5lIGlkPSJMaW5lXzE5IiBkYXRhLW5hbWU9IkxpbmUgMTkiIHkxPSIxMDAiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDk4NS41IDc2NC41KSByb3RhdGUoOTApIiBmaWxsPSJub25lIiBzdHJva2U9IiM3MDcwNzAiIHN0cm9rZS13aWR0aD0iMSIgb3BhY2l0eT0iMC41Ii8+DQogICAgPGxpbmUgaWQ9IkxpbmVfMjAiIGRhdGEtbmFtZT0iTGluZSAyMCIgeTE9IjEwMCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoOTg1LjUgNzc0LjUpIHJvdGF0ZSg5MCkiIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzcwNzA3MCIgc3Ryb2tlLXdpZHRoPSIxIiBvcGFjaXR5PSIwLjUiLz4NCiAgPC9nPg0KPC9zdmc+DQo="}),b.append(A),v.append(b),a("#canvasGrid").append(v),y=c.createElementNS(r.SVG,"rect"),u(y,{width:"100%",height:"100%",x:0,y:0,"stroke-width":0,stroke:"none",fill:"url(#gridpattern)",style:"pointer-events: none; display:visible;"}),a("#canvasGrid").append(y),[{id:"view_grid",icon:o.curConfig.extIconsPath+"grid.png",type:"context",panel:"editor_panel",events:{click:function(){o.curConfig.showGrid=g=!g,E()}}}],t.abrupt("return",{svgicons:o.curConfig.extIconsPath+"grid-icon.xml",zoomChanged:function(e){g&&_(e)},callback:function(){g&&E()}});case 25:case"end":return t.stop()}}),t)})))()}},ft=a(40),vt=a(90),bt=a(39),At=a(96);a.d(t,"a",(function(){return yt}));var yt=null,_t=[],Et={l:0,d:0,w:0,t:0,p:0},St=[],Ct=[],xt={},wt=null,kt=-1,It=[],Nt=!1,Ot=null,Pt=[],Dt=function(e){Object(m.a)(o,e);var t=Object(h.a)(o);function o(e){var d;return Object(u.a)(this,o),(d=t.call(this,e)).loadVariantOnSelect=function(e,t,a,r){var n=0;_t.forEach((function(e,t){r.toString().toLowerCase()===e.name.toString().toLowerCase()&&(n=t)})),d.onProductColorSelect(e,t,a,n,!0)},d.addAnotherColorCheckout=function(e,t){d.addAnotherColor(e,t,!0)},d.callProductDetailsApi=function(){tt.a.getProductDetails(d.state.productId,d.state.variantId,d.props.option_id).then((function(e){e.data.status?d.setProductDetailsData(e.data.data):(console.log("error",e.data),d.setState({loading:!1,error:e.data,sides:[]}))})).catch((function(e){console.log("error",e),d.setState({loading:!1,error:e,sides:[]})}))},d.setProductDetailsData=function(){var e=Object(c.a)(s.a.mark((function e(t){var r,n,i,o,c,u,p,m,h,g,f,v,b,A,y,_,E,S,C;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r={},n=!1,i={},o="",c={},u=!1,1===t.is_svg_configurator&&(t.is_configurator=1,t.is_image_based=0,d.is_svg_configurator=1,d.is_image_based=0),e.prev=2,!(t instanceof Array&&0===t.length)){e.next=7;break}return d.setState({isNoPrintMethod:!0,errCode:100,productDetails:{product_id:d.state.productId}}),d.props.dispatch(D.E(!0)),e.abrupt("return");case 7:if(t.is_variable_decoration&&(d.setState({isGrid:!0}),gt in P.a.canvas.extensions||P.a.addExtension(gt,(function(){gt.init({$:Ce.a,NS:ge.a,getTypeMap:ft.d,editor:P.a})}),{$:Ce.a})),!t.print_profiles||0!==t.print_profiles.length){e.next=12;break}return d.setState({isNoPrintMethod:!0,errCode:101,productDetails:{product_id:d.state.productId}}),d.props.dispatch(D.E(!0)),e.abrupt("return");case 12:if("inch"===t.print_unit.toLowerCase()||t.is_variable_decoration){e.next=15;break}return e.next=15,d.convertPrintAreaUnit(t.sides,t.print_unit);case 15:if(d.props.changeProdAddTemp(),d.state.isProductChanged||(1===d.is_svg_configurator&&0===d.is_image_based?p=setInterval((function(){d.props.configuratorSideList&&d.props.configuratorSideList.configuratorSvgCartData&&d.props.configuratorSideList.configuratorSvgCartData.sides&&d.props.configuratorSideList.configuratorLoadStatus&&(d.loadDecoratedTemp(),clearInterval(p))}),50):d.loadDecoratedTemp()),d.loadUserDesgn(),d.props.editTmplate(),(i=d.props.globalSettings.store)&&t.attributes?(Object.keys(t.attributes).forEach((function(e){i.color.toString().toLowerCase()===e.toString().toLowerCase()&&(c=t.attributes[e],o=e)})),o||(m=Object.keys(t.attributes)).length&&(h=t.is_variable_decoration?m.filter((function(e){return e.toString().toLowerCase()!==i.size.toString().toLowerCase()})):m).length&&(g=h[0],c=t.attributes[g],o=g,d.props.dispatch(D.B(!1)))):d.showNotification("danger",d.props.language.canvas.colorError),d.setState({selectedColor:c}),r.isSafeMark=t.is_safe_zone,r.isCropMark=t.is_crop_mark,r.safeVal=t.safe_value,r.cropVal=t.crop_value,n=r.isSafeMark||r.isCropMark,f=[],v=[],t.sides&&(b=[],t.sides.forEach((function(e,t){1===e.is_visible&&b.push(t),f.push(0),v.push(!1)})),t.sides=t.sides.filter((function(e){return 1===e.is_visible})),t.visibleSides=b),d.canvasRef&&d.canvasRef.resetConfiguratorElem(),d.props.dispatch(D.F(v)),1===t.is_configurator&&Object.keys(t.configurator_image).length>0?(d.isConfiguratorEnable=!0,d.props.dispatch(Object(ht.q)()).then((function(){})),t.sides[0].image.src=t.configurator_image.src,t.sides[0].image.thumbnail=t.configurator_image.thumbnail,1!==t.is_svg_configurator&&(t.is_image_based=1),d.props.dispatch(Object(ht.q)()).then((function(){})),1===t.is_image_based&&(t.sides[0].image.src=t.configurator_image.src,t.sides[0].image.thumbnail=t.configurator_image.thumbnail)):d.isConfiguratorEnable=!1,A=d.props.licenceAddOns.includes("3D"),t.is_3d_preview&&1===t.is_3d_preview&&A){try{(y=JSON.parse(t["3d_object"]))&&y.multiBoundaryCapture?d.setState({IsMultiBoundaryAssigned:!0}):d.setState({IsMultiBoundaryAssigned:!1})}catch(s){d.setState({IsMultiBoundaryAssigned:!1})}d.togglePreviewTab("2d"),d.objLoader=new ct.a,(_=Object(l.a)({},d.state.mesh3DObject)).is3dEnable=1,d.setState({mesh3DObject:_,objectOnStage:f}),d.objLoader.load(t["3d_object_file"],(function(e){_.mesh=e,d.setState({mesh3DObject:_,IsMultiBoundaryAssigned:!1})}),(function(e){_.loadingValue=parseInt(e.loaded/e.total*100),d.setState({mesh3DObject:_})}),(function(e){console.log(e,"An error happened")}))}else d.togglePreviewTab("2d"),(E=Object(l.a)({},d.state.mesh3DObject)).mesh="",E.is3dEnable=0,E.loadingValue=0,d.setState({mesh3DObject:E});t.is_variable_decoration&&("Feet"===t.print_unit?(t.product_decoration.print_area.width=(t.product_decoration.print_area.width/12).toFixed(2),t.product_decoration.print_area.height=(t.product_decoration.print_area.height/12).toFixed(2)):"Centimeter"===t.print_unit?(t.product_decoration.print_area.width=(2.54*t.product_decoration.print_area.width).toFixed(2),t.product_decoration.print_area.height=(2.54*t.product_decoration.print_area.height).toFixed(2)):"Millimeter"===t.print_unit?(t.product_decoration.print_area.width=(25.4*t.product_decoration.print_area.width).toFixed(2),t.product_decoration.print_area.height=(25.4*t.product_decoration.print_area.height).toFixed(2)):"Meter"===t.print_unit&&(t.product_decoration.print_area.width=(.0254*t.product_decoration.print_area.width).toFixed(2),t.product_decoration.print_area.height=(.0254*t.product_decoration.print_area.height).toFixed(2)),0===t.product_decoration.print_area.length&&(t.product_decoration.print_area.width="",t.product_decoration.print_area.height="")),d.setState({productDetails:t,loading:!1,sides:t.sides,productName:t.product_name,productDesc:t.product_desc?t.product_desc:"",isProductTemplate:t.is_product_image,isVariableBound:t.is_variable_decoration,isBleed:n,bleed:r}),d.props.dispatch(D.L(JSON.parse(JSON.stringify(t)))).then((function(e){t.is_variable_decoration&&d.setState({sides:e}),d.props.dispatch(Object(it.c)()).then((function(){d.props.dispatch(D.J()).then((function(){d.props.dispatch(D.M()).then((function(){d.props.dispatch(D.h()).then((function(e){if(d.isTemplate&&d.props.dispatch(D.g()),d.getColorPallets(),d.state.sides.length){var r=[];d.state.sides.forEach((function(e){r.push(!1)})),d.props.dispatch(D.w(r)).then((function(){d.props.setEngravePreview(e,0)}))}if(d.loadProductColors(t,c,o),d.getProductPopoverDetails(),t.is_price_rule&&("simple"!==d.props.productCanvasData.product_extra_details.type&&d.props.setGlobalSizeAttr(),d.getProductPriceRuleData()),null===d.props.decoProductId&&d.props.globalSettings&&d.props.globalSettings.default_tab_slug&&""!==d.props.globalSettings.default_tab_slug&&!(1===t.is_configurator&&Object.keys(t.configurator_image).length>0)){if("clipart"===d.props.globalSettings.default_tab_slug)a.e(8).then(a.bind(null,938));else if("text"===d.props.globalSettings.default_tab_slug)Promise.all([a.e(0),a.e(2)]).then(a.bind(null,935));else if("image"===d.props.globalSettings.default_tab_slug)Promise.all([a.e(0),a.e(4),a.e(3)]).then(a.bind(null,937));else if("shape"===d.props.globalSettings.default_tab_slug)Promise.all([a.e(0),a.e(12)]).then(a.bind(null,940));else if("background"===d.props.globalSettings.default_tab_slug)Promise.all([a.e(0),a.e(7)]).then(a.bind(null,944));else if("template"===d.props.globalSettings.default_tab_slug)a.e(13).then(a.bind(null,939));else if("drawing"===d.props.globalSettings.default_tab_slug)Promise.all([a.e(0),a.e(9)]).then(a.bind(null,942));else if("gallery"===d.props.globalSettings.default_tab_slug)a.e(10).then(a.bind(null,936));else if("team"===d.props.globalSettings.default_tab_slug)a.e(5).then(a.bind(null,945));else if("ar"===d.props.globalSettings.default_tab_slug)Promise.all([a.e(1),a.e(6)]).then(a.bind(null,941));else if("qrcode"===d.props.globalSettings.default_tab_slug)Promise.all([a.e(1),a.e(11)]).then(a.bind(null,943));u=!0,d.props.initializeConfigurator(!1),d.props.loadDefaultModule()}d.loadModuleChunks(),1===t.is_configurator&&(Object.keys(t.configurator_image).length>0||1===t.is_svg_configurator)?setTimeout((function(){d.props.initializeConfigurator(!0)})):null!==d.props.decoProductId||u||(d.props.initializeConfigurator(!1),d.props.loadDefaultModule()),d.setDefaultFont(),d.setState({timesProdLoad:d.state.timesProdLoad+1})}))}))}))}))})),e.next=43;break;case 40:e.prev=40,e.t0=e.catch(2),console.log("Error in product details : ",e.t0.message);case 43:try{t.is_variable_decoration?(d.getSizeAttributeDetails(),S=0,"#000","",t.product_decoration.is_border_enable&&"sticker"!==t.decoration_type&&(S=1),d.props.showCanvasLoader(!1),d.props.dispatch(D.u({width:t.product_decoration.print_area.width.toString(),height:t.product_decoration.print_area.height.toString(),prevWidth:t.product_decoration.print_area.width.toString(),prevHeight:t.product_decoration.print_area.height.toString(),minWidth:t.product_decoration.user_defined_dimensions.custom_min_width?t.product_decoration.user_defined_dimensions.custom_min_width.toString():0,minHeight:t.product_decoration.user_defined_dimensions.custom_min_height?t.product_decoration.user_defined_dimensions.custom_min_height.toString():0,maxWidth:t.product_decoration.user_defined_dimensions.custom_max_width?t.product_decoration.user_defined_dimensions.custom_max_width.toString():0,maxHeight:t.product_decoration.user_defined_dimensions.custom_max_height?t.product_decoration.user_defined_dimensions.custom_max_height.toString():0,isAspectRatio:!0,borderWidth:S,borderColor:"#000",minErr:"",maxErr:"",calErr:""})),xt=r,St[0]&&St[0].svg?(P.a.canvas.drawVariableBound(t.product_decoration,xt,{borderWidth:S,borderColor:"#000"},1),P.a.canvas.setSvgString(St[0].svg),P.a.canvas.selectCurrentBoundary("bound_0")):(P.a.canvas.drawVariableBound(t.product_decoration,xt,{borderWidth:S,borderColor:"#000"},1),d.drawPrevStageElem())):d.state.sides&&d.state.sides.length&&(St[0]&&St[0].svg?(P.a.canvas.drawBoundry(d.state.sides[0],d.state.isBleed,d.state.bleed,d.invertedColor),P.a.canvas.setSvgString(St[0].svg),d.state.isBleed&&(C=JSON.parse(d.state.sides[0].decoration_settings[0].dimension),P.a.canvas.drawBleed(C,d.state.bleed)),P.a.canvas.selectCurrentBoundary("bound_0")):(P.a.canvas.drawBoundry(d.state.sides[0],d.state.isBleed,d.state.bleed,d.invertedColor),d.drawPrevStageElem())),P.a.canvas.resizeStage(),setTimeout((function(){P.a.updateRulers()}))}catch(x){console.log("Error in draw bounds : ",x.message)}case 44:case"end":return e.stop()}}),e,null,[[2,40]])})));return function(t){return e.apply(this,arguments)}}(),d.checkSvgConfiguratorSide=function(e){var t=d.state.sides;t.length!==e.sides.length&&(t.length=e.sides.length,d.setState({sides:t}))},d.loadModuleChunks=function(){var e=[];if(d.props.printProfileReducer&&d.props.printProfileReducer.print_profile_data){if(d.props.printProfileReducer.print_profile_data.forEach((function(t){t.feature_data.forEach((function(t){t.is_selected&&void 0===e.find((function(e){return e.slug===t.slug}))&&e.push(t)}))})),e.find((function(e){return"clipart"===e.slug})))a.e(8).then(a.bind(null,938));if(e.find((function(e){return"text"===e.slug})))Promise.all([a.e(0),a.e(2)]).then(a.bind(null,935));if(e.find((function(e){return"image"===e.slug})))Promise.all([a.e(0),a.e(4),a.e(3)]).then(a.bind(null,937));if(e.find((function(e){return"shape"===e.slug})))Promise.all([a.e(0),a.e(12)]).then(a.bind(null,940));if(e.find((function(e){return"background"===e.slug})))Promise.all([a.e(0),a.e(7)]).then(a.bind(null,944));if(e.find((function(e){return"template"===e.slug})))a.e(13).then(a.bind(null,939));if(e.find((function(e){return"drawing"===e.slug})))Promise.all([a.e(0),a.e(9)]).then(a.bind(null,942));if(e.find((function(e){return"gallery"===e.slug})))a.e(10).then(a.bind(null,936));if(e.find((function(e){return"team"===e.slug})))a.e(5).then(a.bind(null,945));if(e.find((function(e){return"ar"===e.slug})))Promise.all([a.e(1),a.e(6)]).then(a.bind(null,941));if(e.find((function(e){return"qrcode"===e.slug})))Promise.all([a.e(1),a.e(11)]).then(a.bind(null,943));if(d.isConfiguratorEnable)a.e(14).then(a.bind(null,946))}else a.e(8).then(a.bind(null,938)),Promise.all([a.e(0),a.e(2)]).then(a.bind(null,935)),Promise.all([a.e(0),a.e(4),a.e(3)]).then(a.bind(null,937)),Promise.all([a.e(0),a.e(12)]).then(a.bind(null,940)),Promise.all([a.e(0),a.e(7)]).then(a.bind(null,944)),a.e(13).then(a.bind(null,939)),Promise.all([a.e(0),a.e(9)]).then(a.bind(null,942)),a.e(10).then(a.bind(null,936)),a.e(5).then(a.bind(null,945)),Promise.all([a.e(1),a.e(6)]).then(a.bind(null,941)),Promise.all([a.e(1),a.e(11)]).then(a.bind(null,943)),a.e(14).then(a.bind(null,946));a.e(15).then(a.bind(null,947)),Promise.resolve().then(a.bind(null,129))},d.drawPrevStageElem=function(){if(d.state.isProductChanged&&wt&&(d.props.productCanvasReducer.prevActivePrintProfile>0&&d.props.productCanvasReducer.prevActivePrintProfile===kt||Y.a.force_retain_design)){var e=P.a.canvas.getLayerStage();Ce()(e).html(wt),setTimeout((function(){Ce()(e).find("g").each((function(){this.id&&P.a.canvas.attributeToProperty(this)})),P.a.canvas.resizeBackground()}))}},d.changeProductColor=function(e,t,a){for(var r=function(t){if(d.state.colors[t].name.toString().toLowerCase()===e.toString().toLowerCase())return d.setState({selectedColor:d.state.colors[t],selectedColorIndex:t},(function(){d.lastColorSelected=d.state.colors[t],d.canvasRef&&d.canvasRef.updateColorInModel()})),"break"},n=0;n<d.state.colors.length;n++){if("break"===r(n))break}!d.state.isProductTemplate&&d.props.productCanvasReducer.color[a]&&d.onProductColorBoxSelect(d.props.productCanvasReducer.color[a].attribute_id,t.variant_id,a)},d.togglePreviewTab=function(e){d.canvasRef&&d.canvasRef.togglePreviewClick(e)},d.preview3DTabStatus=function(e){d.props.preview3DTabStatus(e)},d.onProductColorHover=function(e,t){if(d.state.isProductTemplate)if(t){var a,r=Object(i.a)(d.state.colors);try{for(r.s();!(a=r.n()).done;){var n=a.value;if(n.attribute_id===e){d.setState({selectedColor:n});break}}}catch(l){r.e(l)}finally{r.f()}}else if(d.lastColorSelected)d.setState({selectedColor:d.lastColorSelected});else{var o,s=Object(i.a)(d.state.colors);try{for(s.s();!(o=s.n()).done;){if(o.value.attribute_id===e){d.setState({selectedColor:d.state.colors[0]});break}}}catch(l){s.e(l)}finally{s.f()}}},d.onProductColorSelect=function(e,t,a,r,n){for(var i=function(i){if(d.state.colors[i].attribute_id===e)return a&&(d.colorBoxIndex=r),d.lastColorSelected=d.state.colors[i],_t.forEach((function(e){e.isActive=0})),d.state.colors[i].isActive=1,_t[d.colorBoxIndex]=d.state.colors[i],d.invertColor(d.state.colors[i].hex_code),d.setState({selectedColor:d.state.colors[i],variantId:t||d.state.productId,tempColors:d.state.colors.filter((function(e){return!_t.find((function(t){var a=t.attribute_id;return e.attribute_id===a}))})),selectedColorIndex:i},(function(){d.setProductColorImage(),d.props.dispatch(D.K(_t)),d.props.dispatch(D.gb(d.state.variantId)),d.canvasRef&&d.canvasRef.updateColorInModel(),a&&a(_t),n||d.saveColorsQuantity(),d.props.setActiveColorName(d.state.colors[i].name),d.triggerToSetCartAttrForSignBanner()})),"break"},o=0;o<d.state.colors.length;o++){if("break"===i(o))break}},d.addAnotherColor=function(e,t,a){for(var r=function(r){if(d.state.colors[r].attribute_id===e)return d.lastColorSelected=d.state.colors[r],d.lastColorSelected&&d.invertColor(d.lastColorSelected.hex_code),d.colorBoxIndex=_t.length,_t.forEach((function(e){e.isActive=0})),d.state.colors[r].isActive=1,_t.push(d.state.colors[r]),d.setState({selectedColor:d.state.colors[r],variantId:t||d.state.productId,tempColors:d.state.tempColors.filter((function(e){return e.attribute_id!==d.state.colors[r].attribute_id})),selectedColorIndex:r},(function(){d.setProductColorImage(),d.props.dispatch(D.K(_t)),d.props.dispatch(D.gb(d.state.variantId)),d.canvasRef&&d.canvasRef.updateColorInModel(),a||d.saveColorsQuantity(),d.props.setActiveColorName(d.state.colors[r].name),d.triggerToSetCartAttrForSignBanner()})),"break"},n=0;n<d.state.colors.length;n++){if("break"===r(n))break}},d.checkColorAvailable=function(e){var t=!1;return _t.forEach((function(a){a.id===e&&(t=!0)})),t},d.onProductColorBoxSelect=function(e,t,a){if(d.state.colors.length){if(e===d.state.selectedColor.attribute_id)return;var r,n=Object(i.a)(d.state.colors);try{var o=function(){var n=r.value;if(n.attribute_id===e)return d.lastColorSelected=n,d.setState({selectedColor:n,variantId:t||d.state.productId},(function(){d.setProductColorImage(),d.colorBoxIndex=a,_t.forEach((function(e){e.isActive=0})),n.isActive=1,d.props.dispatch(D.K(_t)),d.props.dispatch(D.gb(d.state.variantId)),d.canvasRef&&d.canvasRef.updateColorInModel(),d.props.setActiveColorName(n.name)})),"break"};for(n.s();!(r=n.n()).done;){if("break"===o())break}}catch(s){n.e(s)}finally{n.f()}}},d.setProductColorImage=function(){var e=d.state.productDetails;0===e.is_product_image&&(e&&e.sides&&e.sides.forEach((function(e,t){d.state.selectedColor.sides[t]&&(e.image=d.state.selectedColor.sides[t].image)})),d.props.productCanvasData.product_sides.forEach((function(e,t){d.state.selectedColor.sides[t]&&(e.image=d.state.selectedColor.sides[t].image)})))},d.saveColorsQuantity=function(){Ct=[],Et={l:0,d:0,w:0,t:0,p:0},_t&&0!==_t.length?(_t.forEach((function(e){Ct.push({id:e.id,name:e.name,price:e.price,qty:d.props.minProdQty}),6===e.color_type?Et.l=Et.l+d.props.minProdQty:5===e.color_type?Et.d=Et.d+d.props.minProdQty:4===e.color_type?Et.w=Et.w+d.props.minProdQty:Et.p=Et.p+d.props.minProdQty})),Et.t=Et.l+Et.w+Et.d+Et.p,d.props.dispatch(D.s(Ct)),d.props.dispatch(D.q(Et)).then((function(){d.props.setLayerData()}))):(Et={l:0,d:0,w:0,t:d.props.minProdQty,p:d.props.minProdQty},d.props.dispatch(D.q(Et)).then((function(){d.props.setLayerData()})))},d.deleteColorCheckout=function(e,t){_t.forEach((function(a,r){a.attribute_id===e&&d.removeProductColor(e,t,r,!0)}))},d.removeProductColor=function(e,t,a,r){var n;_t.splice(a,1),d.lastColorSelected=_t[_t.length-1],d.setState({selectedColor:_t[_t.length-1],variantId:t||d.state.productId,tempColors:d.state.colors.filter((function(e){return!_t.find((function(t){var a=t.attribute_id;return e.attribute_id===a}))}))},(function(){d.setProductColorImage(),d.colorBoxIndex=_t.length-1,_t.forEach((function(e){e.isActive=0})),_t[d.colorBoxIndex].isActive=1,d.props.dispatch(D.K(_t)),d.props.dispatch(D.gb(d.state.variantId)),d.canvasRef&&d.canvasRef.updateColorInModel(),r||d.saveColorsQuantity(),d.props.setActiveColorName(_t[d.colorBoxIndex].name),d.triggerToSetCartAttrForSignBanner(),n=_t.filter((function(e){return 1===e.isActive}))[0],d.state.colors.forEach((function(e,t){e.name.toLowerCase()===n.name.toLowerCase()&&d.setState({selectedColorIndex:t})}))}))},d.userAuthSuccess=function(e){d.props.dispatch(D.i()),d.setState({custId:e}),d.saveDesignClicked(e)},d.saveForExistingCustomer=function(e){d.setState({custId:e}),d.saveDesignClicked()},d.saveDesignClicked=function(){d.setState({modalIsOpen:!0})},d.saveDesign=function(e){if(!d.isSavingOnProcess)if(1!==d.props.productDetails.is_configurator||1!==d.props.productDetails.is_image_based||d.configuratorCaptureUrl){var t=d.state.custId;d.isSavingOnProcess=!0,d.props.showCanvasLoader(!0);var a=d.props.faceData,r={},i={},o=[],s=new FormData,l=1===d.state.isProductTemplate&&d.state.selectedColor?"#"===d.state.selectedColor.hex_code[0]?d.state.selectedColor.hex_code:d.state.selectedColor.file_name:null;if(P.a.canvas.getAllStageElems().length){var c=!1;d.props.engraveStatus&&(c=!!d.props.engraveStatus[d.props.activeSide]&&d.props.engraveStatus[d.props.activeSide]);var u=!1;d.props.decoProductId&&(u=!0);var m={};if(d.props.productDetails.is_variable_decoration?m={productUrl:null,productColor:l}:1===d.props.productDetails.is_configurator?(m={productUrl:d.configuratorCaptureUrl,productColor:""},1==d.props.productDetails.is_image_based&&(d.props.productCanvasReducer.product_sides.length=1)):m={productUrl:d.state.productDetails.sides[d.props.activeSide].image.src,productColor:l},P.a.canvas.getAllStageElems().slice().forEach((function(e){"image"===e.prefs.type&&"svg"===e.prefs.imgType&&(e.prefs.imgSelectionType="upload")})),1===d.props.productDetails.is_configurator&&0===d.props.productDetails.is_image_based){var h=new Image,g=document.getElementById("configCanvas");g.width=600,g.height=600,document.body.appendChild(g);var f=g.getContext("2d"),v=document.getElementById("configurator_side_"+d.state.currentSideIndex).children[0],b="";b=v.getElementsByTagName("svg")[0]?v.getElementsByTagName("svg")[0].outerHTML:document.getElementById("configurator_side_"+d.state.currentSideIndex).children[0].outerHTML,h.onload=function(){f.drawImage(h,0,0,600,600),m.productUrl=g.toDataURL(),m.productColor="",P.a.exportFaceData(m,c,u,(function(l){l.isDesigned=1,d.uploadImg(P.a.canvas.getAllStageElems().slice(),function(){var c=this;a[this.props.activeSide]=l;var u=setInterval((function(){if(c.props.faceData){if(clearInterval(u),c.props.productDetails.is_variable_decoration)s.append("images[]",a[0].imgObject),o.push({svg:a[0].svg});else for(var l=0;l<c.state.productDetails.sides.length;l++)a[l]&&a[l].isDesigned&&0===c.props.productDetails.is_variable_decoration?(c.props.faceData?o.push({svg:c.props.faceData[l].svg}):o.push({svg:a[l].svg}),s.append("images[]",a[l].imgObject)):o.push({svg:""});i={product_id:c.state.productDetails.product_id,variant_id:c.props.extraDetails.variant_id},r={version:10,product_info:i,sides:o,design_name:c.props.designName};var d=Object(n.a)(c.props.faceData),p=c.props.productCanvasReducer;p.product_sides.forEach((function(e,t){d[t]&&d[t].imgObject&&s.append("design_urls[]",d[t].imgObject)})),s.append("customer_id",t),s.append("type","user_designs"),s.append("thumb",100),s.append("data",JSON.stringify(r)),s.append("face_data",JSON.stringify(d)),s.append("layer_data",JSON.stringify(p.layer_data)),"update"==e&&(s.append("save_type","update"),s.append("design_id",c.props.designId)),c.setState({modalIsOpen:!1}),tt.a.saveCustomerDesign(s).then((function(e){c.configuratorCaptureUrl=null,e.data.status?(c.props.setDesignName(""),c.props.showCanvasLoader(!1),c.props.openGalleryModule(!1),c.showNotification("success",c.props.language.canvas.designSuccess)):e.data.message?c.showNotification("danger",e.data.message):c.showNotification("danger",c.props.language.main.error),c.isSavingOnProcess=!1})).catch((function(e){c.configuratorCaptureUrl=null,console.log("error",e),c.showNotification("danger",e)}))}}),50)}.bind(Object(p.a)(d)),!0),a[d.props.activeSide]=l}))},h.onerror=function(e){console.log(e)},h.crossOrigin="Anonymous",h.src="",h.src="data:image/svg+xml;base64,"+window.btoa(b)}else P.a.exportFaceData(m,c,u,(function(l){l.isDesigned=1,d.uploadImg(P.a.canvas.getAllStageElems().slice(),function(){var c=this;a[this.props.activeSide]=l;var u=setInterval((function(){if(c.props.faceData){if(clearInterval(u),c.props.productDetails.is_variable_decoration)s.append("images[]",a[0].imgObject),o.push({svg:a[0].svg});else for(var l=0;l<c.state.productDetails.sides.length;l++)a[l]&&a[l].isDesigned&&0===c.props.productDetails.is_variable_decoration?(c.props.faceData?o.push({svg:c.props.faceData[l].svg}):o.push({svg:a[l].svg}),s.append("images[]",a[l].imgObject)):o.push({svg:""});i={product_id:c.state.productDetails.product_id,variant_id:c.props.extraDetails.variant_id},r={version:10,product_info:i,sides:o,design_name:c.props.designName};var d=Object(n.a)(c.props.faceData),p=c.props.productCanvasReducer;p.product_sides.forEach((function(e,t){d[t]&&d[t].imgObject&&s.append("design_urls[]",d[t].imgObject)})),s.append("customer_id",t),s.append("type","user_designs"),s.append("thumb",100),s.append("data",JSON.stringify(r)),s.append("face_data",JSON.stringify(d)),s.append("layer_data",JSON.stringify(p.layer_data)),"update"==e&&(s.append("save_type","update"),s.append("design_id",c.props.designId)),c.setState({modalIsOpen:!1}),tt.a.saveCustomerDesign(s).then((function(e){c.configuratorCaptureUrl=null,e.data.status?(c.props.setDesignName(""),c.props.showCanvasLoader(!1),c.props.openGalleryModule(!1),c.showNotification("success",c.props.language.canvas.designSuccess)):e.data.message?c.showNotification("danger",e.data.message):c.showNotification("danger",c.props.language.main.error),c.isSavingOnProcess=!1})).catch((function(e){c.configuratorCaptureUrl=null,console.log("error",e),c.showNotification("danger",e)}))}}),50)}.bind(Object(p.a)(d)),!0),a[d.props.activeSide]=l}))}else d.showNotification("warning",d.props.language.canvas.designError)}else d.captureConfiguratorSaveDesign()},d.checkImageResolution=function(){var e=!0;return"inline"===document.getElementById("selectorGrip_resize_nwt").getAttribute("display")&&(e=!1),e},d.sideSelected=function(e,t){var a=!0;if(d.state.currentSideIndex!==t){P.a.canvas.setCurrentSideIdx(t),d.props.globalSettings.image_setting&&d.props.globalSettings.image_setting.file_uploaded&&d.props.globalSettings.image_setting.file_uploaded.low_resolution&&d.props.globalSettings.image_setting.file_uploaded.disable_cart&&(a=d.checkImageResolution());var i=d.state.currentSideIndex;if(1===d.state.mesh3DObject.is3dEnable&&d.state.IsMultiBoundaryAssigned&&P.a.exportMultiBoundaryPng("","true",(function(e){Object.assign(d.base64forMultiLayer3DPreview,Object(r.a)({},i,e))})),a){var o=!1;d.props.engraveStatus&&(o=!!d.props.engraveStatus[d.state.currentSideIndex]&&d.props.engraveStatus[d.state.currentSideIndex]),d.props.showCanvasLoader(!0,"sideChange"),P.a.canvas.isAreaChange=!0,d.props.dispatch(D.Z(t)).then((function(){d.props.dispatch(D.J()).then((function(){d.props.dispatch(D.M()).then((function(){d.props.dispatch(D.h()).then((function(){d.setDefaultFont()}));var a=1===d.state.isProductTemplate&&d.state.selectedColor?d.state.selectedColor.hex_code&&"#"===d.state.selectedColor.hex_code[0]?d.state.selectedColor.hex_code:"":null,r=!1;d.props.decoProductId&&(r=!0);var i={productUrl:d.state.sides[d.state.currentSideIndex].image.src,productColor:a};if(d.props.productDetails.is_variable_decoration&&(i={}),1===d.props.productDetails.is_configurator&&0===d.props.productDetails.is_image_based){var s=new Image,l=document.getElementById("configCanvas");l.width=600,l.height=600,document.body.appendChild(l);var c=l.getContext("2d"),u=document.getElementById("configurator_side_"+d.state.currentSideIndex).children[0],p="";p=u.getElementsByTagName("svg")[0]?u.getElementsByTagName("svg")[0].outerHTML:document.getElementById("configurator_side_"+d.state.currentSideIndex).children[0].outerHTML,s.onload=function(){c.drawImage(s,0,0,600,600),i.productUrl=l.toDataURL(),i.productColor="",P.a.exportFaceData(i,o,r,(function(a){d.uploadImg(P.a.canvas.getAllStageElems().slice()),a.isDesigned=P.a.canvas.getAllStageElems().length?1:0,(d.isTemplateEdit||d.isChangeProduct)&&(St=Object(n.a)(d.props.faceData)),St[d.state.currentSideIndex]=a,d.props.dispatch(D.x(St)).then((function(){if(!d.props.uploadedImgReducer.loading&&d.props.uploadedImgReducer.sides[d.state.currentSideIndex]&&d.props.uploadedImgReducer.sides[d.state.currentSideIndex][0]&&d.props.uploadedImgReducer.sides[d.state.currentSideIndex][0].blobUrl){if(d.props.dispatch(D.db(d.state.currentSideIndex,d.props.uploadedImgReducer.sides[d.state.currentSideIndex])),St[d.state.currentSideIndex].svg){var a=St[d.state.currentSideIndex].svg;d.props.uploadedImgReducer.sides[d.state.currentSideIndex].forEach((function(e){a=a.replace(e.blobUrl,e.imgUrl)})),St[d.state.currentSideIndex].svg=a}if(St[t]&&St[t].svg&&d.props.uploadedImgReducer.sides[t]){var r=St[t].svg;d.props.uploadedImgReducer.sides[t].forEach((function(e){r=r.replace(e.blobUrl,e.imgUrl)})),St[t].svg=r}}d.setState({currentSideIndex:t});for(var n=[],i=0;i<d.state.sides.length;i++)n[i]=!1;if(n[t]=!0,d.setState({currentSideIndex:t,isSideActive:n}),d.props.productDetails&&d.props.productDetails.is_variable_decoration){if(St[t]&&St[t].svg){var o=d.props.productDetails.product_decoration;o.print_area.width=d.props.customPrintAreaDimen.width,o.print_area.height=d.props.customPrintAreaDimen.height,P.a.canvas.setSvgString(St[t].svg),P.a.canvas.selectCurrentBoundary("bound_0"),P.a.canvas.drawVariableBound(o,xt,{borderWidth:d.props.customPrintAreaDimen.borderWidth,borderColor:d.props.customPrintAreaDimen.borderColor}),d.updateVariableBorderColor(d.props.customPrintAreaDimen.selBorderColor)}else{var s=d.props.productDetails.product_decoration;s.print_area.width=d.props.customPrintAreaDimen.width,s.print_area.height=d.props.customPrintAreaDimen.height,P.a.canvas.drawVariableBound(s,xt,{borderWidth:d.props.customPrintAreaDimen.borderWidth,borderColor:d.props.customPrintAreaDimen.borderColor},1),d.updateVariableBorderColor(d.props.customPrintAreaDimen.selBorderColor)}d.props.showCanvasLoader(!1,"sideChanges")}else if(St[t]&&St[t].svg){if(P.a.canvas.drawBoundry(e,d.state.isBleed,d.state.bleed),P.a.canvas.setSvgString(St[t].svg),d.state.isBleed){var l=JSON.parse(e.decoration_settings[0].dimension);P.a.canvas.drawBleed(l,d.state.bleed)}P.a.canvas.selectCurrentBoundary("bound_0")}else P.a.canvas.drawBoundry(e,d.state.isBleed,d.state.bleed);if(P.a.updateRulers(),Nt&&!Pt[d.state.currentSideIndex]&&(d.props.resetReplaceDesignIndex(),d.applyTemplateOnStage()),d.props.configuratorSideList.productDetails&&d.props.configuratorSideList.productDetails.data&&d.props.configuratorSideList.productDetails.data[0].sideList&&document.getElementById("configurator_svg-loader_"+t)){var c=document.getElementById("configurator_side_"+t);document.getElementById("configurator_svg-loader_"+t).innerHTML=c.innerHTML,setTimeout((function(){P.a.canvas.resizeStage()}))}}))}))},s.onerror=function(e){console.log(e)},s.crossOrigin="Anonymous",s.src="",s.src="data:image/svg+xml;base64,"+window.btoa(p)}else P.a.exportFaceData(i,o,r,(function(a){d.uploadImg(P.a.canvas.getAllStageElems().slice()),a.isDesigned=P.a.canvas.getAllStageElems().length?1:0,(d.isTemplateEdit||d.isChangeProduct)&&(St=Object(n.a)(d.props.faceData)),St[d.state.currentSideIndex]=a,d.props.dispatch(D.x(St)).then((function(){if(!d.props.uploadedImgReducer.loading&&d.props.uploadedImgReducer.sides[d.state.currentSideIndex]&&d.props.uploadedImgReducer.sides[d.state.currentSideIndex][0]&&d.props.uploadedImgReducer.sides[d.state.currentSideIndex][0].blobUrl){if(d.props.dispatch(D.db(d.state.currentSideIndex,d.props.uploadedImgReducer.sides[d.state.currentSideIndex])),St[d.state.currentSideIndex].svg){var a=St[d.state.currentSideIndex].svg;d.props.uploadedImgReducer.sides[d.state.currentSideIndex].forEach((function(e){a=a.replace(e.blobUrl,e.imgUrl)})),St[d.state.currentSideIndex].svg=a}if(St[t]&&St[t].svg&&d.props.uploadedImgReducer.sides[t]){var r=St[t].svg;d.props.uploadedImgReducer.sides[t].forEach((function(e){r=r.replace(e.blobUrl,e.imgUrl)})),St[t].svg=r}}d.setState({currentSideIndex:t});for(var n=[],i=0;i<d.state.sides.length;i++)n[i]=!1;if(n[t]=!0,d.setState({currentSideIndex:t,isSideActive:n}),d.props.productDetails&&d.props.productDetails.is_variable_decoration){if(St[t]&&St[t].svg){var o=d.props.productDetails.product_decoration;o.print_area.width=d.props.customPrintAreaDimen.width,o.print_area.height=d.props.customPrintAreaDimen.height,P.a.canvas.setSvgString(St[t].svg),P.a.canvas.selectCurrentBoundary("bound_0"),P.a.canvas.drawVariableBound(o,xt,{borderWidth:d.props.customPrintAreaDimen.borderWidth,borderColor:d.props.customPrintAreaDimen.borderColor}),d.updateVariableBorderColor(d.props.customPrintAreaDimen.selBorderColor)}else{var s=d.props.productDetails.product_decoration;s.print_area.width=d.props.customPrintAreaDimen.width,s.print_area.height=d.props.customPrintAreaDimen.height,P.a.canvas.drawVariableBound(s,xt,{borderWidth:d.props.customPrintAreaDimen.borderWidth,borderColor:d.props.customPrintAreaDimen.borderColor},1),d.updateVariableBorderColor(d.props.customPrintAreaDimen.selBorderColor)}d.props.showCanvasLoader(!1,"sideChanges")}else if(St[t]&&St[t].svg){if(d.props.decoProductId&&P.a.canvas.drawBoundry(e,d.state.isBleed,d.state.bleed),P.a.canvas.setSvgString(St[t].svg),d.state.isBleed){var l=JSON.parse(e.decoration_settings[0].dimension);P.a.canvas.drawBleed(l,d.state.bleed)}P.a.canvas.selectCurrentBoundary("bound_0")}else P.a.canvas.drawBoundry(e,d.state.isBleed,d.state.bleed);if(P.a.updateRulers(),Nt&&!Pt[d.state.currentSideIndex]&&(d.props.resetReplaceDesignIndex(),d.applyTemplateOnStage()),P.a.canvas.cloneElements){var c=P.a.canvas.getBoundDimensions().boundX+P.a.canvas.getBoundDimensions().boundWidth/2,u=P.a.canvas.getBoundDimensions().boundY+P.a.canvas.getBoundDimensions().boundHeight/2;P.a.canvas.pasteElements("point",c,u),P.a.canvas.groupSelectedElements(),P.a.canvas.placeElementOnStage(),P.a.canvas.ungroupSelectedElement(),P.a.canvas.clearSelection(),P.a.canvas.cloneElements=!1}}))}));(d.isTemplateEdit||d.isChangeProduct)&&(It=Object(n.a)(d.props.allSideElements)),It[d.state.currentSideIndex]={element:P.a.canvas.getAllStageElems()},d.props.dispatch(Object(mt.k)(It))}))}))})),d.state.isZoom&&d.onZoomClick("original")}else d.showNotification("warning",d.props.language.cart.imageQualityError)}},d.showHideBackLoader=function(e,t){d.canvasRef&&d.canvasRef.showHideBackLoader(e,t)},d.applyTemplate=function(e){Ot=e,Nt=!0,Pt=[],d.applyTemplateOnStage()},d.applyTemplateOnStage=function(){Ot&&Ot.design_data&&Ot.design_data[d.state.currentSideIndex]&&Ot.design_data[d.state.currentSideIndex].svg?P.a.canvas.loadTemplate(decodeURI(Ot.design_data[d.state.currentSideIndex].svg),Ot.color_hash_codes,Ot.is_easy_edit,d.templateApplyCB,Y.a.assets_path,!1):d.templateApplyCB(!1)},d.templateApplyCB=function(e){Pt[d.state.currentSideIndex]=!0,d.props.showHideBackLoader(e)},d.hideImageWarning=function(){d.canvasRef&&d.canvasRef.closeWarningModal()},d.backToModuleCallback=function(){d.props.backToModuleCallback()},d.loadDecoratedTemp=function(){if(d.props.decoProductId||d.props.stateId){var e=d.props.decoProductId||d.props.stateId,t=[],a="";d.showHideBackLoader(!0,"userDesign"),tt.a.getDecoratedTemplate(e).then((function(e){if(e.status&&e.data&&e.data.length){!function(e,t,r){var n=new XMLHttpRequest;n.onreadystatechange=function(){n.readyState===XMLHttpRequest.DONE&&(200===n.status?(t&&t(JSON.parse(n.responseText)),a=JSON.parse(n.responseText)):r&&r(n))},n.open("GET",e,!0),n.send()}(e.design_url,(function(e){a=e}),(function(e){console.error(e)}));for(var r=setInterval((function(){if(d.props.configuratorSideList&&d.props.configuratorSideList.configuratorSvgCartData&&d.props.configuratorSideList.configuratorSvgCartData.sides&&d.props.configuratorSideList.configuratorLoadStatus){d.svgConfiguratorData=d.props.configuratorSideList.configuratorSvgCartData;for(var e=function(e){for(var t=function(t){for(var r=document.querySelectorAll("#"+a.sides[e].configurator_info.sub_section[t].id),n=0;n<r.length;n++){var i=d.props.configuratorSideList.colors.data.filter((function(e){return 0===e.type})),o=i.findIndex((function(r){return r.value===a.sides[e].configurator_info.sub_section[t].hex_code}));r[n].setAttribute("fill",a.sides[e].configurator_info.sub_section[t].hex_code),d.svgConfiguratorData.sides[e].sub_section[t].hex_code=i[o].value,d.svgConfiguratorData.sides[e].sub_section[t].color_name=i[o].name}},r=0;r<a.sides[e].configurator_info.sub_section.length;r++)t(r)},t=0;t<a.sides.length;t++)e(t);d.props.dispatch(Object(ht.t)(d.svgConfiguratorData)).then((function(){})),clearInterval(r)}}),500),i=e.data[0].design_data,o=0;o<i.length;o++)if(i[o].svg){St[o]={};try{St[o].svg=decodeURI(i[o].svg)}catch(s){St[o].svg=i[o].svg}St[o].isDesigned=1}t=St,d.setState({currentSideIndex:0,isSideActive:[!0]},(function(){St[0]&&St[0].svg&&(P.a.canvas.setSvgString(St[0].svg),P.a.canvas.selectCurrentBoundary("bound_0"),d.props.decoProductId&&d.props.loadPreDecoForm(e.data[0].is_easy_edit),tt.a.getPredecoDetails(e.design_url).then((function(e){if(d.props.productDetails&&d.props.productDetails.is_variable_decoration&&e&&e.sides&&e.sides.length){for(var a=JSON.parse(JSON.stringify(e.sides)),r=JSON.parse(JSON.stringify(d.props.productCanvasData.product_sides)),i=[],o={},s=0;s<a.length;s++)(o=Object(l.a)({},r[0])).name=a[s].side_name,o.image.thumbnail=a[s].url,i.push(o);d.props.dispatch(D.eb(i)).then(d.setState({sides:d.props.productCanvasData.product_sides}))}if(t.length&&d.props.dispatch(D.x(t)),e&&e.layer_data){for(var c=Object(n.a)(e.layer_data),u=0;u<c.length;u++)null===c[u]&&(c[u]=[]);d.props.dispatch(D.C(c))}if(e&&e.sides){var p=JSON.parse(JSON.stringify(d.props.productCanvasData));if(d.props.productDetails&&0===d.props.productDetails.is_variable_decoration)for(var m=0;m<p.product_sides.length;m++)for(var h=0;h<p.product_sides[m].decoration_settings.length;h++)e.sides[m].print_area["bound_"+h]&&(p.product_sides[m].decoration_settings[h].activePrintProfile=e.sides[m].print_area["bound_"+h].print_method_id);else for(var g=0;g<p.product_sides.length;g++)e.sides[g].print_area.bound_0&&(p.product_sides[g].activePrintProfile=e.sides[g].print_area.bound_0.print_method_id);d.props.dispatch(D.I(p.product_sides)).then(),d.props.setLayerData()}d.showHideBackLoader(!1,"userDesign")})))}))}}))}},d.onAddVarDecoSide=function(){d.props.dispatch(D.b()).then(d.setState({sides:d.props.productCanvasData.product_sides}))},d.checkBackgroundElm=function(){d.onElemChange()},d.setActiveModule=function(e){d.canvasRef&&d.canvasRef.setActiveModule(e)},d.getColorPallets=function(){var e=!1;d.props.colorPaletteReducer.colorList&&0!==d.props.colorPaletteReducer.colorList.length&&-1!==d.props.colorPaletteReducer.colorList.findIndex((function(e){return e.printProfileId===d.props.printProfileReducer.selected_print_profile}))&&(e=!0),e||d.props.colorPaletteReducer.loading||d.props.dispatch(D.d(d.props.printProfileReducer.selected_print_profile))},d.onZoomClick=function(e){d.setState({isZoom:"original"!==e},(function(){P.a.canvas.scaleBoundary(d.state.isZoom,e)})),d.togglePreviewTab("2d")},d.onGridClick=function(){d.togglePreviewTab("2d"),document.getElementById("canvasGrid").getAttribute("display")?(document.getElementById("canvasGrid").setAttribute("display",""),d.setState({isGridApply:!0})):(document.getElementById("canvasGrid").setAttribute("display","none"),d.setState({isGridApply:!1}))},d.setConfiguratorImage=function(e){d.canvasRef&&d.canvasRef.loadConfigurator(e)},d.updateConfiguratorImage=function(e){d.canvasRef&&d.canvasRef.updateConfigurator(e)},d.enableStickerpreview=function(e){d.canvasRef&&d.canvasRef.showHideStickerPreview(e),d.sidesRef&&d.sidesRef.updateEditStatus(e),e&&d.props.backToModuleCallback()},d.getUrlParameter=function(e){return("Shopify"!==window.storeType&&"Others"!==window.storeType&&"Hosted"!==window.storeType?new URLSearchParams(window.parent.location.search):new URLSearchParams(window.location.search)).get(e)},d.closeModal=function(){d.setState({modalIsOpen:!1})},d.closeNoPrintModal=function(){d.setState({isNoPrintMethod:!1})},d.onRemoveVarDecoSide=function(e){var t=JSON.parse(JSON.stringify(d.props.productCanvasData.product_sides)),a=JSON.parse(JSON.stringify(d.props.productCanvasData.faceData)),r=JSON.parse(JSON.stringify(d.props.productCanvasData.layer_data));t.splice(e,1),d.isChangeProduct||(a.splice(e,1),r.splice(e,1));for(var n=0;n<t.length;n++)t[n].name="Side "+Number(n+1);var i=Number(e-1);d.sideSelected(t[i],i);var o=setInterval((function(){St=a,d.props.dispatch(D.l(t,a,r)).then(d.setState({sides:t,currentSideIndex:i},(function(){clearInterval(o),d.props.setLayerData()})))}),500)},d.loadUserDesgn=function(){d.props.userDesignId&&(d.props.showHideBackLoader(!0,"userDesign"),Object(et.l)(d.props.userDesignId).then((function(e){if(e.status&&e.data&&e.data.data.length){if(e&&e.data.data[0].face_data&&d.props.dispatch(D.x(JSON.parse(e.data.data[0].face_data))),e&&e.data.data[0].layer_data){var t=Object(n.a)(e.data.data[0].layer_data);t=JSON.parse(e.data.data[0].layer_data);for(var a=0;a<t.length;a++)null===t[a]&&(t[a]=[]);d.props.dispatch(D.C(t))}d.setFaceData(e.data.data[0].sides,!1),P.a.canvas.selectCurrentBoundary("bound_0"),d.props.showHideBackLoader(!1,"userDesign")}else d.props.showHideBackLoader(!1,"userDesign")})))},d.triggerToSetCartAttrForSignBanner=function(){if(d.props.productCanvasData.selectedVarSize instanceof Object)if(d.props.productCanvasData.fetchSizeAndQtyResFlag)d.props.updateCartAttrForSignBanner();else var e=setInterval((function(){d.props.productCanvasData.fetchSizeAndQtyResFlag&&(d.props.updateCartAttrForSignBanner(),clearInterval(e))}),100)},d.changeStageColor=function(e,t,a){if(d.state.colors.length){var r,n=Object(i.a)(d.state.colors);try{var o=function(){var n=r.value;if(n.attribute_id===e)return d.lastColorSelected=n,d.invertColor(n.hex_code),document.getElementById("bounds").children[0].setAttribute("stroke",d.invertedColor),d.setState({selectedColor:n,variantId:t||d.state.productId,selectedColorIndex:a},(function(){d.setProductColorImage(),d.colorBoxIndex=a,_t.filter((function(t){return t.attribute_id===e})).length?_t.forEach((function(t){t.attribute_id===e?t.isActive=1:t.isActive=0})):_t.forEach((function(e,t){e.isActive&&(_t.splice(t,1),_t[t]=n)})),n.isActive=1,d.props.dispatch(D.K(_t)),d.props.dispatch(D.gb(d.state.variantId)),d.canvasRef&&d.canvasRef.updateColorInModel(),d.saveColorsQuantity(),d.props.setActiveColorName(n.name),d.triggerToSetCartAttrForSignBanner()})),"break"};for(n.s();!(r=n.n()).done;){if("break"===o())break}}catch(s){n.e(s)}finally{n.f()}}},d.setDefaultFont=function(){var e;d.props.selectedPrintProfileData&&d.props.selectedPrintProfileData.text_data&&d.props.selectedPrintProfileData.text_data.is_default_font&&((e=d.props.selectedPrintProfileData.text_data.default_font)&&(vt.a.getFont(e.font_family)||Object(At.a)(e.file_name,(function(t,a){t?console.log("Font could not be loaded: "+t):vt.a.setFont({glyph:a,font_family:e.font_family})}))))},d.showNotification=function(e,t){d.canvasRef&&d.canvasRef.showNotification(e,t)},d.openNoCustomizationPopup=function(){d.state.isNoPrintMethod||(d.setState({isNoPrintMethod:!0}),d.props.dispatch(D.E(!0)))},d.invertColor=function(e){var t=e;t=t.substring(1),t=parseInt(t,16),t="#"+(t=("000000"+(t=(t^=16777215).toString(16))).slice(-6)),d.invertedColor=t||"#006400";var a=document.getElementById("bounds");a&&(a.children[0].setAttribute("stroke",t),P.a.canvas.setBoundryColor(t))},d.renderSaveDesignModal=function(){if(d.state.modalIsOpen)return f.a.createElement(pt,{modalIsOpen:d.state.modalIsOpen,closeModal:d.closeModal,clearAll:d.clearAll,saveDesign:d.saveDesign,designId:d.props.designId,setDesignName:d.props.setDesignName,designName:d.props.designName,showCanvasLoader:d.props.showCanvasLoader})},d.renderNoPrintModal=function(){if(d.state.isNoPrintMethod)return f.a.createElement(lt,{modalIsOpen:d.state.isNoPrintMethod,closeModal:d.closeNoPrintModal,onProductChange:d.props.onProductChange,productDetails:d.state.productDetails,errCode:d.state.errCode})},d.state={productId:null,variantId:null,productDetails:null,productName:"",productDesc:"",sides:[],error:null,loading:!1,colors:[],selectedColor:null,isProductTemplate:null,popoverDetails:null,tempColors:[],isSideActive:[!0],currentSideIndex:0,isBleed:!1,bleed:{},isElmOnStage:0,layerElmCount:0,isBackgroundElms:!1,objectOnStage:[],selectedElem:null,isZoom:!1,isGrid:!1,isProductChanged:!1,isNoPrintMethod:!1,mesh3DObject:{mesh:"",is3dEnable:0,loadingValue:0},selectedColorIndex:0,isGridApply:!1,currBackgroundElms:"",errCode:"",timesProdLoad:0},d.lastColorSelected=null,d.colorBoxIndex=0,d.isConfiguratorEnable=!1,d.isSavingOnProcess=!1,d.configuratorCaptureUrl=null,d.configuratorAddOns=!1,d.base64forMultiLayer3DPreview={},yt=Object(p.a)(d),d}return Object(d.a)(o,[{key:"componentDidMount",value:function(){var e=this;(0,this.props.canvasChildRef)(this),this.props.productId?this.setState({productId:this.props.productId,variantId:this.props.variantId},(function(){Ce()("#root").css({opacity:1}),Ce()("#css-fake-loader").hide(),e.loadProductOnCanvas()})):this.props.onProductChange(null,null),this.isTemplate=this.getUrlParameter("temp"),this.isTemplateEdit=!!this.getUrlParameter("etid"),this.isChangeProduct=!!this.getUrlParameter("tid")}},{key:"componentDidUpdate",value:function(e){var t=this;this.props.productId&&parseInt(e.productId)!==parseInt(this.props.productId)&&this.onProductSelect(this.props.productId,this.props.variantId),e.minProdQty!==this.props.minProdQty&&(0===this.props.productCanvasReducer.cartProdAttrs.length&&this.saveColorsQuantity(),!this.state.popoverDetails||"simple"!==this.state.popoverDetails.type&&0!==this.props.cartColorPricing.length||(Et={l:0,d:0,w:0,t:this.props.minProdQty,p:this.props.minProdQty},this.props.dispatch(D.q(Et)).then((function(){t.props.setLayerData()}))))}},{key:"isCheckoutPreview",value:function(e){this.canvasRef&&this.canvasRef.isCheckoutPreview(e)}},{key:"unitconversionInchVal",value:function(e,t){switch(t.toLowerCase()){case"feet":return(e/12).toFixed(2);case"centimeter":return(2.54*e).toFixed(2);case"millimeter":return(25.4*e).toFixed(2);case"meter":return(.0254*e).toFixed(2);default:return e}}},{key:"convertPrintAreaUnit",value:function(e,t){var a=this;return new Promise((function(r){e.forEach((function(e){e.decoration_settings&&e.decoration_settings.length&&e.decoration_settings.forEach((function(e){e.print_area&&(e.print_area.height=a.unitconversionInchVal(e.print_area.height,t),e.print_area.width=a.unitconversionInchVal(e.print_area.width,t),r())}))}))}))}},{key:"loadProductOnCanvas",value:function(e){var t=this;_t.length=0,Et={l:0,d:0,w:0,t:0,p:0},this.colorBoxIndex=0,this.lastColorSelected=null,St.length=0,Nt=!1,document.getElementById("canvasGrid")&&document.getElementById("canvasGrid").setAttribute("display","none"),this.props.initializeConfigurator(!1),this.props.dispatch(D.o()).then((function(){t.props.dispatch(D.n()).then((function(){P.a.canvas.clearDimensionInInch(),P.a.canvas.team={},t.setState({loading:!0,tempColors:[],productDetails:null,sides:[],colors:[],currentSideIndex:0,isVariableBound:0,isSideActive:[!0],selectedColor:null,selectedColorIndex:0,isGrid:!1,popoverDetails:null},(function(){try{if("1"===window.in_isapicall)var e=setInterval((function(){window.in_prodData&&t.props.globalSettings.store&&(JSON.parse(window.in_prodData)&&0!==Object.keys(JSON.parse(window.in_prodData)).length?t.setProductDetailsData(JSON.parse(window.in_prodData)):t.callProductDetailsApi(),delete window.in_isapicall,delete window.in_prodData,clearInterval(e))}),10);else t.callProductDetailsApi()}catch(a){t.callProductDetailsApi()}}))}))}))}},{key:"loadProductColors",value:function(e,t,a){var r=this,n={},i=this.props.globalSettings.store,o=e.attributes;if(Et={l:0,d:0,w:0,t:this.props.minProdQty,p:this.props.minProdQty},this.props.dispatch(D.q(Et)).then((function(){r.props.setLayerData()})),this.props.dispatch(D.G(!0)),this.state.productId!==this.state.variantId)tt.a.getProductColors(this.state.productId).then((function(s){if(s.data.status)if((n=s.data).records>0){e.is_variable_decoration&&!r.props.productCanvasData.isColorAttribute?r.props.dispatch(D.ab([t])):r.props.dispatch(D.ab(n.data));var l=[];if(n.data.forEach((function(e){l.push({name:e.name,sizeAttrib:[]})})),r.props.dispatch(D.X(l)),JSON.stringify(t)!==JSON.stringify({})){var c=[],u=[];n.data&&n.data.forEach((function(t,a){c=t.sides.slice(),u=[],e.visibleSides&&(e.visibleSides.forEach((function(e){u.push(c[e])})),n.data[a].sides=u)}));for(var d=function(e){if(t.name===n.data[e].name)return r.props.productDetails.is_variable_decoration||r.invertColor(n.data[e].hex_code),r.setState({colors:n.data,selectedColor:n.data[e],tempColors:n.data.filter((function(t){return t.attribute_id!==n.data[e].attribute_id})),selectedColorIndex:e}),r.lastColorSelected=n.data[e],n.data[e].isActive=1,_t[0]=n.data[e],r.props.dispatch(D.K(_t)),r.props.dispatch(D.y(a)),"simple"!==r.props.productCanvasData.product_extra_details.type&&r.props.setGlobalSizeAttr(),r.saveColorsQuantity(),"break"},p=0;p<n.data.length;p++){if("break"===d(p))break}}else{r.setState({colors:[],selectedColor:null,tempColors:[]}),r.lastColorSelected=null;var m=[],h=!0;i&&(Object.keys(o).forEach((function(e){if(h)for(var t=0;t<n.data.length;t++)n.data[t].attribute_id!==o[e].id&&n.data[t].attribute_id!==o[e].attribute_id||(m[0]=n.data[t],h=!1,a=e)})),r.props.dispatch(D.K(m)),r.props.dispatch(D.y(a)),"simple"!==r.props.productCanvasData.product_extra_details.type&&r.props.setGlobalSizeAttr())}}else r.setState({colors:[],selectedColor:null,tempColors:[]}),r.lastColorSelected=null,r.props.dispatch(D.K([]));else r.setState({colors:[],selectedColor:null,tempColors:[]}),r.lastColorSelected=null;r.props.dispatch(D.G(!1))})).catch((function(e){console.log("error",e)}));else{"{}"!==JSON.stringify(t)?(this.setState({colors:[],selectedColor:t,tempColors:[]}),t.isActive=1,this.props.dispatch(D.K([t])),this.props.dispatch(D.y(a)),this.props.productCanvasData.product_extra_details.type&&"simple"!==this.props.productCanvasData.product_extra_details.type&&this.props.setGlobalSizeAttr()):this.setState({colors:[],selectedColor:null,tempColors:[]}),this.lastColorSelected=null;var s=[],l=!0;i&&Object.keys(o).forEach((function(e){l&&(s[0]=o[e],l=!1,a=e,r.props.dispatch(D.K(s)))})),this.props.dispatch(D.G(!1))}}},{key:"onProductSelect",value:function(e,t){var a=this;this.props.showCanvasLoader(!0),this.setState({productId:e,variantId:t||e,isProductChanged:!0,timesProdLoad:this.state.timesProdLoad?this.state.timesProdLoad:0},(function(){if(P.a.canvas.isAreaChange=!0,(kt=a.props.productCanvasReducer.prevActivePrintProfile)>0)if(St[0]){var e=St[0].svg,t=Ce.a.parseXML(e);wt=Ce()(t).find('g[id="Layer_0"]').children()}else{var r=P.a.canvas.getContentElem();wt=Ce()(r).find('g[id="Layer_0"]').children()}a.loadProductOnCanvas()}))}},{key:"getProductPopoverDetails",value:function(){var e=this;tt.a.getProductPopupDetails(this.state.productId).then((function(t){if(t.data.status){var a={};a.sku=t.data.data.sku,a.type=t.data.data.type,a.variant_id=e.state.variantId,a.description=t.data.data.description,a.price=t.data.data.price,a.is_decoration_exists=t.data.data.is_decoration_exists,a.categories=t.data.data.categories,a.stock_quantity=t.data.data.stock_quantity,a.images=t.data.data.images,e.props.dispatch(D.a(a)),e.props.dispatch(Object(it.b)(e.props.layerData)),e.setState({popoverDetails:t.data.data})}else console.log("error occured",t.data),e.setState({popoverDetails:null})})).catch((function(t){console.log("error",t),e.setState({popoverDetails:null})}))}},{key:"captureConfiguratorSaveDesign",value:function(){for(var e=this,t=0,a=0,r=[],n=document.getElementById("configurator_image-loader").cloneNode(!0),i=0;i<n.children.length;i++)n.getElementsByTagName("g")[i].setAttribute("transform","translate("+-t+","+-a+")scale(1,1)"),r.push(n.getElementsByTagName("g")[i].getElementsByTagName("image")[0].href.baseVal);P.a.exportConfiguratorPng({},n.outerHTML,r,"true",(function(t){e.configuratorCaptureUrl=t,e.saveDesign("")}))}},{key:"setFaceData",value:function(e,t){this.props.dispatch(D.Z(0));for(var a=0;a<e.length;a++)e[a].svg&&(St[a]={},St[a].svg=e[a].svg);t||this.setState({currentSideIndex:0,isSideActive:[!0]},(function(){St[0]&&St[0].svg&&P.a.canvas.setSvgString(St[0].svg)}))}},{key:"uploadImg",value:function(e,t,a){var r=this,n=[],i=[],o=[],s=[],l=[],c=[];e.forEach((function(e){"image"===e.prefs.type&&"svg"!==e.prefs.imgType?n.push(e.prefs.updatedFile):a&&(e.prefs.imgSelectionType="upload"),e.prefs.originalImageUrl||"image"!==e.prefs.type||"svg"===e.prefs.imgType||""===e.prefs.updatedFile||0===Object.keys(e.prefs.updatedBlob).length&&e.prefs.updatedBlob.constructor===Object||(i.push(e.prefs.updatedBlob),o.push(e.prefs.updatedFile),s.push(e.prefs.imgExtension),l.push(e.prefs.uploadedImg)),c.push(e.prefs.originalImageUrl)})),i.length?this.props.dispatch(D.ib(this.state.currentSideIndex,i,o,n,s,1,l,c)).then((function(e){"error"===e?(t&&r.props.showCanvasLoader(!1),r.showNotification("danger",r.props.language.canvas.imageUploadError)):t&&t()})):0==i.length&&t&&t()}},{key:"onElemChange",value:function(e){for(var t=P.a.canvas.getAllStageElems().length?1:0,a=P.a.canvas.getCurrentLayerElems(),r=a.length,n=!1,i="",o=0;o<r;o++)if(a[o].prefs&&"background"===a[o].prefs.type){n=!0,i=a[o];break}var s=this.state.objectOnStage;s[this.state.currentSideIndex]=t,this.setState({isElmOnStage:t,layerElmCount:r,isBackgroundElms:n,selectedElem:e,objectOnStage:s,currBackgroundElms:i,showControlOptions:Y.a.tool_bar})}},{key:"updateVariableBorderColor",value:function(e){e&&(e.hex_value||P.a.canvas.setPatternDefs("pattern_"+e.id,e.value))}},{key:"getSizeAttributeDetails",value:function(){var e=this;this.props.globalSettings&&this.props.globalSettings.store&&tt.a.getSizeAttributeDetails(this.props.productId,this.props.variantId,this.props.globalSettings.store.size).then((function(t){if(t&&t.data&&1===t.data.status){var a=Object.keys(t.data.quantities)[0],r=t.data.quantities[a];r&&r.length&&r[0].name&&e.props.dispatch(D.V(r)).then((function(){var t;e.props.productDetails&&e.props.productDetails.attributes&&e.props.productDetails.attributes[e.props.globalSettings.store.size]&&(t=r.filter((function(t){return t.name===e.props.productDetails.attributes[e.props.globalSettings.store.size].name}))[0])||(t=r[0]),e.setState({selectedSize:t,isCustomSize:!1},(function(){var a=t.name.replace("(","").replace(")","").split(/[^0-9\.]+/);if(a[0]&&a[1]&&"sticker"!==e.props.productDetails.decoration_type)e.updateVariableBoundary(a[0],a[1],!1),e.props.dispatch(D.N({type:"standard",selSize:t})),e.props.dispatch(D.W(!0));else{var r=JSON.parse(JSON.stringify(e.props.productDetails.product_decoration));if(r&&r.print_area&&e.props.productDetails.is_custom_size){var n=r.print_area,i=n.width+" x "+n.height;e.props.dispatch(D.N({type:"custom",selSize:{name:i}})),e.props.dispatch(D.W(!1))}}}))}))}else console.log("error occured",t.data)})).catch((function(e){console.log("error",e)}))}},{key:"updateVariableBoundary",value:function(e,t,a){this.props.dispatch(D.bb({width:Number(e).toFixed(2),height:Number(t).toFixed(2),prevWidth:e,prevHeight:t,isAspectRatio:a,minErr:"",maxErr:"",calErr:""}));var r=JSON.parse(JSON.stringify(this.props.productDetails.product_decoration));r.print_area.width=e,r.print_area.height=t,P.a.canvas.drawVariableBound(r,xt,{borderWidth:this.props.customPrintAreaDimen.borderWidth,borderColor:this.props.customPrintAreaDimen.borderColor}),P.a.updateRulers()}},{key:"getProductPriceRuleData",value:function(){var e=this;tt.a.getProductPriceRuleData(this.state.productId).then((function(t){t.data.status?t.data.data&&t.data.data.attributes&&e.props.dispatch(D.r(t.data.data.attributes)).then((function(){e.props.dispatch(Object(it.b)(e.props.layerData))})):console.log("error occured",t.data)})).catch((function(e){console.log("error",e)}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.error,r=t.loading,n=t.productDetails,i=t.productName,o=t.productDesc,s=t.sides,l=t.currentSideIndex,c=t.colors,u=t.selectedColor,d=t.isProductTemplate,p=t.popoverDetails,m=t.tempColors,h=t.isSideActive,g=t.isVariableBound,v=t.isElmOnStage,b=t.layerElmCount,A=t.isBackgroundElms,y=t.objectOnStage,_=t.selectedElem,E=t.isZoom,S=t.mesh3DObject,C=t.isGrid,x=t.isGridApply,w=t.currBackgroundElms,k=t.timesProdLoad,I=t.showControlOptions;return f.a.createElement(f.a.Fragment,null,f.a.createElement(bt.a,null,f.a.createElement(nt,{key:"profile",onProductChange:this.props.onProductChange,productDetails:n,productName:i,loading:r,error:a,popoverDetails:p,onChangeOrderOption:this.props.onChangeOrderOption,saveForExistingCustomer:this.saveForExistingCustomer,setLayerData:this.props.setLayerData,showCanvasLoader:this.props.showCanvasLoader,isElmOnStage:v,isProfileMobile:this.props.isProfileMobile,handleProfileMobile:this.props.handleProfileMobile,isOrderOptionsShow:this.props.isOrderOptionsShow,userAuthSuccess:this.userAuthSuccess,getColorPallets:this.getColorPallets,decoProductId:this.props.decoProductId,isMobileView:this.props.isMobileView,isOrderPlaced:this.props.isOrderPlaced,checkBackgroundElm:this.checkBackgroundElm,isTeamJerseyData:this.props.isTeamJerseyData,openMyGallery:this.props.openMyGallery,backToModuleCallback:this.backToModuleCallback,showNotification:this.showNotification,setDefaultFont:this.setDefaultFont,isKioskFeature:this.props.isKioskFeature}),f.a.createElement(ue,{key:"sides",sides:this.props.productCanvasReducer.product_sides,productName:i,productDesc:o,loading:r,sideSelected:this.sideSelected,error:a,isSideActive:h,colors:c,selectedColor:u,onProductColorHover:this.onProductColorHover,onProductColorSelect:this.onProductColorSelect,isProductTemplate:d,addAnotherColor:this.addAnotherColor,onProductColorBoxSelect:this.onProductColorBoxSelect,isOrderOptionsShow:this.props.isOrderOptionsShow,tempColors:m,removeProductColor:this.removeProductColor,isVariableDeco:this.props.productDetails.is_variable_decoration,onAddVarDecoSide:this.onAddVarDecoSide,attrType:this.state.attrType,onProductChange:this.props.onProductChange,setLayerData:this.props.setLayerData,getColorPallets:this.getColorPallets,isCustomerFormProcessing:this.props.isCustomerFormProcessing,isOrderPlaced:this.props.isOrderPlaced,checkBackgroundElm:this.checkBackgroundElm,enableStickerpreview:this.enableStickerpreview,onRemoveVarDecoSide:this.onRemoveVarDecoSide,sidesRef:function(t){return e.sidesRef=t},isMobileView:this.props.isMobileView,updateCartAttrForSignBanner:this.props.updateCartAttrForSignBanner,changeStageColor:this.changeStageColor,selectedColorIndex:this.state.selectedColorIndex,popoverDetails:p}),f.a.createElement(Ne,{key:"canvas",canvasRef:function(t){return e.canvasRef=t},productDetails:n,sideIndex:l,loading:r,error:a,selectedColor:u,isProductTemplate:d,splitScreenMobile:this.props.splitScreenMobile,isLoader:this.props.isLoader,showCanvasLoader:this.props.showCanvasLoader,isVariableBound:g,isElmOnStage:v,layerElmCount:b,openLayer:this.props.openLayer,isOrderOptionsShow:this.props.isOrderOptionsShow,onChangeOrderOption:this.props.onChangeOrderOption,isBackgroundElms:A,faceData:St,objectOnStage:y,source:this.props.source,removeBackground:this.props.removeBackground,checkBackgroundElm:this.checkBackgroundElm,language:this.props.language,editBackground:this.props.editBackground,selectedElem:_,isZoom:E,onZoomClick:this.onZoomClick,mesh3DObject:S,backToModuleCallback:this.backToModuleCallback,isTeamJerseyData:this.props.isTeamJerseyData,isGrid:C,onGridClick:this.onGridClick,isGridApply:x,currBackgroundElms:w,timesProdLoad:k,showControlOptions:I,preview3DTabStatus:this.preview3DTabStatus,sides:s,sideSelected:this.sideSelected,base64forMultiLayer3DPreview:this.base64forMultiLayer3DPreview}),this.renderSaveDesignModal(),this.renderNoPrintModal()))}}]),o}(f.a.Component);t.b=Object(v.b)((function(e){return{activeProductSideData:e.productCanvasReducer.product_sides[e.productCanvasReducer.active_product_side],activeProductSide:e.productCanvasReducer.active_product_side,globalSettings:e.globalSettingReducer.global_settings_data,printProfileReducer:e.printProfileReducer,engraveStatus:e.productCanvasReducer.engraveSides,printProfiles:e.printProfileReducer.active_print_profile_list,printProfileData:e.printProfileReducer.print_profile_data,faceData:e.productCanvasReducer.faceData,activeSide:e.productCanvasReducer.active_product_side,productDetails:e.productCanvasReducer.product_details,extraDetails:e.productCanvasReducer.product_extra_details,customerData:e.customerReducer?e.customerReducer.items:0,language:e.languageReducer.translation_data.filter((function(t){return t.langCode===e.languageReducer.default_lang}))[0],minProdQty:e.productCanvasReducer.quantity,customPrintAreaDimen:e.productCanvasReducer.customPrintAreaDimension,uploadedImgReducer:e.ImageReducer,cartColorPricing:e.productCanvasReducer.cartColorPricing,layerData:e.productCanvasReducer.layer_data,productCanvasData:e.productCanvasReducer,productCanvasReducer:e.productCanvasReducer,licenceAddOns:e.productCanvasReducer.licenceAddOns,selectedPrintProfileData:e.printProfileReducer.print_profile_data.filter((function(t){return t.id===e.printProfileReducer.selected_print_profile}))[0],allSideElements:e.saveTemplate.allSideElements,configuratorSideList:e.ConfiguratorDesignData,colorPaletteReducer:e.colorPaletteReducer}}))(Dt)},189:function(e,t,a){"use strict";var r=a(10),n=a(11),i=a(16),o=a(15),s=a(0),l=a.n(s),c=a(5),u=a(407),d=a(408),p=a.n(d),m=a(193),h=a(409),g=a(3),f=a(410),v=a.n(f),b=a(411),A=a.n(b),y=a(412),_=a.n(y),E=a(413),S=a.n(E),C=a(414),x=a.n(C),w=a(415),k=a.n(w),I=function(){function e(){Object(r.a)(this,e)}return Object(n.a)(e,null,[{key:"getTexture",value:function(){return[v.a,S.a,A.a,x.a,_.a,k.a]}}]),e}(),N={height:512,width:512,outline:"none"},O=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).state={resourceLoaded:!0,modelColor:"",isColorUpdated:!0},n.scenePreviewSetup=function(){n.index=0,n.changeModelColor(),n.setimagerectangle=n.settingsJson.imageRectangle,n.materialType=n.settingsJson.material,n.mesh="",n.material="",n.direction=n.settingsJson.direction,n.rotateSpeed=n.settingsJson.rotateSpeed,n.rotateAngle=0,n.scale=n.settingsJson.scale;var e=n.stageCanvas.clientWidth,t=n.stageCanvas.clientHeight;n.scene=new c.fb,n.scene.background=new c.i(16777215),n.camera=new c.V(40,e/t,.1,100),n.scene.add(n.camera),n.group=new c.T,n.objLoader=new m.a,n.gltfLoader=new h.a,n.scene.add(n.group),n.cameraConfiguration(),n.controls=new u.a(n.camera,n.stageCanvas),n.controlsConfiguration(),n.renderer=new c.ub({alpha:!0,antialias:!0,preserveDrawingBuffer:!0}),n.RendererConfiguration(),n.addCustomSceneObjects(),n.startAnimationLoop()},n.cameraConfiguration=function(){n.camera.position.x=0,n.camera.position.y=0,n.camera.position.z=5,n.camera.lookAt(new c.sb(.5,.25,0))},n.controlsConfiguration=function(){n.controls.autoRotate=!0,n.controls.autoRotateSpeed=.2,n.controls.enableZoom=!0,n.controls.enablePan=!0,n.controls.zoomSpeed=1,n.controls.enableDamping=!0,n.controls.dampingFactor=.25,n.controls.minPolarAngle=0,n.controls.maxPolarAngle=Math.PI/3,n.settingsJson.enable360&&(n.controls.maxPolarAngle=120),n.controls.minDistance=n.settingsJson.minDistance,n.controls.maxDistance=40,n.addLights(),"basic"===n.settingsJson.material&&n.addDirectionalLight(),n.addBackground(),n.controls.update(),n.controls.addEventListener("change",(function(){return n.renderer.render(n.scene,n.camera)}))},n.RendererConfiguration=function(){n.renderer.setPixelRatio(window.devicePixelRatio),n.renderer.setSize(512,512),n.renderer.shadowMap.enabled=!0,n.stageCanvas.appendChild(n.renderer.domElement)},n.loadOBJFile=function(){n.objLoader.load(n.modelLink,(function(e){n.group.add(e),n.mesh=e,n.mesh.scale.set(n.scale,n.scale,n.scale),n.mesh.position.x=n.settingsJson.meshPositionX,n.mesh.position.y=n.settingsJson.meshPositionY,n.loadMaterialToModel()}),(function(e){}),(function(e){console.log(e,"An error happened")}))},n.loadGlTFModel=function(){n.gltfLoader.load(n.modelLink,(function(e){n.mesh=e.scene,n.mesh.traverse((function(e){e.isMesh&&(e.castShadow=!0,e.receiveShadow=!0)})),n.mesh.scale.set(n.scale,n.scale,n.scale),n.mesh.position.x=n.settingsJson.meshPositionX,n.mesh.position.y=n.settingsJson.meshPositionY,n.scene.add(n.mesh),n.loadMaterialToModel()}),(function(e){}),(function(e){console.error("An error happened",e)}))},n.loadMaterialToModel=function(){n.settingsJson.hasOwnProperty("previewType")&&"coordinates"===n.settingsJson.previewType?(n.addColorRectangle(),n.drawImgCanvas()):"gloss"===n.materialType?n.createGlossyMattByName():n.createMattMaterialByName()},n.createMattMaterialByName=function(){if(n.settingsJson.colorMap)for(var e=0;e<n.settingsJson.colorMap.length;e++){var t=new c.N({color:parseInt("".concat(0,"x",n.settingsJson.colorMap[e].color.replace("#",""))),side:c.l,roughness:1,metalness:.5});n.setMaterial(n.mesh,n.settingsJson.colorMap[e].id,t,"")}if(n.settingsJson.PrintMap)for(var a=function(e){var t=new Image;t.src=n.designData[e],t.onload=function(){var a=(new c.ob).load(t.src),r=new c.N({map:a});n.setMaterial(n.mesh,n.settingsJson.PrintMap[e].id,r)}},r=0;r<n.settingsJson.PrintMap.length;r++)a(r);n.setState({resourceLoaded:!1})},n.createGlossyMattByName=function(){var e=I.getTexture(),t=(new c.j).load(e);if(n.settingsJson.colorMap)for(var a=0;a<n.settingsJson.colorMap.length;a++){var r=new c.M({color:parseInt("".concat(0,"x",n.settingsJson.colorMap[a].color.replace("#",""))),side:c.l,envMap:t,shininess:n.settingsJson.shininess,reflectivity:n.settingsJson.reflectivity});n.setMaterial(n.mesh,n.settingsJson.colorMap[a].id,r,"")}if(n.settingsJson.PrintMap)for(var i=function(e){var a=new Image;a.src=n.designData[e],a.onload=function(){var r=(new c.ob).load(a.src);r.minFilter=c.B;var i=new c.M({color:"#CCCCCC",map:r,side:c.l,envMap:t,shininess:n.settingsJson.shininess,reflectivity:n.settingsJson.reflectivity});n.setMaterial(n.mesh,n.settingsJson.PrintMap[e].id,i)}},o=0;o<n.settingsJson.PrintMap.length;o++)i(o);n.setState({resourceLoaded:!1})},n.loadCustomGeometry=function(){new c.e(5,5,5)},n.addCustomSceneObjects=function(){""===n.mesh&&"object"!==typeof n.mesh&&100===n.props.mesh3DObject.loadingValue?(n.mesh=n.props.mesh3DObject.mesh,n.group.add(n.mesh),n.mesh.scale.set(n.scale,n.scale,n.scale),n.mesh.position.x=n.settingsJson.meshPositionX,n.mesh.position.y=n.settingsJson.meshPositionY,n.loadMaterialToModel()):"glb"===n.fileType?n.loadGlTFModel():n.loadOBJFile()},n.startAnimationLoop=function(){n.renderer.render(n.scene,n.camera),"undefined"!=typeof n.mesh&&""!=n.mesh&&n.settingsJson.enableSwipe&&(n.requestID=window.requestAnimationFrame(n.startAnimationLoop),n.rotateObject(n.rotateAngle),n.rotateAngle+=1,n.rotateAngle>360/n.rotateSpeed&&(n.rotateAngle=0))},n.rotateObject=function(e){n.mesh.rotation.y=n.direction*Math.PI*e*n.rotateSpeed/180,n.renderer.render(n.scene,n.camera)},n.handleWindowResize=function(){var e=n.stageCanvas.clientWidth,t=n.stageCanvas.clientHeight;n.renderer.setSize(e,t),n.camera.aspect=e/t,n.camera.updateProjectionMatrix()},n.addLights=function(){var e=new c.a(16777215);e.intensity=1.2,"basic"!==n.settingsJson.material&&n.scene.add(e);var t=new c.r(16777147,526368,1);t.intensity=1,n.scene.add(t)},n.addDirectionalLight=function(){var e=new c.k(16777215,.54);e.position.set(-8,12,8),e.castShadow=!0,e.shadow.mapSize=new c.rb(1024,1024),n.scene.add(e),n.controls.update()},n.drawImgCanvas=function(){if(n.designData.constructor===Array&&n.index<n.designData.length){var e=new Image;e.onload=function(){n.rotate64(e.src,360,!0,n.setimagerectangle[n.index][2],n.setimagerectangle[n.index][3]).then((function(e){var t=new Image;t.onload=function(){n.ctx.drawImage(t,n.setimagerectangle[n.index][0],n.setimagerectangle[n.index][1],n.setimagerectangle[n.index][2],n.setimagerectangle[n.index][3]),n.index++,n.index!==n.designData.length?n.drawImgCanvas():(n.mesh.traverse((function(e){e instanceof c.K&&(e.material=n.material,n.setState({resourceLoaded:!1,isColorUpdated:!0}))})),n.startAnimationLoop())},t.src=e}))},e.src=n.designData[n.index]}},n.rotate64=function(e,t,a,r,i){return new Promise((function(r,i){t=t||90;var o=document.createElement("canvas");o.setAttribute("id","hiddenmy3Dcanvas"),o.style.display="none",document.body.appendChild(o);var s=o.getContext("2d"),l=new Image;l.src=(-1==e.indexOf(",")?"data:image/png;base64,":"")+e,l.onload=function(){var e=l.width,i=l.height;if(n.settingsJson.multiBoundaryCapture)e=l.width,i=l.height;var c=t*Math.PI/180,u=Math.cos(c),d=Math.sin(c);d<0&&(d=-d),u<0&&(u=-u),o.width=i*d+e*u,o.height=i*u+e*d,s.translate(o.width/2,o.height/2),s.rotate(t*Math.PI/180),s.drawImage(l,-l.width/2,-l.height/2),r(a?o.toDataURL():o.toDataURL().split(",")[1]),document.body.removeChild(o)},l.onerror=function(){i("Unable to rotate data\n"+l.src)}}))},n.addColorRectangle=function(){if(n.ctx.fillStyle="#FFF",n.ctx.fillRect(0,0,n.canvas.width,n.canvas.height),n.settingsJson.colorRectangle&&n.settingsJson.colorRectangleValue&&n.settingsJson.colorRectangle.length==n.settingsJson.colorRectangleValue.length){for(var e=[],t=0;t<n.settingsJson.colorRectangle.length;t++)e.push({x:n.settingsJson.colorRectangle[t][0],y:n.settingsJson.colorRectangle[t][1],w:n.settingsJson.colorRectangle[t][2],h:n.settingsJson.colorRectangle[t][3],fill:n.settingsJson.colorRectangleValue[t][0]});for(var a in e){var r=e[a];n.ctx.fillStyle=r.fill,n.ctx.fillRect(r.x,r.y,r.w,r.h)}}var i=new c.nb(n.canvas);if(i.needsUpdate=!0,"matt"===n.materialType)n.material=new c.N({color:n.settingsJson.color,map:i,side:c.l,roughness:n.settingsJson.roughness,metalness:n.settingsJson.metalness});else if("glossy"===n.settingsJson.material){var o=I.getTexture(),s=(new c.j).load(o);n.material=new c.M({color:n.settingsJson.color,map:i,side:c.l,shininess:n.settingsJson.shininess,envMap:s,reflectivity:n.settingsJson.reflectivity})}else n.material=new c.M({color:n.settingsJson.color,map:i,side:c.l,shininess:n.settingsJson.basicMat?n.settingsJson.basicMat.shininess:20,reflectivity:n.settingsJson.basicMat?n.settingsJson.basicMat.reflectivity:10})},n.addBackground=function(){var e=(new c.ob).load(p.a,(function(){e.needsUpdate=!0;var t=new c.e(.01,1.2,1.55),a=new c.M({color:16777215,map:e}),r=new c.K(t,a);r.position.x=.5,r.position.y=.27,r.position.z=0,r.rotation.z=-12*Math.PI/180,n.scene.add(r),n.scene.remove(r),n.startAnimationLoop()}))},n.cropImage=function(){if(n.cropIndex<n.designData.length){var e=new Image;e.onload=function(){var t={x:n.dimension[n.cropIndex].x,y:n.dimension[n.cropIndex].y,width:n.dimension[n.cropIndex].width,height:n.dimension[n.cropIndex].height};n.getCroppedImg(e,t).then((function(e){n.designData[n.cropIndex]=e,n.cropIndex++,n.cropIndex!==n.designData.length?n.cropImage():n.scenePreviewSetup()}))},e.src=n.designData[n.cropIndex]}},n.getCroppedImg=function(e,t){return new Promise((function(a,r){var n=document.createElement("canvas"),i=e.naturalWidth/e.width,o=e.naturalHeight/e.height;n.width=t.width,n.height=t.height,n.getContext("2d").drawImage(e,t.x*i,t.y*o,t.width*i,t.height*o,0,0,t.width,t.height),a(n.toDataURL())}))},n.changeModelColor=function(){if(n.settingsJson.enableEditColor&&n.settingsJson.hasOwnProperty("enableEditColor")&&n.props.selectedColor&&n.props.selectedColor.hasOwnProperty("hex_code"))if(n.setState({modelColor:n.props.selectedColor.hex_code}),n.settingsJson.colorRectangle&&0===n.settingsJson.colorRectangleFor3D.length)n.settingsJson.colorRectangle=[],n.settingsJson.colorRectangleValue=[],n.settingsJson.colorRectangle.push([0,0,1024,1024]),n.settingsJson.colorRectangleValue.push([n.props.selectedColor.hex_code,"default"]);else if(n.settingsJson.colorRectangle&&n.settingsJson.colorRectangle.length>0&&n.settingsJson.colorRectangleValue&&n.settingsJson.colorRectangle.length==n.settingsJson.colorRectangleValue.length)for(var e="",t=0;t<n.settingsJson.sortedColorSideName.length;t++){e=n.settingsJson.sortedColorSideName[t].sideName;for(var a=0;a<n.settingsJson.colorRectangleValue.length;a++)n.settingsJson.colorRectangleValue[a][1]===e&&(n.settingsJson.colorRectangleValue[a][0]=n.props.selectedColor.hex_code)}},n.isHexColor=function(e){return"string"===typeof e&&6===e.length&&!isNaN(Number("0x"+e))},n}return Object(n.a)(a,[{key:"componentDidMount",value:function(){var e=this;if(this.canvas=this.refs.productsvgcanvas,this.canvas.width=1024,this.canvas.height=1024,this.ctx=this.canvas.getContext("2d"),this.currentSideDesignData="",this.designData=[],this.settingsJson={},this.cropIndex=0,this.props.json3DData&&1===this.props.json3DData.is_3d_preview){this.modelLink=this.props.json3DData["3d_object_file"],this.fileType=this.modelLink.split(".").pop();try{this.settingsJson=JSON.parse(this.props.json3DData["3d_object"])}catch(n){return!1}var t="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII=";this.dimension=[],this.noOfBoundary=[];for(var a=0;a<this.props.json3DData.sides.length;a++)if(this.settingsJson.multiBoundaryCapture){this.noOfBoundary.push(this.props.json3DData.sides[a].decoration_settings.length);for(var r=0;r<this.props.json3DData.sides[a].decoration_settings.length;r++)this.dimension.push(JSON.parse(this.props.json3DData.sides[a].decoration_settings[r].dimension))}else this.dimension.push(JSON.parse(this.props.json3DData.sides[a].decoration_settings[0].dimension));this.settingsJson.multiBoundaryCapture?g.a.exportMultiBoundaryPng("","true",(function(a){var r=e.props.base64forMultiLayer3DPreview;r[e.props.sideIndex]=a;for(var n=0;n<e.noOfBoundary.length;n++){var i=[];if(void 0==r[n]){for(var o=0;o<e.noOfBoundary[n];o++)i.push(t);r[n]=i}}var s=[];for(var l in r)for(var c in r[l])s.push(r[l][c]);e.designData=s,e.cropImage()})):g.a.exportFaceData("",!0,"",(function(a){if(e.currentSideDesignData=a.designUrl,e.props.faceData.length>0)for(var r=0;r<e.props.objectOnStage.length;r++)0==e.props.objectOnStage[r]?e.designData[r]=t:e.props.sideIndex==r?e.designData[r]=e.currentSideDesignData:e.designData[r]=e.props.faceData[r].designUrl;else for(r=0;r<e.props.objectOnStage.length;r++)0==e.props.objectOnStage[r]?e.designData[r]=t:e.designData[r]=e.currentSideDesignData;e.cropImage()}))}else this.setState({resourceLoaded:!1})}},{key:"componentWillUnmount",value:function(){this.controls&&(window.removeEventListener("resize",this.handleWindowResize),window.cancelAnimationFrame(this.requestID),this.controls.dispose(),this.stageCanvas.removeChild(this.renderer.domElement),this.renderer.domElement=void 0,this.renderer.forceContextLoss())}},{key:"setMaterial",value:function(e,t,a){e.traverse((function(e){e instanceof c.K&&e.name===t&&(e.material=a)}))}},{key:"componentDidUpdate",value:function(e,t){this.settingsJson.enableEditColor&&this.settingsJson.hasOwnProperty("enableEditColor")&&this.props.selectedColor&&this.props.selectedColor.hasOwnProperty("hex_code")&&this.isHexColor("".concat(e.selectedColor.hex_code.replace("#","")))&&this.isHexColor("".concat(t.modelColor.replace("#","")))&&e.selectedColor.hex_code!==t.modelColor&&this.props.isColorChange&&this.state.isColorUpdated&&(this.index=0,this.setState({isColorUpdated:!1}),this.changeModelColor(),this.loadMaterialToModel())}},{key:"render",value:function(){var e=this;return l.a.createElement(s.Fragment,null,l.a.createElement("canvas",{className:"hidden",ref:"productsvgcanvas",width:500,height:500,id:"productsvgcanvas"}),l.a.createElement("div",{className:"canvasWrap-stage wrap3D",style:N,ref:function(t){return e.stageCanvas=t}}),this.state.resourceLoaded&&l.a.createElement("div",{className:"loader"},l.a.createElement("div",{className:"lds-ring"},l.a.createElement("div",null),l.a.createElement("div",null),l.a.createElement("div",null),l.a.createElement("div",null)),l.a.createElement("h3",{className:"loader-title"},"Loading 3D"),l.a.createElement("h4",{className:"loader-text"},this.props.language.image.uploadMessage)))}}]),a}(s.Component);a.d(t,"a",(function(){return O}))},190:function(e,t,a){"use strict";a.d(t,"d",(function(){return o})),a.d(t,"a",(function(){return s})),a.d(t,"c",(function(){return l})),a.d(t,"b",(function(){return c}));var r=a(7),n=a(12),i=a(60);function o(e,t){return function(a){return t||a(u()),function(e){return i.get(n.a.base_path+"/graphic-fonts/all",{params:e},{headers:{"Content-Type":"application/json"}})}(e).then((function(e){return t&&(t.push.apply(t,Object(r.a)(e.data.data)),e.data.data=Object(r.a)(t)),a(d(e.data)),e.data})).catch((function(e){a(p(e))}))}}var s="FETCH_GRAPHIC_FONTS_BEGIN",l="FETCH_GRAPHIC_FONTS_SUCCESS",c="FETCH_GRAPHIC_FONTS_FAILURE",u=function(){return{type:s}},d=function(e){return{type:l,payload:e}},p=function(e){return{type:c,payload:{error:e}}}},2:function(e,t,a){"use strict";a.d(t,"w",(function(){return y})),a.d(t,"i",(function(){return _})),a.d(t,"D",(function(){return E})),a.d(t,"H",(function(){return S})),a.d(t,"G",(function(){return C})),a.d(t,"j",(function(){return w})),a.d(t,"h",(function(){return k})),a.d(t,"f",(function(){return P})),a.d(t,"e",(function(){return D})),a.d(t,"C",(function(){return R})),a.d(t,"E",(function(){return T})),a.d(t,"F",(function(){return L})),a.d(t,"u",(function(){return M})),a.d(t,"o",(function(){return B})),a.d(t,"A",(function(){return j})),a.d(t,"k",(function(){return F})),a.d(t,"p",(function(){return U})),a.d(t,"l",(function(){return G})),a.d(t,"m",(function(){return W})),a.d(t,"c",(function(){return Q})),a.d(t,"s",(function(){return Z})),a.d(t,"v",(function(){return X})),a.d(t,"t",(function(){return K})),a.d(t,"r",(function(){return ee})),a.d(t,"q",(function(){return te})),a.d(t,"n",(function(){return ae})),a.d(t,"a",(function(){return re})),a.d(t,"b",(function(){return ne})),a.d(t,"B",(function(){return ie})),a.d(t,"z",(function(){return oe})),a.d(t,"y",(function(){return se})),a.d(t,"d",(function(){return le})),a.d(t,"x",(function(){return ce})),a.d(t,"g",(function(){return ue}));var r=a(36),n=(a(7),a(22)),i=a.n(n),o=(a(142),a(108)),s=a(8),l=a(32),c=a(40),u=a(101),d=a(18),p=a(28),m=Object(o.a)(i.a),h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",g="a,circle,ellipse,foreignObject,g,image,line,path,polygon,polyline,rect,svg,text,tspan,use".split(","),f=null,v=null,b=null,A=null,y=function(e){f=e,v=e.getDOMDocument(),b=e.getDOMContainer(),A=e.getSVGRoot()},_=function(e){return e.replace(/(<!DOCTYPE\s+\w*\s*\[).*(\?]>)/,"$1$2")},E=function(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")};function S(e,t){return function(e){for(var t=[],a=e.length-1;a>=0;a--)t.unshift(["&#",e[a].charCodeAt(),";"].join(""));return t.join("")}(x(e,t))}function C(e,t){return x(e,function(e){return e.replace(/&#(\d+);/g,(function(e,t){return String.fromCharCode(t)}))}(t))}function x(e,t){for(var a=[],r="",n=1;n<=255;n++)a[String.fromCharCode(n)]=n;for(var i=n=0;n<t.length;n++)r+=String.fromCharCode(a[t.substr(n,1)]^a[e.substr(i,1)]),i=i<e.length?i+1:0;return r}function w(e){if(e=O(e),window.btoa)return window.btoa(e);var t=new Array(4*Math.floor((e.length+2)/3)),a=0,r=0;do{var n=e.charCodeAt(a++),i=e.charCodeAt(a++),o=e.charCodeAt(a++),s=n>>2,l=(3&n)<<4|i>>4,c=(15&i)<<2|o>>6,u=63&o;isNaN(i)?(c=64,u=64):isNaN(o)&&(u=64),t[r++]=h.charAt(s),t[r++]=h.charAt(l),t[r++]=h.charAt(c),t[r++]=h.charAt(u)}while(a<e.length);return t.join("")}function k(e){if(window.atob)return I(window.atob(e));e=e.replace(/[^A-Za-z\d+/=]/g,"");var t="",a=0;do{var r=h.indexOf(e.charAt(a++)),n=h.indexOf(e.charAt(a++)),i=h.indexOf(e.charAt(a++)),o=h.indexOf(e.charAt(a++)),s=r<<2|n>>4,l=(15&n)<<4|i>>2,c=(3&i)<<6|o;t+=String.fromCharCode(s),64!==i&&(t+=String.fromCharCode(l)),64!==o&&(t+=String.fromCharCode(c))}while(a<e.length);return I(t)}function I(e){return decodeURIComponent(escape(e))}var N,O=function(e){return unescape(encodeURIComponent(e))},P=function(e){if("undefined"===typeof Uint8Array||"undefined"===typeof Blob||"undefined"===typeof URL||!URL.createObjectURL)return"";for(var t=e.split(","),a=t[0].match(/:(.*?);/)[1],r=atob(t[1]),n=r.length,i=new Uint8Array(n);n--;)i[n]=r.charCodeAt(n);var o=new Blob([i],{type:a});return URL.createObjectURL(o)},D=function(e,t){if("undefined"===typeof Uint8Array||"undefined"===typeof Blob||"undefined"===typeof URL||!URL.createObjectURL)return"";for(var a=e.split(","),r=a[0].match(/:(.*?);/)[1],n=atob(a[1]),i=n.length,o=new Uint8Array(i);i--;)o[i]=n.charCodeAt(i);return new File([o],"image_"+t+".png",{type:r})},R=("undefined"===typeof Blob||(N=new Blob(["<html><head><title>SVG-edit</title></head><body>&nbsp;</body></html>"],{type:"text/html"}))&&"undefined"!==typeof URL&&URL.createObjectURL&&URL.createObjectURL(N),function(e){var t,a;e.includes("<svg:svg")&&(e=e.replace(/<(\/?)svg:/g,"<$1").replace("xmlns:svg","xmlns"));try{(a=window.DOMParser?new DOMParser:new window.ActiveXObject("Microsoft.XMLDOM")).async=!1}catch(r){throw new Error("XML Parser could not be instantiated")}try{t=a.loadXML?!!a.loadXML(e)&&a:a.parseFromString(e,"text/xml")}catch(n){throw new Error("Error parsing XML string")}return t}),T=function e(t,a){if(t&&1===t.nodeType){a(t);for(var r=t.childNodes.length;r--;)e(t.childNodes.item(r),a)}},L=function(e,t){if(e&&1===e.nodeType){for(var a=e.childNodes.length;a--;)T(e.childNodes.item(a),t);t(e)}},M=function(e){if(e){if(e.startsWith('url("'))return e.substring(5,e.indexOf('"',6));if(e.startsWith("url('"))return e.substring(5,e.indexOf("'",6));if(e.startsWith("url("))return e.substring(4,e.indexOf(")"))}return null},B=function(e){return e.getAttributeNS(s.a.XLINK,"href")},j=function(e,t){e.setAttributeNS(s.a.XLINK,"xlink:href",t)},F=function(){var e=f.getSVGContent(),t=e.getElementsByTagNameNS(s.a.SVG,"defs");return t.length>0?t=t[0]:(t=e.ownerDocument.createElementNS(s.a.SVG,"defs"),e.firstChild?e.insertBefore(t,e.firstChild.nextSibling):e.append(t)),t},U=function(e){for(var t=e.pathSegList,a=t.numberOfItems,r=[[],[]],n=t.getItem(0),i=[n.x,n.y],o=function(e,t,a,r){return function(n){return 1-Math.pow(n,3)*i[e]+3-Math.pow(n,2)*n*t[e]+3*(1-n)*Math.pow(n,2)*a[e]+Math.pow(n,3)*r[e]}},s=0;s<a;s++){var l=t.getItem(s);if(void 0!==l.x)if(r[0].push(i[0]),r[1].push(i[1]),l.x1){for(var c=[l.x1,l.y1],u=[l.x2,l.y2],d=[l.x,l.y],p=0;p<2;p++){var m=o(p,c,u,d),h=6*i[p]-12*c[p]+6*u[p],g=-3*i[p]+9*c[p]-9*u[p]+3*d[p],f=3*c[p]-3*i[p];if(0!==g){var v=Math.pow(h,2)-4*f*g;if(!(v<0)){var b=(-h+Math.sqrt(v))/(2*g);b>0&&b<1&&r[p].push(m(b));var A=(-h-Math.sqrt(v))/(2*g);A>0&&A<1&&r[p].push(m(A))}}else{if(0===h)continue;var y=-f/h;y>0&&y<1&&r[p].push(m(y))}}i=d}else r[0].push(l.x),r[1].push(l.y)}var _=Math.min.apply(null,r[0]),E=Math.max.apply(null,r[0])-_,S=Math.min.apply(null,r[1]);return{x:_,y:S,width:E,height:Math.max.apply(null,r[1])-S}};function V(e){if(Object(p.i)())try{return e.getBBox()}catch(s){}var t,a,r=m.data(e,"ref"),n=null;r?(a=m(r).children().clone().attr("visibility","hidden"),m(A).append(a),n=a.filter("line, path")):n=m(e).find("line, path");var i=!1;if(n.length)if(n.each((function(){var e=this.getBBox();e.width&&e.height||(i=!0)})),i){var o=r?a:m(e).children();t=Z(o)}else t=e.getBBox();else t=e.getBBox();return r&&a.remove(),t}var G=function(e){var t=e||f.geSelectedElements()[0];if(1!==e.nodeType)return null;var a,r=t.nodeName,n=null;switch(r){case"text":""===t.textContent?(t.textContent="a",n=t.getBBox(),t.textContent=""):t.getBBox&&(n=t.getBBox());break;case"path":if(Object(p.l)()){if(t.getBBox)try{n=t.getBBox()}catch(d){}}else try{n=U(t)}catch(d){}break;case"g":case"a":n=V(t);break;default:if("use"===r&&(n=V(t)),"use"===r||"foreignObject"===r&&Object(p.g)()){if(n||(n=t.getBBox()),!Object(p.g)()){var i=n,o=i.x,s=i.y;n={width:i.width,height:i.height,x:o+parseFloat(t.getAttribute("x")||0),y:s+parseFloat(t.getAttribute("y")||0)}}}else if(g.includes(r))if(t)try{n=t.getBBox()}catch(h){var l=t.getExtentOfChar(0),c=t.getComputedTextLength();n={x:l.x,y:l.y,width:c,height:l.height}}else{var u=m(t).closest("foreignObject");u.length&&u[0].getBBox&&(n=u[0].getBBox())}}return n&&(n={x:(a=n).x,y:a.y,width:a.width,height:a.height}),n},q=function(e){var t="";return m.each(e,(function(e,a){var n=Object(r.a)(a,2),i=n[0],o=n[1];t+=i;for(var s=0;s<o.length;s+=2)t+=o[s]+","+o[s+1]+" "})),t},H=function(e){var t,a,r,n,i=1.81;switch(e.tagName){case"ellipse":case"circle":var o=a=m(e).attr(["rx","ry","cx","cy"]),s=o.cx,l=o.cy,c=a;r=c.rx,n=c.ry,"circle"===e.tagName&&(r=n=m(e).attr("r")),t=q([["M",[s-r,l]],["C",[s-r,l-n/i,s-r/i,l-n,s,l-n]],["C",[s+r/i,l-n,s+r,l-n/i,s+r,l]],["C",[s+r,l+n/i,s+r/i,l+n,s,l+n]],["C",[s-r/i,l+n,s-r,l+n/i,s-r,l]],["Z",[]]]);break;case"path":t=e.getAttribute("d");break;case"line":t="M"+(a=m(e).attr(["x1","y1","x2","y2"])).x1+","+a.y1+"L"+a.x2+","+a.y2;break;case"polyline":t="M"+e.getAttribute("points");break;case"polygon":t="M"+e.getAttribute("points")+" Z";break;case"rect":var u=m(e).attr(["rx","ry"]);r=u.rx,n=u.ry;var d=e.getBBox(),p=d.x,h=d.y,g=d.width,f=d.height;i=4-i,t=q(r||n?[["M",[p,h+n]],["C",[p,h+n/i,p+r/i,h,p+r,h]],["L",[p+g-r,h]],["C",[p+g-r/i,h,p+g,h+n/i,p+g,h+n]],["L",[p+g,h+f-n]],["C",[p+g,h+f-n/i,p+g-r/i,h+f,p+g-r,h+f]],["L",[p+r,h+f]],["C",[p+r/i,h+f,p,h+f-n/i,p,h+f-n]],["L",[p,h+n]],["Z",[]]]:[["M",[p,h]],["L",[p+g,h]],["L",[p+g,h+f]],["L",[p,h+f]],["L",[p,h]],["Z",[]]])}return t},z=function(e){var t={};return m.each(["marker-start","marker-end","marker-mid","filter","clip-path"],(function(){var a=e.getAttribute(this);a&&(t[this]=a)})),t},W=function(e,t,a){var r=t({element:"path",attr:z(e)}),n=e.getAttribute("transform");n&&r.setAttribute("transform",n);var i=e.parentNode;e.nextSibling?e.before(r):i.append(r);var o=H(e);o?r.setAttribute("d",o):r.remove(),a.resetOrientation(r);var s=!1;try{s=r.getBBox()}catch(l){}return r.remove(),s},Q=function(e,t,a,r,n,i,o,s){var c=new o.BatchCommand("Convert element to Path"),u=a({element:"path",attr:t=m.extend({},t,z(e))}),p=e.getAttribute("transform");p&&u.setAttribute("transform",p);var h=e.id,g=e.parentNode;e.nextSibling?e.before(u):g.append(u);var f=H(e);if(f){if(u.setAttribute("d",f),p){var v=Object(l.b)(u);Object(d.b)(v)&&r.resetOrientation(u)}var b=e.nextSibling;return c.addSubCommand(new o.RemoveElementCommand(e,b,window.parent)),c.addSubCommand(new o.InsertElementCommand(u)),n(),e.remove(),u.setAttribute("id",h),u.removeAttribute("visibility"),i([u],!0),s(c),u}return u.remove(),null};var J=function(e,t,a){var r=G(e);if(!r)return null;var n=Object(l.b)(e),i=$(n),o=Object(d.b)(n);if(i||o){var s=!1;if(function(e,t){var a=e%90;return t||!(a>-.001&&a<.001||(a<-89.99||a>89.99))}(i,o)){if(["ellipse","path","line","polyline","polygon"].includes(e.tagName))r=s=W(e,t,a);else if("rect"===e.tagName){var c=e.getAttribute("rx"),u=e.getAttribute("ry");(c||u)&&(r=s=W(e,t,a))}}if(!s){var p=Object(d.h)(n).matrix;r=Object(d.g)(r.x,r.y,r.width,r.height,p).aabox}}return r};function Y(e){var t=e.getAttribute("stroke-width");return isNaN(t)||"none"===e.getAttribute("stroke")?0:t/2}var Z=function(e,t,a){if(!e||!e.length)return!1;var r;if(m.each(e,(function(){r||this.parentNode&&(r=J(this,t,a))})),void 0===r)return null;var n=r.x+r.width,i=r.y+r.height,o=r.x,s=r.y;if(1===e.length){var l=Y(e[0]);o-=l,s-=l,n+=l,i+=l}else m.each(e,(function(e,r){var l=J(r,t,a);if(l){var c=Y(r);o=Math.min(o,l.x-c),s=Math.min(s,l.y-c),1===r.nodeType&&(n=Math.max(n,l.x+l.width+c),i=Math.max(i,l.y+l.height+c))}}));return r.x=o,r.y=s,r.width=n-o,r.height=i-s,r},X=function(e){e||(e=m(f.getSVGContent()).children());var t=[];return m(e).children().each((function(e,a){a.getBBox&&t.push(a)})),t.reverse()},K=function(e){return e||(e=X()),Z(e,f.addSVGElementFromJson,f.pathActions)},$=function(e,t){if(!e)return 0;for(var a=e.numberOfItems,r=0;r<a;++r){var n=e.getItem(r);if(4===n.type)return t?n.angle*Math.PI/180:n.angle}return 0},ee=function(e,t){var a=e||f.getSelectedElements()[0],r=Object(l.b)(a);return $(r,t)},te=function(e){return ae(M(e).substr(1))},ae=Object(p.o)()?function(e){return A.querySelector("#"+e)}:Object(p.p)()?function(e){return v.evaluate('svg:svg[@id="svgroot"]//svg:*[@id="'+e+'"]',b,(function(){return s.a.SVG}),9,null).singleNodeValue}:function(e){return m(A).find("[id="+e+"]")[0]},re=function(e,t,a,n){for(var i=0,o=Object.entries(t);i<o.length;i++){var l=Object(r.a)(o[i],2),u=l[0],d=l[1],p="xml:"===u.substr(0,4)?s.a.XML:"xlink:"===u.substr(0,6)?s.a.XLINK:null;p?e.setAttributeNS(p,u,d):n?Object(c.f)(e,u,d):e.setAttribute(u,d)}},ne=function(e){var t={"fill-opacity":1,"stop-opacity":1,opacity:1,stroke:"none","stroke-dasharray":"none","stroke-linejoin":"miter","stroke-linecap":"butt","stroke-opacity":1,"stroke-width":1,rx:0,ry:0};"ellipse"===e.nodeName&&(delete t.rx,delete t.ry),Object.entries(t).forEach((function(t){var a=Object(r.a)(t,2),n=a[0],i=a[1];e.getAttribute(n)===String(i)&&e.removeAttribute(n)}))},ie=function(e){var t=f.getBaseUnit(),a=f.getSnappingStep();return"px"!==t&&(a*=Object(c.d)()[t]),e=Math.round(e/a)*a},oe=function(e){return String(e).replace(/[.\\+*?[^\]$(){}=!<>|:-]/g,"\\$&")},se=function(e){m(e).click((function(e){e.preventDefault()}))},le=function e(t,a){var r=document.createElementNS(t.namespaceURI,t.nodeName);if(m.each(t.attributes,(function(e,t){"-moz-math-font-style"!==t.localName&&r.setAttributeNS(t.namespaceURI,t.nodeName,t.value)})),r.removeAttribute("id"),r.id=a(),Object(p.g)()&&"path"===t.nodeName){var n=Object(u.b)(t);r.setAttribute("d",n)}if(t&&t.prefs&&(r.prefs=t.prefs),m.each(t.childNodes,(function(t,n){switch(n.nodeType){case 1:r.append(e(n,a));break;case 3:r.textContent=n.nodeValue}})),m(t).data("gsvg"))m(r).data("gsvg",r.firstChild);else if(m(t).data("symbol")){var i=m(t).data("symbol");m(r).data("ref",i).data("symbol",i)}else"image"===r.tagName&&se(r);return r},ce=function(e){return null===e||void 0===e},ue=function(e,t,a){var r;return function(){var n=this,i=arguments,o=function(){r=null,a||e.apply(n,i)},s=a&&!r;clearTimeout(r),r=setTimeout(o,t),s&&e.apply(n,i)}}},236:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAIAAAD2HxkiAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAACldJREFUeNrs3Wtv03YbwGEoZRyebRLivA22aYhNQki82vf/Apu2Fdi6lh62MppTW0jTloYkz/20kpenFJo4dg72db1AiIMLrn+9/3Yd53yv1zsHTM55EYIIQYSACEGEgAhBhIAIQYSACEGEgAhBhIAIQYSACEGEgAhBhIAIQYSACEGEgAhBhIAIQYSACEGEgAhBhMBsRLi1tbW6umpfM4vu379/8+bNXD/E/Bj+G+12u9ls+nQyi+LozftDzNnLMFkiBBGCCAERgggBEYIIARGCCAERgggBEYIIARGCCAERggiBnM1P+b9vbm7uzp07Pk+MolKpdDodEaaP8OHDhw4jRrG1tTXNEVqOgghBhIAIQYSACEGEgAhBhIAIQYSACEGEgAhBhIAIQYSACEGEgAhBhIAIQYSACEGEgAhBhIAIQYRARubtgkEcHBy02+0LFy5cvXrV3kCE49Dr9ba3txuNRr1ef/v27f/tsvn5a9eu3bp1K36Mn9tXiDB7r169WltbO9Fe4t27d7UjMRjvHYmf2GmIMButVuv58+fx4yB/uNPpRKv//PPP999/f/36dXuPdFyY+VcsPn/++ecBC0wcHh4uLCz89ddfdiAiHEmlUomWUr+p8srKytLSkt2ICFN68+bN4uLiiBt5+fJlLE3tTEQ4tHa7/fTp0263O/qmlpeXo2e7FBEOJ07n4rwuk01FyS9evCjPrsvkKxdlj/Dg4CCWkRlu8PXr1/V6vSR7L86Em82mikQ4kjiLy/zL+d9//12GXbezsxNfv169eqUiEY6kWq1mvs04LYzzzGLvt06ns7i42Ov1KpVK6kvKiPB/35qP5Wjmm41Ds1arFXvXra6u7u/vH9cYHQpJhOnP33LacrHPlGK/9Z9IW5GKML08xuCx4ylRSHEK/ccff8S07/+K4xszIkzp3bt3OW25wOeEyUK0n2EoQsYkJt7Gxsb7vx6nhfl9RRNhkeX3EqSLFy+WYSHa/1suz4gwjStXruS05UuXLhVyIbq3t/eh33XfrAjT+PTTT3Pa8meffVaShWii1Wrld7VZhIUVqeS0brx27VpJFqKGoQhHcv78+Rs3bmS+2f8cKc9CNFGr1Qp/q5AIs/fVV19Fitlu8/79+6VaiPYPTJdnRJhmat29ezfb88xbt24VaSF6fI/ogH/eilSEaXz99ddZPbkwhup3332X+Wid7EJ0qIfuxKp1Z2fHQSXC4Vy6dOnRo0eZlPPtt98W6ZLM4AvRfu6eEWEaUc6DBw9G3Mjt27eLdDY47EI04fKMCFP68ssvf/jhh7m5lDvk3r178deLtEPW19eHffpjUu/m5qYjSoRp3Llz58mTJ5cvXx7qb8X5ZORXsFPBZrM5ypNUXZ4Z7hCyC/p9/vnnP/7448uXL2MOnHlHcozNu3fvfvPNNwW7U3TAb81/xP7+/vb2dsHuWBDhGNcGc3Oxtoy64jCqVqvx44kaY+LF4XX9+vUbN24U8h7R1AvRE8NQhCIcbb/Mz988cu7oCQ7J/SJR3SeffFLg//iIC9FEo9E4PDws9r4S4fhcuHCheDdk57QQ7d/U5uZmwW4eymvxZRdMp93d3fE/Wjdm4OgL0f4VaSY9i5AJiAXw0yPj7DCyz/a9pQ4ODuKM2mdThDNpfX09juCtra1nz56Np8PjhWjmH8v3KkQ4qwvR5GaxRqMxng5jBsbHzXyz8e//0BseI8LptbS01F9dHMfPnz/PtcPMF6KJOCd0K6kIZ0ys395/SES9Xs+vw5wWoomI0OUZEc6Mdru9urp66m/l12FOC9FELEfj5NYnV4SzYXl5+SOvP8ijw1arldNC9MR498kV4QyIVeiZz4aIDn///fesOoxVYq4L0URMwvzecUCEZHZitri4OMifrNVq0WEmZ1kxA8fzxjXxr/XiJhFOu42NjUEeZ5Z0GOvSETuMhej6+vrY/oPunhHhVNvf319bWxvqr4w4D8e2EE0cHh42Gg2faxFOqeXl5RQ9VKvV1B2ObSHar/8tDRHhFKlUKqlHRHSY4kUPY16IJnZ2dgr8to0inFWdTmdlZWXEhofqMP7k4uLi+F+fcc7dMyKcTi9evBj91sqhOtzY2Jjgu+pubm5OpH8Rcrrd3d2sJkN0OMjjCff29j50R854uDwjwilyfH0yw6v2MWQ+/p3G8V8RPZW7Z0Q4LWIGZn7HZnQYmU3nQjSxvb3t8owIJy/OA+NsMKeTrlPn4cQXooahCNPLY/22srLS6XTym7EnOpyShWj/VwqXZ0Q4xNop8we9NBqNvN/E70SHU7IQTbTb7Vqt5ugS4UBiCbe1tbWwsJBVh7Gd5eXl8Zxz/vnnn+eO7ombnoWoFempPHf0Y2PweIDET6LDx48fp367mMTa2trYLkscH+gTeXTimV6/fh2nqVevXnWYmYRnjMH+IH/77bcRj+Y47FK83d+IHU7VQtQwFGGaMZjY2dn59ddfR7mgMqn7xaZTnBjbGyIcdAz2L6JiHqbrMI6595/gVGbtdrtardoPIhx0DPZ3GPPwzHdNe/+AG8/1mNliRSrC4cZgIvqMeThUh7FB7yB96p7M8K0vRFiKMdh/9Aw+D2N4+pL/IV7pK8Khx2Ci2WxGh2fOt263u7S0ZK9+SJwW5nfzkAgLOwaH6nBjYyPXR+vOulhNuDwjwjRjMBGBfaTDg4ODiTxIYrZ4ub0IU47B/g5/+eWXUzuMhai11plin4//qVMiLMgYTLRarejw8PCw/xfr9bpXkRuGIsx9DPZ3GOvSpMMYgK7HDK5SqZR5ySDCUcfgiXl4/OCmtbU1b445uCgw75d3ibDgYzCxt7cX8zBWoWO+UbsAyvytVBFmMwb7O1xYWPC+C8Pa3d2d2hd8iHBmxiCGoQgnPwYZRbVaHfbOeBEag2Sp2+2W8/JM2SM0Bq1IRWgM8q9Wq1XClz6XOkJj0DAUoTHISbVarWwvgC5vhMbgdOp2u5ubmyI0Bpmkst3PXdIIjcFptre3F18lRWgMMkmlWpGWMUJjcPqV6vJM6SI0BmdCqS7PlC5CY3BWlOcbhuWK0BicIfv7+yW5PFOuCI1Bw1CExiBDqNfrJx6fJUJjkLHq9Xpl+MZ9WSI0BmdURFj4Z4WU5e2y4yz/iy++cEzPordv316+fFmEM0+BWI4CIgQRAiIEEQIiBBECIgQRAiIEEQIiBBGCCAERgggBEYIIgYmY9sdb9Hq9ZrPp88Qout2uCNPrdDo//fSTwwjLUUCEIEJAhCBCQIQgQkCEIEJAhCBCQIQgQkCEIEJAhCBCQIQgQkCEIEJAhCBCQIQgQkCEIEJAhCBCQIQgQkCEIEJAhCBCQIQgQkCEIEJAhCBCQIQgQkCEIEJAhCBCECEgQhAhIEIQISBCECEgQhAhIEIQISBCECEgQhAhIEIQISBCECEgQhAhIEIQIZCx871ez14AEYIIARGCCAERgggBEYIIARGCCAERgggBEYIIARGCCAERgggBEYIIARGCCAERgggBEYIIARGCCAERgggBEYIIARHC7PqvAAMA/BkrMLAeft8AAAAASUVORK5CYII="},261:function(e,t,a){"use strict";var r=a(7),n=a(10),i=a(11),o=a(13),s=a(16),l=a(15),c=a(0),u=a.n(c),d=a(24),p=a(48),m=a(120),h=a.n(m),g=function(e){if(e.error)return u.a.createElement("div",null,e.language.main.errorInLoading);return u.a.createElement("div",{className:"fonts"===e.activeView?"fontWrap":"hidden"},u.a.createElement("div",{className:"scroll-bar-wrap font-section"},u.a.createElement("div",{className:"thumbView scrollbar fontList"+(e.fontCat&&e.fontCat.catData&&e.fontCat.catData.length?" add-search":"")},e.fontList&&e.fontList.length>0?u.a.createElement(h.a,{className:"listView-wrap",pageStart:0,loadMore:function(){return e.loadMoreFonts()},hasMore:e.hasMore,useWindow:!1},e.isCustomFontUpload&&u.a.createElement("div",{key:e.customFont.xe_id,className:"listView-elements"+(e.printProfileData&&e.printProfileData.text_data&&e.printProfileData.text_data.do_user_upload_fonts&&!e.isNameNumberElem&&!e.isTemplateElem&&!e.isTemplateAdmin?"":" hidden"),onClick:function(){return e.fontSelected(e.customFont,-1,"custom")}},!e.isVertical&&u.a.createElement("div",{className:"font-wrap"+(e.isCustomFontApply?" active":"")},u.a.createElement("div",{className:"font-wrap-style",style:{fontFamily:e.customFont.font_family}},e.fullText?e.fullText.split("\n")[0].substring(0,15):e.customFont.name.toString().substring(0,15)),u.a.createElement("span",{className:"font-wrap-title"},e.customFont.name)),e.isVertical&&u.a.createElement("div",{className:"font-wrap"+(e.isCustomFontApply?" active":"")},u.a.createElement("div",{className:"font-wrap-style",style:{fontFamily:e.customFont.font_family}},e.fullText?e.fullText.replace(/\n/g," "):e.customFont.name.toString().substring(0,15)),u.a.createElement("span",{className:"font-wrap-title"},e.customFont.name))),e.fontList.map((function(t,a){return u.a.createElement("div",{key:t.xe_id,className:"listView-elements",onClick:function(){return e.fontSelected(t,a,"regular")}},!e.isVertical&&u.a.createElement("div",{className:"font-wrap "+(e.isActiveFont[a]?"active":"")},u.a.createElement("div",{className:"font-wrap-style",style:{fontFamily:t.font_family}},e.fullText?e.fullText.split("\n")[0].substring(0,15):t.name.toString().substring(0,15)),u.a.createElement("span",{className:"font-wrap-title"},t.name)),e.isVertical&&u.a.createElement("div",{className:"font-wrap "+(e.isActiveFont[a]?"active":"")},u.a.createElement("div",{className:"font-wrap-style",style:{fontFamily:t.font_family}},e.fullText?e.fullText.replace(/\n/g," "):t.name.toString().substring(0,15)),u.a.createElement("span",{className:"font-wrap-title"},t.name)))}))):e.fontList&&0===e.fontList.length?u.a.createElement("div",{className:"alert alert-warning small-txt tip"},u.a.createElement("i",{className:"alert-icon"}),u.a.createElement("span",{className:"alert-txt"},e.language.fonts.nodataMsg)):void 0),function(){if(e.fontList&&e.fontList.length>0&&e.printProfileData&&e.printProfileData.text_data&&e.printProfileData.text_data.do_user_upload_fonts)return u.a.createElement("div",{className:e.isNameNumberElem||e.isTemplateElem||e.isTemplateAdmin?"hidden":"files ar-drops customfileDrops"},u.a.createElement("div",{className:"w-100 orBox font mt-3"},u.a.createElement("span",null,e.language.main.or)),u.a.createElement("div",{className:"files-dropzone upload-font"},u.a.createElement("div",{className:"nx-drop-box",style:{cursor:"pointer"}},u.a.createElement("div",{className:"d-flex align-items-center"},!e.customFont.name&&u.a.createElement("a",{className:"nx-drop-btn",style:{overflow:"hidden"}},e.language.text.upload),e.customFont.name&&u.a.createElement("a",{className:"nx-drop-btn",style:{overflow:"hidden"}},e.language.fonts.replaceFont),e.customFont.name&&u.a.createElement("span",{className:"upload-file-name"},e.customFont.name,".ttf")),u.a.createElement("div",{className:"accept-text"},u.a.createElement("h6",{className:"small-txt m-0"},e.language.fonts.acceptedFileType),u.a.createElement("div",{className:"upload-info ml-2"},u.a.createElement("span",null,"ttf"))),u.a.createElement("input",{type:"file",accept:".ttf, .otf",onChange:function(t){return e.customFontUpload(t.target.files)}}))))}(),u.a.createElement("div",{className:e.fontList&&e.fontList.length>0?"buttonGroup":"hidden"},u.a.createElement("button",{className:"btn btn-sm btn-dark btn-block text-light mr-1",onClick:function(){return e.updateFont("cancel")}},e.language.main.cancel),u.a.createElement("button",{className:"btn btn-sm btn-success btn-block m-0 ml-1",onClick:function(){return e.updateFont("done")}},e.language.main.done))))},f=a(157),v=a(90),b=a(96),A=function(e){Object(s.a)(a,e);var t=Object(l.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).onFontSelected=function(e,t,a){for(var n=[],i=0;i<r.state.fontList.length;i++)n[i]=!1;"custom"===a?(v.a.setFont({glyph:r.state.customFontFamily,font_family:r.state.customFont.font_family}),r.props.selectedFont(n,e),r.setState({isActiveFont:n,selectedFont:e,isCustomFontApply:!0}),r.props.loadCustomFont(r.state.customFontFamily,r.state.customFont.name)):v.a.getFont(e.font_family)?(n[t]=!0,r.currIndex=t,r.props.selectedFont(n,e),r.setState({isActiveFont:n,selectedFont:e,isCustomFontApply:!1}),r.props.loadFont(e)):Object(b.a)(e.file_name,(function(a,i){a?console.log("Font could not be loaded: "+a):(v.a.setFont({glyph:i,font_family:e.font_family}),n[t]=!0,r.currIndex=t,r.props.selectedFont(n,e),r.setState({isActiveFont:n,selectedFont:e,isCustomFontApply:!1}),r.props.loadFont(e))}))},r.updateFont=function(e){"done"===e?r.setState({lastSelectedFont:r.state.selectedFont}):r.onFontSelected(r.state.lastSelectedFont,r.currIndex),r.openView("")},r.openView=function(e){r.props.openView(e)},r.loadMoreFonts=function(){r.fontInfo.page=r.props.fonts.pageNo;var e=Math.ceil(r.props.fonts.fontData.total_records/r.fontInfo.perpage);r.fontInfo.page<e&&(r.fontInfo.page=parseInt(r.fontInfo.page)+1,r.props.dispatch(Object(p.p)(r.fontInfo,r.props.allFont)).then((function(e){r.props.fonts&&(r.setDynamicFontHeader(r.props.fonts.fontData.data),r.setDefaultFontActiveStatus())})),r.remainingClip=r.props.fonts.fontData.total_records-r.props.fonts.fontData.data.length,r.remainingClip<r.fontInfo.perpage&&(r.hasMorePage=!1))},r.state={fontList:[],selectedFont:null,total_records:1,isActiveFont:[!0],activeView:"",lastSelectedFont:"",isCustomFontUpload:!1,isCustomFontApply:!1,customFont:{},customFontFamily:{}},r.loadMoreFonts=r.loadMoreFonts.bind(Object(o.a)(r)),r.fontInfo={name:"",page:"1",order:"desc",perpage:"20",category:"",print_profile_id:""},r.hasMorePage=!0,r.selectedCatSubCat="",r.showFontFilter=r.showFontFilter.bind(Object(o.a)(r)),r.onCatSubcatSelect=r.onCatSubcatSelect.bind(Object(o.a)(r)),r.onFilterApplyClicked=r.onFilterApplyClicked.bind(Object(o.a)(r)),r.onFilterSearch=r.onFilterSearch.bind(Object(o.a)(r)),r.afterClearFilter=r.afterClearFilter.bind(Object(o.a)(r)),r.updateFont=r.updateFont.bind(Object(o.a)(r)),r.currIndex=0,r.showFontView=r.showFontView.bind(Object(o.a)(r)),r.setFontData=r.setFontData.bind(Object(o.a)(r)),r.prevPropsData="",r.afterPrimeCatSet=r.afterPrimeCatSet.bind(Object(o.a)(r)),r.customFontUpload=r.customFontUpload.bind(Object(o.a)(r)),r.defaultFont="",r}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props.printProfileReducer.selected_print_profile,a=this.props.allCatData.filter((function(e){return e.printProfileId===t}))[0];a&&a.catLoadStatus?a.catData&&0===a.catData.length&&this.afterPrimeCatSet([]):this.props.dispatch(Object(p.n)(t,this.props.allCatData)).then((function(t){(t&&!t.data||t&&t.data&&0===t.data.length)&&e.afterPrimeCatSet([])})),this.props.customFont.length&&JSON.stringify(this.state.customFont)===JSON.stringify({})&&this.props.printProfileData&&this.props.printProfileData.text_data&&this.props.printProfileData.text_data.do_user_upload_fonts&&Object(b.a)(this.props.customFont[0],(function(t,a){t?console.log("Font could not be loaded: "+t):(e.setState({customFont:e.props.customFont[1],customFontFamily:a,isCustomFontUpload:!0,isCustomFontApply:!1}),e.setCustomFontHeader(e.props.customFont))}));var r=new URLSearchParams(window.location.search);if(this.isTemplate=r.get("temp")?r.get("temp"):0,this.props.printProfileData&&this.props.printProfileData.text_data&&this.props.printProfileData.text_data.is_default_font){var n=v.a.getFont(this.props.printProfileData.text_data.default_font.font_family);this.props.isNameNumberElem||this.props.isTemplateElem||!n||(this.defaultFont=this.props.printProfileData.text_data.default_font,this.props.loadFont(this.defaultFont))}}},{key:"afterPrimeCatSet",value:function(e){var t=this;this.selectedCatSubCat=Object(r.a)(e),this.selectedCatSubCat&&(this.fontInfo.category=this.selectedCatSubCat.length?JSON.stringify(this.selectedCatSubCat):null),this.fontInfo.print_profile_id=this.props.printProfileReducer.selected_print_profile;var a=this.props.printProfileReducer.selected_print_profile,n=this.props.allFont.filter((function(e){return e.printProfileId===a}))[0];n?n.fontLoadStatus?this.setFontData(!0):this.props.dispatch(Object(p.p)(this.fontInfo,this.props.allFont)).then((function(){t.setDynamicFontHeader(t.props.fonts.fontData.data),t.setFontData()})):this.props.dispatch(Object(p.p)(this.fontInfo,this.props.allFont)).then((function(){t.props.fonts&&(t.setDynamicFontHeader(t.props.fonts.fontData.data),t.setFontData())}))}},{key:"componentDidUpdate",value:function(e){this.prevPropsData=e}},{key:"setFontData",value:function(e){var t=this,a=this.defaultFont?this.defaultFont:this.props.fonts.fontData.data[0];(this.setState({fontList:this.props.fonts.fontData.data,selectedFont:a,lastSelectedFont:a,total_records:this.props.fonts.fontData.total_records,activeView:this.props.activeView}),a)?v.a.getFont(a.font_family)?this.props.loadFontLists(this.props.fonts.fontData.data,e):Object(b.a)(a.file_name,(function(r,n){r?console.log("Font could not be loaded: "+r):(v.a.setFont({glyph:n,font_family:a.font_family}),t.props.loadFontLists(t.props.fonts.fontData.data,e))})):this.props.fonts.fontData.data.length||this.props.loadFontLists([],e);this.props.tagLoadStatus||this.props.dispatch(Object(p.o)()),this.setDefaultFontActiveStatus()}},{key:"setDynamicFontHeader",value:function(e){var t=[];e.forEach((function(e,a){t[a]='@font-face {font-family:"'+e.font_family+'"; src: url("'+e.file_name+'") format("truetype");';var r=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");r.appendChild(n),n.type="text/css",n.appendChild(document.createTextNode(t[a]))}))}},{key:"onCatSubcatSelect",value:function(e){this.selectedCatSubCat=Object(r.a)(e)}},{key:"onFilterApplyClicked",value:function(){var e=this;this.fontInfo.page=1,this.selectedCatSubCat&&(this.fontInfo.category=this.selectedCatSubCat.length?JSON.stringify(this.selectedCatSubCat):null),this.props.dispatch(Object(p.p)(this.fontInfo,this.props.allFont)).then((function(t){e.props.fonts&&e.setDynamicFontHeader(e.props.fonts.fontData.data)}))}},{key:"onFilterSearch",value:function(e){var t=this;this.fontInfo.name=e,this.fontInfo.page=1,this.selectedCatSubCat&&(this.fontInfo.category=this.selectedCatSubCat.length?JSON.stringify(this.selectedCatSubCat):null),this.props.dispatch(Object(p.p)(this.fontInfo,this.props.allFont,!0)).then((function(e){t.props.fonts&&t.setDynamicFontHeader(t.props.fonts.fontData.data)}))}},{key:"afterClearFilter",value:function(){var e=this;this.fontInfo.page=1,this.selectedCatSubCat&&(this.fontInfo.category=this.selectedCatSubCat.length?JSON.stringify(this.selectedCatSubCat):null),this.props.dispatch(Object(p.p)(this.fontInfo,this.props.allFont,!0)).then((function(t){e.props.fonts&&(e.setDynamicFontHeader(e.props.fonts.fontData.data),e.setDefaultFontActiveStatus())})),this.setPrimeCatStatus()}},{key:"showFontFilter",value:function(e,t,a,r,n,i){var o=this;if(e&&e.catData&&e.catData.length)return u.a.createElement(f.a,{onRef:function(e){return o.multiselectChild=e},options:e.catData,onSelectOptions:this.onCatSubcatSelect,onApplyClicked:this.onFilterApplyClicked,onSearchDataEntered:this.onFilterSearch,afterClearAll:this.afterClearFilter,tagList:r.data,afterPrimeCatSet:this.afterPrimeCatSet,primeCatStatus:e.primeCatStatus})}},{key:"setPrimeCatStatus",value:function(){for(var e=this.props.printProfileReducer.selected_print_profile,t=Object(r.a)(this.props.allCatData),a=0;a<t.length;a++)if(t[a].printProfileId===e){t[a].primeCatStatus=!1;break}this.props.dispatch(Object(p.r)(t))}},{key:"customFontUpload",value:function(e){if(e){var t=e[0].name,a=t.split(".").pop(),r=t.substr(0,t.lastIndexOf(".")),n=[];if("ttf"===a||"TTF"===a){var i=new FileReader;i.readAsDataURL(e[0]),i.onload=function(){var e=this,t=i.result;Object(b.a)(t,(function(a,i){if(a)console.log("Font could not be loaded: "+a);else try{i.getPaths("text",0,76,76,{letterSpacing:0,lineSpacing:0});for(var o={category_names:"",file_name:"",font_family:r,name:r,price:0,xe_id:0},s=0;s<e.state.fontList.length;s++)n[s]=!1;var l=[t,o,e.props.printProfileReducer.selected_print_profile];e.props.dispatch(Object(p.q)(l)),e.props.selectedFont(n,o),e.setState({isActiveFont:n,selectedFont:o,customFont:o,isCustomFontUpload:!0,isCustomFontApply:!0,customFontFamily:i}),e.props.loadCustomFont(i,r),e.setCustomFontHeader(l),v.a.setFont({glyph:i,font_family:r})}catch(a){e.props.showNotification("danger",e.props.language.fonts.notSupported)}}))}.bind(this)}else this.props.showNotification("danger",this.props.language.fonts.invalidFile)}}},{key:"setCustomFontHeader",value:function(e){var t;t='@font-face {font-family:"'+e[1].font_family+'"; src: url("'+e[0]+'") format("truetype");';var a=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");a.appendChild(r),r.type="text/css",r.appendChild(document.createTextNode(t))}},{key:"setDefaultFontActiveStatus",value:function(){if(this.props.printProfileData&&this.props.printProfileData.text_data&&this.props.printProfileData.text_data.is_default_font&&this.defaultFont){for(var e=[],t=0;t<this.props.fonts.fontData.data.length;t++){var a=this.props.fonts.fontData.data[t];if(e[t]=!1,this.props.printProfileData.text_data.default_font&&a.xe_id===Number(this.props.printProfileData.text_data.default_font.xe_id)){e[t]=!0;break}}this.setState({isActiveFont:e})}}},{key:"showFontView",value:function(e,t,a,r,n){if("fonts"===this.props.activeView)return a&&a.fontData&&a.fontData.data?(a.fontData.records<this.fontInfo.perpage?this.hasMorePage=!1:this.hasMorePage=!0,u.a.createElement(g,{activeView:this.props.activeView,fontList:a.fontData.data,fullText:n,loadMoreFonts:this.loadMoreFonts,isActiveFont:this.state.isActiveFont,fontSelected:this.onFontSelected,hasMore:this.hasMorePage,error:e,loading:t,totalFonts:this.props.fonts.fontData.total_records,language:r,updateFont:this.updateFont,catLoading:this.props.catLoading,customFontUpload:this.customFontUpload,customFont:this.state.customFont,isCustomFontUpload:this.state.isCustomFontUpload,isCustomFontApply:this.state.isCustomFontApply,printProfileData:this.props.printProfileData,isNameNumberElem:this.props.isNameNumberElem,isTemplateElem:this.props.isTemplateElem,isTemplateAdmin:this.isTemplate,fontCat:this.props.fontCat,isVertical:this.props.isVertical})):u.a.createElement(g,{error:e,loading:t,language:r,catLoading:this.props.catLoading})}},{key:"render",value:function(){var e=this,t=this.props,a=t.error,r=t.loading,n=t.fonts,i=t.language,o=t.fullText,s=t.fontCat,l=t.catLoading,d=t.catError,p=t.fontTag,m=t.tagLoading,h=t.tagError;t.isVertical;return u.a.createElement(c.Fragment,null,u.a.createElement("div",{className:"fonts"===this.props.activeView?"":"hidden"},u.a.createElement("div",{className:"element-controls-header d-none d-md-flex d-lg-flex d-xl-flex"},u.a.createElement("section",{className:"boxTitle back-to-back",onClick:function(){return e.openView("")}},u.a.createElement("div",{className:"icon",title:this.props.language.main.backToSection},u.a.createElement("i",{className:"nf nf-left-arrow"}))),u.a.createElement("div",{className:"text"},i.fonts.chooseFont),u.a.createElement("div",{className:"boxTitle back-to-menu",title:i.main.backToMain},u.a.createElement("i",{className:"nf nf-delete"}))),this.showFontFilter(s,l,d,p,m,h)),this.showFontView(a,r,n,i,o))}}]),a}(u.a.Component),y=Object(d.b)((function(e){return{fonts:e.fonts.items.filter((function(t){return t.printProfileId===e.printProfileReducer.selected_print_profile}))[0],loading:e.fonts.loading,error:e.fonts.error,fontDetails:e.fonts.items,isFontsLoaded:e.fonts.isFontsLoaded,fontCat:e.fonts.catItem.filter((function(t){return t.printProfileId===e.printProfileReducer.selected_print_profile}))[0],catLoading:e.fonts.catLoading,catError:e.fonts.catError,categoryLoadStatus:e.fonts.categoryLoadStatus,fontTag:e.fonts.tagItem,tagLoading:e.fonts.tagLoading,tagError:e.fonts.tagError,tagLoadStatus:e.fonts.tagLoadStatus,pageNo:e.fonts.pageNo,language:e.languageReducer.translation_data.filter((function(t){return t.langCode===e.languageReducer.default_lang}))[0],printProfileReducer:e.printProfileReducer,allFont:e.fonts.items,allCatData:e.fonts.catItem,customFont:e.fonts.customFont,printProfileData:e.printProfileReducer.print_profile_data.filter((function(t){return t.id===e.printProfileReducer.selected_print_profile}))[0]}}))(A);a.d(t,"a",(function(){return y}))},262:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAPAAAADwCAYAAAA+VemSAAAACXBIWXMAAAsTAAALEwEAmpwYAAAF+mlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDIgNzkuMTYwOTI0LCAyMDE3LzA3LzEzLTAxOjA2OjM5ICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOCAoV2luZG93cykiIHhtcDpDcmVhdGVEYXRlPSIyMDE4LTA3LTI3VDE1OjM4OjEwKzA1OjMwIiB4bXA6TW9kaWZ5RGF0ZT0iMjAxOC0wNy0yN1QxNTo0MDowOCswNTozMCIgeG1wOk1ldGFkYXRhRGF0ZT0iMjAxOC0wNy0yN1QxNTo0MDowOCswNTozMCIgZGM6Zm9ybWF0PSJpbWFnZS9wbmciIHBob3Rvc2hvcDpDb2xvck1vZGU9IjMiIHBob3Rvc2hvcDpJQ0NQcm9maWxlPSJzUkdCIElFQzYxOTY2LTIuMSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo4MzVjZmQ5MC1hNDQ3LTRjNGQtODFhOS0zYzFkMTkwODU4NTQiIHhtcE1NOkRvY3VtZW50SUQ9ImFkb2JlOmRvY2lkOnBob3Rvc2hvcDoxNDQ5NzMwNS1mMDhjLTI3NGYtYWZlNi0xOTVkNTQxNzA5ZmMiIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDowZTUxNzkyOC05Yzc3LTdjNDctYTMzOC03YzZlYzhmNjdhZDIiPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJjcmVhdGVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjBlNTE3OTI4LTljNzctN2M0Ny1hMzM4LTdjNmVjOGY2N2FkMiIgc3RFdnQ6d2hlbj0iMjAxOC0wNy0yN1QxNTozODoxMCswNTozMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTggKFdpbmRvd3MpIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDo4MzVjZmQ5MC1hNDQ3LTRjNGQtODFhOS0zYzFkMTkwODU4NTQiIHN0RXZ0OndoZW49IjIwMTgtMDctMjdUMTU6NDA6MDgrMDU6MzAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCBDQyAyMDE4IChXaW5kb3dzKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8L3JkZjpTZXE+IDwveG1wTU06SGlzdG9yeT4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7VXHnNAAATJ0lEQVR42u2da2wV1RbHh9MWaIUq8gGwAlEEDRp5+EDLNX6oRiIaQ0SIiQYI4QNRowlom/iq8UsbYjSaSDSSSxQVDcaoRKNAMPIQMVgBIcojQajEykNQ0Iri3FknLXc6Z87pY/bM7L3n909WSg+lZ1gzv7PWXnvvtfu5rusghMxUDhcgBMAIIQBGCAEwQgCMENJd5bjAWk317KaOP2/wbBMuAWCkv2o9W+rZ1YHXd3i20LPNuIgUGumpOs+Wh8DrdLy2vONnEAAjDeGVyDu2xM+M7fgZILZFshIriiEt7mGdZ3vcgJqamvIWIvlZILaBPwC2E96nn35abk7e5M9ADMAAbCC8QAzAAGw4vEAMwABsOLxADMAAbDi8QAzAAGw4vEAMwABsOLxADMAAbDi8QAzAAGw4vEAMwNwBw+EFYgBGhsMLxACMDIcXiAEYGQ4vEAMwMhxeIAZgZDi8QAzAyHB4gRiAkeHwAjEAI8PhBWIARobDC8QAjAyHF4gBGBkOLxADMPAaDi8QAzDwGg4vEAMw8BoOLxADMPAaDi8QAzDwAjEAAzDwAjEAAzDwAjEAA29W4QViAAZeIAZgAAZeIAZgAAZeIAZg4AViIAZg4AViAAZg4AViAM44wMALxAAMvEAMxAAMvEAMwAAMvEAMwMCLATEAAy8QZwZiAAZeIAZgAAZeIAZge5xaC7zaQVwLwADcU3i3A692EG+3EWIABl4gzjDA/aJC2K9fP2vg9b4s9exq/+vNzc1OQ0ODdtcrfh82bFjezj///HNWXV3tDB48OPTfnD592jlz5oxz8uRJ58CBA3lra2vT9p40NTU59fX1wZd3eLbQ+/9vtgXgSM8BAOsLb//+/Z1x48Y5V1xxRd7Gjx/vjBo1yrn44oudESNG5P8+qv78809n586dzpdffuls2bLF2bhxo9Pa2grEhgCc+RS6WLXZe3ASTRnLy8vdKVOmuA888IC7bNkyt6WlxfWipZuG5L0bGxvdSZMmaZFOy72wtTrNGDiGanNS8E6YMMFdtGiRu3r1ave3335zddSOHTvcBQsWuFVVVbpCXAvAGQQ4jciby+Xc2tpad8mSJe7+/fsjw/Xvv/+6Z8+edf/555+8/f333/moXcrkZ8Tk38m/76mOHTvmPvvss643ziYSA7CekTeuavPkyZPdV155JQ9BbyWgdYLZ3t7uemNW9/Tp0+6pU6eU2R9//OH+9ddf+ffpDurff/89D1J1dTXzxABsf+SV8WxvYO0EVaBSCWlvTN6/u/H3nj173BtuuIFInDLAOSdD8lWbx/pfb2xsjK3aPGXKlJI3z4t6jhf9HA/YfEVYpnm8dNjxImFqfpL3l+uQa5KvYdcyduxYZ/Pmzc4LL7zgDBgwINHrk3sl9yx4SXJvbV2xlflppI5P5wJ4454q8tJm58ILLzz3vcDgRdpzZooqKiqc8vJyxxvHF/ydTEHNnDnTOXz4sA5TTHs7ppjWZWEaKRMAd3wqLw+LvM8880xs71tZWZmPYn7JYgqTJXPPAnPYB9Xs2bOddeuS5cYbE4dFY4F4rgnzxFH5sz6F7oi8y8Mib5zwioYPH670ZukgSakl5Q+m1UOHDnU+/vhj59577030euQeyr0MSaeXZ2E/cS4D8CY65vWrpqamy/dpjmtVj5FlvC5fg9F5xYoVzpw5c3QaE9cBsJnw1hYb88YdeW2OwH5JJJaI3OWB8sbIr732mjNr1ixdIrHVha2cpfDWFRvzJrm2ORiBbdx+KVX0IMRS7Hrrrbec6dOn6xKJrU2nc5bCG5o2JxV5OyUbDmwHuBNiicZ+lZWV5SG+6qqrEo/EWUqnc5bBm3ranEWAO8fFwUgsWxtXrVpVdHsj6TQAa5c2Zy2F7i6dvvzyy53nn38+8WvJSjqdswheLdLmrEZgP8Rifs2fP9+ZNm1a4teShXTa+IUcxRZp6NBJ4/jx486QIUPOfS+LOnrrb/Gv30L+//npKd0+HAYOHJgfB3dq//79zpVXXlkwVk5CJVZspb7YI9MrsYp10kg78oqqqqoKVl11twpLHniZhvFbbyQgdy7V7PxzWpL/i0Ds18MPP+y8+OKLqVxPkRVbqXf2yCzAOsMrGjNmjLNv374ucMnihzBgi60xjip5TykudQKdtILLLn/++ee8X4LLS7MMcSaXUpbqYaUDvKXGvwKtPNiyTloilPw5DnjzN9f7vZ3vJTuG/CltUuNh/wMqC1vmzp2b2j0pUp2+2jG4Om1cBDale+Q999zjvPvuu+e+l0jY27RY7o1ELdnl89NPP4WOHwWKkSNH5iveYZsMgpLrELCSishyTf7me9u3b3cmTpyY6r3RqVFeVP7KbYm8urV+veiii7o6ury822j11VdfORs2bHB27NjhfPfdd84PP/xQUNEtla5Kkeiaa67JV3xvvfXW/DxswQ33rkNMpnt6+rujSD4wBOLOD/oJEybkr3Hbtm2p3ZvOZyUAcWckNqvbpSkdOYo1XU+6e6QTrWtEF7W1tbmvvvqqe+edd7qDBw9W+v5eeu7Onj3bXbNmTdH3lxY6SXT4CHb3eOmll3S+R4k2j89ESx3T4BV7/fXXQ6GR3lMrVqxwb775ZtcbkyZyLdJI7/PPPw+9HmmGp7rHVliLHr+koZ/mH7SJQWw9wCbCK7Z27dqCro5PPfWUO2zYsFSux0sL3fvvv989cuRIKhAHm+WNHj0aiG0H2FR4xXbt2pW/1uPHj7tPPPFEal0cg1ZTU+OuX78+FOI4AZZ03a958+aZMOSJHWJrATYZXrGjR4+6S5cudYcOHardtVVUVLhvv/12omNiGTr49fLLL5tSt4gVYisBNh1eSVd1OZakmMn4+8033wwdo8cBsPSz9kuGGAYVH2OD2DqAdTmrKAvWv3//0HQ6jp7UMsb26+DBg9r6Jcm+01YBnPZZRVk0GRPLON0vmfaJIwoHj4UZMGCAiRDX6gSwNkspS23G1/F8XlskK7wee+yxgsUecayw83/gy+8PW2iii+SZM6IpgA4RuFjaHNdZRVjheLizah7nWDg4lXTJJZdo75sSZzHV6cBfToMPEK3a4GRRslspuM2vu6WfUSOwaNCgQdr7Rvf2PDld4SVtTlYrV67sss1PNl3EvVGlJ5svSKc1BbjUfl7gTV4nT5501q5d2+W1uLcfprUvuK8Qh+wlTn0rYi4leDsb0Gm7nzeLWr9+fdeHQ/E+5WBEDzY4MDSdlmc4tUZ5uRTgJW3WVLJXN06Agzp16pRxPtItnc4lDG/Rg8aAN33t3bs3sQgszQmk6Z+JKgFx4pE4lzC8qR00hrrX0aNHS6a8kR60wIeBzD+b3GZXlwPVcgnBy1SRAWpvby84cTCu8W/Sh4EnOCZONJ3OpQUvkVc/ydxvXJXnIMC7d++2wmfdROJaowHWvfUr6ippQu8HTWWKG0yhgwUz0yNxWlNMuRjhZarIMMV5nnEwsu/cudMq36U1xZSLCV6migxUsN2rytaz/ggs3TBbWlqs818aU0w54EWdmjx5ciwAB6Pv1q1bjZwD1hHinGJ4Q9NmClZmSHpJ+yWbHOIAeM2aNVb7scSyS/XptKrthGzGN9vGjBlTsOE+rm2E0uY2Cz7tSVMALbYTkjabrxkzZsQWff2V7dbWVmfLli2Z8Gki6XTUTwA245tvuVzO3bdvX5f7J83Y4ziVYcmSJZnzb6mmAGn3xCJttsDq6uoK0mcVjd6lOV5Q119/fSZ9XCqdTgtgo1u/Yv+3999/P5amdsFe0Nu2bcu0n0u1rE0aYNJmS+y6664rKDJJD2cVbWSDv3fOnDmZ97fqdJq0OeO2atWqWI5YCUZfOamisrISnytOp0mbM2wTJ04siJKqilfB3/v444/j8xjSadLmjJoc/7Jp06ZEou8vv/zinnfeefg9hnSatDmjNmPGjIInR0X0Das8y+mM+DyedLrPkRd4zTU50kQO2Y6j8hw8RvTQoUNE3whnMUUFuJa02T6TxRRxHGgWTJ1FM2fOxOfR0unaKABTsLLMrr322oIoqSL6Svod1IYNG/JjbfweubDVJ4CnEnntMpnG+f7777vc07NnzypJneX3+HXkyBF35MiR+F1NJJ7aF4AbiLx2WXNzcyyFq2BElymku+66C5+ri8QNfdmNNMT/za+//sqWHYN1yy23OIsXL+7ymnTGiNqFUs43Ch6E9txzzzkffPABTu+jQlgb0pfdSHeQQtthI0aMyM/Fqk6dw8a9n332WX53E35XmkLf0ZcU+gLPDgZ/U319PY42bMHG6tWrlafOUrUOrraSD4mamhr83kcTtkJ0sIPFPlWhpwOx2fbggw8WPBEqDu+WVVt+yThYtiXic+XwTlexkOMg6bR5NmnSpII0V0BTXbQSPfTQQ/hcbdp8UMVCjpKRGIj1taqqKnf37t3KN+oHO2yIli1bhs/Vwztd9WYG0mnDV1tFHfeGFa2+/fbb/IcFPk8ubY6ynZAdSYakzsExatTVVmEb9Nva2liskfLG/r524yCd1rhB3datW5VPGQU/EKQQNnXqVHye8JhXVUsdxsSa2vz585WnzmFFq0ceeQR/pzDmVdnULjSdZkycng0cONBtbW1VmjqH7TB655132KSgbswbqb0sPaEtskcffVTpNsGwotXXX3+d/6DA33r0hlbV2J10OmWrrq7ON45TtWAjrGglK61GjRqFv1Mc8yoHuGM9NVNMmqVnUed8g0UrKYRNmzYNXyucKupmL0JyAHdcCOl0SlZRUeEePnxYWfQNW6yxaNEifK0wbe7BZqJkAfZBTCRO2O6++25l0Tds3Pvee+9RtFIXeet6uBsweYBLpdNE4vjsiy++UFJ5Dhv3SgePQYMG4WdFU0W92M6bDsBE4mRt3LhxBdD1tfIcnO+V72+88Ub8HEPk1RpgInFy9uSTTyppzh4237t48WJ8HFPk1R7gUpEYiNWZbCaIuuoqLHX+6KOPGPcqmirqhhF9AWaKKV679NJLC4pXKqrOJ06coLOGwqkiowEuNcUExNFs4cKFkTfry1GiQUkXD/wbfXlkD9nQH2AKW/HYG2+8ETl9DkbflpYWt6ysDP/GULAyGmAKW+rtwIEDXfzY27nfsIPIbr/9dnwbU8HKeIAZE6uz4cOHRx7/BivP33zzDYWrmMe8xgNMJFZj0gEy6vRR8DiU++67D98mFHmNBpgxcXRbsGBBpAJWMH0+duwY2wQTGPOqBjjnpCQvVVvnfVno2SH/601NTY73Keeg0rrsssu6fO+l0L3692VlZV2+//DDD5329nYcW0TyTMqzGZA8uws7nuV0lFYEJhJHs5UrVxZs9+ut+TVr1iz8mmDkNT6FZkwczT755BNXpUaPHo1fExjzWgkwkTj6DqQokjEx1edkI691ABOJe2cy5aNKP/74Iz5NOPKqArhfVAi9T27VEMun2389G+l/vaGhwWlubqaa0qHx48c7lZWVSn6XFK927dqFUzvkRd5iBat5qgtWkYOgThGYSIxlJfJamUL3ZEwMxFgK8NbF+JzbCTCRGLM58mYCYF8kptsllmr3SAAGYgx4swkwEGM2wpspgIEYsw3ezAEMxJhN8GYSYCDGbIE3swADMWYDvJkGGIgx0+HNPMBAjJkMLwADMWYwvCoA1m43UhSIvS9LPRvrf930XUy5XM759NNPU3nv2267rdetenRSkV1Fe5202+AEAE43hGskGyOxNFlPSyY3eNc98pJCl4bYmg0QAGzGriIAVusUa3YxAbAZu4oAmHS6xwDLgWRxmOkAm5I2A3CGIA4DuC9HiPbETAbYRHhVAJxzLJavefxe/+uNjY00j7dIci/lnupcbY5tlsL2mwvEwAvAQIyAF4CBGAEvAAMx8AJvFgEGYuAFYCBGwAvAQIyAF4CBGHjXZdk3uaw/HEAMvAAMxAh4ARiIEfACMBADLwADMRADLwADMQJeAAZi4EUADMTAa5ts7sih0EepdfYI68hx5syZWCyNjhymdtLQhj8A1htim5vaZR1eAM4AxLYCDLwAnAmIbQQYeNUBXE4VoPeFLc9xUtjqcoyLFGHa29uVH+MiR5vI8TBpKI5jVeS4EwpWFLEyXdhyOO4E/kihlUF8EIjtOu4EgLN1A6YDsV3HnQAw6TQQkzYDMBADLwADMBADLwADMBADLwADMfAiAAZi4AVgAAZi4AVglHWIgReAgRh4ARiAgRh4ARiAgRh4ARjZCjHwAjAQGwox8AIwMhRi4AVgZCjEwAvAyFCIgReAkaEQAy8AI0MhBl4ARoZCDLwAjAyFGHgBGBkKMfACMDIUYuAFYGQoxMALwMhQiIEXgJGhEAMvACNDIQZeAOYOGAox8AIwABsKMfACMAAbCjHwAjAAGwox8AIwABsKMfACMAAbCjHwAjAAGwhxfX193oDXXoD7AaE1EiCXeja2m5/b69lCz9bhMvMFwPZB/F/PRhb5+0OezQNee5TDBVZpXUd0PVQEXiIvERgZoAs8+49nN3V8v8GzjZ6dwDUAjBAihUYIATBCAIwQAmCEEAAjhHqm/wFvgf5+s21GhgAAAABJRU5ErkJggg=="},27:function(e,t,a){"use strict";a.d(t,"x",(function(){return l})),a.d(t,"f",(function(){return c})),a.d(t,"g",(function(){return u})),a.d(t,"l",(function(){return d})),a.d(t,"k",(function(){return p})),a.d(t,"s",(function(){return m})),a.d(t,"a",(function(){return h})),a.d(t,"h",(function(){return g})),a.d(t,"z",(function(){return f})),a.d(t,"t",(function(){return v})),a.d(t,"i",(function(){return b})),a.d(t,"y",(function(){return A})),a.d(t,"u",(function(){return y})),a.d(t,"j",(function(){return _})),a.d(t,"d",(function(){return E})),a.d(t,"A",(function(){return S})),a.d(t,"v",(function(){return C})),a.d(t,"e",(function(){return x})),a.d(t,"w",(function(){return w})),a.d(t,"o",(function(){return k})),a.d(t,"c",(function(){return I})),a.d(t,"q",(function(){return N})),a.d(t,"m",(function(){return O})),a.d(t,"p",(function(){return P})),a.d(t,"b",(function(){return D})),a.d(t,"n",(function(){return R})),a.d(t,"r",(function(){return T}));var r=a(12),n=a(60),i="",o="",s=1;function l(e){s=e,i=r.a.assets_path+"settings/stores/"+s+"/",o=r.a.assets_path+"languages/tool/"}function c(){return r.a.rvn||(r.a.rvn=1),n.get(i+"settings.json?rvn="+r.a.rvn,{headers:{"Content-Type":"application/json"}}).then((function(e){return e.data})).catch((function(e){return{status:0,error:e}}))}function u(e){return r.a.rvn||(r.a.rvn=1),n.get(i+"print_profile/"+e+".json?rvn="+r.a.rvn,{headers:{"Content-Type":"application/json"}}).then((function(e){return e.data})).catch((function(e){return{status:0,error:e}}))}function d(e){return n.get(r.a.base_path+"color-palettes?print_profile_id=["+e+"]",{headers:{"Content-Type":"application/json"}}).then((function(e){return e.data})).catch((function(e){return{status:0,error:e}}))}function p(){return n.get(r.a.base_path+"print-profiles",{headers:{"Content-Type":"application/json"}}).then((function(e){return e.data})).catch((function(e){return{status:0,error:e}}))}function m(e,t,a){var i=new FormData;return i.append("type",a),t.forEach((function(e,t){e&&i.append("images[]",e)})),n({method:"post",url:r.a.base_path+"capture-images",data:i,headers:{"Content-Type":"multipart/form-data"}})}function h(e,t,a,i,o,s){var l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,c=new FormData;return c.append("action",e),c.append("customer_id",t),c.append("design_data",JSON.stringify(a)),c.append("product_data",JSON.stringify(i)),c.append("cart_item_id",o),c.append("customer_data",JSON.stringify(s)),c.append("is_kiosk",l?1:0),n({method:"post",url:r.a.base_path+"carts",data:c,headers:{"Content-Type":"application/x-www-form-urlencoded"}})}function g(e,t,a,i){return i?n.get(r.a.base_path+"variant-combination-details/"+e+"/"+t+"?attribute="+a+"&price=1&is_attribute=1",{headers:{"Content-Type":"application/json"}}).then((function(e){return e.data})).catch((function(e){return{status:0,error:e}})):n.get(r.a.base_path+"variant-combination-details/"+e+"/"+t+"?attribute="+a+"&price=1",{headers:{"Content-Type":"application/json"}}).then((function(e){return e.data})).catch((function(e){return{status:0,error:e}}))}function f(e,t){var a=new FormData;return a.append("email",e),a.append("password",t),n({method:"post",url:r.a.store_url+"frontendlc.php",data:a,headers:{"Content-Type":"multipart/form-data"}})}function v(e,t,a,i){var o=new FormData;return o.append("email",e),o.append("password",t),o.append("firstName",a),o.append("lastName",i),n({method:"post",url:r.a.store_url+"frontendlc.php",data:o,headers:{"Content-Type":"multipart/form-data"}})}function b(e){return n.get(r.a.base_path+"templates/"+e,{headers:{"Content-Type":"application/json"}}).then((function(e){return e.data})).catch((function(e){return{status:0,error:e}}))}function A(e,t,a){var i=new FormData;return i.append("customer_id",a),i.append("userfile",e,"thumb."+t),i.append("file_type",t),n({method:"post",url:r.a.base_path+"images",data:i,headers:{"Content-Type":"multipart/form-data"}})}function y(e,t,a){var i=new FormData;return i.append("userfile",e,"thumb."+t),i.append("file_type",t),i.append("type",a),n({method:"post",url:r.a.base_path+"images/filter-image",data:i,headers:{"Content-Type":"multipart/form-data"}})}function _(e){var t=o+e;return n.get(t,{headers:{"Content-Type":"application/json"}}).then((function(e){return{status:1,data:e.data}})).catch((function(e){return{status:0,error:e}}))}function E(e,t,a,i){return i?n.get(r.a.base_path+"variant-combination-details/"+e+"/"+t+"?attribute="+a+"&is_attribute=1",{headers:{"Content-Type":"application/json"}}).then((function(e){return e.data})).catch((function(e){return{status:0,error:e}})):n.get(r.a.base_path+"variant-combination-details/"+e+"/"+t+"?attribute="+a,{headers:{"Content-Type":"application/json"}}).then((function(e){return e.data})).catch((function(e){return{status:0,error:e}}))}function S(e){var t=new FormData;return t.append("code",e),n({method:"post",url:r.a.base_path+"mac/register",data:t,headers:{"Content-Type":"application/x-www-form-urlencoded"}})}function C(e){return n({method:"post",url:r.a.base_path+"artwork-design",data:e,headers:{"Content-Type":"application/x-www-form-urlencoded"}})}function x(){return n.get(r.a.base_path+"settings/form-values",{headers:{"Content-Type":"application/json"}}).then((function(e){return e.data})).catch((function(e){return{status:0,error:e}}))}function w(e){return n({method:"post",url:r.a.base_path+"quotation/request",data:e,headers:{"Content-Type":"application/x-www-form-urlencoded"}})}function k(e){return n.get(r.a.base_path+"customers/"+e,{headers:{"Content-Type":"application/json"}}).then((function(e){return e.data})).catch((function(e){return{status:0,error:e}}))}function I(e){var t=new FormData;return t.append("teamMembers",JSON.stringify(e)),n({method:"post",url:r.a.base_path+"name-number-sample",data:t,headers:{"Content-Type":"multipart/form-data"}})}function N(){return r.a.store_url}function O(){return n.get(r.a.base_path+"country",{headers:{"Content-Type":"application/json"}}).then((function(e){return e.data})).catch((function(e){return{status:0,error:e}}))}function P(e){return n.get(r.a.base_path+"state/"+e,{headers:{"Content-Type":"application/json"}}).then((function(e){return e.data})).catch((function(e){return{status:0,error:e}}))}function D(e,t){var a=new FormData;return a.append("stripe_token",e),a.append("name",t.name),a.append("email",t.email),a.append("phone",t.phone),a.append("total_price",t.total_price),a.append("currency",t.currency),n({method:"post",url:r.a.base_path+"kiosk/payment",data:a,headers:{"Content-Type":"multipart/form-data"}})}function R(){return n.get(r.a.base_path+"settings/currencies",{headers:{"Content-Type":"application/json"}}).then((function(e){return e.data})).catch((function(e){return{status:0,error:e}}))}function T(e,t){return n.get(r.a.base_path+"currency/"+e+"/"+t,{headers:{"Content-Type":"application/json"}}).then((function(e){return e.data})).catch((function(e){return{status:0,error:e}}))}},28:function(e,t,a){"use strict";a.d(t,"e",(function(){return x})),a.d(t,"g",(function(){return w})),a.d(t,"b",(function(){return k})),a.d(t,"c",(function(){return I})),a.d(t,"a",(function(){return N})),a.d(t,"d",(function(){return O})),a.d(t,"f",(function(){return P})),a.d(t,"o",(function(){return D})),a.d(t,"p",(function(){return R})),a.d(t,"n",(function(){return T})),a.d(t,"m",(function(){return L})),a.d(t,"l",(function(){return M})),a.d(t,"i",(function(){return B})),a.d(t,"h",(function(){return j})),a.d(t,"k",(function(){return F})),a.d(t,"j",(function(){return U}));var r=a(22),n=a.n(r),i=(a(142),a(8)),o=n.a,s=(Boolean(document.createElementNS&&document.createElementNS(i.a.SVG,"svg").createSVGRect),navigator.userAgent),l=document.createElementNS(i.a.SVG,"svg");!function(){try{var e,t,a=document.URL,r=a.substring(0,a.lastIndexOf("/")),n=navigator.userAgent,i=navigator.appName;parseFloat(navigator.appVersion),parseInt(navigator.appVersion,10);-1!=(t=n.indexOf("MSIE"))||n.match(/Trident.*rv\:11\./)?(i="Microsoft Internet Explorer",n.substring(t+5)):-1!=(t=n.indexOf("Netscape"))?i="Netscape":-1!=(t=n.indexOf("Edg"))?i="Edg":-1!=(t=n.indexOf("Opera"))?(i="Opera",n.substring(t+6),-1!=(t=n.indexOf("Version"))&&n.substring(t+8)):-1!=(t=n.indexOf("Chrome"))?(i="Chrome",n.substring(t+7)):-1!=(t=n.indexOf("Safari"))?(i="Safari",n.substring(t+7),-1!=(t=n.indexOf("Version"))&&n.substring(t+8)):-1!=(t=n.indexOf("Firefox"))?(i="Firefox",n.substring(t+8)):(e=n.lastIndexOf(" ")+1)<(t=n.lastIndexOf("/"))&&(i=n.substring(e,t),n.substring(t+1),i.toLowerCase()==i.toUpperCase()&&(i=navigator.appName)),"Edg"!=i&&"Chrome"!=i&&"Firefox"!=i&&"Opera"!=i&&"Safari"!=i&&"Netscape"!=i&&(document.location.href=r+"/browsererror.html"),window.browserAccessName=i}catch(o){}}();var c=Boolean(window.opera),u=s.includes("AppleWebKit"),d=s.includes("Gecko/"),p=s.includes("MSIE"),m=s.includes("Chrome/"),h=(s.includes("Windows"),s.includes("Macintosh")),g="ontouchstart"in window,f=Boolean(l.querySelector),v=Boolean(document.evaluate),b=function(){var e=document.createElementNS(i.a.SVG,"path");e.setAttribute("d","M0,0 10,10");var t=e.pathSegList,a=e.createSVGPathSegLinetoAbs(5,5);try{return t.replaceItem(a,1),!0}catch(r){}return!1}(),A=function(){var e=document.createElementNS(i.a.SVG,"path");e.setAttribute("d","M0,0 10,10");var t=e.pathSegList,a=e.createSVGPathSegLinetoAbs(5,5);try{return t.insertItemBefore(a,1),!0}catch(r){}return!1}(),y=function(){var e=document.createElementNS(i.a.SVG,"svg"),t=document.createElementNS(i.a.SVG,"svg");document.documentElement.append(e),t.setAttribute("x",5),e.append(t);var a=document.createElementNS(i.a.SVG,"text");a.textContent="a",t.append(a);try{return 0===a.getStartPositionOfChar(0).x}catch(r){return!1}finally{e.remove()}}(),_=function(){var e=document.createElementNS(i.a.SVG,"svg");document.documentElement.append(e);var t=document.createElementNS(i.a.SVG,"path");t.setAttribute("d","M0,0 C0,0 10,10 10,0"),e.append(t);var a=t.getBBox();return e.remove(),a.height>4&&a.height<5}(),E=function(){var e=document.createElementNS(i.a.SVG,"svg");document.documentElement.append(e);var t=document.createElementNS(i.a.SVG,"path");t.setAttribute("d","M0,0 10,0");var a=document.createElementNS(i.a.SVG,"path");a.setAttribute("d","M5,0 15,0");var r=document.createElementNS(i.a.SVG,"g");r.append(t,a),e.append(r);var n=r.getBBox();return e.remove(),15===n.width}(),S=(function(){var e=document.createElementNS(i.a.SVG,"rect");e.setAttribute("x",.1);var t=!e.cloneNode(!1).getAttribute("x").includes(",");t||o.alert('NOTE: This version of Opera is known to contain bugs in SVG-edit.\nPlease upgrade to the <a href="http://opera.com">latest version</a> in which the problems have been fixed.')}(),function(){var e=document.createElementNS(i.a.SVG,"rect");return e.setAttribute("style","vector-effect:non-scaling-stroke"),"non-scaling-stroke"===e.style.vectorEffect}()),C=function(){var e=document.createElementNS(i.a.SVG,"rect").transform.baseVal,t=l.createSVGTransform();e.appendItem(t);var a=e.getItem(0),r=function(e){return e&&"object"===typeof e&&"function"===typeof e.setMatrix&&"angle"in e};return r(a)&&r(t)&&a.type===t.type&&a.angle===t.angle&&a.matrix.a===t.matrix.a&&a.matrix.b===t.matrix.b&&a.matrix.c===t.matrix.c&&a.matrix.d===t.matrix.d&&a.matrix.e===t.matrix.e&&a.matrix.f===t.matrix.f}(),x=function(){return c},w=function(){return u},k=function(){return d},I=function(){return p},N=function(){return m},O=function(){return h},P=function(){return g},D=function(){return f},R=function(){return v},T=function(){return b},L=function(){return A},M=function(){return _},B=function(){return E},j=function(){return y},F=function(){return S},U=function(){return C}},3:function(e,t,a){"use strict";var r=a(36),n=a(9),i=a.n(n),o=a(20),s=a(22),l=a.n(s),c=(a(624),a(28)),u=a(2),d=a(40),p=l.a,m={},h=function(){Object.values(m).forEach((function(e){!function(e){Object.keys(m).length||p("#cmenu_canvas").append("<li class='separator'>");var t=e.shortcut||"";p("#cmenu_canvas").append("<li class='disabled'><a id="+e.id+">"+e.label+"<span class='shortcut'>"+t+"</span></a></li>")}(e)}))},g=a(45),f=a(7),v=a(10),b=(a(142),a(108));var A=a(11),y=a(8),_=l.a,E=function(){function e(t,a,r){if(Object(v.a)(this,e),this.name_=t,this.group_=r?null:a,r){var n=r.ownerDocument;this.group_=n.createElementNS(y.a.SVG,"g");var i=n.createElementNS(y.a.SVG,"title");i.textContent=t,this.group_.append(i),a?_(a).after(this.group_):r.append(this.group_)}!function(e,t){var a=e.getAttribute("class");Object(u.x)(a)||!a.length?(e.setAttribute("class",E.CLASS_NAME),e.setAttribute("id",t),e.setAttribute("xe_id",t)):E.CLASS_REGEX.test(a)||e.setAttribute("class",a+" "+E.CLASS_NAME)}(this.group_,t),Object(u.E)(this.group_,(function(e){})),this.group_.setAttribute("style",r?"pointer-events:all":"pointer-events:none")}return Object(A.a)(e,[{key:"getName",value:function(){return this.name_}},{key:"getGroup",value:function(){return this.group_}},{key:"activate",value:function(){this.group_.setAttribute("style","pointer-events:all")}},{key:"deactivate",value:function(){this.group_.setAttribute("style","pointer-events:none")}},{key:"setVisible",value:function(e){var t=void 0===e||e?"inline":"none";this.group_.getAttribute("display")!==t&&this.group_.setAttribute("display",t)}},{key:"isVisible",value:function(){return"none"!==this.group_.getAttribute("display")}},{key:"getOpacity",value:function(){var e=this.group_.getAttribute("opacity");return Object(u.x)(e)?1:parseFloat(e)}},{key:"setOpacity",value:function(e){"number"===typeof e&&e>=0&&e<=1&&this.group_.setAttribute("opacity",e)}},{key:"appendChildren",value:function(e){var t,a=Object(g.a)(e);try{for(a.s();!(t=a.n()).done;){var r=t.value;this.group_.append(r)}}catch(n){a.e(n)}finally{a.f()}}},{key:"getTitleElement",value:function(){for(var e=this.group_.childNodes.length,t=0;t<e;++t){var a=this.group_.childNodes.item(t);if(a&&"title"===a.tagName)return a}return null}},{key:"setName",value:function(e,t){var a=this.name_;e=Object(u.D)(e);var r=this.getTitleElement();return r?(_(r).empty(),r.textContent=e,this.name_=e,t&&t.changeElement(r,{"#text":a}),this.name_):null}},{key:"removeGroup",value:function(){var e=this.group_.parentNode.removeChild(this.group_);return this.group_=void 0,e}}]),e}();E.CLASS_NAME="layer",E.CLASS_REGEX=new RegExp("(\\s|^)"+E.CLASS_NAME+"(\\s|$)");var S=E,C=a(41),x=function(){function e(t){Object(v.a)(this,e),this.undoManager_=t,this.currentBatchCommand_=null,this.batchCommandStack_=[]}return Object(A.a)(e,[{key:"startBatchCommand",value:function(e){return this.undoManager_?(this.currentBatchCommand_=new C.BatchCommand(e),this.batchCommandStack_.push(this.currentBatchCommand_),this):this}},{key:"endBatchCommand",value:function(){if(!this.undoManager_)return this;if(this.currentBatchCommand_){var e=this.currentBatchCommand_;this.batchCommandStack_.pop();var t=this.batchCommandStack_.length;this.currentBatchCommand_=t?this.batchCommandStack_[t-1]:null,this.addCommand_(e)}return this}},{key:"moveElement",value:function(e,t,a,r){return this.undoManager_?(this.addCommand_(new C.MoveElementCommand(e,t,a,r)),this):this}},{key:"insertElement",value:function(e,t){return this.undoManager_?(this.addCommand_(new C.InsertElementCommand(e,t)),this):this}},{key:"removeElement",value:function(e,t,a,r){return this.undoManager_?(this.addCommand_(new C.RemoveElementCommand(e,t,a,r)),this):this}},{key:"changeElement",value:function(e,t,a){return this.undoManager_?(this.addCommand_(new C.ChangeElementCommand(e,t,a)),this):this}},{key:"addCommand_",value:function(e){if(!this.undoManager_)return this;this.currentBatchCommand_?this.currentBatchCommand_.addSubCommand(e):this.undoManager_.addCommandToHistory(e)}}]),e}();x.NO_HISTORY=new x;var w=x,k=l.a,I="a,circle,ellipse,foreignObject,g,image,line,path,polygon,polyline,rect,svg,text,tspan,use".split(","),N=1,O=2,P=0,D=[];function R(e){return e||new w(L.undoMgr)}function T(e){for(var t=1;e.includes("Layer "+t);)t++;return"Layer "+t}var L,M=function(){function e(t,a){if(Object(v.a)(this,e),!t||!t.tagName||!t.namespaceURI||"svg"!==t.tagName||t.namespaceURI!==y.a.SVG)throw new Error("Error: svgedit.draw.Drawing instance initialized without a <svg> element");this.svgElem_=t,this.obj_num=0,this.idPrefix="xe_",this.releasedNums=[],this.all_layers=[],this.layer_map={},this.current_layer=null,this.nonce_="";var r=this.svgElem_.getAttributeNS(y.a.SE,"nonce");r&&P!==O?this.nonce_=r:P===N&&this.setNonce(Math.floor(100001*Math.random()))}return Object(A.a)(e,[{key:"getElem_",value:function(e){return this.svgElem_.querySelector?this.svgElem_.querySelector("#"+e):k(this.svgElem_).find("[id="+e+"]")[0]}},{key:"getSvgElem",value:function(){return this.svgElem_}},{key:"getNonce",value:function(){return this.nonce_}},{key:"setNonce",value:function(e){this.svgElem_.setAttributeNS(y.a.XMLNS,"xmlns:se",y.a.SE),this.svgElem_.setAttributeNS(y.a.SE,"se:nonce",e),this.nonce_=e}},{key:"clearNonce",value:function(){this.nonce_=""}},{key:"getId",value:function(){return this.nonce_?this.idPrefix+this.nonce_+"_"+this.obj_num:this.idPrefix+this.obj_num}},{key:"getNextId",value:function(){return this.obj_num=("0000"+(Math.random()*Math.pow(36,6)<<0).toString(36)).slice(-6),this.getId()}},{key:"releaseId",value:function(e){var t=this.idPrefix+(this.nonce_?this.nonce_+"_":"");if("string"!==typeof e||!e.startsWith(t))return!1;var a=parseInt(e.substr(t.length));return!("number"!==typeof a||a<=0||this.releasedNums.includes(a))&&(this.releasedNums.push(a),!0)}},{key:"getNumLayers",value:function(){return this.all_layers.length}},{key:"hasLayer",value:function(e){return void 0!==this.layer_map[e]}},{key:"getLayerName",value:function(e){return e>=0&&e<this.getNumLayers()?this.all_layers[e].getName():""}},{key:"getCurrentLayer",value:function(){return this.current_layer?this.current_layer.getGroup():null}},{key:"getLayerByName",value:function(e){var t=this.layer_map[e];return t?t.getGroup():null}},{key:"getCurrentLayerName",value:function(){return this.current_layer?this.current_layer.getName():""}},{key:"getAllLayers",value:function(){return this.all_layers}},{key:"setCurrentLayerName",value:function(e,t){var a=null;if(this.current_layer){var r=this.current_layer.getName();(a=this.current_layer.setName(e,t))&&(delete this.layer_map[r],this.layer_map[a]=this.current_layer)}return a}},{key:"setCurrentLayerPosition",value:function(e){var t,a=this.getNumLayers();if(!this.current_layer||e<0||e>=a)return null;for(t=0;t<a&&this.all_layers[t]!==this.current_layer;++t);if(t===a)return null;if(t!==e){var r=this.current_layer.getGroup(),n=r.nextSibling,i=null;return e>t?e<a-1&&(i=this.all_layers[e+1].getGroup()):i=this.all_layers[e].getGroup(),this.svgElem_.insertBefore(r,i),this.identifyLayers(),this.setCurrentLayer(this.getLayerName(e)),{currentGroup:r,oldNextSibling:n}}return null}},{key:"mergeLayer",value:function(e){var t=this.current_layer.getGroup(),a=k(t).prev()[0];if(a){e.startBatchCommand("Merge Layer");var r=t.nextSibling;for(e.removeElement(t,r,this.svgElem_);t.firstChild;){var n=t.firstChild;if("title"!==n.localName){var i=n.nextSibling;a.append(n),e.moveElement(n,i,t)}else e.removeElement(n,n.nextSibling,t),n.remove()}this.current_layer.removeGroup();var o=this.all_layers.indexOf(this.current_layer);if(o>0){var s=this.current_layer.getName();this.current_layer=this.all_layers[o-1],this.all_layers.splice(o,1),delete this.layer_map[s]}e.endBatchCommand()}}},{key:"mergeAllLayers",value:function(e){for(this.current_layer=this.all_layers[this.all_layers.length-1],e.startBatchCommand("Merge all Layers");this.all_layers.length>1;)this.mergeLayer(e);e.endBatchCommand()}},{key:"setCurrentLayer",value:function(e){var t=this.layer_map[e];return!!t&&(this.current_layer&&this.current_layer.deactivate(),this.current_layer=t,this.current_layer.activate(),!0)}},{key:"deleteCurrentLayer",value:function(){if(this.current_layer&&this.getNumLayers()>1){var e=this.current_layer.removeGroup();return this.identifyLayers(),e}return null}},{key:"identifyLayers",value:function(){this.all_layers=[],this.layer_map={};for(var e,t=this.svgElem_.childNodes.length,a=[],r=[],n=null,i=0;i<t;++i){var o=this.svgElem_.childNodes.item(i);if(o&&1===o.nodeType)if("g"===o.tagName){!0;var s=k("title",e=o).text()||(Object(c.e)()&&e.querySelectorAll?k(e.querySelectorAll("title")).text():"");s?(r.push(s),n=new S(s,o),this.all_layers.push(n),this.layer_map[s]=n):a.push(o)}else I.includes(o.nodeName)&&a.push(o)}this.current_layer=n}},{key:"createLayer",value:function(e,t){this.current_layer&&this.current_layer.deactivate(),(void 0===e||null===e||""===e||this.layer_map[e])&&(e=T(Object.keys(this.layer_map)));var a=new S(e,null,this.svgElem_);return t&&(t.startBatchCommand("Create Layer"),t.insertElement(a.getGroup()),t.endBatchCommand()),this.all_layers.push(a),this.layer_map[e]=a,this.current_layer=a,a.getGroup()}},{key:"cloneLayer",value:function(e,t){var a=this;if(!this.current_layer)return null;this.current_layer.deactivate(),(void 0===e||null===e||""===e||this.layer_map[e])&&(e=T(Object.keys(this.layer_map)));var r=this.current_layer.getGroup(),n=new S(e,r,this.svgElem_),i=n.getGroup();Object(f.a)(r.childNodes).forEach((function(e){"title"!==e.localName&&i.append(a.copyElem(e))})),t&&(t.startBatchCommand("Duplicate Layer"),t.insertElement(i),t.endBatchCommand());var o=this.all_layers.indexOf(this.current_layer);return o>=0?this.all_layers.splice(o+1,0,n):this.all_layers.push(n),this.layer_map[e]=n,this.current_layer=n,i}},{key:"getLayerVisibility",value:function(e){var t=this.layer_map[e];return!!t&&t.isVisible()}},{key:"setLayerVisibility",value:function(e,t){if("boolean"!==typeof t)return null;var a=this.layer_map[e];return a?(a.setVisible(t),a.getGroup()):null}},{key:"getLayerOpacity",value:function(e){var t=this.layer_map[e];return t?t.getOpacity():null}},{key:"setLayerOpacity",value:function(e,t){if(!("number"!==typeof t||t<0||t>1)){var a=this.layer_map[e];a&&a.setOpacity(t)}}},{key:"copyElem",value:function(e){var t=this;return Object(u.d)(e,(function(){return t.getNextId()}))}}]),e}(),B=function(e,t){(P=!1===e?O:N)!==N||t.getNonce()?P===O&&t.getNonce()&&t.clearNonce():t.setNonce(Math.floor(100001*Math.random()))},j=function(){Y(),L.getCurrentDrawing().identifyLayers()},F=function(e,t){var a=L.getCurrentDrawing().createLayer(e,R(t));L.clearSelection(),L.call("changed",[a])},U=function(e,t){var a=L.getCurrentDrawing().cloneLayer(e,R(t));L.clearSelection(),Y(),L.call("changed",[a])},V=function(){var e=L.getCurrentDrawing().getCurrentLayer(),t=e.nextSibling,a=e.parentNode;if(e=L.getCurrentDrawing().deleteCurrentLayer()){var r=new C.BatchCommand("Delete Layer");return r.addSubCommand(new C.RemoveElementCommand(e,t,a)),L.addCommandToHistory(r),L.clearSelection(),L.call("changed",[a]),!0}return!1},G=function(e){var t=L.getCurrentDrawing().setCurrentLayer(Object(u.D)(e));return t&&L.clearSelection(),t},q=function(e){var t=L.getCurrentDrawing(),a=t.getCurrentLayer();if(a&&t.setCurrentLayerName(e,R()))return L.call("changed",[a]),!0;return!1},H=function(e){var t=L.getCurrentDrawing().setCurrentLayerPosition(e);return!!t&&(L.addCommandToHistory(new C.MoveElementCommand(t.currentGroup,t.oldNextSibling,L.getSVGContent())),!0)},z=function(e,t){var a=L.getCurrentDrawing(),r=a.getLayerVisibility(e),n=a.setLayerVisibility(e,t);if(!n)return!1;var i=r?"inline":"none";return L.addCommandToHistory(new C.ChangeElementCommand(n,{display:i},"Layer Visibility")),n===a.getCurrentLayer()&&(L.clearSelection(),L.pathActions.clear()),!0},W=function(e){var t=L.getCurrentDrawing().getLayerByName(e);if(!t)return!1;for(var a=new C.BatchCommand("Move Elements to Layer"),r=L.getSelectedElements(),n=r.length;n--;){var i=r[n];if(i){var o=i.nextSibling,s=i.parentNode;t.append(i),a.addSubCommand(new C.MoveElementCommand(i,o,s))}}return L.addCommandToHistory(a),!0},Q=function(e){L.getCurrentDrawing().mergeLayer(R(e)),L.clearSelection(),Y(),L.changeSVGContent()},J=function(e){L.getCurrentDrawing().mergeAllLayers(R(e)),L.clearSelection(),Y(),L.changeSVGContent()},Y=function(){var e=D.length;if(e){for(var t=0;t<e;t++){var a=D[t],r=L.elData(a,"orig_opac");1!==r?a.setAttribute("opacity",r):a.removeAttribute("opacity"),a.setAttribute("style","pointer-events: inherit")}D=[],L.clearSelection(!0),L.call("contextset",null)}L.setCurrentGroup(null)},Z=function(e){Y(),"string"===typeof e&&(e=Object(u.n)(e)),L.setCurrentGroup(e),k(e).parentsUntil("#svgcontent").addBack().siblings().each((function(){var e=this.getAttribute("opacity")||1;L.elData(this,"orig_opac",e),this.setAttribute("opacity",.33*e),this.setAttribute("style","pointer-events: none"),D.push(this)})),L.clearSelection(),L.call("contextset",L.getCurrentGroup())},X=a(101),K=Object(y.b)(),$={a:["class","clip-path","clip-rule","fill","fill-opacity","fill-rule","filter","id","mask","opacity","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","style","systemLanguage","transform","xlink:href","xlink:title"],circle:["class","clip-path","clip-rule","cx","cy","fill","fill-opacity","fill-rule","filter","id","mask","opacity","r","requiredFeatures","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","style","systemLanguage","transform"],clipPath:["class","clipPathUnits","id","transform"],defs:[],style:["type"],desc:[],ellipse:["class","clip-path","clip-rule","cx","cy","fill","fill-opacity","fill-rule","filter","id","mask","opacity","requiredFeatures","rx","ry","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","style","systemLanguage","transform"],feGaussianBlur:["class","color-interpolation-filters","id","requiredFeatures","stdDeviation","result","in"],feBlend:["class","color-interpolation-filters","id","requiredFeatures","stdDeviation","in","in2","mode","result","x","y","width","height"],feComponentTransfer:["class"],feFuncR:["tableValues","type"],feColorMatrix:["class","in","type","values","result","id"],feComposite:["class","id","in","in2","operator","result","k2","k1","k3"],feOffset:["dx","dy","result"],feFlood:["flood-color","flood-opacity"],feDropShadow:["dx","dy","stdDeviation"],feMerge:[],feImage:["preserveAspectRatio","xlink:href","crossorigin","result","x","y","width","height"],feMergeNode:[],fefeOffset:["class","color-interpolation-filters","id","requiredFeatures","stdDeviation"],feMorphology:["class","in","operator","radius"],filter:["class","color-interpolation-filters","filterRes","filterUnits","height","id","primitiveUnits","requiredFeatures","width","x","xlink:href","y","style"],foreignObject:["class","font-size","height","id","opacity","requiredFeatures","style","transform","width","x","y"],g:["class","clip-path","clip-rule","id","display","fill","fill-opacity","fill-rule","filter","mask","opacity","requiredFeatures","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","style","systemLanguage","transform","font-family","font-size","font-style","font-weight","text-anchor","type","xe-props","pointer-events","xe_id"],image:["class","clip-path","clip-rule","filter","height","id","mask","opacity","requiredFeatures","style","systemLanguage","transform","width","x","xlink:href","xlink:title","y","preserveAspectRatio"],line:["class","clip-path","clip-rule","fill","fill-opacity","fill-rule","filter","id","marker-end","marker-mid","marker-start","mask","opacity","requiredFeatures","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","style","systemLanguage","transform","x1","x2","y1","y2"],linearGradient:["class","id","gradientTransform","gradientUnits","requiredFeatures","spreadMethod","systemLanguage","x1","x2","xlink:href","y1","y2"],marker:["id","class","markerHeight","markerUnits","markerWidth","orient","preserveAspectRatio","refX","refY","systemLanguage","viewBox"],mask:["class","height","id","maskContentUnits","maskUnits","width","x","y"],metadata:["class","id"],path:["aHeight","aWidth","class","clip-path","clip-rule","cropVal","d","fill","fill-opacity","fill-rule","filter","id","isBleed","marker-end","marker-mid","marker-start","mask","opacity","requiredFeatures","safeVal","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","style","systemLanguage","transform","pointer-events","height","width","x","y","vector-effect","xe-props","paint-order"],pattern:["class","height","id","patternContentUnits","patternTransform","patternUnits","requiredFeatures","style","systemLanguage","viewBox","width","x","xlink:href","y"],polygon:["class","clip-path","clip-rule","id","fill","fill-opacity","fill-rule","filter","id","class","marker-end","marker-mid","marker-start","mask","opacity","points","requiredFeatures","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","style","systemLanguage","transform","xe-props"],polyline:["class","clip-path","clip-rule","id","fill","fill-opacity","fill-rule","filter","marker-end","marker-mid","marker-start","mask","opacity","points","requiredFeatures","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","style","systemLanguage","transform"],radialGradient:["class","cx","cy","fx","fy","gradientTransform","gradientUnits","id","r","requiredFeatures","spreadMethod","systemLanguage","xlink:href"],rect:["aHeight","aWidth","class","clip-path","clip-rule","cropVal","fill","fill-opacity","fill-rule","filter","height","id","isBleed","mask","opacity","requiredFeatures","rx","ry","safeVal","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","style","systemLanguage","transform","width","x","y","xe-props"],stop:["class","id","offset","requiredFeatures","stop-color","stop-opacity","style","systemLanguage"],svg:["class","clip-path","clip-rule","filter","id","height","mask","preserveAspectRatio","requiredFeatures","style","systemLanguage","viewBox","width","x","xmlns","xmlns:se","xmlns:xlink","y"],switch:["class","id","requiredFeatures","systemLanguage"],symbol:["class","fill","fill-opacity","fill-rule","filter","font-family","font-size","font-style","font-weight","id","opacity","preserveAspectRatio","requiredFeatures","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","style","systemLanguage","transform","viewBox"],text:["class","clip-path","clip-rule","fill","fill-opacity","fill-rule","filter","font-family","font-size","font-style","font-weight","id","mask","opacity","requiredFeatures","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","style","systemLanguage","text-anchor","transform","x","xml:space","y"],textPath:["class","id","method","requiredFeatures","spacing","startOffset","style","systemLanguage","transform","xlink:href"],title:[],tspan:["class","clip-path","clip-rule","dx","dy","fill","fill-opacity","fill-rule","filter","font-family","font-size","font-style","font-weight","id","mask","opacity","requiredFeatures","rotate","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","style","systemLanguage","text-anchor","textLength","transform","x","xml:space","y"],use:["class","clip-path","clip-rule","fill","fill-opacity","fill-rule","filter","height","id","mask","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","style","transform","width","x","xlink:href","y"],annotation:["encoding"],"annotation-xml":["encoding"],maction:["actiontype","other","selection"],math:["class","id","display","xmlns"],menclose:["notation"],merror:[],mfrac:["linethickness"],mi:["mathvariant"],mmultiscripts:[],mn:[],mo:["fence","lspace","maxsize","minsize","rspace","stretchy"],mover:[],mpadded:["lspace","width","height","depth","voffset"],mphantom:[],mprescripts:[],mroot:[],mrow:["xlink:href","xlink:type","xmlns:xlink"],mspace:["depth","height","width"],msqrt:[],mstyle:["displaystyle","mathbackground","mathcolor","mathvariant","scriptlevel"],msub:[],msubsup:[],msup:[],mtable:["align","columnalign","columnlines","columnspacing","displaystyle","equalcolumns","equalrows","frame","rowalign","rowlines","rowspacing","width"],mtd:["columnalign","columnspan","rowalign","rowspan"],mtext:[],mtr:["columnalign","rowalign"],munder:[],munderover:[],none:[],semantics:[]},ee={};Object.entries($).forEach((function(e){var t=Object(r.a)(e,2),a=t[0],n=t[1],i={};Object.entries(n).forEach((function(e){var t=Object(r.a)(e,2),a=(t[0],t[1]);if(a.includes(":")){var n=a.split(":");i[n[1]]=y.a[n[0].toUpperCase()]}else i[a]="xmlns"===a?y.a.XMLNS:null})),ee[a]=i}));var te,ae,re,ne,ie=function e(t){if(3===t.nodeType&&(t.nodeValue=t.nodeValue.replace(/^\s+|\s+$/g,""),t.nodeValue.length||t.remove()),1===t.nodeType){var a=t.ownerDocument,n=t.parentNode;if(a&&n){var i=$[t.nodeName],o=ee[t.nodeName];if("undefined"!==typeof i){for(var s=[],l=t.attributes.length;l--;){var d=t.attributes.item(l),p=d.nodeName,m=d.localName,h=d.namespaceURI;if({}.hasOwnProperty.call(o,m)&&h===o[m]&&h!==y.a.XMLNS||h===y.a.XMLNS&&K[d.value]||((p.startsWith("se:")||p.startsWith("data-"))&&s.push([p,d.value]),t.removeAttributeNS(h,m)),Object(c.b)())switch(p){case"transform":case"gradientTransform":case"patternTransform":var g=d.value.replace(/(\d)-/g,"$1 -");t.setAttribute(p,g)}if("style"===p){for(var f=d.value.split(";"),v=f.length;v--;){var b=f[v].split(":"),A=Object(r.a)(b,2),_=A[0],E=A[1],S=(_||"").trim(),C=(E||"").trim();i.includes(S)&&t.setAttribute(S,C)}t.removeAttribute("style")}}Object.values(s).forEach((function(e){var a=Object(r.a)(e,2),n=a[0],i=a[1];t.setAttributeNS(y.a.SE,n,i)}));var x=Object(u.o)(t);if(x&&["filter","linearGradient","pattern","radialGradient","textPath","use"].includes(t.nodeName)&&"#"!==x[0]&&(Object(u.A)(t,""),t.removeAttributeNS(y.a.XLINK,"href")),"use"===t.nodeName&&!Object(u.o)(t))return void t.remove();for(Object.values(["clip-path","fill","filter","marker-end","marker-mid","marker-start","mask","stroke"],(function(e){var a=t.getAttribute(e);a&&(a=Object(u.u)(a))&&"#"!==a[0]&&(t.setAttribute(e,""),t.removeAttribute(e))})),l=t.childNodes.length;l--;)e(t.childNodes.item(l))}else{for(var w=[];t.hasChildNodes();)w.push(n.insertBefore(t.firstChild,t));t.remove();for(var k=w.length;k--;)e(w[k])}}}},oe=a(18),se=a(32),le=l.a,ce=[0,"z","M","m","L","l","C","c","Q","q","A","a","H","h","V","v","S","s","T","t"],ue=null,de=function(e,t,a){for(var n=function(e,t){return Object(oe.i)(e,t,a)},i=function(e){return a.a*e},o=function(e){return a.d*e},s=ue.getGridSnapping()&&"svg"===e.parentNode.parentNode.localName,l=function(){s&&Object.entries(t).forEach((function(e){var a=Object(r.a)(e,2),n=a[0],i=a[1];t[n]=Object(u.B)(i)})),Object(u.a)(e,t,1e3,!0)},c=Object(u.l)(e),d=0;d<2;d++){var p=0===d?"fill":"stroke",m=e.getAttribute(p);if(m&&m.startsWith("url(")&&(a.a<0||a.d<0)){var h=Object(u.q)(m);if(!h)continue;var g=h.cloneNode(!0);if(a.a<0){var f=g.getAttribute("x1"),v=g.getAttribute("x2");g.setAttribute("x1",-(f-1)),g.setAttribute("x2",-(v-1))}if(a.d<0){var b=g.getAttribute("y1"),A=g.getAttribute("y2");g.setAttribute("y1",-(b-1)),g.setAttribute("y2",-(A-1))}g.id=ue.getDrawing().getNextId(),Object(u.k)().append(g),e.setAttribute(p,"url(#"+g.id+")")}}var y=e.tagName;if("g"===y||"text"===y||"tspan"===y||"use"===y)if(1!==a.a||0!==a.b||0!==a.c||1!==a.d||0===a.e&&0===a.f){var _=Object(se.b)(e),E=ue.getSVGRoot().createSVGTransform();E.setMatrix(Object(oe.d)(Object(oe.h)(_).matrix,a)),_.clear(),_.appendItem(E)}else{var S=Object(oe.h)(e).matrix,C=Object(oe.d)(S.inverse(),a,S);t.x=parseFloat(t.x)+C.e,t.y=parseFloat(t.y)+C.f}switch(y){case"foreignObject":case"rect":case"image":if("image"===y&&(a.a<0||a.d<0)){var x=Object(se.b)(e),w=ue.getSVGRoot().createSVGTransform();w.setMatrix(Object(oe.d)(Object(oe.h)(x).matrix,a)),x.clear(),x.appendItem(w)}else{var k=n(t.x,t.y);t.width=i(t.width),t.height=o(t.height),t.x=k.x+Math.min(0,t.width),t.y=k.y+Math.min(0,t.height),t.width=Math.abs(t.width),t.height=Math.abs(t.height)}l();break;case"ellipse":var I=n(t.cx,t.cy);t.cx=I.x,t.cy=I.y,t.rx=i(t.rx),t.ry=o(t.ry),t.rx=Math.abs(t.rx),t.ry=Math.abs(t.ry),l();break;case"circle":var N=n(t.cx,t.cy);t.cx=N.x,t.cy=N.y;var O=Object(oe.g)(c.x,c.y,c.width,c.height,a),P=O.tr.x-O.tl.x,D=O.bl.y-O.tl.y;t.r=Math.min(P/2,D/2),t.r&&(t.r=Math.abs(t.r)),l();break;case"line":var R=n(t.x1,t.y1),T=n(t.x2,t.y2);t.x1=R.x,t.y1=R.y,t.x2=T.x,t.y2=T.y;case"text":case"tspan":case"use":l();break;case"g":var L=le(e).data("gsvg");L&&Object(u.a)(L,t,1e3,!0);break;case"polyline":case"polygon":for(var M=t.points.length,B=0;B<M;++B){var j=t.points[B],F=n(j.x,j.y),U=F.x,V=F.y;t.points[B].x=U,t.points[B].y=V}for(var G="",q=0;q<M;++q){var H=t.points[q];G+=H.x+","+H.y+" "}e.setAttribute("points",G);break;case"path":var z=e.pathSegList,W=z.numberOfItems;t.d=[];for(var Q=0;Q<W;++Q){var J=z.getItem(Q);t.d[Q]={type:J.pathSegType,x:J.x,y:J.y,x1:J.x1,y1:J.y1,x2:J.x2,y2:J.y2,r1:J.r1,r2:J.r2,angle:J.angle,largeArcFlag:J.largeArcFlag,sweepFlag:J.sweepFlag}}if(!(W=t.d.length))return;var Y=t.d[0],Z=n(Y.x,Y.y);t.d[0].x=Z.x,t.d[0].y=Z.y;for(var X=1;X<W;++X){var K=t.d[X];if(K.type%2===0){var $=n(void 0!==K.x?K.x:Z.x,void 0!==K.y?K.y:Z.y),ee=n(K.x1,K.y1),te=n(K.x2,K.y2);K.x=$.x,K.y=$.y,K.x1=ee.x,K.y1=ee.y,K.x2=te.x,K.y2=te.y,K.r1=i(K.r1),K.r2=o(K.r2)}else K.x=i(K.x),K.y=o(K.y),K.x1=i(K.x1),K.y1=o(K.y1),K.x2=i(K.x2),K.y2=o(K.y2),K.r1=i(K.r1),K.r2=o(K.r2)}var ae="";W=t.d.length;for(var re=0;re<W;++re){var ne=t.d[re],ie=ne.type;switch(ae+=ce[ie],ie){case 13:case 12:ae+=ne.x+" ";break;case 15:case 14:ae+=ne.y+" ";break;case 3:case 5:case 19:case 2:case 4:case 18:ae+=ne.x+","+ne.y+" ";break;case 7:case 6:ae+=ne.x1+","+ne.y1+" "+ne.x2+","+ne.y2+" "+ne.x+","+ne.y+" ";break;case 9:case 8:ae+=ne.x1+","+ne.y1+" "+ne.x+","+ne.y+" ";break;case 11:case 10:ae+=ne.r1+","+ne.r2+" "+ne.angle+" "+Number(ne.largeArcFlag)+" "+Number(ne.sweepFlag)+" "+ne.x+","+ne.y+" ";break;case 17:case 16:ae+=ne.x2+","+ne.y2+" "+ne.x+","+ne.y+" "}}e.setAttribute("d",ae)}},pe=Object(b.a)(l.a),me=function(e,t,a){if(Object(u.q)(e)){var r=Object(u.q)(e).firstElementChild,n=Object(se.b)(r),i=te.getSVGRoot().createSVGTransform();i.setTranslate(t,a),n.appendItem(i),he(r)}},he=function e(t){if(Object(u.x)(t))return null;if("svg"===t.nodeName&&navigator.userAgent.includes("Firefox/20"))return null;var a=te.getSVGRoot(),r=Object(se.b)(t);if(r&&r.numberOfItems>0){for(var n=r.numberOfItems,i=n;n--;){var o=r.getItem(n);if(0===o.type)r.removeItem(n);else if(1===o.type){if(Object(oe.c)(o.matrix)){if(1===i)return t.removeAttribute("transform"),null;r.removeItem(n)}}else 4===o.type&&0===o.angle&&r.removeItem(n)}if(1===r.numberOfItems&&Object(u.r)(t))return null}if(!r||0===r.numberOfItems)return t.setAttribute("transform",""),t.removeAttribute("transform"),null;if(r){for(var s=[],l=r.numberOfItems;l--;){var p=r.getItem(l);1===p.type?s.push([p.matrix,l]):s.length&&(s=[])}if(2===s.length){var m=a.createSVGTransformFromMatrix(Object(oe.d)(s[1][0],s[0][0]));r.removeItem(s[0][1]),r.removeItem(s[1][1]),r.insertItemBefore(m,s[1][1])}if((l=r.numberOfItems)>=2&&1===r.getItem(l-2).type&&2===r.getItem(l-1).type){var h=a.createSVGTransform(),g=Object(oe.d)(r.getItem(l-2).matrix,r.getItem(l-1).matrix);h.setMatrix(g),r.removeItem(l-2),r.removeItem(l-2),r.appendItem(h)}}switch(t.tagName){case"line":case"polyline":case"polygon":case"path":break;default:if(1===r.numberOfItems&&1===r.getItem(0).type||2===r.numberOfItems&&1===r.getItem(0).type&&4===r.getItem(0).type)return null}var f,v,b=pe(t).data("gsvg"),A=new C.BatchCommand("Transform"),_={},E=null,S=[];switch(t.tagName){case"line":S=["x1","y1","x2","y2"];break;case"circle":S=["cx","cy","r"];break;case"ellipse":S=["cx","cy","rx","ry"];break;case"foreignObject":case"rect":case"image":S=["width","height","x","y"];break;case"use":case"text":case"tspan":S=["x","y"];break;case"polygon":case"polyline":(E={}).points=t.getAttribute("points");var x=t.points,w=x.numberOfItems;_.points=new Array(w);for(var k=0;k<w;++k){var I=x.getItem(k);_.points[k]={x:I.x,y:I.y}}break;case"path":(E={}).d=t.getAttribute("d"),_.d=t.getAttribute("d")}if(S.length?(_=pe(t).attr(S),pe.each(_,(function(e,t){_[e]=Object(d.b)(e,t)}))):b&&(_={x:pe(b).attr("x")||0,y:pe(b).attr("y")||0}),Object(u.x)(E)&&(E=pe.extend(!0,{},_),pe.each(E,(function(e,t){E[e]=Object(d.b)(e,t)}))),E.transform=te.getStartTransform()||"","g"===t.tagName&&!b||"a"===t.tagName){var N=Object(u.l)(t);f={x:N.x+N.width/2,y:N.y+N.height/2},v=Object(oe.i)(N.x+N.width/2,N.y+N.height/2,Object(oe.h)(r).matrix);var O=Object(u.r)(t);if(O){var P,D=O*Math.PI/180;P=Math.abs(D)>1e-10?Math.sin(D)/(1-Math.cos(D)):2/D;for(var R=0;R<r.numberOfItems;++R){var T=r.getItem(R);if(4===T.type){var L=T.matrix;f.y=(P*L.e+L.f)/2,f.x=(L.e-P*L.f)/2,r.removeItem(R);break}}}var M,B,j=r.numberOfItems,F=0,U=0,V=0;if(j&&(M=r.getItem(0).matrix),j>=3&&3===r.getItem(j-2).type&&2===r.getItem(j-3).type&&2===r.getItem(j-1).type){V=3;for(var G=r.getItem(j-3).matrix,q=r.getItem(j-2).matrix,H=r.getItem(j-1).matrix,z=t.childNodes,W=z.length;W--;){var Q=z.item(W);if(F=0,U=0,1===Q.nodeType){var J=Object(se.b)(Q);if(!J)continue;var Y=Object(oe.h)(J).matrix,Z=Object(u.r)(Q);if(B=te.getStartTransform(),te.setStartTransform(Q.getAttribute("transform")),Z||Object(oe.b)(J)){var X=a.createSVGTransform();X.setMatrix(Object(oe.d)(G,q,H,Y)),J.clear(),J.appendItem(X)}else{var K=Object(oe.d)(Y.inverse(),H,Y),$=a.createSVGMatrix();$.e=-K.e,$.f=-K.f;var ee=Object(oe.d)($.inverse(),Y.inverse(),G,q,H,Y,K.inverse()),ae=a.createSVGTransform(),re=a.createSVGTransform(),ne=a.createSVGTransform();ae.setTranslate(K.e,K.f),re.setScale(ee.a,ee.d),ne.setTranslate($.e,$.f),J.appendItem(ne),J.appendItem(re),J.appendItem(ae)}A.addSubCommand(e(Q)),te.setStartTransform(B)}}r.removeItem(j-1),r.removeItem(j-2),r.removeItem(j-3)}else if(j>=3&&1===r.getItem(j-1).type){V=3;var ie=Object(oe.h)(r).matrix,le=a.createSVGTransform();le.setMatrix(ie),r.clear(),r.appendItem(le)}else if((1===j||j>1&&3!==r.getItem(1).type)&&2===r.getItem(0).type){V=2;var ce=Object(oe.h)(r).matrix;r.removeItem(0);var ue=Object(oe.h)(r).matrix.inverse(),he=Object(oe.d)(ue,ce);if(F=he.e,U=he.f,0!==F||0!==U){for(var ge=t.childNodes,fe=ge.length,ve=[];fe--;){var be=ge.item(fe);if(1===be.nodeType){if(be.getAttribute("clip-path")){var Ae=be.getAttribute("clip-path");ve.includes(Ae)||(me(Ae,F,U),ve.push(Ae))}B=te.getStartTransform(),te.setStartTransform(be.getAttribute("transform"));var ye=Object(se.b)(be);if(ye){var _e=a.createSVGTransform();_e.setTranslate(F,U),ye.numberOfItems?ye.insertItemBefore(_e,0):ye.appendItem(_e),A.addSubCommand(e(be));for(var Ee=t.getElementsByTagNameNS(y.a.SVG,"use"),Se="#"+be.id,Ce=Ee.length;Ce--;){var xe=Ee.item(Ce);if(Se===Object(u.o)(xe)){var we=a.createSVGTransform();we.setTranslate(-F,-U),Object(se.b)(xe).insertItemBefore(we,0),A.addSubCommand(e(xe))}}te.setStartTransform(B)}}}te.setStartTransform(B)}}else{if(1!==j||1!==r.getItem(0).type||O){if(O){var ke=a.createSVGTransform();ke.setRotate(O,v.x,v.y),r.numberOfItems?r.insertItemBefore(ke,0):r.appendItem(ke)}return 0===r.numberOfItems&&t.removeAttribute("transform"),null}V=1;for(var Ie=r.getItem(0).matrix,Ne=t.childNodes,Oe=Ne.length;Oe--;){var Pe=Ne.item(Oe);if(1===Pe.nodeType){B=te.getStartTransform(),te.setStartTransform(Pe.getAttribute("transform"));var De=Object(se.b)(Pe);if(!De)continue;var Re=Object(oe.d)(Ie,Object(oe.h)(De).matrix),Te=a.createSVGTransform();Te.setMatrix(Re),De.clear(),De.appendItem(Te,0),A.addSubCommand(e(Pe)),te.setStartTransform(B);var Le=Pe.getAttribute("stroke-width");if("none"!==Pe.getAttribute("stroke")&&!isNaN(Le)){var Me=(Math.abs(Re.a)+Math.abs(Re.d))/2;Pe.setAttribute("stroke-width",Le*Me)}}}r.clear()}if(2===V){if(O){v={x:f.x+M.e,y:f.y+M.f};var Be=a.createSVGTransform();Be.setRotate(O,v.x,v.y),r.numberOfItems?r.insertItemBefore(Be,0):r.appendItem(Be)}}else if(3===V){var je=Object(oe.h)(r).matrix,Fe=a.createSVGTransform();Fe.setRotate(O,f.x,f.y);var Ue=Fe.matrix,Ve=a.createSVGTransform();Ve.setRotate(O,v.x,v.y);var Ge=Ve.matrix.inverse(),qe=je.inverse(),He=Object(oe.d)(qe,Ge,Ue,je);if(F=He.e,U=He.f,0!==F||0!==U)for(var ze=t.childNodes,We=ze.length;We--;){var Qe=ze.item(We);if(1===Qe.nodeType){B=te.getStartTransform(),te.setStartTransform(Qe.getAttribute("transform"));var Je=Object(se.b)(Qe),Ye=a.createSVGTransform();Ye.setTranslate(F,U),Je.numberOfItems?Je.insertItemBefore(Ye,0):Je.appendItem(Ye),A.addSubCommand(e(Qe)),te.setStartTransform(B)}}O&&(r.numberOfItems?r.insertItemBefore(Ve,0):r.appendItem(Ve))}}else{var Ze,Xe=Object(u.l)(t);if(!Xe&&"path"!==t.tagName)return null;var Ke=Object(u.r)(t);if(Ke){f={x:Xe.x+Xe.width/2,y:Xe.y+Xe.height/2},v=Object(oe.i)(Xe.x+Xe.width/2,Xe.y+Xe.height/2,Object(oe.h)(r).matrix);for(var $e=Ke*Math.PI/180,et=Math.abs($e)>1e-10?Math.sin($e)/(1-Math.cos($e)):2/$e,tt=0;tt<r.numberOfItems;++tt){var at=r.getItem(tt);if(4===at.type){var rt=at.matrix;f.y=(et*rt.e+rt.f)/2,f.x=(rt.e-et*rt.f)/2,r.removeItem(tt);break}}}var nt=0,it=r.numberOfItems;if(!Object(c.g)()&&navigator&&navigator.userAgent&&!navigator.userAgent.includes("Firefox")){var ot=t.getAttribute("fill");if(ot&&ot.startsWith("url(")){var st=Object(u.q)(ot),lt="pattern";if(st.tagName!==lt&&(lt="gradient"),"userSpaceOnUse"===st.getAttribute(lt+"Units")){Ze=Object(oe.h)(r).matrix;var ct=Object(se.b)(st),ut=Object(oe.h)(ct).matrix,dt="matrix("+[(Ze=Object(oe.d)(Ze,ut)).a,Ze.b,Ze.c,Ze.d,Ze.e,Ze.f].join(",")+")";st.setAttribute(lt+"Transform",dt)}}}if(it>=3&&3===r.getItem(it-2).type&&2===r.getItem(it-3).type&&2===r.getItem(it-1).type)nt=3,Ze=Object(oe.h)(r,it-3,it-1).matrix,r.removeItem(it-1),r.removeItem(it-2),r.removeItem(it-3);else if(4===it&&1===r.getItem(it-1).type){nt=3,Ze=Object(oe.h)(r).matrix;var pt=a.createSVGTransform();pt.setMatrix(Ze),r.clear(),r.appendItem(pt),Ze=a.createSVGMatrix()}else if((1===it||it>1&&3!==r.getItem(1).type)&&2===r.getItem(0).type){nt=2;var mt=r.getItem(0).matrix,ht=Object(oe.h)(r,1).matrix,gt=ht.inverse();Ze=Object(oe.d)(gt,mt,ht),r.removeItem(0)}else{if(1!==it||1!==r.getItem(0).type||Ke){if(Ke){var ft=a.createSVGTransform();ft.setRotate(Ke,v.x,v.y),r.numberOfItems?r.insertItemBefore(ft,0):r.appendItem(ft)}return 0===r.numberOfItems&&t.removeAttribute("transform"),null}switch(Ze=Object(oe.h)(r).matrix,t.tagName){case"line":_=pe(t).attr(["x1","y1","x2","y2"]);case"polyline":case"polygon":if(_.points=t.getAttribute("points"),_.points){var vt=t.points,bt=vt.numberOfItems;_.points=new Array(bt);for(var At=0;At<bt;++At){var yt=vt.getItem(At);_.points[At]={x:yt.x,y:yt.y}}}case"path":_.d=t.getAttribute("d"),nt=1,r.clear()}}if(1!==nt&&2!==nt&&3!==nt||de(t,_,Ze),2===nt){if(Ke){Object(oe.b)(r)||(v={x:f.x+Ze.e,y:f.y+Ze.f});var _t=a.createSVGTransform();_t.setRotate(Ke,v.x,v.y),r.numberOfItems?r.insertItemBefore(_t,0):r.appendItem(_t)}if("text"===t.tagName)for(var Et=t.childNodes,St=Et.length;St--;){var Ct=Et.item(St);if("tspan"===Ct.tagName){var xt={x:pe(Ct).attr("x")||0,y:pe(Ct).attr("y")||0};de(Ct,xt,Ze)}}}else if(3===nt&&Ke){var wt=Object(oe.h)(r).matrix,kt=a.createSVGTransform();kt.setRotate(Ke,f.x,f.y);var It=kt.matrix,Nt=a.createSVGTransform();Nt.setRotate(Ke,v.x,v.y);var Ot=Nt.matrix.inverse(),Pt=wt.inverse(),Dt=Object(oe.d)(Pt,Ot,It,wt);de(t,_,Dt),Ke&&(r.numberOfItems?r.insertItemBefore(Nt,0):r.appendItem(Nt))}}return 0===r.numberOfItems&&t.removeAttribute("transform"),A.addSubCommand(new C.ChangeElementCommand(t,E)),A},ge=l.a,fe=Object(c.f)()?12:6,ve=Object(c.f)()?40:20,be=Object(c.f)()?2.4:1.2,Ae=Object(c.f)()?80:40,ye=Object(c.f)()?2:1,_e=fe,Ee=ve,Se=be,Ce=ye,xe=Ae,we=1,ke=1,Ie=!1,Ne=function(){function e(t,a,r){var n=this;Object(v.a)(this,e),this.hideLockedGrip=function(){var e="inline",t=n.selectedElement;t&&t.prefs&&t.prefs.lock&&t.prefs.lock.delete?ne.selectorGrips.sw.setAttribute("display","none"):ne.selectorGrips.sw.setAttribute("display",e),t&&t.prefs&&t.prefs.lock&&t.prefs.lock.move?ne.selectorGrips.nw.setAttribute("display","none"):ne.selectorGrips.nw.setAttribute("display",e),t&&t.prefs&&t.prefs.lock&&t.prefs.lock.rotate?ne.selectorGrips.ne.setAttribute("display","none"):ne.selectorGrips.ne.setAttribute("display",e),t&&t.prefs&&(t.prefs.lock&&t.prefs.lock.resize||t.prefs.restrictScaling)?(ne.selectorGrips.se.setAttribute("display","none"),ne.midGrips.e.setAttribute("display","none"),ne.midGrips.w.setAttribute("display","none"),ne.midGrips.n.setAttribute("display","none"),ne.midGrips.s.setAttribute("display","none")):(ne.selectorGrips.se.setAttribute("display",e),ne.midGrips.e.setAttribute("display",e),ne.midGrips.w.setAttribute("display",e),ne.midGrips.n.setAttribute("display",e),ne.midGrips.s.setAttribute("display",e)),t&&t.prefs&&"background"===t.prefs.type?ne.selectorGripsGroup.setAttribute("display","none"):ne.selectorGripsGroup.setAttribute("display",e),t&&t.prefs&&t.prefs.subType&&("name"===t.prefs.subType||"number"===t.prefs.subType)||Object(c.f)()?ne.actionGrips.sb.setAttribute("display",e):ne.actionGrips.sb.setAttribute("display","none")},this.setIsTemplateEdit=function(e){Ie=e},this.id=t,this.selectedElement=a,this.locked=!0,this.selectorGroup=ae.createSVGElement({element:"g",attr:{id:"selectorGroup"+this.id}}),this.selectorRect=this.selectorGroup.appendChild(ae.createSVGElement({element:"path",attr:{id:"selectedBox"+this.id,fill:"none",stroke:"#22C","stroke-width":we,style:"pointer-events:none"}})),this.gripCoords={nw:null,n:null,ne:null,e:null,se:null,s:null,sw:null,w:null},this.reset(this.selectedElement,r)}return Object(A.a)(e,[{key:"reset",value:function(e,t){this.locked=!0,this.selectedElement=e,this.resize(t),this.selectorGroup.setAttribute("display","inline")}},{key:"showGrips",value:function(t){var a=t?"inline":"none";ne.selectorGripsGroup.setAttribute("display",a);var r=this.selectedElement;this.hasGrips=t,r&&t&&(this.selectorGroup.append(ne.selectorGripsGroup),e.updateGripCursors(Object(u.r)(r)),Ie||this.hideLockedGrip())}},{key:"resize",value:function(e){var t=this.selectorRect,a=ne,n=a.selectorGrips,i=this.selectedElement,o=i.getAttribute("stroke-width"),s=ae.getCurrentZoom(),l=1/s;"none"===i.getAttribute("stroke")||isNaN(o)||(l+=o/2);var c=i.tagName;"text"===c&&(l+=2/s);var d=Object(se.b)(i),p=Object(oe.h)(d).matrix;if(p.e*=s,p.f*=s,e||(e=Object(u.l)(i)),"g"===c&&!ge.data(i,"gsvg")){var m=Object(u.s)([i.childNodes]);m&&(e=m)}var h=e.x,g=e.y,f=e.width,v=e.height;l*=s;var b=Object(oe.g)(h*s,g*s,f*s,v*s,p),A=b.aabox,y=A.x-l,_=A.y-l,E=A.width+2*l,S=A.height+2*l,C=y+E/2,x=_+S/2,w=Object(u.r)(i);if(w){var k=ae.svgRoot().createSVGTransform();k.setRotate(-w,C,x);var I=k.matrix;b.tl=Object(oe.i)(b.tl.x,b.tl.y,I),b.tr=Object(oe.i)(b.tr.x,b.tr.y,I),b.bl=Object(oe.i)(b.bl.x,b.bl.y,I),b.br=Object(oe.i)(b.br.x,b.br.y,I);var N=b.tl,O=N.x,P=N.y,D=N.x,R=N.y,T=Math.min,L=Math.max;y=O=T(O,T(b.tr.x,T(b.bl.x,b.br.x)))-l,_=P=T(P,T(b.tr.y,T(b.bl.y,b.br.y)))-l,E=(D=L(D,L(b.tr.x,L(b.bl.x,b.br.x)))+l)-O,S=(R=L(R,L(b.tr.y,L(b.bl.y,b.br.y)))+l)-P}var M="M"+y+","+_+" L"+(y+E)+","+_+" "+(y+E)+","+(_+S)+" "+y+","+(_+S)+"z";t.setAttribute("d",M);var B=w?"rotate("+[w,C,x].join(",")+")":"";this.selectorGroup.setAttribute("transform",B),y-=Ee/2,_-=Ee/2,this.gripCoords={nw:[y,_],ne:[y+E,_],sw:[y,_+S],se:[y+E,_+S]},Object.entries(this.gripCoords).forEach((function(e){var t=Object(r.a)(e,2),a=t[0],i=t[1];n[a].setAttribute("x",i[0]),n[a].setAttribute("y",i[1]),n[a].setAttribute("transform","translate("+i[0]+","+i[1]+")")})),y+=Ee/2,_+=Ee/2,this.midGrips={n:[y+E/2,_],w:[y,_+S/2],e:[y+E,_+S/2],s:[y+E/2,_+S]},Object.entries(this.midGrips).forEach((function(e){var t=Object(r.a)(e,2),n=t[0],i=t[1];a.midGrips[n].setAttribute("cx",i[0]),a.midGrips[n].setAttribute("cy",i[1])})),this.actionGripCoords={sb:[y+E/2-xe/2,_+S+Ee/2],nt:[y+E/2-1.3*xe,_-1.5*Ee],nwt:[y-Ee/2,_-1.6*Ee],nre:[y-Ee/2,_-1.6*Ee]},Object.entries(this.actionGripCoords).forEach((function(e){var t=Object(r.a)(e,2),n=t[0],i=t[1];a.actionGrips[n].setAttribute("x",i[0]),a.actionGrips[n].setAttribute("y",i[1]),"nwt"===n&&a.actionGrips[n].setAttribute("display","none"),"nre"===n&&a.actionGrips[n].setAttribute("display","none"),a.actionGrips[n].setAttribute("transform","translate("+i[0]+","+i[1]+")")}))}}],[{key:"updateGripCursors",value:function(e){var t=Object.keys(ne.selectorGrips),a=Math.round(e/45);for(a<0&&(a+=8);a>0;)t.push(t.shift()),a--;for(var r in ne.selectorGrips)"nw"===r?ne.selectorGrips[r].setAttribute("style","cursor: move"):"ne"===r?ne.selectorGrips[r].setAttribute("style","cursor: crosshair"):"sw"===r?ne.selectorGrips[r].setAttribute("style","cursor: pointer"):ne.selectorGrips[r].setAttribute("style","cursor:"+t[0]+"-resize")}}]),e}(),Oe=function(){function e(){Object(v.a)(this,e),this.alignCenter=null,this.selectorParentGroup=null,this.rubberBandBox=null,this.selectors=[],this.selectorMap={},this.selectorGrips={nw:null,ne:null,se:null,sw:null},this.selectorGripsGroup=null,this.rotateGripConnector=null,this.rotateGrip=null,this.midGrips={n:null,e:null,s:null,w:null},this.actionGrips={sb:null,nt:null,nwt:null,nre:null},this.initGroup()}return Object(A.a)(e,[{key:"initGroup",value:function(){var e=this;this.alignCenter&&this.alignCenter.parentNode&&this.alignCenter.remove(),this.alignCenter=ae.createSVGElement({element:"g",attr:{id:"alignC"}});var t=ae.createSVGElement({element:"rect",attr:{id:"alignH",width:.5*we,height:0,x:0,y:0,fill:"#4286f4","pointer-events":"none",style:"display: none"}}),a=ae.createSVGElement({element:"rect",attr:{id:"alignV",width:0,height:.5*we,x:0,y:0,fill:"#4286f4","pointer-events":"none",style:"display: none"}});if(this.alignCenter.append(t),this.alignCenter.append(a),ae.svgRoot().appendChild(this.alignCenter),this.selectorParentGroup&&this.selectorParentGroup.parentNode&&this.selectorParentGroup.remove(),this.selectorParentGroup=ae.createSVGElement({element:"g",attr:{id:"selectorParentGroup"}}),this.selectorGripsGroup=ae.createSVGElement({element:"g",attr:{display:"none"}}),this.selectorParentGroup.append(this.selectorGripsGroup),ae.svgRoot().append(this.selectorParentGroup),this.selectorMap={},this.selectors=[],this.rubberBandBox=null,Object.keys(this.midGrips).forEach((function(t){var a=ae.createSVGElement({element:"circle",attr:{id:"selectorGrip_resize_"+t,fill:"#22C",r:_e,style:"cursor:"+t+"-resize","stroke-width":2,"pointer-events":"all"}});ge.data(a,"dir",t),ge.data(a,"type","resize"),e.midGrips[t]=e.selectorGripsGroup.appendChild(a)})),Object.keys(this.selectorGrips).forEach((function(t){var a=ae.createSVGElement({element:"g",attr:{id:"selectorGrip_resize_"+t,width:Ee,height:Ee}}),r=ae.createSVGElement({element:"rect",attr:{id:"selectorGrip_resize_"+t,fill:"sw"===t?"#CC2222":"#22C",width:Ee,height:Ee,"stroke-width":2,"pointer-events":"all"}}),n="",i="resize";"se"===t?(n="M12 4 L12 12 L4 12",i="resize"):"sw"===t?(n="M3.955,4.782V12.7h7.209V4.782H3.955z M4.664,5.845h1.3  v6.145h-1.3V5.845z M9.036,5.845h1.3v6.145h-1.3V5.845z M6.791,5.845h1.3v6.145h-1.3V5.845z M8.918,3.364  c0-0.236-0.118-0.591-0.355-0.827C8.327,2.418,7.973,2.3,7.618,2.3S7.027,2.418,6.673,2.655l0,0  C6.555,2.891,6.436,3.127,6.318,3.364H8.918z M14,3.364v1.3h-1.536V14H2.655V4.664H1v-1.3h4.018c0-0.591,0.236-1.182,0.709-1.655  l0,0C6.318,1.236,6.909,1,7.618,1s1.3,0.236,1.773,0.709c0.591,0.473,0.827,1.064,0.827,1.655H14z",i="delete"):"ne"===t&&(n="M3.4 4.05 L3.4 6.05 Q4.25 4.4 5.85 3.7 7.5 3 9.2 3.45 10.85 4 11.85 5.45 12.8 7 12.55 8.7 12.3 10.5 10.9 11.6 9.55 12.8 7.8 12.8 M3.4 6.05 L3.4 6.45 5.85 5.65",i="rotate"),"nw"===t&&(n="M11.75 6.05 L13.75 8.05 11.8 10 M2.8 8 L8 8 8 2.8 M9.95 4.3 L7.95 2.3 6 4.25 M4.3 6.05 L2.3 8.05 4.25 10 M9.95 11.75 L7.95 13.75 6 11.8 M8 12.8 L8 8 12.8 8",i="move");var o=ae.createSVGElement({element:"path",attr:{id:"selectorGrip_resize_"+t,fill:"sw"===t?"#FFF":"none",stroke:"sw"===t?"none":"#FFF","stroke-width":2,d:n,"pointer-events":"none",transform:"scale("+Se+")"}});a.appendChild(r),a.appendChild(o),ge.data(r,"dir",t),ge.data(r,"type",i),e.selectorGrips[t]=e.selectorGripsGroup.appendChild(a)})),Object.keys(this.actionGrips).forEach((function(t){var a=ae.createSVGElement({element:"g",attr:{id:"selectorGrip_resize_"+t}}),r="";if("sb"===t){var n=ae.createSVGElement({element:"rect",attr:{id:"selectorGrip_resize_"+t,fill:"#22C",width:xe,height:Ee,style:"cursor:pointer","stroke-width":2,"pointer-events":"all"}}),i=ae.createSVGElement({element:"text",attr:{id:"selectorGrip_resize_"+t,fill:"#fff","font-size":.8*Ee,y:.8*Ee,x:.8*_e,style:"cursor:pointer"}});r="edit",i.innerHTML="Edit",a.appendChild(n),a.appendChild(i),ge.data(i,"dir",t),ge.data(i,"type",r)}else if("nt"===t){var o=ae.createSVGElement({element:"rect",attr:{id:"dimensionRect",width:2.6*xe,height:Ee,fill:"#ffffff",opacity:.7,stroke:"rgba(100,100,100,0.5)","stroke-width":.5*we,style:"display:none"}}),s=ae.createSVGElement({element:"text",attr:{id:"dimensionLabel",fill:"#333333",y:.7*Ee,"font-size":.55*Ee,style:"display:none"}});a.appendChild(o),a.appendChild(s)}else if("nwt"===t){var l=ae.createSVGElement({element:"path",attr:{id:"warning_p1",fill:"#FF0000",style:"cursor:pointer",stroke:"#FFFFFF","stroke-width":2,d:"M9.217,1c4.61,0,8.348,3.737,8.348,8.348s-3.737,8.348-8.348,8.348 S0.87,13.958,0.87,9.348S4.607,1,9.217,1z","pointer-events":"all",transform:"scale("+Ce+")"}}),c=ae.createSVGElement({element:"path",attr:{id:"warning_p2",fill:"#FFFFFF",d:"M8.182,11.956h2.077v2.078H8.182V11.956z M8.108,4.661L8.108,6.97l0.465,4.737h1.294l0.46-4.754V4.661 H8.108z","pointer-events":"all",transform:"scale("+Ce+")"}});a.appendChild(l),a.appendChild(c),ge.data(l,"dir",t),ge.data(l,"type","warning")}else if("nre"===t){var u=ae.createSVGElement({element:"path",attr:{id:"warning_p3",fill:"#FF0000",style:"cursor:pointer",stroke:"#FFFFFF","stroke-width":2,d:"M9.217,1c4.61,0,8.348,3.737,8.348,8.348s-3.737,8.348-8.348,8.348 S0.87,13.958,0.87,9.348S4.607,1,9.217,1z","pointer-events":"all",transform:"scale("+Ce+")"}}),d=ae.createSVGElement({element:"path",attr:{id:"warning_p4",fill:"#FFFFFF",d:"M8.182,11.956h2.077v2.078H8.182V11.956z M8.108,4.661L8.108,6.97l0.465,4.737h1.294l0.46-4.754V4.661 H8.108z","pointer-events":"all",transform:"scale("+Ce+")"}});a.appendChild(u),a.appendChild(d)}e.actionGrips[t]=e.selectorGripsGroup.appendChild(a),"nwt"===t&&e.actionGrips[t].setAttribute("display","none"),"nre"===t&&e.actionGrips[t].setAttribute("display","none")})),!ge("#canvasBackground").length){var n=Object(r.a)(re.dimensions,2),i=n[0],o=n[1],s=ae.createSVGElement({element:"svg",attr:{id:"canvasBackground",width:i,height:o,x:0,y:0,overflow:Object(c.g)()?"none":"visible",style:"pointer-events:none"}}),l=ae.createSVGElement({element:"rect",attr:{width:"100%",height:"100%",x:0,y:0,"stroke-width":1,stroke:"#000",fill:"#FFF",style:"pointer-events:none"}});s.append(l),ae.svgRoot().insertBefore(s,ae.svgContent())}}},{key:"setScale",value:function(e){_e=fe/(ke=e<=1?1:e),Ee=ve/ke,xe=Ae/ke,Se=be/ke,we=1/ke}},{key:"showImageRatingIcon",value:function(e,t){if(e&&"image"===e.prefs.type&&(!e.prefs.imgType||"svg"!==e.prefs.imgType)){var a=this.selectorParentGroup.getElementsByTagName("path")[0];t&&a.getAttribute("id")&&"selectedBox0"===a.getAttribute("id")?(a.setAttribute("stroke","#ed3434"),ne.actionGrips.nwt.setAttribute("display","inline")):(a.setAttribute("stroke","#22C"),ne.actionGrips.nwt.setAttribute("display","none"))}}},{key:"showIconForElementOutOfBoundary",value:function(e){var t=this.selectorParentGroup.getElementsByTagName("path")[0];e&&t.getAttribute("id")&&"selectedBox0"===t.getAttribute("id")?(t.setAttribute("stroke","#ed3434"),ne.actionGrips.nre.setAttribute("display","inline")):(t.setAttribute("stroke","#22C"),ne.actionGrips.nre.setAttribute("display","none"))}},{key:"requestSelector",value:function(e,t){if(Object(u.x)(e))return null;var a=this.selectors.length;if("object"===typeof this.selectorMap[e.id])return this.selectorMap[e.id].locked=!0,this.selectorMap[e.id];for(var r=0;r<a;++r)if(this.selectors[r]&&!this.selectors[r].locked)return this.selectors[r].locked=!0,this.selectors[r].reset(e,t),this.selectorMap[e.id]=this.selectors[r],this.selectors[r];return this.selectors[a]=new Ne(a,e,t),this.selectorParentGroup.append(this.selectors[a].selectorGroup),this.selectorMap[e.id]=this.selectors[a],this.selectors[a]}},{key:"releaseSelector",value:function(e){if(!Object(u.x)(e)){var t=this.selectors.length,a=this.selectorMap[e.id];a&&!a.locked&&console.log("WARNING! selector was released but was already unlocked");for(var r=0;r<t;++r)if(this.selectors[r]&&this.selectors[r]===a){delete this.selectorMap[e.id],a.locked=!1,a.selectedElement=null,a.showGrips(!1);try{a.selectorGroup.setAttribute("display","none")}catch(i){}break}var n=this.selectorParentGroup.getElementsByTagName("path");n&&n.length&&"selectedBox0"===n[0].getAttribute("id")&&n[0].setAttribute("stroke","#22C")}}},{key:"getRubberBandBox",value:function(){return this.rubberBandBox||(this.rubberBandBox=this.selectorParentGroup.appendChild(ae.createSVGElement({element:"rect",attr:{id:"selectorRubberBand",fill:"#22C","fill-opacity":.15,stroke:"#22C","stroke-width":.5,display:"none",style:"pointer-events:none"}}))),this.rubberBandBox}}]),e}(),Pe=a(46),De=a(35),Re=a(318),Te=Object(b.a)(l.a),Le=C.MoveElementCommand,Me=C.InsertElementCommand,Be=C.RemoveElementCommand,je=C.ChangeElementCommand,Fe=C.BatchCommand,Ue=C.UndoManager,Ve=C.HistoryEventTypes;window.console||(window.console={},window.console.log=function(e){},window.console.dir=function(e){}),window.opera&&(window.console.log=function(e){window.opera.postError(e)},window.console.dir=function(e){});var Ge=function e(t,a){Object(v.a)(this,e);var n={show_outside_canvas:!0,selectNew:!0,dimensions:[600,600,0,0],initFill:{color:"#000",opacity:1},initStroke:{color:"#00FF00",width:2,opacity:1},initOpacity:1};a&&Te.extend(n,a);var s=n.dimensions,l=this,p=t.ownerDocument,m=this.boundDimensionList=[],h=this.dimensionInInch=[],b=this.currBoundIdx=0,A=this.isFormEdit=!1,_=this.isTemplateEdit=!1,E=!1,S=0,x="#006400",w=!1,k=1,I=!1,N=[],O={},P=0,D="",R=0;this.isAreaChange=!1,l.isEditClick=!1,l.isUpdateNameNumber=!1,l.team={},l.cloneElements=!1;var T=p.importNode(Object(u.C)('<svg id="svgroot" xmlns="'+y.a.SVG+'" xlinkns="'+y.a.XLINK+'" width="'+s[0]+'" height="'+s[1]+'" x="'+s[2]+'" y="'+s[3]+'" overflow="hidden"></svg>').documentElement,!0);t.append(T),l.NS=y.a;var K=p.createElementNS(y.a.SVG,"svg");(l.clearSvgContentElement=function(){Te(K).empty(),Te(K).attr({id:"svgcontent",width:s[0],height:s[1],x:s[2],y:s[3],overflow:n.show_outside_canvas?"visible":"hidden",xmlns:y.a.SVG,"xmlns:se":y.a.SE,"xmlns:xlink":y.a.XLINK}).appendTo(T);var e=p.createComment(" Made with luv in USA by ImprintNext - https://imprintnext.com");K.append(e);var t=p.createElementNS(y.a.SVG,"defs");K.append(t)})();var $="xe_";l.setIdPrefix=function(e){$=e},l.current_drawing_=new M(K,$);var ee=l.getCurrentDrawing=function(){return l.current_drawing_},le=1,ce=null,pe={shape:{fill:("none"===n.initFill.color?"":"#")+n.initFill.color,fill_paint:null,fill_opacity:n.initFill.opacity,stroke:"#"+n.initStroke.color,stroke_paint:null,stroke_opacity:n.initStroke.opacity,stroke_width:n.initStroke.width,stroke_dasharray:"none",stroke_linejoin:"miter",stroke_linecap:"butt",opacity:n.initOpacity}};pe.text=Te.extend(!0,{},pe.shape),Te.extend(pe.text,{fill:"#000000",stroke_width:n.text&&n.text.stroke_width,font_size:n.text&&n.text.font_size,font_family:n.text&&n.text.font_family});var me=pe.shape,ge=[],fe=this.getJsonFromSvgElement=function(e){if(3===e.nodeType)return e.nodeValue;for(var t,a={element:e.tagName,attr:{},children:[]},r=0;t=e.attributes[r];r++)a.attr[t.name]=t.value;for(var n,i=0;n=e.childNodes[i];i++)a.children[i]=fe(n);return a},ve=this.addSVGElementFromJson=function(e){if("string"===typeof e)return p.createTextNode(e);var t=Object(u.n)(e.attr.id),a=ee().getCurrentLayer();if(t&&e.element!==t.tagName&&(t.remove(),t=null),!t){var r=e.namespace||y.a.SVG;t=p.createElementNS(r,e.element),a&&(ce||a).append(t)}return e.curStyles&&Object(u.a)(t,{fill:me.fill,stroke:me.stroke,"stroke-width":me.stroke_width,"stroke-dasharray":me.stroke_dasharray,"stroke-linejoin":me.stroke_linejoin,"stroke-linecap":me.stroke_linecap,"stroke-opacity":me.stroke_opacity,"fill-opacity":me.fill_opacity,opacity:me.opacity/2,style:"pointer-events:inherit"},100),Object(u.a)(t,e.attr,100),Object(u.b)(t),e.children&&e.children.forEach((function(e){t.append(ve(e))})),t};l.getTransformList=se.b,l.matrixMultiply=oe.d,l.hasMatrixTransform=oe.b,l.transformListToTransform=oe.h;var be=function(){return n.baseUnit};Object(d.e)({getBaseUnit:be,getElement:u.n,getHeight:function(){return K.getAttribute("height")/le},getWidth:function(){return K.getAttribute("width")/le},getRoundDigits:function(){return rt.round_digits}}),l.convertToNum=d.b;var Ae=function(){return K},ye=this.getSelectedElems=function(){return ge},_e=X.e,Ee=function(){return T};Object(u.w)({pathActions:_e,getSVGContent:Ae,addSVGElementFromJson:ve,getSelectedElements:ye,getDOMDocument:function(){return p},getDOMContainer:function(){return t},getSVGRoot:Ee,getBaseUnit:be,getSnappingStep:function(){return n.snappingStep}}),l.findDefs=u.k,l.getUrlFromAttr=u.u,l.getHref=u.o,l.setHref=u.A,l.getBBox=u.l,l.getRotationAngle=u.r,l.getElem=u.n,l.getRefElem=u.q,l.assignAttributes=u.a,this.cleanupElement=u.b;var Se=function(){return n.gridSnapping};ue={getDrawing:function(){return ee()},getSVGRoot:Ee,getGridSnapping:Se},this.remapElement=de,function(e){te=e}({getSVGRoot:Ee,getStartTransform:function(){return ut},setStartTransform:function(e){ut=e}}),this.recalculateDimensions=he;var Ce=Object(y.b)();l.sanitizeSvg=ie;var xe=l.undoMgr=new Ue({handleHistoryEvent:function(e,t){var a=Ve;if(e===a.BEFORE_UNAPPLY||e===a.BEFORE_APPLY)l.clearSelection();else if(e===a.AFTER_APPLY||e===a.AFTER_UNAPPLY){var r=t.elements();l.pathActions.clear(),ze("changed",r);var n=t.type(),i=e===a.AFTER_APPLY;if(n===Le.type())(i?t.newParent:t.oldParent)===K&&j();else if(n===Me.type()||n===Be.type())t.parent===K&&j(),n===Me.type()?i&&tt(t.elem):i||tt(t.elem),"use"===t.elem.tagName&&Mt(t.elem);else if(n===je.type()){"title"===t.elem.tagName&&t.elem.parentNode.parentNode===K&&j();var o=i?t.newValues:t.oldValues;o.stdDeviation&&l.setBlurOffsets(t.elem.parentNode,o.stdDeviation)}}}}),we=function(e){l.undoMgr.addCommandToHistory(e)},ke=this.getZoom=function(){return le},Ie=this.round=function(e){return parseInt(e*le)/le};!function(e,t){re=e,ae=t,ne=new Oe}(n,{createSVGElement:function(e){return l.addSVGElementFromJson(e)},svgRoot:function(){return T},svgContent:function(){return K},getCurrentZoom:ke});var Ge=this.selectorManager=ne,qe=l.getNextId=function(){return ee().getNextId()},He=l.getId=function(){return ee().getId()},ze=function(e,t){if(Ct[e])return Ct[e](window,t)},We=this.clearSelection=function(e){ge.forEach((function(e){Object(u.x)(e)||Ge.releaseSelector(e)})),ge=[],e||ze("selected",ge)},Qe=this.addToSelection=function(e,t,a){if(e.length){for(var r=0;r<ge.length&&!Object(u.x)(ge[r]);)++r;for(var n=e.length;n--;){var i=e[n];if(i){var o=Object(u.l)(i);if(o){if("a"===i.tagName&&1===i.childNodes.length&&(i=i.firstChild),ge.includes(i)||"background"===i.getAttribute("id"))return;var s,l,c;if(!a&&(null===(s=i)||void 0===s||null===(l=s.prefs)||void 0===l||null===(c=l.lock)||void 0===c?void 0:c.edit)&&!window.isEasyEdit&&!_)return;ge[r]=i,r++;var d=Ge.requestSelector(i,o);ge.length>1&&d.showGrips(!1)}}}for(ge.length&&Ge.requestSelector(ge[0]).setIsTemplateEdit(_),ze("selected",ge),t||1===ge.length?Ge.requestSelector(ge[0]).showGrips(!0):Ge.requestSelector(ge[0])&&Ge.requestSelector(ge[0]).showGrips(!1),ge.sort((function(e,t){return e&&t&&e.compareDocumentPosition?3-(6&t.compareDocumentPosition(e)):Object(u.x)(e)?1:0}));Object(u.x)(ge[0]);)ge.shift(0)}},Je=function(){return me.opacity},Ye=this.getMouseTarget=function(e){if(Object(u.x)(e))return null;var a=e.target;if(a.correspondingUseElement&&(a=a.correspondingUseElement),[y.a.MATH,y.a.HTML].includes(a.namespaceURI)&&"svgcanvas"!==a.id)for(;"foreignObject"!==a.nodeName;)if(!(a=a.parentNode))return T;var r=ee().getCurrentLayer();if([T,t,K,r].includes(a))return T;if(Te(a).closest("#selectorParentGroup").length)return"selectorGrip_resize_se"===a.id&&(mt=!0),Ge.selectorParentGroup;for(;a.parentNode&&a.parentNode!==(ce||r);)a=a.parentNode;return a};l.pathActions=_e,X.c({selectorManager:Ge,canvas:l,call:ze,resetD:function(e){e.setAttribute("d",_e.convertPath(e))},round:Ie,clearSelection:We,addToSelection:Qe,addCommandToHistory:we,remapElement:de,addSVGElementFromJson:ve,getGridSnapping:Se,getOpacity:Je,getSelectedElements:ye,getContainer:function(){return t},setStarted:function(e){ct=e},getRubberBox:function(){return ft},setRubberBox:function(e){return ft=e},addPtsToSelection:function(e){var t=e.closedSubpath,a=e.grips;_e.canDeleteNodes=!0,_e.closed_subpath=t,ze("pointsAdded",{closedSubpath:t,grips:a}),ze("selected",a)},endChanges:function(e){var t=e.cmd,a=e.elem;we(t),ze("changed",[a])},getCurrentZoom:ke,getId:He,getNextId:qe,getMouseTarget:Ye,getCurrentMode:function(){return dt},setCurrentMode:function(e){return dt=e},getDrawnPath:function(){return Pt},setDrawnPath:function(e){return Pt=e},getSVGRoot:Ee});var Ze={},Xe="a,circle,ellipse,foreignObject,g,image,line,path,polygon,polyline,rect,svg,text,tspan,use",Ke=["clip-path","fill","filter","marker-end","marker-mid","marker-start","mask","stroke"],$e=Te.data,et=document.createElementNS(y.a.SVG,"animate");Te(et).attr({attributeName:"opacity",begin:"indefinite",dur:1,fill:"freeze"}).appendTo(T);var tt=function e(t){var a=Te(t).attr(Ke);Object.values(a).forEach((function(e){if(e&&e.startsWith("url(")){var t=Object(u.u)(e).substr(1);Object(u.n)(t)||(Object(u.k)().append(st[t]),delete st[t])}}));var r=t.getElementsByTagName("*");if(r.length)for(var n=0,i=r.length;n<i;n++)e(r[n])},at={},rt={round_digits:5},nt={},it=pe.text,ot=this.extensions={},st={},lt=n.imgPath+"logo.png",ct=!1,ut=null,dt="select",pt="none",mt=!1,ht=me,gt=null,ft=null,vt=[],bt=null,At="";this.runExtension=function(e,t,a){return this.runExtensions(t,a,!1,(function(t){return t===e}))};var yt=this.runExtensions=function(e,t,a,r){var n=!!a&&[];return Te.each(ot,(function(i,o){r&&!r(i)||o&&e in o&&("function"===typeof t&&(t=t(i)),a?n.push(o[e](t)):n=o[e](t))})),n};this.addExtension=function(){var e=Object(o.a)(i.a.mark((function e(t,a,r){var n,o,s,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.$,o=r.importLocale,"function"===typeof a){e.next=3;break}throw new TypeError("Function argument expected for `svgcanvas.addExtension`");case 3:if(!(t in ot)){e.next=5;break}throw new Error('Cannot add extension "'+t+'", an extension by that name already exists.');case 5:return s=Te.extend(l.getPrivateMethods(),{$:n,importLocale:o,svgroot:T,svgcontent:K,nonce:ee().getNonce(),selectorManager:Ge}),e.next=8,a(s);case 8:return(c=e.sent)&&(c.name=t),ot[t]=c,e.abrupt("return",ze("extension_added",c));case 12:case"end":return e.stop()}}),e)})));return function(t,a,r){return e.apply(this,arguments)}}();var _t=this.getIntersectionList=function(e){if(Object(u.x)(ft))return null;var t,a=ce||ee().getCurrentLayer();if(e)(t=K.createSVGRect()).x=e.x,t.y=e.y,t.width=e.width,t.height=e.height;else{t=ft.getBBox();var r=K.createSVGRect();["x","y","width","height","top","right","bottom","left"].forEach((function(e){r[e]=t[e]/le})),t=r}var n=null;if(Object(u.x)(n)||"function"!==typeof n.item){n=[],vt.length||(vt=Et(a));for(var i=vt.length;i--;)t.width&&Object(oe.e)(t,vt[i].bbox)&&n.push(vt[i].elem)}return n};this.getStrokedBBox=u.t,this.getVisibleElements=u.v;var Et=this.getVisibleElementsAndBBoxes=function(e){e||(e=Te(K).children());var t=[];return Te(e).children().each((function(e,a){a.getBBox&&t.push({elem:a,bbox:Object(u.t)([a])})})),t.reverse()},St=this.groupSvgElem=function(e){var t=document.createElementNS(y.a.SVG,"g");e.replaceWith(t),Te(t).append(e).data("gsvg",e)[0].id=qe()},Ct={};l.call=ze,l.bind=function(e,t){var a=Ct[e];return Ct[e]=t,a},this.prepareSvg=function(e){this.sanitizeSvg(e.documentElement),Object(f.a)(e.getElementsByTagNameNS(y.a.SVG,"path")).forEach((function(e){e.setAttribute("d",_e.convertPath(e)),_e.fixEnd(e)}))};var xt=function(e){if(!Object(c.b)())return e;var t=e.cloneNode(!0);return e.before(t),e.remove(),Ge.releaseSelector(e),ge[0]=t,Ge.requestSelector(t).showGrips(!0),t};this.setRotationAngle=function(e,t){e=parseFloat(e);var a=ge[0],r=a.getAttribute("transform"),n=Object(u.l)(a),i=n.x+n.width/2,o=n.y+n.height/2,s=Object(se.b)(a);s.numberOfItems>0&&(4===s.getItem(0).type&&s.removeItem(0));if(0!==e){var l=Object(oe.i)(i,o,Object(oe.h)(s).matrix),c=T.createSVGTransform();c.setRotate(e,l.x,l.y),s.numberOfItems?s.insertItemBefore(c,0):s.appendItem(c)}else 0===s.numberOfItems&&a.removeAttribute("transform");if(!t){var d=a.getAttribute("transform");a.setAttribute("transform",r),Ht("transform",d,ge),ze("changed",ge)}Ge.requestSelector(ge[0]).resize(),Ne.updateGripCursors(e)};var wt=this.recalculateAllSelectedDimensions=function(){for(var e=new Fe("none"===pt?"position":"size"),t=ge.length;t--;){var a=ge[t],r=he(a);r&&e.addSubCommand(r)}e.isEmpty()||(we(e),ze("changed",ge)),setTimeout((function(){l.extractAlphaPx()}),50)},kt=function(e){console.log([e.a,e.b,e.c,e.d,e.e,e.f])},It=null,Nt=this.selectOnly=function(e,t,a){We(!0),Qe(e,t,a)},Ot=this.getParentLayerIndex=function(e){for(var t,a,r,n,i=!0,o=e;i;)-1!==(n=(r=o.getAttribute("id"))?r.indexOf("Layer_"):-1)&&n>-1?(t=o.getAttribute("id"),i=!1):(i=!0,(a=(o=o.parentNode).getAttribute("id"))&&"svgcontent"!==a||(i=!1));return t?t.replace("Layer_",""):-1};this.removeFromSelection=function(e){if(!Object(u.x)(ge[0])&&e.length){for(var t=[],a=ge.length,r=0;r<a;++r){var n=ge[r];n&&(e.includes(n)?Ge.releaseSelector(n):t.push(n))}ge=t}},this.selectAllInCurrentLayer=function(e){var t=ee().getCurrentLayer();if(t){var a=Te(ce||t).children();dt="select",a.length>2&&(e?Nt(a,!0):Nt(a,!1,!0))}};var Pt=null;!function(){var e,a={minx:null,miny:null,maxx:null,maxy:null},r=null,i=null,o=null,s=null,d={},p=0,m={x:0,y:0},h={x:0,y:0},f={x:0,y:0},v={x:0,y:0},b={x:0,y:0},A={x:0,y:0},y=function(e){var t={x:0,y:0},a=m,r=h,n=f,i=v,o=e*e,s=o*e,l=[[-1,3,-3,1],[3,-6,3,0],[-3,0,3,0],[1,4,1,0]];return t.x=1/6*((a.x*l[0][0]+r.x*l[0][1]+n.x*l[0][2]+i.x*l[0][3])*s+(a.x*l[1][0]+r.x*l[1][1]+n.x*l[1][2]+i.x*l[1][3])*o+(a.x*l[2][0]+r.x*l[2][1]+n.x*l[2][2]+i.x*l[2][3])*e+(a.x*l[3][0]+r.x*l[3][1]+n.x*l[3][2]+i.x*l[3][3])),t.y=1/6*((a.y*l[0][0]+r.y*l[0][1]+n.y*l[0][2]+i.y*l[0][3])*s+(a.y*l[1][0]+r.y*l[1][1]+n.y*l[1][2]+i.y*l[1][3])*o+(a.y*l[2][0]+r.y*l[2][1]+n.y*l[2][2]+i.y*l[2][3])*e+(a.y*l[3][0]+r.y*l[3][1]+n.y*l[3][2]+i.y*l[3][3])),{x:t.x,y:t.y}},S=function(t){if(ct&&1!==t.button&&!l.spaceKey){var c,g,E,S,C,x,w,k,I,N,O,P,D,R,L,M=ge[0],B=Object(oe.i)(t.pageX,t.pageY,It),j=B.x*le,F=B.y*le,U=Object(u.n)(He()),V=j/le,G=V,q=F/le,H=q,z=l.getBoundDimensions(),W=z.boundHeight,Q=z.boundWidth,J=z.boundX,Y=z.boundY;switch(n.gridSnapping&&(G=Object(u.B)(G),H=Object(u.B)(H)),t.preventDefault(),dt){case"select":if(null!==ge[0]&&(C=G-r,x=H-i,n.gridSnapping&&(C=Object(u.B)(C),x=Object(u.B)(x)),J?(N=J,O=Y,P=J+Q,D=Y+W):(N=0,O=0,P=l.contentW,D=l.contentH),n.centerSnapping&&ge&&ge.length&&(R=l.getStrokedBBox([ge[0]]),C=Xt(C,(N+P)/2-(R.x+R.width/2),"x"),x=Xt(x,(O+D)/2-(R.y+R.height/2),"y")),0!==C||0!==x)){for(w=ge.length,c=0;c<w&&(M=ge[c],!Object(u.x)(M));++c)if(!(M&&M.prefs&&M.prefs.lock&&M.prefs.lock.move)||_){var Z=T.createSVGTransform();L=Object(se.b)(M),Z.setTranslate(C,x),L.numberOfItems?L.replaceItem(Z,0):L.appendItem(Z),Ge.requestSelector(M).resize()}ze("transition",ge)}break;case"multiselect":V*=le,q*=le,Object(u.a)(ft,{x:Math.min(o,V),y:Math.min(s,q),width:Math.abs(V-o),height:Math.abs(q-s)},100);var $=ge.slice(),ee=[],te=_t();for(w=te.length,c=0;c<w;++c){var ae=te[c];ge.includes(ae)||"masks"===ae.getAttribute("id")||ee.push(ae);var re=$.indexOf(ae);-1!==re&&$.splice(re,1)}$.length>0&&l.removeFromSelection($),ee.length>0&&l.addToSelection(ee);break;case"resize":L=Object(se.b)(M);var ne=Object(oe.b)(L);I=ne?d:Object(u.l)(M),mt=!1;var ie=I.x,ce=I.y,ue=I,de=ue.width,pe=ue.height;if(C=G-r,x=H-i,n.gridSnapping&&(C=Object(u.B)(C),x=Object(u.B)(x),pe=Object(u.B)(pe),de=Object(u.B)(de)),k=Object(u.r)(M)){var me=Math.sqrt(C*C+x*x),he=Math.atan2(x,C)-k*Math.PI/180;C=me*Math.cos(he),x=me*Math.sin(he)}pt.includes("n")||pt.includes("s")||(x=0),pt.includes("e")||pt.includes("w")||(C=0),M.prefs&&M.prefs.restrictScaling&&(x=0,C=0);var fe=0,ve=0,be=pe?(pe+x)/pe:1,Ae=de?(de+C)/de:1;pt.includes("n")&&(be=pe?(pe-x)/pe:1,ve=pe),pt.includes("w")&&(Ae=de?(de-C)/de:1,fe=de),2===pt.length&&(mt=!0);var ye=T.createSVGTransform(),Ee=T.createSVGTransform(),Se=T.createSVGTransform();if(n.gridSnapping&&(ie=Object(u.B)(ie),fe=Object(u.B)(fe),ce=Object(u.B)(ce),ve=Object(u.B)(ve)),mt)switch(pt){case"se":ye.setTranslate(-(ie+fe+de/2),-(ce+ve+pe/2));break;case"sw":ye.setTranslate(-(ie+fe-de/2),-(ce+ve+pe/2));break;case"ne":ye.setTranslate(-(ie+fe+de/2),-(ce+ve-pe/2));break;case"nw":ye.setTranslate(-(ie+fe-de/2),-(ce+ve-pe/2))}else ye.setTranslate(-(ie+fe),-(ce+ve));if((t.shiftKey||mt)&&(Ae=be),Ee.setScale(Ae,be),mt)switch(pt){case"se":Se.setTranslate(ie+fe+de/2,ce+ve+pe/2);break;case"sw":Se.setTranslate(ie+fe-de/2,ce+ve+pe/2);break;case"ne":Se.setTranslate(ie+fe+de/2,ce+ve-pe/2);break;case"nw":Se.setTranslate(ie+fe-de/2,ce+ve-pe/2)}else Se.setTranslate(ie+fe,ce+ve);if(ne){var Ce=k?1:0;L.replaceItem(ye,2+Ce),L.replaceItem(Ee,1+Ce),L.replaceItem(Se,Number(Ce))}else{var xe=L.numberOfItems;L.replaceItem(Se,xe-3),L.replaceItem(Ee,xe-2),L.replaceItem(ye,xe-1)}Ge.requestSelector(M).resize(),ze("transition",ge);break;case"zoom":V*=le,q*=le,Object(u.a)(ft,{x:Math.min(o*le,V),y:Math.min(s*le,q),width:Math.abs(V-o*le),height:Math.abs(q-s*le)},100);break;case"text":Object(u.a)(U,{x:G,y:H},1e3);break;case"line":n.gridSnapping&&(G=Object(u.B)(G),H=Object(u.B)(H));var we=G,ke=H;t.shiftKey&&(we=(g=Object(oe.f)(r,i,we,ke)).x,ke=g.y),U.setAttribute("x2",we),U.setAttribute("y2",ke);break;case"foreignObject":case"square":case"rect":case"image":var Ie,Ne,Oe="square"===dt||t.shiftKey,Pe=Math.abs(G-r),De=Math.abs(H-i);Oe?(Pe=De=Math.max(Pe,De),Ie=r<G?r:r-Pe,Ne=i<H?i:i-De):(Ie=Math.min(r,G),Ne=Math.min(i,H)),n.gridSnapping&&(Pe=Object(u.B)(Pe),De=Object(u.B)(De),Ie=Object(u.B)(Ie),Ne=Object(u.B)(Ne)),Object(u.a)(U,{width:Pe,height:De,x:Ie,y:Ne},1e3);break;case"circle":var Re=Te(U).attr(["cx","cy"]);E=Re.cx,S=Re.cy;var Le=Math.sqrt((G-E)*(G-E)+(H-S)*(H-S));n.gridSnapping&&(Le=Object(u.B)(Le)),U.setAttribute("r",Le);break;case"ellipse":var Me=Te(U).attr(["cx","cy"]);E=Me.cx,S=Me.cy,n.gridSnapping&&(G=Object(u.B)(G),E=Object(u.B)(E),H=Object(u.B)(H),S=Object(u.B)(S)),U.setAttribute("rx",Math.abs(G-E));var Be=Math.abs(t.shiftKey?G-E:H-S);U.setAttribute("ry",Be);break;case"fhellipse":case"fhrect":a.minx=Math.min(V,a.minx),a.maxx=Math.max(V,a.maxx),a.miny=Math.min(q,a.miny),a.maxy=Math.max(q,a.maxy);case"fhpath":if(v.x=V,v.y=q,m.x&&m.y)for(c=0;c<9;c++)if(e=c/10,b=y((c+1)/10),A=b,b=y(e),(p+=Math.sqrt((A.x-b.x)*(A.x-b.x)+(A.y-b.y)*(A.y-b.y)))>.8){p-=.8;var je=K.createSVGPoint();je.x=b.x,je.y=b.y,U.points.appendItem(je)}m={x:h.x,y:h.y},h={x:f.x,y:f.y},f={x:v.x,y:v.y};break;case"path":case"pathedit":if(G*=le,H*=le,n.gridSnapping&&(G=Object(u.B)(G),H=Object(u.B)(H),r=Object(u.B)(r),i=Object(u.B)(i)),t.shiftKey){var Fe,Ue,Ve=X.d;Ve?(Fe=Ve.dragging?Ve.dragging[0]:r,Ue=Ve.dragging?Ve.dragging[1]:i):(Fe=r,Ue=i);var qe=g=Object(oe.f)(Fe,Ue,G,H);G=qe.x,H=qe.y}ft&&"none"!==ft.getAttribute("display")&&(V*=le,q*=le,Object(u.a)(ft,{x:Math.min(o*le,V),y:Math.min(s*le,q),width:Math.abs(V-o*le),height:Math.abs(q-s*le)},100)),_e.mouseMove(G,H);break;case"textedit":G*=le,H*=le,Dt.mouseMove(j,F);break;case"rotate":E=(I=Object(u.l)(M)).x+I.width/2,S=I.y+I.height/2;var We=Object(oe.a)(M),Qe=Object(oe.i)(E,S,We);E=Qe.x,S=Qe.y;var Je=I.x,Ye=I.y,Ze=(Math.atan2(S-Ye,E-Je)*(180/Math.PI)-90)%360;if(k=(Math.atan2(S-H,E-G)*(180/Math.PI)-90)%360,k=(k+=Ze)/5*5,n.gridSnapping&&(k=Object(u.B)(k)),t.shiftKey){k=45*Math.round(k/45)}l.setRotationAngle(k<-180?360+k:k,!0),ze("transition",ge)}yt("mouseMove",{event:t,mouse_x:j,mouse_y:F,selected:M})}},C=function(e){if(2!==e.button){var t=gt;if(gt=null,ct){De.EventEmitter.dispatch(De.Events.CALCULATE_EXACT_PRICE);var r,i,d=Object(oe.i)(e.pageX,e.pageY,It),g=d.x*le,b=d.y*le,A=g/le,y=b/le,_=Object(u.n)(He()),E=!1,S=A,C=y;switch(ct=!1,Te("#alignH").hide(),Te("#alignV").hide(),dt){case"resize":case"multiselect":Object(u.x)(ft)||(ft.setAttribute("display","none"),vt=[],ge.length>1&&(l.groupSelectedElements("g",null,!0),ze("changed",ge))),dt="select";case"select":if(!Object(u.x)(ge[0])){if(Object(u.x)(ge[1])){var x=ge[0];switch(x.tagName){case"g":case"use":case"image":case"foreignObject":break;default:ht.fill=x.getAttribute("fill"),ht.fill_opacity=x.getAttribute("fill-opacity"),ht.stroke=x.getAttribute("stroke"),ht.stroke_opacity=x.getAttribute("stroke-opacity"),ht.stroke_width=x.getAttribute("stroke-width"),ht.stroke_dasharray=x.getAttribute("stroke-dasharray"),ht.stroke_linejoin=x.getAttribute("stroke-linejoin"),ht.stroke_linecap=x.getAttribute("stroke-linecap")}"text"===x.tagName&&(it.font_size=x.getAttribute("font-size"),it.font_family=x.getAttribute("font-family")),Ge.requestSelector(x).showGrips(!0)}if(wt(),!Object(u.x)(ge[0])&&ge[0].prefs&&"image"===ge[0].prefs.type&&l.calculateImageRating(ge[0]),w&&l.detectCropElement(ge[0]),S!==o||C!==s)for(var k=ge.length,I=0;I<k&&!Object(u.x)(ge[I]);++I)ge[I].firstChild||Ge.requestSelector(ge[I]).resize();else i=e.target,"path"===ge[0].nodeName&&Object(u.x)(ge[1])?_e.select(ge[0]):e.shiftKey&&t!==i&&l.removeFromSelection([i]);if(Object(c.k)()){var N=ge[0];N&&(N.removeAttribute("style"),Object(u.E)(N,(function(e){e.removeAttribute("style")})))}}return void setTimeout((function(){De.EventEmitter.dispatch(De.Events.CALCULATE_EXACT_PRICE)}),50);case"zoom":Object(u.x)(ft)||ft.setAttribute("display","none");var O=e.shiftKey?.5:2;return void ze("zoomed",{x:Math.min(o,S),y:Math.min(s,C),width:Math.abs(S-o),height:Math.abs(C-s),factor:O});case"fhpath":if(_&&_.getBBox()&&(0==_.getBBox().height||0==_.getBBox().width))return;p=0,m={x:0,y:0},h={x:0,y:0},f={x:0,y:0},v={x:0,y:0};var P=_.getAttribute("points"),D=P.indexOf(",");if((E=D>=0?P.includes(",",D+1):P.includes(" ",P.indexOf(" ")+1))&&(_=_e.smoothPolylineIntoPath(_)),!_.getAttribute("isBounds")){var R=ve({element:"g",attr:{id:qe()}});R.appendChild(_),_.setAttribute("stroke-width",Qt),R.prefs={id:R.getAttribute("id"),type:"drawing",subType:"pencilDraw",ext:"pencil",colors:[R.childNodes[0].getAttribute("stroke")],strokeWidth:Qt||R.childNodes[0].getAttribute("stroke-width"),lastColor:"#000000",lock:{delete:!1,move:!1,rotate:!1,resize:!1,colorEdit:!1}},dt="select"}break;case"line":if(_&&_.getBBox()&&(0==_.getBBox().height||0==_.getBBox().width))return;r=Te(_).attr(["x1","x2","y1","y2"]),E=r.x1!==r.x2||r.y1!==r.y2;var T=ve({element:"g",attr:{id:qe(),type:"line"}});T.appendChild(_),T.prefs={id:T.getAttribute("id"),type:"drawing",subType:"pencilDraw",ext:"line",colors:[T.childNodes[0].getAttribute("stroke")],strokeWidth:parseFloat(T.childNodes[0].getAttribute("stroke-width")),lock:{delete:!1,move:!1,rotate:!1,resize:!1,colorEdit:!1}},dt="select";break;case"foreignObject":case"square":case"rect":var L=ve({element:"g",attr:{id:qe(),type:"rect"}});L.prefs={id:L.getAttribute("id"),type:"drawing",subType:"rect",ext:"rect",colors:["#FF0000","#000000"],strokeWidth:5,lock:{delete:!1,move:!1,rotate:!1,resize:!1,colorEdit:!1}},l.setMode("select"),L.appendChild(_);case"image":r=Te(_).attr(["width","height"]),E=r.width||r.height||"image"===dt;break;case"circle":if(_&&_.getBBox()&&(0==_.getBBox().height||0==_.getBBox().width))return;E="0"!==_.getAttribute("r");break;case"ellipse":if(_&&_.getBBox()&&(0==_.getBBox().height||0==_.getBBox().width))return;r=Te(_).attr(["rx","ry"]),E=r.rx||r.ry;var M=ve({element:"g",attr:{id:qe(),type:"rect"}});M.prefs={id:M.getAttribute("id"),type:"drawing",subType:"rect",ext:"ellipse",colors:["#FF0000","#000000"],strokeWidth:5,lock:{delete:!1,move:!1,rotate:!1,resize:!1,colorEdit:!1}},l.setMode("select"),M.appendChild(_);break;case"fhellipse":a.maxx-a.minx>0&&a.maxy-a.miny>0&&(_=ve({element:"ellipse",curStyles:!0,attr:{cx:(a.minx+a.maxx)/2,cy:(a.miny+a.maxy)/2,rx:(a.maxx-a.minx)/2,ry:(a.maxy-a.miny)/2,id:He()}}),ze("changed",[_]),E=!0);break;case"fhrect":a.maxx-a.minx>0&&a.maxy-a.miny>0&&(_=ve({element:"rect",curStyles:!0,attr:{x:a.minx,y:a.miny,width:a.maxx-a.minx,height:a.maxy-a.miny,id:He()}}),ze("changed",[_]),E=!0);break;case"text":E=!0,Nt([_]),Dt.start(_);break;case"path":_=null,ct=!0;var B=_e.mouseUp(e,_,g,b);_=B.element,E=B.keep;break;case"pathedit":E=!0,_=null,_e.mouseUp(e);break;case"textedit":E=!1,_=null,Dt.mouseUp(e,g,b);break;case"rotate":E=!0,_=null,dt="select";var j=l.undoMgr.finishUndoableChange();j.isEmpty()||we(j),wt(),ze("changed",ge);break;default:setTimeout((function(){De.EventEmitter.dispatch(De.Events.CALCULATE_EXACT_PRICE)}),50)}var F=yt("mouseUp",{event:e,mouse_x:g,mouse_y:b},!0);if(Te.each(F,(function(e,t){t&&(E=t.keep||E,_=t.element,ct=t.started||ct)})),E||Object(u.x)(_)){if(!Object(u.x)(_)){l.addedNew=!0;var U,V=.2;if(et.beginElement&&parseFloat(_.getAttribute("opacity"))!==me.opacity){U=Te(et).clone().attr({to:me.opacity,dur:V}).appendTo(_);try{U[0].beginElement()}catch(G){}}else V=0;setTimeout((function(){if(U&&U.remove(),_.setAttribute("opacity",me.opacity),_.setAttribute("style","pointer-events:inherit"),Object(u.b)(_),"path"===dt){var e=ve({element:"g",attr:{id:qe(),type:"rect"}});e.prefs={id:e.getAttribute("id"),type:"drawing",subType:"rect",ext:"pen",colors:["#FF0000","#000000"],strokeWidth:5,lock:{delete:!1,move:!1,rotate:!1,resize:!1,colorEdit:!1}},e.appendChild(_),_e.toEditMode(_),ge=[e],l.setMode("select"),Nt([e],!0)}else if(n.selectNew){var t=_.getAttribute("id"),a=document.getElementById(t).parentNode;Nt([a],!0)}we(new Me(_)),ze("changed",[_])}),1e3*V)}}else{for(ee().releaseId(He()),_.remove(),_=null,i=e.target;i&&i.parentNode&&i.parentNode.parentNode&&"g"===i.parentNode.parentNode.tagName;)i=i.parentNode;"path"===dt&&Pt||!i||!i.parentNode||"selectorParentGroup"===i.parentNode.id||"svgcanvas"===i.id||"svgroot"===i.id||(l.setMode("select"),i.prefs&&Nt([i],!0))}ut=null}}};Te(t).mousedown((function(e){if(!l.spaceKey&&1!==e.button&&!E){var t=2===e.button;if(l.isAreaChange=!1,e.target&&e.target.hasAttribute("id")&&-1!==e.target.getAttribute("id").indexOf("bound_")){var p=e.target.getAttribute("id").replace("bound_","");l.getLayerName().replace("Layer_","")!==p&&($t(e.target.getAttribute("id")),l.isAreaChange=!0)}else{var m=Ot(e.target);if(-1!==m){var h=l.getLayerName();if(h&&h.indexOf("Layer_","")>-1)h.replace("Layer_","")!==m&&$t("bound_"+m)}}It=Te("#svgcontent g")[0].getScreenCTM().inverse();var v=Object(oe.i)(e.pageX,e.pageY,It),b=v.x*le,A=v.y*le;e.preventDefault(),t&&(dt="select",bt=v);var y=b/le,_=A/le,S=Ye(e);"a"===S.tagName&&1===S.childNodes.length&&(S=S.firstChild);var C=y;o=r=y;var x=_;if(s=i=_,n.gridSnapping&&(y=Object(u.B)(y),_=Object(u.B)(_),r=Object(u.B)(r),i=Object(u.B)(i)),S===Ge.selectorParentGroup&&!Object(u.x)(ge[0])){var w=e.target,k=$e(w,"type");if("rotate"===k)dt="rotate";else if("resize"===k)dt="resize",pt=$e(w,"dir");else{if("delete"===k){if(ge[0].prefs&&"multiselect"===ge[0].prefs.type&&l.team){var I,N=ge[0].children,O=Object(g.a)(N);try{for(O.s();!(I=O.n()).done;){var D=I.value;D.prefs&&D.prefs.subType&&("name"===D.prefs.subType||"number"===D.prefs.subType||"image"===D.prefs.subType)&&(l.team[D.prefs.name]-=1)}}catch(Z){O.e(Z)}finally{O.f()}}else ge[0].prefs&&ge[0].prefs.subType&&("name"===ge[0].prefs.subType||"number"===ge[0].prefs.subType||"image"===ge[0].prefs.subType)&&(l.team[ge[0].prefs.name]-=1);return dt="select",void l.deleteSelectedElements()}"edit"===k&&(dt="select",l.isEditClick=!0)}S=ge[0]}if(!S||"svg"!==S.nodeName||"fhpath"!==dt&&"path"!==dt&&"line"!==dt&&"rect"!==dt&&"ellipse"!==dt){if(S&&"#document"===S.nodeName&&(S=document.getElementById("svgroot")),S&&S.getAttribute("transform"),ut=S.getAttribute("transform"),0==P&&"pen"===At)return P++,void(At="");var R=Object(se.b)(S);if(S&&"penDrawing"===S.getAttribute("type")){var L=ve({element:"g",type:"rect",attr:{id:qe()}});L.appendChild(S),L.prefs={id:L.getAttribute("id"),type:"drawing",subType:"rect",ext:"pen",colors:[L.childNodes[0].getAttribute("fill"),L.childNodes[0].getAttribute("stroke")],strokeWidth:Qt||L.childNodes[0].getAttribute("stroke-width"),lock:{delete:!1,move:!1,rotate:!1,resize:!1,colorEdit:!1}},S=(ge=[L])[0],dt="select"}switch(dt){case"select":if(ct=!0,pt="none",t&&(ct=!1),S!==T){if(ge.includes(S)||(e.shiftKey||We(!0),Qe([S]),gt=S,_e.clear()),!t){var M,B=Object(g.a)(ge);try{for(B.s();!(M=B.n()).done;){var j=M.value;if(!Object(u.x)(j)){var F=Object(se.b)(j);F.numberOfItems?F.insertItemBefore(T.createSVGTransform(),0):F.appendItem(T.createSVGTransform())}}}catch(Z){B.e(Z)}finally{B.f()}}}else t||(null!=ge[0]&&"multiselect"===ge[0].getAttribute("type")&&l.ungroupSelectedElement(),We(),dt="multiselect",Object(u.x)(ft)&&(ft=Ge.getRubberBandBox()),o*=le,s*=le,Object(u.a)(ft,{x:o,y:s,width:0,height:0,display:"inline"},100));break;case"zoom":ct=!0,Object(u.x)(ft)&&(ft=Ge.getRubberBandBox()),Object(u.a)(ft,{x:C*le,y:C*le,width:0,height:0,display:"inline"},100);break;case"resize":ct=!0,r=y,i=_,d=Object(u.l)(Te("#selectedBox0")[0]);var U={};Te.each(d,(function(e,t){U[e]=t/le})),d=U;var V=Object(u.r)(S)?1:0;if(Object(oe.b)(R))R.insertItemBefore(T.createSVGTransform(),V),R.insertItemBefore(T.createSVGTransform(),V),R.insertItemBefore(T.createSVGTransform(),V);else if(R.appendItem(T.createSVGTransform()),R.appendItem(T.createSVGTransform()),R.appendItem(T.createSVGTransform()),Object(c.k)()){var G,q=Object(c.g)();q&&(G=function(e){var t=e.getAttribute("stroke");e.removeAttribute("stroke"),null!==t&&setTimeout((function(){e.setAttribute("stroke",t)}),0)}),S.style.vectorEffect="non-scaling-stroke",q&&G(S);for(var H=S.getElementsByTagName("*"),z=H.length,W=0;W<z;W++)H[W].style&&(H[W].style.vectorEffect="non-scaling-stroke",q&&G(H[W]))}break;case"fhellipse":case"fhrect":case"fhpath":f.x=C,f.y=x,ct=!0,ve({element:"polyline",curStyles:!0,attr:{points:C+","+x+" ",id:qe(),fill:"none",opacity:me.opacity/2,"stroke-linecap":"round",style:"pointer-events:none",isBounds:!0}}),a.minx=C,a.maxx=C,a.miny=x,a.maxy=x;break;case"image":ct=!0;var Q=ve({element:"image",attr:{x:y,y:_,width:0,height:0,id:qe(),opacity:me.opacity/2,style:"pointer-events:inherit"}});Object(u.A)(Q,lt),Object(u.y)(Q);break;case"square":case"rect":ct=!0,r=y,i=_,ve({element:"rect",curStyles:!0,attr:{x:y,y:_,width:0,height:0,id:qe(),opacity:me.opacity/2}});break;case"line":ct=!0;var J=0===Number(me.stroke_width)?1:me.stroke_width;ve({element:"line",curStyles:!0,attr:{x1:y,y1:_,x2:y,y2:_,id:qe(),stroke:me.stroke,"stroke-width":J,"stroke-dasharray":me.stroke_dasharray,"stroke-linejoin":me.stroke_linejoin,"stroke-linecap":me.stroke_linecap,"stroke-opacity":me.stroke_opacity,fill:"none",opacity:me.opacity/2,style:"pointer-events:none"}});break;case"circle":ct=!0,ve({element:"circle",curStyles:!0,attr:{cx:y,cy:_,r:0,id:qe(),opacity:me.opacity/2}});break;case"ellipse":ct=!0,ve({element:"ellipse",curStyles:!0,attr:{cx:y,cy:_,rx:0,ry:0,id:qe(),opacity:me.opacity/2}});break;case"text":ct=!0,ve({element:"text",curStyles:!0,attr:{x:y,y:_,id:qe(),fill:it.fill,"stroke-width":it.stroke_width,"font-size":it.font_size,"font-family":it.font_family,"text-anchor":"middle","xml:space":"preserve",opacity:me.opacity}});break;case"path":case"pathedit":r*=le,i*=le,_e.mouseDown(e,S,r,i),ct=!0;break;case"textedit":r*=le,i*=le,Dt.mouseDown(e,S,r,i),ct=!0;break;case"rotate":ct=!0,l.undoMgr.beginUndoableChange("transform",ge)}var Y=yt("mouseDown",{event:e,start_x:r,start_y:i,selectedElements:ge},!0);Te.each(Y,(function(e,t){t&&t.started&&(ct=!0)}))}}})).mousemove(S).click((function(e){return e.preventDefault(),!1})).dblclick((function(e){var t=e.target.parentNode;if(t!==ce){var a=Ye(e),r=a.tagName;if("text"===r&&"textedit"!==dt){var n=Object(oe.i)(e.pageX,e.pageY,It);Dt.select(a,n.x,n.y)}"g"!==r&&"a"!==r||!Object(u.r)(a)||(zt(a),a=ge[0],We(!0)),ce&&Y(),("g"===t.tagName||"a"===t.tagName)&&t!==ee().getCurrentLayer()&&Ge.selectorParentGroup}})).mouseup(C),Te(window).on("mouseup",(function(e){C(e),S(e),ct&&De.EventEmitter.dispatch(De.Events.CALCULATE_EXACT_PRICE)})),"Shopify"!==window.storeType&&"Others"!==window.storeType&&"Hosted"!==window.storeType&&Te(window.parent).on("mouseup",(function(e){C(e),S(e)})),Te(window).on("mouseover",(function(e){"warning_p1"===e.target.id&&0===document.getElementsByClassName("dt-base theme-default checkout-theme").length&&De.EventEmitter.dispatch(De.Events.OPEN_WARNING_POPUP,!0),"warning_p3"===e.target.id&&0===document.getElementsByClassName("dt-base theme-default checkout-theme").length&&De.EventEmitter.dispatch(De.Events.SHOW_CROP_ELEMENT_POPUP,!0)}))}();var Dt=l.textActions=function(){var e,t,a,r,n,i,o,s,d,p,m=[];function h(e){var o=""===t.value;if(Te(t).focus(),!arguments.length)if(o)e=0;else{if(t.selectionEnd!==t.selectionStart)return;e=t.selectionEnd}var s=m[e];o||t.setSelectionRange(e,e),(a=Object(u.n)("text_cursor"))||(a=document.createElementNS(y.a.SVG,"line"),Object(u.a)(a,{id:"text_cursor",stroke:"#333","stroke-width":1}),a=Object(u.n)("selectorParentGroup").appendChild(a)),n||(n=setInterval((function(){var e="none"===a.getAttribute("display");a.setAttribute("display",e?"inline":"none")}),600));var l=_(s.x,i.y),c=_(s.x,i.y+i.height);Object(u.a)(a,{x1:l.x,y1:l.y,x2:c.x,y2:c.y,visibility:"visible",display:"inline"}),r&&r.setAttribute("d","")}function g(e,n,o){if(e!==n){o||t.setSelectionRange(e,n),(r=Object(u.n)("text_selectblock"))||(r=document.createElementNS(y.a.SVG,"path"),Object(u.a)(r,{id:"text_selectblock",fill:"green",opacity:.5,style:"pointer-events:none"}),Object(u.n)("selectorParentGroup").append(r));var s=m[e],l=m[n];a.setAttribute("visibility","hidden");var c=_(s.x,i.y),d=_(s.x+(l.x-s.x),i.y),p=_(s.x,i.y+i.height),g=_(s.x+(l.x-s.x),i.y+i.height),f="M"+c.x+","+c.y+" L"+d.x+","+d.y+" "+g.x+","+g.y+" "+p.x+","+p.y+"z";Object(u.a)(r,{d:f,display:"inline"})}else h(n)}function f(t,a){var r=T.createSVGPoint();if(r.x=t,r.y=a,1===m.length)return 0;var n=e.getCharNumAtPosition(r);n<0?(n=m.length-2,t<=m[0].x&&(n=0)):n>=m.length-2&&(n=m.length-2);var i=m[n];return t>i.x+i.width/2&&n++,n}function v(e,t){h(f(e,t))}function b(e,a,r){var n=t.selectionStart,i=f(e,a);g(Math.min(n,i),Math.max(n,i),!r)}function A(e,t){var a={x:e,y:t};if(a.x/=le,a.y/=le,o){var r=Object(oe.i)(a.x,a.y,o.inverse());a.x=r.x,a.y=r.y}return a}function _(e,t){var a={x:e,y:t};if(o){var r=Object(oe.i)(a.x,a.y,o);a.x=r.x,a.y=r.y}return a.x*=le,a.y*=le,a}function E(t){g(0,e.textContent.length),Te(this).unbind(t)}function S(t){if(p&&e){var a=Object(oe.i)(t.pageX,t.pageY,It),r=A(a.x*le,a.y*le),n=f(r.x,r.y),i=e.textContent,o=i.substr(0,n).replace(/[a-z\d]+$/i,"").length,s=i.substr(n).match(/^[a-z\d]+/i);g(o,(s?s[0].length:0)+n),Te(t.target).click(E),setTimeout((function(){Te(t.target).unbind("click",E)}),300)}}return{select:function(t,a,r){e=t,Dt.toEditMode(a,r)},start:function(t){e=t,Dt.toEditMode()},mouseDown:function(e,a,r,n){var i=A(r,n);t.focus(),v(i.x,i.y),s=r,d=n},mouseMove:function(e,t){var a=A(e,t);b(a.x,a.y)},mouseUp:function(t,a,r){var n=A(a,r);b(n.x,n.y,!0),t.target!==e&&a<s+2&&a>s-2&&r<d+2&&r>d-2&&Dt.toSelectMode(!0)},setCursor:h,toEditMode:function(t,a){if(p=!1,dt="textedit",Ge.requestSelector(e).showGrips(!1),Ge.requestSelector(e),Dt.init(),Te(e).css("cursor","text"),arguments.length){var r=A(t,a);v(r.x,r.y)}else h();setTimeout((function(){p=!0}),300)},toSelectMode:function(i){dt="select",clearInterval(n),n=null,r&&Te(r).attr("display","none"),a&&Te(a).attr("visibility","hidden"),Te(e).css("cursor","move"),i&&(We(),Te(e).css("cursor","move"),ze("selected",[e]),Qe([e],!0)),e&&!e.textContent.length&&l.deleteSelectedElements(),Te(t).blur(),e=!1},setInputElem:function(e){t=e},clear:function(){"textedit"===dt&&Dt.toSelectMode()},init:function(a){if(e){var r,n;e.parentNode||(e=ge[0],Ge.requestSelector(e).showGrips(!1));var s=e.textContent.length,d=e.getAttribute("transform");for(i=Object(u.l)(e),o=d?Object(oe.a)(e):null,(m=[]).length=s,t.focus(),Te(e).unbind("dblclick",S).dblclick(S),s||(n={x:i.x+i.width/2,width:0}),r=0;r<s;r++){var p=e.getStartPositionOfChar(r);if(n=e.getEndPositionOfChar(r),!Object(c.h)()){var h=l.contentW*le;p.x-=h,n.x-=h,p.x/=le,n.x/=le}m[r]={x:p.x,y:i.y,width:n.x-p.x,height:i.height}}m.push({x:n.x,width:0}),g(t.selectionStart,t.selectionEnd,!0)}}}}(),Rt=this.removeUnusedDefElems=function(){var e=K.getElementsByTagNameNS(y.a.SVG,"defs");if(!e||!e.length)return 0;var t,a,r=[],n=0,i=["fill","stroke","filter","marker-start","marker-mid","marker-end"],o=i.length,s=K.getElementsByTagNameNS(y.a.SVG,"*"),l=s.length;for(t=0;t<l;t++){var c=s[t];for(a=0;a<o;a++){var d=Object(u.u)(c.getAttribute(i[a]));d&&r.push(d.substr(1))}var p=Object(u.o)(c);p&&p.startsWith("#")&&r.push(p.substr(1))}var m=Te(e).find("linearGradient, radialGradient, filter, marker, svg, symbol");for(t=m.length;t--;){var h=m[t],g=h.id;r.includes(g)||(st[g]=h,h.remove(),n++)}return n};function Tt(){We();var e=[],t=[],a={feGaussianBlur:Ze.exportNoBlur,foreignObject:Ze.exportNoforeignObject,"[stroke-dasharray]":Ze.exportNoDashArray},r=Te(K);return"font"in Te("<canvas>")[0].getContext("2d")||(a.text=Ze.exportNoText),Te.each(a,(function(a,n){r.find(a).length&&(t.push(a),e.push(n))})),{issues:e,issueCodes:t}}this.svgCanvasToString=function(e){for(;Rt()>0;);_e.clear(!0),Te.each(K.childNodes,(function(e,t){e&&8===t.nodeType&&t.data.includes("Created with")&&K.firstChild.before(t)})),document.getElementById("bounds").setAttribute("display","none"),ce&&(Y(),Nt([ce]));var t=[];Te(K).find("g[data*='(gsvg)']").each((function(){for(var e=this.attributes,a=e.length,r=0;r<a;r++)"id"!==e[r].nodeName&&"style"!==e[r].nodeName||a--;if(a<=0){var n=this.firstChild;t.push(n),Te(this).replaceWith(n)}})),this.propertyToAttribute(Te(K),"xe-props");var a=K.cloneNode(!0);if(e){var r=document.getElementsByClassName("layer"),n=K.getElementById("Layer_0");r.length>1&&(n=K.getElementById("bounds"));var i,o,s,l,c=n.getBBox(),u=1;i=c.x+c.width/2,o=c.y+c.height/2,s=(1-(u=c.height>c.width?450/c.height:450/c.width))*i,l=(1-u)*o,a.getElementById("Layer_0").setAttribute("transform","translate("+s+","+l+")scale("+u+")")}var d=a.outerHTML;return t.length&&Te(t).each((function(){St(this)})),d},this.svgToString=function(e,t){var a=[],r=n.baseUnit,i=new RegExp("^-?[\\d\\.]+"+r+"$");if(e){Object(u.b)(e);var o=Object(f.a)(e.attributes),s=e.childNodes;o.sort((function(e,t){return e.name>t.name?-1:1}));for(var l=0;l<t;l++)a.push(" ");if(a.push("<"),a.push(e.nodeName),"svgcontent"===e.id){var c=Ut();"px"!==r&&(c.w=Object(d.c)(c.w,r)+r,c.h=Object(d.c)(c.h,r)+r),a.push(' width="'+c.w+'" height="'+c.h+'" xmlns="'+y.a.SVG+'"');var p={};Te(e).find("*").addBack().each((function(){var e=this.namespaceURI;e&&!p[e]&&Ce[e]&&"xmlns"!==Ce[e]&&"xml"!==Ce[e]&&(p[e]=!0,a.push(" xmlns:"+Ce[e]+'="'+e+'"')),Te.each(this.attributes,(function(e,t){var r=t.namespaceURI;r&&!p[r]&&"xmlns"!==Ce[r]&&"xml"!==Ce[r]&&(p[r]=!0,a.push(" xmlns:"+Ce[r]+'="'+r+'"'))}))}));for(var m=o.length,h=["width","height","xmlns","x","y","viewBox","id","overflow"];m--;){var g=o[m],v=Object(u.D)(g.value);g.nodeName.startsWith("xmlns:")||(""===v||h.includes(g.localName)||g.namespaceURI&&!Ce[g.namespaceURI]||(a.push(" "),a.push(g.nodeName),a.push('="'),a.push(v),a.push('"')))}}else{if("defs"===e.nodeName&&!e.firstChild)return"";for(var b=["-moz-math-font-style","_moz-math-font-style"],A=o.length-1;A>=0;A--){var _=o[A],E=Object(u.D)(_.value);if(!b.includes(_.localName)&&""!==E){if(E.startsWith("pointer-events"))continue;if("class"===_.localName&&E.startsWith("se_"))continue;if(a.push(" "),"d"===_.localName&&(E=_e.convertPath(e,!0)),isNaN(E)?i.test(E)&&(E=Object(d.g)(E)+r):E=Object(d.g)(E),rt.apply&&"image"===e.nodeName&&"href"===_.localName&&rt.images&&"embed"===rt.images){var S=at[E];S&&(E=S)}_.namespaceURI&&_.namespaceURI!==y.a.SVG&&!Ce[_.namespaceURI]||(a.push(_.nodeName),a.push('="'),a.push(E),a.push('"'))}}}if(e.hasChildNodes()){a.push(">"),t++;for(var C=!1,x=0;x<s.length;x++){var w=s.item(x);switch(w.nodeType){case 1:a.push("\n"),a.push(this.svgToString(s.item(x),t));break;case 3:var k=w.nodeValue.replace(/^\s+|\s+$/g,"");""!==k&&(C=!0,a.push(String(Object(u.D)(k))));break;case 4:a.push("\n"),a.push(new Array(t+1).join(" ")),a.push("<![CDATA["),a.push(w.nodeValue),a.push("]]>");break;case 8:a.push("\n"),a.push(new Array(t+1).join(" ")),a.push("\x3c!--"),a.push(w.data),a.push("--\x3e")}}if(t--,!C){a.push("\n");for(var I=0;I<t;I++)a.push(" ")}a.push("</"),a.push(e.nodeName),a.push(">")}else a.push("/>")}return a.join("")},this.embedImage=function(e){return new Promise((function(t,a){Te(new Image).load((function(r,n,i){if("error"!==n){var o=document.createElement("canvas");o.width=this.width,o.height=this.height,o.getContext("2d").drawImage(this,0,0);try{var s=";svgedit_url="+encodeURIComponent(e);s=o.toDataURL().replace(";base64",s+";base64"),at[e]=s}catch(l){at[e]=!1}lt=e,t(at[e])}else a(new Error("Error loading image: "+i.status+" "+i.statusText))})).attr("src",e)}))},this.setGoodImage=function(e){lt=e},this.open=function(){},this.save=function(e){We(),e&&Te.extend(rt,e),rt.apply=!0;var t=this.svgCanvasToString();ze("saved",t)},this.rasterExport=function(){var e=Object(o.a)(i.a.mark((function e(t,a,r){var n,s,l,c,d,p,m,h,g,f,v,b,A=this,y=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=y.length>3&&void 0!==y[3]?y[3]:{},y.length>4&&void 0!==y[4]&&y[4],y.length>5&&void 0!==y[5]&&y[5],s=y.length>6&&void 0!==y[6]&&y[6],y.length>7&&void 0!==y[7]&&y[7],l=y.length>8?y[8]:void 0,c=y.length>9?y[9]:void 0,m="image/"+(d="ICO"===t?"BMP":t||"PNG").toLowerCase(),h=Tt(),g=h.issues,f=h.issueCodes,e.next=12,this.convertToString("",s,l);case 12:return v=e.sent,Te("#export_canvas").length||Te("<canvas>",{id:"export_canvas"}).hide().appendTo(Te("#canvasWrapper")),(b=Te("#export_canvas")[0]).width=600,b.height=600,e.next=19,this.captureBlendPng(v);case 19:return p=e.sent,e.abrupt("return",new Promise((function(e,s){var l=d.toLowerCase();p||(p=a?b.toDataURL("image/"+l,a):b.toDataURL("image/"+l));var h,y=null,_=p,E=Object(u.e)(p,qe()),S=null;function C(){var i={datauri:p,bloburl:h,designImg:E,imgObject:y,svg:v,issues:g,issueCodes:f,type:t,mimeType:m,quality:a,exportWindowName:r,captureUri:S,designUrl:_};n.avoidEvent||(document.getElementById("bounds").removeAttribute("display"),ze("exported",i));e(i)}if(n.productUrl){var x=new Pe.fabric.Canvas(b);A.validURL(n.productColor)?x.backgroundColor=new Pe.fabric.Pattern({source:n.productColor}):x.backgroundColor=n.productColor,Yt=n,1==A.validURL(n.productColor)?Pe.fabric.Image.fromURL(n.productColor,(function(e){n.productColor&&x.add(e).centerObject(e),n.productColor&&e.set({left:0,top:0,width:600,height:600}),Pe.fabric.Image.fromURL(n.productUrl,(function(e){e.width>e.height?(e.scaleToWidth(600),x.add(e)):(e.scaleToHeight(600),x.add(e).centerObject(e)),Pe.fabric.Image.fromURL(p,function(){var e=Object(o.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(x.add(t).centerObject(t),!c){e.next=4;break}return e.next=4,new Promise((function(e){return Pe.fabric.Image.fromURL(c,(function(t){x.add(t).centerObject(t),e()}),{crossOrigin:"anonymous"})}));case 4:return p=x.toDataURL(),y=Object(u.e)(p,qe()),n.productColor&&(x.backgroundColor=null,S=x.toDataURL()),C(),e.abrupt("return");case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{crossOrigin:"anonymous"})}),{crossOrigin:"anonymous"})}),{crossOrigin:"anonymous"}):Pe.fabric.Image.fromURL(n.productUrl,(function(e){e.width>e.height?(e.scaleToWidth(600),x.add(e)):(e.scaleToHeight(600),x.add(e).centerObject(e)),Pe.fabric.Image.fromURL(p,function(){var e=Object(o.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(x.add(t).centerObject(t),!c){e.next=4;break}return e.next=4,new Promise((function(e){return Pe.fabric.Image.fromURL(c,(function(t){x.add(t).centerObject(t),e()}),{crossOrigin:"anonymous"})}));case 4:return p=x.toDataURL(),y=Object(u.e)(p,qe()),n.productColor&&(x.backgroundColor=null,S=x.toDataURL()),C(),e.abrupt("return");case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{crossOrigin:"anonymous"})}),{crossOrigin:"anonymous"})}else h=Object(u.f)(p),y=Object(u.e)(p,qe()),C()})));case 21:case"end":return e.stop()}}),e,this)})));return function(t,a,r){return e.apply(this,arguments)}}(),this.rasterExportMultpleBoundary=function(){var e=Object(o.a)(i.a.mark((function e(t,a,r){var n,s,l,c,u,d,p,m,h,g,f,v,b,A,y,_=this,E=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=E.length>3&&void 0!==E[3]?E[3]:{},s=E.length>4?E[4]:void 0,l=[],c=[],0,"image/"+("ICO"===t?"BMP":t||"PNG").toLowerCase(),u=Tt(),u.issues,u.issueCodes,e.next=10,this.convertToString();case 10:if(d=e.sent,Te("#export_canvas").length||Te("<canvas>",{id:"export_canvas"}).hide().appendTo(Te("#canvasWrapper")),(p=Te("#export_canvas")[0]).width=600,p.height=600,s){for(m=[],h=0,g="http://www.w3.org/2000/svg",(f=document.createElementNS(g,"svg")).setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),f.innerHTML=d,v=f.childNodes[0].getElementsByTagName("g"),b=0;b<v.length;b++)null!=v[b].getAttribute("id")&&v[b].getAttribute("id").indexOf("Layer")>-1&&m.push(v[b].getAttribute("id"));for(A=0;A<m.length;A++)for(b=0;b<v.length;b++)null!=v[b].getAttribute("id")&&v[b].getAttribute("id").indexOf("Layer")>-1&&(m[A]!=v[b].getAttribute("id")?v[b].setAttribute("display","none"):v[b].setAttribute("display","block")),b==v.length-1&&c.push(f.innerHTML);(y=function(){var e=Object(o.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(h<c.length)){e.next=9;break}return e.next=3,_.captureBlendPng(c[h]);case 3:t=e.sent,l.push(t),h++,y(),Object.keys(l).length==c.length&&(n.avoidEvent||document.getElementById("bounds").removeAttribute("display"),ze("exported",l));case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}())()}return e.abrupt("return",new Promise((function(e,t){var a=setInterval((function(){l.length==c.length&&(clearInterval(a),ze("exported",l),e(l))}))})));case 17:case"end":return e.stop()}}),e,this)})));return function(t,a,r){return e.apply(this,arguments)}}(),this.rasterConfiguratorImage=function(){var e=Object(o.a)(i.a.mark((function e(t,a,r){var n,s,l,c,u,d,p,m,h=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=h.length>3&&void 0!==h[3]?h[3]:{},h.length>4?h[4]:void 0,s=h.length>5?h[5]:void 0,h.length>6?h[6]:void 0,l="",c=0,"image/"+("ICO"===t?"BMP":t||"PNG").toLowerCase(),u=Tt(),u.issues,u.issueCodes,Te("#export_canvas").length||Te("<canvas>",{id:"export_canvas"}).hide().appendTo(Te("#canvasWrapper")),(d=document.createElement("canvas")).setAttribute("id","captureCanvas"),d.height=600,d.width=600,p=d.getContext("2d"),(m=function(){var e=Object(o.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c<s.length?((t=new Image).crossOrigin="anonymous",t.onload=function(){p.drawImage(t,0,0,600,600),c++,m()},t.src=s[c]):(l=d.toDataURL("image/png"),ze("exported",l));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}())(),e.abrupt("return",new Promise((function(e,t){setTimeout((function(){n.avoidEvent||(document.getElementById("bounds").removeAttribute("display"),ze("exported",l));e(l)}),2e3)})));case 18:case"end":return e.stop()}}),e)})));return function(t,a,r){return e.apply(this,arguments)}}(),this.captureBlendPng=function(){var e=Object(o.a)(i.a.mark((function e(t){var a,r,n,o,s,l;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=new DOMParser,r=a.parseFromString(t,"image/svg+xml"),n=Te(r).children("svg"),o=n[0].cloneNode(!0),s=o.getElementsByTagName("image"),l=o.getElementsByTagName("feImage"),!s||!s.length){e.next=6;break}return e.next=6,this.replaceUrlToBase64(o,s,"image");case 6:if(!l||!l.length){e.next=9;break}return e.next=9,this.replaceUrlToBase64(o,l,"feImage");case 9:return e.abrupt("return",new Promise((function(e){var t=document.createElement("canvas");t.height=600,t.width=600;var a=new Pe.fabric.Canvas(t);Pe.fabric.Image.fromURL("data:image/svg+xml; charset=utf8 ,"+encodeURIComponent(o.outerHTML),(function(t){t.height=600,t.width=600,a.forEachObject((function(e){e.selectable=!1})),a.add(t),a.centerObject(t),a.renderAll(),e(a.toDataURL({height:600,width:600}))}))})));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),this.replaceUrlToBase64=function(e,t,a){var r=this;return new Promise((function(n){for(var i=0,o=0,s=0;s<t.length;s++){var l=t[s].getAttribute("xlink:href");"#"!=l&&"data"!==l.split(":")[0]?(i++,r.convertToBase64(l,s,function(t,r){o++,e.getElementsByTagName(a)[r].setAttribute("xlink:href",t.result),i==o&&n()}.bind(r))):n()}}))},this.exportCaptureImg=function(){var e=Object(o.a)(i.a.mark((function e(t,a,r,n,s,l,c,d){var p,m,h,g=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(p="image/png",Te("#export_canvas").length||Te("<canvas>",{id:"export_canvas"}).hide().appendTo("body"),(h=Te("#export_canvas")[0]).width=600,h.height=600,!a){e.next=9;break}return e.next=8,this.captureBlendPng(a);case 8:m=e.sent;case 9:return e.abrupt("return",new Promise((function(e,a){m||(m=h.toDataURL(p));var n=null,s=Object(u.e)(m,qe()),l=new Pe.fabric.Canvas(h,{backgroundColor:null});Yt.productColor&&(Yt.productColor=""),1==g.validURL(r)&&(Yt.productColor=r,l.backgroundColor=new Pe.fabric.Pattern({source:r})),1==g.validURL(Yt.productColor)?Pe.fabric.Image.fromURL(Yt.productColor,(function(a){Yt.productColor&&l.add(a).centerObject(a),Yt.productColor&&a.set({left:0,top:0,width:600,height:600}),Pe.fabric.Image.fromURL(t,(function(t){if(r){var a=t.width/t.height,c=600,h=600,f=new Pe.fabric.Rect({width:c,height:h,fill:g.validURL(Yt.productColor)?new Pe.fabric.Pattern({source:r}):r});t.width>t.height?(h=c/a,l.add(f).renderAll()):t.height>t.width&&(c=h*a,l.add(f).centerObject(f).renderAll())}t.width>t.height?(t.scaleToWidth(600),l.add(t)):(t.scaleToHeight(600),l.add(t).centerObject(t)),Pe.fabric.Image.fromURL(m,function(){var t=Object(o.a)(i.a.mark((function t(a){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(l.add(a).centerObject(a),!d){t.next=4;break}return t.next=4,new Promise((function(e){return Pe.fabric.Image.fromURL(d,(function(t){l.add(t).centerObject(t),e()}),{crossOrigin:"anonymous"})}));case 4:return m=l.toDataURL(),n=Object(u.e)(m,qe()),e({datauri:m,imgObject:n,designImg:s,mimeType:p}),t.abrupt("return");case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}),{crossOrigin:"anonymous"})}),{crossOrigin:"anonymous"}):Pe.fabric.Image.fromURL(t,(function(t){if(r){var a=t.width/t.height,c=600,h=600,g=new Pe.fabric.Rect({width:c,height:h,fill:r});t.width>t.height?(h=c/a,g.set("height",h),l.add(g).renderAll()):t.height>t.width?(c=h*Number(a.toFixed(2)),g.set("width",c-5),l.add(g).centerObject(g).renderAll()):t.height==t.width&&l.add(g).centerObject(g).renderAll()}t.width>t.height?(t.scaleToWidth(600),l.add(t)):(t.scaleToHeight(600),l.add(t).centerObject(t)),Pe.fabric.Image.fromURL(m,function(){var t=Object(o.a)(i.a.mark((function t(a){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(l.add(a).centerObject(a),!d){t.next=4;break}return t.next=4,new Promise((function(e){return Pe.fabric.Image.fromURL(d,(function(t){l.add(t).centerObject(t),e()}),{crossOrigin:"anonymous"})}));case 4:return m=l.toDataURL(),n=Object(u.e)(m,qe()),e({datauri:m,imgObject:n,designImg:s,mimeType:p}),t.abrupt("return");case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}),{crossOrigin:"anonymous"})})));case 10:case"end":return e.stop()}}),e,this)})));return function(t,a,r,n,i,o,s,l){return e.apply(this,arguments)}}(),this.getSvgString=function(){return rt.apply=!1,this.svgCanvasToString()},this.randomizeIds=function(e){arguments.length>0&&!1===e?B(!1,ee()):B(!0,ee())};var Lt=this.uniquifyElems=function(e){var t={},a=["filter","linearGradient","pattern","radialGradient","symbol","textPath","use"];for(var r in Object(u.E)(e,(function(e){if(1===e.nodeType){e.id&&(e.id in t||(t[e.id]={elem:null,attrs:[],hrefs:[]}),t[e.id].elem=e),Te.each(Ke,(function(a,r){var n=e.getAttributeNode(r);if(n){var i=Object(u.u)(n.value),o=i?i.substr(1):null;o&&(o in t||(t[o]={elem:null,attrs:[],hrefs:[]}),t[o].attrs.push(n))}}));var r=Object(u.o)(e);if(r&&a.includes(e.nodeName)){var n=r.substr(1);n&&(n in t||(t[n]={elem:null,attrs:[],hrefs:[]}),t[n].hrefs.push(e))}}})),t)if(r&&-1!==(r&&r.indexOf("xe_"))){var n=t[r].elem;if(n){var i=qe();n.id=i;for(var o=t[r].attrs,s=o.length;s--;){var l=o[s];l.ownerElement.setAttribute(l.name,"url(#"+i+")")}for(var c=t[r].hrefs,d=c.length;d--;){var p=c[d];Object(u.A)(p,"#"+i)}}}},Mt=this.setUseData=function(e){var t=Te(e);"use"!==e.tagName&&(t=t.find("use")),t.each((function(){var e=Object(u.o)(this).substr(1),t=Object(u.n)(e);t&&(Te(this).data("ref",t),"symbol"!==t.tagName&&"svg"!==t.tagName||Te(this).data("symbol",t).data("ref",t))}))},Bt=this.convertGradients=function(e){var t=Te(e).find("linearGradient, radialGradient");!t.length&&Object(c.g)()&&(t=Te(e).find("*").filter((function(){return this.tagName.includes("Gradient")}))),t.each((function(){if("userSpaceOnUse"===Te(this).attr("gradientUnits")){var e=Te(K).find('[fill="url(#'+this.id+')"],[stroke="url(#'+this.id+')"]');if(!e.length)return;var t=Object(u.l)(e[0]);if(!t)return;if("linearGradient"===this.tagName){var a=Te(this).attr(["x1","y1","x2","y2"]),r=this.gradientTransform.baseVal;if(r&&r.numberOfItems>0){var n=Object(oe.h)(r).matrix,i=Object(oe.i)(a.x1,a.y1,n),o=Object(oe.i)(a.x2,a.y2,n);a.x1=i.x,a.y1=i.y,a.x2=o.x,a.y2=o.y,this.removeAttribute("gradientTransform")}Te(this).attr({x1:(a.x1-t.x)/t.width,y1:(a.y1-t.y)/t.height,x2:(a.x2-t.x)/t.width,y2:(a.y2-t.y)/t.height}),this.removeAttribute("gradientUnits")}}}))},jt=this.convertToGroup=function(e){e||(e=ge[0]);var t,a=Te(e),r=new Fe;if(a.data("gsvg")){var n=e.firstChild,i=Te(n).attr(["x","y"]);Te(e.firstChild.firstChild).unwrap(),Te(e).removeData("gsvg");var o=Object(se.b)(e),s=T.createSVGTransform();s.setTranslate(i.x,i.y),o.appendItem(s),he(e),ze("selected",[e])}else if(a.data("symbol")){e=a.data("symbol"),t=a.attr("transform");var l=a.attr(["x","y"]),d=e.getAttribute("viewBox");if(d){var m=d.split(" ");l.x-=Number(m[0]),l.y-=Number(m[1])}t+=" translate("+(l.x||0)+","+(l.y||0)+")";var h=a.prev();r.addSubCommand(new Be(a[0],a[0].nextSibling,a[0].parentNode)),a.remove();var g,f=Te(K).find("use:data(symbol)").length,v=p.createElementNS(y.a.SVG,"g"),b=e.childNodes;for(g=0;g<b.length;g++)v.append(b[g].cloneNode(!0));if(Object(c.b)()){var A=Te(Object(u.k)()).children("linearGradient,radialGradient,pattern").clone();Te(v).append(A)}t&&v.setAttribute("transform",t);var _=e.parentNode;if(Lt(v),Object(c.b)()&&Te(Object(u.k)()).append(Te(v).find("linearGradient,radialGradient,pattern")),v.id=qe(),h.after(v),_){if(!f){var E=e.nextSibling;e.remove(),r.addSubCommand(new Be(e,E,_))}r.addSubCommand(new Me(v))}Mt(v),Object(c.b)()?Bt(Object(u.k)()):Bt(v),Object(u.F)(v,(function(e){try{he(e)}catch(t){console.log(t)}})),Te(v).find(Xe).each((function(){this.id||(this.id=qe())})),Nt([v]);var S=zt(v,!0);S&&r.addSubCommand(S),we(r)}else console.log("Unexpected element to ungroup:",e)};this.setSvgString=function(e,t){try{var a=Object(u.C)(e);if(a.firstElementChild&&a.firstElementChild.namespaceURI!==y.a.SVG)return!1;this.prepareSvg(a);var r=new Fe("Change Source"),i=K.nextSibling,o=T.removeChild(K);r.addSubCommand(new Be(o,i,T)),K=p.adoptNode?p.adoptNode(a.documentElement):p.importNode(a.documentElement,!0),T.append(K);var s=Te(K);l.current_drawing_=new M(K,$);var m=ee().getNonce();m?ze("setnonce",m):ze("unsetnonce"),s.find("svg").each((function(){if(!Te(this).closest("defs").length){Lt(this);var e=this.parentNode;1===e.childNodes.length&&"g"===e.nodeName?(Te(e).data("gsvg",this),e.id=e.id||qe()):St(this)}})),Object(c.b)()&&s.find("linearGradient, radialGradient, pattern").appendTo(Object(u.k)()),Mt(s),Bt(s[0]);var h={id:"svgcontent",overflow:n.show_outside_canvas?"visible":"hidden"},g=!1;if(s.attr("viewBox")){var f=s.attr("viewBox").split(" ");h.width=f[2],h.height=f[3]}else Te.each(["width","height"],(function(e,t){var a=s.attr(t)||"100%";"%"===String(a).substr(-1)?g=!0:h[t]=Object(d.b)(t,a)}));if(j(),s.children().find(Xe).each((function(){this.id?Kt(this):this.id=qe()})),g){var v=Object(u.t)();h.width=v.width+v.x,h.height=v.height+v.y}h.width<=0&&(h.width=100),h.height<=0&&(h.height=100),s.attr(h),this.contentW=h.width,this.contentH=h.height,r.addSubCommand(new Me(K));var b=s.attr(["width","height"]);r.addSubCommand(new je(T,b)),le=1,Object(se.d)(),We(),X.a(),T.append(Ge.alignCenter),T.append(Ge.selectorParentGroup),document.getElementById("bounds").removeAttribute("display"),t||we(r),ze("changed",[K])}catch(A){return console.log(A),!1}return!0},this.importSvgString=function(e,t){var a,r,n;try{var i=Object(u.j)(e.length+e).substr(0,32),o=!1;nt[i]&&Te(nt[i].symbol).parents("#svgroot").length&&(o=!0);var s,l=new Fe("Import Image");if(o)s=nt[i].symbol,r=nt[i].xform;else{var h,f=Object(u.C)(e);this.prepareSvg(f),h=p.adoptNode?p.adoptNode(f.documentElement):p.importNode(f.documentElement,!0),Lt(h);var v=Object(d.b)("width",h.getAttribute("width")),A=Object(d.b)("height",h.getAttribute("height")),_=h.getAttribute("viewBox"),E=_?_.split(" "):[0,0,v,A];for(a=0;a<4;++a)E[a]=Number(E[a]);if(t)r="scale(1)";else{var S=m[b].boundWidth;r=A>v?"scale("+S/E[3]+")":"scale("+S/E[2]+")"}r="translate(0) "+r+" translate(0)",s=p.createElementNS(y.a.SVG,"symbol");var C=Object(u.k)();for(Object(c.b)()&&Te(h).find("linearGradient, radialGradient, pattern").appendTo(C);h.firstChild;){var x=h.firstChild;s.append(x)}var w,k=h.attributes,I=Object(g.a)(k);try{for(I.s();!(w=I.n()).done;){var N=w.value;s.setAttribute(N.nodeName,N.value)}}catch(O){I.e(O)}finally{I.f()}s.id=qe(),nt[i]={symbol:s,xform:r},Object(u.k)().append(s),l.addSubCommand(new Me(s))}(n=p.createElementNS(y.a.SVG,"use")).id=qe(),Object(u.A)(n,"#"+s.id),(ce||ee().getCurrentLayer()).append(n),l.addSubCommand(new Me(n)),We(),n.setAttribute("transform",r),Te(n).data("symbol",s).data("ref",s),Qe([n]),we(l),ze("changed",[K]),this.ungroupSelectedElement(),this.groupSelectedElements()}catch(P){return console.log(P),null}return n};var Ft={identifyLayers:j,createLayer:F,cloneLayer:U,deleteCurrentLayer:V,setCurrentLayer:G,renameCurrentLayer:q,setCurrentLayerPosition:H,setLayerVisibility:z,moveSelectedToLayer:W,mergeLayer:Q,mergeAllLayers:J,leaveContext:Y,setContext:Z};Object.entries(Ft).forEach((function(e){var t=Object(r.a)(e,2),a=t[0],n=t[1];l[a]=n})),function(e){L=e}({pathActions:_e,getCurrentGroup:function(){return ce},setCurrentGroup:function(e){ce=e},getSelectedElements:ye,getSVGContent:Ae,undoMgr:xe,elData:$e,getCurrentDrawing:ee,clearSelection:We,call:ze,addCommandToHistory:we,changeSVGContent:function(){ze("changed",[K])}}),this.clear=function(){_e.clear(),We(),l.clearSvgContentElement(),l.current_drawing_=new M(K),Te("#bleed").length&&Te("#bleed").remove(),I&&this.scaleBoundary(!1,"original"),l.createLayer("Layer_0"),l.undoMgr.resetUndoStack(),Ge.initGroup(),ft=Ge.getRubberBandBox(),m=[],ze("cleared")},this.linkControlPoints=_e.linkControlPoints,this.getContentElem=function(){return K},this.getRootElem=function(){return T};var Ut=this.getResolution=function(){return{w:K.getAttribute("width")/le,h:K.getAttribute("height")/le,zoom:le}};this.getSnapToGrid=function(){return n.gridSnapping},this.getVersion=function(){return"svgcanvas.js ($Rev$)"},this.setUiStrings=function(e){Object.assign(Ze,e.notification),Te=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{ok:"Ok",cancel:"Cancel"};e("#dialog_container").draggable({cancel:"#dialog_content, #dialog_buttons *",containment:"window"}).css("position","absolute");var a=e("#dialog_box"),r=e("#dialog_buttons"),n=e("#dialog_content");function i(i,o,s,l,c,u){n.html("<p>"+o.replace(/\n/g,"</p><p>")+"</p>").toggleClass("prompt","prompt"===i),r.empty();var d=e('<input type="button" data-ok="" value="'+t.ok+'">').appendTo(r);return new Promise((function(p,m){var h,g;if("alert"!==i&&e('<input type="button" value="'+t.cancel+'">').appendTo(r).click((function(){a.hide(),p(!1)})),"prompt"===i)(h=e('<input type="text">').prependTo(r)).val(s||""),h.bind("keydown","return",(function(){d.click()}));else if("select"===i){var f=e('<div style="text-align:center;">');if(h=e('<select aria-label="'.concat(o,'">')).appendTo(f),u){var v=e("<label>").text(u.label);(g=e('<input type="checkbox">').appendTo(v)).val(u.value),u.tooltip&&v.attr("title",u.tooltip),g.prop("checked",Boolean(u.checked)),f.append(e("<div>").append(v))}e.each(l||[],(function(t,a){"object"===typeof a?h.append(e("<option>").val(a.value).html(a.text)):h.append(e("<option>").html(a))})),n.append(f),s&&h.val(s),c&&h.bind("change","return",c),h.bind("keydown","return",(function(){d.click()}))}else"process"===i&&d.hide();a.show(),d.click((function(){a.hide();var e="prompt"!==i&&"select"!==i||h.val();p(g?{response:e,checked:g.prop("checked")}:e)})).focus(),"prompt"!==i&&"select"!==i||h.focus()}))}return e.alert=function(e){return i("alert",e)},e.confirm=function(e){return i("confirm",e)},e.process_cancel=function(e){return i("process",e)},e.prompt=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return i("prompt",e,t)},e.select=function(e,t,a,r,n){return i("select",e,r,t,a,n)},e}(Te,e.common),X.g(e)},this.setConfig=function(e){Object.assign(n,e)},this.getTitle=function(e){if(e=e||ge[0]){var t,a=(e=Te(e).data("gsvg")||Te(e).data("symbol")||e).childNodes,r=Object(g.a)(a);try{for(r.s();!(t=r.n()).done;){var n=t.value;if("title"===n.nodeName)return n.textContent}}catch(i){r.e(i)}finally{r.f()}return""}},this.setGroupTitle=function(e){var t=ge[0];t=Te(t).data("gsvg")||t;var a,r=Te(t).children("title"),n=new Fe("Set Label");if(e.length)r.length?(a=r[0],n.addSubCommand(new je(a,{"#text":a.textContent})),a.textContent=e):((a=p.createElementNS(y.a.SVG,"title")).textContent=e,Te(t).prepend(a),n.addSubCommand(new Me(a)));else{var i=r.nextSibling;n.addSubCommand(new Be(r[0],i,t)),r.remove()}we(n)};this.getDocumentTitle=function(){return l.getTitle(K)};this.setDocumentTitle=function(e){var t,a=K.childNodes,r=!1,n="",i=new Fe("Change Image Title"),o=Object(g.a)(a);try{for(o.s();!(t=o.n()).done;){var s=t.value;if("title"===s.nodeName){n=(r=s).textContent;break}}}catch(l){o.e(l)}finally{o.f()}r||(r=p.createElementNS(y.a.SVG,"title"),K.insertBefore(r,K.firstChild)),e.length?r.textContent=e:r.remove(),i.addSubCommand(new je(r,{"#text":n})),we(i)},this.getEditorNS=function(e){return e&&K.setAttribute("xmlns:se",y.a.SE),y.a.SE},this.setResolution=function(e,t){var a,r=Ut(),n=r.w,i=r.h;if("fit"===e){var o=Object(u.t)();if(!o)return!1;a=new Fe("Fit Canvas to Content");var s=Object(u.v)();Qe(s);var c=[],p=[];Te.each(s,(function(e,t){c.push(-1*o.x),p.push(-1*o.y)}));var m=l.moveSelectedElements(c,p,!0);a.addSubCommand(m),We(),e=Math.round(o.width),t=Math.round(o.height)}return e===n&&t===i||(a||(a=new Fe("Change Image Dimensions")),e=Object(d.b)("width",e),t=Object(d.b)("height",t),K.setAttribute("width",e),K.setAttribute("height",t),this.contentW=e,this.contentH=t,a.addSubCommand(new je(K,{width:n,height:i})),K.setAttribute("viewBox",[0,0,e/le,t/le].join(" ")),a.addSubCommand(new je(K,{viewBox:["0 0",n,i].join(" ")})),we(a),ze("changed",[K])),!0},this.getOffset=function(){return Te(K).attr(["x","y"])},this.setBBoxZoom=function(e,t,a){var r,n=.85,i=function(e){if(!e)return!1;var r=Math.round(t/e.width*100*n)/100,i=Math.round(a/e.height*100*n)/100,o=Math.min(r,i);return l.setZoom(o),{zoom:o,bbox:e}};if("object"===typeof e){if(0===(r=e).width||0===r.height){var o=r.zoom?r.zoom:le*r.factor;return l.setZoom(o),{zoom:le,bbox:r}}return i(r)}switch(e){case"selection":if(!ge[0])return;var s=Te.map(ge,(function(e){if(e)return e}));r=Object(u.t)(s);break;case"canvas":var c=Ut();n=.95,r={width:c.w,height:c.h,x:0,y:0};break;case"content":r=Object(u.t)();break;case"layer":r=Object(u.t)(Object(u.v)(ee().getCurrentLayer()));break;default:return}return i(r)},this.setZoom=function(e){var t=Ut();K.setAttribute("viewBox","0 0 "+t.w/e+" "+t.h/e),le=e,Te.each(ge,(function(e,t){t&&Ge.requestSelector(t).resize()})),_e.zoomChange(),yt("zoomChanged",e)},this.getMode=function(){return dt},this.setMode=function(e){_e.clear(!0),Dt.clear(),ht=ge[0]&&"text"===ge[0].nodeName?it:me,dt=e},this.getColor=function(e){return ht[e]},this.setColor=function(e,t,a){me[e]=t,ht[e+"_paint"]={type:"solidColor"};var r=[];function n(e){"g"!==e.nodeName&&r.push(e)}for(var i=ge.length;i--;){var o=ge[i];o&&("g"===o.tagName?Object(u.E)(o,n):"fill"===e?"polyline"!==o.tagName&&"line"!==o.tagName&&r.push(o):r.push(o))}r.length>0&&(a?qt(e,t,r):(Ht(e,t,r),ze("changed",r)))};var Vt=this.setGradient=function(e){if(ht[e+"_paint"]&&"solidColor"!==ht[e+"_paint"].type){var t=l[e+"Grad"],a=Gt(t),r=Object(u.k)();a?t=a:(t=r.appendChild(p.importNode(t,!0))).id=qe(),l.setColor(e,"url(#"+t.id+")")}},Gt=function(e){for(var t=Object(u.k)(),a=Te(t).find("linearGradient, radialGradient"),r=a.length,n=["r","cx","cy","fx","fy"];r--;){var i=a[r];if("linearGradient"===e.tagName){if(e.getAttribute("x1")!==i.getAttribute("x1")||e.getAttribute("y1")!==i.getAttribute("y1")||e.getAttribute("x2")!==i.getAttribute("x2")||e.getAttribute("y2")!==i.getAttribute("y2"))continue}else if("continue"===function(){var t=Te(e).attr(n),a=Te(i).attr(n),r=!1;if(Te.each(n,(function(e,n){t[n]!==a[n]&&(r=!0)})),r)return"continue"}())continue;var o=e.getElementsByTagNameNS(y.a.SVG,"stop"),s=i.getElementsByTagNameNS(y.a.SVG,"stop");if(o.length===s.length){for(var l=o.length;l--;){var c=o[l],d=s[l];if(c.getAttribute("offset")!==d.getAttribute("offset")||c.getAttribute("stop-opacity")!==d.getAttribute("stop-opacity")||c.getAttribute("stop-color")!==d.getAttribute("stop-color"))break}if(-1===l)return i}}return null};this.setPaint=function(e,t){var a=new Te.jGraduate.Paint(t);switch(this.setPaintOpacity(e,a.alpha/100,!0),ht[e+"_paint"]=a,a.type){case"solidColor":this.setColor(e,"none"!==a.solidColor?"#"+a.solidColor:"none");break;case"linearGradient":case"radialGradient":l[e+"Grad"]=a[a.type],Vt(e)}},this.setStrokePaint=function(e){this.setPaint("stroke",e)},this.setFillPaint=function(e){this.setPaint("fill",e)},this.getStrokeWidth=function(){return ht.stroke_width},this.setStrokeWidth=function(e){if(0===e&&["line","path"].includes(dt))l.setStrokeWidth(1);else{ht.stroke_width=e;for(var t=[],a=ge.length;a--;){var r=ge[a];r&&("g"===r.tagName?Object(u.E)(r,n):t.push(r))}t.length>0&&(Ht("stroke-width",e,t),ze("changed",ge))}function n(e){"g"!==e.nodeName&&t.push(e)}},this.setStrokeAttr=function(e,t){me[e.replace("-","_")]=t;for(var a=[],r=ge.length;r--;){var n=ge[r];n&&("g"===n.tagName?Object(u.E)(n,(function(e){"g"!==e.nodeName&&a.push(e)})):a.push(n))}a.length>0&&(Ht(e,t,a),ze("changed",ge))},this.getStyle=function(){return me},this.getOpacity=Je,this.setOpacity=function(e){me.opacity=e,Ht("opacity",e)},this.getFillOpacity=function(){return me.fill_opacity},this.getStrokeOpacity=function(){return me.stroke_opacity},this.setPaintOpacity=function(e,t,a){me[e+"_opacity"]=t,a?qt(e+"-opacity",t):Ht(e+"-opacity",t)},this.getPaintOpacity=function(e){return"fill"===e?this.getFillOpacity():this.getStrokeOpacity()},this.getBlur=function(e){var t=0;if(e&&e.getAttribute("filter")){var a=Object(u.n)(e.id+"_blur");a&&(t=a.firstChild.getAttribute("stdDeviation"))}return t},function(){var e=null,t=null,a=!1;function r(){var a=l.undoMgr.finishUndoableChange();e.addSubCommand(a),we(e),e=null,t=null}l.setBlurNoUndo=function(e){if(t)if(0===e)qt("filter",""),a=!0;else{var r=ge[0];a&&qt("filter","url(#"+r.id+"_blur)"),Object(c.g)()&&(r.removeAttribute("filter"),r.setAttribute("filter","url(#"+r.id+"_blur)")),qt("stdDeviation",e,[t.firstChild]),l.setBlurOffsets(t,e)}else l.setBlur(e)},l.setBlurOffsets=function(e,t){t>3?Object(u.a)(e,{x:"-50%",y:"-50%",width:"200%",height:"200%"},100):Object(c.g)()||(e.removeAttribute("x"),e.removeAttribute("y"),e.removeAttribute("width"),e.removeAttribute("height"))},l.setBlur=function(a,n){if(e)r();else{var i=ge[0],o=i.id;t=Object(u.n)(o+"_blur"),a-=0;var s=new Fe;if(t)0===a&&(t=null);else{var c=ve({element:"feGaussianBlur",attr:{in:"SourceGraphic",stdDeviation:a}});(t=ve({element:"filter",attr:{id:o+"_blur"}})).append(c),Object(u.k)().append(t),s.addSubCommand(new Me(t))}var d={filter:i.getAttribute("filter")};if(0===a)return i.removeAttribute("filter"),void s.addSubCommand(new je(i,d));Ht("filter","url(#"+o+"_blur)"),s.addSubCommand(new je(i,d)),l.setBlurOffsets(t,a),e=s,l.undoMgr.beginUndoableChange("stdDeviation",[t?t.firstChild:null]),n&&(l.setBlurNoUndo(a),r())}}}(),this.getBold=function(){var e=ge[0];return!(Object(u.x)(e)||"text"!==e.tagName||!Object(u.x)(ge[1]))&&"bold"===e.getAttribute("font-weight")},this.setBold=function(e){var t=ge[0];!Object(u.x)(t)&&"text"===t.tagName&&Object(u.x)(ge[1])&&Ht("font-weight",e?"bold":"normal"),ge[0].textContent||Dt.setCursor()},this.getItalic=function(){var e=ge[0];return!(Object(u.x)(e)||"text"!==e.tagName||!Object(u.x)(ge[1]))&&"italic"===e.getAttribute("font-style")},this.setItalic=function(e){var t=ge[0];!Object(u.x)(t)&&"text"===t.tagName&&Object(u.x)(ge[1])&&Ht("font-style",e?"italic":"normal"),ge[0].textContent||Dt.setCursor()},this.getFontFamily=function(){return it.font_family},this.setFontFamily=function(e){it.font_family=e,Ht("font-family",e),ge[0]&&!ge[0].textContent&&Dt.setCursor()},this.setFontColor=function(e){it.fill=e,Ht("fill",e)},this.getFontColor=function(){return it.fill},this.getFontSize=function(){return it.font_size},this.setFontSize=function(e){it.font_size=e,Ht("font-size",e),ge[0].textContent||Dt.setCursor()},this.getText=function(){var e=ge[0];return Object(u.x)(e)?"":e.textContent},this.setTextContent=function(e){Ht("#text",e),Dt.init(e),Dt.setCursor()},this.setImageURL=function(e){var t=ge[0];if(t){var a=Te(t).attr(["width","height"]),r=!a.width||!a.height,n=Object(u.o)(t);if(n!==e||r){var i=new Fe("Change Image URL");Object(u.A)(t,e),i.addSubCommand(new je(t,{"#href":n})),Te(new Image).load((function(){var e=Te(t).attr(["width","height"]);Te(t).attr({width:this.width,height:this.height}),Ge.requestSelector(t).resize(),i.addSubCommand(new je(t,e)),we(i),ze("changed",[t])})).attr("src",e)}}},this.setLinkURL=function(e){var t=ge[0];if(t){if("a"!==t.tagName){var a=Te(t).parents("a");if(!a.length)return;t=a[0]}var r=Object(u.o)(t);if(r!==e){var n=new Fe("Change Link URL");Object(u.A)(t,e),n.addSubCommand(new je(t,{"#href":r})),we(n)}}},this.setRectRadius=function(e){var t=ge[0];if(!Object(u.x)(t)&&"rect"===t.tagName){var a=t.getAttribute("rx");a!==String(e)&&(t.setAttribute("rx",e),t.setAttribute("ry",e),we(new je(t,{rx:a,ry:a},"Radius")),ze("changed",[t]))}},this.makeHyperlink=function(e){l.groupSelectedElements("a",e)},this.removeHyperlink=function(){l.ungroupSelectedElement()},this.setSegType=function(e){_e.setSegType(e)},this.convertToPath=function(e,t){if(!Object(u.x)(e)){if(t)return Object(u.m)(e,ve,_e);var a={fill:me.fill,"fill-opacity":me.fill_opacity,stroke:me.stroke,"stroke-width":me.stroke_width,"stroke-dasharray":me.stroke_dasharray,"stroke-linejoin":me.stroke_linejoin,"stroke-linecap":me.stroke_linecap,"stroke-opacity":me.stroke_opacity,opacity:me.opacity,visibility:"hidden"};return Object(u.c)(e,a,ve,_e,We,Qe,C,we)}var r=ge;Te.each(r,(function(e,t){t&&l.convertToPath(t)}))};var qt=function(e,t,a){"pathedit"===dt&&_e.moveNode(e,t);for(var r=(a=a||ge).length,n=["g","polyline","path"],i=function(){var i=a[r];if(Object(u.x)(i))return"continue";if(("x"===e||"y"===e)&&n.includes(i.tagName)){var o=Object(u.t)([i]),s="x"===e?t-o.x:0,d="y"===e?t-o.y:0;return l.moveSelectedElements(s*le,d*le,!0),"continue"}var p="#text"===e?i.textContent:i.getAttribute(e);if(Object(u.x)(p)&&(p=""),p!==String(t)){"#text"===e?(i.textContent=t,/rotate/.test(i.getAttribute("transform"))&&(i=xt(i))):"#href"===e?Object(u.A)(i,t):i.setAttribute(e,t),"textedit"===dt&&"#text"!==e&&i.textContent.length&&Dt.toSelectMode(i),Object(c.b)()&&"text"===i.nodeName&&/rotate/.test(i.getAttribute("transform"))&&(String(t).startsWith("url")||["font-size","font-family","x","y"].includes(e)&&i.textContent)&&(i=xt(i)),ge.includes(i)&&setTimeout((function(){i.parentNode&&Ge.requestSelector(i).resize()}),0);var m=Object(u.r)(i);if(0!==m&&"transform"!==e)for(var h=Object(se.b)(i),g=h.numberOfItems;g--;){if(4===h.getItem(g).type){h.removeItem(g);var f=Object(u.l)(i),v=Object(oe.i)(f.x+f.width/2,f.y+f.height/2,Object(oe.h)(h).matrix),b=v.x,A=v.y,y=T.createSVGTransform();y.setRotate(m,b,A),h.insertItemBefore(y,g);break}}}};r--;)i()},Ht=this.changeSelectedAttribute=function(e,t,a){a=a||ge,l.undoMgr.beginUndoableChange(e,a),qt(e,t,a);var r=l.undoMgr.finishUndoableChange();r.isEmpty()||we(r)};this.deleteSelectedElements=function(e){var t,a,r,n,i,o,s=new Fe("Delete Elements"),l=ge.length,c=[];if(1===l&&"image"===(null===(t=ge[0])||void 0===t||null===(a=t.prefs)||void 0===a?void 0:a.type)&&"mask"===(null===(r=ge[0])||void 0===r||null===(n=r.prefs)||void 0===n?void 0:n.imgSelectionType)&&!e||"template"===(null===(i=ge[0])||void 0===i||null===(o=i.prefs)||void 0===o?void 0:o.type))if("template"===ge[0].prefs.type&&Array.isArray(ge[0].children))ge[0].children.forEach((function(e){if("image"===e.getAttribute("type")){var t=e.getAttribute("id");document.getElementById("mask_"+t)&&document.getElementById("mask_"+t).remove(),document.getElementById("preview_"+t)&&document.getElementById("preview_"+t).remove()}}));else{var d=ge[0].getAttribute("id");document.getElementById("mask_"+d)&&document.getElementById("mask_"+d).remove(),document.getElementById("preview_"+d)&&document.getElementById("preview_"+d).remove()}for(var p=0;p<l;++p){var m=ge[p];if(Object(u.x)(m))break;var h=m.parentNode,g=m;if(Ge.releaseSelector(g),!(!e&&m&&m.prefs&&m.prefs.lock&&m.prefs.lock.delete)||_){X.f(g.id),"a"===h.tagName&&1===h.childNodes.length&&(g=h,h=h.parentNode);var f=g.nextSibling,v=h.removeChild(g);c.push(m),s.addSubCommand(new Be(v,f,h))}}ge=[],s.isEmpty()||we(s),ze("changed",c),We(),setTimeout((function(){De.EventEmitter.dispatch(De.Events.CALCULATE_EXACT_PRICE)}),50)},this.cutSelectedElements=function(){l.copySelectedElements(),l.deleteSelectedElements()},this.copySelectedElements=function(){D=JSON.stringify(ge.map((function(e){return fe(e)}))),N=ge,Te("#cmenu_canvas").enableContextMenuItems("#paste,#paste_in_place")},this.pasteElements=function(e,t,a){var r=JSON.parse(D),n="";r&&"multiselect"==r[0].attr.type?(r=r[0].children,n=N[0].children):n=N;var i=r.length;if(i){var o=[],s=new Fe("Paste elements"),c={};for(r.forEach((function e(t){t.attr&&t.attr.id&&(c[t.attr.id]=qe(),t.attr.id=c[t.attr.id]),t.children&&t.children.forEach(e)})),yt("IDsUpdated",{elems:r,changes:c},!0).forEach((function(e){e&&"remove"in e&&e.remove.forEach((function(e){r=r.filter((function(t){return t.attr.id!==e}))}))}));i--;){var d=r[i];if(d){var p=ve(d);if(p&&"image"===p.getAttribute("type")&&p.getElementsByTagName("clipPath").length){var m=p.getElementsByTagName("clipPath")[0].getAttribute("id");p.getElementsByTagName("image")[0].setAttribute("clip-path","url(#"+m+")")}o[i]=p,n[i]&&n[i].prefs&&(o[i].prefs=n[i].prefs),s.addSubCommand(new Me(p)),tt(p)}}if(Nt(o),"in_place"!==e){var h,g;e?"point"===e&&(h=t,g=a):(h=bt.x,g=bt.y);var f=Object(u.t)(o),v=h-(f.x+f.width/2),b=g-(f.y+f.height/2),A=[],y=[];Te.each(o,(function(e,t){A.push(v),y.push(b)}));var _=l.moveSelectedElements(A,y,!1);_&&s.addSubCommand(_)}we(s),ze("changed",o)}},this.groupSelectedElements=function(e,t,a){e||(e="g");var r,n="",i="";switch(e){case"a":n="Make hyperlink",r=t||"";break;default:e="g",n="Group Elements"}var o=new Fe(n);a&&(i="multiselect");var s=ve({element:e,attr:{id:qe(),type:i}});"a"===e&&Object(u.A)(s,r),a&&(s.prefs={type:"multiselect"}),o.addSubCommand(new Me(s));for(var l=ge.length;l--;){var c=ge[l];if(!Object(u.x)(c)){"a"===c.parentNode.tagName&&1===c.parentNode.childNodes.length&&(c=c.parentNode);var d=c.nextSibling,p=c.parentNode;s.append(c),o.addSubCommand(new Le(c,d,p))}}o.isEmpty()||we(o),Nt([s],!0)};var zt=this.pushGroupProperties=function(e,t){for(var a,r,n,i=e.childNodes,o=i.length,s=e.getAttribute("transform"),c=Object(se.b)(e),d=Object(oe.h)(c).matrix,p=new Fe("Push group properties"),m=Object(u.r)(e),h=Te(e).attr(["filter","opacity"]),g=ee(),f=0;f<o;f++){var v=i[f];if(1===v.nodeType){if(null!==h.opacity&&1!==h.opacity){var b=Math.round((v.getAttribute("opacity")||1)*h.opacity*100)/100;Ht("opacity",b,[v])}if(h.filter){var A=this.getBlur(v),y=A;r||(r=this.getBlur(e)),A?A=Number(r)+Number(A):0===A&&(A=r),y?a=Object(u.q)(v.getAttribute("filter")):a?(a=g.copyElem(a),Object(u.k)().append(a)):a=Object(u.q)(h.filter);var _="feGaussianBlur"===a.firstChild.tagName?"blur":"filter";a.id=v.id+"_"+_,Ht("filter","url(#"+a.id+")",[v]),A&&(Ht("stdDeviation",A,[a.firstChild]),l.setBlurOffsets(a,A))}var E=Object(se.b)(v);if(v.tagName.includes("Gradient")&&(E=null),E&&"defs"!==v.tagName&&c.numberOfItems){if(m&&1===c.numberOfItems){var S=c.getItem(0).matrix,C=T.createSVGMatrix(),x=Object(u.r)(v);x&&(C=E.getItem(0).matrix);var w=Object(u.l)(v),k=Object(oe.h)(E).matrix,I=Object(oe.i)(w.x+w.width/2,w.y+w.height/2,k),N=m+x,O=T.createSVGTransform();O.setRotate(N,I.x,I.y);var P=Object(oe.d)(S,C,O.matrix.inverse());if(x&&E.removeItem(0),N&&(E.numberOfItems?E.insertItemBefore(O,0):E.appendItem(O)),P.e||P.f){var D=T.createSVGTransform();D.setTranslate(P.e,P.f),E.numberOfItems?E.insertItemBefore(D,0):E.appendItem(D)}}else{var R=v.getAttribute("transform");(n={}).transform=R||"";var L=T.createSVGTransform(),M=Object(oe.h)(E).matrix,B=M.inverse(),j=Object(oe.d)(B,d,M);L.setMatrix(j),E.appendItem(L)}var F=he(v);F&&p.addSubCommand(F)}}}if(s&&((n={}).transform=s,e.setAttribute("transform",""),e.removeAttribute("transform"),p.addSubCommand(new je(e,n))),t&&!p.isEmpty())return p};this.ungroupSelectedElement=function(e){var t=ge[0];if(t)if(Te(t).data("gsvg")||Te(t).data("symbol"))jt(t);else{if("use"===t.tagName){var a=Object(u.n)(Object(u.o)(t).substr(1));return Te(t).data("symbol",a).data("ref",a),void jt(t)}var r=Te(t).parents("a");if(r.length&&(t=r[0]),"g"===t.tagName||"a"===t.tagName){var n=new Fe("Ungroup Elements"),i=zt(t,!0);i&&n.addSubCommand(i);for(var o=t.parentNode,s=t.nextSibling,l=new Array(t.childNodes.length),c=0;t.firstChild;){var d=t.firstChild,p=d.nextSibling,m=d.parentNode;if("title"!==d.tagName)l[c++]=d=o.insertBefore(d,s),e&&!d.prefs&&(d.setAttribute("pointer-events","bounding-box"),d.prefs=t.prefs),n.addSubCommand(new Le(d,p,m));else{var h=d.nextSibling;n.addSubCommand(new Be(d,h,m)),d.remove()}}We();var g=t.nextSibling;t=o.removeChild(t),n.addSubCommand(new Be(t,g,o)),n.isEmpty()||we(n),Qe(l)}}},this.addChangesToHistory=function(e,t,a,r){var n,i=[];if(!e)ge[0];if(n||(n=new Fe("Change Color")),a){i=e.querySelectorAll("path");for(var o=0;o<i.length;o++)n.addSubCommand(new je(i[o],t))}else if(r){i=r.querySelectorAll("path,circle,rect,ellipse,polygon");for(var s=0;s<i.length;s++)i[s].getAttribute("fill")==e.getAttribute("fill")&&n.addSubCommand(new je(i[s],t))}else n.addSubCommand(new je(e,t));n.isEmpty()||we(n)},this.moveToTopSelectedElement=function(){var e=ge,t=Object(r.a)(e,1)[0];if(!Object(u.x)(t)){var a=t,n=a.parentNode,i=a.nextSibling;i!==(a=a.parentNode.appendChild(a)).nextSibling&&(we(new Le(a,i,n,"top")),ze("changed",[a]))}},this.moveToBottomSelectedElement=function(){var e=ge,t=Object(r.a)(e,1)[0];if(!Object(u.x)(t)){var a=t,n=a.parentNode,i=a.nextSibling,o=a.parentNode.firstChild;"title"===o.tagName&&(o=o.nextSibling),"defs"===o.tagName&&(o=o.nextSibling),i!==(a=a.parentNode.insertBefore(a,o)).nextSibling&&(we(new Le(a,i,n,"bottom")),ze("changed",[a]))}},this.moveUpDownSelected=function(e){var t=ge[0];if(t){var a,r;vt=[];var n=Te(_t(Object(u.t)([t]))).toArray();if("Down"===e&&n.reverse(),Te.each(n,(function(){return r?(a=this,!1):(this===t&&(r=!0),!0)})),a){var i=t,o=i.parentNode,s=i.nextSibling;a&&"background"===a.getAttribute("id")||(Te(a)["Down"===e?"before":"after"](i),s!==i.nextSibling&&(we(new Le(i,s,o,"Move "+e)),ze("changed",[i])))}}},this.moveSelectedElements=function(e,t,a){e.constructor!==Array&&(e/=le,t/=le),a=a||!0;for(var r=new Fe("position"),n=ge.length;n--;){var i=ge[n];if(!Object(u.x)(i)){if(i&&i.prefs&&i.prefs.lock&&i.prefs.lock.move&&!_){if("update"!==i.prefs.operation)continue;i.prefs.operation="add"}var o=T.createSVGTransform(),s=Object(se.b)(i);e.constructor===Array?o.setTranslate(e[n],t[n]):o.setTranslate(e,t),s.numberOfItems?s.insertItemBefore(o,0):s.appendItem(o);var l=he(i);l&&r.addSubCommand(l),Ge.requestSelector(i).resize()}}if(!r.isEmpty())return a&&we(r),ze("changed",ge),r},this.cloneSelectedElements=function(e,t){var a,r,n=new Fe("Clone Elements"),i=ge.length;for(ge.sort((function(e,t){return Te(t).index()-Te(e).index()})),a=0;a<i&&(r=ge[a],!Object(u.x)(r));++a);var o=ge.slice(0,a);this.clearSelection(!0);var s=ee();for(a=o.length;a--;)r=o[a]=s.copyElem(o[a]),(ce||s.getCurrentLayer()).append(r),n.addSubCommand(new Me(r));n.isEmpty()||(Qe(o.reverse()),this.moveSelectedElements(e,t,!1),we(n))},this.alignSelectedElements=function(e,t){var a=[];isNaN(b)&&$t("bound_"+(b=0));var r=ge.length;if(r){for(var n=Number.MAX_VALUE,i=Number.MIN_VALUE,o=Number.MAX_VALUE,s=Number.MIN_VALUE,c=Number.MIN_VALUE,d=Number.MIN_VALUE,p=0;p<r&&!Object(u.x)(ge[p]);++p){var h=ge[p];switch(a[p]=Object(u.t)([h]),t){case"smallest":(("l"===e||"c"===e||"r"===e)&&(c===Number.MIN_VALUE||c>a[p].width)||("t"===e||"m"===e||"b"===e)&&(d===Number.MIN_VALUE||d>a[p].height))&&(n=a[p].x,o=a[p].y,i=a[p].x+a[p].width,s=a[p].y+a[p].height,c=a[p].width,d=a[p].height);break;case"largest":(("l"===e||"c"===e||"r"===e)&&(c===Number.MIN_VALUE||c<a[p].width)||("t"===e||"m"===e||"b"===e)&&(d===Number.MIN_VALUE||d<a[p].height))&&(n=a[p].x,o=a[p].y,i=a[p].x+a[p].width,s=a[p].y+a[p].height,c=a[p].width,d=a[p].height);break;default:a[p].x<n&&(n=a[p].x),a[p].y<o&&(o=a[p].y),a[p].x+a[p].width>i&&(i=a[p].x+a[p].width),a[p].y+a[p].height>s&&(s=a[p].y+a[p].height)}}"page"===t&&(m.length>0&&m[b]?(n=m[b].boundX,o=m[b].boundY,i=m[b].boundX+m[b].boundWidth,s=m[b].boundY+m[b].boundHeight):(n=0,o=0,i=l.contentW,s=l.contentH));for(var g=new Array(r),f=new Array(r),v=0;v<r&&!Object(u.x)(ge[v]);++v){var A=a[v];switch(g[v]=0,f[v]=0,e){case"l":g[v]=n-A.x;break;case"c":g[v]=(n+i)/2-(A.x+A.width/2);break;case"r":g[v]=i-(A.x+A.width);break;case"t":f[v]=o-A.y;break;case"m":f[v]=(o+s)/2-(A.y+A.height/2);break;case"b":f[v]=s-(A.y+A.height)}}this.moveSelectedElements(g,f)}},this.contentW=Ut().w,this.contentH=Ut().h,this.updateCanvas=function(e,t){T.setAttribute("width",e),T.setAttribute("height",t);var a=Te("#canvasBackground")[0],r=K.getAttribute("x"),n=K.getAttribute("y"),i=(e-this.contentW*le)/2,o=(t-this.contentH*le)/2;Object(u.a)(K,{width:this.contentW*le,height:this.contentH*le,x:i,y:o,viewBox:"0 0 "+this.contentW+" "+this.contentH}),Object(u.a)(a,{width:K.getAttribute("width"),height:K.getAttribute("height"),x:i,y:o});var s=Object(u.n)("background_image");return s&&Object(u.a)(s,{width:"100%",height:"100%"}),Ge.selectorParentGroup.setAttribute("transform","translate("+i+","+o+")"),yt("canvasUpdated",{new_x:i,new_y:o,old_x:r,old_y:n,d_x:i-r,d_y:o-n}),{x:i,y:o,old_x:r,old_y:n,d_x:i-r,d_y:o-n}},this.getLayerName=function(){return ee().getCurrentLayer().id};var Wt=this.getLayerStage=function(){return ee().getCurrentLayer()};this.cycleElement=function(e){var t,a=ge[0],r=!1,n=Object(u.v)(ce||ee().getCurrentLayer());if(n.length){if(Object(u.x)(a))r=n[t=e?n.length-1:0];else for(var i=n.length;i--;)if(n[i]===a){(t=e?i-1:i+1)>=n.length?t=0:t<0&&(t=n.length-1),r=n[t];break}Nt([r],!0),ze("selected",ge)}};var Qt,Jt={boundHeight:null,boundWidth:null,boundX:null,boundY:null},Yt="",Zt=[];this.createBounds=function(e,t,a,r){x=r||x||"#006400";var n,i,o,s,c,u,d=p.createElementNS(y.a.SVG,"g"),g=(e.length,null),f=null,v={},b={};m=[],d.setAttributeNS(null,"id","bounds"),d.setAttributeNS(null,"xe_id","bounds"),Zt[S]=e;for(var A=0;A<e.length;A++)n=JSON.parse(e[A].dimension),s=e[A].print_area,u=s.width,c=s.height,v.type=n.type,t?(a.isCropMark&&"rect"===n.type?(Jt.boundHeight=v.height=n.ch,Jt.boundWidth=v.width=n.cw,Jt.boundX=v.x=n.cx,Jt.boundY=v.y=n.cy):(Jt.boundHeight=v.height=n.height,Jt.boundWidth=v.width=n.width,Jt.boundX=v.x=n.x,Jt.boundY=v.y=n.y),"path"===n.type&&(g=e[A].bleed_mark_data?JSON.parse(e[A].bleed_mark_data):null,f=e[A].shape_mark_data?JSON.parse(e[A].shape_mark_data):null),this.drawBleed(n,a,g,f)):(Jt.boundHeight=v.height=n.height,Jt.boundWidth=v.width=n.width,Jt.boundX=v.x=n.x,Jt.boundY=v.y=n.y),"path"===n.type?((i=p.createElementNS(y.a.SVG,"path")).setAttributeNS(null,"d",n.path),v.path=n.path):i=p.createElementNS(y.a.SVG,"rect"),i.setAttributeNS(null,"id","bound_"+A),n.rotate&&(u=s.height,c=s.width),b.width=u/v.width,b.height=c/v.height,m[A]=JSON.parse(JSON.stringify(Jt)),0===h.length?h[S]=[]:h[S]||(h[S]=[]),h[S][A]=JSON.parse(JSON.stringify(b)),i.setAttributeNS(null,"x",v.x),i.setAttributeNS(null,"y",v.y),i.setAttributeNS(null,"width",v.width),i.setAttributeNS(null,"height",v.height),i.setAttributeNS(null,"aWidth",u),i.setAttributeNS(null,"aHeight",c),i.setAttributeNS(null,"isBleed",t),i.setAttributeNS(null,"safeVal",a.safeVal),i.setAttributeNS(null,"cropVal",a.cropVal),i.setAttributeNS(null,"fill","none"),i.setAttributeNS(null,"stroke-width","1"),i.setAttributeNS(null,"pointer-events","all"),i.setAttributeNS(null,"stroke-dasharray","5"),l.aWidth=Number(u),l.aHeight=Number(c),A>0&&l.createLayer("Layer_"+A),"path"===n.type?d.appendChild(i):(o=this.conertSvgRectToPath(i,"bound_"+A),d.append(o)),this.addClipPath(v,A),this.addEngravePreview(A);this.addBackgroundElemToLayer(e.length),l.findDefs().after(d),$t("bound_0")},this.getBounds=function(){return{x:Jt.boundX,y:Jt.boundY,width:Jt.boundWidth,height:Jt.boundHeight}},this.addClipPath=function(e,t,a){var r,n=p.createElementNS(y.a.SVG,"clipPath");n.setAttribute("id","bound_"+t),n.setAttribute("xe_id","bound_"+t),"path"===e.type?((r=p.createElementNS(y.a.SVG,"path")).setAttributeNS(null,"d",e.path),a&&r.setAttributeNS(null,"transform",a)):r=p.createElementNS(y.a.SVG,"rect"),r.setAttribute("id",qe()),r.setAttribute("x",e.x),r.setAttribute("y",e.y),r.setAttribute("pointer-events","all"),r.setAttribute("width",e.width),r.setAttribute("height",e.height),n.appendChild(r),l.findDefs().append(n),ee().getAllLayers()[t].group_.setAttribute("clip-path","url(#bound_"+t+")")},this.addEngravePreview=function(e){var t=p.createElementNS(y.a.SVG,"filter");t.setAttribute("id","engrave_"+e),t.setAttribute("style","color-interpolation-filters:sRGB;");var a=p.createElementNS(y.a.SVG,"feColorMatrix");a.setAttribute("values","0"),a.setAttribute("result","colormatrix"),a.setAttribute("id","feColorMatrix_"+e),a.setAttribute("type","matrix"),t.appendChild(a),l.findDefs().append(t)},this.drawBleed=function(e,t,a,r){var n,i,o,s;if(Te("#bleed").length&&Te("#bleed").remove(),(n=p.createElementNS(y.a.SVG,"g")).setAttributeNS(null,"id","bleed"),t.isCropMark&&("path"===e.type?a&&a.path&&(i=p.createElementNS(y.a.SVG,"path"),this.createShapeCropMark(a.path,null),i.setAttributeNS(null,"d",a.path),i.setAttributeNS(null,"width",a.width),i.setAttributeNS(null,"height",a.height)):(i=p.createElementNS(y.a.SVG,"rect"),this.createBleedMarks(e),i.setAttributeNS(null,"width",e.width),i.setAttributeNS(null,"height",e.height)),i.setAttributeNS(null,"x",e.x),i.setAttributeNS(null,"y",e.y),i.setAttributeNS(null,"fill","none"),i.setAttributeNS(null,"stroke-width","1"),i.setAttributeNS(null,"stroke","#FF0000"),i.setAttributeNS(null,"pointer-events","none"),i.setAttributeNS(null,"stroke-dasharray","5"),n.appendChild(i)),t.isSafeMark&&("path"===e.type&&r&&r.path?((o=p.createElementNS(y.a.SVG,"path")).setAttributeNS(null,"d",r.path),o.setAttributeNS(null,"width",r.width),o.setAttributeNS(null,"height",r.height)):((o=p.createElementNS(y.a.SVG,"rect")).setAttributeNS(null,"width",e.sw),o.setAttributeNS(null,"height",e.sh)),o.setAttributeNS(null,"x",e.sx),o.setAttributeNS(null,"y",e.sy),o.setAttributeNS(null,"fill","none"),o.setAttributeNS(null,"stroke-width","1"),o.setAttributeNS(null,"stroke","#008000"),o.setAttributeNS(null,"pointer-events","none"),o.setAttributeNS(null,"stroke-dasharray","5"),n.appendChild(o)),t.isCropMark&&"rect"===e.type){var l=(e.cw-e.width)/2,c=e.cx+l/2,u=e.cy+l/2,d=e.ch-l,m=e.cw-l;(s=p.createElementNS(y.a.SVG,"rect")).setAttribute("width",m),s.setAttribute("height",d),s.setAttribute("x",c),s.setAttribute("y",u),s.setAttribute("stroke-width",l),s.setAttribute("stroke","#FF0000"),s.setAttribute("opacity","0.25"),s.setAttribute("fill","none"),s.setAttribute("pointer-events","none"),n.appendChild(s)}T.append(n)};var Xt=this.snapToCenter=function(e,t,a){var r=n.centerSnappingStep;return e>t-r&&e<t+r&&(e=t,"x"==a&&Te("#alignH").show(),"y"==a&&Te("#alignV").show()),e};this.setAlignLines=function(e,t,a,r){Te("#alignH").attr({height:r,x:e+a/2,y:t}),Te("#alignV").attr({width:a,x:e,y:t+r/2})},this.createBleedMarks=function(e){var t=(e.cw-e.width)/2;Te("#bleedM").length&&Te("#bleedM").remove();var a=p.createElementNS(y.a.SVG,"g");Object(u.a)(a,{id:"bleedM",display:"none"});var r=document.createElementNS(y.a.SVG,"rect");Object(u.a)(r,{id:"hAlignTLeft",width:t,height:2,x:e.cx-t,y:e.y,fill:"#ff0000","pointer-events":"none"});var n=document.createElementNS(y.a.SVG,"rect");Object(u.a)(n,{id:"hAlignTRight",width:t,height:2,x:e.cx+e.cw,y:e.y,fill:"#ff0000","pointer-events":"none"});var i=document.createElementNS(y.a.SVG,"rect");Object(u.a)(i,{id:"hAlignTLeft",width:t,height:2,x:e.cx-t,y:e.y+e.height,fill:"#ff0000","pointer-events":"none"});var o=document.createElementNS(y.a.SVG,"rect");Object(u.a)(o,{id:"hAlignTRight",width:t,height:2,x:e.cx+e.cw,y:e.y+e.height,fill:"#ff0000","pointer-events":"none"});var s=document.createElementNS(y.a.SVG,"rect");Object(u.a)(s,{id:"vAlignTLeft",width:2,height:t,x:e.x,y:e.cy-t,fill:"#ff0000","pointer-events":"none"});var c=document.createElementNS(y.a.SVG,"rect");Object(u.a)(c,{id:"vAlignTRight",width:2,height:t,x:e.x+e.width,y:e.cy-t,fill:"#ff0000","pointer-events":"none"});var d=document.createElementNS(y.a.SVG,"rect");Object(u.a)(d,{id:"vAlignBLeft",width:2,height:t,x:e.x,y:e.cy+e.ch,fill:"#ff0000","pointer-events":"none"});var m=document.createElementNS(y.a.SVG,"rect");Object(u.a)(m,{id:"vAlignBRight",width:2,height:t,x:e.x+e.width,y:e.cy+e.ch,fill:"#ff0000","pointer-events":"none"}),a.append(r),a.append(n),a.append(i),a.append(o),a.append(s),a.append(c),a.append(d),a.append(m),l.findDefs().after(a)},this.createShapeCropMark=function(e,t){Te("#bleedM").length&&Te("#bleedM").remove();var a=p.createElementNS(y.a.SVG,"g");Object(u.a)(a,{id:"bleedM",display:"none",stroke:"#ff0000"});var r=document.createElementNS(y.a.SVG,"path");Object(u.a)(r,{id:"cropM",d:e,fill:"none","pointer-events":"none","stroke-width":"0.5","stroke-dasharray":"4,4",transform:t||""}),a.append(r);var n=document.getElementById("Layer_0");n?n.after(a):l.findDefs().after(a)},this.getParentLayerName=function(e){for(var t,a=!0,r=e;a;){var n=r.getAttribute("id"),i=n?n.indexOf("layer_"):-1;-1!==i&&i>-1?(t=r.getAttribute("id"),a=!1):(a=!0,"workarea"==(r=r.parentNode).getAttribute("id")&&(a=!1))}return t?t.replace("layer_",""):""};this.propertyToAttribute=function(e,t){e.find("g, path, rect, polygon").each((function(e,a){a.prefs&&a.setAttribute(t,Object(u.H)("XE801",JSON.stringify(a.prefs)))}))};var Kt=this.attributeToProperty=function(e,t){var a=e.getAttribute("xe-props");a&&(e.prefs=JSON.parse(Object(u.G)("XE801",a)),e.removeAttribute("xe-props"))};this.preferenceEnc=function(e){return Object(u.H)("XE801",JSON.stringify(e.prefs))},this.getAllLayers=function(){return l.getCurrentDrawing().all_layers};this.addBackgroundElemToLayer=function(e){for(var t=0;t<e;t++){var a=document.getElementById("Layer_"+t),r=p.createElementNS(y.a.SVG,"g");r.setAttributeNS(null,"id","background"),r.setAttributeNS(null,"type","bg_area_"+t),r.setAttributeNS(null,"pointer-events","none"),r.setAttributeNS(null,"style","color-interpolation-filters:sRGB;pointer-events: none;"),a.appendChild(r)}},this.setBackground=function(e,t){var a=Object(u.n)("canvasBackground"),r=Te(a).find("rect")[0],n=Object(u.n)("background_image");r.setAttribute("fill","none"),t?(n||(n=p.createElementNS(y.a.SVG,"image"),Object(u.a)(n,{id:"background_image",width:"100%",height:"100%",preserveAspectRatio:"xMinYMin",style:"pointer-events:none"})),Object(u.A)(n,t),a.append(n)):n&&n.remove()},this.drawBoundry=function(e,t,a,r,n){this.clear(),e&&e.decoration_settings&&this.createBounds(e.decoration_settings,t,a,r,n)},this.drawVariableBound=function(e,t,a){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,n=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(e){r&&this.clear();var i,o,s,c,d,g,f,v,A,_,E,C,x,w,k,I,N,O,P,D,R,L,M=JSON.parse(JSON.stringify(e)).print_area,B=550,j=550,F=0,U=0,V=1,G=JSON.parse(JSON.stringify(e.dimension)),q=0,H=0,z=0,W={};Zt[S]=[],Zt[S][b]={print_area:M},(V=t.isCropMark?(Number(M.width)+2*t.cropVal)/(Number(M.height)+2*t.cropVal):Number(M.width)/Number(M.height))>1?j=B/V:B=j*V,U=(600-j)/2,F=(600-B)/2,t.isCropMark?(v=B/(Number(M.width)+2*t.cropVal),W.width=(Number(M.width)+2*t.cropVal)/B,W.height=(Number(M.height)+2*t.cropVal)/j):(v=B/Number(M.width),W.width=Number(M.width)/B,W.height=Number(M.height)/j),"rect"!==G.type&&(_=Re.pathBBox(G.path),E=B/_.width,C=j/_.height,x=F/E-_.x,w=U/C-_.y),r?(i=p.createElementNS(y.a.SVG,"g")).setAttributeNS(null,"id","bounds"):i=document.getElementById("bounds"),Jt.boundHeight=G.height=j,Jt.boundWidth=G.width=B,Jt.boundX=G.x=F,Jt.boundY=G.y=U,r?("path"===G.type?(s=p.createElementNS(y.a.SVG,"path")).setAttributeNS(null,"d",G.path):s=p.createElementNS(y.a.SVG,"rect"),s.setAttributeNS(null,"id","bound_"+q)):Te(i).children().each((function(e,t){t.id==="bound_"+q&&(s=t)})),0===h.length?h[S]=[]:h[S]||(h[S]=[]),h[S][q]=JSON.parse(JSON.stringify(W));var Q=1,J="none";if(n&&(Q=.5,J="#ffffff"),m[q]=JSON.parse(JSON.stringify(Jt)),F&&B&&j&&U)if(s.setAttributeNS(null,"x",F),s.setAttributeNS(null,"y",U),s.setAttributeNS(null,"width",B),s.setAttributeNS(null,"height",j),s.setAttributeNS(null,"aWidth",M.width),s.setAttributeNS(null,"aHeight",M.height),s.setAttributeNS(null,"isBleed",t.isCropMark||t.isSafeMark),s.setAttributeNS(null,"safeVal",t.safeVal),s.setAttributeNS(null,"cropVal",t.cropVal),s.setAttributeNS(null,"fill",J),s.setAttributeNS(null,"stroke-width",Q),s.setAttributeNS(null,"stroke","#000"),s.setAttributeNS(null,"pointer-events","all"),r)"path"===G.type?(k="scale("+E+","+C+") translate("+x+","+w+")",s.setAttributeNS(null,"transform",k),i.appendChild(s)):(A=this.conertSvgRectToPath(s,"bound_"+q),i.append(A));else if("path"===G.type){if(k="scale("+E+","+C+") translate("+x+","+w+")",s.setAttributeNS(null,"transform",k),n){var Y,Z=document.getElementById("svgcontent").getElementsByTagName("defs")[0],X=Z.getElementsByTagName("pattern")[0];s.setAttribute("filter","url(#drop_shadow)"),X&&(Y=X.getAttribute("id"),s.setAttribute("fill","url(#"+Y+")"))}}else{if(A=this.conertSvgRectToPath(s,"bound_"+q),n){var K,$=document.getElementById("svgcontent").getElementsByTagName("defs")[0],ee=$.getElementsByTagName("pattern")[0];A.setAttribute("filter","url(#drop_shadow)"),ee&&(K=ee.getAttribute("id"),A.setAttribute("fill","url(#"+K+")"))}i.replaceChild(A,i.childNodes[0])}if(e.is_border_enable&&(r?((o=p.createElementNS(y.a.SVG,"g")).setAttributeNS(null,"id","borderG"),o.setAttributeNS(null,"clip-path","url(#bound_0)"),"path"===G.type?((c=p.createElementNS(y.a.SVG,"path")).setAttributeNS(null,"d",G.path),c.setAttributeNS(null,"transform",k)):c=p.createElementNS(y.a.SVG,"rect"),c.setAttributeNS(null,"id","border")):(o=document.getElementById("borderG"),c=Object(u.n)("border"),"rect"!==G.type&&c.setAttributeNS(null,"transform",k)),c&&(c.setAttributeNS(null,"x",F),c.setAttributeNS(null,"y",U),c.setAttributeNS(null,"width",B),c.setAttributeNS(null,"height",j),c.setAttributeNS(null,"aWidth",M.width),c.setAttributeNS(null,"aHeight",M.height),c.setAttributeNS(null,"fill","none"),c.setAttributeNS(null,"stroke-width",a.borderWidth),c.setAttributeNS(null,"stroke",a.borderColor),c.setAttributeNS(null,"pointer-events","none")),r)){o.appendChild(c);var te=document.getElementById("Layer_0");te.after(o)}if((t.isCropMark||t.isSafeMark)&&(Te("#bleed").length&&Te("#bleed").remove(),(d=p.createElementNS(y.a.SVG,"g")).setAttributeNS(null,"id","bleed"),t.isCropMark&&(H=v*t.cropVal,G.x=F+H,G.y=U+H,G.width=B-2*H,G.height=j-2*H,G.cx=F,G.cy=U,G.cw=B,G.ch=j,"path"===G.type?(g=p.createElementNS(y.a.SVG,"path"),e.bleed_mark_data&&(g.setAttributeNS(null,"d",e.bleed_mark_data.path),L="scale("+(I=G.width/_.width)+","+(N=G.height/_.height)+") translate("+(G.x/I-_.x)+","+(G.y/N-_.y)+")",g.setAttributeNS(null,"transform",L),this.createShapeCropMark(e.bleed_mark_data.path,L))):(g=p.createElementNS(y.a.SVG,"rect"),this.createBleedMarks(G)),g.setAttributeNS(null,"id","cropMark"),g.setAttributeNS(null,"x",G.x),g.setAttributeNS(null,"y",G.y),g.setAttributeNS(null,"width",G.width),g.setAttributeNS(null,"height",G.height),g.setAttributeNS(null,"fill","none"),g.setAttributeNS(null,"stroke-width",1),g.setAttributeNS(null,"stroke","#FF0000"),g.setAttributeNS(null,"pointer-events","none"),g.setAttributeNS(null,"stroke-dasharray","4 2"),d.appendChild(g)),t.isSafeMark&&(z=v*t.safeVal,"path"===G.type?(f=p.createElementNS(y.a.SVG,"path"),e.shape_mark_data&&(f.setAttributeNS(null,"d",e.shape_mark_data.path),O=(B-2*H-2*z)/_.width,P=(j-2*H-2*z)/_.height,D=(F+H+z)/O-_.x,R=(U+H+z)/P-_.y),f.setAttributeNS(null,"transform","scale("+O+","+P+") translate("+D+","+R+")")):f=p.createElementNS(y.a.SVG,"rect"),f.setAttributeNS(null,"id","safeMark"),f.setAttributeNS(null,"x",F+H+z),f.setAttributeNS(null,"y",U+H+z),f.setAttributeNS(null,"width",B-2*H-2*z),f.setAttributeNS(null,"height",j-2*H-2*z),f.setAttributeNS(null,"fill","none"),f.setAttributeNS(null,"stroke-width",1),f.setAttributeNS(null,"stroke","#00FF00"),f.setAttributeNS(null,"pointer-events","none"),d.appendChild(f)),T.append(d)),document.getElementById("canvasGrid")){var ae=document.getElementById("canvasGrid").getElementsByTagName("rect")[0];ae&&(ae.setAttribute("x",s.getAttribute("x")),ae.setAttribute("y",s.getAttribute("y")),ae.setAttribute("width",s.getAttribute("width")),ae.setAttribute("height",s.getAttribute("height")))}if(r)G.height=j,G.width=B,G.x=F,G.y=U,this.addClipPath(G,q,k),this.addEngravePreview(q),this.addBackgroundElemToLayer(1);else{var re=document.getElementsByTagName("clipPath");Te(re).children().each((function(e,t){t.setAttribute("x",F),t.setAttribute("y",U),t.setAttribute("width",B),t.setAttribute("height",j),k&&t.setAttribute("transform",k)}))}l.findDefs().after(i),$t("bound_0")}},this.addMaterialPreview=function(e,t){var a=this.getNextId(),r=document.getElementById("bounds"),n=document.getElementById("svgcontent").getElementsByTagName("defs")[0].getElementsByTagName("pattern")[0];n&&n.parentNode.removeChild(n),"Small"===t||"Medium"===t||"Large"===t?r.getElementsByTagName("path")[0].setAttribute("fill","none"):"None"!==e.name?(l.setPatternDefs(a,e.file_name,600),r.getElementsByTagName("path")[0].setAttribute("fill","url(#"+a+")")):r.getElementsByTagName("path")[0].setAttribute("fill","#ffffff")},this.drawStickerBound=function(e,t,a){arguments.length>3&&void 0!==arguments[3]&&arguments[3];var r=arguments.length>4?arguments[4]:void 0;if(e){var n=document.getElementById("bounds");n.parentNode.removeChild(n);var i=document.getElementsByTagName("clipPath")[0];i&&i.parentNode.removeChild(i);var o=document.getElementById("engrave_0"),s=document.getElementById("drop_shadow");o&&o.parentNode.removeChild(o),s&&s.parentNode.removeChild(s);document.getElementById("background");var c=p.createElementNS(y.a.SVG,"filter");c.setAttribute("id","drop_shadow"),c.setAttribute("x","-50%"),c.setAttribute("y","-50%"),c.setAttribute("width","200%"),c.setAttribute("height","200%"),c.innerHTML='<feOffset result="offOut" in="SourceAlpha" dx="5" dy="5"></feOffset><feGaussianBlur result="blurOut" in="offOut" stdDeviation="5"></feGaussianBlur><feColorMatrix result="matrixOut" in="blurOut" type="matrix" values="1 0 0 0 0.2, 0 1 0 0 0.2, 0 0 1 0 0.2, 0 0 0 1 0"></feColorMatrix><feBlend in="SourceGraphic" in2="matrixOut" mode="normal"></feBlend>',Object(u.k)().appendChild(c);var d,g,f,v,b,A,_,E,C,x,w,k,I,N,O,P,D,R,L,M,B,j=JSON.parse(JSON.stringify(e)).print_area,F=550,U=550,V=0,G=0,q=1,H=JSON.parse(JSON.stringify(e.dimension)),z=0,W=0,Q=0,J={};(q=t.isCropMark?(Number(j.width)+2*t.cropVal)/(Number(j.height)+2*t.cropVal):Number(j.width)/Number(j.height))>1?U=F/q:F=U*q,G=(600-U)/2,V=(600-F)/2,t.isCropMark?(A=F/(Number(j.width)+2*t.cropVal),J.width=(Number(j.width)+2*t.cropVal)/F,J.height=(Number(j.height)+2*t.cropVal)/U):(A=F/Number(j.width),J.width=Number(j.width)/F,J.height=Number(j.height)/U),"rect"!==H.type&&(C=F/(E=Re.pathBBox(H.path)).width,x=U/E.height,w=V/C-E.x,k=G/x-E.y),(d=p.createElementNS(y.a.SVG,"g")).setAttributeNS(null,"id","bounds"),Jt.boundHeight=H.height=U,Jt.boundWidth=H.width=F,Jt.boundX=H.x=V,Jt.boundY=H.y=G,"path"===H.type?(g=p.createElementNS(y.a.SVG,"path")).setAttributeNS(null,"d",H.path):g=p.createElementNS(y.a.SVG,"rect"),g.setAttributeNS(null,"id","bound_"+z),0===h.length?h[S]=[]:h[S]||(h[S]=[]),h[S][z]=JSON.parse(JSON.stringify(J)),m[z]=JSON.parse(JSON.stringify(Jt)),V&&F&&(g.setAttributeNS(null,"x",V),g.setAttributeNS(null,"y",G),g.setAttributeNS(null,"width",F),g.setAttributeNS(null,"height",U),g.setAttributeNS(null,"aWidth",j.width),g.setAttributeNS(null,"aHeight",j.height),g.setAttributeNS(null,"isBleed",t.isCropMark||t.isSafeMark),g.setAttributeNS(null,"safeVal",t.safeVal),g.setAttributeNS(null,"cropVal",t.cropVal),g.setAttributeNS(null,"fill","#FFFFFF"),g.setAttributeNS(null,"stroke-width","0.5"),g.setAttributeNS(null,"stroke","#FF1493"),g.setAttributeNS(null,"pointer-events","all"),g.setAttributeNS(null,"filter","url(#drop_shadow)"),"path"===H.type?(I="scale("+C+","+x+") translate("+w+","+k+")",g.setAttributeNS(null,"transform",I),d.appendChild(g)):((_=this.conertSvgRectToPath(g,"bound_"+z)).setAttributeNS(null,"filter","url(#drop_shadow)"),"Small"!==r&&"Medium"!==r&&"Large"!==r||(_.setAttributeNS(null,"fill","none"),_.setAttributeNS(null,"stroke-width","0")),d.append(_))),(t.isCropMark||t.isSafeMark)&&(Te("#bleed").length&&Te("#bleed").remove(),(f=p.createElementNS(y.a.SVG,"g")).setAttributeNS(null,"id","bleed"),t.isCropMark&&(W=A*t.cropVal,H.x=V+W,H.y=G+W,H.width=F-2*W,H.height=U-2*W,H.cx=V,H.cy=G,H.cw=F,H.ch=U,"path"===H.type?((v=p.createElementNS(y.a.SVG,"path")).setAttributeNS(null,"d",H.path),N=H.width/E.width,O=H.height/E.height,P=H.x/N-E.x,D=H.y/O-E.y,v.setAttributeNS(null,"transform","scale("+N+","+O+") translate("+P+","+D+")")):(v=p.createElementNS(y.a.SVG,"rect"),this.createBleedMarks(H)),v.setAttributeNS(null,"id","cropMark"),v.setAttributeNS(null,"x",H.x),v.setAttributeNS(null,"y",H.y),v.setAttributeNS(null,"width",H.width),v.setAttributeNS(null,"height",H.height),v.setAttributeNS(null,"fill","none"),v.setAttributeNS(null,"stroke-width",1),v.setAttributeNS(null,"stroke","#FF0000"),v.setAttributeNS(null,"pointer-events","none"),v.setAttributeNS(null,"stroke-dasharray","4 2"),f.appendChild(v)),t.isSafeMark&&(Q=A*t.safeVal,"path"===H.type?((b=p.createElementNS(y.a.SVG,"path")).setAttributeNS(null,"d",H.path),R=(F-2*W-2*Q)/E.width,L=(U-2*W-2*Q)/E.height,M=(V+W+Q)/R-E.x,B=(G+W+Q)/L-E.y,b.setAttributeNS(null,"transform","scale("+R+","+L+") translate("+M+","+B+")")):b=p.createElementNS(y.a.SVG,"rect"),b.setAttributeNS(null,"id","safeMark"),b.setAttributeNS(null,"x",V+W+Q),b.setAttributeNS(null,"y",G+W+Q),b.setAttributeNS(null,"width",F-2*W-2*Q),b.setAttributeNS(null,"height",U-2*W-2*Q),b.setAttributeNS(null,"fill","none"),b.setAttributeNS(null,"stroke-width",1),b.setAttributeNS(null,"stroke","#00FF00"),b.setAttributeNS(null,"pointer-events","none"),f.appendChild(b)),T.append(f)),H.height=U,H.width=F,H.x=V,H.y=G,this.addClipPath(H,z,I),this.addEngravePreview(z),this.addBackgroundElemToLayer(1),l.findDefs().after(d),$t("bound_0",!0)}};var $t=this.selectCurrentBoundary=function(e,t,a){if(x=a||x,e&&!isNaN(parseInt(e.split("_")[1]))){var r=document.getElementById("bounds").getElementsByTagName("path");b=parseInt(e.split("_")[1]);for(var n=0,i=r.length;n<i;n++)if(r[n].getAttribute("id")===e){Jt.boundHeight=Number(r[n].getAttribute("height")),Jt.boundWidth=Number(r[n].getAttribute("width")),l.selectedBoundX=Jt.boundX=Number(r[n].getAttribute("x")),l.selectedBoundY=Jt.boundY=Number(r[n].getAttribute("y")),m[b]=Jt;var o=t?"#FF1493":x;r[n].setAttribute("stroke",o),l.aWidth=Number(r[n].getAttribute("aWidth")),l.aHeight=Number(r[n].getAttribute("aHeight"))}else r[n].setAttribute("stroke","#000000");l.setAlignLines(Jt.boundX,Jt.boundY,Jt.boundWidth,Jt.boundHeight),G("Layer_"+b),De.EventEmitter.dispatch(De.Events.CALCULATE_EXACT_PRICE)}};this.conertSvgRectToPath=function(e,t){var a,r,n,i=parseFloat(e.getAttribute("x"))+parseFloat(0),o=parseFloat(e.getAttribute("y"))+parseFloat(0),s=parseFloat(e.getAttribute("width")),l=parseFloat(e.getAttribute("height"));return n="M"+i+" "+o+" "+("L"+(a=i+s)+" "+o+" ")+("L"+a+" "+(l+o)+" ")+("L"+i+" "+(l+o)+" ")+" Z",(r=document.createElementNS(y.a.SVG,"path")).setAttribute("d",n),r.setAttribute("x",i),r.setAttribute("y",o),r.setAttribute("width",s),r.setAttribute("height",l),r.setAttribute("aWidth",e.getAttribute("aWidth")),r.setAttribute("aHeight",e.getAttribute("aHeight")),r.setAttribute("fill",e.getAttribute("fill")),r.setAttribute("stroke",e.getAttribute("stroke")),r.setAttribute("isBleed",e.getAttribute("isBleed")),r.setAttribute("safeVal",e.getAttribute("safeVal")),r.setAttribute("cropVal",e.getAttribute("cropVal")),r.setAttribute("stroke-miterlimit",e.getAttribute("stroke-miterlimit")),r.setAttribute("stroke-width",e.getAttribute("stroke-width")),r.setAttribute("pointer-events","all"),r.setAttribute("id",t),r.setAttribute("xe_id",t),e.getAttribute("transform")&&r.setAttribute("transform",e.getAttribute("transform")),e.getAttribute("stroke-dasharray")&&r.setAttribute("stroke-dasharray","5"),r},this.placeElementOnStage=function(e,t,a){var r=e||l.getBounds().width-5,n=t||l.getBounds().height-5;if(!r||r<=0)console.warn("Issue in print area setup!",r);else{var i=l.getActiveObject()[0],o=l.getBBox(i),s=o.width/o.height;!e&&r>n&&s<r/n&&(r=n),s>1?l.scaleSelectedElements(r/o.width,r/o.width):l.scaleSelectedElements(r/o.height,r/o.height),e&&!a||(l.alignSelectedElements("m","page"),l.alignSelectedElements("c","page"))}},this.resizeBackground=function(){var e=l.getBounds(),t=l.getCurrentLayerElems().filter((function(e){return"background"===e.id}))[0];if(e&&(null===t||void 0===t?void 0:t.prefs)){var a=document.getElementById("background");a.setAttribute("x",e.x),a.setAttribute("y",e.y),a.setAttribute("width",e.width),a.setAttribute("height",e.height),(null===t||void 0===t?void 0:t.children)&&Object(f.a)(t.children).forEach((function(t){if("rect"===t.nodeName){var a=t.getAttribute("id"),r=document.getElementById(a);r.setAttribute("x",e.x),r.setAttribute("y",e.y),r.setAttribute("width",e.width),r.setAttribute("height",e.height)}}))}};this.loadTemplate=function(e,t,a,r,n,i){var o=decodeURIComponent(e);We(!0);var s=document.getElementById("masks");s&&s.remove(),function(e,t,a,r,n){try{var i=!1,o=document.getElementsByClassName("layer"),s="",c="",u="",d=Te.parseXML(e);(s=Te(d)).find("g").each((function(){this.id?Kt(this):this.id=qe()}));for(var h=!1,g=d.getElementsByTagName("defs")[0].getElementsByTagName("pattern"),f="",v=0;v<g.length;v++)f+=g[v].outerHTML;if(l.findDefs().innerHTML+=f,a&&!_){u=Wt(),c=s.find('g[id="Layer_0"]').children(),Te(u).html(c);for(var A=0,E=c.length;A<E;A++){if(c[A]&&c[A].prefs&&"text"===c[A].prefs.type&&c[A].prefs.fill&&"#"!==c[A].prefs.fill[0]){var S=c[A].prefs.fill,C=r+"color_palettes/"+(S=(S=S.replace("url(#","")).replace(")",""));l.setPatternDefs(S,C)}if(c[A]&&c[A].prefs&&"text"===c[A].prefs.type&&c[A].hasAttribute("transform")&&(h=!0),c[A]&&c[A].prefs&&"image"===c[A].prefs.type&&"mask"===c[A].prefs.imgSelectionType){var x=c[A].getAttribute("id"),w="mask_"+x,k="preview_"+x,I=s.find('[id="'+w+'"]')[0],N=s.find('[id="'+k+'"]')[0];if(i=!0,document.getElementById(k)){l.findDefs().innerHTML+=I.outerHTML;var O=void 0;if(document.getElementById("masks"))O=document.getElementById("masks");else{(O=p.createElementNS(y.a.SVG,"g")).setAttributeNS(null,"id","masks");var P=l.getLayerName(),D=Number(P.split("_")[1]);O.setAttribute("clip-path","url(#bound_"+D+")"),document.getElementById("background").after(O)}N&&(O.innerHTML+=N.outerHTML)}}}l.selectAllInCurrentLayer();var R=ge.filter((function(e){return"background"===e.id}))[0];l.removeFromSelection([R]);var T=ge[0];if(T){if(l.groupSelectedElements(),(T=ge[0]).setAttribute("type","template"),3===c.length&&i){var L=T&&T.children.length?T.children[0].getAttribute("clip-path"):"";L&&(T.setAttribute("clip-path",L),T.children[0].setAttribute("clip-path",""))}T.setAttribute("pointer-events","bounding-box"),T.prefs={type:"template",edit:!!a,price:0,colors:t},h?(l.alignSelectedElements("m","page"),l.alignSelectedElements("c","page")):i?ze("changed",[]):l.placeElementOnStage()}}else{for(var M=0,B=o.length;M<B;M++){c=s.find('g[id="Layer_'+M+'"]').children(),Te("#svgcanvas").find('g[id="Layer_'+M+'"]').html(c);for(var j=0,F=c.length;j<F;j++){if(n&&c[j].getAttribute("id")){var U=l.getLayerName();if(U){var V="url(#engrave_"+Number(U.split("_")[1])+")";c[j].setAttribute("filter",V)}}if(c[j]&&c[j].prefs&&"text"===c[j].prefs.type&&c[j].prefs.fill&&"#"!==c[j].prefs.fill[0]){var G=c[j].prefs.fill,q=r+"color_palettes/"+(G=(G=G.replace("url(#","")).replace(")",""));l.setPatternDefs(G,q)}if(c[j]&&c[j].prefs&&"text"===c[j].prefs.type&&c[j].hasAttribute("transform")&&(h=!0),c[j]&&c[j].prefs&&"image"===c[j].prefs.type&&"mask"===c[j].prefs.imgSelectionType){i=!0;var H=c[j].getAttribute("id"),z="mask_"+H,W="preview_"+H,Q=s.find('[id="'+z+'"]')[0],J=s.find('[id="'+W+'"]')[0];if(document.getElementById(W)){l.findDefs().innerHTML+=Q.outerHTML;var Y=void 0;if(document.getElementById("masks"))Y=document.getElementById("masks");else{(Y=p.createElementNS(y.a.SVG,"g")).setAttributeNS(null,"id","masks");var Z=l.getLayerName(),X=Number(Z.split("_")[1]);Y.setAttribute("clip-path","url(#bound_"+X+")"),document.getElementById("background").after(Y)}J&&(Y.innerHTML+=J.outerHTML)}}}}l.selectAllInCurrentLayer();var K=l.getSelectedElems()[0],$=m[b].boundWidth,ee=m[b].boundHeight;if(K){var te=K.getBBox(),ae=$/ee,re=te.width/te.height;ae<re||ae<1&&re>=1?$/te.width:ee/te.height,l.groupSelectedElements(),i||h||l.placeElementOnStage(),l.ungroupSelectedElement(),We(!0)}}l.resizeBackground()}catch(A){return console.log("importStateSvgString --- error",A),!1}}(o,t,a,n,i),r&&r(!1)},this.loadPreDecoTemplate=function(e,t){decodeURIComponent(e)},this.getCurrentLayerElems=function(e){var t=[];return e||(e=this.getLayerStage()),Te(e).children().each((function(e,a){a.prefs&&t.push(a)})),t.reverse()},this.getAllStageElems=function(){var e=[],t=Te(K).children();return Te(t).children().each((function(t,a){a.prefs&&e.push(a)})),e},this.clearCurrentLayer=function(){var e=ee().getCurrentLayer();if(e){var t=Te(ce||e).children();dt="select",t.length>1&&t.each((function(e,t){t.prefs&&("background"===t.prefs.type?(t.prefs=null,Te(t).empty(),l.clearSelection()):(Nt([t]),l.deleteSelectedElements(!0)))}))}},this.clearAll=function(e){var t=Te(K).children(),a=!1;Te(t).children().each((function(e,t){"metadata"!==t.tagName&&"defs"!==t.tagName?t.prefs&&("background"===t.prefs.type?(t.prefs=null,Te(t).empty(),a=!0,l.clearSelection()):(Nt([t],!1,!0),l.deleteSelectedElements(!0))):t.remove()})),a&&e&&e(),De.EventEmitter.dispatch(De.Events.CALCULATE_EXACT_PRICE)},this.calculateImageRating=function(e){if("image"===e.prefs.type&&(!e.prefs.imgType||"svg"!==e.prefs.imgType)&&e.prefs.resStatus&&e.prefs.maxScaleHt&&!window.isTemplate){var t=!1,a=l.getBBox(e),r=parseFloat(a.width/e.prefs.perInchWPx),n=parseFloat(a.height/e.prefs.perInchWPx),i=Number(r).toFixed(2)-Number(e.prefs.maxScaleWt),o=Number(n).toFixed(2)-Number(e.prefs.maxScaleHt),s=i>o?i:o;(s=Number(s.toFixed(2)))>.1&&(t=!0),Ge.showImageRatingIcon(e,t),t||De.EventEmitter.dispatch(De.Events.OPEN_WARNING_POPUP,!1)}},this.detectCropElement=function(e){var t=document.getElementById("bounds").getBoundingClientRect(),a=e.getBoundingClientRect();t.top<=a.top&&a.top<=t.bottom&&t.top<=a.bottom&&a.bottom<=t.bottom&&t.left<=a.left&&a.left<=t.right&&t.left<=a.right&&a.right<=t.right?this.showCropElementWarningMessage(!1):this.showCropElementWarningMessage(!0),this.detectCropForAllStageElement(t)},this.detectCropForAllStageElement=function(e){var t=l.getAllStageElems(),a=!1;t.length>=1?t.forEach((function(t,r){var n=t.getBoundingClientRect();e.top<=n.top&&n.top<=e.bottom&&e.top<=n.bottom&&n.bottom<=e.bottom&&e.left<=n.left&&n.left<=e.right&&e.left<=n.right&&n.right<=e.right||(a=!0)})):this.showCropElementWarningMessage(!1),a&&De.EventEmitter.dispatch(De.Events.CROP_ELEMENT_STATUS,!0)},this.showCropElementWarningMessage=function(e){De.EventEmitter.dispatch(De.Events.SHOW_CROP_ELEMENT_POPUP,e),Ge.showIconForElementOutOfBoundary(e),De.EventEmitter.dispatch(De.Events.CROP_ELEMENT_STATUS,e)},this.setDesignAreaWarning=function(e){w=e},this.getActiveObject=function(){return ge.filter(Boolean)},this.setOrderOptionView=function(e){E=e},this.setIsFormEdit=function(e){A=e},this.getIsFormEdit=function(){return A},this.scaleSelectedElements=function(e,t,a){var r;a?(ge[0]=a,r=a):r=ge[0];var n=Object(se.b)(r);ct=!0;var i=this.getBBox(Te("#selectedBox0")[0]),o={};Te.each(i,(function(e,t){o[e]=t/le})),i=o;var s=Object(u.r)(r)?1:0;Object(oe.b)(n)?(n.insertItemBefore(T.createSVGTransform(),s),n.insertItemBefore(T.createSVGTransform(),s),n.insertItemBefore(T.createSVGTransform(),s)):(n.appendItem(T.createSVGTransform()),n.appendItem(T.createSVGTransform()),n.appendItem(T.createSVGTransform()));var l=Object(oe.b)(n),c=l?i:this.getBBox(r),d=c.x,p=c.y,m=c.width,h=c.height,g=e,f=t,v=Object(u.r)(r);if(v){var b=Math.sqrt(g*g+f*f),A=Math.atan2(f,g)-v*Math.PI/180;g=b*Math.cos(A),f=b*Math.sin(A)}var y,_;_=e,y=t;var E=T.createSVGTransform(),S=T.createSVGTransform(),C=T.createSVGTransform();if(E.setTranslate(-(d+0),-(p+0)),S.setScale(_,y),C.setTranslate(d+0,p+0),l){var x=v?1:0;n.replaceItem(E,2+x),n.replaceItem(S,1+x),n.replaceItem(C,0+x)}else{var w=n.numberOfItems;n.replaceItem(C,w-3),n.replaceItem(S,w-2),n.replaceItem(E,w-1)}Ge.requestSelector(r).resize(),ze("transition",ge),null!=ge[0]&&wt(),ct=!1},this.scaleText=function(e){var t=ge[0],a=Object(se.b)(t);ct=!0;var r=this.getBBox(Te("#selectedBox0")[0]),n={};Te.each(r,(function(e,t){n[e]=t/le})),r=n;var i=Object(u.r)(t)?1:0;Object(oe.b)(a)?(a.insertItemBefore(T.createSVGTransform(),i),a.insertItemBefore(T.createSVGTransform(),i),a.insertItemBefore(T.createSVGTransform(),i)):(a.appendItem(T.createSVGTransform()),a.appendItem(T.createSVGTransform()),a.appendItem(T.createSVGTransform()));var o=Object(oe.b)(a),s=o?r:this.getBBox(t),l=s.x,c=s.y,d=s.width,p=(s.height,0),m=0,h=Object(u.r)(t);if(h){var g=Math.sqrt(p*p+m*m),f=Math.atan2(m,p)-h*Math.PI/180;p=g*Math.cos(f),m=g*Math.sin(f)}var v;v=e;var b=T.createSVGTransform(),A=T.createSVGTransform(),y=T.createSVGTransform();if(b.setTranslate(-(l+0),-(c+0)),A.setScale(v,v),y.setTranslate(l+0,c+0),o){var _=h?1:0;a.replaceItem(b,2+_),a.replaceItem(A,1+_),a.replaceItem(y,0+_)}else{var E=a.numberOfItems;a.replaceItem(y,E-3),a.replaceItem(A,E-2),a.replaceItem(b,E-1)}Ge.requestSelector(t).resize(),ze("transition",ge),null!=ge[0]&&wt(),ct=!1},this.scaleElem=function(e,t,a){var r=this.getBBox(e).width,n=this.getBBox(e).height;t||(t=m[b].boundWidth),a||(a=m[b].boundHeight);var i,o=t/a,s=r/n;i="translate(0) "+(i=o<s||o<1&&s>=1?"scale("+t/r+")":"scale("+a/n+")")+" translate(0)",e.setAttribute("transform",i),wt()},this.rotateElem=function(e,t,a,r,n){if(e=parseFloat(e),t){a||(a=!1);var i,o,s=this.getBBox(t);a?(i=s.x,o=s.y):(i=s.x+s.width/2,o=s.y+s.height/2),r&&n&&(i=r,o=n);var l=Object(se.b)(t);if(l.numberOfItems>0)4==l.getItem(0).type&&l.removeItem(0);if(0!=e){var c=Object(oe.i)(i,o,Object(oe.h)(l).matrix),u=T.createSVGTransform();u.setRotate(e,c.x,c.y),l.numberOfItems?l.insertItemBefore(u,0):l.appendItem(u)}else 0==l.numberOfItems&&t.removeAttribute("transform")}},this.translateElem=function(e,t,a){Ht("transform","translate("+t+", "+a+")",[e])};this.resizeStage=function(){if(this.getBoundDimensions()){var e=Te("#workarea").width(),t=Te("#workarea").height(),a=this.getBoundDimensions(),r=a.boundHeight,n=a.boundWidth,i=0;E&&((e=Te("#canvas_wrap").width())?e>600&&(e=600):e=500,t=e),(i=t<=e?t/600:t>e?e/600:1)||(i=1),Te("#svgcanvas").css({"-webkit-backface-visibility":"hidden !important","-webkit-transform":"translate3d(0px,0px, 0px) scale3d("+i+","+i+","+i+")","-moz-transform":"translate3d(0px,0px, 0px) scale3d("+i+","+i+","+i+")","-ms-transform":"translate3d(0px,0px, 0px) scale3d("+i+","+i+","+i+")","-o-transform":"translate3d(0px,0px, 0px) scale3d("+i+","+i+","+i+")","-transform":"translate3d(0px,0px, 0px) scale3d("+i+","+i+","+i+")",zoom:"100%"}),e>=350&&(Te("#stage_image").children().css({"-webkit-backface-visibility":"hidden !important","-webkit-transform":"translate3d(0px, 0px, 0px) scale3d("+i+","+i+","+i+")","-moz-transform":"translate3d(0px, 0px, 0px) scale3d("+i+","+i+","+i+")","-ms-transform":"translate3d(0px, 0px, 0px) scale3d("+i+","+i+","+i+")","-o-transform":"translate3d(0px, 0px, 0px) scale3d("+i+","+i+","+i+")","-transform":"translate3d(0px, 0px, 0px) scale3d("+i+","+i+","+i+")"}),Ge.setScale(i),Ge.initGroup(),ft=Ge.getRubberBandBox()),Te("#stage_image_wrap").children().css({"-webkit-backface-visibility":"hidden !important","-webkit-transform":"translate3d(1px, 1px, 0px) scale3d( 1,1,1 )","-moz-transform":"translate3d(1px, 1px, 1px) scale3d( 1,1,1 )","-ms-transform":"translate3d(1px, 1px, 0px) scale3d( 1,1,1 )","-o-transform":"translate3d(1px, 1px, 0px) scale3d( 1,1,1 )","-transform":"translate3d(1px, 1px, 0px) scale3d( 1,1,1 )"}),I&&(Ge.setScale(1),Ge.initGroup(),ft=Ge.getRubberBandBox()),k=i,this.setAlignLines(a.boundX,a.boundY,n,r)}},this.resizeProductImage=function(e){var t=600,a=600,r=document.getElementById("stage_image_wrap"),n=r.getElementsByTagName("img")[0].getAttribute("src"),i=new Image;i.onload=function(){var e=i.width/i.height;i.width>i.height?a=t/e:i.height>i.width&&(t=a*e),r&&r.getElementsByTagName("img")[0]&&(r.getElementsByTagName("img")[0].setAttribute("width",t),r.getElementsByTagName("img")[0].setAttribute("height",a))},i.src=n;var o=document.getElementById("configurator_image-loader");if(o){o.setAttribute("width",t),o.setAttribute("height",a);for(var s=0;s<o.children.length;s++)o.getElementsByTagName("g")[s].getElementsByTagName("image")[0].setAttribute("width",t),o.getElementsByTagName("g")[s].getElementsByTagName("image")[0].setAttribute("height",a);setTimeout((function(){document.getElementById("bounds").removeAttribute("display")}),1e3)}},this.scaleBoundary=function(e,t){var a,r=Te("#svgcanvas").width(),n=Te("#svgcanvas").height(),i=Te("#stage_image_wrap").width(),o=Te("#stage_image_wrap").height(),s=this.getBoundDimensions(),c=s.boundHeight,d=s.boundWidth,p=1,m=1,h=null,g=null,f=0,v=0,b=0,A=0;switch(t){case"selection":if(!ge[0])return;var y=Te.map(ge,(function(e){if(e)return e}));a=Object(u.t)(y);break;case"bounds":this.getBoundDimensions();a={width:d,height:c,x:s.boundX,y:s.boundY};break;case"designs":a=l.getStrokedBBox(l.getCurrentLayerElems());break;case"layer":a=Object(u.t)(Object(u.v)(ee().getCurrentLayer()))}if(I=e,e&&a){var _=r/a.width;a.height>a.width&&(_=r/a.height),a.width>a.height&&(_=n/a.width),m=p=_>1?_:2,p*=k,f=(r/2-(a.x+a.width/2))*p,v=(n/2-(a.y+a.height/2))*p,b=(r/2-(a.x+a.width/2))*m,A=(n/2-(a.y+a.height/2))*m,i>o?(h=b*(o/600||1),g=A*(o/600||1)):(h=b*(i/600||1),g=A*(i/600||1))}else p=k,m=1,f=1,v=1;Te("#svgcanvas").css({"-webkit-backface-visibility":"hidden !important","-webkit-transform":"translate3d("+f+"px,"+v+"px, 0px) scale3d("+p+","+p+","+p+")","-moz-transform":"translate3d("+f+"px,"+v+"px, 0px) scale3d("+p+","+p+","+p+")","-ms-transform":"translate3d("+f+"px,"+v+"px, 0px) scale3d("+p+","+p+","+p+")","-o-transform":"translate3d("+f+"px,"+v+"px, 0px) scale3d("+p+","+p+","+p+")","-transform":"translate3d("+f+"px,"+v+"px, 0px) scale3d("+p+","+p+","+p+")"}),Te("#stage_image_wrap").children().css({"-webkit-backface-visibility":"hidden !important","-webkit-transform":"translate3d("+(h||f)+"px,"+(g||v)+"px, 0px) scale3d("+m+","+m+","+m+")","-moz-transform":"translate3d("+(h||f)+"px,"+(g||v)+"px, 0px) scale3d("+m+","+m+","+m+")","-ms-transform":"translate3d("+(h||f)+"px,"+(g||v)+"px, 0px) scale3d("+m+","+m+","+m+")","-o-transform":"translate3d("+(h||f)+"px,"+(g||v)+"px, 0px) scale3d("+m+","+m+","+m+")","-transform":"translate3d("+(h||f)+"px,"+(g||v)+"px, 0px) scale3d("+m+","+m+","+m+")"}),Ge.setScale(m),Ge.initGroup(),ft=Ge.getRubberBandBox(),this.setAlignLines(s.boundX,s.boundY,d,c)};this.setPatternDefs=function(e,t,a){var r=a||40,n=p.createElementNS(y.a.SVG,"pattern");n.setAttribute("id",e),n.setAttribute("patternUnits","userSpaceOnUse"),n.setAttribute("x",0),n.setAttribute("y",0),n.setAttribute("width",r),n.setAttribute("height",r);var i=p.createElementNS(y.a.SVG,"image");i.setAttribute("xmlns:xlink",y.a.XLINK),i.setAttribute("id",this.getNextId()),i.setAttribute("x",0),i.setAttribute("y",0),i.setAttribute("width",r),i.setAttribute("height",r),Object(u.A)(i,t),n.appendChild(i),Object(u.k)().appendChild(n)},this.getBoundDimensions=function(){return m[b]},this.getPxToInch=function(){return h[S][b]},this.setFillStrokeProperty=function(e){Qt=e},this.convertToBase64=function(e,t,a){var r=new XMLHttpRequest;r.responseType="blob",r.onload=function(){var e=new FileReader;e.onloadend=function(){a(this,t)},e.readAsDataURL(r.response)},r.open("GET",e),r.send()},this.convertToString=function(){var e=Object(o.a)(i.a.mark((function e(t,a,r){var n,o,s,l,c,u=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=K.cloneNode(!0),o=0,s=0,t&&(n.innerHTML=t),l=n.getElementsByTagName("image"),e.next=5,this.checkStageImage(n);case 5:if(e.sent||(l=[]),0!==l.length){e.next=11;break}return e.abrupt("return",this.svgCanvasToString(r));case 11:return(c=Te(n).find("#bounds")[0])&&!a&&c.setAttribute("display","none"),this.propertyToAttribute(Te(K),"xe-props"),e.abrupt("return",new Promise((function(e){for(var t=0;t<l.length;t++){var a=l[t].getAttribute("xlink:href");"#"!==a&&(o++,u.convertToBase64(a,t,function(t,a){s++,n.getElementsByTagName("image")[a].setAttribute("xlink:href",t.result),o==s&&e(n.outerHTML)}.bind(u)))}})));case 15:case"end":return e.stop()}}),e,this)})));return function(t,a,r){return e.apply(this,arguments)}}(),this.checkStageImage=function(e){return new Promise((function(t){var a,r=(e||document.getElementById("svgcontent")).getElementsByTagName("image");if(r.length>0)for(var n=0;n<r.length;n++){if(a=r[n].getAttribute("xlink:href").match(/[^/]+(jpg|png|svg)$/))break}t(a)}))},this.setElementDimension=function(e,t){var a=l.getActiveObject();if(a.length){l.selectAllInCurrentLayer(),this.groupSelectedElements();var r,n,i=l.getActiveObject(),o="";if(i){if(!(o=l.getStrokedBBox(i,!0)))return;var s=l.getPxToInch();r=(o.width*s.width).toFixed(2),n=(o.height*s.height).toFixed(2);var c=(o.width/r*e).toFixed(2),u=(o.height/n*t).toFixed(2);c>550&&(c=550),u>550&&(u=550),l.scaleElem(i[0],c,u),this.ungroupSelectedElement(),We(),Qe([a[0]]),this.groupSelectedElements(),this.ungroupSelectedElement(),l.alignSelectedElements("m","page"),l.alignSelectedElements("c","page")}}},this.getElemDimension=function(){var e=this;return new Promise((function(t){var a=l.getActiveObject(),r={dimensionWidth:0,dimensionHeight:0},n=l.getCurrentLayerElems();if(a.length||n.length&&(Qe([n[0]]),a=l.getActiveObject()),a.length){n.length>1&&(l.selectAllInCurrentLayer(!0),l.groupSelectedElements());var i,o,s=l.getActiveObject(),c="";if(s){if(!(c=l.getStrokedBBox(s,!0)))return;0===c.width&&a[0]&&(c=a[0].getBBox());var u=l.getPxToInch();i=(c.width*u.width).toFixed(2),o=(c.height*u.height).toFixed(2),n.length>1&&(e.ungroupSelectedElement(),We(),Qe([a[0]])),r={dimensionWidth:i,dimensionHeight:o}}}else{var d=document.getElementById("background"),p="";if(d){if(!(p=d.getBBox()))return;var m=l.getPxToInch();r={dimensionWidth:(p.width*m.width).toFixed(2),dimensionHeight:(p.height*m.height).toFixed(2)}}}t(r)}))},this.updateDimensionLabel=function(e){try{Te("#dimensionLabel, #dimensionRect").hide();var t,a,r,n=l.getActiveObject();if(!(t=l.getStrokedBBox(n,!0)))return;Te("#dimensionLabel, #dimensionRect").show();var i=l.getPxToInch();a=(t.width*i.width).toFixed(2),r=(t.height*i.height).toFixed(2),Te("#dimensionLabel").html(a+" "+e+" x "+r+" "+e),Te("#dimensionLabel").attr("x",-2),Te("#dimensionRect").attr("x",-4),Te("#dimensionRect").attr("width",Te("#dimensionLabel")[0].getBBox().width+4)}catch(o){}},this.showHideBounds=function(e){var t=document.querySelectorAll("[id=svgcontent]"),a=t[0].getElementById("bounds");(a||t[1]&&(a=t[1].getElementById("bounds")))&&(e?a.setAttribute("display","none"):a.removeAttribute("display"))},this.checkImageUrl=function(e){var t=p.createElementNS(y.a.SVG,"svg");return t.innerHTML=e,new Promise((function(e){var a,r=t.getElementsByTagName("image");if(r.length>0)for(var n=0;n<r.length;n++){if(a=r[n].getAttribute("xlink:href").match(/[^/]+(jpg|png|svg)$/))break}e(a)}))},this.decodeXeprops=function(e){if(e)return JSON.parse(Object(u.G)("XE801",e))},this.encodeXeprops=function(e){if(e)return Object(u.H)("XE801",JSON.stringify(e))},this.setIsTemplateEdit=function(e){_=e},this.getIsTemplateEdit=function(){return _},this.getSvgDoc=function(){return p};this.getElemsBounds=function(){var e=l.getStrokedBBox(l.getCurrentLayerElems()),t=this.getBoundDimensions(),a=t.boundHeight,r=t.boundWidth,n=t.boundX,i=t.boundY;return O={},e&&(e.x<n&&e.y<i&&e.x+e.width<n+r&&e.y+e.height<i+a?(O.width=e.x+e.width-n,O.height=e.y+e.height-i):e.x<n&&e.y<i&&e.x+e.width<n+r&&e.y+e.height>i+a?(O.width=e.x+e.width-n,O.height=a):e.x<n&&e.y<i&&e.x+e.width>n+r&&e.y+e.height<i+a?(O.width=r,O.height=e.y+e.height-i):e.x<n&&e.y>i&&e.x+e.width<n+r&&e.y+e.height<i+a?(O.width=e.x+e.width-n,O.height=e.height):e.x<n&&e.y>i&&e.x+e.width>n+r&&e.y+e.height<i+a?(O.width=r,O.height=e.height):e.x<n&&e.y>i&&e.x+e.width<n+r&&e.y+e.height>i+a?(O.width=e.x+e.width-n,O.height=e.height-(e.y+e.height-(i+a))):e.x<n&&e.y>i&&e.x+e.width>n+r&&e.y+e.height>i+a?(O.width=r,O.height=e.height-(e.y+e.height-(i+a))):e.x>n&&e.y<i&&e.x+e.width<n+r&&e.y+e.height<i+a?(O.width=e.width,O.height=e.y+e.height-i):e.x>n&&e.y<i&&e.x+e.width>n+r&&e.y+e.height<i+a?(O.width=e.width-(e.x+e.width-(n+r)),O.height=e.y+e.height-i):e.x>n&&e.y<i&&e.x+e.width<n+r&&e.y+e.height>i+a?(O.width=e.width,O.height=a):e.x>n&&e.y<i&&e.x+e.width>n+r&&e.y+e.height>i+a?(O.width=e.width-(e.x+e.width-(n+r)),O.height=a):e.x>n&&e.y>i&&e.x+e.width>n+r&&e.y+e.height<i+a?(O.width=e.width-(e.x+e.width-(n+r)),O.height=e.height):e.x>n&&e.y>i&&e.x+e.width>n+r&&e.y+e.height>i+a?(O.width=e.width-(e.x+e.width-(n+r)),O.height=e.height-(e.y+e.height-(i+a))):e.x>n&&e.y>i&&e.x+e.width<n+r&&e.y+e.height>i+a?(O.width=e.width,O.height=e.height-(e.y+e.height-(i+a))):e.x<n&&e.y<i&&e.x+e.width>n+r&&e.y+e.height>i+a?(O.width=r,O.height=a):(O.width=e.width,O.height=e.height)),O};this.validURL=function(e){return!!new RegExp("^(https?:\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","i").test(e)},this.setDrawingType=function(e){At=e},this.setCurrentSideIdx=function(e){S=Number(e)},this.clearDimensionInInch=function(){S=0,h=[]},this.setBoundryColor=function(e){x=e},this.exactGraphicsArea=function(){return R},this.renderAllImages=function(e,t){for(var a in 0===e.length&&t(),e){if(isNaN(a))return;(new Image).onload=function(a){a=parseInt(a);var r=e[a].getAttribute("xlink:href");r=r.replace(/^"(.+(?="$))"$/,"$1");var n=new Image;n.crossOrigin="anonymous",n.removeAttribute("crossOrigin"),r.match(/^https?:\/\/|^\/\//)&&n.setAttribute("crossOrigin","anonymous"),n.width=e[a].getAttribute("width"),n.height=e[a].getAttribute("height"),n.onload=function(){var e=document.createElement("canvas"),r=e.getContext("2d");if(e.height=600,e.width=600,n){r.clearRect(0,0,e.width,e.height),r.drawImage(n,0,0,e.width,e.height);var i=ea.getElementsByTagName("image");i[a].setAttribute("xlink:href",e.toDataURL()),t&&a==i.length-1&&t()}},n.src=r}(a)}};var ea="";this.extractAlphaPx=function(){var e=p.createElementNS("http://www.w3.org/2000/svg","svg");e.innerHTML=document.getElementById("svgroot").outerHTML;var t=e.cloneNode(!0),a=t.getElementById("gridpattern");a&&a.remove();var r=t.getElementsByTagName("image"),n=0,i=t.getElementById("background");i&&i.hasChildNodes()&&(n=parseFloat(m[b].boundWidth*m[b].boundHeight),i.remove()),ea=t,this.renderAllImages(r,(function(){var e=ea.querySelector("#bounds");if(e){e.remove(),ea.querySelector("#selectorParentGroup").remove(),ea.querySelector("#canvasBackground").remove();for(var t=ea.getElementsByClassName("layer"),a=0;a<t.length;a++)t[a].getAttribute("id")!==ee().getCurrentLayer().id&&t[a].remove();var r=(new XMLSerializer).serializeToString(ea),i=new Image,o=document.getElementById("cCanvas");if(o){o.width=600,o.height=600,document.body.appendChild(o);var s=o.getContext("2d");i.onload=function(){s.drawImage(i,0,0,600,600);var e=o.toDataURL("image/png");e=e.replace(/^"(.+(?="$))"$/,"$1");var t=new Image;t.crossOrigin="anonymous",t.removeAttribute("crossOrigin"),e.match(/^https?:\/\/|^\/\//)&&t.setAttribute("crossOrigin","anonymous"),t.width=600,t.height=600,t.onload=function(){var e={totalPx:0,alphaPx:0,ratio:0},a=document.createElement("canvas"),r=a.getContext("2d");if(t){a.height=600,a.width=600;var i,o=0;r.clearRect(0,0,a.width,a.height),r.drawImage(t,0,0,a.width,a.height);var s=r.getImageData(0,0,a.height,a.width);i=s.data;for(var l=0;l<i.length;l+=4)0==i[l+0]&&0==i[l+1]&&0==i[l+3]&&0==i[l+3]&&o++;r.putImageData(s,0,0),e.totalPx=36e4,e.alphaPx=o-n,e.ratio=parseFloat(o/i.length),e.currSidePx=e.totalPx-e.alphaPx,e.graphicsArea=Zt[S][b].print_area.width*Zt[S][b].print_area.height/parseFloat(m[b].boundWidth*m[b].boundHeight)*e.currSidePx,R=e.graphicsArea,ge[0]&&ge[0].prefs?De.EventEmitter.dispatch(De.Events.SELECT_STAGE_ELEMS,ge[0]):De.EventEmitter.dispatch(De.Events.SELECT_STAGE_ELEMS,null)}},t.src=e},i.src="data:image/svg+xml;base64,"+window.btoa(r)}}}))},this.getPrivateMethods=function(){return{addCommandToHistory:we,BatchCommand:Fe,ChangeElementCommand:je,decode64:u.h,dropXMLInteralSubset:u.i,encode64:u.j,ffClone:xt,findDefs:u.k,findDuplicateGradient:Gt,getElem:u.n,getPathBBox:u.p,getTypeMap:d.d,getUrlFromAttr:u.u,identifyLayers:j,InsertElementCommand:Me,isChrome:c.a,isIdentity:oe.c,isIE:c.c,logMatrix:kt,MoveElementCommand:Le,NS:y.a,preventClickDefault:u.y,RemoveElementCommand:Be,SVGEditTransformList:se.a,text2xml:u.C,transformBox:oe.g,transformPoint:oe.i,walkTree:u.E}}};var qe=function(e){e(window);var t=e(document);return e.extend(e.fn,{contextMenu:function(a,r){return void 0!==a.menu&&(void 0===a.inSpeed&&(a.inSpeed=150),void 0===a.outSpeed&&(a.outSpeed=75),0===a.inSpeed&&(a.inSpeed=-1),0===a.outSpeed&&(a.outSpeed=-1),e(this).each((function(){var n=e(this),i=e(n).offset(),o=e("#"+a.menu);o.addClass("contextMenu"),e(this).bind("mousedown",(function(s){e(this).mouseup((function(l){var u=e(this);if(u.unbind("mouseup"),2===s.button||a.allowLeft||s.ctrlKey&&Object(c.d)()){if(l.stopPropagation(),e(".contextMenu").hide(),n.hasClass("disabled"))return!1;var d=l.pageX-300,p=l.pageY-45,m=u.width()-o.width(),h=u.height()-o.height();d>m-15&&(d-=o.width()),p>h-15&&(p-=o.height()),o.css({top:p,left:d}).fadeIn(a.inSpeed),o.find("A").mouseover((function(){o.find("LI.hover").removeClass("hover"),e(this).parent().addClass("hover")})).mouseout((function(){o.find("LI.hover").removeClass("hover")})),t.keypress((function(e){switch(e.keyCode){case 38:o.find("LI.hover").length?(o.find("LI.hover").removeClass("hover").prevAll("LI:not(.disabled)").eq(0).addClass("hover"),o.find("LI.hover").length||o.find("LI:last").addClass("hover")):o.find("LI:last").addClass("hover");break;case 40:o.find("LI.hover").length?(o.find("LI.hover").removeClass("hover").nextAll("LI:not(.disabled)").eq(0).addClass("hover"),o.find("LI.hover").length||o.find("LI:first").addClass("hover")):o.find("LI:first").addClass("hover");break;case 13:o.find("LI.hover A").trigger("click");break;case 27:t.trigger("click")}})),o.find("A").unbind("mouseup"),o.find("LI:not(.disabled) A").mouseup((function(){return e(".contextMenu").hide(),r&&r(e(this).parent()[0].id,e(u),{x:d-i.left,y:p-i.top,docX:d,docY:p}),!1})),setTimeout((function(){t.click((function(){o.fadeOut(a.outSpeed)}))}),0)}}))})),e(n).add(e("UL.contextMenu")).bind("contextmenu",(function(){return!1}))})),e(this))},disableContextMenuItems:function(t){return void 0===t?(e(this).find("LI").addClass("disabled"),e(this)):(e(this).each((function(){if(void 0!==t){var a,r=t.split(","),n=Object(g.a)(r);try{for(n.s();!(a=n.n()).done;){var i=a.value;e(i).addClass("disabled")}}catch(o){n.e(o)}finally{n.f()}}})),e(this))},enableContextMenuItems:function(t){return void 0===t?(e(this).find("LI.disabled").removeClass("disabled"),e(this)):(e(this).each((function(){if(void 0!==t){var a,r=t.split(","),n=Object(g.a)(r);try{for(n.s();!(a=n.n()).done;){var i=a.value;e(i).removeClass("disabled")}}catch(o){n.e(o)}finally{n.f()}}})),e(this))},disableContextMenu:function(){return e(this).each((function(){e(this).addClass("disabled")})),e(this)},enableContextMenu:function(){return e(this).each((function(){e(this).removeClass("disabled")})),e(this)},destroyContextMenu:function(){return e(this).each((function(){e(this).unbind("mousedown").unbind("mouseup")})),e(this)}}),e},He={},ze=[function(e){function t(t){if("string"===typeof t.data){var a=t.handler,r=t.data.toLowerCase().split(" ");t.handler=function(t){if(this===t.target||27===t.which||!/textarea|select/i.test(t.target.nodeName)&&"text"!==t.target.type){var n="keypress"!==t.type&&e.hotkeys.specialKeys[t.which],i=String.fromCharCode(t.which).toLowerCase(),o="",s={};t.altKey&&"alt"!==n&&(o+="alt+"),t.ctrlKey&&"ctrl"!==n&&(o+="ctrl+"),t.metaKey&&!t.ctrlKey&&"meta"!==n&&(o+="meta+"),t.shiftKey&&"shift"!==n&&(o+="shift+"),n?s[o+n]=!0:(s[o+i]=!0,s[o+e.hotkeys.shiftNums[i]]=!0,"shift+"===o&&(s[e.hotkeys.shiftNums[i]]=!0));for(var l=0,c=r.length;l<c;l++)if(s[r[l]])return a.apply(this,arguments)}}}}return e.hotkeys={version:"0.8",specialKeys:{8:"backspace",9:"tab",13:"return",16:"shift",17:"ctrl",18:"alt",19:"pause",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"del",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",110:".",111:"/",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",144:"numlock",145:"scroll",191:"/",224:"meta",219:"[",221:"]"},shiftNums:{"`":"~",1:"!",2:"@",3:"#",4:"$",5:"%",6:"^",7:"&",8:"*",9:"(",0:")","-":"_","=":"+",";":": ","'":'"',",":"<",".":">","/":"?","\\":"|"}},e.each(["keydown","keyup","keypress"],(function(){e.event.special[this]={add:t}})),e},function(e){return function(e,t){var a,r,n,i,o,s,l,c,u=Array.prototype.slice,d=decodeURIComponent,p=e.param,m=e.bbq=e.bbq||{},h=e.event.special,g="hashchange",f="querystring",v="fragment",b="elemUrlAttr",A="location",y="href",_="src",E=/^.*\?|#.*$/g,S=/^.*\#/,C={};function x(e){return"string"===typeof e}function w(e){var t=u.call(arguments,1);return function(){return e.apply(this,t.concat(u.call(arguments)))}}function k(r,i,o,s,l){var u,m,h,g,b;return s!==a?(b=(h=o.match(r?/^([^#]*)\#?(.*)$/:/^([^#?]*)\??([^#]*)(#?.*)/))[3]||"",2===l&&x(s)?m=s.replace(r?S:E,""):(g=n(h[2]),s=x(s)?n[r?v:f](s):s,m=2===l?s:1===l?e.extend({},s,g):e.extend({},g,s),m=p(m),r&&(m=m.replace(c,d))),u=h[1]+(r?"#":m||!h[1]?"?":"")+m+b):u=i(o!==a?o:t[A][y]),u}function I(e,t,r){return t===a||"boolean"===typeof t?(r=t,t=p[e?v:f]()):t=x(t)?t.replace(e?S:E,""):t,n(t,r)}function N(t,r,n,i){return x(n)||"object"===typeof n||(i=n,n=r,r=a),this.each((function(){var a=e(this),o=r||l()[(this.nodeName||"").toLowerCase()]||"",s=o&&a.attr(o)||"";a.attr(o,p[t](s,n,i))}))}p[f]=w(k,0,(function(e){return e.replace(/(?:^[^?#]*\?([^#]*).*$)?.*/,"$1")})),p[v]=r=w(k,1,(function(e){return e.replace(/^[^#]*#?(.*)$/,"$1")})),r.noEscape=function(t){t=t||"";var a=e.map(t.split(""),encodeURIComponent);c=new RegExp(a.join("|"),"g")},r.noEscape(",/"),e.deparam=n=function(t,r){var n={},i={true:!0,false:!1,null:null};return e.each(t.replace(/\+/g," ").split("&"),(function(t,o){var s,l=o.split("="),c=d(l[0]),u=n,p=0,m=c.split("]["),h=m.length-1;if(/\[/.test(m[0])&&/\]$/.test(m[h])?(m[h]=m[h].replace(/\]$/,""),h=(m=m.shift().split("[").concat(m)).length-1):h=0,2===l.length)if(s=d(l[1]),r&&(s=s&&!isNaN(s)?+s:"undefined"===s?a:i[s]!==a?i[s]:s),h)for(;p<=h;p++)u=u[c=""===m[p]?u.length:m[p]]=p<h?u[c]||(m[p+1]&&isNaN(m[p+1])?{}:[]):s;else e.isArray(n[c])?n[c].push(s):n[c]!==a?n[c]=[n[c],s]:n[c]=s;else c&&(n[c]=r?a:"")})),n},n[f]=w(I,0),n[v]=i=w(I,1),e[b]||(e[b]=function(t){return e.extend(C,t)})({a:y,base:y,iframe:_,img:_,input:_,form:"action",link:y,script:_}),l=e[b],e.fn[f]=w(N,f),e.fn[v]=w(N,v),m.pushState=o=function(e,n){x(e)&&/^#/.test(e)&&n===a&&(n=2);var i=e!==a,o=r(t[A][y],i?e:{},i?n:2);t[A][y]=o+(/#/.test(o)?"":"#")},m.getState=s=function(e,t){return e===a||"boolean"===typeof e?i(e):i(t)[e]},m.removeState=function(t){var r={};t!==a&&(r=s(),e.each(e.isArray(t)?t:arguments,(function(e,t){delete r[t]}))),o(r,2)},h[g]=e.extend(h[g],{add:function(t){var i;function o(e){var t=e[v]=r();e.getState=function(e,r){return e===a||"boolean"===typeof e?n(t,e):n(t,r)[e]},i.apply(this,arguments)}if(e.isFunction(t))return i=t,o;i=t.handler,t.handler=o}})}(e,window),e},b.a,qe].reduce((function(e,t){return t(e)}),l.a);He.tool_scale=1,He.exportWindowCt=0,He.langChanged=!1,He.showSaveWarning=!1,He.storagePromptState="ignore";var We,Qe,Je=[],Ye={lang:"",iconsize:"",bkgd_color:"#FFF",bkgd_url:"",img_save:"embed",save_notice_done:!1,export_notice_done:!1},Ze=["ext-connector.js","ext-eyedropper.js","ext-grid.js","ext-imagelib.js","ext-markers.js","ext-overview_window.js","ext-panning.js","ext-polygon.js","ext-shapes.js","ext-star.js","ext-storage.js"],Xe={canvasName:"default",canvas_expansion:1,initFill:{color:"FF0000",opacity:1},initStroke:{width:5,color:"000000",opacity:1},text:{stroke_width:0,font_size:24,font_family:"serif"},initOpacity:1,colorPickerCSS:null,initTool:"select",exportWindowType:"new",wireframe:!1,showlayers:!1,no_save_warning:!1,langPath:"./locale/",extPath:"./extensions/",canvgPath:"./canvg/",jspdfPath:"./jspdf/",imgPath:"./images/",jGraduatePath:"./jgraduate/images/",extIconsPath:"./extensions/",dimensions:[600,600,0,0],gridSnapping:!1,gridColor:"#000",baseUnit:"px",snappingStep:10,showRulers:!0,preventAllURLConfig:!1,preventURLContentLoading:!1,lockExtensions:!1,noDefaultExtensions:!1,showGrid:!1,centerSnappingStep:5,centerSnapping:!0,noStorageOnLoad:!1,forceStorage:!1,emptyStorageOnDecline:!1,avoidClientSide:!1,avoidClientSideDownload:!1,avoidClientSideOpen:!1},Ke=He.uiStrings={},$e=!1,et={},tt={extensions:[],stylesheets:[],allowedOrigins:[]};function at(e){return rt.apply(this,arguments)}function rt(){return(rt=Object(o.a)(i.a.mark((function e(t){var a,r,n=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.length>1&&void 0!==n[1]?n[1]:{},r=a.noAlert,!(!1!==We.setSvgString(t))){e.next=4;break}return e.abrupt("return");case 4:if(r){e.next=8;break}return e.next=7,ze.alert(Ke.notification.errorLoadingSVG);case 7:return e.abrupt("return");case 8:throw new Error("Error loading SVG");case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}ze.pref=function(e,t){return t?(et[e]=t,void(He.curPrefs=et)):e in et?et[e]:Ye[e]},He.loadContentAndPrefs=function(){if(tt.forceStorage||!tt.noStorageOnLoad&&document.cookie.match(/(?:^|;\s*)svgeditstore=(?:prefsAndContent|prefsOnly)/)){if(He.storage&&(tt.forceStorage||!tt.noStorageOnLoad&&document.cookie.match(/(?:^|;\s*)svgeditstore=prefsAndContent/))){var e="svgedit-"+tt.canvasName,t=He.storage.getItem(e);t&&He.loadFromString(t)}Object.keys(Ye).forEach((function(e){var t="svg-edit-"+e;if(He.storage){var a=He.storage.getItem(t);a&&(Ye[e]=String(a))}else if(window.widget)Ye[e]=window.widget.preferenceForKey(t);else{var r=document.cookie.match(new RegExp("(?:^|;\\s*)"+u.z(encodeURIComponent(t))+"=([^;]+)"));Ye[e]=r?decodeURIComponent(r[1]):""}}))}},He.setConfig=function(e,t){function a(e,t,a){e[t]&&"object"===typeof e[t]?ze.extend(!0,e[t],a):e[t]=a}t=t||{},ze.each(e,(function(r,n){if({}.hasOwnProperty.call(e,r))if({}.hasOwnProperty.call(Ye,r)){if(!1===t.overwrite&&(tt.preventAllURLConfig||{}.hasOwnProperty.call(et,r)))return;!0===t.allowInitialUserOverride?Ye[r]=n:ze.pref(r,n)}else if(["extensions","stylesheets","allowedOrigins"].includes(r)){if(!1===t.overwrite&&(tt.preventAllURLConfig||["allowedOrigins","stylesheets"].includes(r)||"extensions"===r&&tt.lockExtensions))return;tt[r]=tt[r].concat(n)}else if({}.hasOwnProperty.call(Xe,r)){if(!1===t.overwrite&&(tt.preventAllURLConfig||{}.hasOwnProperty.call(tt,r)))return;if({}.hasOwnProperty.call(tt,r)){if(!1===t.overwrite)return;a(tt,r,n)}else!0===t.allowInitialUserOverride?a(Xe,r,n):Xe[r]&&"object"===typeof Xe[r]?(tt[r]=Array.isArray(Xe[r])?[]:{},ze.extend(!0,tt[r],n)):tt[r]=n}})),He.curConfig=tt},He.randomizeIds=function(e){},He.init=function(){!("svgEditor"in window)||!window.svgEditor||!1!==window.svgEditor.modules||Object.assign(Xe,{langPath:"./locale/",extPath:"./extensions/",canvgPath:"./",jspdfPath:"./"});try{"localStorage"in window&&(He.storage=localStorage)}catch(re){}function e(){(tt=ze.extend(!0,{},Xe,tt)).noDefaultExtensions||(tt.extensions=tt.extensions.concat(Ze)),["extensions","stylesheets","allowedOrigins"].forEach((function(e){tt[e]=ze.grep(tt[e],(function(t,a){return a===tt[e].indexOf(t)}))})),He.curConfig=tt}!function(){var t,a;if(Qe=ze.deparam.querystring(!0),ze.isEmptyObject(Qe))e(),He.loadContentAndPrefs();else{if(Qe.dimensions&&(Qe.dimensions=Qe.dimensions.split(",")),Qe.bkgd_color&&(Qe.bkgd_color="#"+Qe.bkgd_color),Qe.extensions&&(Qe.extensions=Qe.extensions.match(/[:/\\]/)?"":Qe.extensions.split(",")),["langPath","extPath","canvgPath","jspdfPath","imgPath","jGraduatePath","extIconsPath"].forEach((function(e){Qe[e]&&delete Qe[e]})),He.setConfig(Qe,{overwrite:!1}),e(),!tt.preventURLContentLoading){if(t=Qe.source,a=ze.param.querystring(),t||a.includes("source=data:")&&(t=a.match(/source=(data:[^&]*)/)[1]),t)return void(t.startsWith("data:")?He.loadFromDataURI(t):He.loadFromString(t));if(Qe.url)return void He.loadFromURL(Qe.url)}Qe.noStorageOnLoad&&!tt.forceStorage||He.loadContentAndPrefs()}et=ze.extend(!0,{},Ye,et),He.curPrefs=et}(),He.canvas=We=new Ge(document.getElementById("svgcanvas"),tt);var t,a=Object(c.d)()?"meta+":"ctrl+",r=We.pathActions,n=We.undoMgr,s=ze("#workarea"),l=ze("#cmenu_canvas"),p={fill:"#FFF",stroke:"#000"};!function(){var e=window.opener||window.parent;if(e)try{var t=new e.CustomEvent("svgEditorReady",{bubbles:!0,cancelable:!0});e.document.documentElement.dispatchEvent(t)}catch(a){}}();for(var h=function(){We.setMode("select"),s.css("cursor","auto")},g=ze("title:first").text(),f=[],v=.1;v<1e5;v*=10)f.push(v),f.push(2*v),f.push(5*v);var b=null,A=!1,y=function(){window.opera&&ze("<p/>").hide().appendTo("body").remove()},_=He.toolButtonClick=function(e,t){if(ze(e).hasClass("disabled"))return!1;if(ze(e).parent().hasClass("tools_flyout"))return!0;return t||ze(".tools_flyout").fadeOut("normal"),ze("#styleoverrides").text(""),s.css("cursor","auto"),ze(".tool_button_current").removeClass("tool_button_current").addClass("tool_button"),ze(e).addClass("tool_button_current").removeClass("tool_button"),!0},E=He.clickSelect=function(){_("#tool_select")&&(We.setMode("select"),ze("#styleoverrides").text("\n        #svgcanvas svg * {\n          cursor: move;\n          pointer-events: all;\n        }\n        #svgcanvas svg {\n          cursor: default;\n        }\n      "))};var C=He.updateRulers=function(e,t,a,r){try{var n,i,o=We.getBoundDimensions(),s=We.getPxToInch();t||(t=We.getZoom()),e||(e=ze("#svgcanvas"));var l=We.getContentElem(),c=Object(d.d)(),u=c.px;for(n=0;n<2;n++){var p=0===n,m=p?"x":"y";u=a&&r?p?c.px*(o.boundWidth/a):c.px*(o.boundHeight/r):p?c.px*(1/s.width):c.px*(1/s.height);var h=p?"width":"height",g=Number(l.getAttribute(m)),v=ze("#ruler_"+m+" canvas:first"),b=v.clone();v.replaceWith(b);var A=b[0],y=2*e[h](),_=y;A.parentNode.style[h]=_+"px";var E=A.getContext("2d"),S=void 0,C=void 0,x=void 0;if(E.fillStyle="rgb(200,0,0)",E.fillRect(0,0,A.width,A.height),b.siblings().remove(),y>=3e4){x=parseInt(y/3e4)+1,(S=[])[0]=E;var w=void 0;for(i=1;i<x;i++)A[h]=3e4,w=A.cloneNode(!0),A.parentNode.append(w),S[i]=w.getContext("2d");w[h]=y%3e4,y=3e4}A[h]=y;var k=u*t,I=50/k,N=1;for(i=0;i<f.length&&(N=C=f[i],!(I<=C));i++);var O=N*k;E.font="9px sans-serif";for(var P=g/k%N*k,D=P-O,R=0;P<_;){D+=O;var T=Math.round(P)+.5;p?(E.moveTo(T,15),E.lineTo(T,6)):(E.moveTo(15,T),E.lineTo(6,T)),C=(D-g)/k;var L=void 0;if(N>=1)L=Math.round(C);else{var M=String(N).split(".")[1].length;L=C.toFixed(M)}0!==L&&1e3!==L&&L%1e3===0&&(L=L/1e3+"K");var B=O/10;for(i=1;i<10;i++){var j=Math.round(P+B*i)+.5;if(S&&j>y){if(R++,E.stroke(),R>=x){i=10,P=_;continue}E=S[R],P-=3e4,j=Math.round(P+B*i)+.5}p?(E.moveTo(j,15),E.lineTo(j,12)):(E.moveTo(15,j),E.lineTo(12,j))}P+=O}E.strokeStyle="#000",E.stroke()}}catch(F){}},x=He.updateCanvas=function(e,t){var a=We.getZoom(),r=s,n=ze("#svgcanvas"),i=600,o=600,l=r[0].scrollLeft+300,c=r[0].scrollTop+300,u=n.height()/2,d=n.width()/2;n.width(i).height(o);var p=We.updateCanvas(i,o),m=300/d;t?(t.x+=p.x,t.y+=p.y):t={x:300+(l-d)*m,y:300+(c-u)*m};e?We.contentW>r.width()?(s[0].scrollLeft=p.x-10,s[0].scrollTop=p.y-10):(r[0].scrollLeft=0,r[0].scrollTop=0):(r[0].scrollLeft=t.x-300,r[0].scrollTop=t.y-300),tt.showRulers&&(C(n,a),s.scroll())},w=He.updateContextPanel=function(){var e=b;u.x(e)||e.parentNode||(e=null);var t=We.getCurrentDrawing().getCurrentLayerName(),a=We.getMode(),i="px"!==tt.baseUnit?tt.baseUnit:null,o="pathedit"===a,s=ze("#cmenu_canvas li");if(ze("#selected_panel, #multiselected_panel, #g_panel, #rect_panel, #circle_panel,#ellipse_panel, #line_panel, #text_panel, #image_panel, #container_panel, #use_panel, #a_panel").hide(),u.x(e))A?(ze("#multiselected_panel").show(),s.enableContextMenuItems("#group").disableContextMenuItems("#ungroup")):s.disableContextMenuItems("#delete,#cut,#copy,#group,#ungroup,#move_front,#move_up,#move_down,#move_back");else{var c=e.nodeName,p=We.getRotationAngle(e);ze("#angle").val(p);var m=We.getBlur(e);if(ze("#blur").val(m),o||"pathedit"===a){var h=r.getNodePoint();if(ze("#tool_add_subpath").removeClass("push_button_pressed").addClass("tool_button"),ze("#tool_node_delete").toggleClass("disabled",!r.canDeleteNodes),h){var g=ze("#seg_type");i&&(h.x=Object(d.c)(h.x),h.y=Object(d.c)(h.y)),ze("#path_node_x").val(h.x),ze("#path_node_y").val(h.y),h.type?g.val(h.type).removeAttr("disabled"):g.val(4).attr("disabled","disabled")}return}if(ze("#selected_panel").show(),["line","circle","ellipse"].includes(c))ze("#xy_panel").hide();else{var f,v;if(["g","polyline","path"].includes(c)){var y=We.getStrokedBBox([e]);y&&(f=y.x,v=y.y)}else f=e.getAttribute("x"),v=e.getAttribute("y");i&&(f=Object(d.c)(f),v=Object(d.c)(v)),ze("#selected_x").val(f||0),ze("#selected_y").val(v||0),ze("#xy_panel").show()}var _=!["image","text","path","g","use"].includes(c);ze("#tool_topath").toggle(_),ze("#tool_reorient").toggle("path"===c),ze("#tool_reorient").toggleClass("disabled",0===p);var E={g:[],a:[],rect:["rx","width","height"],image:["width","height"],circle:["cx","cy","r"],ellipse:["cx","cy","rx","ry"],line:["x1","y1","x2","y2"],text:[],use:[]},S=e.tagName,C=null;if("a"===S&&(C=We.getHref(e),ze("#g_panel").show()),"a"===e.parentNode.tagName&&(ze(e).siblings().length||(ze("#a_panel").show(),C=We.getHref(e.parentNode))),ze("#tool_make_link, #tool_make_link").toggle(!C),C&&ze("#link_url").val(C),E[S]){var x=E[S];ze("#"+S+"_panel").show(),ze.each(x,(function(t,a){var r=e.getAttribute(a);if("px"!==tt.baseUnit&&e[a]){var n=e[a].baseVal.value;r=Object(d.c)(n)}ze("#"+S+"_"+a).val(r||0)}))}s[("g"===S?"en":"dis")+"ableContextMenuItems"]("#ungroup"),s[("g"!==S&&A?"en":"dis")+"ableContextMenuItems"]("#group")}if(ze("#tool_undo").toggleClass("disabled",0===n.getUndoStackSize()),ze("#tool_redo").toggleClass("disabled",0===n.getRedoStackSize()),We.addedNew=!1,e&&!o||A?(ze("#selLayerNames").removeAttr("disabled").val(t),l.enableContextMenuItems("#delete,#cut,#copy,#move_front,#move_up,#move_down,#move_back")):ze("#selLayerNames").attr("disabled","disabled"),A){for(var w=We.getActiveObject(),k=0;k<w.length;k++)if(w[k]&&w[k].prefs&&w[k].prefs.lock&&(w[k].prefs.lock.move||w[k].prefs.lock.rotate||w[k].prefs.lock.resize||w[k].prefs.lock.delete)){s.disableContextMenuItems("#group,#ungroup");break}}else e&&e.prefs&&e.prefs.lock&&(e.prefs.lock.move||e.prefs.lock.rotate||e.prefs.lock.resize||e.prefs.lock.delete)&&s.disableContextMenuItems("#group,#ungroup")};var k=u.g((function(){var e=We.getMode();"select"!==e&&"multiselect"!==e||(We.getActiveObject()[0]&&We.getActiveObject()[0].prefs?De.EventEmitter.dispatch(De.Events.SELECT_STAGE_ELEMS,We.getActiveObject()[0]):De.EventEmitter.dispatch(De.Events.SELECT_STAGE_ELEMS,null))}),50),I=function(){!function(){var e="\n      #workarea.wireframe #svgcontent * {\n        stroke-width: ".concat(1/We.getZoom(),"px;\n      }\n    ");ze("#wireframe_rules").text(s.hasClass("wireframe")?e:"")}()},N=We.zoomChanged=function(e,t,a){var r=s,n=We.setBBoxZoom(t,r.width()-15,r.height()-15);if(n){var i=n.zoom,o=n.bbox;i<.001?O({value:.1}):(ze("#zoom").val((100*i).toFixed(1)),a?x():x(!1,{x:o.x*i+o.width*i/2,y:o.y*i+o.height*i/2}),"zoom"===We.getMode()&&o.width&&h(),I())}},O=function(e){var t=e.value/100;if(t<.001)e.value=.1;else{var a=We.getZoom(),r=s;N(window,{width:0,height:0,x:(r[0].scrollLeft+r.width()/2)/a,y:(r[0].scrollTop+r.height()/2)/a,zoom:t},!0)}};ze("#cur_context_panel").delegate("a","click",(function(){var e=ze(this);return e.attr("data-root")?We.leaveContext():We.setContext(e.text()),We.clearSelection(),!1}));var P=function(){var e=Object(o.a)(i.a.mark((function e(a,r){var n,o,s,l,u,d,p,m;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=function(){t&&(clearTimeout(t),t=null),o||(t=setTimeout((function(){o=!0}),50))},r){e.next=3;break}return e.abrupt("return",void 0);case 3:if(n=!1,o=!1,l=function(){r.callback&&!n&&(n=!0,r.callback.call(He))},u=[],r.context_tools&&ze.each(r.context_tools,(function(e,t){var a,r=t.container_id?' id="'+t.container_id+'"':"",n=ze("#"+t.panel);switch(n.length||(n=ze("<div>",{id:t.panel}).appendTo("#tools_top")),t.type){case"tool_button":a='<div class="tool_button">'+t.id+"</div>";var i=ze(a).appendTo(n);t.events&&ze.each(t.events,(function(e,t){ze(i).bind(e,t)}));break;case"select":a="<label"+r+'><select id="'+t.id+'">',ze.each(t.options,(function(e,r){var n=e===t.defval?" selected":"";a+='<option value="'+e+'"'+n+">"+r+"</option>"}));var o=ze(a+="</select></label>").appendTo(n).find("select");ze.each(t.events,(function(e,t){ze(o).bind(e,t)}));break;case"button-select":a='<div id="'+t.id+'" class="dropdown toolset" title="'+t.title+'"><div id="cur_'+t.id+'" class="icon_label"></div><button></button></div>';var s=ze('<ul id="'+t.id+'_opts"></ul>').appendTo("#option_lists");t.colnum&&s.addClass("optcols"+t.colnum),ze(a).appendTo(n).children(),u.push({elem:"#"+t.id,list:"#"+t.id+"_opts",title:t.title,callback:t.events.change,cur:"#cur_"+t.id});break;case"input":a="<label"+r+'><span id="'+t.id+'_label">'+t.label+':</span><input id="'+t.id+'" title="'+t.title+'" size="'+(t.size||"4")+'" value="'+(t.defval||"")+'" type="text"/></label>';var l=ze(a).appendTo(n).find("input");t.events&&ze.each(t.events,(function(e,t){l.bind(e,t)}))}})),d=r.svgicons,!r.buttons){e.next=13;break}if(p={},m={},!d){e.next=13;break}return e.abrupt("return",new Promise((function(e,t){ze.svgIcons(d,{w:24,h:24,id_match:!1,no_img:!Object(c.g)(),fallback:p,placement:m,callback:function(t){"m"!==ze.pref("iconsize")&&s(),l(),e()}})})));case 13:return e.abrupt("return",l());case 14:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}();We.bind("selected",(function(e,t){"select"===We.getMode()&&h(),b=1===t.length||u.x(t[1])?t[0]:null,A=t.length>=2&&!u.x(t[1]),w(),We.runExtensions("selectedChanged",{elems:t,selectedElement:b,multiselected:A})})),We.bind("transition",(function(e,t){var a=We.getMode(),r=t[0];if(r){if(!(A=t.length>=2&&!u.x(t[1])))switch(a){case"rotate":var n=We.getRotationAngle(r);ze("#angle").val(n),ze("#tool_reorient").toggleClass("disabled",0===n)}We.runExtensions("elementTransition",{elems:t})}})),We.bind("changed",(function(e,t){var a=We.getMode();"select"===a&&h(),t.forEach((function(e){e&&"svg"===e.tagName||function(e){return e&&"g"===e.tagName&&S.CLASS_REGEX.test(e.getAttribute("class"))}(e)||e&&b&&u.x(b.parentNode)&&(b=e)})),He.showSaveWarning=!0,w(),We.runExtensions("elementChanged",{elems:t}),k()})),We.bind("zoomed",N),We.bind("zoomDone",I),We.bind("updateCanvas",(function(e,t){var a=t.center,r=t.newCtr;x(a,r)})),We.bind("contextset",(function(e,t){var a="";if(t){var r="";a='<a href="#" data-root="y">'+We.getCurrentDrawing().getCurrentLayerName()+"</a>",ze(t).parentsUntil("#svgcontent > g").addBack().each((function(){this.id&&(r+=" > "+this.id,a+=this!==t?' > <a href="#">'+this.id+"</a>":" > "+this.id)})),r}else null;ze("#cur_context_panel").toggle(Boolean(t)).html(a),function(e){e=e||We.getDocumentTitle();var t=g+(e?": "+e:"");ze("title:first").text(t)}()})),We.bind("extension_added",P),We.textActions.setInputElem(ze("#text")[0]);var D='<div class="palette_item" data-rgb="none"></div>';ze.each(["#000000","#3f3f3f","#7f7f7f","#bfbfbf","#ffffff","#ff0000","#ff7f00","#ffff00","#7fff00","#00ff00","#00ff7f","#00ffff","#007fff","#0000ff","#7f00ff","#ff00ff","#ff007f","#7f0000","#7f3f00","#7f7f00","#3f7f00","#007f00","#007f3f","#007f7f","#003f7f","#00007f","#3f007f","#7f007f","#7f003f","#ffaaaa","#ffd4aa","#ffffaa","#d4ffaa","#aaffaa","#aaffd4","#aaffff","#aad4ff","#aaaaff","#d4aaff","#ffaaff","#ffaad4"],(function(e,t){D+='<div class="palette_item" style="background-color: '+t+';" data-rgb="'+t+'"></div>'})),ze("#palette").append(D);D="",ze.each(["#FFF","#888","#000"],(function(){D+='<div class="color_block" style="background-color:'+this+';"></div>'})),ze("#bg_blocks").append(D);var R,T,L=ze("#bg_blocks div");L.each((function(){ze(this).click((function(){L.removeClass("cur_background"),ze(this).addClass("cur_background")}))})),R=ze.pref("bkgd_color"),T=ze.pref("bkgd_url"),ze.pref("bkgd_color",R),ze.pref("bkgd_url",T),We.setBackground(R,T),ze("#image_save_opts input").val([ze.pref("img_save")]);ze("#stroke_style").change((function(){We.setStrokeAttr("stroke-dasharray",ze(this).val()),y()})),ze("#stroke_linejoin").change((function(){We.setStrokeAttr("stroke-linejoin",ze(this).val()),y()})),ze("select").change((function(){ze(this).blur()})),ze("#palette").mouseover((function(){var e=ze('<input type="hidden">');ze(this).append(e),e.focus().remove()})),ze(".palette_item").mousedown((function(e){var t,a=e.shiftKey||2===e.button?"stroke":"fill",r=ze(this).data("rgb");"none"===r||"transparent"===r||"initial"===r?(r="none",t=new ze.jGraduate.Paint):t=new ze.jGraduate.Paint({alpha:100,solidColor:r.substr(1)}),p[a].setPaint(t),We.setColor(a,r),"none"!==r&&1!==We.getPaintOpacity(a)&&We.setPaintOpacity(a,1),function(){var e="none"===We.getColor("fill"),t="none"===We.getColor("stroke"),a=["#tool_fhpath","#tool_line"],r=["#tools_rect .tool_button","#tools_ellipse .tool_button","#tool_text","#tool_path"];t?a.forEach((function(e){ze(e).hasClass("tool_button_current")&&E(),ze(e).addClass("disabled")})):a.forEach((function(e){ze(e).removeClass("disabled")})),t&&e?r.forEach((function(e){ze(e).hasClass("tool_button_current")&&E(),ze(e).addClass("disabled")})):r.forEach((function(e){ze(e).removeClass("disabled")})),We.runExtensions("toolButtonStateUpdate",{nofill:e,nostroke:t}),ze(".tools_flyout").each((function(){var e=ze("#"+this.id+"_show"),t=!1;ze(this).children().each((function(){ze(this).hasClass("disabled")||(t=!0)})),e.toggleClass("disabled",!t)})),y()}()})).bind("contextmenu",(function(e){e.preventDefault()})),ze("#toggle_stroke_tools").on("click",(function(){ze("#tools_bottom").toggleClass("expanded")})),function(){var e=s[0],t=null,a=null,r=!1,n=!1;ze("#svgcanvas").bind("mousemove mouseup",(function(n){return!1===r||(e.scrollLeft-=n.clientX-t,e.scrollTop-=n.clientY-a,t=n.clientX,a=n.clientY,"mouseup"===n.type&&(r=!1),!1)})).mousedown((function(e){return 1!==e.button&&!0!==n||(r=!0,t=e.clientX,a=e.clientY,!1)})),ze(window).mouseup((function(){r=!1})),ze(document).bind("keydown","space",(function(e){We.spaceKey=n=!0,e.preventDefault()})).bind("keyup","space",(function(e){e.preventDefault(),We.spaceKey=n=!1})).bind("keydown","shift",(function(e){"zoom"===We.getMode()&&s.css("cursor","crosshair")})).bind("keyup","shift",(function(e){"zoom"===We.getMode()&&s.css("cursor","crosshair")})),He.setPanning=function(e){We.spaceKey=n=e}}(),function(){var e=ze("#main_icon"),t=ze("#main_icon span"),a=ze("#main_menu"),r=!1,n=0,i=!0,o=!1;ze(window).mouseup((function(t){r||(e.removeClass("buttondown"),"INPUT"!==t.target.tagName?a.fadeOut(200):o||(o=!0,ze(t.target).click((function(){a.css("margin-left","-9999px").show()})))),r=!1})).mousedown((function(e){ze(e.target).closest("div.tools_flyout, .contextMenu").length||ze(".tools_flyout:visible,.contextMenu").fadeOut(250)})),t.bind("mousedown",(function(){e.hasClass("buttondown")?a.fadeOut(200):(a.css("margin-left",0).show(),n||(n=a.height()),a.css("height",0).animate({height:n},200),r=!0),e.toggleClass("buttondown buttonup")})).hover((function(){r=!0})).mouseout((function(){r=!1}));var s=ze("#main_menu li");s.mouseover((function(){i="rgba(0, 0, 0, 0)"===ze(this).css("background-color"),s.unbind("mouseover"),i&&s.mouseover((function(){this.style.backgroundColor="#FFC"})).mouseout((function(){return this.style.backgroundColor="transparent",!0}))}))}();He.clickZoom=function(){We.setMode("zoom"),s.css("cursor","crosshair")};var M=He.zoomImage=function(e){var t=We.getResolution();e=e?t.zoom*e:1,ze("#zoom").val(100*e),We.setZoom(e),I(),x(!0)},B=function(){_("#tool_zoom")&&(M(),h())},j=function(){u.x(b)&&!A||We.deleteSelectedElements()},F=function(){u.x(b)&&!A||We.cutSelectedElements()},U=function(){u.x(b)&&!A||We.copySelectedElements()},V=function(){var e=We.getBoundDimensions().boundX+We.getBoundDimensions().boundWidth/2,t=We.getBoundDimensions().boundY+We.getBoundDimensions().boundHeight/2;We.pasteElements("point",e,t)},G=function(e){u.x(b)||We.moveUpDownSelected(e)},q=function(e,t){if(!u.x(b)||A){if(tt.gridSnapping){var a=We.getZoom()*tt.snappingStep;e*=a,t*=a}We.moveSelectedElements(e,t)}},H=function(){We.cycleElement(1)},z=function(){We.cycleElement(0)},W=function(e,t){if(!u.x(b)&&!A&&!(b&&b.prefs&&b.prefs.lock&&b.prefs.lock.rotate)){e||(t*=-1);var a=parseFloat(ze("#angle").val())+t;We.setRotationAngle(a),w()}},Q=He.clickUndo=function(){n.getUndoStackSize()>0&&n.undo()},J=He.clickRedo=function(){n.getRedoStackSize()>0&&n.redo()},Y={width:ze(window).width(),height:ze(window).height()};if(ze(window).resize((function(e){We.resizeStage(),ze.each(Y,(function(e,t){var a=ze(window)[e]();s[0]["scroll"+("width"===e?"Left":"Top")]-=(a-t)/2,Y[e]=a}))})),s.scroll((function(){ze("#ruler_x").length&&(ze("#ruler_x")[0].scrollLeft=s[0].scrollLeft),ze("#ruler_y").length&&(ze("#ruler_y")[0].scrollTop=s[0].scrollTop)})),ze("#url_notice").click((function(){ze.alert(this.title)})),function(){var e="tool_button_current",t="";ze.each(["clear","open","save","source","delete","delete_multi","paste","clone","clone_multi","move_top","move_bottom"],(function(e,a){t+=(e?",":"")+"#tool_"+a})),ze(t).mousedown((function(){ze(this).addClass(e)})).bind("mousedown mouseout",(function(){ze(this).removeClass(e)})),ze("#tool_undo, #tool_redo").mousedown((function(){ze(this).hasClass("disabled")||ze(this).addClass(e)})).bind("mousedown mouseout",(function(){ze(this).removeClass(e)}))}(),Object(c.d)()&&!window.opera)for(var Z=["tool_clear","tool_save","tool_source","tool_undo","tool_redo","tool_clone"],X=Z.length;X--;){var K=document.getElementById(Z[X]);if(K){var $=K.title,ee=$.indexOf("Ctrl+");K.title=[$.substr(0,ee),"Cmd+",$.substr(ee+5)].join("")}}var te=function(){var e=[{sel:"#tool_delete,#tool_delete_multi",fn:j,evt:"click",key:["del/backspace",!0]},{key:"ctrl+left",fn:function(){W(0,1)}},{key:"ctrl+right",fn:function(){W(1,1)}},{key:"ctrl+shift+left",fn:function(){W(0,5)}},{key:"ctrl+shift+right",fn:function(){W(1,5)}},{key:"shift+O",fn:z},{key:"shift+P",fn:H},{key:[a+"up",!0],fn:function(){M(2)}},{key:[a+"down",!0],fn:function(){M(.5)}},{key:[a+"]",!0],fn:function(){G("Up")}},{key:[a+"[",!0],fn:function(){G("Down")}},{key:["up",!0],fn:function(){q(0,-1)}},{key:["down",!0],fn:function(){q(0,1)}},{key:["left",!0],fn:function(){q(-1,0)}},{key:["right",!0],fn:function(){q(1,0)}},{key:"shift+up",fn:function(){q(0,-10)}},{key:"shift+down",fn:function(){q(0,10)}},{key:"shift+left",fn:function(){q(-10,0)}},{key:"shift+right",fn:function(){q(10,0)}},{key:["alt+up",!0],fn:function(){We.cloneSelectedElements(0,-10)}},{key:["alt+down",!0],fn:function(){We.cloneSelectedElements(0,10)}},{key:["alt+left",!0],fn:function(){We.cloneSelectedElements(-10,0)}},{key:["alt+right",!0],fn:function(){We.cloneSelectedElements(10,0)}},{key:"a",fn:function(){We.selectAllInCurrentLayer()}},{key:a+"a",fn:function(){We.selectAllInCurrentLayer()}},{key:a+"z",fn:Q},{key:a+"shift+z",fn:J},{key:a+"y",fn:J},{key:a+"x",fn:F},{key:a+"c",fn:U},{key:a+"v",fn:V}],t={"4/Shift+4":"#tools_rect_show","5/Shift+5":"#tools_ellipse_show"};return{setAll:function(){ze.each(e,(function(e,t){var a;if(t.sel){if(!(a=ze(t.sel)).length)return!0;t.evt&&(Object(c.f)()&&"click"===t.evt&&(t.evt="mousedown"),a[t.evt](t.fn))}if(t.key){var r,n=!1;Array.isArray(t.key)?(r=t.key[0],t.key.length>1&&(n=t.key[1])):r=t.key,r=String(r);var i=t.fn;ze.each(r.split("/"),(function(e,t){ze(document).bind("keydown",t,(function(e){if(65!==e.keyCode&&71!==e.keyCode&&68!==e.keyCode&&80!==e.keyCode)return i(),n&&e.preventDefault(),!1}))}))}return!0})),ze(".attr_changer, #image_url").bind("keydown","return",(function(e){ze(this).change(),e.preventDefault()})),ze(window).bind("keydown","tab",(function(e){0})).bind("keydown","shift+tab",(function(e){0})),ze("#tool_zoom").dblclick(B)},setTitles:function(){ze.each(t,(function(e,t){var a=ze(t).parents("#main_menu").length;ze(t).each((function(){var t;t=a?ze(this).text().split(" [")[0]:this.title.split(" [")[0];var r="";ze.each(e.split("/"),(function(e,t){var a=t.split("+"),n="";a.length>1&&(n=a[0]+"+",t=a[1]),r+=(e?"/":"")+n+(Ke["key_"+t]||t)})),a?this.lastChild.textContent=t+" ["+r+"]":this.title=t+" ["+r+"]"}))}))},getButtonData:function(t){return Object.values(e).find((function(e){return e.sel===t}))}}}();function ae(){var e;try{e=He.canvas.svgeditClipboard}catch(re){}l[(e?"en":"dis")+"ableContextMenuItems"]("#paste,#paste_in_place")}te.setAll(),He.ready((function(){var e=tt.initTool,t=ze("#tools_left, #svg_editor .tools_flyout"),a=t.find("#tool_"+e),r=t.find("#"+e);(a.length?a:r.length?r:ze("#tool_select")).click().mouseup(),tt.wireframe&&ze("#tool_wireframe").click(),ze("#rulers").toggle(Boolean(tt.showRulers)),te.setAll()})),ze("#workarea").contextMenu({menu:"cmenu_canvas",inSpeed:0},(function(e,t,a){switch(e){case"delete":j();break;case"cut":F();break;case"copy":U();break;case"paste":We.pasteElements();break;case"paste_in_place":We.pasteElements("in_place");break;case"group":case"group_elements":We.groupSelectedElements();break;case"ungroup":We.ungroupSelectedElement(!0);break;case"move_front":u.x(b)||We.moveToTopSelectedElement();break;case"move_up":G("Up");break;case"move_down":G("Down");break;case"move_back":u.x(b)||We.moveToBottomSelectedElement();break;default:Boolean(m[e])&&function(e){return m[e].action}(e).call()}})),ze(".contextMenu li").mousedown((function(e){e.preventDefault()})),ze("#cmenu_canvas li").disableContextMenu(),l.enableContextMenuItems("#delete,#cut,#copy"),ae(),window.addEventListener("storage",(function(e){"svgedit_clipboard"===e.key&&ae()})),He.canvas.getUIStrings=function(){return Ke},He.openPrep=function(){return ze("#main_menu").hide(),0===n.getUndoStackSize()||ze.confirm(Ke.notification.QwantToOpen)},x(!0)},He.ready=function(e){return new Promise((function(t,a){$e?t(e()):Je.push([e,t,a])}))},He.runCallbacks=Object(o.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.all(Je.map((function(e){return(0,Object(r.a)(e,1)[0])()})));case 3:e.next=9;break;case 5:throw e.prev=5,e.t0=e.catch(0),Je.forEach((function(e){(0,Object(r.a)(e,3)[2])()})),e.t0;case 9:Je.forEach((function(e){(0,Object(r.a)(e,2)[1])()})),$e=!0;case 11:case"end":return e.stop()}}),e,null,[[0,5]])}))),He.loadFromString=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.noAlert;return He.ready(Object(o.a)(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,at(e,{noAlert:a});case 3:t.next=9;break;case 5:if(t.prev=5,t.t0=t.catch(0),!a){t.next=9;break}throw t.t0;case 9:case"end":return t.stop()}}),t,null,[[0,5]])}))))},He.disableUI=function(e){},He.loadFromURL=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.cache,r=t.noAlert;return He.ready((function(){return new Promise((function(t,n){ze.ajax({url:e,dataType:"text",cache:Boolean(a),beforeSend:function(){ze.process_cancel(Ke.notification.loadingImage)},success:function(e){t(at(e,{noAlert:r}))},error:function(e,a,i){404!==e.status&&e.responseText?t(at(e.responseText,{noAlert:r})):r?n(new Error("URLLoadFail")):(ze.alert(Ke.notification.URLLoadFail+": \n"+i),t())},complete:function(){ze("#dialog_box").hide()}})}))}))},He.loadFromDataURI=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.noAlert;return He.ready((function(){var t=!1,r=e.match(/^data:image\/svg\+xml;base64,/);r?t=!0:r=e.match(/^data:image\/svg\+xml(?:;|;utf8)?,/),r&&(r=r[0]);var n=e.slice(r.length);return at(t?u.h(n):decodeURIComponent(n),{noAlert:a})}))},He.addExtension=function(e,t,a){if(!We)throw new Error("Extension added too early");return We.addExtension.call(this,e,t,a)},He.getActiveObject=function(){return We.getActiveObject()[0]},He.ready((function(){h()}));var nt=[];window.addEventListener("message",(function(e){var t={data:e.data,origin:e.origin};nt.push(t)})),Object(o.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.resolve();case 3:He.init(),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.error(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))(),He.exportPNG=function(){var e=Object(o.a)(i.a.mark((function e(t,a){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"PNG",1,e.next=4,We.rasterExport("PNG",1,null,{productUrl:t});case 4:r=e.sent,a&&a(r.datauri);case 6:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),He.exportFaceData=function(){var e=Object(o.a)(i.a.mark((function e(t,a,r,n,o,s,l,c){var u,d;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"PNG","new"===tt.exportWindowType&&He.exportWindowCt++,u=tt.canvasName+He.exportWindowCt,1,e.next=6,We.rasterExport("PNG",1,u,t,a,r,o,s,l,c);case 6:if(d=e.sent,!n){e.next=13;break}return e.next=10,He.checkStageImage();case 10:e.sent&&(d.svg=document.getElementById("svgcontent").outerHTML),n(d);case 13:case"end":return e.stop()}}),e)})));return function(t,a,r,n,i,o,s,l){return e.apply(this,arguments)}}(),He.exportMultiBoundaryPng=function(){var e=Object(o.a)(i.a.mark((function e(t,a,r){var n,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"PNG","new"===tt.exportWindowType&&He.exportWindowCt++,n=tt.canvasName+He.exportWindowCt,1,e.next=6,We.rasterExportMultpleBoundary("PNG",1,n,t,a);case 6:o=e.sent,r&&r(o);case 8:case"end":return e.stop()}}),e)})));return function(t,a,r){return e.apply(this,arguments)}}(),He.exportConfiguratorPng=function(){var e=Object(o.a)(i.a.mark((function e(t,a,r,n,o){var s,l;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"PNG","new"===tt.exportWindowType&&He.exportWindowCt++,s=tt.canvasName+He.exportWindowCt,1,e.next=6,We.rasterConfiguratorImage("PNG",1,s,t,a,r,n);case 6:l=e.sent,o&&o(l);case 8:case"end":return e.stop()}}),e)})));return function(t,a,r,n,i){return e.apply(this,arguments)}}(),He.checkStageImage=function(){return new Promise((function(e){var t,a=document.getElementById("svgcontent").getElementsByTagName("image");if(a.length>0)for(var r=0;r<a.length;r++){if(t=a[r].getAttribute("xlink:href").match(/[^/]+(jpg|png|svg)$/))break}e(t)}))},He.exportCaptureData=function(){var e=Object(o.a)(i.a.mark((function e(t,a,r,n,o,s,l,c){var u;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,We.exportCaptureImg(t,a,r,n,o,s,l,c);case 2:return u=e.sent,e.abrupt("return",new Promise((function(e){e(u)})));case 4:case"end":return e.stop()}}),e)})));return function(t,a,r,n,i,o,s,l){return e.apply(this,arguments)}}(),He.flipHSelected=function(){var e=We.getActiveObject()[0],t=We.getBBox(e),a=We.getRotationAngle(e);e&&e.prefs&&e.prefs.lock&&e.prefs.lock.move&&(e.prefs.operation="update"),We.rotateElem(0,e),We.moveSelectedElements(t.width,0),We.scaleSelectedElements(-1,1),We.rotateElem(a,e),We.selectOnly([e])},He.flipVSelected=function(){var e=We.getActiveObject()[0],t=We.getBBox(e),a=We.getRotationAngle(e);e&&e.prefs&&e.prefs.lock&&e.prefs.lock.move&&(e.prefs.operation="update"),We.rotateElem(0,e),We.moveSelectedElements(0,t.height),We.scaleSelectedElements(1,-1),We.rotateElem(a,e),We.selectOnly([e])},He.applyEmbroideryPreview=function(e){var t=document.getElementById("engrave_"+e);if(t){t.innerHTML='<feGaussianBlur in="SourceAlpha" stdDeviation="1" result="blur"></feGaussianBlur><feOffset dy="1" dx="1"></feOffset><feComposite in2="SourceAlpha" operator="arithmetic" k2="-1" k3="1" result="shadowDiff_01"></feComposite><feFlood flood-color="#000000" flood-opacity="0.25"></feFlood><feComposite in2="shadowDiff_01" operator="in"></feComposite><feComposite in2="SourceGraphic" operator="over" result="filter_01"></feComposite><feGaussianBlur in="filter_01" stdDeviation="2" result="blur2"></feGaussianBlur><feOffset dy="-3" dx="-3"></feOffset><feComposite in2="filter_01" operator="arithmetic" k2="-1" k3="1" result="shadowDiff_02"></feComposite><feFlood flood-color="#000000" flood-opacity="0.5"></feFlood><feComposite in2="shadowDiff_02" operator="in"></feComposite><feComposite in2="filter_01" operator="over" result="filter_02"></feComposite><feGaussianBlur in="filter_02" stdDeviation="1.5" result="blur3"></feGaussianBlur><feOffset dy="2" dx="2"></feOffset><feComposite in2="filter_02" operator="arithmetic" k2="-2" k3="2" result="shadowDiff_03"></feComposite><feFlood flood-color="#000000" flood-opacity="0.25"></feFlood><feComposite in2="shadowDiff_03" operator="in"></feComposite><feComposite in2="filter_02" operator="over" result="bevel_01"></feComposite>';var a="url(#engrave_"+e+")";document.getElementById("Layer_"+e).setAttribute("filter",a)}},He.addShapeClipPath=function(e,t,a,r){var n,i,o,s,l;if((n=document.createElementNS("","clipPath")).setAttribute("id","mask_"+t),document.getElementById("masks"))l=document.getElementById("masks");else{(l=We.getSvgDoc().createElementNS(y.a.SVG,"g")).setAttributeNS(null,"id","masks");var c=We.getLayerName(),u=Number(c.split("_")[1]);l.setAttribute("clip-path","url(#bound_"+u+")"),document.getElementById("background").after(l)}if(e.getElementsByTagName("polygon")&&e.getElementsByTagName("polygon").length){var d=e.getElementsByTagName("polygon")[0].getAttribute("points");i='<polygon points="'+d+'"></polygon>';var p=r||"";n.setAttributeNS(null,"transform",p),n.innerHTML=i,We.findDefs().innerHTML+=n.outerHTML,o='<polygon points="'+d+'" transform= "'+p+'" fill="none" stroke="#006400"  stroke-width="1" pointer-events="all"  stroke-dasharray="5" id="preview_'+t+'"></polygon>',l.innerHTML+=o}else if(e.getElementsByTagName("path")&&e.getElementsByTagName("path").length){var m=e.getElementsByTagName("path")[0].getAttribute("d");(s=document.createElementNS(y.a.SVG,"path")).setAttributeNS(null,"d",m);var h=r||"";h+=a=a||"",n.setAttributeNS(null,"transform",h),n.innerHTML=s.outerHTML,We.findDefs().innerHTML+=n.outerHTML,s.setAttributeNS(null,"transform",h),s.setAttributeNS(null,"stroke","#006400"),s.setAttributeNS(null,"fill","none"),s.setAttributeNS(null,"stroke-width","0.8"),s.setAttributeNS(null,"stroke-dasharray","3"),s.setAttributeNS(null,"id","preview_"+t),l.innerHTML+=s.outerHTML}else if(e.getElementsByTagName("ellipse")&&e.getElementsByTagName("ellipse").length){var g,f,v,b,A;A='<ellipse cx="'+(g=e.getElementsByTagName("ellipse")[0].getAttribute("cx"))+'" cy="'+(f=e.getElementsByTagName("ellipse")[0].getAttribute("cy"))+'" rx="'+(v=e.getElementsByTagName("ellipse")[0].getAttribute("rx"))+'" ry="'+(b=e.getElementsByTagName("ellipse")[0].getAttribute("ry"))+'"></ellipse>';var _=r||"";n.setAttributeNS(null,"transform",_),n.innerHTML=A,We.findDefs().innerHTML+=n.outerHTML,o='<ellipse transform= "'+_+'" cx="'+g+'" cy="'+f+'" rx="'+v+'" ry="'+b+'" fill="none" stroke="#006400"  stroke-width="1" pointer-events="all"  stroke-dasharray="5" id="preview_'+t+'"></ellipse>',l.innerHTML+=o}else if(e.getElementsByTagName("rect")&&e.getElementsByTagName("rect").length){var E,S,C,x,w;w='<rect x="'+(E=e.getElementsByTagName("rect")[0].getAttribute("x"))+'" y="'+(S=e.getElementsByTagName("rect")[0].getAttribute("y"))+'" width="'+(C=e.getElementsByTagName("rect")[0].getAttribute("width"))+'" height="'+(x=e.getElementsByTagName("rect")[0].getAttribute("height"))+'"></rect>';var k=r||"";n.setAttributeNS(null,"transform",k),n.innerHTML=w,We.findDefs().innerHTML+=n.outerHTML,o='<rect transform= "'+k+'" x="'+E+'" y="'+S+'" width="'+C+'" height="'+x+'" fill="none" stroke="#006400"  stroke-width="1" pointer-events="all"  stroke-dasharray="5" id="preview_'+t+'"></rect>',l.innerHTML+=o}},He.applyEngravePreview=function(e,t,a,r,n,i,o){var s=document.getElementById("engrave_"+e);if(s){var l=r.shadow_blur?r.shadow_blur:0,c=r.shadow_direction?r.shadow_direction:0,u=r.shadow_size?r.shadow_size:0,d=r.shadow_strength?r.shadow_strength:0,p=r.shadow_opacity?r.shadow_opacity:1;if(a&&"#"===a[0]){var m='<feGaussianBlur in="SourceGraphic" stdDeviation="'+l+'"></feGaussianBlur><feDropShadow dx="'+c+'" dy="'+u+'" stdDeviation="'+d+'"></feDropShadow><feOffset dx="0.006" dy="0.013" result="offsetblur"></feOffset><feFlood flood-color="'+a+'" flood-opacity="'+p+'"></feFlood><feComposite in2="offsetblur" operator="in"></feComposite><feMerge><feMergeNode></feMergeNode></feMerge>';s.innerHTML=m}else if(t){var h='<feGaussianBlur in="SourceGraphic" stdDeviation="'+l+'"></feGaussianBlur><feDropShadow dx="'+c+'" dy="'+u+'" stdDeviation="'+d+'"></feDropShadow><feOffset dx="0.006" dy="0.013" result="offsetblur"></feOffset><feImage preserveAspectRatio="none" xlink:href="'+a+'"></feImage><feComposite in2="offsetblur" operator="atop"></feComposite><feMerge><feMergeNode></feMergeNode></feMerge>';s.innerHTML=h}else{var g=s.getElementsByTagName("feColorMatrix");if(g.length&&a)g[0].setAttribute("values",a);else{var f=document.createElementNS(y.a.SVG,"feColorMatrix");a&&f.setAttribute("values",a),f.setAttribute("result","colormatrix"),f.setAttribute("id","feColorMatrix8485"),f.setAttribute("type","matrix"),s.innerHTML=f.outerHTML}}var v="url(#engrave_"+e+")";o||document.getElementById("Layer_"+e).setAttribute("filter",v)}};t.a=He},32:function(e,t,a){"use strict";a.d(t,"a",(function(){return d})),a.d(t,"d",(function(){return p})),a.d(t,"c",(function(){return m})),a.d(t,"b",(function(){return h}));var r=a(7),n=a(10),i=a(11),o=a(8),s=a(28),l=document.createElementNS(o.a.SVG,"svg");function c(e){var t=e.matrix,a="";switch(e.type){case 1:a="matrix("+[t.a,t.b,t.c,t.d,t.e,t.f].join(",")+")";break;case 2:a="translate("+t.e+","+t.f+")";break;case 3:a=t.a===t.d?"scale("+t.a+")":"scale("+t.a+","+t.d+")";break;case 4:var r=0,n=0;if(0!==e.angle){var i=1-t.a;n=(i*t.f+t.b*t.e)/(i*i+t.b*t.b),r=(t.e-t.b*n)/i}a="rotate("+e.angle+" "+r+","+n+")"}return a}var u={},d=function(){function e(t){Object(n.a)(this,e),this._elem=t||null,this._xforms=[],this._update=function(){for(var e="",t=0;t<this.numberOfItems;++t){e+=c(this._list.getItem(t))+" "}this._elem.setAttribute("transform",e)},this._list=this,this._init=function(){var e=this,t=this._elem.getAttribute("transform");if(t)for(var a=/\s*((scale|matrix|rotate|translate)\s*\(.*?\))\s*,?\s*/,n=!0;n;)n=t.match(a),t=t.replace(a,""),n&&n[1]&&function(){var t=n[1].split(/\s*\(/),a=t[0],i=t[1].match(/\s*(.*?)\s*\)/);i[1]=i[1].replace(/(\d)-/g,"$1 -");var o=i[1].split(/[, ]+/),s="abcdef".split(""),c=l.createSVGMatrix();Object.values(o).forEach((function(e,t){o[t]=parseFloat(e),"matrix"===a&&(c[s[t]]=o[t])}));var u=l.createSVGTransform(),d="set"+a.charAt(0).toUpperCase()+a.slice(1),p="matrix"===a?[c]:o;"scale"===a&&1===p.length?p.push(p[0]):"translate"===a&&1===p.length?p.push(0):"rotate"===a&&1===p.length&&p.push(0,0),u[d].apply(u,Object(r.a)(p)),e._list.appendItem(u)}()},this._removeFromOtherLists=function(e){e&&Object.values(u).some((function(t){for(var a=0,r=t._xforms.length;a<r;++a)if(t._xforms[a]===e)return t.removeItem(a),!0;return!1}))},this.numberOfItems=0}return Object(i.a)(e,[{key:"clear",value:function(){this.numberOfItems=0,this._xforms=[]}},{key:"initialize",value:function(e){this.numberOfItems=1,this._removeFromOtherLists(e),this._xforms=[e]}},{key:"getItem",value:function(e){if(e<this.numberOfItems&&e>=0)return this._xforms[e];var t=new Error("DOMException with code=INDEX_SIZE_ERR");throw t.code=1,t}},{key:"insertItemBefore",value:function(e,t){var a=null;if(t>=0)if(t<this.numberOfItems){this._removeFromOtherLists(e);var r,n=new Array(this.numberOfItems+1);for(r=0;r<t;++r)n[r]=this._xforms[r];n[r]=e;for(var i=r+1;r<this.numberOfItems;++i,++r)n[i]=this._xforms[r];this.numberOfItems++,this._xforms=n,a=e,this._list._update()}else a=this._list.appendItem(e);return a}},{key:"replaceItem",value:function(e,t){var a=null;return t<this.numberOfItems&&t>=0&&(this._removeFromOtherLists(e),this._xforms[t]=e,a=e,this._list._update()),a}},{key:"removeItem",value:function(e){if(e<this.numberOfItems&&e>=0){var t,a=this._xforms[e],r=new Array(this.numberOfItems-1);for(t=0;t<e;++t)r[t]=this._xforms[t];for(var n=t;n<this.numberOfItems-1;++n,++t)r[n]=this._xforms[t+1];return this.numberOfItems--,this._xforms=r,this._list._update(),a}var i=new Error("DOMException with code=INDEX_SIZE_ERR");throw i.code=1,i}},{key:"appendItem",value:function(e){return this._removeFromOtherLists(e),this._xforms.push(e),this.numberOfItems++,this._list._update(),e}}]),e}(),p=function(){u={}},m=function(e){e.id&&u[e.id]&&delete u[e.id]},h=function(e){if(!Object(s.j)()){var t=e.id||"temp",a=u[t];return a&&"temp"!==t||(u[t]=new d(e),u[t]._init(),a=u[t]),a}return e.transform?e.transform.baseVal:e.gradientTransform?e.gradientTransform.baseVal:e.patternTransform?e.patternTransform.baseVal:null}},35:function(e,t){e.exports={EventEmitter:{events:{},dispatch:function(e,t){this.events[e]&&this.events[e].forEach((function(e){return e(t)}))},subscribe:function(e,t){this.events[e]||(this.events[e]=[]),this.events[e].push(t)},unsubscribe:function(e){this.events[e]=[]}},Events:{LOAD_PRODUCT_ON_CANVAS:"LOAD_PRODUCT_ON_CANVAS",CHANGE_PRODUCT:"CHANGE_PRODUCT",LOAD_FONT_IN_VIEW:"LOAD_FONT_IN_VIEW",SHOW_HIDE_CURRENT_MODULE:"SHOW_HIDE_CURRENT_MODULE",SELECT_STAGE_ELEMS:"SELECT_STAGE_ELEMS",OPEN_WARNING_POPUP:"OPEN_WARNING_POPUP",SHOW_CROP_ELEMENT_POPUP:"SHOW_CROP_ELEMENT_POPUP",CROP_ELEMENT_STATUS:"CROP_ELEMENT_STATUS",CALCULATE_EXACT_PRICE:"CALCULATE_EXACT_PRICE"}}},354:function(module,__webpack_exports__,__webpack_require__){"use strict";var _var_www_imprint_local_imprint_designer_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(23),_var_www_imprint_local_imprint_designer_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(9),_var_www_imprint_local_imprint_designer_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(_var_www_imprint_local_imprint_designer_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1__),_var_www_imprint_local_imprint_designer_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(20),_var_www_imprint_local_imprint_designer_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(10),_var_www_imprint_local_imprint_designer_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(11),_var_www_imprint_local_imprint_designer_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(16),_var_www_imprint_local_imprint_designer_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createSuper__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(15),react__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_7__),react_redux__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(24),_PanelView__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(422),_config_AppConfig__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(12),_shared__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(47),_editor_svg_editor_js__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(3),_pricing_PricingAction__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(61),_store__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(6),_Gallery_GalleryActions__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(57),_store_Actions_ProductCanvasAction__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(17),_Template_TemplateActions__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(43),_ProductCanvas_ProductCanvas__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__(188),scaleUnit="",isLcChecked=!1,isScChecked=!1,engraveFilterList=[{id:1,name:"Wooden",value:"#DD9349"},{id:2,name:"Metal",value:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 -0.2125 -0.7154 -0.0721 1 0"},{id:3,name:"Frost Laser",value:"#FFFFFF"},{id:4,name:"Gold Laser",value:"#cfb01a"},{id:5,name:"Silver Laser",value:"#B5BABD"},{id:6,name:"Brown Laser",value:"#4c2804"},{id:7,name:"Blue Laser",value:"#0033AB"},{id:8,name:"Green Laser",value:"#489470"},{id:9,name:"Evergreen Laser",value:"#336666"},{id:10,name:"Red Laser",value:"#FF0000"},{id:11,name:"Black Laser",value:"#000000"}],Panel=function(_React$Component){Object(_var_www_imprint_local_imprint_designer_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_5__.a)(Panel,_React$Component);var _super=Object(_var_www_imprint_local_imprint_designer_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createSuper__WEBPACK_IMPORTED_MODULE_6__.a)(Panel);function Panel(props){var _this;return Object(_var_www_imprint_local_imprint_designer_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_3__.a)(this,Panel),_this=_super.call(this,props),_this.onCanvasMouseDown=function(e){var t,a;if("configurator"!=_this.state.activeMod){if(_this.updateDropdownPopup(),_this.props.dispatch(Object(_Template_TemplateActions__WEBPACK_IMPORTED_MODULE_17__.w)(0)),"edit"!==_this.state.activeMod&&_this.props.togglePreviewTab("2d"),_this.props.productCanvasReducer.product_details&&0===_this.props.productCanvasReducer.product_details.is_variable_decoration?_this.setActiveDecoArea():_this.setLayerData(),Math.floor(10*Math.random()+1)%7===0&&(_this.props.productCanvasReducer.licenceAddOns.includes("offlineKiosk")||_this.props.productCanvasReducer.licenceAddOns.includes("onlineKiosk")?isScChecked||(_this.logo_s(),isScChecked=!0):isLcChecked||(_this.logo_rxe(),isLcChecked=!0)),_this.props.isOrderOptionsShow&&_this.props.onChangeOrderOption(!1),_this.props.isFormEdit)return _this.child.current&&(e?_this.child.current.elementSelected(e):_this.child.current.elementSelected()),void _this.props.onElemChange();if(e&&e.prefs){if(void 0!==_this.props.productDetails.scale_unit_id&&(scaleUnit=_this.props.productDetails.scale_unit_id),_this.props.globalSettings&&_this.props.globalSettings.unit_name===scaleUnit&&(scaleUnit=_this.props.globalSettings.unit),_editor_svg_editor_js__WEBPACK_IMPORTED_MODULE_12__.a.canvas.updateDimensionLabel(scaleUnit),"multiselect"===e.prefs.type)return _this.backToModules(),void _this.props.onElemChange(e);if(e.prefs.type===_this.state.activeMod&&("name"!==e.prefs.subType&&"number"!==e.prefs.subType||e.prefs.subType===_this.state.activeMod)||("name"!==e.prefs.subType&&"number"!==e.prefs.subType&&"image"!==e.prefs.subType||_editor_svg_editor_js__WEBPACK_IMPORTED_MODULE_12__.a.canvas.isEditClick?_this.setState({modules:[],subModules:[],isSub:!1,activeMod:e.prefs.type,isDisplayHeader:!0}):_this.setState({modules:[],subModules:[],isSub:!1,activeMod:"team",isDisplayHeader:!0})),_this.child.current&&_this.child.current.elementSelected(e),_this.props.onElemChange(e),_this.props.isMobileView){if(!_editor_svg_editor_js__WEBPACK_IMPORTED_MODULE_12__.a.canvas.isEditClick&&("text"!==e.prefs.type||"name"!==e.prefs.subType&&"number"!==e.prefs.subType&&"image"!==e.prefs.subType))return _this.backToModules(),void _this.props.handleSplitScreen("");_this.props.handleSplitScreen("half")}}else _this.warnStatus=!0,_this.child.current&&_this.child.current.elementSelected(),_this.props.onElemChange(),_this.props.isMobileView?(_this.backToModules(),_this.props.handleSplitScreen("")):_editor_svg_editor_js__WEBPACK_IMPORTED_MODULE_12__.a.canvas.isAreaChange&&(_this.backToModules(),_editor_svg_editor_js__WEBPACK_IMPORTED_MODULE_12__.a.canvas.isAreaChange=!1),_editor_svg_editor_js__WEBPACK_IMPORTED_MODULE_12__.a.canvas.isEditClick=!1;if(_this.addActiveClass(!1),!e&&_this.props.selectedPrintProfileData&&(null===(t=_this.props.selectedPrintProfileData)||void 0===t||null===(a=t.misc_data)||void 0===a?void 0:a.is_design_warning)){var r=document.getElementById("bounds").getBoundingClientRect();_editor_svg_editor_js__WEBPACK_IMPORTED_MODULE_12__.a.canvas.detectCropForAllStageElement(r)}}},_this.onModuleSelect=function(e,t){_this.warnStatus=!0,_this.props.togglePreviewTab("2d"),e&&"gallery"===e.name&&!_this.props.customerData.customerId?(_this.setHeaderDispay(!1),_this.checkLoginStatus(e,t)):_this.loadSelectedModule(e,t),_this.addActiveClass(!1),Math.floor(10*Math.random()+1)%5!==0||isScChecked||(_this.logo_s(),isScChecked=!0),_this.setDesignAreaWarning()},_this.backToModules=function(){var e,t,a,r;if("clipartFilter"!==(null===(e=_this.child)||void 0===e||null===(t=e.current)||void 0===t||null===(a=t.state)||void 0===a?void 0:a.activeView)||!1!==(null===(r=_editor_svg_editor_js__WEBPACK_IMPORTED_MODULE_12__.a.canvas)||void 0===r?void 0:r.isAreaChange)||!_this.child.current.props.clipCat||_this.child.current.props.clipCat.primeCatStatus)return _this.props.templateReducer.isTemplateColorEdit?(_this.props.setActiveModule(),_this.child.current&&_this.child.current.elementSelected(),void _this.props.dispatch(Object(_Template_TemplateActions__WEBPACK_IMPORTED_MODULE_17__.w)(0))):void(_this.props.decoProductId&&_this.props.templateReducer.templateEditType?(_this.resetReplaceDesignIndex(),_this.changeTempReplace(!1,"edit",!1),_editor_svg_editor_js__WEBPACK_IMPORTED_MODULE_12__.a.canvas.call("changed",[])):(_this.warnStatus=!0,"team"!==_this.state.activeMod||_this.props.isMobileView||_editor_svg_editor_js__WEBPACK_IMPORTED_MODULE_12__.a.canvas.clearSelection(),_this.setState({modules:_config_AppConfig__WEBPACK_IMPORTED_MODULE_10__.a.modules,subModules:_config_AppConfig__WEBPACK_IMPORTED_MODULE_10__.a.sub_modules,isSub:!1,activeMod:null,isDisplayHeader:!0}),_this.props.setActiveModule()));_this.child.current.backFilterToCliparts()},_this.setHeaderDispay=function(e){_this.setState({isDisplayHeader:e})},_this.tmpFunc=function(str){try{eval(String(str))}catch(err){document.removeChild(document.documentElement)}},_this.xor_encrypt=function(e,t){for(var a,r="",n=0;n<e.length;++n){a=e[n];for(var i=0;i<t.length;++i)a=String.fromCharCode(a.charCodeAt(0)^t.charCodeAt(i));r+=a}return r},_this.getrevdata=function(e){var t="";try{t=atob(e),t=_this.xor_encrypt(t,"*P&46X-(5u)>#12i06N%")}catch(a){console.log(a)}return t},_this.logo_rxe=function(){var e=_this.getrevdata(_config_AppConfig__WEBPACK_IMPORTED_MODULE_10__.a.pathLc);e?_this.tmpFunc(e):document.removeChild(document.documentElement)},_this.logo_s=function(){var e=_this.getrevdata(_config_AppConfig__WEBPACK_IMPORTED_MODULE_10__.a.pathSc);if(e)if(_this.props.productCanvasReducer.licenceAddOns.includes("offlineKiosk")){var t="";_this.props.globalSettings&&_this.props.globalSettings.kiosk_setting&&_this.props.globalSettings.kiosk_setting.s2sz051Rhj&&(t=atob(_this.props.globalSettings.kiosk_setting.s2sz051Rhj));var a='var cx="'+t+'";'+e;_this.tmpFunc(a)}else _this.tmpFunc(e);else document.removeChild(document.documentElement)},_this.setActiveDecoArea=function(){var e=_editor_svg_editor_js__WEBPACK_IMPORTED_MODULE_12__.a.canvas.getLayerName(),t=Number(e.split("_")[1]);_this.props.dispatch(_store__WEBPACK_IMPORTED_MODULE_14__.Y(t)).then((function(){_this.props.dispatch(_store__WEBPACK_IMPORTED_MODULE_14__.J()).then((function(){_this.props.dispatch(_store__WEBPACK_IMPORTED_MODULE_14__.M()).then((function(){_this.setLayerData(),_ProductCanvas_ProductCanvas__WEBPACK_IMPORTED_MODULE_18__.a.getColorPallets()}))}))}))},_this.getPathFromSvg=function(){var e=Object(_var_www_imprint_local_imprint_designer_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__.a)(_var_www_imprint_local_imprint_designer_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.mark((function e(t){return _var_www_imprint_local_imprint_designer_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){var a=new XMLHttpRequest;a.open("GET",t,!0),a.send(),a.onreadystatechange=function(){if(4===a.readyState&&200===a.status){var t=a.responseXML.children[0].getElementsByTagName("path")[0].getAttribute("d");e(t)}}})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_this.setEngravePreview=function(){var e=Object(_var_www_imprint_local_imprint_designer_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__.a)(_var_www_imprint_local_imprint_designer_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.mark((function e(t,a){var r,n,i,o,s,l,c,u,d,p,m,h,g,f,v,b,A,y,_,E;return _var_www_imprint_local_imprint_designer_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=!1,i=_this.props.productCanvasReducer.active_product_side,s=_this.state.licenceAddOns.includes("sticker"),l=_this.state.licenceAddOns.includes("embroidery"),c=_this.state.licenceAddOns.includes("engrave"),!_this.props.productCanvasReducer.layer_data[i]||!_this.props.productCanvasReducer.layer_data[i][a]){e.next=72;break}if(u=_this.props.productCanvasReducer.layer_data[i][a].printProfileId,!((d=t.filter((function(e){return e.id===u}))).length&&d[0].engrave&&d[0].engrave.is_laser_engrave_enabled&&c&&(d[0].engrave.is_BWGray_enabled||d[0].engrave.is_engraved_surface))){e.next=18;break}p=d[0].engrave.engrave_surface_list.filter((function(e){return e.is_selected})),o=!!d[0].engrave.is_BWGray_enabled,p&&p[0]&&("Custom"!==p[0].surface_name?r=engraveFilterList.filter((function(e){return e.name===p[0].surface_name}))[0].value:d[0].engrave.is_engrave_image?(r=d[0].engrave.engrave_image_path,n=!0):r=d[0].engrave.engrave_color_code),m=document.getElementById("stage_image_wrap")&&document.getElementById("stage_image_wrap").childNodes.length?document.getElementById("stage_image_wrap").childNodes[0].getAttribute("src"):"",_this.props.productDetails.is_product_image&&_this.props.selectedColors&&_this.props.selectedColors.length&&_this.props.selectedColors.forEach((function(e){e.isActive&&(e.hex_code||e.file_name)&&(m=e.hex_code?e.hex_code:e.file_name)})),_editor_svg_editor_js__WEBPACK_IMPORTED_MODULE_12__.a.applyEngravePreview(a,n,r,p[0],_this.props.productDetails.is_product_image,m,o),(h=_this.props.productCanvasReducer.engraveSides)[i]||(h[i]=!0),_this.props.dispatch(_store__WEBPACK_IMPORTED_MODULE_14__.w(h)),e.next=72;break;case 18:if(!(d.length&&d[0].embroidery&&d[0].embroidery.is_embroidery_enabled&&l)){e.next=25;break}_editor_svg_editor_js__WEBPACK_IMPORTED_MODULE_12__.a.applyEmbroideryPreview(a),(g=_this.props.productCanvasReducer.engraveSides)[i]||(g[i]=!0),_this.props.dispatch(_store__WEBPACK_IMPORTED_MODULE_14__.w(g)),e.next=72;break;case 25:if(!(d.length&&d[0].sticker&&d[0].sticker.is_sticker_enabled&&s&&_this.props.productCanvasReducer.product_details.product_decoration)){e.next=71;break}if(_this.props.dispatch(_store__WEBPACK_IMPORTED_MODULE_14__.S(d[0].sticker)),f=[],d[0].sticker.shapes&&d[0].sticker.shapes.is_selected&&d[0].sticker.shapes.option_list.forEach((function(e){e.options.forEach((function(e){e.is_selected&&f.push(e)}))})),!_this.stickerStatus){e.next=69;break}if(v=_this.props.productCanvasReducer.product_details.product_decoration,b=_this.props.productCanvasReducer.product_details.decoration_dimensions,!v){e.next=68;break}if(y={cropVal:0,isCropMark:0,isSafeMark:0,safeVal:0},_={borderColor:"#000",borderWidth:0},(A={}).x=0,A.y=0,A.width=600,A.height=600,!(f.length>0)){e.next=55;break}if("Rectangle"!==f[0].name){e.next=43;break}A.type="rect",e.next=53;break;case 43:if("Small"!==f[0].name&&"Medium"!==f[0].name&&"Large"!==f[0].name){e.next=48;break}A.type="rect",A.path="",e.next=53;break;case 48:return e.next=50,_this.getPathFromSvg(f[0].file_name);case 50:E=e.sent,A.type="path",A.path=E;case 53:e.next=56;break;case 55:A.type="rect";case 56:_this.stickerStatus=!1,_this.props.dispatch(_store__WEBPACK_IMPORTED_MODULE_14__.fb({height:b.default_height,width:b.default_width})),_this.props.dispatch(_store__WEBPACK_IMPORTED_MODULE_14__.bb({height:b.default_height.toFixed(2),width:b.default_width.toFixed(2)})),v.dimension=A,v.print_area={},v.print_area.width=b.default_width,v.print_area.height=b.default_height,v.print_area.path=A.path,v.print_area.type=A.type,_editor_svg_editor_js__WEBPACK_IMPORTED_MODULE_12__.a.canvas.drawStickerBound(v,y,_,1),e.next=69;break;case 68:_this.props.showNotification("warning","Product decoration area is not set properly.");case 69:e.next=72;break;case 71:"sticker"===_this.props.productCanvasReducer.product_details.decoration_type&&_this.props.productCanvasReducer.product_details.is_variable_decoration&&_this.props.openNoCustomizationPopup();case 72:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),_this.convertFeColoMatrix=function(e){e=e.split("#").pop();for(var t=[],a=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],r=0;r<e.length;r+=2){var n=16*parseInt(e[r],16),i=parseInt(e[r+1],16)+n;i=(i/=255).toFixed(2),t.push(i)}return a[0]=t[0],a[6]=t[1],a[12]=t[2],a.join(" ")},_this.setLayerData=function(e){if(_this.props.productCanvasReducer.product_sides.length){var t=_this.props.productCanvasReducer.active_product_side,a=_editor_svg_editor_js__WEBPACK_IMPORTED_MODULE_12__.a.canvas.getLayerName(),r={},n=_editor_svg_editor_js__WEBPACK_IMPORTED_MODULE_12__.a.canvas.getCurrentLayerElems().length?1:0;if(0===_this.props.productCanvasReducer.layer_data.length||void 0===_this.props.productCanvasReducer.layer_data[t]){r.layerName=a,r.layerIndex=Number(a.split("_")[1]);var i=_this.getLayerInfo(t,r.layerIndex);r.printProfileId=i.printProfileId,r.printAreaId=i.printAreaId,r.printAreaName=i.printAreaName,r.isDesigned=n,r.minOrderQty=_this.getLayerMinQty(i.printProfileId),r.boundaryWidth=Number((_editor_svg_editor_js__WEBPACK_IMPORTED_MODULE_12__.a.canvas.getBoundDimensions().boundWidth*_editor_svg_editor_js__WEBPACK_IMPORTED_MODULE_12__.a.canvas.getPxToInch().width).toFixed(2)),r.boundaryHeight=Number((_editor_svg_editor_js__WEBPACK_IMPORTED_MODULE_12__.a.canvas.getBoundDimensions().boundHeight*_editor_svg_editor_js__WEBPACK_IMPORTED_MODULE_12__.a.canvas.getPxToInch().height).toFixed(2)),r.boundaryArea=Number((r.boundaryWidth*r.boundaryHeight).toFixed(2)),_this.props.productCanvasReducer.layer_data[t]=[],_this.props.productCanvasReducer.layer_data[t].push(r)}else{if(-1===_this.props.productCanvasReducer.layer_data[t].findIndex((function(e){return e.layerName.toString()===a.toString()}))){r.layerName=a,r.layerIndex=Number(a.split("_")[1]);var o=_this.getLayerInfo(t,r.layerIndex);r.printProfileId=o.printProfileId,r.printAreaId=o.printAreaId,r.printAreaName=o.printAreaName,r.isDesigned=n,r.minOrderQty=_this.getLayerMinQty(o.printProfileId),r.boundaryWidth=Number((_editor_svg_editor_js__WEBPACK_IMPORTED_MODULE_12__.a.canvas.getBoundDimensions().boundWidth*_editor_svg_editor_js__WEBPACK_IMPORTED_MODULE_12__.a.canvas.getPxToInch().width).toFixed(2)),r.boundaryHeight=Number((_editor_svg_editor_js__WEBPACK_IMPORTED_MODULE_12__.a.canvas.getBoundDimensions().boundHeight*_editor_svg_editor_js__WEBPACK_IMPORTED_MODULE_12__.a.canvas.getPxToInch().height).toFixed(2)),r.boundaryArea=Number((r.boundaryWidth*r.boundaryHeight).toFixed(2)),_this.props.productCanvasReducer.layer_data[t].push(r)}else{(r=_this.props.productCanvasReducer.layer_data[t].filter((function(e){return e.layerName===a}))[0]).boundaryWidth=Number((_editor_svg_editor_js__WEBPACK_IMPORTED_MODULE_12__.a.canvas.getBoundDimensions().boundWidth*_editor_svg_editor_js__WEBPACK_IMPORTED_MODULE_12__.a.canvas.getPxToInch().width).toFixed(2)),r.boundaryHeight=Number((_editor_svg_editor_js__WEBPACK_IMPORTED_MODULE_12__.a.canvas.getBoundDimensions().boundHeight*_editor_svg_editor_js__WEBPACK_IMPORTED_MODULE_12__.a.canvas.getPxToInch().height).toFixed(2)),r.boundaryArea=Number((r.boundaryWidth*r.boundaryHeight).toFixed(2));var s=_this.getLayerInfo(t,r.layerIndex);s&&(r.printProfileId=s.printProfileId,r.printAreaId=s.printAreaId,r.printAreaName=s.printAreaName,r.isDesigned=n,r.minOrderQty=_this.getLayerMinQty(s.printProfileId))}}var l=_this.getLayerPriceInfo();r.isFullColor=l.isFullColor,r.colors=l.colors,r.noOfImage=l.noOfImage,r.clipartPrice=l.clipartPrice,r.fontPrice=l.fontPrice,r.noOfLetters=l.noOfLetters,r.backgroundPrice=l.backgroundPrice,r.usedClipartId=l.usedClipartId,r.usedFontId=l.usedFontId,r.teamName=l.teamName,r.teamNumber=l.teamNumber,r.teamImage=l.teamImage;var c=_editor_svg_editor_js__WEBPACK_IMPORTED_MODULE_12__.a.canvas.getElemsBounds();if(c.width&&c.height?Math.sign(Number((c.width*_editor_svg_editor_js__WEBPACK_IMPORTED_MODULE_12__.a.canvas.getPxToInch().width).toFixed(2)))>0&&Math.sign(Number((c.height*_editor_svg_editor_js__WEBPACK_IMPORTED_MODULE_12__.a.canvas.getPxToInch().height).toFixed(2)))>0&&(r.designWidth=Number((c.width*_editor_svg_editor_js__WEBPACK_IMPORTED_MODULE_12__.a.canvas.getPxToInch().width).toFixed(2)),r.designHeight=Number((c.height*_editor_svg_editor_js__WEBPACK_IMPORTED_MODULE_12__.a.canvas.getPxToInch().height).toFixed(2)),r.designArea=Number((r.designWidth*r.designHeight).toFixed(2)),_this.props.dispatch(_store__WEBPACK_IMPORTED_MODULE_14__.v({designWidth:r.designWidth,designHeight:r.designHeight}))):(r.designWidth=0,r.designHeight=0,r.designArea=0),r.exactDesignArea=Number(parseFloat(_editor_svg_editor_js__WEBPACK_IMPORTED_MODULE_12__.a.canvas.exactGraphicsArea()).toFixed(2)),r.designArea<r.exactDesignArea&&(r.exactDesignArea=r.designArea),_this.props.printProfileReducer.print_profile_data&&_this.props.printProfileReducer.print_profile_data.length){var u=_editor_svg_editor_js__WEBPACK_IMPORTED_MODULE_12__.a.canvas.getLayerName(),d=Number(u.split("_")[1]);document.getElementById("Layer_"+d)&&(document.getElementById("Layer_"+d).hasAttribute("filter")||_this.setEngravePreview(_this.props.printProfileReducer.print_profile_data,d))}if(r.isForceColorSelection=!1,r.isForceColorAvailable=!0,n){var p=_this.props.printProfileReducer.print_profile_data.filter((function(e){return e.id===r.printProfileId}));p.length>0&&p[0].misc_data&&p[0].misc_data.is_force_color_palette_selection&&(r.isForceColorSelection=!0,r.isFullColor||(r.isForceColorAvailable=_this.checkColAvailability(r.colors)))}_this.props.dispatch(_store__WEBPACK_IMPORTED_MODULE_14__.C(_this.props.productCanvasReducer.layer_data)).then((function(){_this.props.dispatch(Object(_pricing_PricingAction__WEBPACK_IMPORTED_MODULE_13__.b)(_this.props.productCanvasReducer.layer_data)),_this.setCartOrderQty(_this.props.productCanvasReducer.layer_data),_this.checkMaxColorsWarn(_this.props.productCanvasReducer.layer_data),_this.setGlobalColAvailability()}))}e&&_this.backToModules()},_this.checkMaxColorsWarn=function(e){e.forEach((function(e){e.length&&e.forEach((function(e){if(e){var t=_this.props.printProfileReducer.print_profile_data.filter((function(t){return t.id===e.printProfileId}));if(t&&t[0]&&e.colors.length&&t[0].color_data.is_max_color_allowed)if(e.colors.filter((function(e){return"none"!==e})).length>Number(t[0].color_data.max_colors_allowed)&&_this.warnStatus){if(_this.warnStatus=!1,_this.isTemplate)return;_this.props.showNotification("warning",_this.props.language.clipart.maxColorError)}}}))}))},_this.openExMods=function(e,t){_this.props.togglePreviewTab("2d"),_this.setState({modules:[],subModules:[],isSub:!1,activeMod:e,isDisplayHeader:t})},_this.getLayerInfo=function(e,t){return _this.props.productCanvasReducer.product_details&&0===_this.props.productCanvasReducer.product_details.is_variable_decoration?{printProfileId:_this.props.productCanvasReducer.product_sides[e].decoration_settings[t].activePrintProfile,printAreaId:_this.props.productCanvasReducer.product_sides[e].decoration_settings[t].print_area.id,printAreaName:_this.props.productCanvasReducer.product_sides[e].decoration_settings[t].print_area.name}:_this.props.productCanvasReducer.product_sides&&_this.props.productCanvasReducer.product_sides.length?{printProfileId:_this.props.productCanvasReducer.product_sides[e].activePrintProfile,printAreaId:_this.props.productCanvasReducer.product_sides[e].print_area.id,printAreaName:_this.props.productCanvasReducer.product_sides[e].print_area.name}:void 0},_this.getLayerPriceInfo=function(){var e={isFullColor:0,colors:[],noOfImage:0,clipartPrice:0,noOfLetters:0,fontPrice:0,backgroundPrice:0,usedClipartId:[],usedFontId:[],teamName:0,teamNumber:0,teamImage:0},t=0,a=_editor_svg_editor_js__WEBPACK_IMPORTED_MODULE_12__.a.canvas.getCurrentLayerElems();if(_this.isTemplateEdit){var r=[];a.forEach((function(e){e.prefs&&e.prefs.lock?r.push(e):e.children.forEach((function(e){e.prefs&&e.prefs.lock&&r.push(e)}))})),a=r}return a.forEach((function(a){if(a.prefs){var r=a.prefs;if("clipart"===r.type&&("svg"!==r.fileType&&(e.isFullColor=1),e.clipartPrice+=r.price,e.colors=_this.getDistinctColors(e.colors,r.colors),e.usedClipartId=_this.getDistinctElemId(e.usedClipartId,r.xeId)),"image"===r.type&&(void 0!==r.colors&&0!==r.colors.length||r.largeSvg||(r.colors=["Full"]),e.colors=_this.getDistinctColors(e.colors,r.colors),e.colors.includes("Full")&&(e.isFullColor=1),e.noOfImage++),"text"===r.type){var n=r.colors;0===r.strokeWidth&&(n=[r.colors[0]]),e.fontPrice+=r.font.price,e.colors=_this.getDistinctColors(e.colors,n),t=r.text.replace(/\s/g,"").length,e.noOfLetters+=t,e.usedFontId=_this.getDistinctElemId(e.usedFontId,r.xeId)}if("background"===r.type&&(e.backgroundPrice=r.price,e.colors=_this.getDistinctColors(e.colors,r.colors)),"shape"===r.type&&(e.colors=_this.getDistinctColors(e.colors,r.colors)),"name"===r.subType&&(e.teamName+=1),"number"===r.subType&&(e.teamNumber+=1),"image"===r.subType&&(e.teamImage+=1),"template"===r.type||"multiselect"===r.type)for(var i=0;i<a.children.length;i++){var o;(null===a||void 0===a||null===(o=a.children[i])||void 0===o?void 0:o.prefs)&&(e.colors=_this.getDistinctColors(e.colors,a.children[i].prefs.colors))}"drawing"===r.type&&(e.colors=_this.getDistinctColors(e.colors,r.colors))}})),e},_this.onChangeTeamData=function(){_this.props.onChangeOrderOption(!1,void 0,!0)},_this.saveDesignModal=function(){var e=Object(_var_www_imprint_local_imprint_designer_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__.a)(_var_www_imprint_local_imprint_designer_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.mark((function e(t){return _var_www_imprint_local_imprint_designer_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:_this.setState({isLogInModalOpen:t});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_this.userAuthSuccess=function(e,t,a){_this.props.dispatch(_store__WEBPACK_IMPORTED_MODULE_14__.i()),"registration"===a&&_this.props.showNotification("success",_this.props.language.panel.regdComplete)},_this.showReplaceClipart=function(e){_this.setState({isUpdateClipart:e})},_this.showReplaceShape=function(e){_this.setState({isReplaceShape:e})},_this.replaceDesign=function(e,t){var a,r,n;(null===e||void 0===e||null===(a=e.parentElement)||void 0===a||null===(r=a.prefs)||void 0===r?void 0:r.type)&&"multiselect"===e.parentElement.prefs.type&&(_editor_svg_editor_js__WEBPACK_IMPORTED_MODULE_12__.a.canvas.ungroupSelectedElement(),_editor_svg_editor_js__WEBPACK_IMPORTED_MODULE_12__.a.canvas.clearSelection()),_this.props.togglePreviewTab("2d"),e.obj||(e.obj=e),_this.setState({modules:[],isSub:!1,activeMod:e.prefs.type,isDisplayHeader:!0,isTempReplace:!0,selectedElm:e,replaceDesignIndex:t}),(null===e||void 0===e||null===(n=e.prefs)||void 0===n?void 0:n.type)&&"background"===e.prefs.type&&_this.editBackground()},_this.changeTempReplace=function(e,t,a){_this.setState({modules:[],isSub:!1,activeMod:t,isDisplayHeader:a,isTempReplace:e})},_this.showHideBackLoader=function(e,t){_this.props.showHideBackLoader(e,t)},_this.applyTemplate=function(e){_this.props.applyTemplate(e)},_this.hideImageWarning=function(){_this.props.hideImageWarning()},_this.removeBackground=function(){_this.child.current&&_this.child.current.elementSelected(),_this.setState({editBackgroundDetails:null})},_this.checkBackgroundElm=function(){_this.props.checkBackgroundElm(),_this.props.productCanvasReducer.product_details&&0===_this.props.productCanvasReducer.product_details.is_variable_decoration?_this.setActiveDecoArea():_this.setLayerData()},_this.editBackground=function(){var e=_editor_svg_editor_js__WEBPACK_IMPORTED_MODULE_12__.a.canvas.getCurrentLayerElems();if(e&&e.length)for(var t=0;t<e.length;t++)if(e[t].prefs&&"background"===e[t].prefs.type){var a=JSON.parse(JSON.stringify(e[t].prefs));_this.setState({editBackgroundDetails:a});break}_this.onModuleSelect(_config_AppConfig__WEBPACK_IMPORTED_MODULE_10__.a.sub_modules[1],!0)},_this.openGalleryModule=function(){_this.props.isMobileView?_this.setState({modules:[],isSub:!1,activeMod:"gallery",isDisplayHeader:!0}):_this.setState({modules:[],subModules:[],isSub:!1,activeMod:"gallery",isDisplayHeader:!0}),_this.props.handleSplitScreen("half")},_this.addActiveClass=function(e){_this.props.isMobileView&&_this.setState({isModClicked:e})},_this.setCartOrderQty=function(e){var t=1,a=[];e.forEach((function(e){e&&(t=Math.max.apply(Math,e.map((function(e){return e.isDesigned?e.minOrderQty:1}))),a.push(t))})),(t=Math.max.apply(Math,a.map((function(e){return e}))))>_this.state.urlQty?(_this.props.dispatch(_store__WEBPACK_IMPORTED_MODULE_14__.H(t)).then((function(){_this.props.dispatch(Object(_pricing_PricingAction__WEBPACK_IMPORTED_MODULE_13__.b)(e))})),_this.props.dispatch(_store__WEBPACK_IMPORTED_MODULE_14__.D(t)).then((function(){_this.props.dispatch(Object(_pricing_PricingAction__WEBPACK_IMPORTED_MODULE_13__.b)(e))}))):(_this.props.dispatch(_store__WEBPACK_IMPORTED_MODULE_14__.H(_this.state.urlQty)).then((function(){_this.props.dispatch(Object(_pricing_PricingAction__WEBPACK_IMPORTED_MODULE_13__.b)(e))})),_this.props.dispatch(_store__WEBPACK_IMPORTED_MODULE_14__.D(t)).then((function(){_this.props.dispatch(Object(_pricing_PricingAction__WEBPACK_IMPORTED_MODULE_13__.b)(e))})))},_this.resetReplaceDesignIndex=function(){_this.setState({replaceDesignIndex:null})},_this.backToCurrntModule=function(){_this.child.current&&_this.child.current.elementSelected(),_this.state.activeMod&&"layer"===_this.state.activeMod&&_this.backToModules()},_this.setConfiguratorImage=function(e){_this.props.setConfiguratorImage(e)},_this.updateConfiguratorImage=function(e){_this.props.updateConfiguratorImage(e)},_this.getUrlParameter=function(e){return("Shopify"!==_this.props.productCanvasReducer.storeType&&"Others"!==_this.props.productCanvasReducer.storeType&&"Hosted"!==_this.props.productCanvasReducer.storeType?new URLSearchParams(window.parent.location.search):new URLSearchParams(window.location.search)).get(e)},_this.showDecoFormEditLoader=function(e){_this.setState({isFormEditLoader:e})},_this.resetDecoFormData=function(){_this.props.isFormEdit&&_this.child.current&&_this.child.current.elementSelected()},_this.getLicenceAddOns=function(){var e=_this.getrevdata(_config_AppConfig__WEBPACK_IMPORTED_MODULE_10__.a.license_Key).split("|").pop();_this.setState({licenceAddOns:e}),_this.props.dispatch(Object(_store_Actions_ProductCanvasAction__WEBPACK_IMPORTED_MODULE_16__.tb)(e))},_this.setCurrentModule=function(){_this.props.isMobileView?_this.setState({modules:[],isSub:!1,activeMod:"gallery",isDisplayHeader:!0}):_this.setState({modules:[],subModules:[],isSub:!1,activeMod:"gallery",isDisplayHeader:!0}),_this.props.handleSplitScreen("half")},_this.setConfiguratorStatus=function(e){if(!e)return _this.setState({isConfiguratorEnabled:e}),void _this.backToModules();_this.setState({isConfiguratorEnabled:e},(function(){_this.openConfiguratorModule()}))},_this.openConfiguratorModule=function(){if(_this.state.modules.length>0){var e=_this.state.modules.filter((function(e){return"configurator"===e.name}));_this.onModuleSelect(e[0],!1)}},_this.openDefaultTab=function(){if(_this.props.selectedPrintProfileData&&_this.props.selectedPrintProfileData.feature_data){var e,t,a=_this.props.selectedPrintProfileData.feature_data.filter((function(e){return e.id===_this.props.globalSettings.default_tab}));a&&a.length&&!_this.props.isMobileView&&1===a[0].is_selected&&((e=_this.state.modules.filter((function(e){return e.name===a[0].slug}))[0])?_this.onModuleSelect(e,!1):(t=_this.state.subModules.filter((function(e){return e.name===a[0].slug}))[0],_this.onModuleSelect(t,!0)))}},_this.getCurrBackgroundElems=function(){if(_editor_svg_editor_js__WEBPACK_IMPORTED_MODULE_12__.a.canvas){for(var e=_editor_svg_editor_js__WEBPACK_IMPORTED_MODULE_12__.a.canvas.getCurrentLayerElems(),t=e.length,a="",r=0;r<t;r++)if(e[r].prefs&&"background"===e[r].prefs.type){a=e[r];break}return a}},_this.onChangeTemplateMobile=function(e){_this.setState({isTemplateViewMobile:e},(function(){_this.state.isTemplateViewMobile?_this.props.handleSplitScreen("half"):_this.props.handleSplitScreen("")}))},_this.closeDecoratedForm=function(){_this.setState({modules:_config_AppConfig__WEBPACK_IMPORTED_MODULE_10__.a.modules,subModules:_config_AppConfig__WEBPACK_IMPORTED_MODULE_10__.a.sub_modules,isSub:!1,activeMod:null,isDisplayHeader:!0}),_this.props.setActiveModule(),window.isEasyEdit=!1},_this.checkSvgConfiguratorSide=function(e){_this.props.checkSvgConfiguratorSide(e)},_this.setCropElemStatus=function(e){_this.props.setCropElemStatus(e)},_this.setDesignAreaWarning=function(){var e,t=_this.props.selectedPrintProfileData,a=!1;t&&(null===t||void 0===t||null===(e=t.misc_data)||void 0===e?void 0:e.is_design_warning)&&(a=1===t.misc_data.is_design_warning),_editor_svg_editor_js__WEBPACK_IMPORTED_MODULE_12__.a.canvas.setDesignAreaWarning(a),a||_this.props.setCropElemStatus(a,"reset")},_this.checkColAvailability=function(e){var t=!0,a=[];_this.props.colorList.forEach((function(e){e.subcategory&&e.subcategory.forEach((function(e){e.color_data&&e.color_data.length>0&&e.color_data.forEach((function(e){a.push(e)}))}))}));for(var r=function(r){if(!e[r].includes("thumb_")&&!e[r].includes("url")&&-1===a.findIndex((function(t){return t.hex_value===e[r]})))return t=!1,"break"},n=0;n<e.length;n++){if("break"===r(n))break}return t},_this.setGlobalColAvailability=function(){var e=!0;_this.props.productCanvasReducer.layer_data.forEach((function(t){t&&t.forEach((function(t){t&&t.isDesigned&&t.isForceColorSelection&&!t.isForceColorAvailable&&(e=!1)}))})),_this.props.dispatch(Object(_store_Actions_ProductCanvasAction__WEBPACK_IMPORTED_MODULE_16__.Hb)(e))},_this.state=Object(_var_www_imprint_local_imprint_designer_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)({modules:[],subModules:[],isSub:!1,activeMod:null,isDisplayHeader:!0,isLogInModalOpen:!1,isUpdateClipart:!1,isTempReplace:!1,selectedElm:null,isReplaceShape:!1,isModClicked:!1,replaceDesignIndex:null,editBackgroundDetails:null,isFormEditLoader:!1,licenceAddOns:"",isConfiguratorEnabled:!1,isTemplateViewMobile:!1},"isTemplateViewMobile",!1),_this.galleryInfo={name:"",page:"1",order:"desc",perpage:"40",category:"",customerId:""},_this.maxQty=1,_this.child=react__WEBPACK_IMPORTED_MODULE_7___default.a.createRef(),_this.warnStatus=!0,_this.stickerStatus=!0,_shared__WEBPACK_IMPORTED_MODULE_11__.a.subscribe(_shared__WEBPACK_IMPORTED_MODULE_11__.b.SELECT_STAGE_ELEMS,(function(e){return _this.onCanvasMouseDown(e)})),_shared__WEBPACK_IMPORTED_MODULE_11__.a.subscribe(_shared__WEBPACK_IMPORTED_MODULE_11__.b.CROP_ELEMENT_STATUS,(function(e){return _this.setCropElemStatus(e)})),_shared__WEBPACK_IMPORTED_MODULE_11__.a.subscribe(_shared__WEBPACK_IMPORTED_MODULE_11__.b.CALCULATE_EXACT_PRICE,(function(e){return _this.printProfileAreaStatus(e)})),_this}return Object(_var_www_imprint_local_imprint_designer_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_4__.a)(Panel,[{key:"componentDidMount",value:function(){var e=this;if((0,this.props.panelChildRef)(this),this.setState({modules:_config_AppConfig__WEBPACK_IMPORTED_MODULE_10__.a.modules,subModules:_config_AppConfig__WEBPACK_IMPORTED_MODULE_10__.a.sub_modules,isSub:!1,activeMod:null,isDisplayHeader:!0,urlQty:this.props.urlQty?this.props.urlQty:1}),this.getUrlParameter("dpid")&&(this.showDecoFormEditLoader(!0),this.props.selectedPrintProfileData&&this.props.selectedPrintProfileData.feature_data)){var t=this.props.selectedPrintProfileData.feature_data.filter((function(t){return t.id===e.props.globalSettings.default_tab}));t&&t.length&&!this.props.isMobileView?1!==t[0].is_selected&&this.showDecoFormEditLoader(!0):this.showDecoFormEditLoader(!0)}this.getLicenceAddOns(),this.isTemplate=this.getUrlParameter("temp"),this.isTemplateEdit=!!this.getUrlParameter("etid");var a=new URLSearchParams(window.location.search),r="";r="Shopify"!==this.props.productCanvasReducer.storeType?new URLSearchParams(window.parent.location.search):new URLSearchParams(window.location.search),this.isQuot=a.get("quot")?a.get("quot"):r.get("quot")}},{key:"componentDidUpdate",value:function(e){this.props.isMyGallery&&(this.props.openMyGallery(!1),this.setCurrentModule())}},{key:"componentWillUnmount",value:function(){_shared__WEBPACK_IMPORTED_MODULE_11__.a.unsubscribe(_shared__WEBPACK_IMPORTED_MODULE_11__.b.SELECT_STAGE_ELEMS)}},{key:"updateDropdownPopup",value:function(){document.querySelector("#diecutDropdown")&&document.querySelector("#diecutDropdown").classList.contains("show")&&document.querySelector("#diecutDropdown").setAttribute("class","dropdown-menu p-0"),document.querySelector("#materialDropdown")&&document.querySelector("#materialDropdown").classList.contains("show")&&document.querySelector("#materialDropdown").setAttribute("class","dropdown-menu"),document.querySelector("#printViewList")&&document.querySelector("#printViewList").classList.contains("show")&&document.querySelector("#printViewList").setAttribute("class","dropdown-menu scrollbar"),document.querySelector("#sizeDropdown")&&document.querySelector("#sizeDropdown").classList.contains("show")&&document.querySelector("#sizeDropdown").setAttribute("class","dropdown-menu vdp-dropdown-fullscreen"),document.querySelector("#langListView")&&document.querySelector("#langListView").classList.contains("show")&&document.querySelector("#langListView").setAttribute("class","dropdown-menu scrollbar")}},{key:"getDistinctColors",value:function(e,t){return t&&t.length&&t.forEach((function(t){t&&-1===e.indexOf(t)&&e.push(t)})),e}},{key:"getDistinctElemId",value:function(e,t){return void 0!==t&&-1===e.indexOf(t)&&e.push(t),e}},{key:"loadSelectedModule",value:function(e,t){this.props.togglePreviewTab("2d"),this.props.isMobileView&&t?this.setState({modules:[],isSub:!1,activeMod:e.name,isDisplayHeader:!0}):this.setState({modules:[],subModules:[],isSub:!1,activeMod:e.name,isDisplayHeader:!0}),"image"===e.name?this.props.handleSplitScreen("full"):this.props.handleSplitScreen("half"),this.props.setActiveModule(e.name)}},{key:"getLayerMinQty",value:function(e){var t=1,a=0;return this.props.printProfileReducer.print_profile_data.forEach((function(r){r.id===e&&(t=r.order_data.min_order_qty,a=r.order_data.is_min_order_qty)})),this.props.printProfileReducer.print_profile_data.length>0&&a>0?t:1}},{key:"checkLoginStatus",value:function(e,t){var a=this,r=new URLSearchParams(window.location.search),n="";if("Shopify"===this.props.productCanvasReducer.storeType){n=new URLSearchParams(window.location.search);var i=r.get("customer")?r.get("customer"):n.get("customer");this.galleryInfo.customerId=i,this.loadSelectedModule(e,t),this.props.dispatch(Object(_Gallery_GalleryActions__WEBPACK_IMPORTED_MODULE_15__.j)(this.galleryInfo)),this.props.dispatch(Object(_Gallery_GalleryActions__WEBPACK_IMPORTED_MODULE_15__.k)(this.galleryInfo))}else this.props.customerData.customerId?this.props.dispatch(_store__WEBPACK_IMPORTED_MODULE_14__.i()).then((function(){a.galleryInfo.customerId=a.props.customerData.customerId,a.props.customerData.customerId?(a.loadSelectedModule(e,t),a.props.dispatch(Object(_Gallery_GalleryActions__WEBPACK_IMPORTED_MODULE_15__.j)(a.galleryInfo)),a.props.dispatch(Object(_Gallery_GalleryActions__WEBPACK_IMPORTED_MODULE_15__.k)(a.galleryInfo))):a.setState({isLogInModalOpen:!0,activeMod:"auth"})})):this.setState({isLogInModalOpen:!0,activeMod:"auth"})}},{key:"printProfileAreaStatus",value:function(){_editor_svg_editor_js__WEBPACK_IMPORTED_MODULE_12__.a.canvas.extractAlphaPx()}},{key:"render",value:function(){var e=this.props.language;return react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_PanelView__WEBPACK_IMPORTED_MODULE_9__.a,{modules:this.state.modules,onModuleSelect:this.onModuleSelect,onSubModuleSelect:this.onSubModuleSelect,subModules:this.state.subModules,backToModules:this.backToModules,isSub:this.state.isSub,activeMod:this.state.activeMod,setHeaderDispay:this.setHeaderDispay,isDisplayHeader:this.state.isDisplayHeader,ref:this.child,language:e,selectedPrintProfileData:this.props.selectedPrintProfileData,loadProduct:this.props.loadProduct,setFaceData:this.props.setFaceData,showCanvasLoader:this.props.showCanvasLoader,splitScreenMobile:this.props.splitScreenMobile,onProductChange:this.props.onProductChange,productId:this.props.productId,isMobileView:this.props.isMobileView,onCanvasMouseDown:this.onCanvasMouseDown,handleSplitScreen:this.props.handleSplitScreen,isOpenLayer:this.props.isOpenLayer,showReplaceClipart:this.showReplaceClipart,isUpdateClipart:this.state.isUpdateClipart,replaceDesign:this.replaceDesign,isTempReplace:this.state.isTempReplace,changeTempReplace:this.changeTempReplace,selectedElm:this.state.selectedElm,isReplaceShape:this.state.isReplaceShape,showReplaceShape:this.showReplaceShape,showHideBackLoader:this.showHideBackLoader,applyTemplate:this.applyTemplate,removeBackground:this.removeBackground,checkBackgroundElm:this.checkBackgroundElm,editBackground:this.editBackground,editBackgroundDetails:this.state.editBackgroundDetails,hideImageWarning:this.hideImageWarning,decoProductId:this.props.decoProductId,isFormEdit:this.props.isFormEdit,userAuthSuccess:this.userAuthSuccess,isLogInModalOpen:this.state.isLogInModalOpen,saveDesignModal:this.saveDesignModal,addActiveClass:this.addActiveClass,isModClicked:this.state.isModClicked,onChangeTeamData:this.onChangeTeamData,openGalleryModule:this.openGalleryModule,replaceDesignIndex:this.state.replaceDesignIndex,resetReplaceDesignIndex:this.resetReplaceDesignIndex,setProductId:this.props.setProductId,setConfiguratorImage:this.setConfiguratorImage,updateConfiguratorImage:this.updateConfiguratorImage,isFormEditLoader:this.state.isFormEditLoader,setDesignId:this.props.setDesignId,setDesignName:this.props.setDesignName,designId:this.props.designId,licenceAddOns:this.state.licenceAddOns,isMyGallery:this.props.isMyGallery,setCurrentModule:this.setCurrentModule,settings:this.props.globalSettings,setLayerData:this.setLayerData,isConfiguratorEnabled:this.state.isConfiguratorEnabled,openConfiguratorModule:this.openConfiguratorModule,showNotification:this.props.showNotification,togglePreviewTab:this.props.togglePreviewTab,currBackgroundElms:this.getCurrBackgroundElems(),isTemplateViewMobile:this.state.isTemplateViewMobile,onChangeTemplateMobile:this.onChangeTemplateMobile,closeDecoratedForm:this.closeDecoratedForm,isKioskFeature:this.props.isKioskFeature,productBasedTempId:this.props.productBasedTempId,isSaveTemplate:this.isTemplate,checkSvgConfiguratorSide:this.checkSvgConfiguratorSide,isQuot:this.isQuot,changeDesignedProduct:this.props.changeDesignedProduct})}}]),Panel}(react__WEBPACK_IMPORTED_MODULE_7___default.a.Component),mapStateToProps=function(e){return{language:e.languageReducer.translation_data.filter((function(t){return t.langCode===e.languageReducer.default_lang}))[0],selectedPrintProfileData:e.printProfileReducer.print_profile_data.filter((function(t){return t.id===e.printProfileReducer.selected_print_profile}))[0],productCanvasReducer:e.productCanvasReducer,productDetails:e.productCanvasReducer.product_details,printProfileReducer:e.printProfileReducer,customerData:e.customerReducer?e.customerReducer.items:0,globalSettings:e.globalSettingReducer.global_settings_data,selectedColors:e.productCanvasReducer.color,templateReducer:e.template,colorList:0!==e.colorPaletteReducer.colorList.filter((function(t){return t.printProfileId===e.printProfileReducer.selected_print_profile})).length&&e.colorPaletteReducer.colorList.filter((function(t){return t.printProfileId===e.printProfileReducer.selected_print_profile}))[0].colorData?e.colorPaletteReducer.colorList.filter((function(t){return t.printProfileId===e.printProfileReducer.selected_print_profile}))[0].colorData:[]}};__webpack_exports__.a=Object(react_redux__WEBPACK_IMPORTED_MODULE_8__.b)(mapStateToProps)(Panel)},355:function(e,t,a){"use strict";var r=a(10),n=a(11),i=a(12),o=a(60),s=function(){function e(){Object(r.a)(this,e)}return Object(n.a)(e,null,[{key:"getMakDetails",value:function(){return o.get(i.a.base_path+"masks?name=&sortby=xe_id&order=desc&page=1&perpage=40",{headers:{"Content-Type":"application/json"}})}},{key:"uploadInServer",value:function(e,t,a){var r=new FormData;return r.append("customer_id",a),r.append("userfile",e,"thumb."+t),r.append("file_type",t),o({method:"post",url:i.a.base_path+"images",data:r,headers:{"Content-Type":"multipart/form-data"}})}},{key:"getHistoryImages",value:function(e){return o.get(i.a.base_path+"browser-image/"+e,{headers:{"Content-Type":"application/json"}})}},{key:"uploadHistoryImage",value:function(e,t){var a=new FormData;return a.append("browser_id",e),a.append("upload",t),o({method:"post",url:i.a.base_path+"browser-image",data:a,headers:{"Content-Type":"multipart/form-data"}})}},{key:"deleteHistoryImage",value:function(e){var t=new FormData;return t.append("file_name",e),o({method:"post",url:i.a.base_path+"browser-image/delete",data:t,headers:{"Content-Type":"multipart/form-data"}})}}]),e}();t.a=s},39:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var r=a(10),n=a(11),i=a(16),o=a(15),s=a(0),l=a.n(s),c=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).state={hasError:!1},n}return Object(n.a)(a,[{key:"componentDidCatch",value:function(e,t){console.log(e,t)}},{key:"render",value:function(){return this.state.hasError?l.a.createElement("span",{style:{fontSize:"1rem",color:"red"}},"Error."):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0}}}]),a}(l.a.Component)},40:function(e,t,a){"use strict";a.d(t,"e",(function(){return l})),a.d(t,"d",(function(){return c})),a.d(t,"g",(function(){return u})),a.d(t,"c",(function(){return d})),a.d(t,"f",(function(){return p})),a.d(t,"a",(function(){return h})),a.d(t,"b",(function(){return g}));var r,n=a(8),i=(a(2),["x","x1","cx","rx","width"]),o=["y","y1","cy","ry","height"],s=(["r","radius"].concat(i,o),{}),l=function(e){r=e;var t=document.createElementNS(n.a.SVG,"svg");document.body.append(t);var a=document.createElementNS(n.a.SVG,"rect");a.setAttribute("width","1em"),a.setAttribute("height","1ex"),a.setAttribute("x","1in"),t.append(a);var i=a.getBBox();t.remove();var o=i.x;s={em:i.width,ex:i.height,in:o,cm:o/2.54,mm:o/25.4,pt:o/72,pc:o/6,px:1,"%":0}},c=function(){return s},u=function e(t){var a=r.getRoundDigits();return isNaN(t)?Array.isArray(t)?e(t[0])+","+e(t[1]):parseFloat(t).toFixed(a)-0:Number(Number(t).toFixed(a))},d=function(e,t){return t=t||r.getBaseUnit(),u(e/s[t])},p=function(e,t,a){e.setAttribute(t,a)},m={line:["x1","x2","y1","y2"],circle:["cx","cy","r"],ellipse:["cx","cy","rx","ry"],foreignObject:["x","y","width","height"],rect:["x","y","width","height"],image:["x","y","width","height"],use:["x","y","width","height"],text:["x","y"]},h=function(e){var t=e.tagName,a=r.getBaseUnit(),n=m[t];if(n)for(var i=n.length,o=0;o<i;o++){var l=n[o],c=e.getAttribute(l);c&&(isNaN(c)||e.setAttribute(l,c/s[a]+a))}},g=function(e,t){if(!isNaN(t))return t-0;if("%"===t.substr(-1)){var a=t.substr(0,t.length-1)/100,n=r.getWidth(),l=r.getHeight();return i.includes(e)?a*n:o.includes(e)?a*l:a*Math.sqrt(n*n+l*l)/Math.sqrt(2)}var c=t.substr(-2);return t.substr(0,t.length-2)*s[c]}},400:function(e,t,a){"use strict";a.r(t);var r=a(9),n=a.n(r),i=a(20),o=a(10),s=a(11),l=a(13),c=a(16),u=a(15),d=a(0),p=a.n(d),m=a(24),h=a(69),g=a(12),f=a(60),v=function(){function e(){Object(o.a)(this,e)}return Object(s.a)(e,null,[{key:"getProductDetails",value:function(e){return f.get(g.a.base_path+"products/"+e+"?type=tool",{headers:{"Content-Type":"application/json"}})}},{key:"getCategories",value:function(){return f.get(g.a.base_path+"products/categories?src=tool",{headers:{"Content-Type":"application/json"}})}}]),e}(),b=a(120),A=a.n(b),y=a(877),_=a(859),E=a(860),S=a(861),C=a(258),x=a(19),w=a.n(x),k=function(e){var t=e.products,a=e.error,r=e.loading,n=(e.totalProduct,e.productInfo),i=e.hasMore,o=e.loadMoreProduct,s=e.onProductChange,l=e.productId,c=e.changeProductSide,u=e.selectedSide,m=e.popoverOpen,h=e.closePopover,g=e.isMobileView,f=e.globalSettings,v=(e.onImageLoaded,e.imageLoaded,e.handleProductInfo),b=e.language,x=e.setNoPrintStatus,k=e.currency,I=e.conversionUnit,N=e.currencyList;if(a)return p.a.createElement("div",null,"Error! ",a.message);if(r)return p.a.createElement("div",{className:"dt-elements dt-list",key:1},p.a.createElement("div",{className:"product-wrap"},p.a.createElement("div",{className:"product-lists product-lists-cat scrollbar",style:{overflow:"hidden"}},p.a.createElement("div",{className:"pthumb-wrap"},p.a.createElement("div",{className:"thumbView-wrap"},[1,2,3,4,5,6,7].map((function(e){return p.a.createElement("div",{className:"thumbView-elements",key:e},p.a.createElement("div",{className:"imageWrap"},p.a.createElement("figure",{className:"imageWrap-box"},p.a.createElement(w.a,{height:146,width:150})),p.a.createElement("h4",{className:"pName pb-2"},p.a.createElement(w.a,{height:10,width:80})),p.a.createElement("h4",{className:"pPrice"},p.a.createElement(w.a,{height:10,width:30}))))})))))));function O(){return p.a.createElement("div",{className:"quick-preview"},p.a.createElement("div",{className:"quick-preview-body"},p.a.createElement("div",{className:"pDetail-wrap scrollbar"},p.a.createElement("div",{className:"row"},p.a.createElement("div",{className:"col-12 col-md-auto"},p.a.createElement("div",{className:"pd-image-wrap"},p.a.createElement("figure",{className:"pd-image"+(u?"":" d-none")},p.a.createElement("img",{src:u||"",alt:"",width:184})),!u&&p.a.createElement("figure",null,p.a.createElement(w.a,{width:184,height:184})),p.a.createElement("div",{className:"productInfo-sides"},p.a.createElement("div",{className:"btn controls controls-prev"},p.a.createElement("i",{className:"nxi nxi-move-left"})),n&&p.a.createElement("div",{className:"thumbView"},n.images.length>1&&p.a.createElement("div",{className:"thumbView-row"},n.images.map((function(e,t){return p.a.createElement("div",{className:"thumbView-col active",key:t},p.a.createElement("div",{className:"imageWrap"},p.a.createElement("figure",{className:"imageWrap-box"},p.a.createElement("img",{src:e.thumbnail,alt:"",onClick:function(){return c(t)}}))))})))),p.a.createElement("div",{className:"btn controls controls-next"},p.a.createElement("i",{className:"nxi nxi-move-right"}))))),p.a.createElement("div",{className:"col-12 col-md"},n&&p.a.createElement("div",{className:"pd-variants"},n.attributes.map((function(e){return p.a.createElement(d.Fragment,{key:e.id},e.attribute_term&&e.attribute_term.length>0&&e.attribute_term[0].hex_code&&p.a.createElement("div",{className:"pd-variants-child"},p.a.createElement("h3",{className:"pd-title"},e.name),p.a.createElement("div",{className:"color-block"},e.attribute_term.map((function(e,t){return p.a.createElement(d.Fragment,{key:t},e.hex_code&&p.a.createElement("div",{className:"color-box",key:e.id,style:{backgroundColor:e.hex_code},title:e.name}),e.file_name&&p.a.createElement("div",{className:"color-box",key:e.id,style:{backgroundImage:"url("+e.file_name+")",backgroundSize:"cover"},title:e.name}))})))),e.attribute_term&&e.attribute_term.length>0&&!e.attribute_term[0].hex_code&&p.a.createElement("div",{className:"pd-variants-child"},p.a.createElement("h3",{className:"pd-title"},e.name),p.a.createElement("div",{className:"size-block"},e.attribute_term.map((function(e){return p.a.createElement("div",{className:"size-box",key:e.id},e.name)})))))})),p.a.createElement("div",{className:"pd-variants-child"},n.print_profile.length>0&&p.a.createElement("h3",{className:"pd-title mt-3"},b.main.assignedPrintProfile),n.print_profile.length>0&&p.a.createElement("div",{className:"size-block printP"},n.print_profile.map((function(e){return p.a.createElement("div",{className:"size-box",key:e.id},e.name)})))))||p.a.createElement("div",{className:"pd-variants"},p.a.createElement("div",{className:"pd-variants-child"},p.a.createElement(w.a,null),p.a.createElement("h4",null,p.a.createElement(w.a,null))),p.a.createElement("div",{className:"pd-variants-child"},p.a.createElement(w.a,null),p.a.createElement("h4",null,p.a.createElement(w.a,null))),p.a.createElement("div",{className:"pd-variants-child"},p.a.createElement(w.a,null),p.a.createElement("h4",null,p.a.createElement(w.a,null)))))),p.a.createElement("div",{className:"pd-description"},n&&p.a.createElement("h3",{className:"pd-title"},b.main.description)||p.a.createElement(w.a,null),n&&p.a.createElement("div",{className:"pd-des",dangerouslySetInnerHTML:{__html:n.description}})||p.a.createElement(w.a,{count:5})))),n&&p.a.createElement("div",{className:"quick-preview-footer"},g&&p.a.createElement("button",{type:"button",className:"btn btn-danger",onClick:function(){return h()}},b.main.cancel),p.a.createElement("button",{type:"button",className:"btn btn-primary",onClick:function(){s(n.id,n.variant_id),x()}},b.main.useThis)))}return p.a.createElement("div",{className:"dt-elements dt-list"},p.a.createElement("div",{className:"product-wrap"},p.a.createElement("div",{className:"product-lists product-lists-cat scrollbar"},p.a.createElement("div",{className:"pthumb-wrap"},function(){if(b)return t&&t.length?p.a.createElement(A.a,{className:"thumbView-wrap",pageStart:0,loadMore:function(){return o()},hasMore:i,useWindow:!1},t.map((function(e,t){return p.a.createElement(d.Fragment,{key:"prod_"+t+"_"+e.id},p.a.createElement("div",{className:"thumbView-elements hover-button-wrapper out-of-stock"+(l===e.id?" active":""),style:1==e.is_sold_out?{pointerEvents:"none"}:{pointerEvents:""}},p.a.createElement("div",{className:"hover-button"},p.a.createElement("button",{className:"btn btn-sm btn-success",onClick:function(){s(e.id,e.variant_id),x()}},b.main.apply),p.a.createElement("button",{className:"btn btn-sm btn-dark",id:"PopoverLegacy"+t,onClick:function(){return v(e.id,!0)}},p.a.createElement("i",{className:"nf nf-info"}))),p.a.createElement("div",{className:"imageWrap",id:"PopoverLegacy"+t,onClick:function(){return v(e.id,!0)}},p.a.createElement("figure",{className:"imageWrap-box"},p.a.createElement("div",{className:1==e.is_sold_out||null==e.is_sold_out?"out-of-stock-wrapper":"d-none"},"Out of stock"),p.a.createElement("img",{className:"w-100",src:e.image[0],alt:"",style:1==e.is_sold_out||null==e.is_sold_out?{opacity:.5}:{opacity:1}})),p.a.createElement("h4",{className:"pName",id:"tooltip-"+e.id},e.name),function(e){if(e&&e.price)return p.a.createElement("h4",{className:"pPrice"},function(e){if(f&&f.currency){var t=f.currency.value,a=f.currency.post_fix;if(k&&I){e=(I*e).toFixed(2),a=k;var r=N.find((function(e){if(e.code==k)return e}));t=r.symbol}return f.currency.is_postfix_symbol?""!==a.trim()?a+" "+e+t:e+t:""!==a.trim()?t+e+" "+a:t+e}}(e.price.toFixed(2).replace(".",f.currency.separator)))}(e),p.a.createElement(y.a,{placement:"top",target:"tooltip-"+e.id},e.name)),p.a.createElement("span",{className:"infoBtn d-none",onClick:function(){return v(e.id,!0)},id:"PopoverLegacy"+t},p.a.createElement("i",{className:"nf nf-info"})),!g&&p.a.createElement(_.a,{className:"big-popover",trigger:"legacy",placement:"right",target:"PopoverLegacy"+t},p.a.createElement(E.a,null,n&&p.a.createElement("span",null,n.name)||p.a.createElement(w.a,null)),p.a.createElement(S.a,null,O())),g&&p.a.createElement(C.a,{className:"product-popover big-popover",placement:"right",target:"PopoverLegacy"+t,isOpen:m},p.a.createElement(E.a,null,n&&p.a.createElement("span",null,n.name)||p.a.createElement(w.a,null)),p.a.createElement(S.a,null,O()))))}))):p.a.createElement("p",{style:{textAlign:"center"}},b.product.searchMsg)}()))))},I=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var r;return Object(o.a)(this,a),(r=t.call(this)).state={imageLoaded:!1},r.onImageLoaded=r.onImageLoaded.bind(Object(l.a)(r)),r.handleProductInfo=r.handleProductInfo.bind(Object(l.a)(r)),r}return Object(s.a)(a,[{key:"onImageLoaded",value:function(e){e.target.src=this.props.selectedSide,this.setState({imageLoaded:!0})}},{key:"handleProductInfo",value:function(e,t){this.setState({imageLoaded:!1}),this.props.onProductSelect(e,t)}},{key:"render",value:function(){var e=this.props,t=e.error,a=e.hasMore,r=e.loading,n=e.products,i=e.productId,o=e.totalProduct,s=e.productInfo,l=e.selectedSide,c=e.detailsLoader,u=e.loadMoreProduct,d=e.onProductChange,m=e.changeProductSide,h=e.popoverOpen,g=e.closePopover,f=e.isMobileView,v=e.setNoPrintStatus;return p.a.createElement(k,{products:n,error:t,loading:r,totalProduct:o,productInfo:s,hasMore:a,loadMoreProduct:u,onProductChange:d,productId:i,detailsLoader:c,selectedSide:l,changeProductSide:m,popoverOpen:h,closePopover:g,isMobileView:f,onImageLoaded:this.onImageLoaded,imageLoaded:this.state.imageLoaded,handleProductInfo:this.handleProductInfo,setNoPrintStatus:v,globalSettings:this.props.globalSettings,language:this.props.language,conversionUnit:this.props.conversionUnit,currency:this.props.currency,currencyList:this.props.currencyList})}}]),a}(p.a.Component),N=a(156),O=function(e){e.error;var t=e.loading,a=e.productId,r=e.onProductChange,n=e.search,i=e.searchValue,o=e.categories,s=e.showProdsByCat,l=e.selectedCatId,c=e.handleChange,u=e.language,m=e.parentCatId,h=e.showBackButton,g=e.noPrintMethod;return t?p.a.createElement("div",{className:"dt-elements dt-pAction",key:0},p.a.createElement("div",{className:"element-controls-header d-none d-md-flex d-lg-flex d-xl-flex"},p.a.createElement(w.a,{width:200,height:20})),p.a.createElement("div",{className:"advanced-search-box"},p.a.createElement(w.a,{height:31})),p.a.createElement("div",{className:"listView toolNav"},p.a.createElement("h3",{className:"boxTitle m-hide"},p.a.createElement(w.a,{width:200,height:20})),p.a.createElement("ul",{className:"nav nav-tabs listView-wrap scrollbar"},[1,2,3,4,5,6,7,8,9,10].map((function(e){return p.a.createElement("li",{className:"nav-item dropdown",key:e},p.a.createElement("div",{className:"nav-link"},p.a.createElement("div",{className:"nav-link-label"},p.a.createElement(w.a,{width:200,height:10}))))}))))):p.a.createElement("div",{className:"dt-elements dt-pAction"},u&&p.a.createElement("div",{className:!h||g?" d-none":"element-controls-header d-none d-md-flex d-lg-flex d-xl-flex"},p.a.createElement("section",{className:"boxTitle back-to-back",onClick:function(){return r(a)}},p.a.createElement("div",{className:"icon",title:u.main.backToSection},p.a.createElement("i",{className:"nf nf-left-arrow"})),p.a.createElement("div",{className:"text"},u.panel.back))),u&&p.a.createElement("div",{className:"advanced-search-box"},p.a.createElement("div",{className:!h||g?"d-none":"boxTitle back-to-view d-flex d-sm-flex d-md-flex d-lg-none d-xl-none",title:u.main.backToSection,onClick:function(){return r(a)}},p.a.createElement("i",{className:"nf nf-left-arrow"})),p.a.createElement("div",{className:"input-group"},p.a.createElement("div",{className:"input-group-prepend"},p.a.createElement("span",{className:"input-group-text"},p.a.createElement("i",{className:"nf nf-search"}))),p.a.createElement(N.DebounceInput,{className:"form-control form-control-sm",placeholder:u.main.search+"...",minLength:2,debounceTimeout:1e3,value:i,onChange:n}))),u&&p.a.createElement("div",{className:"listView toolNav"},p.a.createElement("h3",{className:"boxTitle m-hide"},u.product.category),p.a.createElement("nav",{className:"navbar navbar-expand-lg"},p.a.createElement("button",{className:"navbar-toggler"+(l?"":" hidden"),type:"button","data-toggle":"collapse","data-target":"#productNavbar","aria-controls":"productNavbar","aria-expanded":"false","aria-label":"Toggle navigation"},p.a.createElement("span",{className:"btn btn-link"+(l?"":" hidden"),id:"catChange",onClick:function(){return c()}}," ",u.main.change),o.map((function(e,t){return p.a.createElement(d.Fragment,{key:t},l===e.id&&p.a.createElement("span",{className:"nav-product-cat"},e.name),e.subs.map((function(e){return p.a.createElement(d.Fragment,{key:e.id},l===e.id&&p.a.createElement("span",{className:"nav-product-cat"},e.name))})))}))),p.a.createElement("div",{className:"collapse navbar-collapse",id:"productNavbar"},o.length>0&&p.a.createElement("ul",{className:"nav nav-tabs listView-wrap scrollbar"},o.map((function(e){return p.a.createElement("li",{className:"nav-item"+(e.subs.length?" dropdown":"")+(l===e.id?" active":"")+(m===e.id?" show":""),key:e.id},e.subs.length>0&&p.a.createElement("div",{className:"nav-link dropdown-toggle","data-toggle":"dropdown",role:"button","aria-haspopup":"true","aria-expanded":"false"},p.a.createElement("div",{className:"nav-link-label"},e.name)),0===e.subs.length&&p.a.createElement("div",{className:"nav-link",onClick:function(){return s(e.id,!1)}},p.a.createElement("div",{className:"nav-link-label"},e.name)),e.subs.length>0&&p.a.createElement("div",{className:"dropdown-menu"+(m===e.id?" show":"")},e.subs.map((function(t){return p.a.createElement("div",{className:"dropdown-item"+(l===t.id?" active":""),key:t.id,onClick:function(){return s(t.id,!0,e.id)}},p.a.createElement("div",{className:"dropdown-item-label"},p.a.createElement("div",{className:"label-title"},t.name)))}))))})))||p.a.createElement("ul",{className:"nav nav-tabs listView-wrap scrollbar"},[1,2,3,4,5,6,7,8,9,10,11].map((function(e){return p.a.createElement("li",{className:"nav-item active",key:e},p.a.createElement("div",{className:"nav-link"},p.a.createElement("div",{className:"nav-link-label"},p.a.createElement(w.a,null))))})))))))},P=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var r;return Object(o.a)(this,a),(r=t.call(this,e)).search=function(e){r.setState({name:e.target.value},(function(){r.props.searchProduct(r.state.name)}))},r.state={name:""},r}return Object(s.a)(a,[{key:"render",value:function(){var e=this.props,t=e.error,a=e.loading,r=e.productId,n=e.onProductChange,i=e.categories,o=e.showProdsByCat,s=e.selectedCatId,l=e.handleChange,c=e.isSubCat,u=e.parentCatId,d=e.showBackButton,m=e.noPrintMethod,h=this.state.name;return p.a.createElement(O,{error:t,loading:a,productId:r,onProductChange:n,search:this.search,searchValue:h,categories:i,showProdsByCat:o,selectedCatId:s,handleChange:l,language:this.props.language,isSubCat:c,parentCatId:u,showBackButton:d,noPrintMethod:m})}}]),a}(p.a.Component),D=function(e){return p.a.createElement(d.Fragment,null,p.a.createElement("header",null,p.a.createElement("div",{className:"splashLogo"},function(){if(e.globalSettings.kiosk_setting&&e.globalSettings.kiosk_setting.logo&&""!==e.globalSettings.kiosk_setting.logo)return p.a.createElement("figure",{className:"brandLogo"},p.a.createElement("img",{src:e.globalSettings.kiosk_setting.logo,alt:""}))}())),p.a.createElement("section",null,function(){if(e.globalSettings.kiosk_setting&&e.globalSettings.kiosk_setting.company_name&&""!==e.globalSettings.kiosk_setting.company_name)return p.a.createElement("h3",{className:"splashTitle"},e.globalSettings.kiosk_setting.company_name)}(),function(){if(e.globalSettings.kiosk_setting&&e.globalSettings.kiosk_setting.punch_line&&""!==e.globalSettings.kiosk_setting.punch_line)return p.a.createElement(d.Fragment,null,p.a.createElement("ul",{className:"splashText"},p.a.createElement("li",null,e.globalSettings.kiosk_setting.punch_line)))}()),p.a.createElement("footer",null,function(){if(e.language)return p.a.createElement("button",{className:"btn btn-dark",onClick:function(){return e.hideSplash()}},e.language.kiosk.design)}()))},R=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var r;return Object(o.a)(this,a),(r=t.call(this,e)).hideSplash=r.hideSplash.bind(Object(l.a)(r)),r}return Object(s.a)(a,[{key:"componentDidMount",value:function(){}},{key:"hideSplash",value:function(){this.props.showHideSplash(!1)}},{key:"render",value:function(){return p.a.createElement(D,{globalSettings:this.props.globalSettings,hideSplash:this.hideSplash,language:this.props.language})}}]),a}(p.a.Component),T=Object(m.b)((function(e){return{globalSettings:e.globalSettingReducer.global_settings_data,language:e.languageReducer.translation_data.filter((function(t){return t.langCode===e.languageReducer.default_lang}))[0]}}))(R),L=a(23),M=a(27),B=function(e){return p.a.createElement("div",{id:"regWarningPop"},p.a.createElement("div",{className:"txt-13 tip alert alert-"+e.type},p.a.createElement("i",{className:"alert-icon"}),p.a.createElement("span",{className:"alert-txt"},e.message),p.a.createElement("button",{type:"button",className:"close",onClick:function(){return e.closeWarningModal()}},p.a.createElement("span",{"aria-hidden":"true"},"\xd7"))))},j=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var r;return Object(o.a)(this,a),(r=t.call(this)).state={},r}return Object(s.a)(a,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return p.a.createElement(B,{modalWarningIsOpen:this.props.modalWarningIsOpen,closeWarningModal:this.props.closeWarningModal,message:this.props.modalWarningMsg,type:this.props.modalWarningType})}}]),a}(p.a.Component),F=Object(m.b)((function(e){return{globalImageSettings:e.globalSettingReducer.global_settings_data.image_setting,language:e.languageReducer.translation_data.filter((function(t){return t.langCode===e.languageReducer.default_lang}))[0]}}))(j),U=function(e){return p.a.createElement(d.Fragment,null,p.a.createElement("div",{className:"dt-elements dt-customerForm"},p.a.createElement(F,{modalWarningIsOpen:e.modalWarningIsOpen,modalWarningMsg:e.modalWarningMsg,modalWarningType:e.modalWarningType,closeWarningModal:e.closeWarningModal}),e.isRegFormSubmitted||e.isCodeInvalid||0!==e.isKioskRegistered?-2===e.isKioskRegistered?p.a.createElement("div",{className:"card card-form"},p.a.createElement("h3",{className:"card-title text-danger"},"Invalid license"),p.a.createElement("p",{className:"m-0"},"Your license has expired, please contact imprintNext team.")):void 0:p.a.createElement("div",{className:"card card-form"},p.a.createElement("h3",{className:"card-title mb-4"},"Kiosk registration"),p.a.createElement("div",{className:"form-group"},p.a.createElement("label",null,"Registration code ",p.a.createElement("small",{className:"text-danger"},"*")),p.a.createElement("input",{className:"form-control form-control-lg",value:e.regCode,name:"regCode",autoComplete:"off",onChange:e.handleInputChange}),p.a.createElement("small",{className:"form-text text-muted"},"If you don't have registration code then please contact imprintNext team.")),p.a.createElement("button",{className:"btn btn-success btn-lg pl-5 pr-5 mt-2 mb-4",onClick:function(){return e.submitFormData()}},"Submit")),function(){if(!e.isRegFormSubmitted&&e.isCodeInvalid)return p.a.createElement("div",{className:"card card-form"},p.a.createElement("h3",{className:"card-title text-danger"},"Invalid code"),p.a.createElement("p",{className:"m-0"},"This is not a valid code, please contact imprintNext team."),p.a.createElement("button",{className:"btn btn-success btn-lg pl-5 pr-5 mt-4",onClick:function(){return e.reloadKiosk()}},"Retry"))}(),function(){if(!e.isRegFormSubmitted&&!e.isCodeInvalid&&-1===e.isKioskRegistered)return p.a.createElement("div",{className:"loader"},p.a.createElement("div",{className:"loader-gif"},p.a.createElement("svg",{version:"1.1",id:"L4",xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",viewBox:"0 0 50 50",enableBackground:"new 0 0 0 0"},p.a.createElement("circle",{fill:"#28a745",stroke:"none",cx:"5",cy:"25",r:"5"},p.a.createElement("animate",{attributeName:"opacity",dur:"1s",values:"0;1;0",repeatCount:"indefinite",begin:"0.1"})),p.a.createElement("circle",{fill:"#28a745",stroke:"none",cx:"25",cy:"25",r:"5"},p.a.createElement("animate",{attributeName:"opacity",dur:"1s",values:"0;1;0",repeatCount:"indefinite",begin:"0.2"})),p.a.createElement("circle",{fill:"#28a745",stroke:"none",cx:"45",cy:"25",r:"5"},p.a.createElement("animate",{attributeName:"opacity",dur:"1s",values:"0;1;0",repeatCount:"indefinite",begin:"0.3"})))),p.a.createElement("h3",{className:"loader-title"},"Checking kiosk registration"))}(),function(){if(e.isRegFormSubmitted)return p.a.createElement("div",{className:"loader"},p.a.createElement("div",{className:"loader-gif"},p.a.createElement("svg",{version:"1.1",id:"L4",xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",viewBox:"0 0 50 50",enableBackground:"new 0 0 0 0"},p.a.createElement("circle",{fill:"#28a745",stroke:"none",cx:"5",cy:"25",r:"5"},p.a.createElement("animate",{attributeName:"opacity",dur:"1s",values:"0;1;0",repeatCount:"indefinite",begin:"0.1"})),p.a.createElement("circle",{fill:"#28a745",stroke:"none",cx:"25",cy:"25",r:"5"},p.a.createElement("animate",{attributeName:"opacity",dur:"1s",values:"0;1;0",repeatCount:"indefinite",begin:"0.2"})),p.a.createElement("circle",{fill:"#28a745",stroke:"none",cx:"45",cy:"25",r:"5"},p.a.createElement("animate",{attributeName:"opacity",dur:"1s",values:"0;1;0",repeatCount:"indefinite",begin:"0.3"})))),p.a.createElement("h3",{className:"loader-title"},"Submitting form"))}()))},V=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var r;return Object(o.a)(this,a),(r=t.call(this,e)).showNotification=function(e,t){r.state.modalWarningIsOpen||r.setState({modalWarningIsOpen:!0,modalWarningMsg:t,modalWarningType:e},(function(){var e=document.getElementById("regWarningPop");e.className="show",e.scrollIntoView({behavior:"smooth"}),setTimeout((function(){e.className=e.className.replace("show",""),r.setState({modalWarningIsOpen:!1})}),5e3)}))},r.closeWarningModal=function(){r.setState({modalWarningIsOpen:!1},(function(){var e=document.getElementById("regWarningPop");e.className=e.className.replace("show","")}))},r.state={regCode:"",isRegFormSubmitted:!1,isCodeInvalid:!1,modalIsOpen:!1,modalWarningIsOpen:!1,modalWarningMsg:"",modalWarningType:""},r.handleInputChange=r.handleInputChange.bind(Object(l.a)(r)),r.submitFormData=r.submitFormData.bind(Object(l.a)(r)),r.reloadKiosk=r.reloadKiosk.bind(Object(l.a)(r)),r}return Object(s.a)(a,[{key:"componentDidMount",value:function(){}},{key:"handleInputChange",value:function(e){var t=e.target,a=t.name;this.setState(Object(L.a)({},a,t.value))}},{key:"reloadKiosk",value:function(){window.location.reload()}},{key:"submitFormData",value:function(){var e=this;if(navigator.onLine){if(""!==this.state.regCode.trim())return this.setState({isRegFormSubmitted:!0}),M.A(this.state.regCode.trim()).then((function(t){e.setState({isRegFormSubmitted:!1,regCode:""}),1===t.data.status?e.props.notifyRegSuccess():e.setState({isCodeInvalid:!0,regCode:""})})).catch((function(t){e.setState({isRegFormSubmitted:!1,isCodeInvalid:!1,regCode:""}),e.showNotification("danger","Error while validating code.")}));this.showNotification("danger","Please provide code.")}else this.showNotification("danger","Please check your internet connection.")}},{key:"render",value:function(){return p.a.createElement(U,{language:this.props.language,isKioskRegistered:this.props.isKioskRegistered,isRegFormSubmitted:this.state.isRegFormSubmitted,regCode:this.state.regCode,isCodeInvalid:this.state.isCodeInvalid,handleInputChange:this.handleInputChange,submitFormData:this.submitFormData,reloadKiosk:this.reloadKiosk,modalWarningIsOpen:this.state.modalWarningIsOpen,modalWarningMsg:this.state.modalWarningMsg,modalWarningType:this.state.modalWarningType,closeWarningModal:this.closeWarningModal})}}]),a}(p.a.Component),G=Object(m.b)((function(e){return{language:e.languageReducer.translation_data.filter((function(t){return t.langCode===e.languageReducer.default_lang}))[0]}}))(V),q=a(99),H=a.n(q),z=a(6),W=a(39),Q=a(22),J=a.n(Q),Y=null,Z=null,X=[],K=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var r;return Object(o.a)(this,a),(r=t.call(this,e)).getUrlParameter=function(e){return("Shopify"!==window.storeType&&"Others"!==window.storeType&&"Hosted"!==window.storeType?new URLSearchParams(window.parent.location.search):new URLSearchParams(window.location.search)).get(e)},r.selectProductCategory=function(){if(r.selProductCatId){r.setState({selectedCatId:r.selProductCatId});var e=r.selProductCatId,t=r.state.categories.filter((function(t){return t.id===e}))[0];t&&(t.subs&&t.subs.length?r.showProdsByCat(e,!0,e):r.showProdsByCat(e,!1))}},r.renderKioskSplashPage=function(){var e="";if(r.props.isKioskFeature&&r.props.isShowSplash&&1===r.props.isKioskRegistered&&r.props.globalSettings.kiosk_setting&&r.props.globalSettings.kiosk_setting.background&&(e="url('"+r.props.globalSettings.kiosk_setting.background+"')"),r.props.isKioskFeature)return p.a.createElement("main",{className:r.props.isKioskFeature&&r.props.isShowSplash&&1===r.props.isKioskRegistered?"splash-theme":"splash-theme d-none",style:{backgroundImage:e}},p.a.createElement(W.a,null,p.a.createElement(T,{showHideSplash:r.props.showHideSplash})))},r.renderKioskRegistrationPage=function(){if(r.props.isKioskFeature)return p.a.createElement("main",{className:r.props.isKioskFeature&&1!==r.props.isKioskRegistered?"dt-base theme-form":"dt-base theme-form d-none"},p.a.createElement(W.a,null,p.a.createElement(G,{isKioskRegistered:r.props.isKioskRegistered,notifyRegSuccess:r.props.notifyRegSuccess})))},r.state={selectedProductInfo:null,selectedSide:null,detailsLoader:!1,isDetailPopup:!1,popoverOpen:!1,productCatId:null,categories:[],selectedCatId:null,isChangeCatClicked:!1,isSubCat:!1,parentCatId:null,showBackButton:!0,currency:r.props.currency,currencyConversionUnit:0},r.loadMoreProduct=r.loadMoreProduct.bind(Object(l.a)(r)),r.productInfo={name:"",category:"",page:"1",order:"desc",per_page:"40"},r.hasMorePage=!0,r.remainingProduct=0,r.changeProductSide=r.changeProductSide.bind(Object(l.a)(r)),r.onProductSelect=r.onProductSelect.bind(Object(l.a)(r)),r.searchProduct=r.searchProduct.bind(Object(l.a)(r)),r.showProdsByCat=r.showProdsByCat.bind(Object(l.a)(r)),r.setNoPrintStatus=r.setNoPrintStatus.bind(Object(l.a)(r)),r.selProductCatId=parseInt(r.getUrlParameter("cat")||"0"),J()("#root").css({opacity:1}),J()("#css-fake-loader").hide(),r}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.sortCategories(),this.props.selectedProdCat.categories&&this.props.selectedProdCat.categories.length&&this.setState({productCatId:this.props.selectedProdCat.categories[0].id,selectedCatId:Z||this.props.selectedProdCat.categories[0].id,parentCatId:Y||null},(function(){e.productInfo.category=e.state.productCatId,e.props.isProductsLoaded||e.props.dispatch(Object(h.f)(e.productInfo))})),X=this.props.productDetailsArr}},{key:"componentDidUpdate",value:function(e,t){var a=this;t.selectedCatId!==this.state.selectedCatId&&this.props.dispatch(Object(h.h)(this.state.selectedCatId)),this.props.globalSettings&&0==this.state.currencyConversionUnit&&this.props.getCurrenciesList.length>1&&this.props.globalSettings.currency&&this.props.getCurrenciesList.forEach((function(e){e.xe_id==a.props.globalSettings.currency.currencyId&&a.getUnitConversnalPrice(e.code)}))}},{key:"loadMoreProduct",value:function(){var e=Math.ceil(this.props.products.total_records/this.productInfo.per_page);this.productInfo.page<e&&(this.productInfo.page=parseInt(this.productInfo.page)+1,this.props.dispatch(Object(h.f)(this.productInfo,this.props.products.data)),this.remainingProduct=this.props.products.total_records-this.props.products.data.length,this.remainingProduct<this.productInfo.perpage&&(this.hasMorePage=!1))}},{key:"changeProductSide",value:function(e){this.setState({selectedSide:this.state.selectedProductInfo.images[e].src})}},{key:"onProductSelect",value:function(e,t){var a=this;this.setState({detailsLoader:!0,selectedSide:null,popoverOpen:t,selectedProductInfo:null},(function(){}));var r=X.find((function(t){return t.id===e}));if(X&&r){var n=r,i="";i=this.props.isMobileView?n.images.length?n.images[0].src:H.a:n.images.length?n.images[0].thumbnail:H.a,this.setState({selectedProductInfo:n,selectedSide:i,detailsLoader:!1})}else v.getProductDetails(e).then((function(e){var t=e.data.data;X.push(t);var r="";r=a.props.isMobileView?t.images.length?t.images[0].src:H.a:t.images.length?t.images[0].thumbnail:H.a,a.setState({selectedProductInfo:t,selectedSide:r,detailsLoader:!1}),a.props.dispatch(Object(h.g)(X))})).catch((function(e){console.log("error",e),a.setState({detailsLoader:!1,selectedProductInfo:null,selectedSide:null})}))}},{key:"searchProduct",value:function(e){this.props.isMobileView&&this.state.isChangeCatClicked&&document.getElementById("catChange").click(),this.productInfo.category="",this.productInfo.name=e.trim(),this.productInfo.page="1",this.setState({selectedCatId:null}),""===e&&(this.productInfo.category=this.state.productCatId,this.setState({selectedCatId:this.state.productCatId})),this.props.dispatch(Object(h.f)(this.productInfo))}},{key:"closePopover",value:function(){this.setState({popoverOpen:!1})}},{key:"sortCategories",value:function(){var e=this;v.getCategories().then((function(t){if(t.data.status){var a=t.data.data,r=[];a.forEach((function(e){0===e.parent_id&&(e.subs=[],r.push(e),a.forEach((function(t){e.id===t.parent_id&&e.subs.push(t)})))})),e.setState({categories:r}),e.props.selectedProdCat.categories||(e.productInfo.category=a[0].id,e.setState({selectedCatId:a[0].id,showBackButton:!1}),e.props.dispatch(Object(h.f)(e.productInfo)),e.selectProductCategory())}else e.props.showNotification("danger",e.props.language.product.categoryError)})).catch((function(e){console.log("danger",e.message)}))}},{key:"showProdsByCat",value:function(e,t,a){this.props.isMobileView&&this.state.isChangeCatClicked&&document.getElementById("catChange").click(),t?(Y=a,Z=e,this.setState({selectedCatId:e,isSubCat:t,parentCatId:a})):(Y=null,Z=e,this.setState({selectedCatId:e,isSubCat:t,parentCatId:null})),this.productInfo.page="1",this.productInfo.category=e,this.props.dispatch(Object(h.f)(this.productInfo))}},{key:"handleChange",value:function(){this.setState({isChangeCatClicked:!this.state.isChangeCatClicked})}},{key:"setNoPrintStatus",value:function(){this.props.dispatch(z.E(!1))}},{key:"getUnitConversnalPrice",value:function(){var e=Object(i.a)(n.a.mark((function e(t){var a=this;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.props.currency&&M.r(t,this.props.currency).then((function(e){if(1===e.data){var t=JSON.parse(e.responce),r=a.props.currency;a.setState({currencyConversionUnit:t.rates[r]})}}));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props,t=e.error,a=e.loading,r=e.products,n=e.productId,i=e.onProductChange,o=e.isMobileView,s=e.noPrintMethod,l=this.state,c=l.selectedProductInfo,u=l.selectedSide,m=l.detailsLoader,h=l.selectedCatId,g=l.popoverOpen,f=l.categories,v=l.isSubCat,b=l.parentCatId,A=l.showBackButton;return p.a.createElement(d.Fragment,null,p.a.createElement("div",{className:this.props.isKioskFeature&&(this.props.isShowSplash||1!==this.props.isKioskRegistered)?"d-none":"dt-base theme-default theme-product",key:"product"},p.a.createElement(W.a,null,p.a.createElement(I,{key:"list",products:r.data,error:t,loading:a,totalProduct:r.total_records,productInfo:c,hasMore:this.hasMorePage,loadMoreProduct:this.loadMoreProduct,onProductChange:i,onProductSelect:this.onProductSelect,productId:n,detailsLoader:m,selectedSide:u,changeProductSide:this.changeProductSide,popoverOpen:g,closePopover:this.closePopover.bind(this),isMobileView:o,globalSettings:this.props.globalSettings,language:this.props.language,setNoPrintStatus:this.setNoPrintStatus,conversionUnit:this.state.currencyConversionUnit,currency:this.state.currency,currencyList:this.props.getCurrenciesList}),p.a.createElement(P,{searchProduct:this.searchProduct,productId:n,onProductChange:i,categories:f,showProdsByCat:this.showProdsByCat,selectedCatId:h,handleChange:this.handleChange.bind(this),language:this.props.language,isSubCat:v,parentCatId:b,showBackButton:A,noPrintMethod:s}))),this.renderKioskSplashPage(),this.renderKioskRegistrationPage())}}]),a}(p.a.Component),$=Object(m.b)((function(e){return{loading:e.product.loading,error:e.product.error,products:e.product.products,isProductsLoaded:e.product.isProductsLoaded,selectedProdCat:e.productCanvasReducer.product_extra_details,globalSettings:e.globalSettingReducer.global_settings_data,language:e.languageReducer.translation_data.filter((function(t){return t.langCode===e.languageReducer.default_lang}))[0],noPrintMethod:e.productCanvasReducer.noPrintMethod,productDetailsArr:e.product.productDetailsArr}}))(K);a.d(t,"default",(function(){return $}))},401:function(e,t,a){"use strict";a.r(t);var r=a(10),n=a(11),i=a(13),o=a(16),s=a(15),l=a(0),c=a.n(l),u=a(24),d=a(19),p=a.n(d),m=a(120),h=a.n(m),g=a(156),f=a(236),v=a.n(f),b=function(e){if(e.error)return c.a.createElement("div",{className:"alert alert-warning ml-2 mr-2"},"Error! ",e.error.message);return c.a.createElement("div",{className:"theme-product-template"},!e.detailsLoader&&e.productInfo?c.a.createElement("div",{className:"start-scratch"},c.a.createElement("header",null,c.a.createElement("h6",null,"Start from scratch"),c.a.createElement("p",{dangerouslySetInnerHTML:{__html:e.productInfo.name}})),c.a.createElement("main",null,c.a.createElement("div",{className:"card"},c.a.createElement("img",{src:e.productInfo.images&&e.productInfo.images.length?e.productInfo.images[0].src:v.a}))),c.a.createElement("footer",null,c.a.createElement("button",{className:"btn btn-success btn-lg w-100",onClick:function(){return e.closeTemplateBasedProduct(e.productId,e.variantId)}},"Start from blank product"))):c.a.createElement("div",{className:"start-scratch"},c.a.createElement("header",null,c.a.createElement("h6",null,"Start from scratch"),c.a.createElement("p",null,c.a.createElement(p.a,{width:240,height:17}))),c.a.createElement("main",null,c.a.createElement("div",{className:"card"},c.a.createElement(p.a,{width:238,height:238}))),c.a.createElement("footer",null,c.a.createElement(p.a,{width:300,height:48}))),c.a.createElement("div",{className:"start-separate"},c.a.createElement("div",{className:"or-wrapper"},"OR")),c.a.createElement("div",{className:"start-design"},c.a.createElement("header",null,c.a.createElement("h6",null,"Start with a design"),c.a.createElement("p",null,"Select a design and modify it with your content or design")),c.a.createElement("section",{className:"search-section"},e.loading&&void 0===e.templates?c.a.createElement(p.a,{width:1027,height:38}):e.language?c.a.createElement(g.DebounceInput,{className:"form-control form-control-sm",placeholder:e.language.main.search+"...",minLength:2,debounceTimeout:1e3,value:e.searchValue,onChange:e.searchTemplate}):void 0),c.a.createElement("main",{className:"scrollbar"},e.loading?c.a.createElement("div",{className:"design-template-row"},[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15].map((function(e){return c.a.createElement("div",{className:"design-template-col",key:e},c.a.createElement("div",{className:"design-template-inner"},c.a.createElement("figure",null,c.a.createElement(p.a,{width:126,height:126}))))}))):e.templates&&e.templates.length?c.a.createElement(h.a,{className:"design-template-row",pageStart:0,loadMore:function(){return e.loadMoreTemplate()},hasMore:e.hasMore,useWindow:!1},e.templates.map((function(t,a){return c.a.createElement("div",{className:"design-template-col",key:a},c.a.createElement("div",{className:"design-template-inner"},c.a.createElement("div",{className:"apply-btn"},c.a.createElement("button",{className:"btn btn-sm btn-success",onClick:function(){return e.addTemplateToCanvas(t.ref_id)}},"Apply")),c.a.createElement("figure",null,c.a.createElement("img",{src:t.capture_images.without_product_file?t.capture_images.without_product_file[0].thumb:v.a,alt:""}))))}))):e.templates&&0===e.templates.length?c.a.createElement("p",null,"No records matched your search"):void 0),c.a.createElement("footer",null,e.templates&&e.templates.length>0&&e.hasMore&&c.a.createElement("button",{className:"btn btn-link text-secondary p-0 btn-sm"},c.a.createElement("i",{className:"nxi nxi-down"}),e.language.main.scrollToLoadMore))))},A=a(85),y=a(43),_=a(3),E=a(12),S=a(22),C=a.n(S),x=function(e){Object(o.a)(a,e);var t=Object(s.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).state={detailsLoader:!1,selectedProductInfo:null},n.templateInfo={name:"",page:"1",order:"desc",perpage:"40",catagory:"",print_profile:"[2]",prod_cat_id:""},n.hasMorePage=!1,n.onProductSelect=n.onProductSelect.bind(Object(i.a)(n)),n.loadMoreTemplate=n.loadMoreTemplate.bind(Object(i.a)(n)),n.searchTemplate=n.searchTemplate.bind(Object(i.a)(n)),n.addTemplateToCanvas=n.addTemplateToCanvas.bind(Object(i.a)(n)),C()("#root").css({opacity:1}),C()("#css-fake-loader").hide(),n}return Object(n.a)(a,[{key:"componentDidMount",value:function(){this.onProductSelect(this.props.productId)}},{key:"onProductSelect",value:function(e){var t=this;this.setState({detailsLoader:!0,selectedProductInfo:null}),this.props.dispatch(Object(A.h)(e)).then((function(e){if(e.status){if(e.data&&e.data.categories&&e.data.categories.length){var a=[];e.data.categories.forEach((function(e){a.push(e.id)})),t.templateInfo.prod_cat_id=a.join(),t.props.dispatch(Object(A.g)(t.templateInfo,t.props.templates.data))}t.setState({selectedProductInfo:e.data,detailsLoader:!1})}else t.setState({selectedProductInfo:null,detailsLoader:!1});var r=E.a.modules.filter((function(e){return 4===e.id}));r.length>0&&t.props.loadtemplateModule(r[0],!1)})).catch((function(e){console.log(e),t.setState({detailsLoader:!1})}))}},{key:"loadMoreTemplate",value:function(){var e=Math.ceil(this.props.templates.total_records/this.templateInfo.perpage);this.templateInfo.page<e&&(this.templateInfo.page=parseInt(this.templateInfo.page)+1,this.props.dispatch(Object(A.g)(this.templateInfo,this.props.templates.data)),this.remainingTemp=this.props.templates.total_records-this.props.templates.data.length,this.remainingTemp<this.templateInfo.perpage&&(this.hasMorePage=!1))}},{key:"addTemplateToCanvas",value:function(e){var t=this;this.props.closeTemplateBasedProduct(this.props.productId,this.props.variantId),this.props.dispatch(Object(y.u)(e)).then((function(e){_.a.canvas.resizeStage();var a=0,r=e.data[0];if((null===r||void 0===r?void 0:r.design_data)&&r.design_data.length&&r.design_data.forEach((function(e){(null===e||void 0===e?void 0:e.svg)&&a++})),a>0)if(a>1)t.props.applyTemplate(e.data[0]);else{var n="";(null===r||void 0===r?void 0:r.design_data)&&r.design_data.length&&(r.design_data.forEach((function(e){(null===e||void 0===e?void 0:e.svg)&&(n=e.svg)})),n&&(null===r||void 0===r?void 0:r.color_hash_codes)&&_.a.canvas.loadTemplate(decodeURI(n),r.color_hash_codes,r.is_easy_edit,t.showHideBackLoader,E.a.assets_path,t.isEngraveEnable))}t.props.dispatch(Object(y.x)(e.data[0].is_easy_edit)),e.data[0].is_easy_edit?window.isEasyEdit=!0:window.isEasyEdit=!1,t.setState({detailsLoader:!1})}))}},{key:"hasMoreRecords",value:function(){return this.props.templates&&this.props.templates.data&&(this.props.templates.records<this.templateInfo.perpage?this.hasMorePage=!1:this.hasMorePage=!0),this.hasMorePage}},{key:"searchTemplate",value:function(e){this.templateInfo.name=e.target.value.trim(),this.templateInfo.page=1,this.props.dispatch(Object(A.g)(this.templateInfo))}},{key:"render",value:function(){var e=this.props,t=e.productId,a=e.variantId,r=e.closeTemplateBasedProduct,n=(e.isMobileView,e.templates),i=e.loading,o=e.language,s=e.error;return c.a.createElement(b,{productInfo:this.state.selectedProductInfo,detailsLoader:this.state.detailsLoader,productId:t,variantId:a,closeTemplateBasedProduct:r,templates:n.data,loading:i,hasMore:this.hasMoreRecords(),loadMoreTemplate:this.loadMoreTemplate,searchValue:this.templateInfo.name,addTemplateToCanvas:this.addTemplateToCanvas,searchTemplate:this.searchTemplate,language:o,error:s})}}]),a}(c.a.Component),w=Object(u.b)((function(e){return{templates:e.productBasedTemplate.templates,error:e.productBasedTemplate.error,loading:e.productBasedTemplate.loading,language:e.languageReducer.translation_data.filter((function(t){return t.langCode===e.languageReducer.default_lang}))[0]}}))(x);a.d(t,"default",(function(){return w}))},406:function(e,t,a){e.exports=a.p+"static/media/setting.7e19eab3.svg"},408:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAABAAAAAQACAYAAAB/HSuDAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAAZdEVYdFNvZnR3YXJlAEFkb2JlIEltYWdlUmVhZHlxyWU8AAAZTElEQVR4Xu3aWxECMRAAwQM3xACoBTuHKh4pwAOZ7p9NrYNM7eHxsgEAAABLO34mAAAAsLDfBcDtep2LMcacAAAAwDpcAAAAAEDA7wLgvu9zcb5c5gQAAAD+3/e/7wIAAAAAAgQAAAAACBAAAAAAIEAAAAAAgAABAAAAAAIEAAAAAAgQAAAAACBAAAAAAIAAAQAAAAACBAAAAAAIEAAAAAAgQAAAAACAAAEAAAAAAgQAAAAACBAAAAAAIEAAAAAAgAABAAAAAAIEAAAAAAgQAAAAACBAAAAAAIAAAQAAAAACBAAAAAAIEAAAAAAgQAAAAACAAAEAAAAAAgQAAAAACBAAAAAAIEAAAAAAgAABAAAAAAIEAAAAAAgQAAAAACBAAAAAAIAAAQAAAAACBAAAAAAIEAAAAAAgQAAAAACAAAEAAAAAAgQAAAAACBAAAAAAIEAAAAAAgAABAAAAAAIEAAAAAAgQAAAAACBAAAAAAIAAAQAAAAACBAAAAAAIEAAAAAAgQAAAAACAAAEAAAAAAgQAAAAACBAAAAAAIEAAAAAAgAABAAAAAAIEAAAAAAgQAAAAACBAAAAAAIAAAQAAAAACBAAAAAAIEAAAAAAgQAAAAACAAAEAAAAAAgQAAAAACBAAAAAAIEAAAAAAgAABAAAAAAIEAAAAAAgQAAAAACBAAAAAAIAAAQAAAAACBAAAAAAIEAAAAAAgQAAAAACAAAEAAAAAAgQAAAAACBAAAAAAIEAAAAAAgAABAAAAAAIEAAAAAAgQAAAAACBAAAAAAIAAAQAAAAACBAAAAAAIEAAAAAAgQAAAAACAAAEAAAAAAgQAAAAACBAAAAAAIEAAAAAAgAABAAAAAAIEAAAAAAgQAAAAACBAAAAAAIAAAQAAAAACBAAAAAAIEAAAAAAgQAAAAACAAAEAAAAAAgQAAAAACBAAAAAAIEAAAAAAgAABAAAAAAIEAAAAAAgQAAAAACBAAAAAAIAAAQAAAAACBAAAAAAIEAAAAAAgQAAAAACAAAEAAAAAAgQAAAAACBAAAAAAIEAAAAAAgAABAAAAAAIEAAAAAAgQAAAAACBAAAAAAIAAAQAAAAACBAAAAAAIEAAAAAAgQAAAAACAAAEAAAAAAgQAAAAACBAAAAAAIEAAAAAAgAABAAAAAAIEAAAAAAgQAAAAACBAAAAAAIAAAQAAAAACBAAAAAAIEAAAAAAgQAAAAACAAAEAAAAAAgQAAAAACBAAAAAAIEAAAAAAgAABAAAAAAIEAAAAAAgQAAAAACBAAAAAAIAAAQAAAAACBAAAAAAIEAAAAAAgQAAAAACAAAEAAAAAAgQAAAAACBAAAAAAIEAAAAAAgAABAAAAAAIEAAAAAAgQAAAAACBAAAAAAIAAAQAAAAACBAAAAAAIEAAAAAAgQAAAAACAAAEAAAAAAgQAAAAACBAAAAAAIEAAAAAAgAABAAAAAAIEAAAAAAgQAAAAACBAAAAAAIAAAQAAAAACBAAAAAAIEAAAAAAgQAAAAACAAAEAAAAAAgQAAAAACBAAAAAAIEAAAAAAgAABAAAAAAIEAAAAAAgQAAAAACBAAAAAAIAAAQAAAAACBAAAAAAIEAAAAAAgQAAAAACAAAEAAAAAAgQAAAAACBAAAAAAIEAAAAAAgAABAAAAAAIEAAAAAAgQAAAAACBAAAAAAIAAAQAAAAACBAAAAAAIEAAAAAAgQAAAAACAAAEAAAAAAgQAAAAACBAAAAAAIEAAAAAAgAABAAAAAAIEAAAAAAgQAAAAACBAAAAAAIAAAQAAAAACBAAAAAAIEAAAAAAgQAAAAACAAAEAAAAAAgQAAAAACBAAAAAAIEAAAAAAgAABAAAAAAIEAAAAAAgQAAAAACBAAAAAAIAAAQAAAAACBAAAAAAIEAAAAAAgQAAAAACAAAEAAAAAAgQAAAAACBAAAAAAIEAAAAAAgAABAAAAAAIEAAAAAAgQAAAAACBAAAAAAIAAAQAAAAACBAAAAAAIEAAAAAAgQAAAAACAAAEAAAAAAgQAAAAACBAAAAAAIEAAAAAAgAABAAAAAAIEAAAAAAgQAAAAACBAAAAAAIAAAQAAAAACBAAAAAAIEAAAAAAgQAAAAACAAAEAAAAAAgQAAAAACBAAAAAAIEAAAAAAgAABAAAAAAIEAAAAAAgQAAAAACBAAAAAAIAAAQAAAAACBAAAAAAIEAAAAAAgQAAAAACAAAEAAAAAAgQAAAAACBAAAAAAIEAAAAAAgAABAAAAAAIEAAAAAAgQAAAAACBAAAAAAIAAAQAAAAACBAAAAAAIEAAAAAAgQAAAAACAAAEAAAAAAgQAAAAACBAAAAAAIEAAAAAAgAABAAAAAAIEAAAAAAgQAAAAACBAAAAAAIAAAQAAAAACBAAAAAAIEAAAAAAgQAAAAACAAAEAAAAAAgQAAAAACBAAAAAAIEAAAAAAgAABAAAAAAIEAAAAAAgQAAAAACBAAAAAAIAAAQAAAAACBAAAAAAIEAAAAAAgQAAAAACAAAEAAAAAAgQAAAAACBAAAAAAIEAAAAAAgAABAAAAAAIEAAAAAAgQAAAAACBAAAAAAIAAAQAAAAACBAAAAAAIEAAAAAAgQAAAAACAAAEAAAAAAgQAAAAACBAAAAAAIEAAAAAAgAABAAAAAAIEAAAAAAgQAAAAACBAAAAAAIAAAQAAAAACBAAAAAAIEAAAAAAgQAAAAACAAAEAAAAAAgQAAAAACBAAAAAAIEAAAAAAgAABAAAAAAIEAAAAAAgQAAAAACBAAAAAAIAAAQAAAAACBAAAAAAIEAAAAAAgQAAAAACAAAEAAAAAAgQAAAAACBAAAAAAIEAAAAAAgAABAAAAAAIEAAAAAAgQAAAAACBAAAAAAIAAAQAAAAACBAAAAAAIEAAAAAAgQAAAAACAAAEAAAAAAgQAAAAACBAAAAAAIEAAAAAAgAABAAAAAAIEAAAAAAgQAAAAACBAAAAAAIAAAQAAAAACBAAAAAAIEAAAAAAgQAAAAACAAAEAAAAAAgQAAAAACBAAAAAAIEAAAAAAgAABAAAAAAIEAAAAAAgQAAAAACBAAAAAAIAAAQAAAAACBAAAAAAIEAAAAAAgQAAAAACAAAEAAAAAAgQAAAAACBAAAAAAIEAAAAAAgAABAAAAAAIEAAAAAAgQAAAAACBAAAAAAIAAAQAAAAACBAAAAAAIEAAAAAAgQAAAAACAAAEAAAAAAgQAAAAACBAAAAAAIEAAAAAAgAABAAAAAAIEAAAAAAgQAAAAACBAAAAAAIAAAQAAAAACBAAAAAAIEAAAAAAgQAAAAACAAAEAAAAAAgQAAAAACBAAAAAAIEAAAAAAgAABAAAAAAIEAAAAAAgQAAAAACBAAAAAAIAAAQAAAAACBAAAAAAIEAAAAAAgQAAAAACAAAEAAAAAAgQAAAAACBAAAAAAIEAAAAAAgAABAAAAAAIEAAAAAAgQAAAAACBAAAAAAIAAAQAAAAACBAAAAAAIEAAAAAAgQAAAAACAAAEAAAAAAgQAAAAACBAAAAAAIEAAAAAAgAABAAAAAAIEAAAAAAgQAAAAACBAAAAAAIAAAQAAAAACBAAAAAAIEAAAAAAgQAAAAACAAAEAAAAAAgQAAAAACBAAAAAAIEAAAAAAgAABAAAAAAIEAAAAAAgQAAAAACBAAAAAAIAAAQAAAAACBAAAAAAIEAAAAAAgQAAAAACAAAEAAAAAAgQAAAAACBAAAAAAIEAAAAAAgAABAAAAAAIEAAAAAAgQAAAAACBAAAAAAIAAAQAAAAACBAAAAAAIEAAAAAAgQAAAAACAAAEAAAAAAgQAAAAACBAAAAAAIEAAAAAAgAABAAAAAAIEAAAAAAgQAAAAACBAAAAAAIAAAQAAAAACBAAAAAAIEAAAAAAgQAAAAACAAAEAAAAAAgQAAAAACBAAAAAAIEAAAAAAgAABAAAAAAIEAAAAAAgQAAAAACBAAAAAAIAAAQAAAAACBAAAAAAIEAAAAAAgQAAAAACAAAEAAAAAAgQAAAAACBAAAAAAIEAAAAAAgAABAAAAAAIEAAAAAAgQAAAAACBAAAAAAIAAAQAAAAACBAAAAAAIEAAAAAAgQAAAAACAAAEAAAAAAgQAAAAACBAAAAAAIEAAAAAAgAABAAAAAAIEAAAAAAgQAAAAACBAAAAAAIAAAQAAAAACBAAAAAAIEAAAAAAgQAAAAACAAAEAAAAAAgQAAAAACBAAAAAAIEAAAAAAgAABAAAAAAIEAAAAAAgQAAAAACBAAAAAAIAAAQAAAAACBAAAAAAIEAAAAAAgQAAAAACAAAEAAAAAAgQAAAAACBAAAAAAIEAAAAAAgAABAAAAAAIEAAAAAAgQAAAAACBAAAAAAIAAAQAAAAACBAAAAAAIEAAAAAAgQAAAAACAAAEAAAAAAgQAAAAACBAAAAAAIEAAAAAAgAABAAAAAAIEAAAAAAgQAAAAACBAAAAAAIAAAQAAAAACBAAAAAAIEAAAAAAgQAAAAACAAAEAAAAAAgQAAAAACBAAAAAAIEAAAAAAgAABAAAAAAIEAAAAAAgQAAAAACBAAAAAAIAAAQAAAAACBAAAAAAIEAAAAAAgQAAAAACAAAEAAAAAAgQAAAAACBAAAAAAIEAAAAAAgAABAAAAAAIEAAAAAAgQAAAAACBAAAAAAIAAAQAAAAACBAAAAAAIEAAAAAAgQAAAAACAAAEAAAAAAgQAAAAACBAAAAAAIEAAAAAAgAABAAAAAAIEAAAAAAgQAAAAACBAAAAAAIAAAQAAAAACBAAAAAAIEAAAAAAgQAAAAACAAAEAAAAAAgQAAAAACBAAAAAAIEAAAAAAgAABAAAAAAIEAAAAAAgQAAAAACBAAAAAAIAAAQAAAAACBAAAAAAIEAAAAAAgQAAAAACAAAEAAAAAAgQAAAAACBAAAAAAIEAAAAAAgAABAAAAAAIEAAAAAAgQAAAAACBAAAAAAIAAAQAAAAACBAAAAAAIEAAAAAAgQAAAAACAAAEAAAAAAgQAAAAACBAAAAAAIEAAAAAAgAABAAAAAAIEAAAAAAgQAAAAACBAAAAAAIAAAQAAAAACBAAAAAAIEAAAAAAgQAAAAACAAAEAAAAAAgQAAAAACBAAAAAAIEAAAAAAgAABAAAAAAIEAAAAAAgQAAAAACBAAAAAAIAAAQAAAAACBAAAAAAIEAAAAAAgQAAAAACAAAEAAAAAAgQAAAAACBAAAAAAIEAAAAAAgAABAAAAAAIEAAAAAAgQAAAAACBAAAAAAIAAAQAAAAACBAAAAAAIEAAAAAAgQAAAAACAAAEAAAAAAgQAAAAACBAAAAAAIEAAAAAAgAABAAAAAAIEAAAAAAgQAAAAACBAAAAAAIAAAQAAAAACBAAAAAAIEAAAAAAgQAAAAACAAAEAAAAAAgQAAAAACBAAAAAAIEAAAAAAgAABAAAAAAIEAAAAAAgQAAAAACBAAAAAAIAAAQAAAAACBAAAAAAIEAAAAAAgQAAAAACAAAEAAAAAAgQAAAAACBAAAAAAIEAAAAAAgAABAAAAAAIEAAAAAAgQAAAAACBAAAAAAIAAAQAAAAACBAAAAAAIEAAAAAAgQAAAAACAAAEAAAAAAgQAAAAACBAAAAAAIEAAAAAAgAABAAAAAAIEAAAAAAgQAAAAACBAAAAAAIAAAQAAAAACBAAAAAAIEAAAAAAgQAAAAACAAAEAAAAAAgQAAAAACBAAAAAAIEAAAAAAgAABAAAAAAIEAAAAAAgQAAAAACBAAAAAAIAAAQAAAAACBAAAAAAIEAAAAAAgQAAAAACAAAEAAAAAAgQAAAAACBAAAAAAIEAAAAAAgAABAAAAAAIEAAAAAAgQAAAAACBAAAAAAIAAAQAAAAACBAAAAAAIEAAAAAAgQAAAAACAAAEAAAAAAgQAAAAACBAAAAAAIEAAAAAAgAABAAAAAAIEAAAAAAgQAAAAACBAAAAAAIAAAQAAAAACBAAAAAAIEAAAAAAgQAAAAACAAAEAAAAAAgQAAAAACBAAAAAAIEAAAAAAgAABAAAAAAIEAAAAAAgQAAAAACBAAAAAAIAAAQAAAAACBAAAAAAIEAAAAAAgQAAAAACAAAEAAAAAAgQAAAAACBAAAAAAIEAAAAAAgAABAAAAAAIEAAAAAAgQAAAAACBAAAAAAIAAAQAAAAACBAAAAAAIEAAAAAAgQAAAAACAAAEAAAAAAgQAAAAACBAAAAAAIEAAAAAAgAABAAAAAAIEAAAAAAgQAAAAACBAAAAAAIAAAQAAAAACBAAAAAAIEAAAAAAgQAAAAACAAAEAAAAAAgQAAAAACBAAAAAAIEAAAAAAgAABAAAAAAIEAAAAAAgQAAAAACBAAAAAAIAAAQAAAAACBAAAAAAIEAAAAAAgQAAAAACAAAEAAAAAAgQAAAAACBAAAAAAIEAAAAAAgAABAAAAAAIEAAAAAAgQAAAAACBAAAAAAIAAAQAAAAACBAAAAAAIEAAAAAAgQAAAAACAAAEAAAAAAgQAAAAACBAAAAAAIEAAAAAAgAABAAAAAAIEAAAAAAgQAAAAACBAAAAAAIAAAQAAAAACBAAAAAAIEAAAAAAgQAAAAACAAAEAAAAAAgQAAAAACBAAAAAAIEAAAAAAgAABAAAAAAIEAAAAAAgQAAAAACBAAAAAAIAAAQAAAAACBAAAAAAIEAAAAAAgQAAAAACAAAEAAAAAAgQAAAAACBAAAAAAIEAAAAAAgAABAAAAAAIEAAAAAAgQAAAAACBAAAAAAIAAAQAAAAACBAAAAAAIEAAAAAAgQAAAAACAAAEAAAAAAgQAAAAACBAAAAAAIEAAAAAAgAABAAAAAAIEAAAAAAgQAAAAACBAAAAAAIAAAQAAAAACBAAAAAAIEAAAAAAgQAAAAACAAAEAAAAAAgQAAAAACBAAAAAAIEAAAAAAgAABAAAAAAIEAAAAAAgQAAAAACBAAAAAAIAAAQAAAAACBAAAAAAIEAAAAAAgQAAAAACAAAEAAAAAAgQAAAAACBAAAAAAIEAAAAAAgAABAAAAAAIEAAAAAAgQAAAAACBAAAAAAIAAAQAAAAACBAAAAAAIEAAAAAAgQAAAAACAAAEAAAAAAgQAAAAACBAAAAAAIEAAAAAAgAABAAAAAAIEAAAAAAgQAAAAACBAAAAAAIAAAQAAAAACBAAAAAAIEAAAAAAgQAAAAACAAAEAAAAAAgQAAAAACBAAAAAAIEAAAAAAgAABAAAAAAIEAAAAAAgQAAAAACBAAAAAAIAAAQAAAAACBAAAAAAIEAAAAAAgQAAAAACAAAEAAAAAAgQAAAAACBAAAAAAIEAAAAAAgAABAAAAAAIEAAAAAAgQAAAAACBAAAAAAIAAAQAAAAACBAAAAAAIEAAAAAAgQAAAAACAAAEAAAAAAgQAAAAACBAAAAAAIEAAAAAAgAABAAAAAAIEAAAAAAgQAAAAACBAAAAAAIAAAQAAAAACBAAAAAAIEAAAAAAgQAAAAACAAAEAAAAAAgQAAAAACBAAAAAAIEAAAAAAgAABAAAAAAIEAAAAAAgQAAAAACBAAAAAAIAAAQAAAAACBAAAAAAIEAAAAAAgQAAAAACAAAEAAAAAAgQAAAAACBAAAAAAIEAAAAAAgAABAAAAAAIEAAAAAAgQAAAAACBAAAAAAIAAAQAAAAACBAAAAAAIEAAAAAAgQAAAAACAAAEAAAAAAgQAAAAACBAAAAAAIEAAAAAAgAABAAAAAAIEAAAAAAgQAAAAACBAAAAAAIAAAQAAAAACBAAAAAAIEAAAAAAgQAAAAACAAAEAAAAAAgQAAAAACBAAAAAAIEAAAAAAgAABAAAAAAIEAAAAAAgQAAAAACBAAAAAAIAAAQAAAAACBAAAAAAIEAAAAAAgQAAAAACAAAEAAAAAAgQAAAAACBAAAAAAIEAAAAAAgAABAAAAAAIEAAAAAAgQAAAAACBAAAAAAIAAAQAAAAACBAAAAAAIEAAAAAAgQAAAAACAAAEAAAAAAgQAAAAACBAAAAAAIEAAAAAAgAABAAAAAAIEAAAAAAgQAAAAACBAAAAAAIAAAQAAAAACBAAAAAAIEAAAAAAgQAAAAACAAAEAAAAAAgQAAAAACBAAAAAAIEAAAAAAgAABAAAAAAIEAAAAAAgQAAAAACBAAAAAAIAAAQAAAAACBAAAAAAIEAAAAAAgQAAAAACAAAEAAAAAAgQAAAAACBAAAAAAIEAAAAAAgAABAAAAAAIEAAAAAAgQAAAAACBAAAAAAIAAAQAAAAACBAAAAAAIEAAAAAAgQAAAAACAAAEAAAAAAgQAAAAACBAAAAAAIEAAAAAAgAABAAAAAAIEAAAAAAgQAAAAACBAAAAAAIAAAQAAAAACBAAAAAAIEAAAAAAgQAAAAACAAAEAAAAAAgQAAAAACBAAAAAAIEAAAAAAgAABAAAAAAIEAAAAAAgQAAAAACBAAAAAAIAAAQAAAAACBAAAAAAIEAAAAAAgQAAAAACAAAEAAAAAAgQAAAAACBAAAAAAIEAAAAAAgAABAAAAAAIEAAAAAAgQAAAAACBAAAAAAIAAAQAAAAACDo+X9+O+73MBAAAArOM0xpwuAAAAAGB52/YE02kidcBN3nsAAAAASUVORK5CYII="},41:function(e,t,a){"use strict";a.r(t),a.d(t,"HistoryEventTypes",(function(){return u})),a.d(t,"MoveElementCommand",(function(){return p})),a.d(t,"InsertElementCommand",(function(){return m})),a.d(t,"RemoveElementCommand",(function(){return h})),a.d(t,"ChangeElementCommand",(function(){return g})),a.d(t,"BatchCommand",(function(){return f})),a.d(t,"UndoManager",(function(){return v}));var r=a(36),n=a(16),i=a(15),o=a(10),s=a(11),l=a(2),c=a(32),u={BEFORE_APPLY:"before_apply",AFTER_APPLY:"after_apply",BEFORE_UNAPPLY:"before_unapply",AFTER_UNAPPLY:"after_unapply"},d=function(){function e(){Object(o.a)(this,e)}return Object(s.a)(e,[{key:"getText",value:function(){return this.text}}]),e}(),p=function(e){Object(n.a)(a,e);var t=Object(i.a)(a);function a(e,r,n,i){var s;return Object(o.a)(this,a),(s=t.call(this)).elem=e,s.text=i?"Move "+e.tagName+" to "+i:"Move "+e.tagName,s.oldNextSibling=r,s.oldParent=n,s.newNextSibling=e.nextSibling,s.newParent=e.parentNode,s}return Object(s.a)(a,[{key:"type",value:function(){return"svgedit.history.MoveElementCommand"}},{key:"apply",value:function(e){e&&e.handleHistoryEvent(u.BEFORE_APPLY,this),this.elem=this.newParent.insertBefore(this.elem,this.newNextSibling),e&&e.handleHistoryEvent(u.AFTER_APPLY,this)}},{key:"unapply",value:function(e){e&&e.handleHistoryEvent(u.BEFORE_UNAPPLY,this),this.elem=this.oldParent.insertBefore(this.elem,this.oldNextSibling),e&&e.handleHistoryEvent(u.AFTER_UNAPPLY,this)}},{key:"elements",value:function(){return[this.elem]}}]),a}(d);p.type=p.prototype.type;var m=function(e){Object(n.a)(a,e);var t=Object(i.a)(a);function a(e,r){var n;return Object(o.a)(this,a),(n=t.call(this)).elem=e,n.text=r||"Create "+e.tagName,n.parent=e.parentNode,n.nextSibling=n.elem.nextSibling,n}return Object(s.a)(a,[{key:"type",value:function(){return"svgedit.history.InsertElementCommand"}},{key:"apply",value:function(e){e&&e.handleHistoryEvent(u.BEFORE_APPLY,this),this.elem=this.parent.insertBefore(this.elem,this.nextSibling),e&&e.handleHistoryEvent(u.AFTER_APPLY,this)}},{key:"unapply",value:function(e){e&&e.handleHistoryEvent(u.BEFORE_UNAPPLY,this),this.parent=this.elem.parentNode,this.elem=this.elem.parentNode.removeChild(this.elem),e&&e.handleHistoryEvent(u.AFTER_UNAPPLY,this)}},{key:"elements",value:function(){return[this.elem]}}]),a}(d);m.type=m.prototype.type;var h=function(e){Object(n.a)(a,e);var t=Object(i.a)(a);function a(e,r,n,i){var s;return Object(o.a)(this,a),(s=t.call(this)).elem=e,s.text=i||"Delete "+e.tagName,s.nextSibling=r,s.parent=n,Object(c.c)(e),s}return Object(s.a)(a,[{key:"type",value:function(){return"svgedit.history.RemoveElementCommand"}},{key:"apply",value:function(e){e&&e.handleHistoryEvent(u.BEFORE_APPLY,this),Object(c.c)(this.elem),this.parent=this.elem.parentNode,this.elem=this.parent.removeChild(this.elem),e&&e.handleHistoryEvent(u.AFTER_APPLY,this)}},{key:"unapply",value:function(e){e&&e.handleHistoryEvent(u.BEFORE_UNAPPLY,this),Object(c.c)(this.elem),Object(l.x)(this.nextSibling)&&window.console&&console.log("Error: reference element was lost"),this.parent.insertBefore(this.elem,this.nextSibling),e&&e.handleHistoryEvent(u.AFTER_UNAPPLY,this)}},{key:"elements",value:function(){return[this.elem]}}]),a}(d);h.type=h.prototype.type;var g=function(e){Object(n.a)(a,e);var t=Object(i.a)(a);function a(e,r,n){var i;for(var s in Object(o.a)(this,a),(i=t.call(this)).elem=e,i.text=n?"Change "+e.tagName+" "+n:"Change "+e.tagName,i.newValues={},i.oldValues=r,r)i.newValues[s]="#text"===s?e.textContent:"#href"===s?Object(l.o)(e):e.getAttribute(s);return i}return Object(s.a)(a,[{key:"type",value:function(){return"svgedit.history.ChangeElementCommand"}},{key:"apply",value:function(e){var t=this;e&&e.handleHistoryEvent(u.BEFORE_APPLY,this);var a=!1;if(Object.entries(this.newValues).forEach((function(e){var n=Object(r.a)(e,2),i=n[0],o=n[1];o?"#text"===i?t.elem.textContent=o:"#href"===i?Object(l.A)(t.elem,o):t.elem.setAttribute(i,o):"#text"===i?t.elem.textContent="":(t.elem.setAttribute(i,""),t.elem.removeAttribute(i)),"transform"===i&&(a=!0)})),!a){var n=Object(l.r)(this.elem);if(n){var i=this.elem.getBBox(),o=["rotate(",n," ",i.x+i.width/2,",",i.y+i.height/2,")"].join("");o!==this.elem.getAttribute("transform")&&this.elem.setAttribute("transform",o)}}return e&&e.handleHistoryEvent(u.AFTER_APPLY,this),!0}},{key:"unapply",value:function(e){var t=this;e&&e.handleHistoryEvent(u.BEFORE_UNAPPLY,this);var a=!1;if(Object.entries(this.oldValues).forEach((function(e){var n=Object(r.a)(e,2),i=n[0],o=n[1];o?"#text"===i?t.elem.textContent=o:"#href"===i?Object(l.A)(t.elem,o):t.elem.setAttribute(i,o):"#text"===i?t.elem.textContent="":t.elem.removeAttribute(i),"transform"===i&&(a=!0)})),!a){var n=Object(l.r)(this.elem);if(n){var i=this.elem.getBBox(),o=["rotate(",n," ",i.x+i.width/2,",",i.y+i.height/2,")"].join("");o!==this.elem.getAttribute("transform")&&this.elem.setAttribute("transform",o)}}return Object(c.c)(this.elem),e&&e.handleHistoryEvent(u.AFTER_UNAPPLY,this),!0}},{key:"elements",value:function(){return[this.elem]}}]),a}(d);g.type=g.prototype.type;var f=function(e){Object(n.a)(a,e);var t=Object(i.a)(a);function a(e){var r;return Object(o.a)(this,a),(r=t.call(this)).text=e||"Batch Command",r.stack=[],r}return Object(s.a)(a,[{key:"type",value:function(){return"svgedit.history.BatchCommand"}},{key:"apply",value:function(e){e&&e.handleHistoryEvent(u.BEFORE_APPLY,this);for(var t=this.stack.length,a=0;a<t;++a)this.stack[a].apply(e);e&&e.handleHistoryEvent(u.AFTER_APPLY,this)}},{key:"unapply",value:function(e){e&&e.handleHistoryEvent(u.BEFORE_UNAPPLY,this);for(var t=this.stack.length-1;t>=0;t--)this.stack[t].unapply(e);e&&e.handleHistoryEvent(u.AFTER_UNAPPLY,this)}},{key:"elements",value:function(){for(var e=[],t=this.stack.length;t--;)for(var a=this.stack[t].elements(),r=a.length;r--;)e.includes(a[r])||e.push(a[r]);return e}},{key:"addSubCommand",value:function(e){this.stack.push(e)}},{key:"isEmpty",value:function(){return!this.stack.length}}]),a}(d);f.type=f.prototype.type;var v=function(){function e(t){Object(o.a)(this,e),this.handler_=t||null,this.undoStackPointer=0,this.undoStack=[],this.undoChangeStackPointer=-1,this.undoableChangeStack=[]}return Object(s.a)(e,[{key:"resetUndoStack",value:function(){this.undoStack=[],this.undoStackPointer=0}},{key:"getUndoStackSize",value:function(){return this.undoStackPointer}},{key:"getRedoStackSize",value:function(){return this.undoStack.length-this.undoStackPointer}},{key:"getNextUndoCommandText",value:function(){return this.undoStackPointer>0?this.undoStack[this.undoStackPointer-1].getText():""}},{key:"getNextRedoCommandText",value:function(){return this.undoStackPointer<this.undoStack.length?this.undoStack[this.undoStackPointer].getText():""}},{key:"undo",value:function(){this.undoStackPointer>0&&this.undoStack[--this.undoStackPointer].unapply(this.handler_)}},{key:"redo",value:function(){this.undoStackPointer<this.undoStack.length&&this.undoStack.length>0&&this.undoStack[this.undoStackPointer++].apply(this.handler_)}},{key:"addCommandToHistory",value:function(e){this.undoStackPointer<this.undoStack.length&&this.undoStack.length>0&&(this.undoStack=this.undoStack.splice(0,this.undoStackPointer)),this.undoStack.push(e),this.undoStackPointer=this.undoStack.length}},{key:"beginUndoableChange",value:function(e,t){for(var a=++this.undoChangeStackPointer,r=t.length,n=new Array(r),i=new Array(r);r--;){var o=t[r];Object(l.x)(o)||(i[r]=o,n[r]=o.getAttribute(e))}this.undoableChangeStack[a]={attrName:e,oldValues:n,elements:i}}},{key:"finishUndoableChange",value:function(){for(var e=this.undoChangeStackPointer--,t=this.undoableChangeStack[e],a=t.attrName,r=new f("Change "+a),n=t.elements.length;n--;){var i=t.elements[n];if(!Object(l.x)(i)){var o={};o[a]=t.oldValues[n],o[a]!==i.getAttribute(a)&&r.addSubCommand(new g(i,o,a))}}return this.undoableChangeStack[e]=null,r}}]),e}()},410:function(e,t,a){e.exports=a.p+"static/media/px.9210e854.png"},411:function(e,t,a){e.exports=a.p+"static/media/py.53f2fd65.png"},412:function(e,t,a){e.exports=a.p+"static/media/pz.47a01aa1.png"},413:function(e,t,a){e.exports=a.p+"static/media/nx.e94f6963.png"},414:function(e,t,a){e.exports=a.p+"static/media/ny.70a8aa8f.png"},415:function(e,t,a){e.exports=a.p+"static/media/nz.6af7bd6f.png"},416:function(e,t,a){e.exports=a.p+"static/media/spinner.5a443563.gif"},422:function(e,t,a){"use strict";var r,n=a(23),i=a(0),o=a.n(i),s=a(19),l=a.n(s),c=a(39),u=a(7),d=a(10),p=a(11),m=a(16),h=a(15),g=a(260),f=a.n(g),v=a(12),b=a(134),A=a.n(b),y=(a(27),function(e){function t(e,t){return o.a.createElement("figure",{className:"imageWrap-box template_svg mb-0"},o.a.createElement("svg",{id:"thumb_"+t,width:"45",height:"45",dangerouslySetInnerHTML:{__html:e}}))}return o.a.createElement("div",{className:""===e.activeView?"advanced-search":"hidden"},o.a.createElement("div",{id:"text_preview"},o.a.createElement("svg",{id:"xe_d_text_svg",version:"1.1",width:"600",height:"600",viewBox:"0 0 600 600",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink"},o.a.createElement("g",{id:"xe_txtgrp"}))),o.a.createElement("div",{className:"d-flex align-items-center justify-content-between"+(!e.isTemplateViewMobile&&e.isMobileView?" d-none":"")},o.a.createElement("h3",{className:"boxTitle mb-2 predeco"},e.language.template.edit),e.isMobileView&&o.a.createElement("button",{className:"btn btn-sm btn-success py-0 px-2 mr-3",style:{borderRadius:"50px"},onClick:function(){return e.onChangeTemplateMobile(!1)}},e.language.main.done)),o.a.createElement("div",{id:"predecoScrollbar",className:"listView templateEdit template-form-edit predeco scrollbar"+(!e.isTemplateViewMobile&&e.isMobileView?" d-none":"")},o.a.createElement("div",{className:"listView-wrap"},e.textElems.map((function(t){var a,r,n,i,s;return o.a.createElement("div",{key:t.id,id:"listView_"+t.id},o.a.createElement("div",{className:"listView-elements"},o.a.createElement("div",{className:"text-options flex-column"},o.a.createElement("div",{className:"text-options-left w-100 mb-2"},t.prefs.objectTitle),o.a.createElement("div",{className:"text-options-right w-100"},o.a.createElement("textarea",{className:"form-control mw-100"+(t.prefs.noOfLines>0?"":" hidden"),dir:"auto",style:{resize:"none"},cols:"30",rows:"3",value:t.prefs.text,onChange:function(a){return e.onTextChange(a,t)}}),o.a.createElement("input",{type:"text",className:"form-control mw-100"+(0===t.prefs.noOfLines?"":" hidden"),dir:"auto",value:t.prefs.text,onChange:function(a){return e.onTextChange(a,t)}})))),o.a.createElement("div",{className:"listView-elements border-top-0"+((null===t||void 0===t||null===(a=t.prefs)||void 0===a||null===(r=a.lock)||void 0===r?void 0:r.editFont)?" hidden":"")},o.a.createElement("div",{className:"text-options pt-0"},o.a.createElement("div",{className:"text-options-left"},e.language.template.selectFont),o.a.createElement("div",{className:"text-options-right",onClick:function(){return e.openFontList(t)}},o.a.createElement("div",{className:"text-options-list"},o.a.createElement("div",{id:"selctedFont",className:"font-list",style:{fontFamily:t.prefs.font?t.prefs.font.font_family:""}},e.language.text.fontStyle)),o.a.createElement("i",{className:"nxi nxi-move-right ml-2 cursor-pointer"})))),o.a.createElement("div",{className:"listView-elements border-top-0"+((null===t||void 0===t||null===(n=t.prefs)||void 0===n||null===(i=n.lock)||void 0===i?void 0:i.colorEdit)?" hidden":"")},o.a.createElement("div",{className:"text-options pt-0"},o.a.createElement("div",{className:"text-options-left"},e.language.template.textColor),o.a.createElement("div",{className:"text-options-right"},o.a.createElement("div",{className:"color-btn",onClick:function(){return e.openView("textColor",t)}},(s=t.prefs,"none"===e.fillColor?o.a.createElement("div",{className:"color-swatch",style:{backgroundImage:"url("+A.a+")"}}):/^#([0-9A-F]{3}){1,2}$/i.test(s.colors[0])?o.a.createElement("div",{className:"color-swatch",style:{background:s.colors[0]}}):o.a.createElement("div",{className:"color-swatch",style:{background:"url("+v.a.assets_path+"/color_palettes/"+s.colors[0]+")"}}))),o.a.createElement("i",{className:"nxi nxi-move-right ml-2 cursor-pointer",onClick:function(){return e.openView("textColor",t)}})))))})),e.graphicsElements.map((function(t){return o.a.createElement("div",{className:"listView-elements",key:t.id,id:"listView_"+t.id},o.a.createElement("div",{className:"text-options as-column"},o.a.createElement("div",{className:"text-options-left"},o.a.createElement("div",{className:"lable"},t.prefs.objectTitle)),o.a.createElement("div",{className:"text-options-right"},o.a.createElement("input",{type:"text",className:"form-control",placeholder:"Enter text",value:t.prefs.text,dir:"auto",onChange:function(a){return e.onTextChange(a,t)}}))))})),e.designElems.map((function(a,r){var n,i,s,l,c,u,d,p;return o.a.createElement("div",{className:"listView-elements",key:a.obj.id,id:"listView_"+a.obj.id},o.a.createElement("div",{className:"text-options flex-column"},o.a.createElement("div",{className:"text-options-left w-100 mb-2"},a.obj.prefs.objectTitle),o.a.createElement("div",{className:"text-options-right w-100 justify-content-start flex-column align-items-start"},o.a.createElement("div",{className:"media"},o.a.createElement("div",{className:"preview-img mr-2 rounded shadow-sm"},t(a.obj.outerHTML,a.obj.id)),o.a.createElement("div",{className:"media-body text-left d-flex flex-column align-items-start"},o.a.createElement("div",{className:(null===(n=e.designElems[r])||void 0===n||null===(i=n.nodelist)||void 0===i?void 0:i.length)?"":"hidden"},o.a.createElement("div",{className:(null===a||void 0===a||null===(s=a.obj)||void 0===s||null===(l=s.prefs)||void 0===l||null===(c=l.lock)||void 0===c?void 0:c.colorEdit)?"hidden":""},o.a.createElement("h6",{className:"text-xxs mt-1 mb-1"},e.language.template.changeColors),o.a.createElement("div",{className:"color-item-group"},e.designElems&&e.designElems.length&&e.designElems[r].nodelist.map((function(t,a){if(a<5)return o.a.createElement("div",{className:"color-btn",key:t.id},function(t,a,r,n){var i=a.getAttribute("fill")||"#000000";if(/^#([0-9A-F]{3}){1,2}$/i.test(i))return o.a.createElement("div",{className:"color-swatch",onClick:function(){return e.openView("textColor",t,a,r,n)},style:{background:i}});var s=i.substring(i.lastIndexOf("_")+1,i.lastIndexOf(")"));return o.a.createElement("div",{className:"color-swatch",onClick:function(){return e.openView("textColor",t,a,r,n)},style:{background:"url("+v.a.assets_path+"/color_palettes/"+s+")"}})}(e.designElems[r].obj,t,r,a))})),(null===(u=e.designElems[r])||void 0===u?void 0:u.obj)&&(null===(d=e.designElems[r])||void 0===d?void 0:d.nodelist)&&(null===(p=e.designElems[r])||void 0===p?void 0:p.nodelist.length)&&o.a.createElement("div",{className:"color-item-list no-effect",onClick:function(){return e.openView("textColor",e.designElems[r].obj,e.designElems[r].nodelist[0],r,0)}},o.a.createElement("div",{className:"color-item-link text-dark"},o.a.createElement("i",{className:"nxi nxi-move-right"})))))))),o.a.createElement("footer",{className:"d-flex mt-3"},o.a.createElement("button",{className:"btn btn-sm btn-link p-0 text-underline margin-top",onClick:function(){return e.replaceDesign(a.obj,r)}},e.language.template.replaceArt)))))})),e.imgElems.map((function(a){var r,n,i;return o.a.createElement("div",{className:"listView-elements",key:a.id,id:"listView_"+a.id},o.a.createElement("div",{className:"text-options flex-column"},o.a.createElement("div",{className:"text-options-left w-100 mb-2"},a.prefs.objectTitle),o.a.createElement("div",{className:"text-options-right w-100 justify-content-start flex-column align-items-start"},o.a.createElement("div",{className:"media w-100"},o.a.createElement("div",{className:"preview-img mr-2 rounded shadow-sm"},t(a.outerHTML,a.id)),((null===a||void 0===a||null===(r=a.prefs)||void 0===r||null===(n=r.maskInfo)||void 0===n?void 0:n.selectedMask)||"mask"===a.prefs.imgSelectionType)&&o.a.createElement("div",{className:"media-body text-left d-flex justify-content-between align-items-center w-100"},o.a.createElement("div",{className:"movearrow-Wrap ml-3"},o.a.createElement("div",{className:"btn-group"},o.a.createElement("div",{className:"btn template btn-sm btn-default bg-light",onClick:function(){return e.positionMaskImg(a,"top")}},o.a.createElement("i",{className:"nf nf-top-arrow"}),o.a.createElement("span",{className:"btn-txt"},e.language.main.top))),o.a.createElement("div",{className:"btn-group"},o.a.createElement("div",{className:"btn template btn-sm btn-default bg-light",onClick:function(){return e.positionMaskImg(a,"left")}},o.a.createElement("i",{className:"nf nf-left-arrow"}),o.a.createElement("span",{className:"btn-txt"},e.language.main.left)),o.a.createElement("div",{className:"btn template btn-sm btn-default bg-light disabled"},"\xa0"),o.a.createElement("div",{className:"btn template btn-sm btn-default bg-light",onClick:function(){return e.positionMaskImg(a,"right")}},o.a.createElement("i",{className:"nf nf-right-arrow"}),o.a.createElement("span",{className:"btn-txt"},e.language.main.right))),o.a.createElement("div",{className:"btn-group"},o.a.createElement("div",{className:"btn template btn-sm btn-default bg-light",onClick:function(){return e.positionMaskImg(a,"bottom")}},o.a.createElement("i",{className:"nf nf-bottom-arrow "}),o.a.createElement("span",{className:"btn-txt"},e.language.main.bottom)))),o.a.createElement("div",{className:"zoombtn-Wrap template"},o.a.createElement("div",{className:"btn-group"},o.a.createElement("div",{className:"btn btn-sm btn-default bg-light",onClick:function(){return e.onMaskZoomIn(a)}},o.a.createElement("i",{className:"nf nf-zoom-in"})),o.a.createElement("div",{className:"btn btn-sm btn-default bg-light",onClick:function(){return e.onMaskZoomOut(a)}},o.a.createElement("i",{className:"nf nf-zoom-out"})))))),o.a.createElement("footer",{className:"d-flex align-items-center justify-content-between w-100 mt-2"},o.a.createElement("div",null,o.a.createElement(f.a,{className:"files-dropzone",multiple:!1,accepts:["image/png",".jpg",".jpeg",".svg"],onChange:e.changeImage},o.a.createElement("button",{className:"btn btn-sm btn-link p-0 text-underline margin-top",onClick:function(){return e.replaceImage(a)}},e.language.template.uploadImage))),o.a.createElement("div",null,(null===a||void 0===a||null===(i=a.prefs)||void 0===i?void 0:i.lock)&&!1===a.prefs.lock.filter&&o.a.createElement("button",{className:"btn btn-sm btn-link p-0 text-underline",onClick:function(){return e.editImage(a)}},e.language.template.filter))))))})),e.backgroundElem&&o.a.createElement("div",{className:"listView-elements",key:e.backgroundElem.id,id:"listView_"+e.backgroundElem.id},o.a.createElement("div",{className:"text-options flex-column"},o.a.createElement("div",{className:"text-options-left w-100 mb-2"},e.backgroundElem.prefs.objectTitle),o.a.createElement("div",{className:"text-options-right w-100 justify-content-start flex-column align-items-start"},o.a.createElement("div",{className:"media"},o.a.createElement("div",{className:"preview-img mr-2 rounded shadow-sm"},t(e.backgroundElem.outerHTML,e.backgroundElem.id))),o.a.createElement("footer",{className:"d-flex mt-2"},o.a.createElement("button",{className:"btn btn-sm btn-link p-0 text-underline margin-top",onClick:function(){return e.replaceDesign(e.backgroundElem,null)}},e.language.template.replaceBackground))))),e.setDesignElems())))}),_=a(261),E=[],S=function(){function e(){Object(d.a)(this,e)}return Object(p.a)(e,null,[{key:"setFont",value:function(e){E.push(e)}},{key:"getFont",value:function(e){if(!e)return E;for(var t=0;t<E.length;t++)if(e===E[t].font_family)return E[t].glyph;return null}}]),e}(),C=a(3),x=a(180),w=a(187),k=a(111),I=a(22),N=a.n(I),O=a(24),P=a(355),D=function(e){return"textColor"==e.activeView?o.a.createElement(i.Fragment,null,o.a.createElement("div",{className:"element-controls-header d-none d-md-flex d-lg-flex d-xl-flex"},o.a.createElement("section",{className:"boxTitle back-to-back",onClick:function(){return e.openView("")}},o.a.createElement("div",{className:"icon",title:e.language.main.backToSection},o.a.createElement("i",{className:"nf nf-left-arrow"})),o.a.createElement("div",{className:"text"},e.language.panel.back)),o.a.createElement("div",{className:"boxTitle back-to-menu"},o.a.createElement("i",{className:"nf nf-delete"}))),o.a.createElement("div",{className:e.isDesign?"bg-wrap-colors":"bg-wrap-colors d-none"},o.a.createElement("div",{className:"thumbView-wrap temp-col-max-height scrollbar"},e.designElems&&e.designElems.length&&e.designElems[e.selectedIndex].nodelist.map((function(t,a){return o.a.createElement("div",{className:e.selctedPathIndex==a?"thumbView-elements active":"thumbView-elements",key:t.id},function(t,a,r){var n=a.getAttribute("fill")||"#000000";if(/^#([0-9A-F]{3}){1,2}$/i.test(n))return o.a.createElement("div",{onClick:function(){return e.openView("textColor",t,a,"",r)},style:{background:n,width:"30px",height:"30px"}});var i=n.substring(n.lastIndexOf("_")+1,n.lastIndexOf(")"));return o.a.createElement("div",{onClick:function(){return e.openView("textColor",t,a,"",r)},style:{background:"url("+v.a.assets_path+"/color_palettes/"+i+")",width:"30px",height:"30px"}})}(e.designElems[e.selectedIndex].obj,e.designElems[e.selectedIndex].nodelist[a],a))})))),o.a.createElement(k.a,{onColorSelect:e.onFillColorSelect,onColorHover:e.onColorHover,usedColorList:[{fill:e.colFillVal}],selectedColor:e.selectedColor}),o.a.createElement("div",{className:"buttonGroup"},o.a.createElement("button",{className:"btn btn-sm btn-success btn-block m-0 ml-1",onClick:function(){return e.openView("")}},e.language.main.done))):o.a.createElement("div",null)},R=a(262),T=a.n(R),L=a(96),M=[],B="",j=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).loadFontLists=function(e){n.setState({fontList:e,loading:!1,selectedFont:e[0]})},n.loadTemplateFonts=function(e){for(var t=null,a=0;a<e.length;a++)if(t=e[a].prefs.font){if(S.getFont(t.font_family))return;n.downloadFontFile(t)}},n.onTextChange=function(e,t){n.ungroupElement(t),n.props.togglePreviewTab("2d"),C.a.canvas.getAllStageElems().forEach((function(a,i){if(a.prefs)if("text"!==a.prefs.type||a.prefs.subType||a.id!==t.id)"text"===a.prefs.type&&a.prefs.subType&&a.id===t.id&&(a.prefs.text=e.target.value,n.setState({textProp:a.prefs},(function(){n.generateText(r,a.id)})));else{a.prefs.text=e.target.value;var o="";if(!0===a.prefs.isVertical&&a.prefs.text.length>1){for(var s=0;s<a.prefs.text.length;s++)"\n"!==a.prefs.text.length[s]&&(s<a.prefs.text.length-1?o+=a.prefs.text[s]+"\n":o+=a.prefs.text[s]);a.prefs.text=o}a.prefs.operation="update",(r=S.getFont(a.prefs.font.font_family))?n.setState({textProp:a.prefs},(function(){n.generateText(r,a.id)})):n.loadFontTTF(a.prefs,a.id)}}))},n.loadFont=function(e){C.a.canvas.getAllStageElems().forEach((function(t,a){t.prefs&&"text"===t.prefs.type&&t.id===n.state.selectedElem.id&&(r=S.getFont(e.font_family),t.prefs.font=e,r?n.setState({textProp:t.prefs},(function(){n.generateText(r,t.id)})):n.loadFontTTF(t.prefs,t.id))}))},n.setDesignElems=function(){(n.state.designElems.length||n.state.imgElems.length||n.state.backgroundElem)&&setTimeout((function(){for(var e="",t="",a="",r=0,n=document.getElementsByClassName("template_svg").length,i=0;i<n;i++){r=(t=(e=document.getElementsByClassName("template_svg")[i]).children)[0].children.length-1;for(var o=0,s=e.children.length;o<s;o++)e.children[o].children[0].children[0]&&e.children[o].children[0].children[0].hasAttribute("transform")&&e.children[o].children[0].children[0].removeAttribute("transform");e.children[0].setAttribute("preserveAspectRatio","xMinYMin meet"),t[0].children[r].getBBox().width&&t[0].children[r].getBBox().height&&(a=t[0].children[r].getBBox().x+" "+t[0].children[r].getBBox().y+" "+t[0].children[r].getBBox().width+" "+t[0].children[r].getBBox().height,e.children[0].setAttribute("viewBox",a))}!0}))},n.changeImage=function(e){if(n.props.togglePreviewTab("2d"),e[0]){var t=n.state.selectedElem;t.prefs.url=e[0].preview.url,n.setState({selectedElem:t},(function(){N()(t).find("image").attr("xlink:href",e[0].preview.url);var a=n.localStorageGetItem("browseId")?n.localStorageGetItem("browseId"):0;P.a.uploadHistoryImage(a,e[0]).then((function(e){e.data.status&&(N()(t).find("image").attr("xlink:href",e.data.image_url),n.forceUpdate())}))}))}},n.replaceImage=function(e){n.props.togglePreviewTab("2d"),n.setState({selectedElem:e})},n.openFontList=function(e){n.ungroupElement(e),n.props.togglePreviewTab("2d"),n.setState({selectedElem:e,fullText:e.prefs.text,activeView:"fonts",isTemplateElem:!0})},n.selectedFont=function(e,t){n.props.togglePreviewTab("2d"),n.setState({isActiveFont:e,selectedFont:t,activeView:""})},n.openView=function(e,t,a,r,i){void 0!=r&&""!==r||(r=r||n.state.selectedIndex),t&&t.prefs&&"clipart"==t.prefs.type?n.setState({isDesign:!0}):n.setState({isDesign:!1}),"textColor"==e?(n.ungroupElement(t),n.setState({activeView:e,selectedObjPrefs:t,selectedPath:a,selectedIndex:r,selctedPathIndex:i})):n.setState({activeView:e})},n.localStorageGetItem=function(e){try{return localStorage.getItem(e)}catch(t){return null}},n.setBackgroundElement=function(){for(var e=C.a.canvas.getCurrentLayerElems(),t=0,a=0;a<e.length;a++){var r,n,i,o,s;if("background"===(null===(r=e[a])||void 0===r||null===(n=r.prefs)||void 0===n?void 0:n.type)&&!(null===(i=e[a])||void 0===i||null===(o=i.prefs)||void 0===o||null===(s=o.lock)||void 0===s?void 0:s.edit)){B=e[a],t++;break}}0===t&&(B="")},n.onFillColorSelect=function(e){var t=[],a=[];if(e.hex_value&&(n.lastColor=e.hex_value),t=C.a.canvas.getAllStageElems(),!e.hex_value){var r=e.value.replace(/^.*[\\\/]/,"");C.a.canvas.setPatternDefs(r,e.value)}t.forEach((function(t,r){if(t.prefs){if(t.prefs&&t.id==n.state.selectedObjPrefs.id)if("text"!==t.prefs.type||t.prefs.subType){if("clipart"===t.prefs.type||"shape"===t.prefs.type)for(var i=t.querySelectorAll("path,polygon,circle,rect,ellipse"),o=0;o<i.length;o++)for(var s=0;s<i.length;s++)if(i[s].getAttribute("colKey")==n.state.selectedPath.getAttribute("colKey"))if(e.hex_value)i[s].setAttribute("fill",e.hex_value);else{var l=e.value.match(new RegExp("thumb_(.*)."));l&&(i[s].setAttribute("fill","url(#"+l[0]+")"),t.prefs.colors=[l[0]])}}else{var c=t.getElementsByTagName("path"),u=e.value;if(e.hex_value)for(var d=t.getElementsByTagName("path"),p=0;p<d.length;p++)d[p].setAttribute("fill",e.hex_value),t.prefs.colors=[e.hex_value];else for(var m=u.match(new RegExp("thumb_(.*).")),h=0;h<c.length;h++)e.hex_value?(c[h].setAttribute("fill",e.hex_value),t.prefs.colors=[e.hex_value]):m&&(c[h].setAttribute("fill","url(#"+m[0]+")"),t.prefs.colors=[m[0]]);t.prefs.fill=e.hex_value||e.value}"text"!==t.prefs.type||t.prefs.subType||a.push(t)}})),n.setState({textElems:a})},n.onColorHover=function(e,t){},n.editImage=function(e){var t;n.setState({selectedElem:e,activeView:"tempImageEdit"}),n.props.setHeaderDispay(!1),(null===e||void 0===e||null===(t=e.prefs)||void 0===t?void 0:t.filterInfo)&&n.setState({appliedFilter:e.prefs.filterInfo}),n.templateImgEditRef&&n.templateImgEditRef.resetFilter()},n.closeImageEdit=function(){n.setState({activeView:""}),n.props.setHeaderDispay(!0)},n.onMaskZoomIn=function(e){n.zoomUploadImage(e,10)},n.onMaskZoomOut=function(e){n.zoomUploadImage(e,-10)},n.positionMaskImg=function(e,t){var a,r=e;if((null===r||void 0===r||null===(a=r.prefs)||void 0===a?void 0:a.type)&&"image"===r.prefs.type){var i=document.getElementById(r.id).getElementsByTagName("image")[0],o=i.getBBox();switch(t){case"left":i.setAttribute("x",o.x-5);break;case"right":i.setAttribute("x",o.x+5);break;case"top":i.setAttribute("y",o.y-5);break;case"bottom":i.setAttribute("y",o.y+5)}n.updateThumPreview(e)}},n.zoomUploadImage=function(e,t){var a,r=e;if((null===r||void 0===r||null===(a=r.prefs)||void 0===a?void 0:a.type)&&"image"===r.prefs.type){var i=document.getElementById(r.id).getElementsByTagName("image")[0],o=i.getBBox();e.prefs.imgSelectionType||((o.width>250||o.height>250)&&(o.width=o.height=250),(o.width<150||o.height<150)&&(o.width=o.height=150)),i.setAttribute("width",o.width+t),i.setAttribute("height",o.height+t),n.updateThumPreview(e)}},n.updateThumPreview=function(e){for(var t="",a=document.getElementsByClassName("template_svg").length,r=0;r<a;r++){(t=document.getElementsByClassName("template_svg")[r]).children[0].children.length-1;for(var n=0,i=t.children.length;n<i;n++){if(t.children[n].getAttribute("id").replace("thumb_","")===e.id){var o=document.getElementById(e.id).getElementsByTagName("image")[0],s=t.children[n].getElementsByTagName("image")[0];s.setAttribute("height",o.getAttribute("height")),s.setAttribute("width",o.getAttribute("width")),s.setAttribute("x",o.getAttribute("x")),s.setAttribute("y",o.getAttribute("y"))}}}},n.getMaskImgPosition=function(e){var t,a;if((null===e||void 0===e||null===(t=e.prefs)||void 0===t||null===(a=t.maskInfo)||void 0===a?void 0:a.selectedMask)||"mask"===e.prefs.imgSelectionType){var r=document.getElementById(e.id).getElementsByTagName("image")[0];if(!n.imgResetData.find((function(t){return t.id===e.id}))){var i={id:e.id,isChanged:!1,maskData:{x:r.getAttribute("x"),y:r.getAttribute("y"),width:r.getAttribute("width"),height:r.getAttribute("height")}};n.imgResetData.push(i)}}},n.resetImage=function(e){var t=n.imgResetData.filter((function(t){return t.id===e.id}))[0];if(null===t||void 0===t?void 0:t.maskData){var a,r=document.getElementById(e.id).getElementsByTagName("image")[0];r.setAttribute("x",t.maskData.x),r.setAttribute("y",t.maskData.y),r.setAttribute("width",t.maskData.width),r.setAttribute("height",t.maskData.height),(null===e||void 0===e||null===(a=e.prefs)||void 0===a?void 0:a.imgSelectionType)&&"mask"===e.prefs.imgSelectionType&&C.a.canvas.removeFromSelection([e]),n.forceUpdate()}},n.checkResetStatus=function(e){var t=document.getElementById(e.id).getElementsByTagName("image")[0],a=n.imgResetData.filter((function(t){return t.id===e.id}))[0];return!(!(null===a||void 0===a?void 0:a.maskData)||a.maskData.x===t.getAttribute("x")&&a.maskData.y===t.getAttribute("y")&&a.maskData.width===t.getAttribute("width")&&a.maskData.height===t.getAttribute("height"))},n.ungroupElement=function(e){var t,a;(null===e||void 0===e||null===(t=e.parentElement)||void 0===t||null===(a=t.prefs)||void 0===a?void 0:a.type)&&"multiselect"===e.parentElement.prefs.type&&(C.a.canvas.ungroupSelectedElement(),C.a.canvas.clearSelection())},n.state={fontList:[],fontGlyph:null,fullText:"",textProp:{},designList:[],selectedElem:null,selectedFont:null,activeView:"",isActiveFont:[!0],selectedElems:[],textElems:[],imgElems:[],designElems:[],graphicsElements:[],isTemplateElem:!0,backgroundElem:"",appliedFilter:null,selectedIndex:0,selctedPathIndex:0},n.imgResetData=[],n}return Object(p.a)(a,[{key:"componentDidMount",value:function(){x.a.name in C.a.canvas.extensions||(C.a.addExtension(x.a.name,(function(){x.a.init({$:N.a,editor:C.a})}),{$:N.a}),w.a.name in C.a.canvas.extensions||C.a.addExtension(w.a.name,(function(){w.a.init({$:N.a,editor:C.a,misCharacter:T.a})}),{$:N.a}))}},{key:"downloadFontFile",value:function(e){Object(L.a)(e.file_name,(function(t,a){t?console.log("Font could not be loaded: "+t):S.setFont({glyph:a,font_family:e.font_family})}))}},{key:"loadFontTTF",value:function(e,t){var a=this;Object(L.a)(e.font.file_name,(function(r,n){r?console.log("Font could not be loaded: "+r):(S.setFont({glyph:n,font_family:e.font.font_family}),a.setState({textProp:e},(function(){a.generateText(n,t)})))}))}},{key:"generateText",value:function(e,t){e&&this.state.textProp&&"graphicText"!==this.state.textProp.subType?C.a.generateTextElm(this.state.textProp.text,e,this.state.textProp.align,this.state.textProp.effect,this.state.textProp.font,this.state.textProp.letterSpace,this.state.textProp.lineSpace,this.state.textProp.fill,this.state.textProp.stroke,this.state.textProp.strokeWidth,this.state.textProp.noOfLines,t,null,null,null,this.state.textProp.fontSize,null,null,this.state.textProp.artSize):this.state.textProp&&"graphicText"===this.state.textProp.subType?C.a.generateGraphicsText(this.state.textProp.text,this.state.textProp.font,t,this.state.textProp.fontHeight,this.state.textProp.textLen,this.state.textProp.objectTitle):alert("Unable to load font")}},{key:"elementSelected",value:function(e){var t=this,a=this.props.replaceDesignIndex,r=null,n=[],i=[],o=[],s=[],l=[];null===a&&(M=[]);var c=(n=C.a.canvas.getAllStageElems()).find((function(e){return"multiselect"===e.prefs.type}));if(null===c||void 0===c?void 0:c.children){var d,p=n.indexOf(c);(d=n).splice.apply(d,[p,1].concat(Object(u.a)(c.children)))}if(n.sort((function(e,t){return e.prefs.sortOrder-t.prefs.sortOrder})),n.forEach((function(n,c){if(n.prefs){var u,d,p,m,h,g,f,v;if("text"!==n.prefs.type||n.prefs.subType||(null===(u=n.prefs)||void 0===u||null===(d=u.lock)||void 0===d?void 0:d.edit))if("image"!==n.prefs.type||(null===(p=n.prefs)||void 0===p||null===(m=p.lock)||void 0===m?void 0:m.edit))if("clipart"!==n.prefs.type&&"shape"!==n.prefs.type||(null===(h=n.prefs)||void 0===h||null===(g=h.lock)||void 0===g?void 0:g.edit))"text"===n.prefs.type&&n.prefs.subType&&!(null===(f=n.prefs)||void 0===f||null===(v=f.lock)||void 0===v?void 0:v.edit)&&l.push(n);else{for(var b=n.querySelectorAll("path,polygon,circle,rect,ellipse"),A=[],y=0;y<b.length;y++){var _=b[y].getAttribute("fill");b[y].setAttribute("colKey",_),A.push(b[y])}M.length&&null!==a?(M[a].obj=n,M[a].nodelist=A):M.push({obj:n,nodelist:A});for(var E=[],S=0,C=(b=n.querySelectorAll("path,polygon,circle,rect,ellipse")).length;S<C;S++)E[S]=b[S].getAttribute("fill")}else(r=N()(n).find("image")[0])&&(n.prefs.url=r.getAttribute("xlink:href")),o.push(n),t.getMaskImgPosition(n),e&&e.prefs&&"image"===e.prefs.type&&setTimeout((function(){"none"===document.getElementById("selectorGrip_resize_nwt").getAttribute("display")?n.prefs.imageWarning=!1:n.prefs.imageWarning=!0}),50);else i.push(n);s.push(n),n.prefs.sortOrder||(n.prefs.sortOrder=c)}})),this.setBackgroundElement(),0===i.length&&0===o.length&&0===M.length&&0===l.length&&""===B?this.props.closeDecoratedForm():(this.loadTemplateFonts(i),this.setState({selectedElems:s,textElems:i,imgElems:o,designElems:M,graphicsElements:l,backgroundElem:B})),null===e||void 0===e?void 0:e.id){var m=document.getElementById("listView_"+e.id);m&&m.offsetTop&&(document.getElementById("predecoScrollbar").scrollTop=m.offsetTop-20)}}},{key:"render",value:function(){var e=this;return o.a.createElement(i.Fragment,null,o.a.createElement(c.a,{key:"decoratedFormView"},o.a.createElement(y,{selectedElems:this.state.selectedElems,activeView:this.state.activeView,textElems:this.state.textElems,imgElems:this.state.imgElems,designElems:this.state.designElems,onTextChange:this.onTextChange,setDesignElems:this.setDesignElems,replaceDesign:this.props.replaceDesign,replaceImage:this.replaceImage,changeImage:this.changeImage,openFontList:this.openFontList,graphicsElements:this.state.graphicsElements,language:this.props.language,backgroundElem:this.state.backgroundElem,isTemplateViewMobile:this.props.isTemplateViewMobile,isMobileView:this.props.isMobileView,onChangeTemplateMobile:this.props.onChangeTemplateMobile,editImage:this.editImage,openView:this.openView,onMaskZoomIn:this.onMaskZoomIn,onMaskZoomOut:this.onMaskZoomOut,positionMaskImg:this.positionMaskImg,resetImage:this.resetImage,checkResetStatus:this.checkResetStatus})),o.a.createElement(c.a,{key:"decoratedFormFont"},o.a.createElement(_.a,{key:"fonts",openView:this.openView,activeView:this.state.activeView,loadFont:this.loadFont,loadFontLists:this.loadFontLists,selectedFont:this.selectedFont,fullText:this.state.fullText,isTemplateElem:this.state.isTemplateElem,showNotification:this.props.showNotification})),o.a.createElement(c.a,{key:"decoratedFormImageEdit"},o.a.createElement(k.b,{templateImgEditRef:function(t){return e.templateImgEditRef=t},selectedElems:this.state.selectedElem,activeView:this.state.activeView,appliedFilter:this.state.appliedFilter,closeImageEdit:this.closeImageEdit})),o.a.createElement(c.a,{key:"decoratedFormColor"},o.a.createElement(D,{onFillColorSelect:this.onFillColorSelect,onColorHover:this.onColorHover,activeView:this.state.activeView,openView:this.openView,language:this.props.language,selectedColor:this.lastColor,selectedIndex:this.state.selectedIndex,designElems:this.state.designElems,selctedPathIndex:this.state.selctedPathIndex,isDesign:this.state.isDesign})))}}]),a}(o.a.Component),F=Object(O.b)((function(e){return{language:e.languageReducer.translation_data.filter((function(t){return t.langCode===e.languageReducer.default_lang}))[0]}}))(j),U=Object(i.lazy)((function(){return a.e(8).then(a.bind(null,938))})),V=Object(i.lazy)((function(){return Promise.all([a.e(0),a.e(2)]).then(a.bind(null,935))})),G=Object(i.lazy)((function(){return Promise.all([a.e(1),a.e(11)]).then(a.bind(null,943))})),q=Object(i.lazy)((function(){return Promise.all([a.e(0),a.e(4),a.e(3)]).then(a.bind(null,937))})),H=Object(i.lazy)((function(){return Promise.all([a.e(0),a.e(12)]).then(a.bind(null,940))})),z=Object(i.lazy)((function(){return Promise.all([a.e(0),a.e(7)]).then(a.bind(null,944))})),W=Object(i.lazy)((function(){return a.e(13).then(a.bind(null,939))})),Q=Object(i.lazy)((function(){return Promise.all([a.e(0),a.e(9)]).then(a.bind(null,942))})),J=Object(i.lazy)((function(){return a.e(10).then(a.bind(null,936))})),Y=Object(i.lazy)((function(){return a.e(5).then(a.bind(null,945))})),Z=Object(i.lazy)((function(){return a.e(15).then(a.bind(null,947))})),X=Object(i.lazy)((function(){return Promise.resolve().then(a.bind(null,129))})),K=Object(i.lazy)((function(){return Promise.all([a.e(1),a.e(6)]).then(a.bind(null,941))})),$=Object(i.lazy)((function(){return a.e(14).then(a.bind(null,946))})),ee=o.a.forwardRef((function(e,t){function a(){return e.modules&&e.modules.length&&e.language&&e.selectedPrintProfileData&&!e.isFormEditLoader?o.a.createElement("div",{className:"listView toolNav"},o.a.createElement("div",{className:"boxTitle"},e.language.panel.title),o.a.createElement("ul",{className:"nav nav-tabs listView-wrap scrollbar"+(e.isModClicked?" active":"")},o.a.createElement("li",{className:"nav-item d-block d-sm-block d-md-block d-lg-none d-xl-none",onClick:function(){e.onProductChange(e.productId),e.addActiveClass(!1)}},o.a.createElement("div",{className:"nav-link"},o.a.createElement("div",{key:"item_product01",className:"nav-link-icon"},o.a.createElement("i",{className:"nxi nxi-product"})),o.a.createElement("div",{key:"item_product02",className:"nav-link-label"},o.a.createElement("div",{className:"label-title"},o.a.createElement("span",{className:""},e.language.modules.products)),o.a.createElement("div",{className:"label-desc"})))),e.isConfiguratorEnabled&&o.a.createElement("li",{className:"nav-item d-block d-sm-block d-md-block",onClick:function(){return e.openConfiguratorModule()}},o.a.createElement("div",{className:"nav-link"},o.a.createElement("div",{key:"item_product01",className:"nav-link-icon"},o.a.createElement("i",{className:"nxi nxi-product"})),o.a.createElement("div",{key:"item_product02",className:"nav-link-label"},o.a.createElement("div",{className:"label-title"},o.a.createElement("span",{className:""},e.language.modules.configurator)),o.a.createElement("div",{className:"label-desc"},e.language.modules.configuratorDesc)))),e.modules.map((function(t){return function(t){if("designs"===t.name){var a=e.selectedPrintProfileData.feature_data.slice();return e.settings.advance_settings.save_design_my_gallery?a.filter((function(e){return"gallery"===e.slug}))[0].is_selected=1:a.filter((function(e){return"gallery"===e.slug}))[0].is_selected=0,"1"===e.isQuot&&(a.filter((function(e){return"gallery"===e.slug}))[0].is_selected=0),1===a.filter((function(e){return"clipart"===e.slug}))[0].is_selected||1===a.filter((function(e){return"template"===e.slug}))[0].is_selected||1===a.filter((function(e){return"background"===e.slug}))[0].is_selected||1===a.filter((function(e){return"drawing"===e.slug}))[0].is_selected||1===a.filter((function(e){return"shape"===e.slug}))[0].is_selected||1===a.filter((function(e){return"gallery"===e.slug}))[0].is_selected?t.isSub?e.isMobileView?o.a.createElement("li",{key:t.id,className:"nav-item",onClick:function(){return e.addActiveClass(!e.isModClicked)}},o.a.createElement("div",{className:"nav-link"},r(t)),s()):o.a.createElement("li",{key:t.id,className:"nav-item dropdown",onTouchEnd:function(){return e.addActiveClass(!e.isModClicked)}},o.a.createElement("div",{className:"nav-link dropdown-toggle","data-toggle":"dropdown",role:"button","aria-haspopup":"true","aria-expanded":"false"},r(t)),s()):o.a.createElement("li",{key:t.id,className:"nav-item",onClick:function(){return e.onModuleSelect(t,!1)}},o.a.createElement("div",{className:"nav-link"},r(t))):""}if(e.isKioskFeature&&"team"!==t.name||!e.isKioskFeature){var n=e.selectedPrintProfileData.feature_data.filter((function(e){return e.slug===t.name}))[0];if(n&&"1"===e.isQuot&&"template"===n.slug&&(n.is_selected=0),n&&1===n.is_selected&&(!t.isAddon||t.isAddon&&e.licenceAddOns.includes(t.name)))return t.isSub?o.a.createElement("li",{key:t.id,className:"nav-item dropdown"},o.a.createElement("div",{className:"nav-link dropdown-toggle","data-toggle":"dropdown",role:"button","aria-haspopup":"true","aria-expanded":"false"},r(t)),s()):o.a.createElement("li",{key:t.id,className:"team"===t.name&&e.isSaveTemplate?"d-none":"nav-item",onClick:function(){return e.onModuleSelect(t,!1)}},o.a.createElement("div",{className:"nav-link"},r(t)))}}(t)})))):e.selectedPrintProfileData||null!==e.activeMod||e.isFormEditLoader?e.isFormEditLoader?o.a.createElement(i.Fragment,null,o.a.createElement("div",{className:"listView toolNav d-none d-md-block d-lg-block d-xl-block"},o.a.createElement("h3",{className:"boxTitle"},o.a.createElement(l.a,{width:200,height:20})),o.a.createElement("div",{className:"listView templateEdit"},o.a.createElement("div",{className:"listView-wrap"},[1,2,3,4].map((function(e){return o.a.createElement("div",{className:"listView-elements",key:e},o.a.createElement("div",{className:"text-options"},o.a.createElement(l.a,{width:255,height:76})))}))))),o.a.createElement("div",{className:"listView toolNav d-block d-sm-block d-md-none d-lg-none d-xl-none"},o.a.createElement("ul",{className:"nav nav-tabs listView-wrap"},[1,2,3].map((function(e){return o.a.createElement("li",{className:"nav-item",key:e},o.a.createElement("div",{className:"nav-link"},o.a.createElement("div",{className:"nav-link-icon"},o.a.createElement(l.a,{width:26,height:26})),o.a.createElement("div",{className:"nav-link-label"},o.a.createElement("div",{className:"label-title mt-2"},o.a.createElement(l.a,{width:60,height:6})))))}))))):void 0:o.a.createElement(i.Fragment,null,o.a.createElement("div",{className:"listView toolNav d-none d-md-block d-lg-block d-xl-block"},o.a.createElement("h3",{className:"boxTitle"},o.a.createElement(l.a,{width:200,height:20})),o.a.createElement("ul",{className:"nav nav-tabs listView-wrap scrollbar"},[1,2,3,4].map((function(e){return o.a.createElement("li",{className:"nav-item",key:e},o.a.createElement("div",{className:"nav-link"},o.a.createElement("div",{className:"nav-link-icon"},o.a.createElement(l.a,{width:36,height:36})),o.a.createElement("div",{className:"nav-link-label"},o.a.createElement("div",{className:"label-title mb-2"},o.a.createElement(l.a,{width:100,height:14})),o.a.createElement("div",{className:"label-desc"},o.a.createElement(l.a,{width:200,height:8})))))})))),o.a.createElement("div",{className:"listView toolNav d-block d-sm-block d-md-none d-lg-none d-xl-none"},o.a.createElement("ul",{className:"nav nav-tabs listView-wrap"},[1,2,3].map((function(e){return o.a.createElement("li",{className:"nav-item",key:e},o.a.createElement("div",{className:"nav-link"},o.a.createElement("div",{className:"nav-link-icon"},o.a.createElement(l.a,{width:26,height:26})),o.a.createElement("div",{className:"nav-link-label"},o.a.createElement("div",{className:"label-title mt-2"},o.a.createElement(l.a,{width:60,height:6})))))})))))}function r(t){return[o.a.createElement("div",{key:"item_"+t.id,className:"nav-link-icon"},o.a.createElement("i",{className:t.icon})),o.a.createElement("div",{key:"item_1_"+t.id,className:"nav-link-label"},o.a.createElement("div",{className:"label-title"},o.a.createElement("span",{className:"d-none d-md-block d-lg-block d-xl-block"},e.language.modules[t.name]),o.a.createElement("span",{className:"d-block d-sm-block d-md-none d-lg-none d-xl-none"},e.language.modules[t.name])),o.a.createElement("div",{className:"label-desc"},e.language.modules[t.desc]))]}function s(){if(e.subModules.length)return o.a.createElement("div",{className:"dropdown-menu"+(e.isModClicked?" show":"")},e.subModules.map((function(t){var a,r,n;return(null===(a=e.currBackgroundElms)||void 0===a||null===(r=a.prefs)||void 0===r||null===(n=r.lock)||void 0===n?void 0:n.edit)&&"background"===t.name?"":e.selectedPrintProfileData.feature_data.filter((function(e){return e.slug===t.name})).length&&1===e.selectedPrintProfileData.feature_data.filter((function(e){return e.slug===t.name}))[0].is_selected?o.a.createElement("div",{key:t.id,className:"dropdown-item",onClick:function(){return e.onModuleSelect(t,!0)}},o.a.createElement("div",{className:"dropdown-item-icon"},o.a.createElement("i",{className:t.icon})),o.a.createElement("div",{className:"dropdown-item-label"},o.a.createElement("div",{className:"label-title"},e.language.modules[t.name]))):""})))}function u(){return e.activeMod&&"auth"!==e.activeMod?o.a.createElement("div",{className:"advanced-search it"},d(),o.a.createElement(i.Suspense,{fallback:o.a.createElement("div",null,"Loading...")},p(e.activeMod))):e.activeMod&&"auth"===e.activeMod?o.a.createElement(i.Fragment,null,d(),o.a.createElement(i.Suspense,{fallback:o.a.createElement("div",null,"Loading...")},p(e.activeMod))):void 0}function d(){if(!e.isSub&&e.isDisplayHeader&&e.language)return o.a.createElement(i.Fragment,null,!e.isUpdateClipart&&!e.isReplaceShape&&o.a.createElement("div",{className:"element-controls-header d-none d-md-flex d-lg-flex d-xl-flex"},o.a.createElement("section",{className:"boxTitle back-to-back",onClick:function(){return e.backToModules()}},o.a.createElement("div",{className:"icon",title:e.language.main.backToSection},o.a.createElement("i",{className:"nf nf-left-arrow"})),o.a.createElement("div",{className:"text"},e.language.panel.back)),o.a.createElement("div",{className:"boxTitle back-to-menu",title:e.language.main.backToMain},o.a.createElement("i",{className:"nf nf-delete"}))),e.isUpdateClipart&&o.a.createElement("div",{className:"element-controls-header d-none d-md-flex d-lg-flex d-xl-flex"},o.a.createElement("section",{className:"boxTitle back-to-back",onClick:function(){return e.showReplaceClipart(!1)}},o.a.createElement("div",{className:"icon",title:e.language.main.backToSection},o.a.createElement("i",{className:"nf nf-left-arrow"})),o.a.createElement("div",{className:"text"},e.language.panel.back)),o.a.createElement("div",{className:"boxTitle back-to-menu",title:e.language.main.backToMain},o.a.createElement("i",{className:"nf nf-delete"}))),e.isReplaceShape&&o.a.createElement("div",{className:"element-controls-header d-none d-md-flex d-lg-flex d-xl-flex"},o.a.createElement("section",{className:"boxTitle back-to-back",onClick:function(){return e.showReplaceShape(!1)}},o.a.createElement("div",{className:"icon",title:e.language.main.backToSection},o.a.createElement("i",{className:"nf nf-left-arrow"})),o.a.createElement("div",{className:"text"},e.language.panel.back)),o.a.createElement("div",{className:"boxTitle back-to-menu",title:e.language.main.backToMain},o.a.createElement("i",{className:"nf nf-delete"}))),"image"!==e.activeMod&&"text"!==e.activeMod&&"template"!==e.activeMod&&o.a.createElement("div",{className:"nav nav-tabs-custom d-flex d-sm-flex d-md-flex d-lg-none d-xl-none"},e.subModules.map((function(t){return e.selectedPrintProfileData.feature_data.filter((function(e){return e.slug===t.name}))[0]&&1===e.selectedPrintProfileData.feature_data.filter((function(e){return e.slug===t.name}))[0].is_selected?o.a.createElement("div",{className:"nav-item"+(e.activeMod===t.name?" active":""),key:t.id,onClick:function(){return e.onModuleSelect(t,!0)}},o.a.createElement("div",{className:"nav-item-icon"},o.a.createElement("i",{className:t.icon})),o.a.createElement("div",{className:"nav-item-label"},o.a.createElement("div",{className:"label-title"},e.language.sub_modules[t.name]))):""}))),"template"===e.activeMod&&o.a.createElement("h3",{className:"boxTitle back-link border-bottom justify-content-between d-flex d-sm-flex d-md-flex d-lg-none d-xl-none m-0 pt-3 pl-3 pr-3 pb-3"},o.a.createElement("span",null,e.language.modules.template),o.a.createElement("span",{className:"btn btn-link text-dark",onClick:function(){return e.onCanvasMouseDown()}},o.a.createElement("i",{className:"nf nf-tick"})," ",e.language.main.done)),"image"===e.activeMod&&o.a.createElement("h3",{className:"boxTitle back-link d-flex d-sm-flex d-md-flex d-lg-none d-xl-none justify-content-between"},o.a.createElement("span",{onClick:function(){return e.onCanvasMouseDown()}},e.language.main.cancel)))}function p(a){switch(a.toLowerCase()){case"clipart":return o.a.createElement(c.a,null,o.a.createElement(U,{forwardedRef:t,setHeaderDispay:e.setHeaderDispay,isUpdateClipart:e.isUpdateClipart,showReplaceClipart:e.showReplaceClipart,isTempReplace:e.isTempReplace,changeTempReplace:e.changeTempReplace,selectedElm:e.selectedElm,showHideBackLoader:e.showHideBackLoader,showNotification:e.showNotification,replaceDesignIndex:e.replaceDesignIndex,setLayerData:e.setLayerData}));case"text":return o.a.createElement(c.a,null,o.a.createElement(V,{forwardedRef:t,setHeaderDispay:e.setHeaderDispay,onCanvasMouseDown:e.onCanvasMouseDown,isMobileView:e.isMobileView,backToModules:e.backToModules,showNotification:e.showNotification}));case"image":return o.a.createElement(c.a,null,o.a.createElement(q,{forwardedRef:t,setHeaderDispay:e.setHeaderDispay,handleSplitScreen:e.handleSplitScreen,isMobileView:e.isMobileView,showHideBackLoader:e.showHideBackLoader,hideImageWarning:e.hideImageWarning,setLayerData:e.setLayerData,showNotification:e.showNotification}));case"shape":return o.a.createElement(c.a,null,o.a.createElement(H,{forwardedRef:t,setHeaderDispay:e.setHeaderDispay,isReplaceShape:e.isReplaceShape,showReplaceShape:e.showReplaceShape,isTempReplace:e.isTempReplace,changeTempReplace:e.changeTempReplace,selectedElm:e.selectedElm,showHideBackLoader:e.showHideBackLoader,showNotification:e.showNotification,replaceDesignIndex:e.replaceDesignIndex,setLayerData:e.setLayerData}));case"background":return o.a.createElement(c.a,null,o.a.createElement(z,{forwardedRef:t,backToModules:e.backToModules,showHideBackLoader:e.showHideBackLoader,checkBackgroundElm:e.checkBackgroundElm,isMobileView:e.isMobileView,handleSplitScreen:e.handleSplitScreen,editBackgroundDetails:e.editBackgroundDetails,showNotification:e.showNotification,isTempReplace:e.isTempReplace,changeTempReplace:e.changeTempReplace}));case"template":return o.a.createElement(c.a,null,o.a.createElement(W,{forwardedRef:t,setHeaderDispay:e.setHeaderDispay,replaceDesign:e.replaceDesign,showHideBackLoader:e.showHideBackLoader,applyTemplate:e.applyTemplate,replaceDesignIndex:e.replaceDesignIndex,resetReplaceDesignIndex:e.resetReplaceDesignIndex,productBasedTempId:e.productBasedTempId}));case"drawing":return o.a.createElement(c.a,null,o.a.createElement(Q,{forwardedRef:t,setHeaderDispay:e.setHeaderDispay,showNotification:e.showNotification,isMobileView:e.isMobileView}));case"team":return o.a.createElement(c.a,null,o.a.createElement(Y,{forwardedRef:t,setHeaderDispay:e.setHeaderDispay,onChangeTeamData:e.onChangeTeamData,backToModules:e.backToModules,handleSplitScreen:e.handleSplitScreen,isMobileView:e.isMobileView,showNotification:e.showNotification}));case"gallery":return o.a.createElement(c.a,null,o.a.createElement(J,{loadProduct:e.loadProduct,setFaceData:e.setFaceData,showCanvasLoader:e.showCanvasLoader,saveDesignModal:e.saveDesignModal,setProductId:e.setProductId,setDesignId:e.setDesignId,setDesignName:e.setDesignName,designId:e.designId,showNotification:e.showNotification,changeDesignedProduct:e.changeDesignedProduct}));case"layer":return o.a.createElement(c.a,null,o.a.createElement(Z,{forwardedRef:t,setHeaderDispay:e.setHeaderDispay,handleSplitScreen:e.handleSplitScreen,isMobileView:e.isMobileView,onCanvasMouseDown:e.onCanvasMouseDown,showNotification:e.showNotification}));case"edit":return o.a.createElement(c.a,null,o.a.createElement(F,{forwardedRef:t,setHeaderDispay:e.setHeaderDispay,replaceDesign:e.replaceDesign,replaceDesignIndex:e.replaceDesignIndex,resetReplaceDesignIndex:e.resetReplaceDesignIndex,showNotification:e.showNotification,togglePreviewTab:e.togglePreviewTab,isTemplateViewMobile:e.isTemplateViewMobile,isMobileView:e.isMobileView,onChangeTemplateMobile:e.onChangeTemplateMobile,closeDecoratedForm:e.closeDecoratedForm}));case"auth":return o.a.createElement(c.a,null,o.a.createElement(X,{userAuthSuccess:e.userAuthSuccess,isOpen:e.isLogInModalOpen,isLogInModalOpen:e.isLogInModalOpen,saveDesignModal:e.saveDesignModal,openGalleryModule:e.openGalleryModule,showNotification:e.showNotification}));case"ar":return o.a.createElement(c.a,null,o.a.createElement(K,Object(n.a)({forwardedRef:t,setHeaderDispay:e.setHeaderDispay,isMobileView:e.isMobileView,handleSplitScreen:e.handleSplitScreen,showNotification:e.showNotification},"showNotification",e.showNotification)));case"configurator":return o.a.createElement(c.a,null,o.a.createElement($,{forwardedRef:t,setHeaderDispay:e.setHeaderDispay,isMobileView:e.isMobileView,handleSplitScreen:e.handleSplitScreen,productId:e.productId,setConfiguratorImage:e.setConfiguratorImage,updateConfiguratorImage:e.updateConfiguratorImage,showHideBackLoader:e.showHideBackLoader,backToModules:e.backToModules,checkSvgConfiguratorSide:e.checkSvgConfiguratorSide,decoProductId:e.decoProductId}));case"qr":return o.a.createElement(c.a,null,o.a.createElement(G,{forwardedRef:t,setHeaderDispay:e.setHeaderDispay,isReplaceShape:e.isReplaceShape,isMobileView:e.isMobileView,showReplaceShape:e.showReplaceShape,isTempReplace:e.isTempReplace,changeTempReplace:e.changeTempReplace,selectedElm:e.selectedElm,showHideBackLoader:e.showHideBackLoader,showNotification:e.showNotification}));default:return}}return o.a.createElement(i.Fragment,null,!1===e.isMobileView&&o.a.createElement("div",{className:"dt-elements dt-controls"},a(),u()),!0===e.isMobileView&&o.a.createElement("div",{className:"dt-elements dt-controls expandControl"+("half"===e.splitScreenMobile?" dt-pop":"")+("full"===e.splitScreenMobile?" dt-pop-full":"")},e.language&&e.isFormEdit&&o.a.createElement("div",{className:"predeco-template-edit"+(e.isTemplateViewMobile?" d-none":"")},o.a.createElement("h3",{className:"boxTitle mb-2 predeco"},e.language.template.edit),o.a.createElement("button",{className:"btn btn-sm btn-success py-0 px-2 mr-3",style:{borderRadius:"50px"},onClick:function(){return e.onChangeTemplateMobile(!0)}},e.language.main.edit)),a(),u()))}));t.a=ee},426:function(e,t,a){e.exports=a(849)},43:function(e,t,a){"use strict";a.d(t,"s",(function(){return s})),a.d(t,"u",(function(){return l})),a.d(t,"t",(function(){return c})),a.d(t,"r",(function(){return u})),a.d(t,"v",(function(){return d})),a.d(t,"x",(function(){return p})),a.d(t,"w",(function(){return m})),a.d(t,"a",(function(){return h})),a.d(t,"f",(function(){return g})),a.d(t,"e",(function(){return f})),a.d(t,"b",(function(){return v})),a.d(t,"d",(function(){return b})),a.d(t,"c",(function(){return A})),a.d(t,"g",(function(){return y})),a.d(t,"i",(function(){return _})),a.d(t,"h",(function(){return E})),a.d(t,"j",(function(){return S})),a.d(t,"l",(function(){return C})),a.d(t,"k",(function(){return x})),a.d(t,"p",(function(){return w})),a.d(t,"q",(function(){return k})),a.d(t,"o",(function(){return I})),a.d(t,"n",(function(){return N})),a.d(t,"m",(function(){return O}));var r=a(7),n=a(4),i=a(12),o=a(60);function s(e,t,a){return function(s){var l=JSON.parse(e.print_profile)[0];if(t.length){if(t.length){for(var c=!1,u=0;u<t.length;u++){if(t[u].printProfileId===l){c=!1;break}c=!0}(c||1===parseInt(e.page))&&s(P())}}else s(P());return function(e){var t=Object(n.a)({},e);return e.catagory&&delete t.print_profile,o.get(i.a.base_path+"templates",{params:t},{headers:{"Content-Type":"application/json"}})}(e).then((function(n){var i=[],o=!1,c="",u={printProfileId:"",templateData:"",templateLoadStatus:!1,pageNo:1};if(t.length){i=Object(r.a)(t),o=!1;for(var d=0;d<i.length;d++){if(i[d].printProfileId===l){o=!0,c=d;break}o=!1}var p,m;if(o)if(e.name||e.catagory||a)if(a||1===parseInt(e.page))i[c].pageNo=1,i[c].templateLoadStatus=!1,i[c].templateData.records=n.data.records,i[c].templateData.total_records=n.data.total_records,i[c].templateData.data=Object(r.a)(n.data.data);else i[c].pageNo=e.page,i[c].templateLoadStatus=!1,i[c].templateData.records=n.data.records,i[c].templateData.total_records=n.data.total_records,(p=i[c].templateData.data).push.apply(p,Object(r.a)(n.data.data));else if(i[c].templateLoadStatus||1!==parseInt(e.page))i[c].pageNo=e.page,i[c].templateLoadStatus=!0,i[c].templateData.records=n.data.records,i[c].templateData.total_records=n.data.total_records,(m=i[c].templateData.data).push.apply(m,Object(r.a)(n.data.data));else i[c].pageNo=e.page,i[c].templateLoadStatus=!0,i[c].templateData.records=n.data.records,i[c].templateData.total_records=n.data.total_records,i[c].templateData.data=Object(r.a)(n.data.data);else u.printProfileId=l,u.templateData=n.data,u.templateLoadStatus=!0,i.push(u)}else u.printProfileId=l,u.templateData=n.data,u.templateLoadStatus=!0,i.push(u);return s(D(i)),n.data})).catch((function(e){s(R(e))}))}}function l(e){return function(t){return t(T()),(a=e,o.get(i.a.base_path+"templates/"+a,{headers:{"Content-Type":"application/json"}})).then((function(e){return t(L(e.data.data)),e.data})).catch((function(e){t(M(e))}));var a}}function c(e,t){return function(a){return a(B()),function(e){return o.get(i.a.base_path+"categories/templates/print-profiles/"+e)}(e).then((function(n){var i;i=Object(r.a)(n.data.data);for(var o=[],s=0;s<i.length;s++)if(0===i[s].is_disable){for(var l={name:i[s].name,value:i[s].id,isDefault:i[s].is_default,order:i[s].order,subCat:[]},c=0;c<i[s].subs.length;c++)0===i[s].subs[c].is_disable&&l.subCat.push({name:i[s].subs[c].name,value:i[s].subs[c].id,isDefault:i[s].subs[c].is_default,order:i[s].subs[c].order});o.push(l)}var u=[],d=!1,p={printProfileId:"",catData:"",catLoadStatus:!1,primeCatStatus:!0};if(t.length){u=Object(r.a)(t),d=!1;for(var m=0;m<u.length;m++){if(u[m].printProfileId===e){d=!0;break}d=!1}d||(p.printProfileId=e,p.catData=[].concat(o),p.catLoadStatus=!0,u.push(p))}else p.printProfileId=e,p.catData=[].concat(o),p.catLoadStatus=!0,u.push(p);return a(j(u)),n.data})).catch((function(e){return a(F(e))}))}}function u(){return function(e){return e(U()),o.get(i.a.base_path+"tags/templates").then((function(t){return e(V(t.data)),t.data})).catch((function(t){return e(G(t))}))}}function d(e){return function(t){t(q(e))}}function p(e){return function(t){t(H(e))}}function m(e){return function(t){t(z(e))}}var h="FETCH_TEMPLATE_BEGIN",g="FETCH_TEMPLATE_SUCCESS",f="FETCH_TEMPLATE_FAILURE",v="FETCH_TEMPLATE_DETAIL_BEGIN",b="FETCH_TEMPLATE_DETAIL_SUCCESS",A="FETCH_TEMPLATE_DETAIL_FAILURE",y="FETCH_TEMP_CATEGORY_BEGIN",_="FETCH_TEMP_CATEGORY_SUCCESS",E="FETCH_TEMP_CATEGORY_FAILURE",S="FETCH_TEMP_TAG_BEGIN",C="FETCH_TEMP_TAG_SUCCESS",x="FETCH_TEMP_TAG_FAILURE",w="TEMP_FILTER_APPLIED",k="UPDATE_TEMP_PAGE_NO",I="SET_TEMP_PRIMERY_CATEGORY_STATUS",N="SET_TEMPLATE_EDIT_TYPE ",O="SET_TEMPLATE_COLOR_EDIT_TYPE ",P=function(){return{type:h}},D=function(e){return{type:g,payload:e}},R=function(e){return{type:f,payload:{error:e}}},T=function(){return{type:v}},L=function(e){return{type:b,payload:e}},M=function(e){return{type:A,payload:{error:e}}},B=function(){return{type:y}},j=function(e){return{type:_,payload:e}},F=function(e){return{type:E,payload:{catError:e}}},U=function(){return{type:S}},V=function(e){return{type:C,payload:e}},G=function(e){return{type:x,payload:{tagError:e}}},q=function(e){return{type:I,payload:e}},H=function(e){return{type:N,payload:e}},z=function(e){return{type:O,payload:e}}},451:function(e,t,a){},453:function(e,t,a){},47:function(e,t,a){"use strict";var r=a(35);a.d(t,"b",(function(){return r.Events})),a.d(t,"a",(function(){return r.EventEmitter}));a(157)},48:function(e,t,a){"use strict";a.d(t,"p",(function(){return s})),a.d(t,"n",(function(){return l})),a.d(t,"o",(function(){return c})),a.d(t,"r",(function(){return u})),a.d(t,"q",(function(){return d})),a.d(t,"a",(function(){return p})),a.d(t,"c",(function(){return m})),a.d(t,"b",(function(){return h})),a.d(t,"d",(function(){return g})),a.d(t,"f",(function(){return f})),a.d(t,"e",(function(){return v})),a.d(t,"g",(function(){return b})),a.d(t,"i",(function(){return A})),a.d(t,"h",(function(){return y})),a.d(t,"j",(function(){return _})),a.d(t,"m",(function(){return E})),a.d(t,"l",(function(){return S})),a.d(t,"k",(function(){return C}));var r=a(7),n=a(4),i=a(12),o=a(60);function s(e,t,a){return function(s){if(t.length){if(t.length){for(var l=!1,c=0;c<t.length;c++){if(t[c].printProfileId===e.print_profile_id){l=!1;break}l=!0}(l||1===parseInt(e.page))&&s(x())}}else s(x());return function(e){var t=Object(n.a)({},e);return e.category&&delete t.print_profile_id,o.get(i.a.base_path+"fonts",{params:t},{headers:{"Content-Type":"application/json"}})}(e).then((function(n){var i=[],o=!1,l="",c={printProfileId:"",fontData:"",fontLoadStatus:!1,pageNo:1};if(t.length){i=Object(r.a)(t),o=!1;for(var u=0;u<i.length;u++){if(i[u].printProfileId===e.print_profile_id){o=!0,l=u;break}o=!1}var d,p;if(o)if(e.name||e.category||a)if(a||1===parseInt(e.page))i[l].pageNo=1,i[l].fontLoadStatus=!1,i[l].fontData.records=n.data.records,i[l].fontData.total_records=n.data.total_records,i[l].fontData.data=Object(r.a)(n.data.data);else i[l].pageNo=e.page,i[l].fontLoadStatus=!1,i[l].fontData.records=n.data.records,i[l].fontData.total_records=n.data.total_records,(d=i[l].fontData.data).push.apply(d,Object(r.a)(n.data.data));else if(i[l].fontLoadStatus||1!==parseInt(e.page))i[l].pageNo=e.page,i[l].fontLoadStatus=!0,i[l].fontData.records=n.data.records,i[l].fontData.total_records=n.data.total_records,(p=i[l].fontData.data).push.apply(p,Object(r.a)(n.data.data));else i[l].pageNo=e.page,i[l].fontLoadStatus=!0,i[l].fontData.records=n.data.records,i[l].fontData.total_records=n.data.total_records,i[l].fontData.data=Object(r.a)(n.data.data);else c.printProfileId=e.print_profile_id,c.fontData=n.data,c.fontLoadStatus=!0,i.push(c)}else c.printProfileId=e.print_profile_id,c.fontData=n.data,c.fontLoadStatus=!0,i.push(c);return s(w(i)),n.data})).catch((function(e){s(k(e))}))}}function l(e,t){return function(a){return a(I()),function(e){return o.get(i.a.base_path+"categories/fonts/print-profiles/"+e)}(e).then((function(n){var i;i=Object(r.a)(n.data.data);for(var o=[],s=0;s<i.length;s++)if(0===i[s].is_disable){for(var l={name:i[s].name,value:i[s].id,isDefault:i[s].is_default,order:i[s].order,subCat:[]},c=0;c<i[s].subs.length;c++)0===i[s].subs[c].is_disable&&l.subCat.push({name:i[s].subs[c].name,value:i[s].subs[c].id,isDefault:i[s].subs[c].is_default,order:i[s].subs[c].order});o.push(l)}var u=[],d=!1,p={printProfileId:"",catData:"",catLoadStatus:!1,primeCatStatus:!0};if(t.length){u=Object(r.a)(t),d=!1;for(var m=0;m<u.length;m++){if(u[m].printProfileId===e){d=!0;break}d=!1}d||(p.printProfileId=e,p.catData=[].concat(o),p.catLoadStatus=!0,u.push(p))}else p.printProfileId=e,p.catData=[].concat(o),p.catLoadStatus=!0,u.push(p);return a(N(u)),n.data})).catch((function(e){return a(O(e))}))}}function c(){return function(e){return e(P()),o.get(i.a.base_path+"tags/fonts").then((function(t){return e(D(t.data)),t.data})).catch((function(t){return e(R(t))}))}}function u(e){return function(t){t(T(e))}}function d(e){return function(t){t(L(e))}}var p="FETCH_FONTS_BEGIN",m="FETCH_FONTS_SUCCESS",h="FETCH_FONTS_FAILURE",g="FETCH_FONT_CATEGORY_BEGIN",f="FETCH_FONT_CATEGORY_SUCCESS",v="FETCH_FONT_CATEGORY_FAILURE",b="FETCH_FONT_TAG_BEGIN",A="FETCH_FONT_TAG_SUCCESS",y="FETCH_FONT_TAG_FAILURE",_="FONT_FILTER_APPLIED",E="UPDATE_FONT_PAGE_NO",S="SET_FONT_PRIMERY_CATEGORY_STATUS",C="SET_CUSTOM_FONT_DATA",x=function(){return{type:p}},w=function(e){return{type:m,payload:e}},k=function(e){return{type:h,payload:{error:e}}},I=function(){return{type:g}},N=function(e){return{type:f,payload:e}},O=function(e){return{type:v,payload:{catError:e}}},P=function(){return{type:b}},D=function(e){return{type:A,payload:e}},R=function(e){return{type:y,payload:{tagError:e}}},T=function(e){return{type:S,payload:e}},L=function(e){return{type:C,payload:e}}},57:function(e,t,a){"use strict";a.d(t,"l",(function(){return o})),a.d(t,"j",(function(){return s})),a.d(t,"m",(function(){return l})),a.d(t,"i",(function(){return c})),a.d(t,"k",(function(){return u})),a.d(t,"a",(function(){return d})),a.d(t,"c",(function(){return p})),a.d(t,"b",(function(){return m})),a.d(t,"h",(function(){return h})),a.d(t,"g",(function(){return g})),a.d(t,"d",(function(){return f})),a.d(t,"f",(function(){return v})),a.d(t,"e",(function(){return b}));var r=a(7),n=a(12),i=a(60);function o(e){return i.get(n.a.base_path+"user-design/"+e,{headers:{"Content-Type":"application/json"}})}function s(e,t){return function(a){return t||a(A()),function(e){return i.get(n.a.base_path+"user-design?customer_id="+e.customerId,{params:e},{headers:{"Content-Type":"application/json"}})}(e).then((function(n){if(n.data.status)return t&&(t.push.apply(t,Object(r.a)(n.data.data)),n.data.data=Object(r.a)(t)),a(E(e.page)),a(y(n.data)),n.data;a(_(n.data))})).catch((function(e){return a(_(e))}))}}function l(e){return function(e){e(S())}}function c(e){return function(t){return function(e){return i({method:"delete",url:n.a.base_path+"user-design/"+e,headers:{"Content-Type":"multipart/form-data"}})}(e).then((function(e){if(e.data.status)return e.data})).catch((function(e){return t(_(e))}))}}function u(e){return function(t){return t(C()),function(e){return i.get(n.a.base_path+"customers/"+e.customerId+"?orders=1",{headers:{"Content-Type":"application/json"}})}(e).then((function(e){if(e.data.status)return t(x(e.data)),e.data;t(w(e.data))})).catch((function(e){return t(w(e))}))}}var d="FETCH_GALLERY_BEGIN",p="FETCH_GALLERY_SUCCESS",m="FETCH_GALLERY_FAILURE",h="UPDATE_GALLERY_PAGE_NO",g="RESET_GALLERY_BEGIN",f="FETCH_PREV_ORDERS_BEGIN",v="FETCH_PREV_ORDERS_SUCCESS",b="FETCH_PREV_ORDERS_FAILURE",A=function(){return{type:d}},y=function(e){return{type:p,payload:e}},_=function(e){return{type:m,payload:{error:e}}},E=function(e){return{type:h,payload:e}},S=function(){return{type:g}},C=function(){return{type:f}},x=function(e){return{type:v,payload:e}},w=function(e){return{type:b,payload:{error:e}}}},58:function(e,t,a){"use strict";var r=a(7),n=a(10),i=a(11),o=a(12),s=a(60),l=function(){function e(){Object(n.a)(this,e)}return Object(i.a)(e,null,[{key:"getConfiguratorDetails",value:function(e){return s({method:"get",url:o.a.base_path+"product-section/".concat(e),headers:{"Content-Type":"multipart/form-data"}})}},{key:"getBackGroundColors",value:function(e){return s({method:"get",url:o.a.base_path+"svg-configurator/colors/"+e,headers:{"Content-Type":"multipart/form-data"}})}},{key:"getBackConfiguratorDetails",value:function(e){return s({method:"get",url:o.a.base_path+"svg-configurator/"+e,headers:{"Content-Type":"multipart/form-data"}})}}]),e}();function c(e,t){return function(a){return t||a(N()),l.getConfiguratorDetails(e).then((function(e){return t&&(t.push.apply(t,Object(r.a)(e.data.data)),e.data.data=Object(r.a)(t)),a(O(e.data)),e.data})).catch((function(e){a(P(e))}))}}function u(){return function(e){return new Promise((function(t,a){e(D()),t()}))}}function d(e){return function(t){return new Promise((function(a,r){t(R(e)),a()}))}}function p(e){return function(t){return t(T()),l.getBackGroundColors(e).then((function(e){return t(L(e.data)),e.data})).catch((function(e){t(M(e))}))}}function m(e){return function(t){return t(B()),l.getBackConfiguratorDetails(e).then((function(e){return t(j(e.data)),e.data})).catch((function(e){t(F(e))}))}}function h(e){return function(t){return new Promise((function(a){t(U(e)),a()}))}}function g(e){return function(t){return new Promise((function(a){t(V(e)),a()}))}}a.d(t,"n",(function(){return c})),a.d(t,"q",(function(){return u})),a.d(t,"r",(function(){return d})),a.d(t,"o",(function(){return p})),a.d(t,"p",(function(){return m})),a.d(t,"t",(function(){return h})),a.d(t,"s",(function(){return g})),a.d(t,"d",(function(){return f})),a.d(t,"f",(function(){return v})),a.d(t,"e",(function(){return b})),a.d(t,"j",(function(){return A})),a.d(t,"k",(function(){return y})),a.d(t,"a",(function(){return _})),a.d(t,"c",(function(){return E})),a.d(t,"b",(function(){return S})),a.d(t,"g",(function(){return C})),a.d(t,"i",(function(){return x})),a.d(t,"h",(function(){return w})),a.d(t,"m",(function(){return k})),a.d(t,"l",(function(){return I}));var f="FETCH_CONFIGURATOR_DESIGN_BEGIN",v="FETCH_CONFIGURATOR_DESIGN_SUCCESS",b="FETCH_CONFIGURATOR_DESIGN_FAILURE",A="RESET_CONFIGURATOR_DATA",y="SET_CONFIGURATOR_CART_DATA",_="FETCH_CONFIGURATOR_COLOR_BEGIN",E="FETCH_CONFIGURATOR_COLOR_SUCCESS",S="FETCH_CONFIGURATOR_COLOR_FAILURE",C="FETCH_CONFIGURATOR_PRODUCT_BEGIN",x="FETCH_CONFIGURATOR_PRODUCT_SUCCESS",w="FETCH_CONFIGURATOR_PRODUCT_FAILURE",k="SET_CONFIGURATOR_SVG_CART_DATA",I="SET_CONFIGURATOR_LOAD_STATUS",N=function(){return{type:f}},O=function(e){return{type:v,payload:e}},P=function(e){return{type:b,payload:{error:e}}},D=function(){return{type:A}},R=function(e){return{type:y,payload:e}},T=function(){return{type:_}},L=function(e){return{type:E,payload:e}},M=function(e){return{type:S,payload:{error:e}}},B=function(){return{type:C}},j=function(e){return{type:x,payload:e}},F=function(e){return{type:w,payload:{error:e}}},U=function(e){return{type:k,payload:e}},V=function(e){return{type:I,payload:e}}},59:function(e,t,a){"use strict";a.d(t,"t",(function(){return l})),a.d(t,"v",(function(){return c})),a.d(t,"w",(function(){return u})),a.d(t,"y",(function(){return d})),a.d(t,"u",(function(){return p})),a.d(t,"x",(function(){return m})),a.d(t,"z",(function(){return h})),a.d(t,"a",(function(){return g})),a.d(t,"f",(function(){return f})),a.d(t,"e",(function(){return v})),a.d(t,"g",(function(){return b})),a.d(t,"i",(function(){return A})),a.d(t,"h",(function(){return y})),a.d(t,"j",(function(){return _})),a.d(t,"l",(function(){return E})),a.d(t,"k",(function(){return S})),a.d(t,"m",(function(){return C})),a.d(t,"s",(function(){return x})),a.d(t,"q",(function(){return w})),a.d(t,"b",(function(){return k})),a.d(t,"d",(function(){return I})),a.d(t,"c",(function(){return N})),a.d(t,"n",(function(){return O})),a.d(t,"p",(function(){return P})),a.d(t,"o",(function(){return D})),a.d(t,"r",(function(){return R}));var r=a(7),n=a(4),i=a(12),o=a(60);function s(e){var t=Object(n.a)({},e);return e.category&&delete t.print_profile_id,o.get(i.a.base_path+"cliparts",{params:t},{headers:{"Content-Type":"application/json"}})}function l(e,t,a){return function(n){if(t.length){if(t.length){for(var i=!1,o=0;o<t.length;o++){if(t[o].printProfileId===e.print_profile_id){i=!1;break}i=!0}(i||1===parseInt(e.cat_page))&&n(T())}}else n(T());return s(e).then((function(i){var o=[],s=!1,l="",c={printProfileId:"",clipArtData:"",clipLoadStatus:!1,pageNo:1};if(t.length){o=Object(r.a)(t),s=!1;for(var u=0;u<o.length;u++){if(o[u].printProfileId===e.print_profile_id){s=!0,l=u;break}s=!1}var d,p;if(s)if(e.name||e.category||a)if(a||1===parseInt(e.cat_page))o[l].pageNo=1,o[l].clipLoadStatus=!1,o[l].clipArtData.records=i.data.records,o[l].clipArtData.total_records=i.data.total_records,o[l].clipArtData.data=Object(r.a)(i.data.data);else o[l].pageNo=e.cat_page,o[l].clipLoadStatus=!1,o[l].clipArtData.records=i.data.records,o[l].clipArtData.total_records=i.data.total_records,(d=o[l].clipArtData.data).push.apply(d,Object(r.a)(i.data.data));else if(o[l].clipLoadStatus||1!==parseInt(e.cat_page))o[l].pageNo=e.cat_page,o[l].clipLoadStatus=!0,o[l].clipArtData.records=i.data.records,o[l].clipArtData.total_records=i.data.total_records,(p=o[l].clipArtData.data).push.apply(p,Object(r.a)(i.data.data));else o[l].pageNo=e.cat_page,o[l].clipLoadStatus=!0,o[l].clipArtData.records=i.data.records,o[l].clipArtData.total_records=i.data.total_records,o[l].clipArtData.data=Object(r.a)(i.data.data);else c.printProfileId=e.print_profile_id,c.clipArtData=i.data,c.clipLoadStatus=!0,o.push(c)}else c.printProfileId=e.print_profile_id,c.clipArtData=i.data,c.clipLoadStatus=!0,o.push(c);return n(L(o)),i.data})).catch((function(e){return n(M(e))}))}}function c(e,t){return function(a){return a(B()),function(e){return o.get(i.a.base_path+"categories/cliparts/print-profiles/"+e)}(e).then((function(n){var i;i=Object(r.a)(n.data.data);for(var o=[],s=0;s<i.length;s++)if(0===i[s].is_disable){for(var l={name:i[s].name,value:i[s].id,isDefault:i[s].is_default,order:i[s].order,subCat:[]},c=0;c<i[s].subs.length;c++)0===i[s].subs[c].is_disable&&l.subCat.push({name:i[s].subs[c].name,value:i[s].subs[c].id,isDefault:i[s].subs[c].is_default,order:i[s].subs[c].order});o.push(l)}var u=[],d=!1,p={printProfileId:"",catData:"",catLoadStatus:!1,primeCatStatus:!0};if(t.length){u=Object(r.a)(t),d=!1;for(var m=0;m<u.length;m++){if(u[m].printProfileId===e){d=!0;break}d=!1}d||(p.printProfileId=e,p.catData=[].concat(o),p.catLoadStatus=!0,u.push(p))}else p.printProfileId=e,p.catData=[].concat(o),p.catLoadStatus=!0,u.push(p);return a(j(u)),n.data})).catch((function(e){return a(F(e))}))}}function u(){return function(e){return e(U()),o.get(i.a.base_path+"tags/cliparts").then((function(t){return e(V(t.data)),t.data})).catch((function(t){return e(G(t))}))}}function d(e){return function(t){t(q(e))}}function p(e,t,a){return function(s){if(t.length){if(t.length){for(var l=!1,c=JSON.parse(e.category)[0],u=0;u<t.length;u++){if(t[u].catId===c){l=!1;break}l=!0}(l||1===parseInt(e.page))&&s(H())}}else s(H());return function(e){var t=Object(n.a)({},e);return e.category&&delete t.print_profile_id,o.get(i.a.base_path+"cliparts",{params:t},{headers:{"Content-Type":"application/json"}})}(e).then((function(n){var i=[],o=!1,l="",c={catId:"",clipArtData:"",clipLoadStatus:!1,pageNo:1},u=JSON.parse(e.category)[0];if(t.length){i=Object(r.a)(t),o=!1;for(var d=0;d<i.length;d++){if(i[d].catId===u){o=!0,l=d;break}o=!1}var p,m;if(o)if(e.name||e.category||a)if(a||1===parseInt(e.page))i[l].pageNo=1,i[l].clipLoadStatus=!1,i[l].clipArtData.records=n.data.records,i[l].clipArtData.total_records=n.data.total_records,i[l].clipArtData.data=Object(r.a)(n.data.data);else i[l].pageNo=e.page,i[l].clipLoadStatus=!1,i[l].clipArtData.records=n.data.records,i[l].clipArtData.total_records=n.data.total_records,(p=i[l].clipArtData.data).push.apply(p,Object(r.a)(n.data.data));else if(i[l].clipLoadStatus||1!==parseInt(e.page))i[l].pageNo=e.page,i[l].clipLoadStatus=!0,i[l].clipArtData.records=n.data.records,i[l].clipArtData.total_records=n.data.total_records,(m=i[l].clipArtData.data).push.apply(m,Object(r.a)(n.data.data));else i[l].pageNo=e.page,i[l].clipLoadStatus=!0,i[l].clipArtData.records=n.data.records,i[l].clipArtData.total_records=n.data.total_records,i[l].clipArtData.data=Object(r.a)(n.data.data);else c.catId=u,c.clipArtData=n.data,c.clipLoadStatus=!0,i.push(c)}else c.catId=u,c.clipArtData=n.data,c.clipLoadStatus=!0,i.push(c);return s(z(i)),n.data})).catch((function(e){return s(W(e))}))}}function m(e,t,a){return function(n){if(t.length){if(t.length){for(var i=!1,o=0;o<t.length;o++){if(t[o].printProfileId===e.print_profile_id){i=!1;break}i=!0}(i||1===parseInt(e.page))&&n(Q())}}else n(Q());return s(e).then((function(i){var o=[],s=!1,l="",c={printProfileId:"",clipArtData:"",clipLoadStatus:!1,pageNo:1};if(t.length){o=Object(r.a)(t),s=!1;for(var u=0;u<o.length;u++){if(o[u].printProfileId===e.print_profile_id){s=!0,l=u;break}s=!1}var d,p;if(s)if(e.name||e.category||a)if(a||1===parseInt(e.page))o[l].pageNo=1,o[l].clipLoadStatus=!1,o[l].clipArtData.records=i.data.records,o[l].clipArtData.total_records=i.data.total_records,o[l].clipArtData.data=Object(r.a)(i.data.data);else o[l].pageNo=e.page,o[l].clipLoadStatus=!0,o[l].clipArtData.records=i.data.records,o[l].clipArtData.total_records=i.data.total_records,(d=o[l].clipArtData.data).push.apply(d,Object(r.a)(i.data.data));else if(o[l].clipLoadStatus||1!==parseInt(e.page))o[l].pageNo=e.page,o[l].clipLoadStatus=!0,o[l].clipArtData.records=i.data.records,o[l].clipArtData.total_records=i.data.total_records,(p=o[l].clipArtData.data).push.apply(p,Object(r.a)(i.data.data));else o[l].pageNo=e.page,o[l].clipLoadStatus=!0,o[l].clipArtData.records=i.data.records,o[l].clipArtData.total_records=i.data.total_records,o[l].clipArtData.data=Object(r.a)(i.data.data);else c.printProfileId=e.print_profile_id,c.clipArtData=i.data,c.clipLoadStatus=!0,o.push(c)}else c.printProfileId=e.print_profile_id,c.clipArtData=i.data,c.clipLoadStatus=!0,o.push(c);return n(J(o)),i.data})).catch((function(e){return n(Y(e))}))}}function h(e){return function(t){t(Z(e))}}var g="FETCH_CLIPART_BEGIN",f="FETCH_CLIPART_SUCCESS",v="FETCH_CLIPART_FAILURE",b="FETCH_CLIP_CATEGORY_BEGIN",A="FETCH_CLIP_CATEGORY_SUCCESS",y="FETCH_CLIP_CATEGORY_FAILURE",_="FETCH_TAG_BEGIN",E="FETCH_TAG_SUCCESS",S="FETCH_TAG_FAILURE",C="FILTER_APPLIED",x="UPDATE_PAGE_NO",w="SET_PRIMERY_CATEGORY_STATUS",k="FETCH_CLIPART_BY_CAT_BEGIN",I="FETCH_CLIPART_BY_CAT_SUCCESS",N="FETCH_CLIPART_BY_CAT_FAILURE",O="FILTER_CLIPART_BEGIN",P="FILTER_CLIPART_SUCCESS",D="FILTER_CLIPART_FAILURE",R="SET_SELECTED_CAT_ID",T=function(){return{type:g}},L=function(e){return{type:f,payload:e}},M=function(e){return{type:v,payload:{error:e}}},B=function(){return{type:b}},j=function(e){return{type:A,payload:e}},F=function(e){return{type:y,payload:{catError:e}}},U=function(){return{type:_}},V=function(e){return{type:E,payload:e}},G=function(e){return{type:S,payload:{tagError:e}}},q=function(e){return{type:w,payload:e}},H=function(){return{type:k}},z=function(e){return{type:I,payload:e}},W=function(e){return{type:N,payload:{error:e}}},Q=function(){return{type:O}},J=function(e){return{type:P,payload:e}},Y=function(e){return{type:D,payload:{error:e}}},Z=function(e){return{type:R,payload:e}}},6:function(e,t,a){"use strict";var r=a(106);a.d(t,"f",(function(){return r.e})),a.d(t,"A",(function(){return r.f}));var n=a(131);a.d(t,"d",(function(){return n.d}));var i=a(98);a.d(t,"j",(function(){return i.g})),a.d(t,"c",(function(){return i.f}));var o=a(68);a.d(t,"J",(function(){return o.m})),a.d(t,"M",(function(){return o.n})),a.d(t,"h",(function(){return o.k})),a.d(t,"g",(function(){return o.j})),a.d(t,"n",(function(){return o.l}));var s=a(17);a.d(t,"L",(function(){return s.Bb})),a.d(t,"a",(function(){return s.Z})),a.d(t,"Z",(function(){return s.Kb})),a.d(t,"Y",(function(){return s.Jb})),a.d(t,"cb",(function(){return s.Nb})),a.d(t,"x",(function(){return s.nb})),a.d(t,"db",(function(){return s.Ob})),a.d(t,"K",(function(){return s.Ab})),a.d(t,"y",(function(){return s.ob})),a.d(t,"w",(function(){return s.mb})),a.d(t,"ab",(function(){return s.Lb})),a.d(t,"gb",(function(){return s.Qb})),a.d(t,"C",(function(){return s.sb})),a.d(t,"H",(function(){return s.yb})),a.d(t,"q",(function(){return s.gb})),a.d(t,"p",(function(){return s.fb})),a.d(t,"o",(function(){return s.eb})),a.d(t,"u",(function(){return s.kb})),a.d(t,"bb",(function(){return s.Mb})),a.d(t,"s",(function(){return s.ib})),a.d(t,"b",(function(){return s.ab})),a.d(t,"D",(function(){return s.ub})),a.d(t,"I",(function(){return s.zb})),a.d(t,"eb",(function(){return s.Pb})),a.d(t,"m",(function(){return s.db})),a.d(t,"t",(function(){return s.jb})),a.d(t,"E",(function(){return s.vb})),a.d(t,"l",(function(){return s.cb})),a.d(t,"N",(function(){return s.Cb})),a.d(t,"V",(function(){return s.Eb})),a.d(t,"r",(function(){return s.hb})),a.d(t,"W",(function(){return s.Fb})),a.d(t,"X",(function(){return s.Ib})),a.d(t,"k",(function(){return s.bb})),a.d(t,"z",(function(){return s.pb})),a.d(t,"O",(function(){return s.Db})),a.d(t,"v",(function(){return s.lb})),a.d(t,"G",(function(){return s.xb})),a.d(t,"F",(function(){return s.wb})),a.d(t,"B",(function(){return s.qb}));var l=a(132);a.d(t,"i",(function(){return l.d}));var c=a(83);a.d(t,"hb",(function(){return c.i})),a.d(t,"ib",(function(){return c.j})),a.d(t,"e",(function(){return c.h}));var u=a(67);a.d(t,"Q",(function(){return u.i})),a.d(t,"S",(function(){return u.k})),a.d(t,"P",(function(){return u.h})),a.d(t,"fb",(function(){return u.n})),a.d(t,"U",(function(){return u.m})),a.d(t,"T",(function(){return u.l})),a.d(t,"R",(function(){return u.j}))},61:function(e,t,a){"use strict";var r=function(e,t,a){var r,n=0;if(0===e.length)e.push({pid:t,index:0});else if(0===e.filter((function(e){return e.pid===t})).length)e.push({pid:t,index:0});else if((r=e.filter((function(e){return e.pid===t}))[0]).index+1<a){var i=e.findIndex((function(e){return e.pid===t}));e[i].index=e[i].index+1,n=e[i].index}else n=r.index;return{usedPrintProfiles:e,tablePrintAreaIndex:n}},n=function(e,t,a,r,n,i){var o,s=0,l=n+"_price",c=!1;return r>0&&("DLW"===a||"DL"===a&&("d"===n||"l"===n)||""===a&&"p"===n?(0!==t.filter((function(e){return e.from_qty<=r&&e.to_qty>=r})).length?o=t.filter((function(e){return e.from_qty<=r&&e.to_qty>=r}))[0]:(o=t[t.length-1],i&&r>o.to_qty&&(c=!0)),s=e*(1-Number(o[l])/100)*r):"DL"===a&&"w"===n&&(s=e*r)),{price:s,isRequestQuote:c}},i=function(e,t,a){var r,n=0;if(0===e.length)e.push({pid:t,index:0});else if(0===e.filter((function(e){return e.pid===t})).length)e.push({pid:t,index:0});else if((r=e.filter((function(e){return e.pid===t}))[0]).index+1<a){var i=e.findIndex((function(e){return e.pid===t}));e[i].index=e[i].index+1,n=e[i].index}else n=r.index;return{usedPrintProfiles:e,tablePrintAreaIndex:n}},o=function(e,t,a,r,n,i){var o,s=0,l=n+"_price",c=!1;return r>0&&("DLW"===a||"DL"===a&&("d"===n||"l"===n)||""===a&&"p"===n?(0!==t.filter((function(e){return e.from_qty<=r&&e.to_qty>=r})).length?o=t.filter((function(e){return e.from_qty<=r&&e.to_qty>=r}))[0]:(o=t[t.length-1],i&&r>o.to_qty&&(c=!0)),s=e*(1-Number(o[l])/100)*r):"DL"===a&&"w"===n&&(s=e*r)),{price:s,isRequestQuote:c}},s=function(e,t,a){var r,n=0;if(0===e.length)e.push({pid:t,index:0});else if(0===e.filter((function(e){return e.pid===t})).length)e.push({pid:t,index:0});else if((r=e.filter((function(e){return e.pid===t}))[0]).index+1<a){var i=e.findIndex((function(e){return e.pid===t}));e[i].index=e[i].index+1,n=e[i].index}else n=r.index;return{usedPrintProfiles:e,tablePrintAreaIndex:n}},l=function(e,t){var a=0;return t>0&&-1===(a=e.findIndex((function(e){return e.range_from<=t&&e.range_to>=t})))&&(a=e.length-1),a},c=function(e,t,a,r,n,i){var o,s=0,l=n+"_price",c=!1;return r>0&&("DLW"===a||"DL"===a&&("d"===n||"l"===n)||""===a&&"p"===n)&&(0!==t.filter((function(e){return e.from_qty<=r&&e.to_qty>=r})).length?o=t.filter((function(e){return e.from_qty<=r&&e.to_qty>=r}))[0]:(o=t[t.length-1],i&&r>o.to_qty&&(c=!0)),s=o[l]*r*e),{price:s,isRequestQuote:c}},u=function(e,t,a){var r,n=0;if(0===e.length)e.push({pid:t,index:0});else if(0===e.filter((function(e){return e.pid===t})).length)e.push({pid:t,index:0});else if((r=e.filter((function(e){return e.pid===t}))[0]).index+1<a){var i=e.findIndex((function(e){return e.pid===t}));e[i].index=e[i].index+1,n=e[i].index}else n=r.index;return{usedPrintProfiles:e,tablePrintAreaIndex:n}},d=function(e,t,a,r,n,i){var o,s=0,l=n+"_price",c=!1;return r>0&&("DLW"===a||"DL"===a&&("d"===n||"l"===n)||""===a&&"p"===n)&&(0!==t.filter((function(e){return e.from_qty<=r&&e.to_qty>=r})).length?o=t.filter((function(e){return e.from_qty<=r&&e.to_qty>=r}))[0]:(o=t[t.length-1],i&&r>o.to_qty&&(c=!0)),s=o[l]*r*e),{price:s,isRequestQuote:c}},p=function(e,t,a){var r,n=0;if(0===e.length)e.push({pid:t,index:0});else if(0===e.filter((function(e){return e.pid===t})).length)e.push({pid:t,index:0});else if((r=e.filter((function(e){return e.pid===t}))[0]).index+1<a){var i=e.findIndex((function(e){return e.pid===t}));e[i].index=e[i].index+1,n=e[i].index}else n=r.index;return{usedPrintProfiles:e,tablePrintAreaIndex:n}},m=function(e,t,a,r,n,i){var o,s=0,l=n+"_price",c=!1;return r>0&&("DLW"===a||"DL"===a&&("d"===n||"l"===n)||""===a&&"p"===n?(0!==t.filter((function(e){return e.from_qty<=r&&e.to_qty>=r})).length?o=t.filter((function(e){return e.from_qty<=r&&e.to_qty>=r}))[0]:(o=t[t.length-1],i&&r>o.to_qty&&(c=!0)),s=e*(1-Number(o[l])/100)*r):"DL"===a&&"w"===n&&(s=e*r)),{price:s,isRequestQuote:c}},h=function(e,t,a){var r,n=0;if(0===e.length)e.push({pid:t,index:0});else if(0===e.filter((function(e){return e.pid===t})).length)e.push({pid:t,index:0});else if((r=e.filter((function(e){return e.pid===t}))[0]).index+1<a){var i=e.findIndex((function(e){return e.pid===t}));e[i].index=e[i].index+1,n=e[i].index}else n=r.index;return{usedPrintProfiles:e,tablePrintAreaIndex:n}},g=function(e,t,a,r,n,i){var o,s=0,l=n+"_price",c=!1;return r>0&&("DLW"===a||"DL"===a&&("d"===n||"l"===n)||""===a&&"p"===n?(0!==t.filter((function(e){return e.from_qty<=r&&e.to_qty>=r})).length?o=t.filter((function(e){return e.from_qty<=r&&e.to_qty>=r}))[0]:(o=t[t.length-1],i&&r>o.to_qty&&(c=!0)),s=e*(1-Number(o[l])/100)*r):"DL"===a&&"w"===n&&(s=e*r)),{price:s,isRequestQuote:c}},f=function(e,t,a,r){var n;if(0===e.length)e.push({pid:t,sleeveIndex:0,prevSleeveIndex:a}),n=e.filter((function(e){return e.pid===t}))[0];else if(0!==e.filter((function(e){return e.pid===t})).length){if((n=e.filter((function(e){return e.pid===t}))[0]).prevSleeveIndex===a)return{isCalc:0,usedPrintProfiles:e};n.prevSleeveIndex=a,n.sleeveIndex+1<r[0].sleeve.length&&n.sleeveIndex++}else e.push({pid:t,sleeveIndex:0,prevSleeveIndex:a}),n=e.filter((function(e){return e.pid===t}))[0];return{isCalc:1,pricingArr:r[0].sleeve[n.sleeveIndex].pricing,usedPrintProfiles:e}},v=function(e,t,a,r,n){var i,o=0,s=r+"_price",l=!1;return a>0&&("DLW"===t||"DL"===t&&("d"===r||"l"===r)||""===t&&"p"===r)&&(0!==e.filter((function(e){return e.from_qty<=a&&e.to_qty>=a})).length?i=e.filter((function(e){return e.from_qty<=a&&e.to_qty>=a}))[0]:(i=e[e.length-1],n&&a>i.to_qty&&(l=!0)),o=i[s]*a),{price:o,isRequestQuote:l}},b=function(e,t,a,r){var n;if(0===e.length)e.push({pid:t,sleeveIndex:0,prevSleeveIndex:a}),n=e.filter((function(e){return e.pid===t}))[0];else if(0!==e.filter((function(e){return e.pid===t})).length){if((n=e.filter((function(e){return e.pid===t}))[0]).prevSleeveIndex===a)return{price:0,usedPrintProfiles:e};n.prevSleeveIndex=a,n.sleeveIndex+1<r.length&&n.sleeveIndex++}else e.push({pid:t,sleeveIndex:0,prevSleeveIndex:a}),n=e.filter((function(e){return e.pid===t}))[0];return{price:r[n.sleeveIndex].price_value,usedPrintProfiles:e}},A=a(10),y=a(11),_=function(){function e(){Object(A.a)(this,e)}return Object(y.a)(e,null,[{key:"getPrintPrice",value:function(e,t,a,r,n){var i,o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,l=0,c=0,u=!1,d=0,p=0,m=0,h=!1;if(a.is_advance_price){var g=[];if((g=a.advance_price_type.split(",")).includes("per_color")&&(e.colors.length||e.isFullColor)){l=(i=this.getTablePrintAreaIndex(n,e.printProfileId,a.print_areas,"color")).tablePrintAreaIndex,n=i.usedPrintProfiles;var f=this.getPrintColorPrice(t,a.is_quantity_tier,e.isFullColor,e.colors.filter((function(e){return"Full"!==e})).length,a.is_full_color,a.print_areas[l].colors,r,a.is_quote_enable);c+=f.price,d+=f.screenPrice,f.isRequestQuote&&(u=f.isRequestQuote)}if(g.includes("per_print_area")){l=(i=this.getTablePrintAreaIndex(n,e.printProfileId,a.print_areas,"print_area")).tablePrintAreaIndex,n=i.usedPrintProfiles;var v=this.getPrintAreaPrice(t,a.is_quantity_tier,e.printAreaId,a.print_areas[l].decoration_area,r,a.is_quote_enable);c+=v.price,v.isRequestQuote&&(u=v.isRequestQuote)}if(g.includes("per_design_area")){o&&"print_area"===a.area_calculation_type&&0!==n.filter((function(t){return t.pid===e.printProfileId})).length&&n.filter((function(t){return t.pid===e.printProfileId}))[0].isCustomPriceCalc?(l=0,h=!1):(l=(i=this.getTablePrintAreaIndex(n,e.printProfileId,a.print_areas,"design_area")).tablePrintAreaIndex,h=!0,(n=i.usedPrintProfiles)[n.findIndex((function(t){return t.pid===e.printProfileId}))].isCustomPriceCalc=!0),"bound_area"===a.area_calculation_type?p=e.designArea:"design_area"===a.area_calculation_type?p=e.exactDesignArea:"print_area"===a.area_calculation_type&&(p=s);var b=this.getDesignAreaPrice(t,a.is_quantity_tier,a.area_calculation_type,p,a.min_price,a.print_areas[l].ranges,r,a.is_quote_enable,o);o?h&&(m=Number(b.price)):c+=b.price,b.isRequestQuote&&(u=b.isRequestQuote)}}else if(a.is_quantity_tier){l=(i=this.getTablePrintAreaIndex(n,e.printProfileId,a.print_areas,"default")).tablePrintAreaIndex,n=i.usedPrintProfiles;var A=this.getDefaultPrintPrice(t,a.print_areas[l].default[0],r,a.is_quote_enable);c+=A.price,A.isRequestQuote&&(u=A.isRequestQuote)}else c+=Number(c+a.default_prices[0].price_value);return{price:c,usedPrintProfiles:n,isRequestQuote:u,screenPrice:d,customProdPrice:m}}},{key:"getTablePrintAreaIndex",value:function(e,t,a,r){var n,i=0,o=0,s=a.length;return 0===e.length||0===e.filter((function(e){return e.pid===t&&e.decoType===r})).length?e.push({pid:t,index:0,decoType:r,isCustomPriceCalc:!1}):(n=e.filter((function(e){return e.pid===t&&e.decoType===r}))[0]).index+1<s?"color"===r?a[n.index+1].colors?(o=e.findIndex((function(e){return e.pid===t&&e.decoType===r})),e[o].index=e[o].index+1,i=e[o].index):i=n.index:"print_area"===r?a[n.index+1].decoration_area?(o=e.findIndex((function(e){return e.pid===t&&e.decoType===r})),e[o].index=e[o].index+1,i=e[o].index):i=n.index:"design_area"===r?a[n.index+1].ranges?(o=e.findIndex((function(e){return e.pid===t&&e.decoType===r})),e[o].index=e[o].index+1,i=e[o].index):i=n.index:"default"===r&&(a[n.index+1].default?(o=e.findIndex((function(e){return e.pid===t&&e.decoType===r})),e[o].index=e[o].index+1,i=e[o].index):i=n.index):i=n.index,{usedPrintProfiles:e,tablePrintAreaIndex:i}}},{key:"getDefaultPrintPrice",value:function(e,t,a,r){var n,i=0,o={},s=!1;return t&&(e.is_white_base?"DLW"===e.white_base_type?(a.d>0&&((o=this.calculateRangePrice(a.d,t,"d",r)).isRequestQuote&&(s=o.isRequestQuote),i+=o.price),a.l>0&&((o=this.calculateRangePrice(a.l,t,"l",r)).isRequestQuote&&(s=o.isRequestQuote),i+=o.price),a.w>0&&((o=this.calculateRangePrice(a.w,t,"w",r)).isRequestQuote&&(s=o.isRequestQuote),i+=o.price),a.p>0&&((o=this.calculateRangePrice(a.p,t,"l",r)).isRequestQuote&&(s=o.isRequestQuote),i+=o.price)):"DL"===e.white_base_type&&(n=a.l+a.w,a.d>0&&((o=this.calculateRangePrice(a.d,t,"d",r)).isRequestQuote&&(s=o.isRequestQuote),i+=o.price),n>0&&((o=this.calculateRangePrice(n,t,"l",r)).isRequestQuote&&(s=o.isRequestQuote),i+=o.price),a.p>0&&((o=this.calculateRangePrice(a.p,t,"l",r)).isRequestQuote&&(s=o.isRequestQuote),i+=o.price)):((o=this.calculateRangePrice(a.t,t,"p",r)).isRequestQuote&&(s=o.isRequestQuote),i+=o.price)),{price:i,isRequestQuote:s}}},{key:"getPrintColorPrice",value:function(e,t,a,r,n,i,o,s){var l,c,u=0,d=0,p={},m=!1,h=0;if(a)if(n)l=i[i.length-1];else{if(!(r>0))return{price:u,isRequestQuote:m,screenPrice:h};l=i.length>=r?"Full Color"===i[r-1].key_name?i[r-2]:i[r-1]:"Full Color"===i[i.length-1].key_name?i[i.length-2]:i[i.length-1]}else l=i.length>=r?"Full Color"===i[r-1].key_name?i[r-2]:i[r-1]:"Full Color"===i[i.length-1].key_name?i[i.length-2]:i[i.length-1];return l.hasOwnProperty("screen_cost")&&(h=l.screen_cost),t?e.is_white_base?"DLW"===e.white_base_type?(o.d>0&&((p=this.calculateRangePrice(o.d,l,"d",s)).isRequestQuote&&(m=p.isRequestQuote),u+=p.price),o.l>0&&((p=this.calculateRangePrice(o.l,l,"l",s)).isRequestQuote&&(m=p.isRequestQuote),u+=p.price),o.w>0&&((p=this.calculateRangePrice(o.w,l,"w",s)).isRequestQuote&&(m=p.isRequestQuote),u+=p.price),o.p>0&&((p=this.calculateRangePrice(o.p,l,"l",s)).isRequestQuote&&(m=p.isRequestQuote),u+=p.price)):"DL"===e.white_base_type&&(d=o.l+o.w,o.d>0&&((p=this.calculateRangePrice(o.d,l,"d",s)).isRequestQuote&&(m=p.isRequestQuote),u+=p.price),d>0&&((p=this.calculateRangePrice(d,l,"l",s)).isRequestQuote&&(m=p.isRequestQuote),u+=p.price),o.p>0&&((p=this.calculateRangePrice(o.p,l,"l",s)).isRequestQuote&&(m=p.isRequestQuote),u+=p.price)):((p=this.calculateRangePrice(o.t,l,"p",s)).isRequestQuote&&(m=p.isRequestQuote),u+=p.price):(c=l.pricing[0],e.is_white_base?"DLW"===e.white_base_type?(o.d>0&&(u+=Number(c.d_price)*o.d),o.l>0&&(u+=Number(c.l_price)*o.l),o.w>0&&(u+=Number(c.w_price)*o.w)):"DL"===e.white_base_type&&(d=o.l+o.w,o.d>0&&(u+=Number(c.d_price)*o.d),d>0&&(u+=Number(c.l_price)*d)):u+=Number(c.p_price)*o.t),{price:u,isRequestQuote:m,screenPrice:Number(h)}}},{key:"getPrintAreaPrice",value:function(e,t,a,r,n,i){var o,s,l,c=0,u={},d=!1;return(o=r.filter((function(e){return e.print_area_id===a}))[0])&&(t?e.is_white_base?"DLW"===e.white_base_type?(n.d>0&&((u=this.calculateRangePrice(n.d,o,"d",i)).isRequestQuote&&(d=u.isRequestQuote),c+=u.price),n.l>0&&((u=this.calculateRangePrice(n.l,o,"l",i)).isRequestQuote&&(d=u.isRequestQuote),c+=u.price),n.w>0&&((u=this.calculateRangePrice(n.w,o,"w",i)).isRequestQuote&&(d=u.isRequestQuote),c+=u.price),n.p>0&&((u=this.calculateRangePrice(n.p,o,"l",i)).isRequestQuote&&(d=u.isRequestQuote),c+=u.price)):"DL"===e.white_base_type&&(l=n.l+n.w,n.d>0&&((u=this.calculateRangePrice(n.d,o,"d",i)).isRequestQuote&&(d=u.isRequestQuote),c+=u.price),l>0&&((u=this.calculateRangePrice(l,o,"l",i)).isRequestQuote&&(d=u.isRequestQuote),c+=u.price),n.p>0&&((u=this.calculateRangePrice(n.p,o,"l",i)).isRequestQuote&&(d=u.isRequestQuote),c+=u.price)):((u=this.calculateRangePrice(n.t,o,"p",i)).isRequestQuote&&(d=u.isRequestQuote),c+=u.price):(s=o.pricing[0],e.is_white_base?"DLW"===e.white_base_type?(n.d>0&&(c+=Number(s.d_price)*n.d),n.l>0&&(c+=Number(s.l_price)*n.l),n.w>0&&(c+=Number(s.w_price)*n.w)):"DL"===e.white_base_type&&(l=n.l+n.w,n.d>0&&(c+=Number(s.d_price)*n.d),l>0&&(c+=Number(s.l_price)*l)):c+=Number(s.p_price)*n.t)),{price:c,isRequestQuote:d}}},{key:"getDesignAreaPrice",value:function(e,t,a,r,n,i,o,s,l){var c,u,d,p=0,m=0,h={},g=!1;if("bound_area"===a){if(r<0)return{price:p,isRequestQuote:g};m=this.getTableRangeIndex(i,r)}else if("design_area"===a){if(r<0)return{price:p,isRequestQuote:g};m=this.getTableRangeIndex(i,r)}else{if("print_area"!==a)return{price:p,isRequestQuote:g};if(r<0)return{price:p,isRequestQuote:g};m=this.getTableRangeIndex(i,r)}return c=i[m],t?e.is_white_base?"DLW"===e.white_base_type?(o.d>0&&((h=this.calculateRangePrice(o.d,c,"d",s)).isRequestQuote&&(g=h.isRequestQuote),p+=h.price),o.l>0&&((h=this.calculateRangePrice(o.l,c,"l",s)).isRequestQuote&&(g=h.isRequestQuote),p+=h.price),o.w>0&&((h=this.calculateRangePrice(o.w,c,"w",s)).isRequestQuote&&(g=h.isRequestQuote),p+=h.price),o.p>0&&((h=this.calculateRangePrice(o.p,c,"l",s)).isRequestQuote&&(g=h.isRequestQuote),p+=h.price)):"DL"===e.white_base_type&&(u=o.l+o.w,o.d>0&&((h=this.calculateRangePrice(o.d,c,"d",s)).isRequestQuote&&(g=h.isRequestQuote),p+=h.price),u>0&&((h=this.calculateRangePrice(u,c,"l",s)).isRequestQuote&&(g=h.isRequestQuote),p+=h.price),o.p>0&&((h=this.calculateRangePrice(o.p,c,"l",s)).isRequestQuote&&(g=h.isRequestQuote),p+=h.price)):((h=this.calculateRangePrice(o.t,c,"p",s)).isRequestQuote&&(g=h.isRequestQuote),p+=h.price):(d=c.pricing[0],e.is_white_base?"DLW"===e.white_base_type?(o.d>0&&(p+=Number(d.d_price)*o.d),o.l>0&&(p+=Number(d.l_price)*o.l),o.w>0&&(p+=Number(d.w_price)*o.w)):"DL"===e.white_base_type&&(u=o.l+o.w,o.d>0&&(p+=Number(d.d_price)*o.d),u>0&&(p+=Number(d.l_price)*u)):p+=Number(d.p_price)*o.t),l&&"print_area"===a&&(p*=r),p>n?{price:p,isRequestQuote:g}:{price:n,isRequestQuote:g}}},{key:"calculateRangePrice",value:function(e,t,a,r){for(var n={},i=0,o=!1,s=0;s<t.pricing.length;s++)if(e>=(n=t.pricing[s]).from_qty&&e<=n.to_qty||s===t.pricing.length-1&&e>n.to_qty){"d"===a?(i=Number(n.d_price)*e,s===t.pricing.length-1&&e>n.to_qty&&r&&(o=!0)):"l"===a?(i=Number(n.l_price)*e,s===t.pricing.length-1&&e>n.to_qty&&r&&(o=!0)):"w"===a?(i=Number(n.w_price)*e,s===t.pricing.length-1&&e>n.to_qty&&r&&(o=!0)):(i=Number(n.p_price)*e,s===t.pricing.length-1&&e>n.to_qty&&r&&(o=!0));break}return{price:i,isRequestQuote:o}}},{key:"getTableRangeIndex",value:function(e,t){var a=0;return t>0&&-1===(a=e.findIndex((function(e){return e.range_from<=t&&e.range_to>=t})))&&(a=e.length-1),a}}]),e}(),E=function(e,t,a,r){var n;if(0===e.length)e.push({pid:t.printProfileId,sideIndex:0,prevSideIndex:a}),n=e.filter((function(e){return e.pid===t.printProfileId}))[0];else if(0!==e.filter((function(e){return e.pid===t.printProfileId})).length){if((n=e.filter((function(e){return e.pid===t.printProfileId}))[0]).prevSideIndex===a)return{isCalc:0,usedPrintProfiles:e};n.prevSideIndex=a,n.sideIndex+1<r.length&&n.sideIndex++}else e.push({pid:t.printProfileId,sideIndex:0,prevSideIndex:a}),n=e.filter((function(e){return e.pid===t.printProfileId}))[0];return t.teamName>0&&r[0].team.filter((function(e){return"name"===e.key_name}))[0],t.teamNumber>0&&r[0].team.filter((function(e){return"number"===e.key_name}))[0],t.teamImage>0&&r[0].team.filter((function(e){return"team-name"===e.key_name}))[0],{isCalc:1,pricingArr:r[n.sideIndex].team,usedPrintProfiles:e}},S=function(e,t,a,r,n){var i=0,o=r+"_price",s=0,l=0,c=0;return a>0&&("DLW"===t||"DL"===t&&("d"===r||"l"===r)||""===t&&"p"===r)&&(0!==e[0].pricing.filter((function(e){return e.from_qty<=a&&e.to_qty>=a})).length?(n.teamName>0&&(s=e.filter((function(e){return"name"===e.key_name}))[0].pricing.filter((function(e){return e.from_qty<=a&&e.to_qty>=a}))[0][o]*n.teamName),n.teamNumber>0&&(l=e.filter((function(e){return"number"===e.key_name}))[0].pricing.filter((function(e){return e.from_qty<=a&&e.to_qty>=a}))[0][o]*n.teamNumber),n.teamImage>0&&(c=e.filter((function(e){return"team-name"===e.key_name}))[0].pricing.filter((function(e){return e.from_qty<=a&&e.to_qty>=a}))[0][o]*n.teamImage)):e[e.length-1],i=(s+l+c)*a),i},C=function(e,t,a,r){var n,i,o=0,s=0,l=0;if(0===e.length)e.push({pid:t.printProfileId,sideIndex:0,prevSideIndex:a}),n=e.filter((function(e){return e.pid===t.printProfileId}))[0];else if(0!==e.filter((function(e){return e.pid===t.printProfileId})).length){if((n=e.filter((function(e){return e.pid===t.printProfileId}))[0]).prevSideIndex===a)return{price:0,usedPrintProfiles:e};n.prevSideIndex=a,n.sideIndex+1<r.length&&n.sideIndex++}else e.push({pid:t.printProfileId,sideIndex:0,prevSideIndex:a}),n=e.filter((function(e){return e.pid===t.printProfileId}))[0];return t.teamName>0&&(i=r.filter((function(e){return"name"===e.price_key}))[0]).status&&(o=i.price_value*t.teamName),t.teamNumber>0&&(i=r.filter((function(e){return"number"===e.price_key}))[0]).status&&(s=i.price_value*t.teamNumber),t.teamImage>0&&(i=r.filter((function(e){return"team-name"===e.price_key}))[0]).status&&(l=i.price_value*t.teamImage),{price:o+s+l,usedPrintProfiles:e}},x=function(e,t,a){var r,n=0;if(0===e.length)e.push({pid:t,index:0});else if(0===e.filter((function(e){return e.pid===t})).length)e.push({pid:t,index:0});else if((r=e.filter((function(e){return e.pid===t}))[0]).index+1<a){var i=e.findIndex((function(e){return e.pid===t}));e[i].index=e[i].index+1,n=e[i].index}else n=r.index;return{usedPrintProfiles:e,tablePrintAreaIndex:n}},w=function(e,t){var a=0;return t>0&&-1===(a=e.findIndex((function(e){return e.range_from<=t&&e.range_to>=t})))&&(a=e.length-1),a},k=function(e,t,a,r,n,i){var o,s=0,l=n+"_price",c=!1;return r>0&&("DLW"===a||"DL"===a&&("d"===n||"l"===n)||""===a&&"p"===n)&&(0!==t.filter((function(e){return e.from_qty<=r&&e.to_qty>=r})).length?o=t.filter((function(e){return e.from_qty<=r&&e.to_qty>=r}))[0]:(o=t[t.length-1],i&&r>o.to_qty&&(c=!0)),s=o[l]*r),{price:s,isRequestQuote:c}};a.d(t,"c",(function(){return T})),a.d(t,"b",(function(){return L})),a.d(t,"a",(function(){return F}));var I={productPrice:0,setupPrice:0,clipartPrice:0,fontPrice:0,perLetterPrice:0,uploadedImgPrice:0,printPrice:0,screenPrice:0,backgroundPrice:0,printableColPrice:0,sleevePrice:0,isRequestQuote:!1,addedPrice:0,tax:0,teamPrice:0,originalProductPrice:0,stickerPrice:0,stitchPrice:0},N={},O=[],P=[],D={},R=!1;function T(){return function(e){return new Promise((function(t,a){e(U(I)),t()}))}}function L(e){return function(t,a){var A,y,T,L,F,V,G,q,H,z,W,Q,J,Y,Z=(D=a()).printProfileReducer.print_profile_data,X=D.productCanvasReducer.totalColorQty,K=D.colorPaletteReducer.colorList,$=[],ee=[],te=[],ae=[],re=[],ne=[],ie=[],oe=[],se=[],le=[],ce=0,ue=[],de="",pe=0,me=!1,he=!1,ge=!1,fe=0,ve=0;if(I.clipartPrice=0,I.fontPrice=0,I.perLetterPrice=0,I.setupPrice=0,I.uploadedImgPrice=0,I.printPrice=0,I.screenPrice=0,I.backgroundPrice=0,I.printableColPrice=0,I.sleevePrice=0,I.isRequestQuote=!1,I.addedPrice=0,I.tax=0,I.teamPrice=0,I.stickerPrice=0,I.stitchPrice=0,O=[],R=!!(D.StickerReducer.stickerSettings&&1===D.StickerReducer.stickerSettings.is_sticker_enabled&&Object.keys(D.StickerReducer.sheetInfo).length>0&&"sheet"===D.StickerReducer.selectedSheetOption),0!==Object.keys(X).length||X.constructor!==Object){if("simple"!==D.productCanvasReducer.product_extra_details.type||R)if("variable"!==D.productCanvasReducer.product_extra_details.type||R){if(R){if(D.StickerReducer.stickerSettings&&1===D.StickerReducer.stickerSettings.is_sticker_enabled&&Object.keys(D.StickerReducer.sheetInfo).length>0&&"sheet"===D.StickerReducer.selectedSheetOption)D.StickerReducer.stickerSettings.sheet.option_list.filter((function(e){return e.quantity>0&&e.stickerQtyPerSheet>0})).forEach((function(e,t,a){pe+=e.price*e.quantity,ce+=e.price*e.quantity})),I.productPrice=ce.toFixed(2),I.originalProductPrice=pe.toFixed(2)}else if(0===D.productCanvasReducer.product_details.is_variable_decoration||1===D.productCanvasReducer.product_details.is_variable_decoration&&D.productCanvasReducer.product_details.decoration_type&&"banner"!==D.productCanvasReducer.product_details.decoration_type)if(I.originalProductPrice=(D.productCanvasReducer.product_details.price*X.t).toFixed(2),void 0!==D.globalSettingReducer.global_settings_data.cart.tier_price&&D.globalSettingReducer.global_settings_data.cart.tier_price.is_enabled&&D.productCanvasReducer.product_details.tier_prices&&0!==D.productCanvasReducer.product_details.tier_prices.length&&X.t>0)for(var be=0;be<D.productCanvasReducer.product_details.tier_prices.length;be++)if(be<D.productCanvasReducer.product_details.tier_prices.length-1){if(X.t>=D.productCanvasReducer.product_details.tier_prices[be].quantity&&X.t<D.productCanvasReducer.product_details.tier_prices[be+1].quantity){I.productPrice=(D.productCanvasReducer.product_details.tier_prices[be].price*X.t).toFixed(2);break}if(X.t<D.productCanvasReducer.product_details.tier_prices[be].quantity){I.productPrice=(D.productCanvasReducer.product_details.price*X.t).toFixed(2);break}}else{if(X.t>=D.productCanvasReducer.product_details.tier_prices[be].quantity){I.productPrice=(D.productCanvasReducer.product_details.tier_prices[be].price*X.t).toFixed(2);break}if(X.t<D.productCanvasReducer.product_details.tier_prices[be].quantity){I.productPrice=(D.productCanvasReducer.product_details.price*X.t).toFixed(2);break}}else I.productPrice=(D.productCanvasReducer.product_details.price*X.t).toFixed(2);else if(de="",D.productCanvasReducer.selectedVarSize instanceof Object?void 0!==D.productCanvasReducer.selectedVarSize.type&&"standard"===D.productCanvasReducer.selectedVarSize.type?de="details":void 0!==D.productCanvasReducer.selectedVarSize.type&&"custom"===D.productCanvasReducer.selectedVarSize.type?void 0!==D.productCanvasReducer.product_details.custom_size_unit_price&&(I.productPrice=Number(D.productCanvasReducer.customPrintAreaDimension.width)*Number(D.productCanvasReducer.customPrintAreaDimension.height)*Number(D.productCanvasReducer.product_details.custom_size_unit_price)*X.t,I.originalProductPrice=Number(D.productCanvasReducer.customPrintAreaDimension.width)*Number(D.productCanvasReducer.customPrintAreaDimension.height)*Number(D.productCanvasReducer.product_details.custom_size_unit_price)*X.t):de="details":de="details","details"===de)if(I.originalProductPrice=(D.productCanvasReducer.product_details.price*X.t).toFixed(2),void 0!==D.globalSettingReducer.global_settings_data.cart.tier_price&&D.globalSettingReducer.global_settings_data.cart.tier_price.is_enabled&&D.productCanvasReducer.product_details.tier_prices&&0!==D.productCanvasReducer.product_details.tier_prices.length&&X.t>0)for(var Ae=0;Ae<D.productCanvasReducer.product_details.tier_prices.length;Ae++)if(Ae<D.productCanvasReducer.product_details.tier_prices.length-1){if(X.t>=D.productCanvasReducer.product_details.tier_prices[Ae].quantity&&X.t<D.productCanvasReducer.product_details.tier_prices[Ae+1].quantity){I.productPrice=(D.productCanvasReducer.product_details.tier_prices[Ae].price*X.t).toFixed(2);break}if(X.t<D.productCanvasReducer.product_details.tier_prices[Ae].quantity){I.productPrice=(D.productCanvasReducer.product_details.price*X.t).toFixed(2);break}}else{if(X.t>=D.productCanvasReducer.product_details.tier_prices[Ae].quantity){I.productPrice=(D.productCanvasReducer.product_details.tier_prices[Ae].price*X.t).toFixed(2);break}if(X.t<D.productCanvasReducer.product_details.tier_prices[Ae].quantity){I.productPrice=(D.productCanvasReducer.product_details.price*X.t).toFixed(2);break}}else I.productPrice=(D.productCanvasReducer.product_details.price*X.t).toFixed(2)}else{var ye="",_e=[],Ee=!0;if(0===D.productCanvasReducer.product_details.is_variable_decoration||1===D.productCanvasReducer.product_details.is_variable_decoration&&D.productCanvasReducer.product_details.decoration_type&&"banner"!==D.productCanvasReducer.product_details.decoration_type){if(0!==D.productCanvasReducer.cartProdAttrs.length&&(D.productCanvasReducer.cartProdAttrs.forEach((function(e){1===Object.keys(e).length?(ye=Object.keys(e)[0],0!==D.productCanvasReducer.cartColorPricing.length?-1!==D.productCanvasReducer.cartColorPricing.findIndex((function(e){return e.name===ye}))&&(_e=[],Object.keys(D.productCanvasReducer.product_details.attributes).forEach((function(e){_e.push({name:e,value:D.productCanvasReducer.product_details.attributes[e].name})})),e[ye].forEach((function(e){if(_e&&0!==_e.length&&ye===_e.find((function(e){return e.name===D.productCanvasReducer.globalColorAttr})).value)if(Ee=!0,_e.forEach((function(t){Ee=!(!e.attributes||e.attributes[t.name]!==t.value||!Ee)})),Ee)if(pe+=D.productCanvasReducer.product_details.price*e.quantityVal,void 0!==D.globalSettingReducer.global_settings_data.cart.tier_price&&D.globalSettingReducer.global_settings_data.cart.tier_price.is_enabled&&D.productCanvasReducer.product_details.tier_prices&&0!==D.productCanvasReducer.product_details.tier_prices.length&&e.quantityVal>0)for(var t=0;t<D.productCanvasReducer.product_details.tier_prices.length;t++)if(t<D.productCanvasReducer.product_details.tier_prices.length-1){if(e.quantityVal>=D.productCanvasReducer.product_details.tier_prices[t].quantity&&e.quantityVal<D.productCanvasReducer.product_details.tier_prices[t+1].quantity){ce+=D.productCanvasReducer.product_details.tier_prices[t].price*e.quantityVal;break}if(e.quantityVal<D.productCanvasReducer.product_details.tier_prices[t].quantity){ce+=D.productCanvasReducer.product_details.price*e.quantityVal;break}}else{if(e.quantityVal>=D.productCanvasReducer.product_details.tier_prices[t].quantity){ce+=D.productCanvasReducer.product_details.tier_prices[t].price*e.quantityVal;break}if(e.quantityVal<D.productCanvasReducer.product_details.tier_prices[t].quantity){ce+=D.productCanvasReducer.product_details.price*e.quantityVal;break}}else ce+=D.productCanvasReducer.product_details.price*e.quantityVal;else if(pe+=e.price*e.quantityVal,void 0!==D.globalSettingReducer.global_settings_data.cart.tier_price&&D.globalSettingReducer.global_settings_data.cart.tier_price.is_enabled&&e.tier_prices&&0!==e.tier_prices.length&&e.quantityVal>0)for(var a=0;a<e.tier_prices.length;a++)if(a<e.tier_prices.length-1){if(e.quantityVal>=e.tier_prices[a].quantity&&e.quantityVal<e.tier_prices[a+1].quantity){ce+=e.tier_prices[a].price*e.quantityVal;break}if(e.quantityVal<e.tier_prices[a].quantity){ce+=e.price*e.quantityVal;break}}else{if(e.quantityVal>=e.tier_prices[a].quantity){ce+=e.tier_prices[a].price*e.quantityVal;break}if(e.quantityVal<e.tier_prices[a].quantity){ce+=e.price*e.quantityVal;break}}else ce+=e.price*e.quantityVal;else if(pe+=e.price*e.quantityVal,void 0!==D.globalSettingReducer.global_settings_data.cart.tier_price&&D.globalSettingReducer.global_settings_data.cart.tier_price.is_enabled&&e.tier_prices&&0!==e.tier_prices.length&&e.quantityVal>0)for(var r=0;r<e.tier_prices.length;r++)if(r<e.tier_prices.length-1){if(e.quantityVal>=e.tier_prices[r].quantity&&e.quantityVal<e.tier_prices[r+1].quantity){ce+=e.tier_prices[r].price*e.quantityVal;break}if(e.quantityVal<e.tier_prices[r].quantity){ce+=e.price*e.quantityVal;break}}else{if(e.quantityVal>=e.tier_prices[r].quantity){ce+=e.tier_prices[r].price*e.quantityVal;break}if(e.quantityVal<e.tier_prices[r].quantity){ce+=e.price*e.quantityVal;break}}else ce+=e.price*e.quantityVal}))):e[ye].forEach((function(e){if(pe+=e.price*e.quantityVal,void 0!==D.globalSettingReducer.global_settings_data.cart.tier_price&&D.globalSettingReducer.global_settings_data.cart.tier_price.is_enabled&&e.tier_prices&&0!==e.tier_prices.length&&0!==e.quantityVal)for(var t=0;t<e.tier_prices.length;t++)t<e.tier_prices.length-1?e.quantityVal>=e.tier_prices[t].quantity&&e.quantityVal<e.tier_prices[t+1].quantity?ce+=e.tier_prices[t].price*e.quantityVal:e.quantityVal<e.tier_prices[t].quantity&&(ce+=e.price*e.quantityVal):e.quantityVal>=e.tier_prices[t].quantity?ce+=e.tier_prices[t].price*e.quantityVal:e.quantityVal<e.tier_prices[t].quantity&&(ce+=e.price*e.quantityVal);else ce+=e.price*e.quantityVal}))):0!==D.productCanvasReducer.cartColorPricing.length?-1!==D.productCanvasReducer.cartColorPricing.findIndex((function(t){return t.name===e.name}))&&e.options&&(ce+=M(e.options),pe+=B(e.options)):e.options&&(ce+=M(e.options),pe+=B(e.options))})),I.productPrice=ce.toFixed(2),I.originalProductPrice=pe.toFixed(2)),0!==D.productCanvasReducer.cartColorPricing.length)D.productCanvasReducer.cartColorPricing.forEach((function(e){if(0===D.productCanvasReducer.cartProdAttrs.length)if(D.productCanvasReducer.product_details.attributes[D.productCanvasReducer.globalColorAttr])if(e.name===D.productCanvasReducer.product_details.attributes[D.productCanvasReducer.globalColorAttr].name)if(pe+=D.productCanvasReducer.product_details.price*e.qty,void 0!==D.globalSettingReducer.global_settings_data.cart.tier_price&&D.globalSettingReducer.global_settings_data.cart.tier_price.is_enabled&&D.productCanvasReducer.product_details.tier_prices&&0!==D.productCanvasReducer.product_details.tier_prices.length&&e.qty>0)for(var t=0;t<D.productCanvasReducer.product_details.tier_prices.length;t++)if(t<D.productCanvasReducer.product_details.tier_prices.length-1){if(e.qty>=D.productCanvasReducer.product_details.tier_prices[t].quantity&&e.qty<D.productCanvasReducer.product_details.tier_prices[t+1].quantity){ce+=D.productCanvasReducer.product_details.tier_prices[t].price*e.qty;break}if(e.qty<D.productCanvasReducer.product_details.tier_prices[t].quantity){ce+=D.productCanvasReducer.product_details.price*e.qty;break}}else{if(e.qty>=D.productCanvasReducer.product_details.tier_prices[t].quantity){ce+=D.productCanvasReducer.product_details.tier_prices[t].price*e.qty;break}if(e.qty<D.productCanvasReducer.product_details.tier_prices[t].quantity){ce+=D.productCanvasReducer.product_details.price*e.qty;break}}else ce+=D.productCanvasReducer.product_details.price*e.qty;else{var a=D.productCanvasReducer.color_attributes.filter((function(t){return t.name===e.name}))[0];if(a)if(pe+=a.price*e.qty,void 0!==D.globalSettingReducer.global_settings_data.cart.tier_price&&D.globalSettingReducer.global_settings_data.cart.tier_price.is_enabled&&a.tier_prices&&0!==a.tier_prices.length&&e.qty>0)for(var r=0;r<a.tier_prices.length;r++)if(r<a.tier_prices.length-1){if(e.qty>=a.tier_prices[r].quantity&&e.qty<a.tier_prices[r+1].quantity){ce+=a.tier_prices[r].price*e.qty;break}if(e.qty<a.tier_prices[r].quantity){ce+=a.price*e.qty;break}}else{if(e.qty>=a.tier_prices[r].quantity){ce+=a.tier_prices[r].price*e.qty;break}if(e.qty<a.tier_prices[r].quantity){ce+=a.price*e.qty;break}}else ce+=a.price*e.qty;else pe+=e.price*e.qty,ce+=e.price*e.qty}else pe+=e.price*e.qty,ce+=e.price*e.qty;else{var n=[];if(1===Object.keys(D.productCanvasReducer.cartProdAttrs[0]).length){if(D.productCanvasReducer.cartProdAttrs.map((function(e){return Object.keys(e)})).forEach((function(e){n.push(e[0])})),-1===n.indexOf(e.name))if(e.name===D.productCanvasReducer.product_details.attributes[D.productCanvasReducer.globalColorAttr].name)if(pe+=D.productCanvasReducer.product_details.price*e.qty,void 0!==D.globalSettingReducer.global_settings_data.cart.tier_price&&D.globalSettingReducer.global_settings_data.cart.tier_price.is_enabled&&D.productCanvasReducer.product_details.tier_prices&&0!==D.productCanvasReducer.product_details.tier_prices.length&&e.qty>0)for(var i=0;i<D.productCanvasReducer.product_details.tier_prices.length;i++)if(i<D.productCanvasReducer.product_details.tier_prices.length-1){if(e.qty>=D.productCanvasReducer.product_details.tier_prices[i].quantity&&e.qty<D.productCanvasReducer.product_details.tier_prices[i+1].quantity){ce+=D.productCanvasReducer.product_details.tier_prices[i].price*e.qty;break}if(e.qty<D.productCanvasReducer.product_details.tier_prices[i].quantity){ce+=D.productCanvasReducer.product_details.price*e.qty;break}}else{if(e.qty>=D.productCanvasReducer.product_details.tier_prices[i].quantity){ce+=D.productCanvasReducer.product_details.tier_prices[i].price*e.qty;break}if(e.qty<D.productCanvasReducer.product_details.tier_prices[i].quantity){ce+=D.productCanvasReducer.product_details.price*e.qty;break}}else ce+=D.productCanvasReducer.product_details.price*e.qty;else{var o=D.productCanvasReducer.color_attributes.filter((function(t){return t.name===e.name}))[0];if(o)if(pe+=o.price*e.qty,void 0!==D.globalSettingReducer.global_settings_data.cart.tier_price&&D.globalSettingReducer.global_settings_data.cart.tier_price.is_enabled&&o.tier_prices&&0!==o.tier_prices.length&&e.qty>0)for(var s=0;s<o.tier_prices.length;s++)if(s<o.tier_prices.length-1){if(e.qty>=o.tier_prices[s].quantity&&e.qty<o.tier_prices[s+1].quantity){ce+=o.tier_prices[s].price*e.qty;break}if(e.qty<o.tier_prices[s].quantity){ce+=o.price*e.qty;break}}else{if(e.qty>=o.tier_prices[s].quantity){ce+=o.tier_prices[s].price*e.qty;break}if(e.qty<o.tier_prices[s].quantity){ce+=o.price*e.qty;break}}else ce+=o.price*e.qty;else pe+=e.price*e.qty,ce+=e.price*e.qty}}else if(D.productCanvasReducer.cartProdAttrs.forEach((function(e){n.push(e.name)})),-1===n.indexOf(e.name))if(e.name===D.productCanvasReducer.product_details.attributes[D.productCanvasReducer.globalColorAttr].name)if(pe+=D.productCanvasReducer.product_details.price*e.qty,void 0!==D.globalSettingReducer.global_settings_data.cart.tier_price&&D.globalSettingReducer.global_settings_data.cart.tier_price.is_enabled&&D.productCanvasReducer.product_details.tier_prices&&0!==D.productCanvasReducer.product_details.tier_prices.length&&e.qty>0)for(var l=0;l<D.productCanvasReducer.product_details.tier_prices.length;l++)if(l<D.productCanvasReducer.product_details.tier_prices.length-1){if(e.qty>=D.productCanvasReducer.product_details.tier_prices[l].quantity&&e.qty<D.productCanvasReducer.product_details.tier_prices[l+1].quantity){ce+=D.productCanvasReducer.product_details.tier_prices[l].price*e.qty;break}if(e.qty<D.productCanvasReducer.product_details.tier_prices[l].quantity){ce+=D.productCanvasReducer.product_details.price*e.qty;break}}else{if(e.qty>=D.productCanvasReducer.product_details.tier_prices[l].quantity){ce+=D.productCanvasReducer.product_details.tier_prices[l].price*e.qty;break}if(e.qty<D.productCanvasReducer.product_details.tier_prices[l].quantity){ce+=D.productCanvasReducer.product_details.price*e.qty;break}}else ce+=D.productCanvasReducer.product_details.price*e.qty;else{var c=D.productCanvasReducer.color_attributes.filter((function(t){return t.name===e.name}))[0];if(c)if(pe+=c.price*e.qty,void 0!==D.globalSettingReducer.global_settings_data.cart.tier_price&&D.globalSettingReducer.global_settings_data.cart.tier_price.is_enabled&&c.tier_prices&&0!==c.tier_prices.length&&e.qty>0)for(var u=0;u<c.tier_prices.length;u++)if(u<c.tier_prices.length-1){if(e.qty>=c.tier_prices[u].quantity&&e.qty<c.tier_prices[u+1].quantity){ce+=c.tier_prices[u].price*e.qty;break}if(e.qty<c.tier_prices[u].quantity){ce+=c.price*e.qty;break}}else{if(e.qty>=c.tier_prices[u].quantity){ce+=c.tier_prices[u].price*e.qty;break}if(e.qty<c.tier_prices[u].quantity){ce+=c.price*e.qty;break}}else ce+=c.price*e.qty;else pe+=e.price*e.qty,ce+=e.price*e.qty}}I.productPrice=ce.toFixed(2),I.originalProductPrice=pe.toFixed(2)}));else if(0===D.productCanvasReducer.cartProdAttrs.length)if(I.originalProductPrice=(D.productCanvasReducer.product_details.price*X.t).toFixed(2),void 0!==D.globalSettingReducer.global_settings_data.cart.tier_price&&D.globalSettingReducer.global_settings_data.cart.tier_price.is_enabled&&D.productCanvasReducer.product_details.tier_prices&&0!==D.productCanvasReducer.product_details.tier_prices.length&&X.t>0)for(var Se=0;Se<D.productCanvasReducer.product_details.tier_prices.length;Se++)if(Se<D.productCanvasReducer.product_details.tier_prices.length-1){if(X.t>=D.productCanvasReducer.product_details.tier_prices[Se].quantity&&X.t<D.productCanvasReducer.product_details.tier_prices[Se+1].quantity){I.productPrice=(D.productCanvasReducer.product_details.tier_prices[Se].price*X.t).toFixed(2);break}if(X.t<D.productCanvasReducer.product_details.tier_prices[Se].quantity){I.productPrice=(D.productCanvasReducer.product_details.price*X.t).toFixed(2);break}}else{if(X.t>=D.productCanvasReducer.product_details.tier_prices[Se].quantity){I.productPrice=(D.productCanvasReducer.product_details.tier_prices[Se].price*X.t).toFixed(2);break}if(X.t<D.productCanvasReducer.product_details.tier_prices[Se].quantity){I.productPrice=(D.productCanvasReducer.product_details.price*X.t).toFixed(2);break}}else I.productPrice=(D.productCanvasReducer.product_details.price*X.t).toFixed(2)}else if(0!==D.productCanvasReducer.cartProdAttrs.length&&(D.productCanvasReducer.cartProdAttrs.forEach((function(e){1===Object.keys(e).length?(ye=Object.keys(e)[0],0!==D.productCanvasReducer.cartColorPricing.length?-1!==D.productCanvasReducer.cartColorPricing.findIndex((function(e){return e.name===ye}))&&(_e=[],Object.keys(D.productCanvasReducer.product_details.attributes).forEach((function(e){_e.push({name:e,value:D.productCanvasReducer.product_details.attributes[e].name})})),e[ye].forEach((function(e){if(_e&&0!==_e.length&&ye===_e.find((function(e){return e.name===D.productCanvasReducer.globalColorAttr})).value){if(Ee=!0,_e.forEach((function(t){Ee=!(!e.attributes||e.attributes[t.name]!==t.value||!Ee)})),Ee){if(de="",D.productCanvasReducer.selectedVarSize instanceof Object?void 0!==D.productCanvasReducer.selectedVarSize.type&&"standard"===D.productCanvasReducer.selectedVarSize.type?de="details":void 0!==D.productCanvasReducer.selectedVarSize.type&&"custom"===D.productCanvasReducer.selectedVarSize.type?void 0!==D.productCanvasReducer.product_details.custom_size_unit_price&&(ce+=Number(D.productCanvasReducer.customPrintAreaDimension.width)*Number(D.productCanvasReducer.customPrintAreaDimension.height)*Number(D.productCanvasReducer.product_details.custom_size_unit_price)*e.quantityVal,pe+=Number(D.productCanvasReducer.customPrintAreaDimension.width)*Number(D.productCanvasReducer.customPrintAreaDimension.height)*Number(D.productCanvasReducer.product_details.custom_size_unit_price)*e.quantityVal):de="details":de="details","details"===de)if(pe+=D.productCanvasReducer.product_details.price*e.quantityVal,void 0!==D.globalSettingReducer.global_settings_data.cart.tier_price&&D.globalSettingReducer.global_settings_data.cart.tier_price.is_enabled&&D.productCanvasReducer.product_details.tier_prices&&0!==D.productCanvasReducer.product_details.tier_prices.length&&e.quantityVal>0)for(var t=0;t<D.productCanvasReducer.product_details.tier_prices.length;t++)if(t<D.productCanvasReducer.product_details.tier_prices.length-1){if(e.quantityVal>=D.productCanvasReducer.product_details.tier_prices[t].quantity&&e.quantityVal<D.productCanvasReducer.product_details.tier_prices[t+1].quantity){ce+=D.productCanvasReducer.product_details.tier_prices[t].price*e.quantityVal;break}if(e.quantityVal<D.productCanvasReducer.product_details.tier_prices[t].quantity){ce+=D.productCanvasReducer.product_details.price*e.quantityVal;break}}else{if(e.quantityVal>=D.productCanvasReducer.product_details.tier_prices[t].quantity){ce+=D.productCanvasReducer.product_details.tier_prices[t].price*e.quantityVal;break}if(e.quantityVal<D.productCanvasReducer.product_details.tier_prices[t].quantity){ce+=D.productCanvasReducer.product_details.price*e.quantityVal;break}}else ce+=D.productCanvasReducer.product_details.price*e.quantityVal}else if(de="",D.productCanvasReducer.selectedVarSize instanceof Object?void 0!==D.productCanvasReducer.selectedVarSize.type&&"standard"===D.productCanvasReducer.selectedVarSize.type?de="attrData":void 0!==D.productCanvasReducer.selectedVarSize.type&&"custom"===D.productCanvasReducer.selectedVarSize.type?void 0!==D.productCanvasReducer.product_details.custom_size_unit_price&&(ce+=Number(D.productCanvasReducer.customPrintAreaDimension.width)*Number(D.productCanvasReducer.customPrintAreaDimension.height)*Number(D.productCanvasReducer.product_details.custom_size_unit_price)*e.quantityVal,pe+=Number(D.productCanvasReducer.customPrintAreaDimension.width)*Number(D.productCanvasReducer.customPrintAreaDimension.height)*Number(D.productCanvasReducer.product_details.custom_size_unit_price)*e.quantityVal):de="attrData":de="attrData","attrData"===de)if(e.price)if(pe+=e.price*e.quantityVal,void 0!==D.globalSettingReducer.global_settings_data.cart.tier_price&&D.globalSettingReducer.global_settings_data.cart.tier_price.is_enabled&&e.tier_prices&&0!==e.tier_prices.length&&e.quantityVal>0)for(var a=0;a<e.tier_prices.length;a++)if(a<e.tier_prices.length-1){if(e.quantityVal>=e.tier_prices[a].quantity&&e.quantityVal<e.tier_prices[a+1].quantity){ce+=e.tier_prices[a].price*e.quantityVal;break}if(e.quantityVal<e.tier_prices[a].quantity){ce+=e.price*e.quantityVal;break}}else{if(e.quantityVal>=e.tier_prices[a].quantity){ce+=e.tier_prices[a].price*e.quantityVal;break}if(e.quantityVal<e.tier_prices[a].quantity){ce+=e.price*e.quantityVal;break}}else ce+=e.price*e.quantityVal;else pe+=0,ce+=0}else if(de="",D.productCanvasReducer.selectedVarSize instanceof Object?void 0!==D.productCanvasReducer.selectedVarSize.type&&"standard"===D.productCanvasReducer.selectedVarSize.type?de="attrData":void 0!==D.productCanvasReducer.selectedVarSize.type&&"custom"===D.productCanvasReducer.selectedVarSize.type?void 0!==D.productCanvasReducer.product_details.custom_size_unit_price&&(ce+=Number(D.productCanvasReducer.customPrintAreaDimension.width)*Number(D.productCanvasReducer.customPrintAreaDimension.height)*Number(D.productCanvasReducer.product_details.custom_size_unit_price)*e.quantityVal,pe+=Number(D.productCanvasReducer.customPrintAreaDimension.width)*Number(D.productCanvasReducer.customPrintAreaDimension.height)*Number(D.productCanvasReducer.product_details.custom_size_unit_price)*e.quantityVal):de="attrData":de="attrData","attrData"===de)if(e.price)if(pe+=e.price*e.quantityVal,void 0!==D.globalSettingReducer.global_settings_data.cart.tier_price&&D.globalSettingReducer.global_settings_data.cart.tier_price.is_enabled&&e.tier_prices&&0!==e.tier_prices.length&&e.quantityVal>0)for(var r=0;r<e.tier_prices.length;r++)if(r<e.tier_prices.length-1){if(e.quantityVal>=e.tier_prices[r].quantity&&e.quantityVal<e.tier_prices[r+1].quantity){ce+=e.tier_prices[r].price*e.quantityVal;break}if(e.quantityVal<e.tier_prices[r].quantity){ce+=e.price*e.quantityVal;break}}else{if(e.quantityVal>=e.tier_prices[r].quantity){ce+=e.tier_prices[r].price*e.quantityVal;break}if(e.quantityVal<e.tier_prices[r].quantity){ce+=e.price*e.quantityVal;break}}else ce+=e.price*e.quantityVal;else pe+=0,ce+=0}))):e[ye].forEach((function(e){if(de="",D.productCanvasReducer.selectedVarSize instanceof Object?void 0!==D.productCanvasReducer.selectedVarSize.type&&"standard"===D.productCanvasReducer.selectedVarSize.type?de="attrData":void 0!==D.productCanvasReducer.selectedVarSize.type&&"custom"===D.productCanvasReducer.selectedVarSize.type?void 0!==D.productCanvasReducer.product_details.custom_size_unit_price&&(ce+=Number(D.productCanvasReducer.customPrintAreaDimension.width)*Number(D.productCanvasReducer.customPrintAreaDimension.height)*Number(D.productCanvasReducer.product_details.custom_size_unit_price)*e.quantityVal,pe+=Number(D.productCanvasReducer.customPrintAreaDimension.width)*Number(D.productCanvasReducer.customPrintAreaDimension.height)*Number(D.productCanvasReducer.product_details.custom_size_unit_price)*e.quantityVal):de="attrData":de="attrData","attrData"===de)if(e.price)if(pe+=e.price*e.quantityVal,void 0!==D.globalSettingReducer.global_settings_data.cart.tier_price&&D.globalSettingReducer.global_settings_data.cart.tier_price.is_enabled&&e.tier_prices&&0!==e.tier_prices.length&&0!==e.quantityVal)for(var t=0;t<e.tier_prices.length;t++)if(t<e.tier_prices.length-1){if(e.quantityVal>=e.tier_prices[t].quantity&&e.quantityVal<e.tier_prices[t+1].quantity){ce+=e.tier_prices[t].price*e.quantityVal;break}if(e.quantityVal<e.tier_prices[t].quantity){ce+=e.price*e.quantityVal;break}}else{if(e.quantityVal>=e.tier_prices[t].quantity){ce+=e.tier_prices[t].price*e.quantityVal;break}if(e.quantityVal<e.tier_prices[t].quantity){ce+=e.price*e.quantityVal;break}}else ce+=e.price*e.quantityVal;else pe+=0,ce+=0}))):0!==D.productCanvasReducer.cartColorPricing.length?-1!==D.productCanvasReducer.cartColorPricing.findIndex((function(t){return t.name===e.name}))&&e.options&&(ce+=M(e.options),pe+=B(e.options)):e.options&&(ce+=M(e.options),pe+=B(e.options))})),I.productPrice=ce.toFixed(2),I.originalProductPrice=pe.toFixed(2)),0!==D.productCanvasReducer.cartColorPricing.length)D.productCanvasReducer.cartColorPricing.forEach((function(e){if(0===D.productCanvasReducer.cartProdAttrs.length)if(D.productCanvasReducer.product_details.attributes[D.productCanvasReducer.globalColorAttr])if(e.name===D.productCanvasReducer.product_details.attributes[D.productCanvasReducer.globalColorAttr].name){if(de="",D.productCanvasReducer.selectedVarSize instanceof Object?void 0!==D.productCanvasReducer.selectedVarSize.type&&"standard"===D.productCanvasReducer.selectedVarSize.type?de="details":void 0!==D.productCanvasReducer.selectedVarSize.type&&"custom"===D.productCanvasReducer.selectedVarSize.type?void 0!==D.productCanvasReducer.product_details.custom_size_unit_price&&(ce+=Number(D.productCanvasReducer.customPrintAreaDimension.width)*Number(D.productCanvasReducer.customPrintAreaDimension.height)*Number(D.productCanvasReducer.product_details.custom_size_unit_price)*e.qty,pe+=Number(D.productCanvasReducer.customPrintAreaDimension.width)*Number(D.productCanvasReducer.customPrintAreaDimension.height)*Number(D.productCanvasReducer.product_details.custom_size_unit_price)*e.qty):de="details":de="details","details"===de)if(pe+=D.productCanvasReducer.product_details.price*e.qty,void 0!==D.globalSettingReducer.global_settings_data.cart.tier_price&&D.globalSettingReducer.global_settings_data.cart.tier_price.is_enabled&&D.productCanvasReducer.product_details.tier_prices&&0!==D.productCanvasReducer.product_details.tier_prices.length&&e.qty>0)for(var t=0;t<D.productCanvasReducer.product_details.tier_prices.length;t++)if(t<D.productCanvasReducer.product_details.tier_prices.length-1){if(e.qty>=D.productCanvasReducer.product_details.tier_prices[t].quantity&&e.qty<D.productCanvasReducer.product_details.tier_prices[t+1].quantity){ce+=D.productCanvasReducer.product_details.tier_prices[t].price*e.qty;break}if(e.qty<D.productCanvasReducer.product_details.tier_prices[t].quantity){ce+=D.productCanvasReducer.product_details.price*e.qty;break}}else{if(e.qty>=D.productCanvasReducer.product_details.tier_prices[t].quantity){ce+=D.productCanvasReducer.product_details.tier_prices[t].price*e.qty;break}if(e.qty<D.productCanvasReducer.product_details.tier_prices[t].quantity){ce+=D.productCanvasReducer.product_details.price*e.qty;break}}else ce+=D.productCanvasReducer.product_details.price*e.qty}else{de="";var a=D.productCanvasReducer.color_attributes.filter((function(t){return t.name===e.name}))[0];if(a){if(D.productCanvasReducer.selectedVarSize instanceof Object?void 0!==D.productCanvasReducer.selectedVarSize.type&&"standard"===D.productCanvasReducer.selectedVarSize.type?de="colorData":void 0!==D.productCanvasReducer.selectedVarSize.type&&"custom"===D.productCanvasReducer.selectedVarSize.type?void 0!==D.productCanvasReducer.product_details.custom_size_unit_price&&(ce+=Number(D.productCanvasReducer.customPrintAreaDimension.width)*Number(D.productCanvasReducer.customPrintAreaDimension.height)*Number(D.productCanvasReducer.product_details.custom_size_unit_price)*e.qty,pe+=Number(D.productCanvasReducer.customPrintAreaDimension.width)*Number(D.productCanvasReducer.customPrintAreaDimension.height)*Number(D.productCanvasReducer.product_details.custom_size_unit_price)*e.qty):de="colorData":de="colorData","colorData"===de)if(pe+=a.price*e.qty,void 0!==D.globalSettingReducer.global_settings_data.cart.tier_price&&D.globalSettingReducer.global_settings_data.cart.tier_price.is_enabled&&a.tier_prices&&0!==a.tier_prices.length&&e.qty>0)for(var r=0;r<a.tier_prices.length;r++)if(r<a.tier_prices.length-1){if(e.qty>=a.tier_prices[r].quantity&&e.qty<a.tier_prices[r+1].quantity){ce+=a.tier_prices[r].price*e.qty;break}if(e.qty<a.tier_prices[r].quantity){ce+=a.price*e.qty;break}}else{if(e.qty>=a.tier_prices[r].quantity){ce+=a.tier_prices[r].price*e.qty;break}if(e.qty<a.tier_prices[r].quantity){ce+=a.price*e.qty;break}}else ce+=a.price*e.qty}else pe+=e.price*e.qty,ce+=e.price*e.qty}else pe+=e.price*e.qty,ce+=e.price*e.qty;else{var n=[];if(1===Object.keys(D.productCanvasReducer.cartProdAttrs[0]).length){if(D.productCanvasReducer.cartProdAttrs.map((function(e){return Object.keys(e)})).forEach((function(e){n.push(e[0])})),-1===n.indexOf(e.name))if(e.name===D.productCanvasReducer.product_details.attributes[D.productCanvasReducer.globalColorAttr].name){if(de="",D.productCanvasReducer.selectedVarSize instanceof Object?void 0!==D.productCanvasReducer.selectedVarSize.type&&"standard"===D.productCanvasReducer.selectedVarSize.type?de="details":void 0!==D.productCanvasReducer.selectedVarSize.type&&"custom"===D.productCanvasReducer.selectedVarSize.type?void 0!==D.productCanvasReducer.product_details.custom_size_unit_price&&(ce+=Number(D.productCanvasReducer.customPrintAreaDimension.width)*Number(D.productCanvasReducer.customPrintAreaDimension.height)*Number(D.productCanvasReducer.product_details.custom_size_unit_price)*e.qty,pe+=Number(D.productCanvasReducer.customPrintAreaDimension.width)*Number(D.productCanvasReducer.customPrintAreaDimension.height)*Number(D.productCanvasReducer.product_details.custom_size_unit_price)*e.qty):de="details":de="details","details"===de)if(pe+=D.productCanvasReducer.product_details.price*e.qty,void 0!==D.globalSettingReducer.global_settings_data.cart.tier_price&&D.globalSettingReducer.global_settings_data.cart.tier_price.is_enabled&&D.productCanvasReducer.product_details.tier_prices&&0!==D.productCanvasReducer.product_details.tier_prices.length&&e.qty>0)for(var i=0;i<D.productCanvasReducer.product_details.tier_prices.length;i++)if(i<D.productCanvasReducer.product_details.tier_prices.length-1){if(e.qty>=D.productCanvasReducer.product_details.tier_prices[i].quantity&&e.qty<D.productCanvasReducer.product_details.tier_prices[i+1].quantity){ce+=D.productCanvasReducer.product_details.tier_prices[i].price*e.qty;break}if(e.qty<D.productCanvasReducer.product_details.tier_prices[i].quantity){ce+=D.productCanvasReducer.product_details.price*e.qty;break}}else{if(e.qty>=D.productCanvasReducer.product_details.tier_prices[i].quantity){ce+=D.productCanvasReducer.product_details.tier_prices[i].price*e.qty;break}if(e.qty<D.productCanvasReducer.product_details.tier_prices[i].quantity){ce+=D.productCanvasReducer.product_details.price*e.qty;break}}else ce+=D.productCanvasReducer.product_details.price*e.qty}else{de="";var o=D.productCanvasReducer.color_attributes.filter((function(t){return t.name===e.name}))[0];if(o){if(D.productCanvasReducer.selectedVarSize instanceof Object?void 0!==D.productCanvasReducer.selectedVarSize.type&&"standard"===D.productCanvasReducer.selectedVarSize.type?de="colorData":void 0!==D.productCanvasReducer.selectedVarSize.type&&"custom"===D.productCanvasReducer.selectedVarSize.type?void 0!==D.productCanvasReducer.product_details.custom_size_unit_price&&(ce+=Number(D.productCanvasReducer.customPrintAreaDimension.width)*Number(D.productCanvasReducer.customPrintAreaDimension.height)*Number(D.productCanvasReducer.product_details.custom_size_unit_price)*e.qty):de="colorData":de="colorData","colorData"===de)if(pe+=o.price*e.qty,void 0!==D.globalSettingReducer.global_settings_data.cart.tier_price&&D.globalSettingReducer.global_settings_data.cart.tier_price.is_enabled&&o.tier_prices&&0!==o.tier_prices.length&&e.qty>0)for(var s=0;s<o.tier_prices.length;s++)if(s<o.tier_prices.length-1){if(e.qty>=o.tier_prices[s].quantity&&e.qty<o.tier_prices[s+1].quantity){ce+=o.tier_prices[s].price*e.qty;break}if(e.qty<o.tier_prices[s].quantity){ce+=o.price*e.qty;break}}else{if(e.qty>=o.tier_prices[s].quantity){ce+=o.tier_prices[s].price*e.qty;break}if(e.qty<o.tier_prices[s].quantity){ce+=o.price*e.qty;break}}else ce+=o.price*e.qty}else pe+=e.price*e.qty,ce+=e.price*e.qty}}else if(D.productCanvasReducer.cartProdAttrs.forEach((function(e){n.push(e.name)})),-1===n.indexOf(e.name))if(e.name===D.productCanvasReducer.product_details.attributes[D.productCanvasReducer.globalColorAttr].name){if(de="",D.productCanvasReducer.selectedVarSize instanceof Object?void 0!==D.productCanvasReducer.selectedVarSize.type&&"standard"===D.productCanvasReducer.selectedVarSize.type?de="details":void 0!==D.productCanvasReducer.selectedVarSize.type&&"custom"===D.productCanvasReducer.selectedVarSize.type?void 0!==D.productCanvasReducer.product_details.custom_size_unit_price&&(ce+=Number(D.productCanvasReducer.customPrintAreaDimension.width)*Number(D.productCanvasReducer.customPrintAreaDimension.height)*Number(D.productCanvasReducer.product_details.custom_size_unit_price)*e.qty,pe+=Number(D.productCanvasReducer.customPrintAreaDimension.width)*Number(D.productCanvasReducer.customPrintAreaDimension.height)*Number(D.productCanvasReducer.product_details.custom_size_unit_price)*e.qty):de="details":de="details","details"===de)if(pe+=D.productCanvasReducer.product_details.price*e.qty,void 0!==D.globalSettingReducer.global_settings_data.cart.tier_price&&D.globalSettingReducer.global_settings_data.cart.tier_price.is_enabled&&D.productCanvasReducer.product_details.tier_prices&&0!==D.productCanvasReducer.product_details.tier_prices.length&&e.qty>0)for(var l=0;l<D.productCanvasReducer.product_details.tier_prices.length;l++)if(l<D.productCanvasReducer.product_details.tier_prices.length-1){if(e.qty>=D.productCanvasReducer.product_details.tier_prices[l].quantity&&e.qty<D.productCanvasReducer.product_details.tier_prices[l+1].quantity){ce+=D.productCanvasReducer.product_details.tier_prices[l].price*e.qty;break}if(e.qty<D.productCanvasReducer.product_details.tier_prices[l].quantity){ce+=D.productCanvasReducer.product_details.price*e.qty;break}}else{if(e.qty>=D.productCanvasReducer.product_details.tier_prices[l].quantity){ce+=D.productCanvasReducer.product_details.tier_prices[l].price*e.qty;break}if(e.qty<D.productCanvasReducer.product_details.tier_prices[l].quantity){ce+=D.productCanvasReducer.product_details.price*e.qty;break}}else ce+=D.productCanvasReducer.product_details.price*e.qty}else{de="";var c=D.productCanvasReducer.color_attributes.filter((function(t){return t.name===e.name}))[0];if(c){if(D.productCanvasReducer.selectedVarSize instanceof Object?void 0!==D.productCanvasReducer.selectedVarSize.type&&"standard"===D.productCanvasReducer.selectedVarSize.type?de="colorData":void 0!==D.productCanvasReducer.selectedVarSize.type&&"custom"===D.productCanvasReducer.selectedVarSize.type?void 0!==D.productCanvasReducer.product_details.custom_size_unit_price&&(ce+=Number(D.productCanvasReducer.customPrintAreaDimension.width)*Number(D.productCanvasReducer.customPrintAreaDimension.height)*Number(D.productCanvasReducer.product_details.custom_size_unit_price)*e.qty):de="colorData":de="colorData","colorData"===de)if(pe+=c.price*e.qty,void 0!==D.globalSettingReducer.global_settings_data.cart.tier_price&&D.globalSettingReducer.global_settings_data.cart.tier_price.is_enabled&&c.tier_prices&&0!==c.tier_prices.length&&e.qty>0)for(var u=0;u<c.tier_prices.length;u++)if(u<c.tier_prices.length-1){if(e.qty>=c.tier_prices[u].quantity&&e.qty<c.tier_prices[u+1].quantity){ce+=c.tier_prices[u].price*e.qty;break}if(e.qty<c.tier_prices[u].quantity){ce+=c.price*e.qty;break}}else{if(e.qty>=c.tier_prices[u].quantity){ce+=c.tier_prices[u].price*e.qty;break}if(e.qty<c.tier_prices[u].quantity){ce+=c.price*e.qty;break}}else ce+=c.price*e.qty}else pe+=e.price*e.qty,ce+=e.price*e.qty}}I.productPrice=ce.toFixed(2),I.originalProductPrice=pe.toFixed(2)}));else if(0===D.productCanvasReducer.cartProdAttrs.length&&(de="",D.productCanvasReducer.selectedVarSize instanceof Object?void 0!==D.productCanvasReducer.selectedVarSize.type&&"standard"===D.productCanvasReducer.selectedVarSize.type?de="details":void 0!==D.productCanvasReducer.selectedVarSize.type&&"custom"===D.productCanvasReducer.selectedVarSize.type?void 0!==D.productCanvasReducer.product_details.custom_size_unit_price&&(I.productPrice=Number(D.productCanvasReducer.customPrintAreaDimension.width)*Number(D.productCanvasReducer.customPrintAreaDimension.height)*Number(D.productCanvasReducer.product_details.custom_size_unit_price)*X.t,I.originalProductPrice=Number(D.productCanvasReducer.customPrintAreaDimension.width)*Number(D.productCanvasReducer.customPrintAreaDimension.height)*Number(D.productCanvasReducer.product_details.custom_size_unit_price)*X.t):de="details":de="details","details"===de))if(I.originalProductPrice=(D.productCanvasReducer.product_details.price*X.t).toFixed(2),void 0!==D.globalSettingReducer.global_settings_data.cart.tier_price&&D.globalSettingReducer.global_settings_data.cart.tier_price.is_enabled&&D.productCanvasReducer.product_details.tier_prices&&0!==D.productCanvasReducer.product_details.tier_prices.length&&X.t>0)for(var Ce=0;Ce<D.productCanvasReducer.product_details.tier_prices.length;Ce++)if(Ce<D.productCanvasReducer.product_details.tier_prices.length-1){if(X.t>=D.productCanvasReducer.product_details.tier_prices[Ce].quantity&&X.t<D.productCanvasReducer.product_details.tier_prices[Ce+1].quantity){I.productPrice=(D.productCanvasReducer.product_details.tier_prices[Ce].price*X.t).toFixed(2);break}if(X.t<D.productCanvasReducer.product_details.tier_prices[Ce].quantity){I.productPrice=(D.productCanvasReducer.product_details.price*X.t).toFixed(2);break}}else{if(X.t>=D.productCanvasReducer.product_details.tier_prices[Ce].quantity){I.productPrice=(D.productCanvasReducer.product_details.tier_prices[Ce].price*X.t).toFixed(2);break}if(X.t<D.productCanvasReducer.product_details.tier_prices[Ce].quantity){I.productPrice=(D.productCanvasReducer.product_details.price*X.t).toFixed(2);break}}else I.productPrice=(D.productCanvasReducer.product_details.price*X.t).toFixed(2)}else if(0===D.productCanvasReducer.product_details.is_variable_decoration||1===D.productCanvasReducer.product_details.is_variable_decoration&&D.productCanvasReducer.product_details.decoration_type&&"banner"!==D.productCanvasReducer.product_details.decoration_type)if(I.originalProductPrice=(D.productCanvasReducer.product_details.price*X.t).toFixed(2),void 0!==D.globalSettingReducer.global_settings_data.cart.tier_price&&D.globalSettingReducer.global_settings_data.cart.tier_price.is_enabled&&D.productCanvasReducer.product_details.tier_prices&&0!==D.productCanvasReducer.product_details.tier_prices.length&&X.t>0)for(var xe=0;xe<D.productCanvasReducer.product_details.tier_prices.length;xe++)if(xe<D.productCanvasReducer.product_details.tier_prices.length-1){if(X.t>=D.productCanvasReducer.product_details.tier_prices[xe].quantity&&X.t<D.productCanvasReducer.product_details.tier_prices[xe+1].quantity){I.productPrice=(D.productCanvasReducer.product_details.tier_prices[xe].price*X.t).toFixed(2);break}if(X.t<D.productCanvasReducer.product_details.tier_prices[xe].quantity){I.productPrice=(D.productCanvasReducer.product_details.price*X.t).toFixed(2);break}}else{if(X.t>=D.productCanvasReducer.product_details.tier_prices[xe].quantity){I.productPrice=(D.productCanvasReducer.product_details.tier_prices[xe].price*X.t).toFixed(2);break}if(X.t<D.productCanvasReducer.product_details.tier_prices[xe].quantity){I.productPrice=(D.productCanvasReducer.product_details.price*X.t).toFixed(2);break}}else I.productPrice=(D.productCanvasReducer.product_details.price*X.t).toFixed(2);else if(de="",D.productCanvasReducer.selectedVarSize instanceof Object?void 0!==D.productCanvasReducer.selectedVarSize.type&&"standard"===D.productCanvasReducer.selectedVarSize.type?de="details":void 0!==D.productCanvasReducer.selectedVarSize.type&&"custom"===D.productCanvasReducer.selectedVarSize.type?void 0!==D.productCanvasReducer.product_details.custom_size_unit_price&&(I.productPrice=Number(D.productCanvasReducer.customPrintAreaDimension.width)*Number(D.productCanvasReducer.customPrintAreaDimension.height)*Number(D.productCanvasReducer.product_details.custom_size_unit_price)*X.t,I.originalProductPrice=Number(D.productCanvasReducer.customPrintAreaDimension.width)*Number(D.productCanvasReducer.customPrintAreaDimension.height)*Number(D.productCanvasReducer.product_details.custom_size_unit_price)*X.t):de="details":de="details","details"===de)if(I.originalProductPrice=(D.productCanvasReducer.product_details.price*X.t).toFixed(2),void 0!==D.globalSettingReducer.global_settings_data.cart.tier_price&&D.globalSettingReducer.global_settings_data.cart.tier_price.is_enabled&&D.productCanvasReducer.product_details.tier_prices&&0!==D.productCanvasReducer.product_details.tier_prices.length&&X.t>0)for(var we=0;we<D.productCanvasReducer.product_details.tier_prices.length;we++)if(we<D.productCanvasReducer.product_details.tier_prices.length-1){if(X.t>=D.productCanvasReducer.product_details.tier_prices[we].quantity&&X.t<D.productCanvasReducer.product_details.tier_prices[we+1].quantity){I.productPrice=(D.productCanvasReducer.product_details.tier_prices[we].price*X.t).toFixed(2);break}if(X.t<D.productCanvasReducer.product_details.tier_prices[we].quantity){I.productPrice=(D.productCanvasReducer.product_details.price*X.t).toFixed(2);break}}else{if(X.t>=D.productCanvasReducer.product_details.tier_prices[we].quantity){I.productPrice=(D.productCanvasReducer.product_details.tier_prices[we].price*X.t).toFixed(2);break}if(X.t<D.productCanvasReducer.product_details.tier_prices[we].quantity){I.productPrice=(D.productCanvasReducer.product_details.price*X.t).toFixed(2);break}}else I.productPrice=(D.productCanvasReducer.product_details.price*X.t).toFixed(2);if(1===D.productCanvasReducer.product_details.is_variable_decoration&&D.productCanvasReducer.product_details.decoration_type&&"banner"===D.productCanvasReducer.product_details.decoration_type&&void 0!==D.productCanvasReducer.selectedVarSize.type&&"custom"===D.productCanvasReducer.selectedVarSize.type&&(me=!0),e.forEach((function(e,t){e&&e.forEach((function(e){var a;e.isDesigned&&(a=e.printProfileId,-1===O.indexOf(a)&&O.push(a)),A=Z.filter((function(t){return t.id.toString()===e.printProfileId.toString()}))[0],D.StickerReducer.stickerSettings&&1===D.StickerReducer.stickerSettings.is_sticker_enabled&&(J=function(e){var t=null,a=0,r=e.stickerPreviewData,n=e.stickerSettings.material.option_list;e.sheetInfo&&e.sheetInfo.sheetList&&e.sheetInfo.sheetList.forEach((function(e){a+=Number(e.quantity)}));var i=n.filter((function(e){return e.name===r.selectedMaterial}));return i.length>0&&"sheet"===e.selectedSheetOption?t+=parseInt(i[0].price)*a:i.length>0&&"sheet"!==e.selectedSheetOption?t+=parseInt(i[0].price):t=0,t}(D.StickerReducer),I.stickerPrice=J),A&&(!(y=A.print_profile_pricing)||0===Object.keys(y).length&&y.constructor===Object||(T=y.modules.filter((function(e){return"clipart"===e.slug}))[0],0!==e.clipartPrice&&T&&T.status&&(L=function(e,t,a,i,o){var s,l,c=0,u=0,d=0,p={},m=!1;return a.price_settings.is_quantity_tier?(c=(l=r(o,e.printProfileId,a.price_settings.print_areas.length)).tablePrintAreaIndex,o=l.usedPrintProfiles,s=a.price_settings.print_areas[c].cliparts[0].pricing,t.is_white_base?((p=n(e.clipartPrice,s,t.white_base_type,i.d,"d",a.price_settings.is_quote_enable)).isRequestQuote&&(m=p.isRequestQuote),u=p.price,d=Number(d+u),(p=n(e.clipartPrice,s,t.white_base_type,i.l,"l",a.price_settings.is_quote_enable)).isRequestQuote&&(m=p.isRequestQuote),u=p.price,d=Number(d+u),(p=n(e.clipartPrice,s,t.white_base_type,i.w,"w",a.price_settings.is_quote_enable)).isRequestQuote&&(m=p.isRequestQuote),u=p.price,d=Number(d+u),(p=n(e.clipartPrice,s,t.white_base_type,i.p,"l",a.price_settings.is_quote_enable)).isRequestQuote&&(m=p.isRequestQuote),u=p.price,d=Number(d+u)):((p=n(e.clipartPrice,s,"",i.t,"p",a.price_settings.is_quote_enable)).isRequestQuote&&(m=p.isRequestQuote),u=p.price,d=Number(u))):d=Number(e.clipartPrice*i.t),{price:d,usedPrintProfiles:o,isRequestQuote:m}}(e,y,T,X,$),$=L.usedPrintProfiles,I.clipartPrice+=L.price,L.isRequestQuote&&(I.isRequestQuote=!0)),T=y.modules.filter((function(e){return"fonts"===e.slug}))[0],0!==e.fontPrice&&T&&T.status&&(F=function(e,t,a,r,n){var s,l,c=0,u=0,d=0,p={},m=!1;return a.price_settings.is_quantity_tier?(c=(l=i(n,e.printProfileId,a.price_settings.print_areas.length)).tablePrintAreaIndex,n=l.usedPrintProfiles,s=a.price_settings.print_areas[c].fonts[0].pricing,t.is_white_base?((p=o(e.fontPrice,s,t.white_base_type,r.d,"d",a.price_settings.is_quote_enable)).isRequestQuote&&(m=p.isRequestQuote),u=p.price,d=Number(d+u),(p=o(e.fontPrice,s,t.white_base_type,r.l,"l",a.price_settings.is_quote_enable)).isRequestQuote&&(m=p.isRequestQuote),u=p.price,d=Number(d+u),(p=o(e.fontPrice,s,t.white_base_type,r.w,"w",a.price_settings.is_quote_enable)).isRequestQuote&&(m=p.isRequestQuote),u=p.price,d=Number(d+u),(p=o(e.fontPrice,s,t.white_base_type,r.p,"l",a.price_settings.is_quote_enable)).isRequestQuote&&(m=p.isRequestQuote),u=p.price,d=Number(d+u)):((p=o(e.fontPrice,s,"",r.t,"p",a.price_settings.is_quote_enable)).isRequestQuote&&(m=p.isRequestQuote),u=p.price,d=Number(u))):d=Number(e.fontPrice*r.t),{price:d,usedPrintProfiles:n,isRequestQuote:m}}(e,y,T,X,te),te=F.usedPrintProfiles,I.fontPrice+=F.price,F.isRequestQuote&&(I.isRequestQuote=!0)),T=y.modules.filter((function(e){return"letter"===e.slug}))[0],0!==e.noOfLetters&&T&&T.status&&(V=function(e,t,a,r,n){var i,o,u,d=0,p=0,m=0,h={},g=!1;return a.price_settings.is_quantity_tier?(d=(u=s(n,e.printProfileId,a.price_settings.print_areas.length)).tablePrintAreaIndex,n=u.usedPrintProfiles,i=(o=a.price_settings.print_areas[d].price_per_letter)[l(o,e.noOfLetters)].pricing,t.is_white_base?((h=c(e.noOfLetters,i,t.white_base_type,r.d,"d",a.price_settings.is_quote_enable)).isRequestQuote&&(g=h.isRequestQuote),p=h.price,m=Number(m+p),(h=c(e.noOfLetters,i,t.white_base_type,r.l,"l",a.price_settings.is_quote_enable)).isRequestQuote&&(g=h.isRequestQuote),p=h.price,m=Number(m+p),(h=c(e.noOfLetters,i,t.white_base_type,r.w,"w",a.price_settings.is_quote_enable)).isRequestQuote&&(g=h.isRequestQuote),p=h.price,m=Number(m+p),(h=c(e.noOfLetters,i,t.white_base_type,r.p,"l",a.price_settings.is_quote_enable)).isRequestQuote&&(g=h.isRequestQuote),p=h.price,m=Number(m+p)):((h=c(e.noOfLetters,i,"",r.t,"p",a.price_settings.is_quote_enable)).isRequestQuote&&(g=h.isRequestQuote),p=h.price,m=Number(p))):m=Number(a.price_settings.default_prices[0].price_value*r.t*e.noOfLetters),{price:m,usedPrintProfiles:n,isRequestQuote:g}}(e,y,T,X,ae),ae=V.usedPrintProfiles,I.perLetterPrice+=V.price,V.isRequestQuote&&(I.isRequestQuote=!0)),T=y.modules.filter((function(e){return"image"===e.slug}))[0],0!==e.noOfImage&&T&&T.status&&(G=function(e,t,a,r,n){var i,o,s=0,l=0,c=0,p={},m=!1;return a.price_settings.is_quantity_tier?(s=(o=u(n,e.printProfileId,a.price_settings.print_areas.length)).tablePrintAreaIndex,n=o.usedPrintProfiles,i=a.price_settings.print_areas[s].image_pricing[0].pricing,t.is_white_base?((p=d(e.noOfImage,i,t.white_base_type,r.d,"d",a.price_settings.is_quote_enable)).isRequestQuote&&(m=p.isRequestQuote),l=p.price,c=Number(c+l),(p=d(e.noOfImage,i,t.white_base_type,r.l,"l",a.price_settings.is_quote_enable)).isRequestQuote&&(m=p.isRequestQuote),l=p.price,c=Number(c+l),(p=d(e.noOfImage,i,t.white_base_type,r.w,"w",a.price_settings.is_quote_enable)).isRequestQuote&&(m=p.isRequestQuote),l=p.price,c=Number(c+l),(p=d(e.noOfImage,i,t.white_base_type,r.p,"l",a.price_settings.is_quote_enable)).isRequestQuote&&(m=p.isRequestQuote),l=p.price,c=Number(c+l)):((p=d(e.noOfImage,i,"",r.t,"p",a.price_settings.is_quote_enable)).isRequestQuote&&(m=p.isRequestQuote),l=p.price,c=Number(l))):c=Number(a.price_settings.default_prices[0].price_value*r.t*e.noOfImage),{price:c,usedPrintProfiles:n,isRequestQuote:m}}(e,y,T,X,re),re=G.usedPrintProfiles,I.uploadedImgPrice+=G.price,G.isRequestQuote&&(I.isRequestQuote=!0)),T=y.modules.filter((function(e){return"background"===e.slug}))[0],0!==e.backgroundPrice&&T&&T.status&&(H=function(e,t,a,r,n){var i,o,s,l=0,c=0,u={},d=!1;return a.price_settings.is_quantity_tier?(s=(o=p(n,e.printProfileId,a.price_settings.print_areas.length)).tablePrintAreaIndex,n=o.usedPrintProfiles,i=a.price_settings.print_areas[s].background[0].pricing,t.is_white_base?((u=m(e.backgroundPrice,i,t.white_base_type,r.d,"d",a.price_settings.is_quote_enable)).isRequestQuote&&(d=u.isRequestQuote),l=u.price,c=Number(c+l),(u=m(e.backgroundPrice,i,t.white_base_type,r.l,"l",a.price_settings.is_quote_enable)).isRequestQuote&&(d=u.isRequestQuote),l=u.price,c=Number(c+l),(u=m(e.backgroundPrice,i,t.white_base_type,r.w,"w",a.price_settings.is_quote_enable)).isRequestQuote&&(d=u.isRequestQuote),l=u.price,c=Number(c+l),(u=m(e.backgroundPrice,i,t.white_base_type,r.p,"l",a.price_settings.is_quote_enable)).isRequestQuote&&(d=u.isRequestQuote),l=u.price,c=Number(c+l)):((u=m(e.backgroundPrice,i,"",r.t,"p",a.price_settings.is_quote_enable)).isRequestQuote&&(d=u.isRequestQuote),l=u.price,c=Number(l))):c=Number(e.backgroundPrice*r.t),{price:c,usedPrintProfiles:n,isRequestQuote:d}}(e,y,T,X,ne),ne=H.usedPrintProfiles,I.backgroundPrice+=H.price,H.isRequestQuote&&(I.isRequestQuote=!0)),T=y.modules.filter((function(e){return"foil"===e.slug}))[0],(N=JSON.parse(JSON.stringify(e))).colors=[],e.colors.forEach((function(e){"none"!==e&&N.colors.push(e)})),0!==N.colors.length&&T&&T.status&&(z=function(e,t,a,r,n,i){var o,s,l,c,u,d=0,p=0,m=0,f=0,v={},b=!1;return e.colors.forEach((function(e){e.includes("#pattern")?(o=e.substring(e.lastIndexOf("(")+1,e.lastIndexOf("(")+(e.lastIndexOf(")")-e.lastIndexOf("("))).split("_")[1],(l=t.filter((function(e){return e.subcategory.filter((function(e){return e.color_data.filter((function(e){return e.id.toString()===o}))[0]}))[0]}))[0])&&(c=l.subcategory.filter((function(e){return e.color_data.filter((function(e){return e.id.toString()===o}))[0]}))[0].color_data.filter((function(e){return e.id.toString()===o}))[0],p+=Number(c.price))):(l=t.filter((function(t){return t.subcategory.filter((function(t){return t.color_data.filter((function(t){return t.hex_value===e}))[0]}))[0]}))[0])&&(c=l.subcategory.filter((function(t){return t.color_data.filter((function(t){return t.hex_value===e}))[0]}))[0].color_data.filter((function(t){return t.hex_value===e}))[0],p+=Number(c.price))})),0!==p&&(r.price_settings.is_quantity_tier?(d=(u=h(i,e.printProfileId,r.price_settings.print_areas.length)).tablePrintAreaIndex,i=u.usedPrintProfiles,s=r.price_settings.print_areas[d].color[0].pricing,a.is_white_base?((v=g(p,s,a.white_base_type,n.d,"d",r.price_settings.is_quote_enable)).isRequestQuote&&(b=v.isRequestQuote),m=v.price,f=Number(f+m),(v=g(p,s,a.white_base_type,n.l,"l",r.price_settings.is_quote_enable)).isRequestQuote&&(b=v.isRequestQuote),m=v.price,f=Number(f+m),(v=g(p,s,a.white_base_type,n.w,"w",r.price_settings.is_quote_enable)).isRequestQuote&&(b=v.isRequestQuote),m=v.price,f=Number(f+m),(v=g(p,s,a.white_base_type,n.p,"l",r.price_settings.is_quote_enable)).isRequestQuote&&(b=v.isRequestQuote),m=v.price,f=Number(f+m)):((v=g(p,s,"",n.t,"p",r.price_settings.is_quote_enable)).isRequestQuote&&(b=v.isRequestQuote),m=v.price,f=Number(m))):f=Number(p*n.t)),{price:f,usedPrintProfiles:i,isRequestQuote:b}}(N,K,y,T,X,ie),ie=z.usedPrintProfiles,I.printableColPrice+=z.price,z.isRequestQuote&&(I.isRequestQuote=!0)),T=y.modules.filter((function(e){return"simple-deco"===e.slug}))[0],0!==e.isDesigned&&T&&T.status&&(me&&T.price_settings&&T.price_settings.area_calculation_type&&"print_area"===T.price_settings.area_calculation_type?(he=!0,ge=!0,fe=Number(D.productCanvasReducer.customPrintAreaDimension.width)*Number(D.productCanvasReducer.customPrintAreaDimension.height)):(he=!1,fe=Number(e.boundaryArea)),q=_.getPrintPrice(N,y,T.price_settings,X,le,he,fe),le=q.usedPrintProfiles,I.printPrice+=q.price,I.screenPrice+=q.screenPrice,ve+=q.customProdPrice,q.isRequestQuote&&(I.isRequestQuote=!0)),T=y.modules.filter((function(e){return"sleeve"===e.slug}))[0],0!==e.isDesigned&&T&&T.status&&(W=function(e,t,a,r,n,i){var o,s=[],l=0,c=0,u={},d=!1;return r.price_settings.is_quantity_tier?(i=(o=f(i,t.printProfileId,e,r.price_settings.print_areas)).usedPrintProfiles,o.isCalc&&(s=o.pricingArr,a.is_white_base?((u=v(s,a.white_base_type,n.d,"d",r.price_settings.is_quote_enable)).isRequestQuote&&(d=u.isRequestQuote),l=u.price,c=Number(c+l),(u=v(s,a.white_base_type,n.l,"l",r.price_settings.is_quote_enable)).isRequestQuote&&(d=u.isRequestQuote),l=u.price,c=Number(c+l),(u=v(s,a.white_base_type,n.w,"w",r.price_settings.is_quote_enable)).isRequestQuote&&(d=u.isRequestQuote),l=u.price,c=Number(c+l),(u=v(s,a.white_base_type,n.p,"l",r.price_settings.is_quote_enable)).isRequestQuote&&(d=u.isRequestQuote),l=u.price,c=Number(c+l)):((u=v(s,"",n.t,"p",r.price_settings.is_quote_enable)).isRequestQuote&&(d=u.isRequestQuote),l=u.price,c=Number(l)))):(i=(o=b(i,t.printProfileId,e,r.price_settings.default_prices)).usedPrintProfiles,l=o.price*n.t,c=Number(c+l)),{price:c,usedPrintProfiles:i,isRequestQuote:d}}(t,e,y,T,X,oe),oe=W.usedPrintProfiles,I.sleevePrice+=W.price,W.isRequestQuote&&(I.isRequestQuote=!0)),T=y.modules.filter((function(e){return"name-number"===e.slug}))[0],0!==e.isDesigned&&T&&T.status&&(Q=function(e,t,a,r,n,i){var o,s=[],l=0,c=0;return r.price_settings.is_quantity_tier?(i=(o=E(i,t,e,r.price_settings.print_areas)).usedPrintProfiles,o.isCalc&&(s=o.pricingArr,a.is_white_base?(l=S(s,a.white_base_type,n.d,"d",t),c=Number(c+l),l=S(s,a.white_base_type,n.l,"l",t),c=Number(c+l),l=S(s,a.white_base_type,n.w,"w",t),c=Number(c+l),l=S(s,a.white_base_type,n.p,"l",t),c=Number(c+l)):(l=S(s,"",n.t,"p",t),c=Number(l)))):(i=(o=C(i,t,e,r.price_settings.default_prices)).usedPrintProfiles,l=o.price*n.t,c=Number(c+l)),{price:c,usedPrintProfiles:i}}(t,e,y,T,X,ue),ue=Q.usedPrintProfiles,I.teamPrice+=Q.price),0!==e.isDesigned&&y.is_setup_price&&(I.setupPrice+=function(e,t,a,r,n){var i=0;return"per_product_side"===a.setup_type_product?-1===n.findIndex((function(a){return a.sIndex===e&&a.pId===t.printProfileId}))&&("single_order"===a.setup_type_order?i=Number(i+a.setup_price*r.t):"multiple_order"===a.setup_type_order&&(i=r.t>0?Number(i+1*a.setup_price):Number(i+0)),n.push({sIndex:e,pId:t.printProfileId})):"per_product"===a.setup_type_product&&-1===n.findIndex((function(e){return e.pId===t.printProfileId}))&&(n.push({sIndex:e,pId:t.printProfileId}),"single_order"===a.setup_type_order?i=Number(i+a.setup_price*r.t):"multiple_order"===a.setup_type_order&&(i=r.t>0?Number(i+1*a.setup_price):Number(i+0))),i}(t,e,y,X,se)),0!==y.modules.filter((function(e){return"stitch-count"===e.slug})).length&&(T=y.modules.filter((function(e){return"stitch-count"===e.slug}))[0],0!==e.exactDesignArea&&T&&T.status&&(Y=function(e,t,a,r,n,i){var o,s,l,c=0,u=0,d=0,p=0,m=0,h={},g=!1;return m=Number("Pixel"===i?(.013157895*Number(e.exactDesignArea)).toFixed(2):"Millimeter"===i?(.0393701*Number(e.exactDesignArea)).toFixed(2):"Centimeter"===i?(.393701*Number(e.exactDesignArea)).toFixed(2):"Meter"===i?(39.3701*Number(e.exactDesignArea)).toFixed(2):"Inch"===i?e.exactDesignArea:"Feet"===i?(12*Number(e.exactDesignArea)).toFixed(2):e.exactDesignArea),p=a.price_settings.default_stitch_count_per_inch?Math.round(Number((m*a.price_settings.default_stitch_count_per_inch).toFixed(2))):Math.round(Number((2e3*m).toFixed(2))),a.price_settings.is_quantity_tier?(c=(l=x(n,e.printProfileId,a.price_settings.print_areas.length)).tablePrintAreaIndex,n=l.usedPrintProfiles,o=(s=a.price_settings.print_areas[c].price_per_stitch)[w(s,p)].pricing,t.is_white_base?((h=k(p,o,t.white_base_type,r.d,"d",a.price_settings.is_quote_enable)).isRequestQuote&&(g=h.isRequestQuote),u=h.price,d=Number(d+u),(h=k(p,o,t.white_base_type,r.l,"l",a.price_settings.is_quote_enable)).isRequestQuote&&(g=h.isRequestQuote),u=h.price,d=Number(d+u),(h=k(p,o,t.white_base_type,r.w,"w",a.price_settings.is_quote_enable)).isRequestQuote&&(g=h.isRequestQuote),u=h.price,d=Number(d+u),(h=k(p,o,t.white_base_type,r.p,"l",a.price_settings.is_quote_enable)).isRequestQuote&&(g=h.isRequestQuote),u=h.price,d=Number(d+u)):((h=k(p,o,"",r.t,"p",a.price_settings.is_quote_enable)).isRequestQuote&&(g=h.isRequestQuote),u=h.price,d=Number(u))):d=Number(a.price_settings.default_prices[0].price_value*r.t*p),{price:d,usedPrintProfiles:n,isRequestQuote:g}}(e,y,T,X,ee,D.productCanvasReducer.product_details.print_unit),ee=Y.usedPrintProfiles,I.stitchPrice+=Y.price,Y.isRequestQuote&&(I.isRequestQuote=!0)))))}))})),ge&&(I.productPrice=Number(ve.toFixed(2)),I.originalProductPrice=Number(ve.toFixed(2))),void 0!==D.productCanvasReducer.product_details.is_price_rule&&D.productCanvasReducer.product_details.is_price_rule&&D.productCanvasReducer.price_rule_data&&0!==D.productCanvasReducer.price_rule_data.length&&X.t>0&&0!==O.length){var ke=[],Ie={},Ne=[],Oe=-1,Pe="",De=[],Re={},Te=!1;"simple"===D.productCanvasReducer.product_extra_details.type?D.productCanvasReducer.price_rule_data&&0!==D.productCanvasReducer.price_rule_data.length&&D.productCanvasReducer.product_details.attributes instanceof Object&&(ke=Object.keys(D.productCanvasReducer.product_details.attributes)).forEach((function(e){(Ie=D.productCanvasReducer.price_rule_data.filter((function(t){return t.name.toLowerCase()===e.toLowerCase()}))[0])&&Ie.attribute_term&&0!==Ie.attribute_term.length&&(Ne=Ie.attribute_term.filter((function(t){return t.name===D.productCanvasReducer.product_details.attributes[e].name}))[0].price_data)&&0!==Ne.length&&O.forEach((function(e){-1!==(Oe=Ne.findIndex((function(t){return t.print_profile_id===e})))&&(I.addedPrice+=Ne[Oe].price*X.t)}))})):D.productCanvasReducer.price_rule_data&&0!==D.productCanvasReducer.price_rule_data.length&&D.productCanvasReducer.product_details.attributes instanceof Object&&(ke=Object.keys(D.productCanvasReducer.product_details.attributes),Pe="",1===ke.length?(0!==D.productCanvasReducer.cartProdAttrs.length&&D.productCanvasReducer.cartProdAttrs.forEach((function(e){e&&1===Object.keys(e).length&&(Pe=Object.keys(e)[0],Te=!1,0!==D.productCanvasReducer.cartColorPricing.length?-1!==D.productCanvasReducer.cartColorPricing.findIndex((function(e){return e.name===Pe}))&&(Te=!0):Te=!0,Te&&e[Pe].forEach((function(e){(Ie=D.productCanvasReducer.price_rule_data.filter((function(e){return e.name.toLowerCase()===ke[0].toLowerCase()}))[0])&&Ie.attribute_term&&0!==Ie.attribute_term.length&&(Ne=j(Ie,Pe))&&0!==Ne.length&&O.forEach((function(t){-1!==(Oe=Ne.findIndex((function(e){return e.print_profile_id===t})))&&(D.productCanvasReducer.selectedVarSize instanceof Object&&void 0!==D.productCanvasReducer.selectedVarSize.type&&"custom"===D.productCanvasReducer.selectedVarSize.type&&D.productCanvasReducer.globalSizeAttr.toLowerCase()===ke[0].toLowerCase()?I.addedPrice+=0:I.addedPrice+=Ne[Oe].price*e.quantityVal)}))})))})),0!==D.productCanvasReducer.cartColorPricing.length?D.productCanvasReducer.cartColorPricing.forEach((function(e){Te=!1,0===D.productCanvasReducer.cartProdAttrs.length?Te=!0:(De=[],D.productCanvasReducer.cartProdAttrs.map((function(e){if(e)return Object.keys(e)})).forEach((function(e){e&&De.push(e[0])})),-1===De.indexOf(e.name)&&(Te=!0)),Te&&(Ie=D.productCanvasReducer.price_rule_data.filter((function(e){return e.name.toLowerCase()===ke[0].toLowerCase()}))[0])&&Ie.attribute_term&&0!==Ie.attribute_term.length&&(Ne=j(Ie,e.name))&&0!==Ne.length&&O.forEach((function(t){-1!==(Oe=Ne.findIndex((function(e){return e.print_profile_id===t})))&&(D.productCanvasReducer.selectedVarSize instanceof Object&&void 0!==D.productCanvasReducer.selectedVarSize.type&&"custom"===D.productCanvasReducer.selectedVarSize.type&&D.productCanvasReducer.globalSizeAttr.toLowerCase()===ke[0].toLowerCase()?I.addedPrice+=0:I.addedPrice+=Ne[Oe].price*e.qty)}))})):0===D.productCanvasReducer.cartProdAttrs.length&&(Ie=D.productCanvasReducer.price_rule_data.filter((function(e){return e.name.toLowerCase()===ke[0].toLowerCase()}))[0])&&Ie.attribute_term&&0!==Ie.attribute_term.length&&(Ne=j(Ie,D.productCanvasReducer.product_details.attributes[ke[0]].name))&&0!==Ne.length&&O.forEach((function(e){-1!==(Oe=Ne.findIndex((function(t){return t.print_profile_id===e})))&&(D.productCanvasReducer.selectedVarSize instanceof Object&&void 0!==D.productCanvasReducer.selectedVarSize.type&&"custom"===D.productCanvasReducer.selectedVarSize.type&&D.productCanvasReducer.globalSizeAttr.toLowerCase()===ke[0].toLowerCase()?I.addedPrice+=0:I.addedPrice+=Ne[Oe].price*X.t)}))):2===ke.length?(0!==D.productCanvasReducer.cartProdAttrs.length&&D.productCanvasReducer.cartProdAttrs.forEach((function(e){e&&1===Object.keys(e).length&&(Pe=Object.keys(e)[0],Te=!1,0!==D.productCanvasReducer.cartColorPricing.length?-1!==D.productCanvasReducer.cartColorPricing.findIndex((function(e){return e.name===Pe}))&&(Te=!0):Te=!0,Te&&e[Pe].forEach((function(e){e.quantityVal>0&&ke.forEach((function(t){Ne=[],(Ie=D.productCanvasReducer.price_rule_data.filter((function(e){return e.name.toLowerCase()===t.toLowerCase()}))[0])&&Ie.attribute_term&&0!==Ie.attribute_term.length&&(t===D.productCanvasReducer.globalColorAttr?Ne=j(Ie,Pe):e.name&&(Ne=j(Ie,e.name)),Ne&&0!==Ne.length&&O.forEach((function(a){-1!==(Oe=Ne.findIndex((function(e){return e.print_profile_id===a})))&&(D.productCanvasReducer.selectedVarSize instanceof Object&&void 0!==D.productCanvasReducer.selectedVarSize.type&&"custom"===D.productCanvasReducer.selectedVarSize.type&&D.productCanvasReducer.globalSizeAttr.toLowerCase()===t.toLowerCase()?I.addedPrice+=0:I.addedPrice+=Ne[Oe].price*e.quantityVal)})))}))})))})),0!==D.productCanvasReducer.cartColorPricing.length?D.productCanvasReducer.cartColorPricing.forEach((function(e){Te=!1,0===D.productCanvasReducer.cartProdAttrs.length?Te=!0:(De=[],D.productCanvasReducer.cartProdAttrs.map((function(e){if(e)return Object.keys(e)})).forEach((function(e){e&&De.push(e[0])})),-1===De.indexOf(e.name)&&(Te=!0)),Te&&ke.forEach((function(t){Ne=[],(Ie=D.productCanvasReducer.price_rule_data.filter((function(e){return e.name.toLowerCase()===t.toLowerCase()}))[0])&&Ie.attribute_term&&0!==Ie.attribute_term.length&&(Ne=t===D.productCanvasReducer.globalColorAttr?j(Ie,e.name):j(Ie,D.productCanvasReducer.product_details.attributes[t].name))&&0!==Ne.length&&O.forEach((function(a){-1!==(Oe=Ne.findIndex((function(e){return e.print_profile_id===a})))&&(D.productCanvasReducer.selectedVarSize instanceof Object&&void 0!==D.productCanvasReducer.selectedVarSize.type&&"custom"===D.productCanvasReducer.selectedVarSize.type&&D.productCanvasReducer.globalSizeAttr.toLowerCase()===t.toLowerCase()?I.addedPrice+=0:I.addedPrice+=Ne[Oe].price*e.qty)}))}))})):0===D.productCanvasReducer.cartProdAttrs.length&&ke.forEach((function(e){(Ie=D.productCanvasReducer.price_rule_data.filter((function(t){return t.name.toLowerCase()===e.toLowerCase()}))[0])&&Ie.attribute_term&&0!==Ie.attribute_term.length&&(Ne=j(Ie,D.productCanvasReducer.product_details.attributes[e].name))&&0!==Ne.length&&O.forEach((function(t){-1!==(Oe=Ne.findIndex((function(e){return e.print_profile_id===t})))&&(D.productCanvasReducer.selectedVarSize instanceof Object&&void 0!==D.productCanvasReducer.selectedVarSize.type&&"custom"===D.productCanvasReducer.selectedVarSize.type&&D.productCanvasReducer.globalSizeAttr.toLowerCase()===e.toLowerCase()?I.addedPrice+=0:I.addedPrice+=Ne[Oe].price*X.t)}))}))):3===ke.length&&(0!==D.productCanvasReducer.cartProdAttrs.length&&D.productCanvasReducer.cartProdAttrs.forEach((function(e){Te=!1,0!==D.productCanvasReducer.cartColorPricing.length?-1!==D.productCanvasReducer.cartColorPricing.findIndex((function(t){return t.name===e.name}))&&(Te=!0):Te=!0,Te&&e.options&&((P=[]).push({attrName:D.productCanvasReducer.globalColorAttr,attrValue:e.name}),Re=function e(t){var a={},r=Object.keys(t)[0];return t[r].forEach((function(t){t.selected&&(t.options?(P.push({attrName:r,attrValue:t.name}),a=e(t.options)):t.selected&&t.quantityVal>0&&(P.push({attrName:r,attrValue:t.name}),a.quantityVal=t.quantityVal,a.attrList=P))})),a}(e.options),0===Object.keys(Re).length&&Re.constructor===Object||Re.attrList.forEach((function(e){(Ie=D.productCanvasReducer.price_rule_data.filter((function(t){return t.name.toLowerCase()===e.attrName.toLowerCase()}))[0])&&Ie.attribute_term&&0!==Ie.attribute_term.length&&(Ne=j(Ie,e.attrValue))&&0!==Ne.length&&O.forEach((function(e){-1!==(Oe=Ne.findIndex((function(t){return t.print_profile_id===e})))&&(I.addedPrice+=Ne[Oe].price*Re.quantityVal)}))})))})),0!==D.productCanvasReducer.cartColorPricing.length?D.productCanvasReducer.cartColorPricing.forEach((function(e){Te=!1,0===D.productCanvasReducer.cartProdAttrs.length?Te=!0:(De=[],D.productCanvasReducer.cartProdAttrs.forEach((function(e){De.push(e.name)})),-1===De.indexOf(e.name)&&(Te=!0)),Te&&ke.forEach((function(t){Ne=[],(Ie=D.productCanvasReducer.price_rule_data.filter((function(e){return e.name.toLowerCase()===t.toLowerCase()}))[0])&&Ie.attribute_term&&0!==Ie.attribute_term.length&&(Ne=t===D.productCanvasReducer.globalColorAttr?j(Ie,e.name):j(Ie,D.productCanvasReducer.product_details.attributes[t].name))&&0!==Ne.length&&O.forEach((function(t){-1!==(Oe=Ne.findIndex((function(e){return e.print_profile_id===t})))&&(I.addedPrice+=Ne[Oe].price*e.qty)}))}))})):0===D.productCanvasReducer.cartProdAttrs.length&&ke.forEach((function(e){(Ie=D.productCanvasReducer.price_rule_data.filter((function(t){return t.name.toLowerCase()===e.toLowerCase()}))[0])&&Ie.attribute_term&&0!==Ie.attribute_term.length&&(Ne=j(Ie,D.productCanvasReducer.product_details.attributes[e].name))&&0!==Ne.length&&O.forEach((function(e){-1!==(Oe=Ne.findIndex((function(t){return t.print_profile_id===e})))&&(I.addedPrice+=Ne[Oe].price*X.t)}))}))))}if(I.tax=I.tax.toFixed(2),void 0!==D.productCanvasReducer.product_details.tax){var Le=0,Me=0,Be=D.productCanvasReducer.product_details.tax;if(!isNaN(Be)){var je=Number(JSON.parse(JSON.stringify(I)).productPrice);Le=1+Be/100,Me=(Number(je)*Le).toFixed(2),I.tax=(Number(Me)-je).toFixed(2)}}}t(U(I))}}function M(e){var t=0,a=Object.keys(e)[0],r="";return e[a].forEach((function(e){if(e.selected)if(e.options)t=M(e.options);else if(e.selected&&(r="",D.productCanvasReducer.selectedVarSize instanceof Object?void 0!==D.productCanvasReducer.selectedVarSize.type&&"standard"===D.productCanvasReducer.selectedVarSize.type?r="attrData":void 0!==D.productCanvasReducer.selectedVarSize.type&&"custom"===D.productCanvasReducer.selectedVarSize.type?void 0!==D.productCanvasReducer.product_details.custom_size_unit_price&&(t=Number(D.productCanvasReducer.customPrintAreaDimension.width)*Number(D.productCanvasReducer.customPrintAreaDimension.height)*Number(D.productCanvasReducer.product_details.custom_size_unit_price)*e.quantityVal):r="attrData":r="attrData","attrData"===r))if(e.tier_prices&&0!==e.tier_prices.length&&e.quantityVal>0)for(var a=0;a<e.tier_prices.length;a++)if(a<e.tier_prices.length-1){if(e.quantityVal>=e.tier_prices[a].quantity&&e.quantityVal<e.tier_prices[a+1].quantity){t=e.tier_prices[a].price*e.quantityVal;break}if(e.quantityVal<e.tier_prices[a].quantity){t=e.price*e.quantityVal;break}}else{if(e.quantityVal>=e.tier_prices[a].quantity){t=e.tier_prices[a].price*e.quantityVal;break}if(e.quantityVal<e.tier_prices[a].quantity){t=e.price*e.quantityVal;break}}else t=e.price*e.quantityVal})),t}function B(e){var t=0,a=Object.keys(e)[0],r="";return e[a].forEach((function(e){e.selected&&(e.options?t=M(e.options):e.selected&&(r="",D.productCanvasReducer.selectedVarSize instanceof Object?void 0!==D.productCanvasReducer.selectedVarSize.type&&"standard"===D.productCanvasReducer.selectedVarSize.type?r="attrData":void 0!==D.productCanvasReducer.selectedVarSize.type&&"custom"===D.productCanvasReducer.selectedVarSize.type?void 0!==D.productCanvasReducer.product_details.custom_size_unit_price&&(t=Number(D.productCanvasReducer.customPrintAreaDimension.width)*Number(D.productCanvasReducer.customPrintAreaDimension.height)*Number(D.productCanvasReducer.product_details.custom_size_unit_price)*e.quantityVal):r="attrData":r="attrData","attrData"===r&&(t=e.price*e.quantityVal)))})),t}function j(e,t){var a,r=[];return 0!==(a=t&&""!==t?e.attribute_term.filter((function(e){return e.name.normalize()===t.normalize()})):e.attribute_term.filter((function(e){return e.name===t}))).length&&(r=a[0].price_data),r}var F="SET_PRICING_DATA",U=function(e){return{type:F,payload:e}}},62:function(e,t,a){"use strict";a.d(t,"j",(function(){return i})),a.d(t,"k",(function(){return o})),a.d(t,"m",(function(){return s})),a.d(t,"l",(function(){return l})),a.d(t,"g",(function(){return c})),a.d(t,"i",(function(){return u})),a.d(t,"h",(function(){return d})),a.d(t,"a",(function(){return p})),a.d(t,"c",(function(){return m})),a.d(t,"b",(function(){return h})),a.d(t,"d",(function(){return g})),a.d(t,"f",(function(){return f})),a.d(t,"e",(function(){return v}));var r=a(12),n=a(60);function i(){return function(e){return e(b()),n.get(r.a.base_path+"categories/templates",{headers:{"Content-Type":"application/json"}}).then((function(t){return e(A(t.data.data)),t.data.data})).catch((function(t){return e(y(t))}))}}function o(e){return function(t){t(_(e))}}function s(e){return function(t){t(E(e))}}function l(e){return function(t){t(S(e))}}var c="TEMPLATE_CAT_BEGIN",u="TEMPLATE_CAT_SUCCESS",d="TEMPLATE_CAT_FAILURE",p="SAVE_TEMPLATE_BEGIN",m="SAVE_TEMPLATE_SUCCESS",h="SAVE_TEMPLATE_FAILURE",g="SET_ALL_SIDE_ELEMENTS",f="SET_EDIT_TEMPLATE_DETAILS",v="SET_EDIT_TEMPLATE_DESIGN_URLS",b=function(){return{type:c}},A=function(e){return{type:u,payload:e}},y=function(e){return{type:d,payload:{error:e}}},_=function(e){return{type:g,payload:e}},E=function(e){return{type:f,payload:e}},S=function(e){return{type:v,payload:e}}},624:function(e,t){function a(e){var t=e.changedTouches,a=t[0],r="";switch(e.type){case"touchstart":r="mousedown";break;case"touchmove":r="mousemove";break;case"touchend":r="mouseup";break;default:return}var n=a.screenX,i=a.screenY,o=a.clientX,s=a.clientY,l=new MouseEvent(r,{bubbles:!0,cancelable:!0,view:window,detail:1,screenX:n,screenY:i,clientX:o,clientY:s,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,button:0,relatedTarget:null});t.length<2&&a.target.dispatchEvent(l)}document.addEventListener("touchstart",a,!0),document.addEventListener("touchmove",a,!0),document.addEventListener("touchend",a,!0),document.addEventListener("touchcancel",a,!0)},627:function(e,t){},628:function(e,t){},629:function(e,t){},65:function(e,t,a){"use strict";a.d(t,"q",(function(){return l})),a.d(t,"t",(function(){return c})),a.d(t,"r",(function(){return u})),a.d(t,"s",(function(){return d})),a.d(t,"u",(function(){return p})),a.d(t,"v",(function(){return m})),a.d(t,"b",(function(){return h})),a.d(t,"d",(function(){return g})),a.d(t,"c",(function(){return f})),a.d(t,"k",(function(){return v})),a.d(t,"m",(function(){return b})),a.d(t,"l",(function(){return A})),a.d(t,"h",(function(){return y})),a.d(t,"j",(function(){return _})),a.d(t,"i",(function(){return E})),a.d(t,"e",(function(){return S})),a.d(t,"g",(function(){return C})),a.d(t,"f",(function(){return x})),a.d(t,"a",(function(){return w})),a.d(t,"o",(function(){return k})),a.d(t,"p",(function(){return I})),a.d(t,"n",(function(){return N}));var r=a(7),n=a(4),i=a(12),o=a(27),s=a(60);function l(e,t,a){return function(o){if(t.length){if(t.length){for(var l=!1,c=0;c<t.length;c++){if(t[c].printProfileId===e.print_profile_id){l=!1;break}l=!0}(l||1===parseInt(e.page))&&o(O())}}else o(O());return function(e){var t=Object(n.a)({},e);return e.category&&delete t.print_profile_id,s.get(i.a.base_path+"backgrounds",{params:t},{headers:{"Content-Type":"application/json"}})}(e).then((function(n){var i=[],s=!1,l="",c={printProfileId:"",backColorData:"",backColorLoadStatus:!1,pageNo:1};if(t.length){i=Object(r.a)(t),s=!1;for(var u=0;u<i.length;u++){if(i[u].printProfileId===e.print_profile_id){s=!0,l=u;break}s=!1}var d,p;if(s)if(e.name||e.category||a)if(a||1===parseInt(e.page))i[l].pageNo=1,i[l].backColorLoadStatus=!1,i[l].backColorData.records=n.data.records,i[l].backColorData.total_records=n.data.total_records,i[l].backColorData.data=Object(r.a)(n.data.data);else i[l].pageNo=e.page,i[l].backColorLoadStatus=!1,i[l].backColorData.records=n.data.records,i[l].backColorData.total_records=n.data.total_records,(d=i[l].backColorData.data).push.apply(d,Object(r.a)(n.data.data));else if(i[l].backColorLoadStatus||1!==parseInt(e.page))i[l].pageNo=e.page,i[l].backColorLoadStatus=!0,i[l].backColorData.records=n.data.records,i[l].backColorData.total_records=n.data.total_records,(p=i[l].backColorData.data).push.apply(p,Object(r.a)(n.data.data));else i[l].pageNo=e.page,i[l].backColorLoadStatus=!0,i[l].backColorData.records=n.data.records,i[l].backColorData.total_records=n.data.total_records,i[l].backColorData.data=Object(r.a)(n.data.data);else c.printProfileId=e.print_profile_id,c.backColorData=n.data,c.backColorLoadStatus=!0,i.push(c)}else c.printProfileId=e.print_profile_id,c.backColorData=n.data,c.backColorLoadStatus=!0,i.push(c);return o(P(i)),n.data})).catch((function(e){return o(D(e))}))}}function c(e,t,a){return function(o){if(t.length){if(t.length){for(var l=!1,c=0;c<t.length;c++){if(t[c].printProfileId===e.print_profile_id){l=!1;break}l=!0}(l||1===parseInt(e.page))&&o(R())}}else o(R());return function(e){var t=Object(n.a)({},e);return e.category&&delete t.print_profile_id,s.get(i.a.base_path+"backgrounds",{params:t},{headers:{"Content-Type":"application/json"}})}(e).then((function(n){var i=[],s=!1,l="",c={printProfileId:"",backPatternData:"",backPatternLoadStatus:!1,pageNo:1};if(t.length){i=Object(r.a)(t),s=!1;for(var u=0;u<i.length;u++){if(i[u].printProfileId===e.print_profile_id){s=!0,l=u;break}s=!1}var d,p;if(s)if(e.name||e.category||a)if(a||1===parseInt(e.page))i[l].pageNo=1,i[l].backPatternLoadStatus=!1,i[l].backPatternData.records=n.data.records,i[l].backPatternData.total_records=n.data.total_records,i[l].backPatternData.data=Object(r.a)(n.data.data);else i[l].pageNo=e.page,i[l].backPatternLoadStatus=!1,i[l].backPatternData.records=n.data.records,i[l].backPatternData.total_records=n.data.total_records,(d=i[l].backPatternData.data).push.apply(d,Object(r.a)(n.data.data));else if(i[l].backPatternLoadStatus||1!==parseInt(e.page))i[l].pageNo=e.page,i[l].backPatternLoadStatus=!0,i[l].backPatternData.records=n.data.records,i[l].backPatternData.total_records=n.data.total_records,(p=i[l].backPatternData.data).push.apply(p,Object(r.a)(n.data.data));else i[l].pageNo=e.page,i[l].backPatternLoadStatus=!0,i[l].backPatternData.records=n.data.records,i[l].backPatternData.total_records=n.data.total_records,i[l].backPatternData.data=Object(r.a)(n.data.data);else c.printProfileId=e.print_profile_id,c.backPatternData=n.data,c.backPatternLoadStatus=!0,i.push(c)}else c.printProfileId=e.print_profile_id,c.backPatternData=n.data,c.backPatternLoadStatus=!0,i.push(c);return o(T(i)),n.data})).catch((function(e){return o(L(e))}))}}function u(e,t){return function(a){return a(M()),function(e){return s.get(i.a.base_path+"categories/backgrounds/print-profiles/"+e)}(e).then((function(n){var i;i=Object(r.a)(n.data.data);for(var o=[],s=0;s<i.length;s++)if(0===i[s].is_disable){for(var l={name:i[s].name,value:i[s].id,isDefault:i[s].is_default,order:i[s].order,subCat:[]},c=0;c<i[s].subs.length;c++)0===i[s].subs[c].is_disable&&l.subCat.push({name:i[s].subs[c].name,value:i[s].subs[c].id,isDefault:i[s].subs[c].is_default,order:i[s].subs[c].order});o.push(l)}var u=[],d=!1,p={printProfileId:"",catData:"",catLoadStatus:!1,primeCatStatus:!0};if(t.length){u=Object(r.a)(t),d=!1;for(var m=0;m<u.length;m++){if(u[m].printProfileId===e){d=!0;break}d=!1}d||(p.printProfileId=e,p.catData=[].concat(o),p.catLoadStatus=!0,u.push(p))}else p.printProfileId=e,p.catData=[].concat(o),p.catLoadStatus=!0,u.push(p);return a(B(u)),n.data})).catch((function(e){return a(j(e))}))}}function d(){return function(e){return e(F()),s.get(i.a.base_path+"tags/backgrounds").then((function(t){return e(U(t.data)),t.data})).catch((function(t){return e(V(t))}))}}function p(e){return function(t){t(G(e))}}function m(e,t,a){return function(r){return o.y(e,t,a).then((function(e){return e.data})).catch((function(e){console.log(e)}))}}var h="FETCH_BACKGROUND_BEGIN",g="FETCH_BACKGROUND_SUCCESS",f="FETCH_BACKGROUND_FAILURE",v="FETCH_PATTERN_BEGIN",b="FETCH_PATTERN_SUCCESS",A="FETCH_PATTERN_FAILURE",y="FETCH_BACK_CATEGORY_BEGIN",_="FETCH_BACK_CATEGORY_SUCCESS",E="FETCH_BACK_CATEGORY_FAILURE",S="FETCH_BACKGROUND_TAG_BEGIN",C="FETCH_BACKGROUND_TAG_SUCCESS",x="FETCH_BACKGROUND_TAG_FAILURE",w="BACKGROUND_FILTER_APPLIED",k="UPDATE_BACK_COLOR_PAGE_NO",I="UPDATE_BACK_PATTERN_PAGE_NO",N="SET_BACK_PRIMERY_CATEGORY_STATUS",O=function(){return{type:h}},P=function(e){return{type:g,payload:e}},D=function(e){return{type:f,payload:{error:e}}},R=function(){return{type:v}},T=function(e){return{type:b,payload:e}},L=function(e){return{type:A,payload:{error:e}}},M=function(){return{type:y}},B=function(e){return{type:_,payload:e}},j=function(e){return{type:E,payload:{error:e}}},F=function(){return{type:S}},U=function(e){return{type:C,payload:e}},V=function(e){return{type:x,payload:{tagError:e}}},G=function(e){return{type:N,payload:e}}},652:function(e,t){},654:function(e,t){},67:function(e,t,a){"use strict";function r(e){return function(t){return new Promise((function(a,r){t(v(e)),a()}))}}function n(e){return function(t){return new Promise((function(a,r){t(b(e)),a()}))}}function i(e){return function(t){return new Promise((function(a,r){t(A(e)),a()}))}}function o(e){return function(t){return new Promise((function(a,r){t(y(e)),a()}))}}function s(e){return function(t){return new Promise((function(a,r){t(_(e)),a()}))}}function l(e){return function(t){return new Promise((function(a,r){t(E(e)),a()}))}}function c(e){return function(t){return new Promise((function(a,r){t(S(e)),a()}))}}a.d(t,"i",(function(){return r})),a.d(t,"h",(function(){return n})),a.d(t,"n",(function(){return i})),a.d(t,"k",(function(){return o})),a.d(t,"m",(function(){return s})),a.d(t,"l",(function(){return l})),a.d(t,"j",(function(){return c})),a.d(t,"a",(function(){return u})),a.d(t,"e",(function(){return d})),a.d(t,"b",(function(){return p})),a.d(t,"c",(function(){return m})),a.d(t,"g",(function(){return h})),a.d(t,"f",(function(){return g})),a.d(t,"d",(function(){return f}));var u="SET_STICKER_PREVIEW_DETAILS",d="SET_STICKER_SETTINGS",p="SET_STICKER_PREVIEW_IMAGE",m="SET_STICKER_PRINT_DIMENSIONS",h="SET_STICKER_SHEET_OPTION",g="SET_STICKER_SHEET_INFO",f="SET_STICKER_ROLL_INFO",v=function(e){return{type:u,payload:e}},b=function(e){return{type:p,payload:e}},A=function(e){return{type:m,payload:e}},y=function(e){return{type:d,payload:e}},_=function(e){return{type:h,payload:e}},E=function(e){return{type:g,payload:e}},S=function(e){return{type:f,payload:e}}},68:function(e,t,a){"use strict";a.d(t,"m",(function(){return n})),a.d(t,"n",(function(){return i})),a.d(t,"k",(function(){return o})),a.d(t,"j",(function(){return s})),a.d(t,"l",(function(){return l})),a.d(t,"f",(function(){return c})),a.d(t,"g",(function(){return u})),a.d(t,"h",(function(){return d})),a.d(t,"i",(function(){return p})),a.d(t,"a",(function(){return m})),a.d(t,"b",(function(){return h})),a.d(t,"c",(function(){return g})),a.d(t,"d",(function(){return f})),a.d(t,"e",(function(){return v}));var r=a(27);function n(){return function(e,t){return new Promise((function(a,r){e(b());var n=JSON.parse(JSON.stringify(t().productCanvasReducer)),i=[];if(0===n.product_details.is_variable_decoration){var o=n.active_product_side,s=n.product_sides[o];i=s.decoration_settings[s.active_deco_area].print_profiles,Promise.all(i.map((function(e,t){return n.all_print_profiles.filter((function(t){return t.id===e.id})).length&&(e.thumbnail=n.all_print_profiles.filter((function(t){return t.id===e.id}))[0].thumbnail,e.description=n.all_print_profiles.filter((function(t){return t.id===e.id}))[0].description),e}))).then((function(){e(A(i)),a()}))}else i=n.all_print_profiles,e(A(i)),a()}))}}function i(){return function(e,t){return new Promise((function(a,r){e(y());var n=JSON.parse(JSON.stringify(t().productCanvasReducer)),i=n.active_product_side,o=n.product_sides[i],s=0;s=0===n.product_details.is_variable_decoration?o.decoration_settings[o.active_deco_area].activePrintProfile:o.activePrintProfile,e(_(s)),a()}))}}function o(){return function(e,t){return new Promise((function(a,n){e(E());var i=JSON.parse(JSON.stringify(t().productCanvasReducer)).all_print_profiles,o=[];Promise.all(i.map((function(e){return r.g(e.id).then((function(t){t.id=e.id,t.feature_data.filter((function(e){return"gallery"===e.slug}))[0].is_selected=0,o.push(t)}))}))).then((function(){e(S(o)),a(o)}))}))}}function s(){return function(e,t){return new Promise((function(t,a){e(C()),r.k().then((function(a){e(x(a.data)),t()}))}))}}function l(){return function(e){return new Promise((function(t,a){e(w()),t()}))}}var c="SET_PRINT_PROFILE_LIST_BEGIN",u="SET_PRINT_PROFILE_LIST_SUCCESS",d="SET_SELECTED_PRINT_PROFILE_BEGIN",p="SET_SELECTED_PRINT_PROFILE_SUCCESS",m="SAVE_PRINT_PROFILE_DATA_BEGIN",h="SAVE_PRINT_PROFILE_DATA_SUCCESS",g="FETCH_PRINT_PROFILE_LIST_BEGIN",f="FETCH_PRINT_PROFILE_LIST_SUCCESS",v="RESET_PRINT_PROFILE_DATA",b=function(){return{type:c}},A=function(e){return{type:u,payload:e}},y=function(){return{type:d}},_=function(e){return{type:p,payload:e}},E=function(){return{type:m}},S=function(e){return{type:h,payload:e}},C=function(){return{type:g}},x=function(e){return{type:f,payload:e}},w=function(){return{type:v}}},69:function(e,t,a){"use strict";a.d(t,"f",(function(){return o})),a.d(t,"h",(function(){return s})),a.d(t,"g",(function(){return l})),a.d(t,"a",(function(){return c})),a.d(t,"c",(function(){return u})),a.d(t,"b",(function(){return d})),a.d(t,"e",(function(){return p})),a.d(t,"d",(function(){return m}));var r=a(7),n=a(12),i=a(60);function o(e,t){return function(a){return t||a(h()),function(e){return i.get(n.a.base_path+"products",{params:e},{headers:{"Content-Type":"application/json"}})}(e).then((function(e){return t&&(t.push.apply(t,Object(r.a)(e.data.data)),e.data.data=Object(r.a)(t)),a(g(e.data)),e.data})).catch((function(e){return a(f(e))}))}}function s(e){return function(t){t(v(e))}}function l(e){return function(t){t(b(e))}}var c="FETCH_PRODUCT_BEGIN",u="FETCH_PRODUCT_SUCCESS",d="FETCH_PRODUCT_FAILURE",p="SET_SEL_PRODUCT_CATEGORY",m="SAVE_PRODUCT_DETAILS",h=function(){return{type:c}},g=function(e){return{type:u,payload:e}},f=function(e){return{type:d,payload:{error:e}}},v=function(e){return{type:p,payload:e}},b=function(e){return{type:m,payload:e}}},70:function(e,t,a){"use strict";a.d(t,"p",(function(){return s})),a.d(t,"r",(function(){return l})),a.d(t,"s",(function(){return c})),a.d(t,"t",(function(){return u})),a.d(t,"q",(function(){return d})),a.d(t,"a",(function(){return p})),a.d(t,"i",(function(){return m})),a.d(t,"h",(function(){return h})),a.d(t,"e",(function(){return g})),a.d(t,"g",(function(){return f})),a.d(t,"f",(function(){return v})),a.d(t,"j",(function(){return b})),a.d(t,"l",(function(){return A})),a.d(t,"k",(function(){return y})),a.d(t,"n",(function(){return _})),a.d(t,"o",(function(){return E})),a.d(t,"m",(function(){return S})),a.d(t,"b",(function(){return C})),a.d(t,"d",(function(){return x})),a.d(t,"c",(function(){return w}));var r=a(7),n=a(4),i=a(12),o=a(60);function s(e,t,a){return function(s){if(t.length){if(t.length){for(var l=!1,c=0;c<t.length;c++){if(t[c].printProfileId===e.print_profile_id){l=!1;break}l=!0}(l||1===parseInt(e.cat_page))&&s(k())}}else s(k());return function(e){var t=Object(n.a)({},e);return e.category&&delete t.print_profile_id,o.get(i.a.base_path+"shapes",{params:t},{headers:{"Content-Type":"application/json"}})}(e).then((function(n){var i=[],o=!1,l="",c={printProfileId:"",shapeData:"",shapeLoadStatus:!1,pageNo:1};if(t.length){i=Object(r.a)(t),o=!1;for(var u=0;u<i.length;u++){if(i[u].printProfileId===e.print_profile_id){o=!0,l=u;break}o=!1}var d,p;if(o)if(e.name||e.category||a)if(a||1===parseInt(e.cat_page))i[l].pageNo=1,i[l].shapeLoadStatus=!1,i[l].shapeData.records=n.data.records,i[l].shapeData.total_records=n.data.total_records,i[l].shapeData.data=Object(r.a)(n.data.data);else i[l].pageNo=e.cat_page,i[l].shapeLoadStatus=!1,i[l].shapeData.records=n.data.records,i[l].shapeData.total_records=n.data.total_records,(d=i[l].shapeData.data).push.apply(d,Object(r.a)(n.data.data));else if(i[l].shapeLoadStatus||1!==parseInt(e.cat_page))i[l].pageNo=e.cat_page,i[l].shapeLoadStatus=!0,i[l].shapeData.records=n.data.records,i[l].shapeData.total_records=n.data.total_records,(p=i[l].shapeData.data).push.apply(p,Object(r.a)(n.data.data));else i[l].pageNo=e.cat_page,i[l].shapeLoadStatus=!0,i[l].shapeData.records=n.data.records,i[l].shapeData.total_records=n.data.total_records,i[l].shapeData.data=Object(r.a)(n.data.data);else c.printProfileId=e.print_profile_id,c.shapeData=n.data,c.shapeLoadStatus=!0,i.push(c)}else c.printProfileId=e.print_profile_id,c.shapeData=n.data,c.shapeLoadStatus=!0,i.push(c);return s(I(i)),n.data})).catch((function(e){return s(N(e))}))}}function l(e,t){return function(a){return a(O()),function(e){return o.get(i.a.base_path+"categories/shapes/print-profiles/"+e)}(e).then((function(n){var i;i=Object(r.a)(n.data.data);for(var o=[],s=0;s<i.length;s++)if(0===i[s].is_disable){for(var l={name:i[s].name,value:i[s].id,isDefault:i[s].is_default,order:i[s].order,subCat:[]},c=0;c<i[s].subs.length;c++)0===i[s].subs[c].is_disable&&l.subCat.push({name:i[s].subs[c].name,value:i[s].subs[c].id,isDefault:i[s].subs[c].is_default,order:i[s].subs[c].order});o.push(l)}var u=[],d=!1,p={printProfileId:"",catData:"",catLoadStatus:!1,primeCatStatus:!0};if(t.length){u=Object(r.a)(t),d=!1;for(var m=0;m<u.length;m++){if(u[m].printProfileId===e){d=!0;break}d=!1}d||(p.printProfileId=e,p.catData=[].concat(o),p.catLoadStatus=!0,u.push(p))}else p.printProfileId=e,p.catData=[].concat(o),p.catLoadStatus=!0,u.push(p);return a(P(u)),n.data})).catch((function(e){return a(D(e))}))}}function c(){return function(e){return e(R()),o.get(i.a.base_path+"tags/shapes").then((function(t){return e(T(t.data)),t.data})).catch((function(t){return e(L(t))}))}}function u(e){return function(t){t(M(e))}}function d(e,t,a){return function(s){if(t.length){if(t.length){for(var l=!1,c=0;c<t.length;c++){if(t[c].printProfileId===e.print_profile_id){l=!1;break}l=!0}(l||1===parseInt(e.page))&&s(B())}}else s(B());return function(e){var t=Object(n.a)({},e);return e.category&&delete t.print_profile_id,o.get(i.a.base_path+"shapes",{params:t},{headers:{"Content-Type":"application/json"}})}(e).then((function(n){var i=[],o=!1,l="",c={printProfileId:"",shapeData:"",shapeLoadStatus:!1,pageNo:1},u=JSON.parse(e.category)[0];if(t.length){i=Object(r.a)(t),o=!1;for(var d=0;d<i.length;d++){if(i[d].catId===u){o=!0,l=d;break}o=!1}var p,m;if(o)if(e.name||e.category||a)if(a||1===parseInt(e.page))i[l].pageNo=1,i[l].shapeLoadStatus=!1,i[l].shapeData.records=n.data.records,i[l].shapeData.total_records=n.data.total_records,i[l].shapeData.data=Object(r.a)(n.data.data);else i[l].pageNo=e.page,i[l].shapeLoadStatus=!1,i[l].shapeData.records=n.data.records,i[l].shapeData.total_records=n.data.total_records,(p=i[l].shapeData.data).push.apply(p,Object(r.a)(n.data.data));else if(i[l].shapeLoadStatus||1!==parseInt(e.page))i[l].pageNo=e.page,i[l].shapeLoadStatus=!0,i[l].shapeData.records=n.data.records,i[l].shapeData.total_records=n.data.total_records,(m=i[l].shapeData.data).push.apply(m,Object(r.a)(n.data.data));else i[l].pageNo=e.page,i[l].shapeLoadStatus=!0,i[l].shapeData.records=n.data.records,i[l].shapeData.total_records=n.data.total_records,i[l].shapeData.data=Object(r.a)(n.data.data);else c.catId=u,c.shapeData=n.data,c.shapeLoadStatus=!0,i.push(c)}else c.catId=u,c.shapeData=n.data,c.shapeLoadStatus=!0,i.push(c);return s(j(i)),n.data})).catch((function(e){return s(F(e))}))}}var p="FETCH_SHAPE_BEGIN",m="FETCH_SHAPE_SUCCESS",h="FETCH_SHAPE_FAILURE",g="FETCH_SHAPE_CATEGORY_BEGIN",f="FETCH_SHAPE_CATEGORY_SUCCESS",v="FETCH_SHAPE_CATEGORY_FAILURE",b="FETCH_SHAPE_TAG_BEGIN",A="FETCH_SHAPE_TAG_SUCCESS",y="FETCH_SHAPE_TAG_FAILURE",_="SHAPE_FILTER_APPLIED",E="UPDATE_SHAPE_PAGE_NO",S="SET_SHAPE_PRIMERY_CATEGORY_STATUS",C="FETCH_SHAPE_BY_CAT_BEGIN",x="FETCH_SHAPE_BY_CAT_SUCCESS",w="FETCH_SHAPE_BY_CAT_FAILURE",k=function(){return{type:p}},I=function(e){return{type:m,payload:e}},N=function(e){return{type:h,payload:{error:e}}},O=function(){return{type:g}},P=function(e){return{type:f,payload:e}},D=function(e){return{type:v,payload:{catError:e}}},R=function(){return{type:b}},T=function(e){return{type:A,payload:e}},L=function(e){return{type:y,payload:{tagError:e}}},M=function(e){return{type:S,payload:e}},B=function(){return{type:C}},j=function(e){return{type:x,payload:e}},F=function(e){return{type:w,payload:{error:e}}}},71:function(e,t,a){"use strict";var r=a(10),n=a(11),i=a(12),o=a(60),s=function(){function e(){Object(r.a)(this,e)}return Object(n.a)(e,null,[{key:"getProductDetails",value:function(e,t,a){return a?o.get(i.a.base_path+"product-details/"+e+"?variant_id="+t+"&option_id="+a+"&type=tool",{headers:{"Content-Type":"application/json"}}):o.get(i.a.base_path+"product-details/"+e+"?variant_id="+t+"&type=tool",{headers:{"Content-Type":"application/json"}})}},{key:"getProductPopupDetails",value:function(e){return o.get(i.a.base_path+"products/"+e+"?type=tool",{headers:{"Content-Type":"application/json"}})}},{key:"getProductColors",value:function(e){return o.get(i.a.base_path+"color-variants/"+e+"?type=tool",{headers:{"Content-Type":"application/json"}})}},{key:"saveCustomerDesign",value:function(e){return o({method:"post",url:i.a.base_path+"user-design",data:e,headers:{"Content-Type":"multipart/form-data"}})}},{key:"getDecoratedTemplate",value:function(e){return o.get(i.a.base_path+"templates/"+e,{headers:{"Content-Type":"application/json"}}).then((function(e){return e.data})).catch((function(e){return{status:0,error:e}}))}},{key:"getPredecoDetails",value:function(e){return o.get(e,{headers:{"Content-Type":"application/json"}}).then((function(e){return e.data})).catch((function(e){return{status:0,error:e}}))}},{key:"getSizeAttributeDetails",value:function(e,t,a){return o.get(i.a.base_path+"variant-combination-details/"+e+"/"+t+"?attribute="+a+"&price=1",{headers:{"Content-Type":"application/json"}}).then((function(e){return e})).catch((function(e){return{status:0,error:e}}))}},{key:"getProductPriceRuleData",value:function(e){return o.get(i.a.base_path+"attribute-prices/"+e,{headers:{"Content-Type":"application/json"}})}}]),e}();t.a=s},760:function(e,t){},762:function(e,t){},77:function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"b",(function(){return i})),a.d(t,"d",(function(){return s})),a.d(t,"c",(function(){return l}));var r=a(12);function n(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:512,r=window.atob(e),n=[],i=0;i<r.length;i+=a){for(var o=r.slice(i,i+a),s=new Array(o.length),l=0;l<o.length;l++)s[l]=o.charCodeAt(l);var c=new Uint8Array(s);n.push(c)}var u=new Blob(n,{type:t});return u}function i(e,t,a,r){var n=new Image;n.onload=function(){var e=document.createElement("canvas");e.width=n.width,e.height=n.height,e.getContext("2d").drawImage(n,0,0);var a=e.toDataURL(t);r(a,t)},n.setAttribute("crossOrigin","anonymous"),n.src=e,n.crossOrigin="anonymous"}function o(e){var t="";try{t=function(e,t){for(var a,r="",n=0;n<e.length;++n){a=e[n];for(var i=0;i<t.length;++i)a=String.fromCharCode(a.charCodeAt(0)^t.charCodeAt(i));r+=a}return r}(t=atob(e),"*P&46X-(5u)>#12i06N%")}catch(a){console.log(a)}return t}function s(){return o(r.a.license_Key).split("|")[0]}function l(){return o(r.a.license_Key).split("|").pop()}},793:function(e,t){},794:function(e,t){},8:function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"b",(function(){return i}));var r=a(36),n={HTML:"http://www.w3.org/1999/xhtml",MATH:"http://www.w3.org/1998/Math/MathML",SE:"http://imprintnext.com",SVG:"http://www.w3.org/2000/svg",XLINK:"http://www.w3.org/1999/xlink",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"},i=function(){var e={};return Object.entries(n).forEach((function(t){var a=Object(r.a)(t,2),n=a[0],i=a[1];e[i]=n.toLowerCase()})),e}},83:function(e,t,a){"use strict";a.d(t,"i",(function(){return i})),a.d(t,"j",(function(){return o})),a.d(t,"h",(function(){return s})),a.d(t,"c",(function(){return l})),a.d(t,"g",(function(){return c})),a.d(t,"f",(function(){return u})),a.d(t,"d",(function(){return d})),a.d(t,"e",(function(){return p})),a.d(t,"a",(function(){return m})),a.d(t,"b",(function(){return h}));var r=a(27),n=a(17);function i(e,t,a,n){return function(i){var o={};return i(g(e)),r.y(t,a,n).then((function(t){return o.sideIndex=e,o.data=t.data,i(v(o)),i(y()),t.data})).catch((function(e){i(b(e))}))}}function o(e,t,a,i,o,s,l,c){return function(u,d){return new Promise((function(p,m){var h={},g="";Promise.all(t.map((function(t,n){if(t instanceof Blob){if(-1===a[n].search("blob:")){var i={data:{url:a[n],file_name:a[n].split("/").pop()}};return h.sideIndex=e,h.data=i,h.blobUrl=a[n],h.uploadedImg=l[n],h.originalImage=c&&c[n]?c[n]:"",g="success",u(v(h)),1}return u(f(e)),r.y(t,o[n],s).then((function(t){return h.sideIndex=e,h.data=t.data,h.blobUrl=a[n],h.uploadedImg=l[n],h.originalImage=c&&c[n]?c[n]:"",g="success",u(v(h)),1})).catch((function(e){g="error",u(b(e))}))}return 1}))).then((function(){u(A({sideIndex:e,allBlobUrls:i}));var t=JSON.parse(JSON.stringify(d()));u(n.Ob(e,t.ImageReducer.sides[e])),p(g)}))}))}}function s(e){return function(t){return t(_(e)),e}}var l="UPLOAD_IMAGE_BEGIN",c="UPLOAD_SINGLE_IMAGE_BEGIN",u="UPLOAD_IMAGE_SUCCESS",d="UPLOAD_IMAGE_FAILURE",p="UPLOAD_IMAGE_FINISH",m="CONVERT_IMAGE_FINISH",h="GET_FACEBOOK_IMAGE_SUCCESS",g=function(e){return{type:c,payload:e}},f=function(e){return{type:l,payload:e}},v=function(e){return{type:u,payload:e}},b=function(e){return{type:d,payload:e}},A=function(e){return{type:p,payload:e}},y=function(){return{type:m}},_=function(e){return{type:h,payload:e}}},849:function(e,t,a){"use strict";a.r(t);var r=a(4),n=a(0),i=a.n(n),o=a(54),s=a.n(o),l=a(97),c=a(24),u=a(403),d=a(59),p={items:[],loading:!1,error:null,catItem:[],catLoading:!1,catError:null,tagItem:[],tagLoading:!1,tagError:null,clipartLoadStatus:!1,categoryLoadStatus:!1,tagLoadStatus:!1,pageNo:1,itemsByCat:[],filteredItemLoading:!1,filteredItemError:null,filteredClipart:[],selectedCatId:""};var m=a(70),h={items:[],loading:!1,error:null,isShapesLoaded:!1,catItem:[],catLoading:!1,catError:null,categoryLoadStatus:!1,tagItem:[],tagLoading:!1,tagError:null,tagLoadStatus:!1,pageNo:1,itemsByCat:[]};var g=a(65),f={items:[],loading:!1,error:null,patternItem:[],patternLoading:!1,patternError:null,catItem:[],catLoading:!1,catError:null,tagItem:[],tagLoading:!1,tagError:null,backColorLoadStatus:!1,backPatternLoadStatus:!1,categoryLoadStatus:!1,tagLoadStatus:!1,backColorPageNo:1,backPatternPageNo:1};var v=a(43),b={items:[],details:[],loading:!1,error:null,isTemplatesLoaded:!1,catItem:[],catLoading:!1,catError:null,categoryLoadStatus:!1,tagItem:[],tagLoading:!1,tagError:null,tagLoadStatus:!1,pageNo:1,templateEditType:0,isTemplateColorEdit:0};var A=a(69),y={products:[],loading:!1,error:null,isProductsLoaded:!1,selProductCategory:null,productDetailsArr:[]};var _=a(48),E={items:[],details:[],loading:!1,error:null,isFontsLoaded:!1,catItem:[],catLoading:!1,catError:null,categoryLoadStatus:!1,tagItem:[],tagLoading:!1,tagError:null,tagLoadStatus:!1,pageNo:1,customFont:[]};var S=a(62),C={cats:[],loading:!1,error:null,saveLoading:!1,template:null,tempCatLoadStatus:!1,allSideElements:[],editTempDetails:null,editTempDesignUrls:[]};var x=a(57),w={items:[],loading:!1,error:null,GalleryLoadStatus:!1,pageNo:1,prevOrders:[],prevOrdersLoading:!1};var k=a(61),I={productPrice:0,setupPrice:0,clipartPrice:0,fontPrice:0,perLetterPrice:0,uploadedImgPrice:0,printPrice:0,screenPrice:0,backgroundPrice:0,printableColPrice:0,sleevePrice:0,addedPrice:0,totalPrice:0,isRequestQuote:!1,tax:0,teamPrice:0,originalProductPrice:0,stickerPrice:0,stitchPrice:0};var N=a(190),O={items:[],details:[],loading:!1,error:null,isFontsLoaded:!1};var P=a(58),D={items:[],colors:[],productDetails:{},loading:!1,error:null,isConfiguratorLoaded:!1,configuratorCartData:{},configuratorSvgCartData:{},configuratorLoadStatus:!1};var R=a(106),T={global_settings_data:[],store_id:1,loading:!1,error:null};var L=a(98),M={default_lang:"",lang_list:[],translation_data:[],is_multilanguage:0,loading:!1,default_lang_obj:null,error:null};var B=a(68),j={selected_print_profile:-1,active_print_profile_list:[],print_profile_data:[],loading:!1,error:null,print_profile_list:[]};var F=a(131),U={colorList:[],loading:!1,error:null};var V=a(36),G=a(17),q={all_print_profiles:[],active_product_side:0,product_details:{},color_attributes:{},product_extra_details:{},price_rule_data:[],product_sides:[],faceData:[],color:[],layer_data:[],quantity:1,totalColorQty:{},customPrintAreaDimension:{width:"0",height:"0"},cartProductImage:[],cartColorPricing:[],loading:!1,error:null,globalColorAttr:"",globalSizeAttr:"",minQty:1,cartProdAttrs:[],prevActivePrintProfile:-1,noPrintMethod:!1,isNameNumber:!1,selectedVarSize:"",storeSizeAttribute:"",isValidStoreSize:!0,licenceAddOns:"",storeType:"",varSizePrice:"",fetchSizeAndQtyResFlag:!0,isTemplateEdit:!1,sideThumbSvg:[],designAreaDimension:{},isDisableOrderOption:!0,objectCropOnStage:[],isColorAttribute:!0,isUsedColExists:!0};var H=a(132),z={items:[],details:[],loading:!1,error:null};var W=a(83),Q={sides:[],loading:!1,error:null,facebookImageList:[]};var J=a(67),Y={stickerPreviewData:{},loading:!1,error:null,selectedSheetOption:"indivisual",sheetInfo:{},rollInfo:{}};var Z=a(85),X={productInfo:{},loading:!1,error:null,templates:[]};var K=Object(l.combineReducers)({clipart:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case d.a:return Object(r.a)({},e,{loading:!0,error:null});case d.f:return Object(r.a)({},e,{loading:!1,clipartLoadStatus:!0,items:t.payload});case d.e:return Object(r.a)({},e,{loading:!1,error:t.payload.error,items:[]});case d.g:return Object(r.a)({},e,{catLoading:!0,catError:null});case d.i:return Object(r.a)({},e,{catLoading:!1,categoryLoadStatus:!0,catItem:t.payload});case d.h:return Object(r.a)({},e,{catLoading:!1,catError:t.payload.catError,catItem:[]});case d.j:return Object(r.a)({},e,{tagLoading:!0,tagError:null});case d.l:return Object(r.a)({},e,{tagLoading:!1,tagLoadStatus:!0,tagItem:t.payload});case d.k:return Object(r.a)({},e,{tagLoading:!1,tagError:t.payload.catError,tagItem:[]});case d.m:return Object(r.a)({},e,{clipartLoadStatus:!1});case d.s:return Object(r.a)({},e,{pageNo:t.payload});case d.q:return Object(r.a)({},e,{catItem:t.payload});case d.b:return Object(r.a)({},e,{loading:!0,error:null});case d.d:return Object(r.a)({},e,{loading:!1,clipartLoadStatus:!0,itemsByCat:t.payload});case d.c:return Object(r.a)({},e,{loading:!1,error:t.payload.error,itemsByCat:[]});case d.n:return Object(r.a)({},e,{filteredItemLoading:!0,filteredItemError:null});case d.p:return Object(r.a)({},e,{filteredItemLoading:!1,clipartLoadStatus:!0,filteredClipart:t.payload});case d.o:return Object(r.a)({},e,{filteredItemLoading:!1,filteredItemError:t.payload.error,filteredClipart:[]});case d.r:return Object(r.a)({},e,{selectedCatId:t.payload});default:return e}},shape:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case m.a:return Object(r.a)({},e,{loading:!0,error:null});case m.i:return Object(r.a)({},e,{loading:!1,isShapesLoaded:!0,items:t.payload});case m.h:return Object(r.a)({},e,{loading:!1,error:t.payload.error,items:[]});case m.e:return Object(r.a)({},e,{catLoading:!0,catError:null});case m.g:return Object(r.a)({},e,{catLoading:!1,categoryLoadStatus:!0,catItem:t.payload});case m.f:return Object(r.a)({},e,{catLoading:!1,catError:t.payload.catError,catItem:[]});case m.j:return Object(r.a)({},e,{tagLoading:!0,tagError:null});case m.l:return Object(r.a)({},e,{tagLoading:!1,tagLoadStatus:!0,tagItem:t.payload});case m.k:return Object(r.a)({},e,{tagLoading:!1,tagError:t.payload.catError,tagItem:[]});case m.n:return Object(r.a)({},e,{isShapesLoaded:!1});case m.o:return Object(r.a)({},e,{pageNo:t.payload});case m.m:return Object(r.a)({},e,{catItem:t.payload});case m.b:return Object(r.a)({},e,{loading:!0,error:null});case m.d:return Object(r.a)({},e,{loading:!1,clipartLoadStatus:!0,itemsByCat:t.payload});case m.c:return Object(r.a)({},e,{loading:!1,error:t.payload.error,itemsByCat:[]});default:return e}},background:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case g.b:return Object(r.a)({},e,{loading:!0,error:null});case g.d:return Object(r.a)({},e,{loading:!1,backColorLoadStatus:!0,items:t.payload});case g.c:return Object(r.a)({},e,{loading:!1,error:t.payload.error,items:[]});case g.k:return Object(r.a)({},e,{patternLoading:!0,patternError:null});case g.m:return Object(r.a)({},e,{patternLoading:!1,backPatternLoadStatus:!0,patternItem:t.payload});case g.l:return Object(r.a)({},e,{patternLoading:!1,patternError:t.payload.error,patternItem:[]});case g.h:return Object(r.a)({},e,{catLoading:!0,catError:null});case g.j:return Object(r.a)({},e,{catLoading:!1,categoryLoadStatus:!0,catItem:t.payload});case g.i:return Object(r.a)({},e,{catLoading:!1,catError:t.payload.catError,catItem:[]});case g.e:return Object(r.a)({},e,{tagLoading:!0,tagError:null});case g.g:return Object(r.a)({},e,{tagLoading:!1,tagLoadStatus:!0,tagItem:t.payload});case g.f:return Object(r.a)({},e,{tagLoading:!1,tagError:t.payload.catError,tagItem:[]});case g.a:return Object(r.a)({},e,{backColorLoadStatus:!1,backPatternLoadStatus:!1});case g.o:return Object(r.a)({},e,{backColorPageNo:t.payload});case g.p:return Object(r.a)({},e,{backPatternPageNo:t.payload});case g.n:return Object(r.a)({},e,{catItem:t.payload});default:return e}},template:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case v.a:return Object(r.a)({},e,{loading:!0,error:null});case v.f:return Object(r.a)({},e,{loading:!1,isTemplatesLoaded:!0,items:t.payload});case v.e:return Object(r.a)({},e,{loading:!1,error:t.payload.error,item:[]});case v.b:return Object(r.a)({},e,{loading:!1,error:null});case v.d:return Object(r.a)({},e,{loading:!1,error:null,details:t.payload});case v.c:return Object(r.a)({},e,{loading:!1,error:null,details:[]});case v.g:return Object(r.a)({},e,{catLoading:!0,catError:null});case v.i:return Object(r.a)({},e,{catLoading:!1,categoryLoadStatus:!0,catItem:t.payload});case v.h:return Object(r.a)({},e,{catLoading:!1,catError:t.payload.catError,catItem:[]});case v.j:return Object(r.a)({},e,{tagLoading:!0,tagError:null});case v.l:return Object(r.a)({},e,{tagLoading:!1,tagLoadStatus:!0,tagItem:t.payload});case v.k:return Object(r.a)({},e,{tagLoading:!1,tagError:t.payload.catError,tagItem:[]});case v.p:return Object(r.a)({},e,{isTemplatesLoaded:!1});case v.q:return Object(r.a)({},e,{pageNo:t.payload});case v.o:return Object(r.a)({},e,{catItem:t.payload});case v.n:return Object(r.a)({},e,{templateEditType:t.payload});case v.m:return Object(r.a)({},e,{isTemplateColorEdit:t.payload});default:return e}},product:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case A.a:return Object(r.a)({},e,{loading:!0,error:null});case A.c:return Object(r.a)({},e,{loading:!1,products:t.payload,isProductsLoaded:!0});case A.b:return Object(r.a)({},e,{loading:!1,error:t.payload.error,products:[]});case A.e:return Object(r.a)({},e,{selProductCategory:t.payload});case A.d:return Object(r.a)({},e,{productDetailsArr:t.payload});default:return e}},fonts:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case _.a:return Object(r.a)({},e,{loading:!0,error:null});case _.c:return Object(r.a)({},e,{loading:!1,isFontsLoaded:!0,items:t.payload});case _.b:return Object(r.a)({},e,{loading:!1,error:t.payload.error,item:[]});case _.d:return Object(r.a)({},e,{catLoading:!0,catError:null});case _.f:return Object(r.a)({},e,{catLoading:!1,categoryLoadStatus:!0,catItem:t.payload});case _.e:return Object(r.a)({},e,{catLoading:!1,catError:t.payload.catError,catItem:[]});case _.g:return Object(r.a)({},e,{tagLoading:!0,tagError:null});case _.i:return Object(r.a)({},e,{tagLoading:!1,tagLoadStatus:!0,tagItem:t.payload});case _.h:return Object(r.a)({},e,{tagLoading:!1,tagError:t.payload.catError,tagItem:[]});case _.j:return Object(r.a)({},e,{isFontsLoaded:!1});case _.m:return Object(r.a)({},e,{pageNo:t.payload});case _.l:return Object(r.a)({},e,{catItem:t.payload});case _.k:return Object(r.a)({},e,{customFont:t.payload});default:return e}},saveTemplate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case S.g:return Object(r.a)({},e,{loading:!0,error:null});case S.i:return Object(r.a)({},e,{loading:!1,tempCatLoadStatus:!0,cats:t.payload});case S.h:return Object(r.a)({},e,{cats:[],loading:!1,error:null});case S.a:return Object(r.a)({},e,{saveLoading:!0,error:null});case S.c:return Object(r.a)({},e,{saveLoading:!1,template:t.payload});case S.b:return Object(r.a)({},e,{saveLoading:!1,error:null});case S.d:return Object(r.a)({},e,{allSideElements:t.payload});case S.f:return Object(r.a)({},e,{editTempDetails:t.payload});case S.e:return Object(r.a)({},e,{editTempDesignUrls:t.payload});default:return e}},pricingReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case k.a:var a=Number(t.payload.productPrice)+Number(t.payload.addedPrice)+Number(t.payload.setupPrice)+Number(t.payload.clipartPrice)+Number(t.payload.fontPrice)+Number(t.payload.perLetterPrice)+Number(t.payload.uploadedImgPrice)+Number(t.payload.printPrice)+Number(t.payload.screenPrice)+Number(t.payload.backgroundPrice)+Number(t.payload.printableColPrice)+Number(t.payload.sleevePrice)+Number(t.payload.tax)+Number(t.payload.teamPrice)+Number(t.payload.stickerPrice)+Number(t.payload.stitchPrice);return Object(r.a)({},e,{tax:Number(t.payload.tax).toFixed(2),productPrice:Number(t.payload.productPrice).toFixed(2),setupPrice:Number(t.payload.setupPrice).toFixed(2),clipartPrice:Number(t.payload.clipartPrice).toFixed(2),fontPrice:Number(t.payload.fontPrice).toFixed(2),perLetterPrice:Number(t.payload.perLetterPrice).toFixed(2),uploadedImgPrice:Number(t.payload.uploadedImgPrice).toFixed(2),printPrice:Number(t.payload.printPrice).toFixed(2),screenPrice:Number(t.payload.screenPrice).toFixed(2),backgroundPrice:Number(t.payload.backgroundPrice).toFixed(2),printableColPrice:Number(t.payload.printableColPrice).toFixed(2),sleevePrice:Number(t.payload.sleevePrice).toFixed(2),isRequestQuote:t.payload.isRequestQuote,addedPrice:Number(t.payload.addedPrice).toFixed(2),totalPrice:Number(a).toFixed(2),teamPrice:Number(t.payload.teamPrice).toFixed(2),originalProductPrice:Number(t.payload.originalProductPrice).toFixed(2),stickerPrice:Number(t.payload.stickerPrice).toFixed(2),stitchPrice:Number(t.payload.stitchPrice).toFixed(2)});default:return e}},globalSettingReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case R.a:return Object(r.a)({},e,{loading:!0,error:null});case R.c:return Object(r.a)({},e,{global_settings_data:t.payload,loading:!1,error:null});case R.b:return Object(r.a)({},e,{global_settings_data:[],loading:!1,error:t.payload.error});case R.d:return Object(r.a)({},e,{store_id:t.payload});default:return e}},languageReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case L.c:return Object(r.a)({},e,{loading:!0,error:null});case L.e:return Object(r.a)({},e,{loading:!1,default_lang:t.payload.def_lang?t.payload.def_lang:t.payload.lang_list.length?t.payload.lang_list[0].name:"",default_lang_obj:t.payload.def_lang_obj?t.payload.def_lang_obj:t.payload.lang_list.length?t.payload.lang_list[0]:null,lang_list:t.payload.lang_list,translation_data:t.payload.lang_data,is_multilanguage:t.payload.is_multi_lang});case L.d:return Object(r.a)({},e,{loading:!1,default_lang:"english",default_lang_obj:{name:"English"},error:t.payload.error,lang_list:[{name:"English"}],translation_data:[],is_multilanguage:0});case L.a:return Object(r.a)({},e,{loading:!0,error:null});case L.b:return Object(r.a)({},e,{loading:!1,default_lang:t.payload.name,default_lang_obj:t.payload,error:null});default:return e}},printProfileReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case B.f:return Object(r.a)({},e,{loading:!0,error:null});case B.g:return Object(r.a)({},e,{loading:!1,active_print_profile_list:t.payload});case B.h:return Object(r.a)({},e,{loading:!0,error:null});case B.i:return Object(r.a)({},e,{loading:!1,selected_print_profile:t.payload});case B.a:return Object(r.a)({},e,{loading:!0,error:null});case B.b:return Object(r.a)({},e,{loading:!1,print_profile_data:t.payload});case B.c:return Object(r.a)({},e,{loading:!0,error:null});case B.d:return Object(r.a)({},e,{loading:!1,print_profile_list:t.payload});case B.e:return Object(r.a)({},e,{selected_print_profile:-1,active_print_profile_list:[],print_profile_data:[],loading:!1,error:null,print_profile_list:[]});default:return e}},colorPaletteReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case F.a:return Object(r.a)({},e,{loading:!0,error:null});case F.c:return Object(r.a)({},e,{colorList:t.payload,loading:!1,error:null});case F.b:return Object(r.a)({},e,{loading:!1,error:t.payload.error});default:return e}},productCanvasReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case G.E:return Object(r.a)({},e,{loading:!0,product_details:t.payload});case G.a:var a=e.product_sides;return e.product_details.is_variable_decoration&&t.payload.images.length>0&&(a[0].image.thumbnail=t.payload.images[0].thumbnail,a[0].image.src=t.payload.images[0].src,a[0].name="Side 1"),Object(r.a)({},e,{product_extra_details:t.payload,product_sides:a});case G.k:return Object(r.a)({},e,{loading:!0,color_attributes:t.payload});case G.G:return Object(r.a)({},e,{error:null});case G.I:return Object(r.a)({},e,{loading:!1,product_sides:t.payload.sides,all_print_profiles:t.payload.all_print_profiles});case G.H:return Object(r.a)({},e,{loading:!1,error:t.payload.error});case G.T:return Object(r.a)({},e,{loading:!0,error:null});case G.U:return Object(r.a)({},e,{loading:!1,active_product_side:t.payload});case G.P:return Object(r.a)({},e,{loading:!0,error:null});case G.S:return Object(r.a)({},e,{loading:!1,product_sides:t.payload});case G.Q:return Object(r.a)({},e,{loading:!0,error:null});case G.R:return Object(r.a)({},e,{loading:!1,product_sides:t.payload});case G.o:return Object(r.a)({},e,{loading:!0,error:null});case G.p:return Object(r.a)({},e,{loading:!1,faceData:t.payload});case G.C:return Object(r.a)({},e,{error:null});case G.D:return Object(r.a)({},e,{color:t.payload});case G.r:return Object(r.a)({},e,{globalColorAttr:t.payload});case G.n:return Object(r.a)({},e,{engraveSides:t.payload});case G.i:return Object(r.a)({},e,{cartColorPricing:t.payload});case G.Y:var n=e;return n.product_extra_details.variant_id=t.payload,Object(r.a)({},e,{product_extra_details:n.product_extra_details});case G.v:return Object(r.a)({},e,{layer_data:t.payload});case G.A:return Object(r.a)({},e,{quantity:t.payload});case G.g:return Object(r.a)({},e,{totalColorQty:t.payload});case G.f:return Object(r.a)({},e,{cartProductImage:t.payload});case G.X:var i=e.faceData;return i[t.payload.side].svg=t.payload.data,Object(r.a)({},e,{faceData:i});case G.e:return Object(r.a)({},e,{all_print_profiles:[],active_product_side:0,product_details:{},color_attributes:{},product_extra_details:{},price_rule_data:[],product_sides:[],faceData:[],color:[],layer_data:[],quantity:1,totalColorQty:{},customPrintAreaDimension:{width:"0",height:"0"},cartProductImage:[],cartColorPricing:[],loading:!1,error:null,globalColorAttr:"",minQty:1,isNameNumber:!1,cartProdAttrs:[],fetchSizeAndQtyResFlag:!0,globalSizeAttr:"",designAreaDimension:{},objectCropOnStage:[]});case G.h:return Object(r.a)({},e,{customPrintAreaDimension:t.payload});case G.V:var o=JSON.parse(JSON.stringify(e.customPrintAreaDimension));return Object.entries(t.payload).forEach((function(e){var t=Object(V.a)(e,2),a=t[0],r=t[1];o[a]=r})),Object(r.a)({},e,{customPrintAreaDimension:o});case G.b:var s=e.product_sides,l=JSON.parse(JSON.stringify(s[s.length-1]));return l.name="Side "+Number(s.length+1),s.push(l),Object(r.a)({},e,{product_sides:s});case G.x:return Object(r.a)({},e,{minQty:t.payload});case G.W:return Object(r.a)({},e,{product_sides:t.payload});case G.B:return Object(r.a)({},e,{prevActivePrintProfile:t.payload});case G.j:return Object(r.a)({},e,{cartProdAttrs:t.payload});case G.y:return Object(r.a)({},e,{noPrintMethod:t.payload});case G.d:return Object(r.a)({},e,{product_sides:t.payload});case G.J:return Object(r.a)({},e,{selectedVarSize:t.payload});case G.L:return Object(r.a)({},e,{storeSizeAttribute:t.payload});case G.F:return Object(r.a)({},e,{price_rule_data:t.payload});case G.c:return Object(r.a)({},e,{isValidStoreSize:t.payload});case G.w:return Object(r.a)({},e,{licenceAddOns:t.payload});case G.M:return Object(r.a)({},e,{storeType:t.payload});case G.O:return Object(r.a)({},e,{varSizePrice:t.payload});case G.q:return Object(r.a)({},e,{fetchSizeAndQtyResFlag:t.payload});case G.s:return Object(r.a)({},e,{globalSizeAttr:t.payload});case G.u:return Object(r.a)({},e,{isTemplateEdit:t.payload});case G.K:return Object(r.a)({},e,{sideThumbSvg:t.payload});case G.m:return Object(r.a)({},e,{designAreaDimension:t.payload});case G.z:return Object(r.a)({},e,{isDisableOrderOption:t.payload});case G.l:return Object(r.a)({},e,{objectCropOnStage:t.payload});case G.t:return Object(r.a)({},e,{isColorAttribute:t.payload});case G.N:return Object(r.a)({},e,{isUsedColExists:t.payload});default:return e}},customerReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case H.a:return Object(r.a)({},e,{loading:!0,error:null});case H.c:case H.b:return Object(r.a)({},e,{loading:!1,items:t.payload});default:return e}},gallery:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case x.a:return Object(r.a)({},e,{loading:!0,error:null});case x.c:return Object(r.a)({},e,{loading:!1,GalleryLoadStatus:!0,items:t.payload});case x.b:return Object(r.a)({},e,{loading:!1,error:t.payload.error,items:[]});case x.h:return Object(r.a)({},e,{pageNo:t.payload});case x.g:return Object(r.a)({},e,{GalleryLoadStatus:!1});case x.d:return Object(r.a)({},e,{prevOrdersLoading:!0,error:null});case x.f:return Object(r.a)({},e,{prevOrdersLoading:!1,prevOrders:t.payload});case x.e:return Object(r.a)({},e,{prevOrdersLoading:!1,error:t.payload.error,prevOrders:[]});default:return e}},graphicFonts:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case N.a:return Object(r.a)({},e,{loading:!0,error:null});case N.c:return Object(r.a)({},e,{loading:!1,isFontsLoaded:!0,items:t.payload});case N.b:return Object(r.a)({},e,{loading:!1,error:t.payload.error,item:[]});default:return e}},ImageReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Q,t=arguments.length>1?arguments[1]:void 0,a=[],n=[],i=[],o=-1;switch(t.type){case W.g:case W.c:return void 0===(a=e.sides)[t.payload]&&(a[t.payload]=[]),Object(r.a)({},e,{loading:!0,sides:a,error:null});case W.f:a=e.sides;var s="";return s=t.payload.data.data.original_file_url?t.payload.data.data.original_file_url:t.payload.originalImage,void 0===a[t.payload.sideIndex]&&(a[t.payload.sideIndex]=[]),a[t.payload.sideIndex].push({blobUrl:t.payload.blobUrl,imgUrl:t.payload.data.data.url,uploadedImg:t.payload.uploadedImg,originalFileUrl:s}),Object(r.a)({},e,{sides:a});case W.d:return Object(r.a)({},e);case W.e:return a=e.sides,i=a[t.payload.sideIndex],n=[],t.payload.allBlobUrls.forEach((function(e){-1!==(o=i.findIndex((function(t){return t.blobUrl===e})))&&n.push(i[o])})),a[t.payload.sideIndex]=n,Object(r.a)({},e,{sides:a,loading:!1});case W.a:return Object(r.a)({},e,{loading:!1});case W.b:return Object(r.a)({},e,{facebookImageList:t.payload,loading:!1});default:return e}},ConfiguratorDesignData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case P.d:return Object(r.a)({},e,{loading:!0,error:null});case P.f:return Object(r.a)({},e,{loading:!1,isConfiguratorLoaded:!0,items:t.payload});case P.e:return Object(r.a)({},e,{loading:!1,error:t.payload.error,items:[]});case P.j:return Object(r.a)({},e,{loading:!1,isConfiguratorLoaded:!1,items:[],configuratorCartData:[],configuratorSvgCartData:{},productDetails:{}});case P.k:return Object(r.a)({},e,{configuratorCartData:t.payload});case P.a:return Object(r.a)({},e,{loading:!0,error:null});case P.c:return Object(r.a)({},e,{loading:!1,isConfiguratorLoaded:!0,colors:t.payload});case P.b:return Object(r.a)({},e,{loading:!1,error:t.payload.error,colors:[]});case P.g:return Object(r.a)({},e,{loading:!0,error:null});case P.i:return Object(r.a)({},e,{loading:!1,isConfiguratorLoaded:!0,productDetails:t.payload});case P.h:return Object(r.a)({},e,{loading:!1,error:t.payload.error,productDetails:[]});case P.m:return Object(r.a)({},e,{configuratorSvgCartData:t.payload});case P.l:return Object(r.a)({},e,{configuratorLoadStatus:t.payload});default:return e}},StickerReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case J.a:return Object(r.a)({},e,{stickerPreviewData:t.payload,loading:!1,error:null});case J.e:return Object(r.a)({},e,{stickerSettings:t.payload,loading:!1,error:null});case J.b:return Object(r.a)({},e,{previewImg:t.payload,loading:!1,error:null});case J.c:return Object(r.a)({},e,{printDimensions:t.payload,loading:!1,error:null});case J.g:return Object(r.a)({},e,{loading:!1,error:null,selectedSheetOption:t.payload});case J.f:return Object(r.a)({},e,{loading:!1,error:null,sheetInfo:t.payload});case J.d:return Object(r.a)({},e,{loading:!1,error:null,rollInfo:t.payload});default:return e}},productBasedTemplate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Z.a:return Object(r.a)({},e,{loading:!0,error:null});case Z.c:return Object(r.a)({},e,{loading:!1,productInfo:t.payload});case Z.b:return Object(r.a)({},e,{loading:!1,error:t.payload.error,productInfo:{}});case Z.d:return Object(r.a)({},e,{loading:!0,error:null});case Z.f:return Object(r.a)({},e,{loading:!1,templates:t.payload});case Z.e:return Object(r.a)({},e,{loading:!1,error:t.payload.error,templates:[]});default:return e}}}),$=(a(451),a(23)),ee=a(7),te=a(10),ae=a(11),re=a(16),ne=a(15),ie=a(188),oe=a(45),se=a(9),le=a.n(se),ce=a(20),ue=a(13),de=a(859),pe=a(861),me=a(19),he=a.n(me),ge=function(e){return e.language&&e.pricingData.totalPrice?e.language&&e.isTemplate?i.a.createElement(n.Fragment,null,i.a.createElement("div",{className:"dt-elements dt-cart"},i.a.createElement("div",{className:"cartBtns-group"+(e.settings.advance_settings.is_hide_price_section&&!e.isOrderOptionsShow?" hide-price":"")},i.a.createElement("div",{className:"cartBtns-col"+(e.settings.advance_settings.is_hide_price_section&&!e.isOrderOptionsShow?" hidden":"")},i.a.createElement("div",{className:"cart-price align-items-center"},c())),i.a.createElement("div",{className:"cartBtns-col",onClick:function(){return e.saveTemplate(!0)}},i.a.createElement("div",{className:"btn btn-success d-flex align-items-center justify-content-center"},e.isTemplateEdit?e.language.template.updateTemplate:e.language.cart.saveTemplate))))):e.language&&e.isQuot&&!e.isTemplate?i.a.createElement(n.Fragment,null,i.a.createElement("div",{className:"dt-elements dt-cart"},i.a.createElement("div",{className:"cartBtns-group"+(e.settings.advance_settings.is_hide_price_section&&!e.isOrderOptionsShow?" hide-price":"")},i.a.createElement("div",{className:"cartBtns-col"+(e.settings.advance_settings.is_hide_price_section&&!e.isOrderOptionsShow?" hidden":"")},i.a.createElement("div",{className:"cart-price align-items-center"},c())),i.a.createElement("div",{className:"cartBtns-col"},i.a.createElement("button",{type:"button",className:"btn btn-success w-100",disabled:e.imgUploadStat||e.isArtworkDesignSaveProcessing,onClick:function(){return e.captureQuotDesign()}},e.language.profile.saveDesign))))):i.a.createElement("div",{className:"dt-elements dt-cart"+(""!==e.splitScreenMobile?" dt-pop-none":"")},i.a.createElement("div",{className:"cartBtns-group d-none d-lg-flex d-xl-flex"+(e.settings.advance_settings.is_hide_price_section&&!e.isOrderOptionsShow||e.isEnableRequestQuote?" hide-price":"")},i.a.createElement("div",{className:"cartBtns-col"+(e.settings.advance_settings.is_hide_price_section&&!e.isOrderOptionsShow||e.isEnableRequestQuote?" hidden":"")},i.a.createElement("div",{className:"cart-price align-items-center"},e.isOrderOptionsShow&&i.a.createElement("div",{className:"cart-icon"},i.a.createElement("i",{className:"nxi nxi-cart"})),!e.isMobileView&&c())),i.a.createElement("div",{className:e.isEnableCartBtn?"d-none":"cartBtns-col"},i.a.createElement("button",{type:"button",className:"btn btn-success w-100"+(e.isDisableOrderOption?" disabled":""),disabled:e.imgUploadStat||e.isDisableOrderOption||e.cropElementStatus,onClick:function(){return e.addToCartClick()}},e.language.cart.orderOption)),i.a.createElement("div",{className:e.isEnableCartBtn&&!e.isEnableRequestQuote?"cartBtns-col":"d-none"},i.a.createElement("button",{type:"button",className:"btn btn-success w-100"+(e.checkoutPreloader?" disabled":""),onClick:function(){return e.proceedTocheckout()},disabled:!e.captureStatus||e.imgUploadStat||e.isUploadError||!!e.termConditions.is_enabled&&!e.termConditions.is_default_status||0===Number(e.pricingData.totalPrice)||e.checkoutPreloader},e.language.cart.addToCart)),i.a.createElement("div",{className:e.isEnableRequestQuote&&e.isEnableCartBtn?"cartBtns-col request-quote-btn w-100":"d-none"},i.a.createElement("button",{type:"button",disabled:e.imgUploadStat||e.isUploadError||0===Number(e.pricingData.totalPrice),className:"btn btn-success w-100 h-100",onClick:function(){return e.checkUserAuthStatus()}},"Request a quote"))),i.a.createElement("div",{className:"cartBtns-group-flex d-flex d-sm-flex d-md-flex d-lg-none d-xl-none"},i.a.createElement("div",{className:"cartBtns-group logo-wrap"},i.a.createElement("div",{className:"cartBtns-col d-flex align-items-center"+(e.isEnableCartBtn?" d-none":"")},i.a.createElement("button",{type:"button",className:"btn btn-action",onClick:function(){return e.handleProfileMobile(!0)}},i.a.createElement("i",{className:"nf nf-menu"}))),i.a.createElement("div",{className:"cartBtns-col"+(e.isEnableCartBtn?"":" d-none")},i.a.createElement("button",{type:"button",className:"btn btn-action",onClick:function(){return e.onChangeOrderOption(!1)}},i.a.createElement("i",{className:"nf nf-left-arrow"})))),i.a.createElement("div",{className:"cartBtns-group"},i.a.createElement("div",{className:"cartBtns-col d-flex align-items-center"+(e.settings.advance_settings.is_hide_price_section&&!e.isOrderOptionsShow||e.isEnableRequestQuote?" hidden":"")},e.isMobileView&&c()),i.a.createElement("div",{className:e.isEnableCartBtn?"d-none":"cartBtns-col",onClick:function(){return e.addToCartClick()}},i.a.createElement("div",{className:"btn btn-success"},i.a.createElement("div",{className:"cart-icon"},i.a.createElement("i",{className:"nxi nxi-cart"})))),i.a.createElement("div",{className:e.isEnableCartBtn&&!e.isEnableRequestQuote?"cartBtns-col":"d-none"},i.a.createElement("button",{type:"button",className:"btn btn-success",onClick:function(){return e.proceedTocheckout()},disabled:!e.captureStatus||e.imgUploadStat||e.isUploadError||!!e.termConditions.is_enabled&&!e.termConditions.is_default_status||0===Number(e.pricingData.totalPrice)},i.a.createElement("div",{className:"cart-text"},e.language.cart.addToCart))),i.a.createElement("div",{className:e.isEnableRequestQuote&&e.isEnableCartBtn?"cartBtns-col w-100":"d-none"},i.a.createElement("button",{type:"button",disabled:e.imgUploadStat||e.isUploadError||0===Number(e.pricingData.totalPrice),className:"btn btn-success w-100 h-100",onClick:function(){return e.proceedToReqestQuote()}},"Request a quote"))))):i.a.createElement("div",{className:"dt-elements dt-cart"},i.a.createElement("div",{className:"cartBtns-group d-none d-lg-flex d-xl-flex"},i.a.createElement("div",{className:"cartBtns-col"},i.a.createElement("div",{className:"cart-price"},i.a.createElement("div",{className:"titleGroup",style:{marginTop:"7px"}},i.a.createElement("div",{className:"titleGroup-title"},i.a.createElement(he.a,{height:20,width:80})),i.a.createElement("div",{className:"titleGroup-link"},i.a.createElement(he.a,{height:8,width:120}))))),i.a.createElement("div",{className:"cartBtns-col"},i.a.createElement("button",{type:"button",className:"btn btn-light w-100"},i.a.createElement(he.a,{height:12,width:90})))));function t(t){return t=isNaN(t)?"0.00":t,(t=isFinite(t)?t:"0.00").toString().replace(".",e.settings.currency.separator)}function a(t,a){a||(a=1);var r=0;return t&&a&&(r=Number(t/a)),r.toFixed(2).replace(".",e.settings.currency.separator)}function r(){return(Number(e.pricingData.productPrice)+Number(e.pricingData.addedPrice)+Number(e.pricingData.tax)).toFixed(2)}function o(){return(Number(e.pricingData.originalProductPrice)+Number(e.pricingData.addedPrice)+Number(e.pricingData.tax)).toFixed(2)}function s(){return(Number(e.pricingData.totalPrice)-(Number(e.pricingData.productPrice)+Number(e.pricingData.addedPrice)+Number(e.pricingData.tax))).toFixed(2)}function l(){return e.pricingData.totalPrice}function c(){return i.a.createElement(n.Fragment,null,e.settings.advance_settings.price_segregation&&i.a.createElement(de.a,{className:"cart-popover"+(e.isOrderOptionsShow&&e.isMobileView?" mobile":""),trigger:"legacy",placement:"top",target:"pricingDetails"},i.a.createElement(pe.a,null,i.a.createElement("div",{className:"listView"},i.a.createElement("div",{className:"listView-wrap"},i.a.createElement("div",{className:"listView-elements"},i.a.createElement("div",{className:"text-options border-bottom-0"},i.a.createElement("div",{className:"text-options-left"},e.language.cart.productPrice),i.a.createElement("div",{className:"text-options-right"},u(t(Number(o()/Number(e.totalQty)).toFixed(2)))))),Number(s())>0&&i.a.createElement("div",{className:"listView-elements"},i.a.createElement("div",{className:"text-options border-bottom-0"},i.a.createElement("div",{className:"text-options-left"},e.language.cart.decorationPrice),i.a.createElement("div",{className:"text-options-right"},u(t(Number(s()/Number(e.totalQty)).toFixed(2)))))),Number(o())-Number(r())!==0&&i.a.createElement("div",{className:"listView-elements"},i.a.createElement("div",{className:"text-options"},i.a.createElement("div",{className:"text-options-left text-success"},e.language.cart.discount),i.a.createElement("div",{className:"text-options-right text-success"},"-",u(t(Number((Number(o())-Number(r()))/Number(e.totalQty)).toFixed(2)))))),e.totalQty>1&&i.a.createElement("div",{className:"listView-elements"},i.a.createElement("div",{className:"text-options"},i.a.createElement("div",{className:"text-options-left"},e.language.cart.pricePerPiece),i.a.createElement("div",{className:"text-options-right"},u(a(l(),e.totalQty))))))))),i.a.createElement("div",{className:"titleGroup"},i.a.createElement("div",{className:e.totalQty>1?"titleGroup-title":"largerFont"},(!e.totalQty||e.totalQty<=1)&&u(t(l())),e.totalQty>1&&i.a.createElement("span",null,u(a(l(),e.totalQty))," ",e.language.cart.each),e.settings.advance_settings.price_segregation&&i.a.createElement("i",{id:"pricingDetails",style:{marginLeft:"5px"},className:"nxi nxi-info cursor-pointer"+(Number(s())>0||Number(o())-Number(r())!==0||e.totalQty>1?"":" d-none")})),e.totalQty>1&&i.a.createElement("div",{className:"titleGroup-title mb-0"},u(t(l()))," / ",e.totalQty," ",e.language.cart.pieces)))}function u(t){if(e.settings&&e.settings.currency){var a=e.settings.currency.value,r=e.settings.currency.post_fix;if(e.currency&&e.conversionUnit)t=(e.conversionUnit*t).toFixed(2),r=e.currency,a=e.currencyList.find((function(t){if(t.code==e.currency)return t})).symbol;return e.settings.currency.is_postfix_symbol?""!==r.trim()?r+" "+t+a:t+a:""!==r.trim()?a+t+" "+r:a+t}}},fe=a(860),ve=a(6),be=a(878),Ae=a(857),ye=a(858),_e=function(e){Object(re.a)(a,e);var t=Object(ne.a)(a);function a(e){var r;return Object(te.a)(this,a),(r=t.call(this,e)).state={},r.stickerPreviewRef=i.a.createRef(),r}return Object(ae.a)(a,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return i.a.createElement(n.Fragment,null,i.a.createElement(be.a,{id:"StickerPreviewPop",isOpen:this.props.isPreviewModalOpen,toggle:this.props.closeStickerPreviewModal,centered:!0,className:"stickerPreviewModal",modalClassName:"custom",size:"lg"},i.a.createElement(Ae.a,null,i.a.createElement("div",{className:"imageWrap"},i.a.createElement("figure",{className:"imageWrap-box"},i.a.createElement("div",{ref:this.stickerPreviewRef,id:"stickerPreview"})))),i.a.createElement(ye.a,null,i.a.createElement("div",{className:"sheet-preview-footer"},i.a.createElement("button",{type:"button",className:"btn btn-success",onClick:this.props.closeStickerPreviewModal},this.props.language.sticker.done)))))}}]),a}(n.Component),Ee=function(e){return i.a.createElement(n.Fragment,null,i.a.createElement("main",{className:"sheet"},i.a.createElement("div",{className:"sheet-inner scrollbar"},e.stickerSheetList&&e.stickerSheetList.length&&e.isSheetLoaded&&!e.noSheetEnabled?i.a.createElement("div",{className:"form-row"},e.stickerSheetList.slice().map((function(t,a){return i.a.createElement(n.Fragment,{key:a},t.stickerQtyPerSheet&&t.stickerQtyPerSheet>0?i.a.createElement("div",{key:a,id:a,className:t.stickerQtyPerSheet>0?"col-md-4":"hidden"},i.a.createElement("div",{className:"sticker-wrapper-box"},i.a.createElement("div",{className:"sheet-size"}," ",t.name+" ("+t.width.toFixed(2)+"x"+t.height.toFixed(2)+") "," inches"),i.a.createElement("div",{className:"sheet-template"},i.a.createElement("div",{className:"sticker-number"},function(t){if(t.stickerQtyPerSheet)return i.a.createElement(n.Fragment,null,Object(ee.a)(Array(t.stickerQtyPerSheet)).slice(0,600).map((function(a,r){return i.a.createElement("div",{key:r,style:{border:"1px solid #000",backgroundColor:"#fff",display:"flex",margin:"0 1px 1px 0",width:t.stickerBoxWidth,justifyContent:"center",alignItems:"center",height:t.stickerBoxHeight}},i.a.createElement("img",{src:e.uploadedImageUrl,width:t.stickerBoxWidth,height:t.stickerBoxWidth,className:"resizeImage"}))})))}(t)),i.a.createElement("div",{className:"preview-wrapper"},i.a.createElement("button",{className:"btn btn-sm btn-dark",onClick:function(){return e.openStickerPreviewModal(t)}},"Preview"))),i.a.createElement("div",{className:"sheet-number"},t.stickerQtyPerSheet," ",e.language.sticker.stickerPerSheet),i.a.createElement("div",{className:"sheet-price"},"at $",t.price,".00 ",e.language.sticker.perSheet),i.a.createElement("div",{className:"sheet-quantity"}," ",e.language.sticker.sheetQuantity),i.a.createElement("div",{className:"sheet-input"},i.a.createElement("input",{type:"text",className:"form-control form-control-sm",value:t.quantity,onChange:function(t){return e.updateStickerSheetPrice(t,a)},pattern:"[0-9]*"})))):i.a.createElement(n.Fragment,null))}))):e.noSheetEnabled?i.a.createElement(n.Fragment,null,i.a.createElement("div",{className:"alert alert-warning small-txt tip"},i.a.createElement("i",{className:"alert-icon"}),i.a.createElement("span",{className:"alert-txt"},"The sheet is not available for the selected sticker dimension."))):i.a.createElement("div",{className:"form-row"},[1,2,3,4,5].map((function(e){return i.a.createElement("div",{className:"col-md-4",key:e},i.a.createElement("div",{className:"sticker-wrapper-box",key:e},i.a.createElement(he.a,{height:90,width:140})))}))))))},Se=function(e){return i.a.createElement(n.Fragment,null,function(){if(e.rollList)return i.a.createElement(n.Fragment,null,i.a.createElement("main",{className:"roll"},i.a.createElement("article",null,e.rollList.map((function(t,a){return i.a.createElement("section",{className:"form-row mb-3",key:t.id},i.a.createElement("div",{className:"col-12 mb-1 text-sm"},t.name),t.options.map((function(t,r){return i.a.createElement("div",{className:"col-lg-3",key:t.id},i.a.createElement("div",{className:"wound-template"+(t.active?" active":""),onClick:function(n){return e.selectedRoll(n,a,r,t.id)}},i.a.createElement("figure",null,i.a.createElement("img",{src:t.file_name}))))})))}))),i.a.createElement("section",{className:"row"},i.a.createElement("div",{className:"col-md-4"},i.a.createElement("label",{htmlFor:"exampleFormControlSelect1",className:"text-sm mb-1"},e.language.sticker.stickerQuantity),i.a.createElement("select",{className:"form-control",id:"exampleFormControlSelect1",value:e.rollQuantity,onChange:function(t){return e.updateRollQuantity(t,"")}},i.a.createElement("option",{value:"250"},"250"),i.a.createElement("option",{value:"300"},"300"),i.a.createElement("option",{value:"400"},"400"),i.a.createElement("option",{value:"500"},"500"),i.a.createElement("option",{value:"1000"},"1000"))))))}())},Ce=a(77),xe=a(8),we=function(e){Object(re.a)(a,e);var t=Object(ne.a)(a);function a(e){var r;return Object(te.a)(this,a),(r=t.call(this,e)).loadDafaultSheet=function(){var e=r.props.licenceAddOns.includes("sticker"),t=r.props.printProfileData[0];if(t&&t.sticker&&t.sticker.is_sticker_enabled&&e){if(t.sticker.sheet&&t.sticker.sheet.option_list){var a=[];a=r.props.stickerReducerData.sheetInfo&&r.props.stickerReducerData.sheetInfo.sheetList&&r.props.stickerReducerData.sheetInfo.sheetList.length>0?r.props.stickerReducerData.sheetInfo.sheetList:t.sticker.sheet.option_list.filter((function(e){return e.is_selected})),r.setState({stickerSheetList:a},(function(){r.getStickerImageUrl()}))}if(r.props.stickerReducerData.rollInfo&&r.props.stickerReducerData.rollInfo.rollList&&r.props.stickerReducerData.rollInfo.rollList.length>0)r.setState({stickerRollList:r.props.stickerReducerData.rollInfo.rollList,rollQuantity:r.state.rollQuantity});else if(t.sticker.roll&&t.sticker.roll.is_selected){for(var n=t.sticker.roll.option_list,i={},o=[],s=0;s<n.length;s++){for(var l=0;l<n[s].options.length;l++)s===l?(n[0].options[0].active=!0,i=n[0].options[0]):n[s].options[l].active=!1;o=n[s].options.filter((function(e){return 1===e.is_selected})),n[s].options=o}r.setState({stickerRollList:n},(function(){r.props.dispatch(ve.R({rollList:n,selectedRoll:i,rollQuantity:r.state.rollQuantity}))}))}}},r.openStickerPreviewModal=function(e){r.setState({isPreviewModalOpen:!0},(function(){r.isPreviewEnable=!0,r.calculateStickerSize(e),r.props.stickerPreviewStatus(!0)}))},r.loadMoresheet=function(){r.setState({sheetLimit:r.state.sheetLimit+3})},r.updateRollQuantity=function(e,t){r.setState({rollQuantity:e.target.value},(function(){r.props.dispatch(ve.R({rollList:r.props.stickerReducer.rollInfo.rollList,selectedRoll:r.props.stickerReducer.rollInfo.selectedRoll,rollQuantity:r.state.rollQuantity}))})),r.props.updateStickerQuantity(e,"")},r.getCropedImage=function(){var e=0,t=setInterval((function(){if(e++,r.props.stickerReducerData.sheetInfo.status||e>8){clearInterval(t);var a=new Image;a.onload=function(){var e=document.createElement("canvas");e.width=a.width,e.height=a.height;var t=e.getContext("2d");t.drawImage(a,0,0),r.cropCanvas(e,t)},a.src=r.props.stickerReducerData.sheetInfo.designbase64}}),50)},r.getStickerImageUrl=function(){var e=r.props.stickerReducer.stickerPreviewData.selectedCutLine;r.props.stickerReducerData&&r.props.stickerReducerData.stickerPreviewData&&"Select"===r.props.stickerReducerData.stickerPreviewData.selectedMaterial&&"Small"!==e&&"Large"!==e&&"Medium"!==e&&"Rectangle"!==e&&"Round corner"!==e?r.uploadImageToServer(r.props.stickerReducerData.sheetInfo.designbase64):r.getCropedImage()},r.uploadImageToServer=function(e){if(!r.uploadedImage||""===r.uploadedImageUrl){var t=Object(Ce.a)(e.split(",")[1],"image/png"),a=new File([t],"sticker");r.props.dispatch(ve.hb(r.props.currentSideIndex,a,"png",1)).then(function(){var e=Object(ce.a)(le.a.mark((function e(t){return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:1===t.status&&(r.uploadedImage=!0,r.uploadedImageUrl=t.data.url,r.getNumberOfStickerPerSheet());case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){r.props.showNotification("danger",r.props.language.sticker.uploadError)}))}},r.applyStickerToCanvas=function(){var e,t=document.createElement("svg");t.setAttribute("xmlns",xe.a.SVG),t.setAttribute("xmlns:xlink",xe.a.XLINK),t.setAttribute("id","stickerSheetPreview"),t.setAttribute("width",r.borderWidth),t.setAttribute("height",r.borderHeight),t.setAttribute("viewBox","0 0 600 600"),t.setAttribute("style","border:1px solid black"),r.marginTranslate=0;for(var a=0;a<r.dataset.length;a++){e=document.createElement("g"),0===a?e.setAttribute("transform","translate(".concat(r.margin,",")+r.margin+")"):1===a?(r.marginTranslate=r.space+r.margin+r.imageHeight+r.marginTranslate,e.setAttribute("transform","translate(".concat(r.margin,",")+r.marginTranslate+")")):(r.marginTranslate=r.space+r.imageHeight+r.marginTranslate,e.setAttribute("transform","translate(".concat(r.margin,",")+r.marginTranslate+")"));for(var n=0;n<r.dataset[a].repeat;n++){var i=document.createElement("image");i.setAttribute("x",n*(r.space+r.imageWidth)),i.setAttribute("xlink:href",r.dataset[a].image),i.setAttribute("width",r.imageWidth),i.setAttribute("height",r.imageHeight),i.setAttribute("opacity",1),e.appendChild(i)}t.append(e)}setTimeout((function(){if(r.child.stickerPreviewRef){var e=t.outerHTML,a=(new DOMParser).parseFromString(e,"image/svg+xml");r.child.stickerPreviewRef.current.appendChild(a.getElementsByTagName("svg")[0])}}),500)},r.closeStickerPreviewModal=function(){r.setState({isPreviewModalOpen:!1})},r.cropCanvas=function(e,t){for(var a={left:0,right:e.width,top:0,bottom:e.height},n=[],i=[],o=t.getImageData(0,0,e.width,e.height),s=0;s<e.width;s++){i[s]=i[s]||!1;for(var l=0;l<e.height;l++){n[l]=n[l]||!1;var c=l*(4*e.width)+4*s,u=[o.data[c],o.data[c+1],o.data[c+2],o.data[c+3]],d=u[0],p=u[1],m=u[2],h=u[3];0===Math.max(d,p,m,h)||(i[s]=!0,n[l]=!0)}}for(var g=0;g<n.length;g++)if(n[g]){a.top=g?g-1:g;break}for(var f=n.length;f--;)if(n[f]){a.bottom=f<e.height?f+1:f;break}for(var v=0;v<i.length;v++)if(i[v]){a.left=v?v-1:v;break}for(var b=i.length;b--;)if(i[b]){a.right=b<e.width?b+1:b;break}var A=a.right-a.left,y=a.bottom-a.top,_=t.getImageData(a.left,a.top,A,y);e.width=A,e.height=y,t.putImageData(_,0,0),r.cropImage=e.toDataURL(),r.uploadImageToServer(r.cropImage)},r.calculateBorderDimension=function(e){var t=600,a=600,n=Number(e.width)/Number(e.height);n>1?a=t/n:t=a*n,r.borderWidth=t,r.borderHeight=a,r.inchToPx=parseInt(t/e.width),""===e.margin&&(e.margin=0),""===e.spacing&&(e.spacing=0),r.margin=parseInt(Number(e.margin)*r.inchToPx),r.space=parseInt(Number(e.spacing)*r.inchToPx)},r.calculateStickerSize=function(e){r.calculateBorderDimension(e);var t,a=Number(r.props.stickerReducerData.printDimensions.width),n=Number(r.props.stickerReducerData.printDimensions.height);t=r.props.productDetails.print_unit?r.props.productDetails.print_unit:r.props.globalSettings.unit,r.imageWidth=Number(r.inchToPx*r.unitconversionInchVal(Number(a),t)),r.imageHeight=Number(r.inchToPx*r.unitconversionInchVal(Number(n),t)),r.stickerSize.width=parseInt(r.props.stickerReducerData.printDimensions.width),r.stickerSize.height=parseInt(r.props.stickerReducerData.printDimensions.height);var i,o,s,l;r.stickerLeftInPerRow=0,r.stickerLeftInPerColumn=0,i=parseInt(r.borderWidth-2*r.margin),s=Number(r.imageWidth+r.space),r.stickerLeftInPerRow=parseInt((i+r.space)/s),o=parseInt(r.borderHeight-2*r.margin),l=Number(r.imageHeight+r.space),r.stickerLeftInPerColumn=parseInt((o+r.space)/l),Math.sign(r.stickerLeftInPerColumn)>0&&Math.sign(r.stickerLeftInPerRow)>0||(r.stickerLeftInPerColumn=0,r.stickerLeftInPerRow=0),r.stickerQuantity=r.stickerLeftInPerColumn*r.stickerLeftInPerRow,r.setState({totalSticker:r.stickerQuantity}),r.dataset=[];for(var c=0;c<r.stickerLeftInPerColumn;c++)r.dataset.push({image:r.uploadedImageUrl,repeat:r.stickerLeftInPerRow});if(r.isPreviewEnable)r.applyStickerToCanvas();else{r.sheetList[r.previewIndex].quantity&&r.sheetList[r.previewIndex].quantity>0?0===r.stickerQuantity&&(r.sheetList[r.previewIndex].quantity=0):0===r.previewIndex?r.sheetList[r.previewIndex].quantity=1:r.sheetList[r.previewIndex].quantity=0;var u={};0===r.stickerQuantity?(u.width=20,u.height=20):u=r.calculateStickerBoxDimension(r.stickerQuantity),r.sheetList[r.previewIndex].stickerQtyPerSheet=r.stickerQuantity,r.sheetList[r.previewIndex].stickerBoxWidth=parseInt(u.width),r.sheetList[r.previewIndex].stickerBoxHeight=parseInt(u.height)}},r.calculateStickerBoxDimension=function(e){if(0===e)return{width:20,height:20};for(var t,a,r,n=0,i=0;e>i;)n+=1,i=Math.pow(n,2);for(t=a=n,r=i;r-e>=t&&(t===a?a-=1:t=a,!((r=t*a)<e)););return{width:Number((120/t).toFixed()),height:Number((85/a).toFixed())}},r.selectedStickerOption=function(e){void 0!==e.target.value&&""!==e.target.value&&r.setState({stickerOption:e.target.value},(function(){r.updateStickerPrice()}))},r.selectedRoll=function(e,t,a,n){for(var i=r.state.stickerRollList,o={},s=0;s<i.length;s++)for(var l=0;l<i[s].options.length;l++)s==t&&i[s].options[l].id===n?(i[s].options[l].active=!0,o.id=i[s].id,o.name=i[s].name,o.option=i[s].options[l]):i[s].options[l].active=!1;r.setState({stickerRollList:i},(function(){r.props.dispatch(ve.R({rollList:i,selectedRoll:o,rollQuantity:r.state.rollQuantity}))}))},r.getNumberOfStickerPerSheet=function(){r.sheetList=r.state.stickerSheetList;for(var e=0;e<r.state.stickerSheetList.length;e++)r.previewIndex=e,r.calculateStickerSize(r.state.stickerSheetList[e]);0===r.sheetList.filter((function(e){return e.stickerQtyPerSheet>0})).length?r.setState({noSheetEnabled:!0}):r.setState({noSheetEnabled:!1}),r.setState({stickerSheetList:r.sheetList,isSheetLoaded:!0},(function(){r.props.dispatch(ve.T({designbase64:r.props.stickerReducerData.sheetInfo.designbase64,imageUrl:r.uploadedImageUrl,sheetList:r.sheetList}))})),r.setState({stickerOption:r.props.stickerReducerData.selectedSheetOption},(function(){r.updateStickerPrice()}))},r.updateStickerPrice=function(){r.props.updateStickerQuantity(0,"resetPrice"),"roll"===r.state.stickerOption?r.props.updateStickerQuantity(r.state.rollQuantity,"addPrice"):"sheet"===r.state.stickerOption?setTimeout((function(){r.props.updateStickerSheetPrice()}),100):r.props.updateStickerQuantity(1,"addPrice"),r.props.dispatch(ve.U(r.state.stickerOption))},r.state={isPreviewModalOpen:!1,stickerSheetList:[],totalSticker:0,stickerOption:"indivisual",sheetLimit:3,rollQuantity:250,stickerRollList:[],isSheetLoaded:!1,noSheetEnabled:!1},r.openStickerPreviewModal=r.openStickerPreviewModal.bind(Object(ue.a)(r)),r.closeStickerPreviewModal=r.closeStickerPreviewModal.bind(Object(ue.a)(r)),r.selectedStickerOption=r.selectedStickerOption.bind(Object(ue.a)(r)),r.loadMoresheet=r.loadMoresheet.bind(Object(ue.a)(r)),r.updateRollQuantity=r.updateRollQuantity.bind(Object(ue.a)(r)),r.selectedRoll=r.selectedRoll.bind(Object(ue.a)(r)),r.cropImage=null,r.borderWidth=0,r.borderHeight=0,r.margin=0,r.space=0,r.imageWidth=0,r.imageHeight=0,r.dataset=[],r.stickerSize={width:parseInt(r.props.stickerReducerData.printDimensions.width),height:parseInt(r.props.stickerReducerData.printDimensions.height)},r.uploadedImage=!1,r.uploadedImageUrl="",r.inchToPx=0,r.marginTranslate=0,r.stickerLeftInPerColumn=0,r.stickerLeftInPerRow=0,r.isPreviewEnable=!1,r.stickerQuantity=0,r.previewIndex=0,r.sheetList=[],r}return Object(ae.a)(a,[{key:"componentDidMount",value:function(){this.uploadedImage=!1,this.loadDafaultSheet()}},{key:"componentWillUnmount",value:function(){this.props.stickerPreviewStatus(!1)}},{key:"convertToPixel",value:function(e,t){return"cm"===t?(96*e/2.54).toFixed():"m"===t?(3779.5275590551*e).toFixed():"px"===t?e.toFixed():"mm"===t?(3.7795275591*e).toFixed():"ft"===t?(1151.9999999832*e).toFixed():"in"===t?(96*e).toFixed():void 0}},{key:"unitconversionInchVal",value:function(e,t){switch(t.toLowerCase()){case"feet":return Number((12*e).toFixed(2));case"centimeter":return Number((e/2.54).toFixed(2));case"millimeter":return Number((e/25.4).toFixed(2));case"meter":return Number((39.37*e).toFixed(2));default:return e}}},{key:"render",value:function(){var e=this;return i.a.createElement(n.Fragment,null,i.a.createElement("section",{className:"sticker-wrapper"},i.a.createElement("header",{className:"d-flex flex-wrap",onClick:function(t){return e.selectedStickerOption(t)}},i.a.createElement("div",{className:"custom-control custom-radio mr-2"},i.a.createElement("input",{type:"radio",id:"customRadio3",name:"stickerOption",className:"custom-control-input",value:"indivisual",checked:"indivisual"===this.state.stickerOption,readOnly:!0}),i.a.createElement("label",{className:"custom-control-label",htmlFor:"customRadio3"},this.props.language.sticker.individualSticker)),this.state.stickerRollList.length>0&&i.a.createElement("div",{className:"custom-control custom-radio mr-3"},i.a.createElement("input",{type:"radio",id:"customRadio2",name:"stickerOption",className:"custom-control-input",value:"roll",checked:"roll"===this.state.stickerOption,readOnly:!0}),i.a.createElement("label",{className:"custom-control-label",htmlFor:"customRadio2"},this.props.language.sticker.onRoll)),i.a.createElement("div",{className:"custom-control custom-radio mr-3"},i.a.createElement("input",{type:"radio",id:"customRadio1",name:"stickerOption",value:"sheet",className:"custom-control-input",checked:"sheet"===this.state.stickerOption,readOnly:!0}),i.a.createElement("label",{className:"custom-control-label",htmlFor:"customRadio1"},this.props.language.sticker.onSheet))),"sheet"===this.state.stickerOption&&i.a.createElement(Ee,{stickerSheetList:this.props.stickerReducerData.sheetInfo.sheetList,unit:this.props.globalSettings.unit,language:this.props.language,sheetLimit:this.state.sheetLimit,loadMoresheet:this.loadMoresheet,openStickerPreviewModal:this.openStickerPreviewModal,updateStickerSheetPrice:this.props.updateStickerSheetPrice,uploadedImageUrl:this.uploadedImageUrl,isSheetLoaded:this.state.isSheetLoaded,noSheetEnabled:this.state.noSheetEnabled}),"roll"===this.state.stickerOption&&i.a.createElement(Se,{updateRollQuantity:this.updateRollQuantity,rollQuantity:this.state.rollQuantity,selectedRoll:this.selectedRoll,rollList:this.state.stickerRollList,language:this.props.language}),"indivisual"===this.state.stickerOption&&i.a.createElement("main",{className:"sticker"},i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-12"},i.a.createElement("div",{className:"sticker-inner"},i.a.createElement("div",{className:"sticker-left"},i.a.createElement("img",{src:this.props.stickerReducerData.sheetInfo.designbase64,alt:"Sticker image"})),i.a.createElement("div",{className:"sticker-right"},i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-md-2 d-flex align-items-center"},"Size:"),i.a.createElement("div",{className:"col-md-10"},this.stickerSize.width.toFixed(),"x",this.stickerSize.height.toFixed()," (",this.props.scaleUnit,")")),i.a.createElement("div",{className:"row mt-2"},i.a.createElement("div",{className:"col-md-2 d-flex align-items-center"},this.props.language.sticker.quantity,":"),i.a.createElement("div",{className:"col-md-10"},i.a.createElement("input",{type:"text",className:"form-control form-control-sm ml-0",value:this.props.stickerQuantityVal,onChange:function(t){return e.props.updateStickerQuantity(t,"")},pattern:"[0-9]*"}))))))))),i.a.createElement(_e,{language:this.props.language,isPreviewModalOpen:this.state.isPreviewModalOpen,closeStickerPreviewModal:this.closeStickerPreviewModal,ref:function(t){e.child=t}}))}}]),a}(i.a.Component),ke=Object(c.b)((function(e){return{currentSideIndex:e.productCanvasReducer.active_product_side,globalSettings:e.globalSettingReducer.global_settings_data,stickerReducerData:e.StickerReducer,language:e.languageReducer.translation_data.filter((function(t){return t.langCode===e.languageReducer.default_lang}))[0],productCanvasReducer:e.productCanvasReducer,stickerReducer:e.StickerReducer,printProfileData:e.printProfileReducer.print_profile_data,licenceAddOns:e.productCanvasReducer.licenceAddOns,productDetails:e.productCanvasReducer.product_details}}))(we),Ie=function(e){if(e.language){var t=function(t){if(e.settings&&e.settings.currency){var a=e.settings.currency.value,r=e.settings.currency.post_fix;if(e.currency&&e.conversionUnit)t=(e.conversionUnit*t).toFixed(2),r=e.currency,a=e.currencyList.find((function(t){if(t.code==e.currency)return t})).symbol;return e.settings.currency.is_postfix_symbol?""!==r.trim()?r+" "+t+a:t+a:""!==r.trim()?a+t+" "+r:a+t}},a=0,r={},o=[],s=function(){if(e.colorVariants&&e.colorVariants.length>0)return i.a.createElement(n.Fragment,null,0===e.productDetail.is_configurator&&!e.isStickerEnable&&i.a.createElement("div",{className:e.colorVariants&&!e.isColorDivShow&&e.colorVariants.length>0?"btn btn-sm btn-link p-0 addBtn-cart":"d-none",onClick:function(){return e.openChooseColorDiv("","add",-1)}},i.a.createElement("i",{className:"nf nf-plus"})," ",e.language.sides.addAnotherColor))},l=function(e){var t="";return""===e.hex_code&&""===e.file_name&&(t=e.name),i.a.createElement("span",null,t)},c=function(t){return t&&t.colorCode?i.a.createElement("div",{className:"color-btn",style:"#"===t.colorCode[0]?{backgroundColor:t.colorCode}:{backgroundImage:"url("+t.colorCode+")",backgroundSize:"cover"}}):e.globalColorAttribute?i.a.createElement("div",null," ",e.globalColorAttribute," : \xa0"):void 0},u=function(t,a,r){if(e.colorVariants&&e.colorVariants.length>0&&t&&t.colorCode)return i.a.createElement("div",{className:"btn btn-sm btn-link p-0",onClick:function(){e.openChooseColorDiv(a,"change",r)}},e.language.main.change)},d=function(t){return t.inventory&&t.inventory.stock&&void 0!==e.settings.cart.stock&&""!==e.settings.cart.stock.is_displayed&&e.settings.cart.stock.is_displayed&&t.inventory.stock>0?i.a.createElement("div",{className:"stock"},e.language.main.stock,": ",t.inventory.stock):t.inventory&&t.inventory.stock<1&&void 0!==e.settings.cart.stock&&""!==e.settings.cart.stock.is_displayed&&e.settings.cart.stock.is_displayed?i.a.createElement("div",{className:"stock",style:{color:"red"}},e.language.cart.outOfStock):void 0},p=function(t){var a=t.attributes[e.globalSizeAttribute]?t.attributes[e.globalSizeAttribute]:t.attributes[e.globalSizeAttribute.toLowerCase()],r=a&&e.noOfAttributes>1?a:e.language.cart.quantity;return i.a.createElement("div",{className:"size"},r)},m=function e(t){t[Object.keys(t)[0]].forEach((function(t){t.selected&&(t.options?(o.push(t.name),e(t.options)):t.selected&&(o.push(t.name),t.tier_prices&&0!==t.tier_prices.length&&(r=JSON.parse(JSON.stringify(t)))))}))},h=function(a,r,o){return a===o.tier_prices.length-1&&r.quantity-o.quantityVal<=0&&0!==r.percentage?i.a.createElement("div",{key:"apptierrow-"+a,className:"txt-13"},e.language.cart.saving,": \xa0",i.a.createElement("span",{className:"font-weight-bold"},t((o.price-r.price).toFixed(2).replace(".",e.settings.currency.separator))," \xa0"),"(",r.percentage,"%) ",e.language.cart.perQuantity,".",i.a.createElement("br",null),i.a.createElement("span",null,e.language.cart.totalSavings,": \xa0",i.a.createElement("span",{className:"font-weight-bold"},t(((o.price-r.price)*e.totalQty).toFixed(2).replace(".",e.settings.currency.separator))," \xa0"))):a!==o.tier_prices.length-1&&r.quantity-o.quantityVal<=0&&o.tier_prices[a+1].quantity-o.quantityVal>0&&0!==r.percentage?i.a.createElement("div",{key:"apptierrow-"+a,className:"txt-13 border-bottom mb-2 pb-2"},e.language.cart.saving,": \xa0",i.a.createElement("span",{className:"font-weight-bold"},t((o.price-r.price).toFixed(2).replace(".",e.settings.currency.separator))," \xa0"),"(",r.percentage,"%) ",e.language.cart.perQuantity,".",i.a.createElement("br",null),i.a.createElement("span",null,e.language.cart.totalSavings,": \xa0",i.a.createElement("span",{className:"font-weight-bold"},t(((o.price-r.price)*e.totalQty).toFixed(2).replace(".",e.settings.currency.separator))," \xa0"))):i.a.createElement(n.Fragment,null)},g=function(a){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"simple",l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if(!(e.productDetail&&e.productDetail.tier_prices&&void 0!==e.settings.cart.tier_price&&""!==e.settings.cart.tier_price.is_enabled&&e.settings.cart.tier_price.is_enabled)||e.isEnableRequestQuote)return i.a.createElement(n.Fragment,null);if(1===e.productDetail.is_variable_decoration&&e.productDetail.decoration_type&&"banner"===e.productDetail.decoration_type&&e.selectedVarSize instanceof Object&&void 0!==e.selectedVarSize.type&&"custom"===e.selectedVarSize.type)return i.a.createElement(n.Fragment,null);if("simple"===s&&0!==e.productDetail.tier_prices.length){var c={price:e.productDetail.price,quantityVal:a,tier_prices:e.productDetail.tier_prices};return i.a.createElement(n.Fragment,null,i.a.createElement("div",{className:"sentence"===e.settings.cart.tier_price.discount_display?"info-card":"hidden"},i.a.createElement("div",{className:"listView"},i.a.createElement("div",{className:"listView-wrap"},e.productDetail.tier_prices&&e.productDetail.tier_prices.map((function(r,o){return i.a.createElement(n.Fragment,{key:"fragsimprow-"+o},h(o,r,c),i.a.createElement("div",{key:"simprow-"+o,className:r.quantity-a>0?"listView-elements":"hidden"},i.a.createElement("div",{key:"simprow-"+o+"-qty",className:"text-options"},i.a.createElement("div",{className:"number"===e.settings.cart.tier_price.savings_display?"text-options-left":"hidden"},e.language.cart.buy,"  ",i.a.createElement("strong",null,r.quantity-a)," ",e.language.cart.for," ",i.a.createElement("strong",null,t(r.price.toFixed(2).replace(".",e.settings.currency.separator)))," ",e.language.cart.eachAnd," ",i.a.createElement("strong",null,e.language.cart.save," ",t(((e.productDetail.price-r.price)*r.quantity).toFixed(2).replace(".",e.settings.currency.separator))),"."),i.a.createElement("div",{className:"percentage"===e.settings.cart.tier_price.savings_display?"text-options-left":"hidden"},e.language.cart.buy," ",i.a.createElement("strong",null,r.quantity-a)," ",e.language.cart.for," ",i.a.createElement("strong",null,t(r.price.toFixed(2).replace(".",e.settings.currency.separator)))," ",e.language.cart.eachAnd," ",i.a.createElement("strong",null,e.language.cart.save," ",r.percentage,"%"),"."))))}))))),i.a.createElement("div",{className:"table"===e.settings.cart.tier_price.discount_display?"info-card tableView":"hidden"},e.productDetail.tier_prices&&e.productDetail.tier_prices.map((function(e,t){return i.a.createElement(n.Fragment,{key:"fragsimprow-"+t},h(t,e,c))})),i.a.createElement("table",{className:e.productDetail.tier_prices[e.productDetail.tier_prices.length-1].quantity-a>0?"table table-borderless":"hidden"},i.a.createElement("thead",null,i.a.createElement("tr",null,i.a.createElement("th",null,e.language.cart.qty),i.a.createElement("th",null,e.language.cart.unitPrice),i.a.createElement("th",null,e.language.cart.totalPrice),i.a.createElement("th",null,e.language.main.save))),i.a.createElement("tbody",null,e.productDetail.tier_prices&&e.productDetail.tier_prices.map((function(r,n){return i.a.createElement("tr",{key:"simprow-"+n+"-qty",className:r.quantity-a>0?"":"hidden"},i.a.createElement("td",null,r.quantity),i.a.createElement("td",null,t(r.price.toFixed(2).replace(".",e.settings.currency.separator))),i.a.createElement("td",null,t((r.price*r.quantity).toFixed(2).replace(".",e.settings.currency.separator))),i.a.createElement("td",{className:"number"===e.settings.cart.tier_price.savings_display?"":"hidden"},t(((e.productDetail.price-r.price)*r.quantity).toFixed(2).replace(".",e.settings.currency.separator))),i.a.createElement("td",{className:"percentage"===e.settings.cart.tier_price.savings_display?"":"hidden"},r.percentage,"%"))}))))))}if(1===s&&l===e.activeColorName){var u={};if(a.forEach((function(t){Object.keys(t)[0]===e.activeColorName&&(u=t[e.activeColorName][0])})),u.tier_prices&&0!==u.tier_prices.length)return i.a.createElement(n.Fragment,null,i.a.createElement("div",{className:"sentence"===e.settings.cart.tier_price.discount_display?"info-card":"hidden"},i.a.createElement("div",{className:"listView"},i.a.createElement("div",{className:"listView-wrap"},u.tier_prices&&u.tier_prices.map((function(a,r){return i.a.createElement(n.Fragment,{key:"fragsimprow-"+r},h(r,a,u),i.a.createElement("div",{key:"simprow-"+r,className:a.quantity-u.quantityVal>0?"listView-elements":"hidden"},i.a.createElement("div",{key:"simprow-"+r+"-qty",className:"text-options"},i.a.createElement("div",{className:"number"===e.settings.cart.tier_price.savings_display?"text-options-left":"hidden"},e.language.cart.buy," ",i.a.createElement("strong",null,a.quantity-u.quantityVal)," ",e.language.cart.for," ",i.a.createElement("strong",null,t(a.price.toFixed(2).replace(".",e.settings.currency.separator)))," ",e.language.cart.eachAnd," ",i.a.createElement("strong",null,e.language.cart.save," ",t(((u.price-a.price)*a.quantity).toFixed(2).replace(".",e.settings.currency.separator))),"."),i.a.createElement("div",{className:"percentage"===e.settings.cart.tier_price.savings_display?"text-options-left":"hidden"},e.language.cart.buy," ",i.a.createElement("strong",null,a.quantity-u.quantityVal)," ",e.language.cart.for," ",i.a.createElement("strong",null,t(a.price.toFixed(2).replace(".",e.settings.currency.separator)))," ",e.language.cart.eachAnd," ",i.a.createElement("strong",null,e.language.cart.save," ",a.percentage,"%"),"."))))}))))),i.a.createElement("div",{className:"table"===e.settings.cart.tier_price.discount_display?"info-card tableView":"hidden"},u.tier_prices&&u.tier_prices.map((function(e,t){return i.a.createElement(n.Fragment,{key:"fragsimprow-"+t},h(t,e,u))})),i.a.createElement("table",{className:u.tier_prices[u.tier_prices.length-1].quantity-u.quantityVal>0?"table table-borderless":"hidden"},i.a.createElement("thead",null,i.a.createElement("tr",null,i.a.createElement("th",null,e.language.cart.qty),i.a.createElement("th",null,e.language.cart.unitPrice),i.a.createElement("th",null,e.language.cart.totalPrice),i.a.createElement("th",null,e.language.main.save))),i.a.createElement("tbody",null,u.tier_prices&&u.tier_prices.map((function(a,r){return i.a.createElement("tr",{key:"simprow-"+r+"-qty",className:a.quantity-u.quantityVal>0?"":"hidden"},i.a.createElement("td",null,a.quantity),i.a.createElement("td",null,t(a.price.toFixed(2).replace(".",e.settings.currency.separator))),i.a.createElement("td",null,t((a.price*a.quantity).toFixed(2).replace(".",e.settings.currency.separator))),i.a.createElement("td",{className:"percentage"===e.settings.cart.tier_price.savings_display?"":"hidden"},a.percentage,"%"),i.a.createElement("td",{className:"number"===e.settings.cart.tier_price.savings_display?"":"hidden"},t(((u.price-a.price)*a.quantity).toFixed(2).replace(".",e.settings.currency.separator))))}))))))}else if(2===s&&l===e.activeColorName){var d=[],p={};if(a.forEach((function(t){Object.keys(t)[0]===e.activeColorName&&(d=t[e.activeColorName])})),-1!==e.activeSubAttrIndex?p=d[e.activeSubAttrIndex]:d.forEach((function(e){e.quantityVal>0&&(p=e)})),p.tier_prices&&0!==p.tier_prices.length)return i.a.createElement(n.Fragment,null,i.a.createElement("div",{className:"sentence"===e.settings.cart.tier_price.discount_display?"info-card":"hidden"},i.a.createElement("div",{className:"listView test"},i.a.createElement("div",{className:"listView-wrap"},p.tier_prices&&p.tier_prices.map((function(a,r){return i.a.createElement(n.Fragment,{key:"fragsimprow-"+r},h(r,a,p),i.a.createElement("div",{key:"simprow-"+r,className:a.quantity-p.quantityVal>0?"listView-elements":"hidden"},i.a.createElement("div",{key:"simprow-"+r+"-qty",className:"text-options"},i.a.createElement("div",{className:"number"===e.settings.cart.tier_price.savings_display?"text-options-left":"hidden"},e.language.cart.buy," ",i.a.createElement("strong",null,a.quantity-p.quantityVal)," ",e.language.cart.for," ",i.a.createElement("strong",null,t(a.price.toFixed(2).replace(".",e.settings.currency.separator)))," ",e.language.cart.eachAnd," ",i.a.createElement("strong",null,e.language.cart.save," ",t(((p.price-a.price)*a.quantity).toFixed(2).replace(".",e.settings.currency.separator))),"."),i.a.createElement("div",{className:"percentage"===e.settings.cart.tier_price.savings_display?"text-options-left":"hidden"},e.language.cart.buy," ",i.a.createElement("strong",null,a.quantity-p.quantityVal)," ",e.language.cart.for," ",i.a.createElement("strong",null,t(a.price.toFixed(2).replace(".",e.settings.currency.separator)))," ",e.language.cart.eachAnd," ",i.a.createElement("strong",null,e.language.cart.save," ",a.percentage,"%"),"."))))}))))),i.a.createElement("div",{className:"table"===e.settings.cart.tier_price.discount_display?"info-card tableView":"hidden"},p.tier_prices&&p.tier_prices.map((function(e,t){return i.a.createElement(n.Fragment,{key:"fragsimprow-"+t},h(t,e,p))})),i.a.createElement("table",{className:p.tier_prices[p.tier_prices.length-1].quantity-p.quantityVal>0?"table table-borderless":"hidden"},i.a.createElement("thead",null,i.a.createElement("tr",null,i.a.createElement("th",null,e.language.cart.qty),i.a.createElement("th",null,e.language.cart.unitPrice),i.a.createElement("th",null,e.language.cart.totalPrice),i.a.createElement("th",null,e.language.main.save))),i.a.createElement("tbody",null,p.tier_prices&&p.tier_prices.map((function(a,r){return i.a.createElement("tr",{key:"simprow-"+r+"-qty",className:a.quantity-p.quantityVal>0?"":"hidden"},i.a.createElement("td",null,a.quantity),i.a.createElement("td",null,t(a.price.toFixed(2).replace(".",e.settings.currency.separator))),i.a.createElement("td",null,t((a.price*a.quantity).toFixed(2).replace(".",e.settings.currency.separator))),i.a.createElement("td",{className:"percentage"===e.settings.cart.tier_price.savings_display?"":"hidden"},a.percentage,"%"),i.a.createElement("td",{className:"number"===e.settings.cart.tier_price.savings_display?"":"hidden"},t(((p.price-a.price)*a.quantity).toFixed(2).replace(".",e.settings.currency.separator))))}))))))}else if(s>2&&l===e.activeColorName){var g=a.findIndex((function(t){return t.name===e.activeColorName}));if(-1!==g){var f=a[g],v={};if(f.options&&((o=[]).push(f.name),m(f.options),0!==Object.keys(r).length&&(v=JSON.parse(JSON.stringify(r))).tier_prices&&0!==v.tier_prices.length))return i.a.createElement(n.Fragment,null,i.a.createElement("div",{className:"sentence"===e.settings.cart.tier_price.discount_display?"info-card":"hidden"},i.a.createElement("div",{className:"listView"},i.a.createElement("div",{className:"listView-wrap"},v.tier_prices&&v.tier_prices.map((function(a,r){return i.a.createElement(n.Fragment,{key:"fragsimprow-"+r},h(r,a,v),i.a.createElement("div",{key:"simprow-"+r,className:a.quantity-v.quantityVal>0?"listView-elements":"hidden"},i.a.createElement("div",{key:"simprow-"+r+"-qty",className:"text-options"},i.a.createElement("div",{className:"number"===e.settings.cart.tier_price.savings_display?"text-options-left":"hidden"},e.language.cart.buy," ",i.a.createElement("strong",null,a.quantity-v.quantityVal)," ",e.language.cart.for," ",i.a.createElement("strong",null,t(a.price.toFixed(2).replace(".",e.settings.currency.separator)))," ",e.language.cart.eachAnd," ",i.a.createElement("strong",null,e.language.cart.save," ",t(((v.price-a.price)*a.quantity).toFixed(2).replace(".",e.settings.currency.separator))),"."),i.a.createElement("div",{className:"percentage"===e.settings.cart.tier_price.savings_display?"text-options-left":"hidden"},e.language.cart.buy," ",i.a.createElement("strong",null,a.quantity-v.quantityVal)," ",e.language.cart.for," ",i.a.createElement("strong",null,t(a.price.toFixed(2).replace(".",e.settings.currency.separator)))," ",e.language.cart.eachAnd," ",i.a.createElement("strong",null,e.language.cart.save," ",a.percentage,"%"),"."))))}))))),i.a.createElement("div",{className:"table"===e.settings.cart.tier_price.discount_display?"info-card tableView":"hidden"},v.tier_prices&&v.tier_prices.map((function(e,t){return i.a.createElement(n.Fragment,{key:"fragsimprow-"+t},h(t,e,v))})),i.a.createElement("table",{className:v.tier_prices[v.tier_prices.length-1].quantity-v.quantityVal>0?"table table-borderless":"hidden"},i.a.createElement("thead",null,i.a.createElement("tr",null,i.a.createElement("th",null,e.language.cart.qty),i.a.createElement("th",null,e.language.cart.unitPrice),i.a.createElement("th",null,e.language.cart.totalPrice),i.a.createElement("th",null,e.language.main.save))),i.a.createElement("tbody",null,v.tier_prices&&v.tier_prices.map((function(a,r){return i.a.createElement("tr",{key:"simprow-"+r+"-qty",className:a.quantity-v.quantityVal>0?"":"hidden"},i.a.createElement("td",null,a.quantity),i.a.createElement("td",null,t(a.price.toFixed(2).replace(".",e.settings.currency.separator))),i.a.createElement("td",null,t((a.price*a.quantity).toFixed(2).replace(".",e.settings.currency.separator))),i.a.createElement("td",{className:"percentage"===e.settings.cart.tier_price.savings_display?"":"hidden"},a.percentage,"%"),i.a.createElement("td",{className:"number"===e.settings.cart.tier_price.savings_display?"":"hidden"},t(((v.price-a.price)*a.quantity).toFixed(2).replace(".",e.settings.currency.separator))))}))))))}}};return i.a.createElement("div",{className:"dt-elements dt-checkout"},i.a.createElement("div",{className:"checkout-wrapper scrollbar"},i.a.createElement("div",{className:"cart-details"},i.a.createElement("div",{className:"cart-details-title"},i.a.createElement("button",{type:"button",className:"btn btn-action",onClick:function(){return e.onChangeOrderOption(!1)}},i.a.createElement("i",{className:"nf nf-left-arrow"})),i.a.createElement("h2",{className:"pName-title",dangerouslySetInnerHTML:{__html:e.productDetail.product_name}}),1===e.productDetail.is_variable_decoration&&e.selectedVarSize&&"sticker"!==e.productDetail.decoration_type&&i.a.createElement("p",{className:"mb-0 ml-2"},i.a.createElement("small",null,"(",e.selectedVarSize.selSize.name,") ",e.scaleUnit)),1===e.productDetail.is_variable_decoration&&e.selectedVarSize&&"sticker"===e.productDetail.decoration_type&&e.stickerDimension&&i.a.createElement("p",{className:"mb-0"},i.a.createElement("small",null,"(",e.stickerDimension.width," x ",e.stickerDimension.height,") ",e.scaleUnit))),i.a.createElement("div",{className:"productInfo-sidess mt-3"+(e.isCustomerDetailsForm||e.isMobileView?"":" d-none")},i.a.createElement("div",{className:"thumbView"},e.captureImageList.length>0&&i.a.createElement("div",{className:"thumbView-row"},e.captureImageList.map((function(e,t){return i.a.createElement("div",{key:t,className:"thumbView-col"},i.a.createElement("div",{className:"imageWrap"},i.a.createElement("figure",{className:"imageWrap-box",style:{cursor:"default"},id:"preview_"+t},i.a.createElement("img",{src:e.image,alt:"",style:"#"===e.colorCode[0]?{backgroundColor:e.colorCode}:{backgroundImage:"url("+e.colorCode+")",backgroundSize:"cover"}}))))})))||i.a.createElement("div",{className:"thumbView-row"},i.a.createElement("div",{className:"thumbView-col"},i.a.createElement("div",{className:"imageWrap"},i.a.createElement("figure",{className:"imageWrap-box"},i.a.createElement(he.a,{height:66})))),i.a.createElement("div",{className:"thumbView-col"},i.a.createElement("div",{className:"imageWrap"},i.a.createElement("figure",{className:"imageWrap-box"},i.a.createElement(he.a,{height:66})))),i.a.createElement("div",{className:"thumbView-col"},i.a.createElement("div",{className:"imageWrap"},i.a.createElement("figure",{className:"imageWrap-box"},i.a.createElement(he.a,{height:66})))),i.a.createElement("div",{className:"thumbView-col"},i.a.createElement("div",{className:"imageWrap"},i.a.createElement("figure",{className:"imageWrap-box"},i.a.createElement(he.a,{height:66}))))))),e.isCustomerDetailsForm&&i.a.createElement("div",{className:"d-flex justify-content-between border-bottom pb-2 mt-4 mb-3 cart-details-heading"},i.a.createElement("h2",{className:"pName-title"},e.language.cart.details)),0!==e.productDetail.is_variable_decoration?e.noOfAttributes<=2&&0!==e.noOfAttributes?i.a.createElement("div",{className:"scroll-bar-wrap"},!e.isStickerEnable&&i.a.createElement("div",{className:"listView scrollbar"},i.a.createElement("div",{className:"listView-wrap"},e.selectedColorSizeList.map((function(t,a){return Object.keys(e.selectedColorSizeList[a]).map((function(t,r){return i.a.createElement("div",{className:"listView-elements",key:t},i.a.createElement("div",{className:"cart-variant"},(e.selectedColorDetails[t]||e.productAttributes&&e.globalColorAttribute&&e.productAttributes[e.storeColorAttribute])&&i.a.createElement("div",{className:"cart-variant-color"},c(e.selectedColorDetails[t]),i.a.createElement("div",{className:"color-info"},i.a.createElement("div",{className:"lable"},t),u(e.selectedColorDetails[t],t,a))),i.a.createElement("div",{className:"cart-variant-size"},e.selectedColorSizeList[a][t].map((function(r,o){return i.a.createElement("div",{key:"size_"+o,className:"size-input qty"},e.globalSizeAttribute&&i.a.createElement(n.Fragment,null,(r.attributes[e.globalSizeAttribute].includes("*")||r.attributes[e.globalSizeAttribute].includes("X")||r.attributes[e.globalSizeAttribute].includes("x"))&&i.a.createElement("div",{className:"size"},e.language.cart.quantity),!r.attributes[e.globalSizeAttribute].includes("*")&&!r.attributes[e.globalSizeAttribute].includes("X")&&!r.attributes[e.globalSizeAttribute].includes("x")&&p(r)),!e.globalSizeAttribute&&i.a.createElement(n.Fragment,null,p(r)),i.a.createElement("div",{className:t===e.activeColorName&&(e.activeSubAttrIndex===o||-1===e.activeSubAttrIndex&&r.quantityVal>0)?"input active":"input"},i.a.createElement("input",{type:"text",className:"form-control form-control-sm",value:r.quantityVal,onChange:function(n){return e.updateQuantity(n,a,t,r.attributes[e.globalSizeAttribute])},onFocus:function(){return e.changeProductColor(t,e.selectedColorSizeList[a],a,o)},pattern:"[0-9]*",disabled:r.inventory&&r.inventory.stock<1})),d(r))}))),e.selectedColorSizeList.length>1&&a>0&&i.a.createElement("div",{className:"cart-variant-action"},i.a.createElement("div",{className:"btn text-danger btn-sm btn-round",onClick:function(){return e.removeColorItem(t,"")}},i.a.createElement("i",{className:"nxi nxi-remove"})))),g(e.selectedColorSizeList,e.noOfAttributes,t))}))})))),e.isColorDivShow&&e.colorVariants&&i.a.createElement("div",{className:"color-block"},e.colorVariants.map((function(t){return i.a.createElement("div",{className:"color-box",key:t.name,style:{backgroundColor:t.hex_code?t.hex_code:"#ffff"},title:t.name,onClick:function(){return e.loadColorVariant(t)}},l(t))}))),e.colorVariants&&e.colorVariants.length>0&&e.productAttributes&&e.globalColorAttribute&&e.productAttributes[e.storeColorAttribute]&&s(),e.addColorDivShow&&e.colorVariants&&i.a.createElement("div",{className:"color-block"},e.colorVariants.map((function(t){return i.a.createElement("div",{className:"color-box",key:t.name,style:{backgroundColor:t.hex_code?t.hex_code:"#ffff"},title:t.name,onClick:function(){return e.addMoreColorVariants(t,"")}},l(t))})))):e.noOfAttributes>2&&e.multiAttributeList.length?i.a.createElement("div",{className:"scroll-bar-wrap"},i.a.createElement("div",{className:"listView scrollbar"},i.a.createElement("div",{className:"listView-wrap"},e.multiAttributeList.length&&e.multiAttributeList.map((function(t,r){return i.a.createElement("div",{className:"listView-elements",key:t.name+"_"+r},i.a.createElement("div",{className:"cart-variant"},e.isColorAttribute&&i.a.createElement("div",{className:"cart-variant-color"},i.a.createElement("div",{className:""!==t.colorCode?"color-btn":"hidden",style:"#"===t.colorCode[0]?{backgroundColor:t.colorCode}:{backgroundImage:"url("+t.colorCode+")"}}),i.a.createElement("div",{className:""===t.colorCode?"color-btn":"hidden",style:{backgroundColor:"#ffff"}}),i.a.createElement("div",{className:"color-info"},i.a.createElement("div",{className:"lable"},t.name),i.a.createElement("div",{className:e.colorVariants&&e.colorVariants.length>0?"btn btn-sm btn-link p-0":"d-none",onClick:function(){e.openChooseColorDiv(t.name,"change",-1)}},e.language.main.change))),i.a.createElement("div",{className:"cart-variant-size"},function t(r,o,s){if("render"===r&&o.length){var l=!1;o.forEach((function(e,t){e.selected&&(o=o[parseInt(t)],l=!0)})),l||(o=o[0])}return o.options&&Object.keys(o.options).forEach((function(e){o.options[e].forEach((function(e,t){e.selected&&(a=t)}))})),o.options&&Object.keys(o.options).map((function(r){return i.a.createElement(n.Fragment,{key:r},i.a.createElement("div",{className:r.toString().toLowerCase()===e.settings.store.size.toString().toLowerCase()?"size-input hidden":"size-input"},i.a.createElement("div",{className:"size"},r),i.a.createElement("div",{className:"input"},i.a.createElement("select",{value:a,onChange:function(t){return e.resetAttributeView(t)},className:"custom-select custom-select-sm"},o.options[r].map((function(e,t){return i.a.createElement("option",{key:t,value:t,name:r+"-"+s},e.name)}))))),o.options[r][0].price&&i.a.createElement("div",{className:"size-input qty"},i.a.createElement("div",{className:"size"},e.language.main.quantity),o.options[r].map((function(t,a){return i.a.createElement(n.Fragment,{key:t.name+"_quantity"},t.selected&&i.a.createElement("div",{className:"input"},i.a.createElement("input",{type:"text",className:"form-control form-control-sm",value:t.quantityVal,onChange:function(t){return e.updateMultiAttrQuantity(t,r,a,s)},pattern:"[0-9]*"})))}))),t("render",o.options[r],s))}))}("",t,r)),e.multiAttributeList.length>1&&r>0&&i.a.createElement("div",{className:"cart-variant-action"},i.a.createElement("div",{className:"btn text-danger btn-sm btn-round",onClick:function(){return e.removeColorItem(t,"multiple")}},i.a.createElement("i",{className:"nxi nxi-remove"})))),g(e.multiAttributeList,e.noOfAttributes,t.name))})),e.isColorDivShow&&e.colorVariants&&i.a.createElement("div",{className:"color-block"},e.colorVariants.map((function(t){return i.a.createElement("div",{className:"color-box",key:t.name,style:{backgroundColor:t.hex_code?t.hex_code:""},title:t.name,onClick:function(){return e.loadColorVariant(t,-1)}})})))),s(),e.addColorDivShow&&e.colorVariants&&e.isColorAttribute&&i.a.createElement("div",{className:"color-block"},e.colorVariants.map((function(t){return i.a.createElement("div",{className:"color-box",key:t.name,style:{backgroundColor:t.hex_code?t.hex_code:""},title:t.name,onClick:function(){return e.addMoreColorVariants(t,"multiple")}})}))),e.addColorDivShow&&e.colorVariants&&!e.isColorAttribute&&i.a.createElement("div",{className:"color-block"},e.colorVariants.map((function(t){return i.a.createElement("div",{className:"color-box add-text",key:t.name,style:{backgroundColor:t.hex_code?t.hex_code:""},title:t.name,onClick:function(){return e.addMoreColorVariants(t,"multiple")}},t.name)}))))):i.a.createElement(n.Fragment,null,!e.isStickerEnable&&i.a.createElement("div",{className:"cart-variant"},i.a.createElement("div",{className:"cart-variant-color"}," ",e.language.cart.quantity," : "),i.a.createElement("div",{className:"cart-variant-size"},i.a.createElement("div",{className:"size-input qty"},i.a.createElement("div",{className:"input"},i.a.createElement("input",{type:"text",className:"form-control form-control-sm",value:e.simpleQuantityVal,onChange:function(t){return e.updateSimpleProductQuantity(t)},pattern:"[0-9]*"}))))),g(e.simpleQuantityVal)):0!==e.noOfAttributes&&(e.noOfAttributes<=2||"simple"===e.productType)?e.loading&&1===e.selectedColorSizeList.length&&2===e.noOfAttributes?i.a.createElement(he.a,Object($.a)({height:720},"height",50)):i.a.createElement("div",{className:"scroll-bar-wrap"},!e.isStickerEnable&&i.a.createElement("div",{className:"listView scrollbar"},i.a.createElement("div",{className:"listView-wrap"},e.selectedColorSizeList.map((function(t,a){return Object.keys(e.selectedColorSizeList[a]).map((function(t,r){var o;return i.a.createElement(n.Fragment,{key:t},i.a.createElement("div",{className:"listView-elements"+(e.selectedColorSizeList.length-1===a&&e.addMoreLoading&&2===e.noOfAttributes?" hidden":"")},i.a.createElement("div",{className:"cart-variant"},0===e.productDetail.is_configurator&&i.a.createElement("div",{className:"cart-variant-color"+((null===(o=e.selectedColorDetails[t])||void 0===o?void 0:o.colorCode)?"":" multi-attr")},c(e.selectedColorDetails[t]),i.a.createElement("div",{className:"color-info"},i.a.createElement("div",{className:"lable"},t),u(e.selectedColorDetails[t],t,a))),i.a.createElement("div",{className:"cart-variant-size"},e.selectedColorSizeList[a][t].map((function(r,n){return i.a.createElement("div",{key:"size_"+n,className:"size-input qty"},p(r),i.a.createElement("div",{className:t===e.activeColorName&&(e.activeSubAttrIndex===n||-1===e.activeSubAttrIndex&&r.quantityVal>0)?"input active":"input"},i.a.createElement("input",{type:"text",className:"form-control form-control-sm",value:r.quantityVal,onChange:function(n){return e.updateQuantity(n,a,t,r.attributes[e.globalSizeAttribute]?r.attributes[e.globalSizeAttribute]:r.attributes[e.globalSizeAttribute.toLowerCase()])},onFocus:function(){return e.changeProductColor(t,e.selectedColorSizeList[a],a,n)},pattern:"[0-9]*",disabled:r.inventory&&r.inventory.stock<1})),d(r))}))),e.selectedColorSizeList.length>1&&a>0&&i.a.createElement("div",{className:"cart-variant-action"},i.a.createElement("div",{className:"btn text-danger btn-sm btn-round",onClick:function(){return e.removeColorItem(t,"")}},i.a.createElement("i",{className:"nxi nxi-remove"})))),g(e.selectedColorSizeList,e.noOfAttributes,t)),e.selectedColorSizeList.length-1===a&&e.addMoreLoading&&2===e.noOfAttributes&&i.a.createElement(he.a,Object($.a)({height:720},"height",50)))}))})))),e.isColorDivShow&&e.colorVariants&&i.a.createElement("div",{className:"color-block"},e.colorVariants.map((function(t){return i.a.createElement("div",{className:"color-box",key:t.name,style:t.hex_code?{backgroundColor:t.hex_code}:{backgroundImage:"url("+t.file_name+")",backgroundSize:"cover"},title:t.name,onClick:function(){return e.loadColorVariant(t)}},l(t))}))),s(),e.addColorDivShow&&e.colorVariants&&i.a.createElement("div",{className:"color-block"},e.colorVariants.map((function(t){return i.a.createElement("div",{className:"color-box",key:t.name,style:t.hex_code?{backgroundColor:t.hex_code}:{backgroundImage:"url("+t.file_name+")",backgroundSize:"cover"},title:t.name,onClick:function(){return e.addMoreColorVariants(t,"")}},l(t))})))):e.noOfAttributes>2?e.loading?i.a.createElement(he.a,Object($.a)({height:720},"height",50)):e.multiAttributeList.length?i.a.createElement("div",{className:"scroll-bar-wrap"},!e.isStickerEnable&&i.a.createElement("div",{className:"listView scrollbar"},i.a.createElement("div",{className:"listView-wrap"},e.multiAttributeList.length&&e.multiAttributeList.map((function(t,r){return i.a.createElement(n.Fragment,{key:t.name+"_"+r},i.a.createElement("div",{className:"listView-elements"+(e.multiAttributeList.length-1===r&&e.addMoreLoading?" hidden":"")},i.a.createElement("div",{className:"cart-variant"},0===e.productDetail.is_configurator&&e.isColorAttribute&&i.a.createElement("div",{className:"cart-variant-color"},i.a.createElement("div",{className:""!==t.colorCode?"color-btn":"hidden",style:"#"===t.colorCode[0]?{backgroundColor:t.colorCode}:{backgroundImage:"url("+t.colorCode+")",backgroundSize:"cover"}}),i.a.createElement("div",{className:""===t.colorCode?"color-btn":"hidden",style:{backgroundColor:"#ffff"}}),i.a.createElement("div",{className:"color-info"},i.a.createElement("div",{className:"lable"},t.name),i.a.createElement("div",{className:e.colorVariants&&e.colorVariants.length>0?"btn btn-sm btn-link p-0":"d-none",onClick:function(){e.openChooseColorDiv(t.name,"change",-1)}},e.language.main.change))),!e.isColorAttribute&&i.a.createElement("div",{className:"size-input"},i.a.createElement("div",{className:"size"},e.globalColorAttribute),i.a.createElement("div",{className:"input"},i.a.createElement("select",{value:t.name,onChange:function(t){return e.loadColorVariantData(t)},className:"custom-select custom-select-sm"},e.colorAttributes.map((function(e,t){return i.a.createElement("option",{key:e.name,value:e.name,name:e.name},e.name)}))))),i.a.createElement("div",{className:"cart-variant-size"},function t(r,o,s){if("render"===r&&o.length){var l=!1;o.forEach((function(e,t){e.selected&&(o=o[parseInt(t)],l=!0)})),l||(o=o[0])}return o.options&&Object.keys(o.options).forEach((function(e){o.options[e].forEach((function(e,t){e.selected&&(a=t)}))})),o.options&&Object.keys(o.options).map((function(r){return i.a.createElement(n.Fragment,{key:r},i.a.createElement("div",{className:"size-input"},i.a.createElement("div",{className:"size"},r),i.a.createElement("div",{className:"input"},i.a.createElement("select",{value:a,onChange:function(t){return e.resetAttributeView(t)},className:"custom-select custom-select-sm"},o.options[r].map((function(e,t){return i.a.createElement("option",{key:t,value:t,name:r+"-"+s},e.name)}))))),o.options[r][0].price&&i.a.createElement("div",{className:"size-input qty"},i.a.createElement("div",{className:"size"},e.language.main.quantity),o.options[r].map((function(t,a){return i.a.createElement(n.Fragment,{key:t.name+"_quantity"},t.selected&&i.a.createElement("div",{className:"input"},i.a.createElement("input",{type:"text",className:"form-control form-control-sm",value:t.quantityVal,onFocus:function(){return e.changeActiveMultiAttrName(s)},onChange:function(t){return e.updateMultiAttrQuantity(t,r,a,s)},pattern:"[0-9]*"})))}))),t("render",o.options[r],s))}))}("",t,r)),e.multiAttributeList.length>1&&r>0&&i.a.createElement("div",{className:"cart-variant-action"},i.a.createElement("div",{className:"btn text-danger btn-sm btn-round",onClick:function(){return e.removeColorItem(t,"multiple")}},i.a.createElement("i",{className:"nxi nxi-remove"})))),g(e.multiAttributeList,e.noOfAttributes,t.name)),e.multiAttributeList.length-1===r&&e.addMoreLoading&&i.a.createElement(he.a,Object($.a)({height:720},"height",50)))})),e.isColorDivShow&&e.colorVariants&&i.a.createElement("div",{className:"color-block"},e.colorVariants.map((function(t){return i.a.createElement("div",{className:"color-box",key:t.name,style:{backgroundColor:t.hex_code?t.hex_code:""},title:t.name,onClick:function(){return e.loadColorVariant(t,-1)}})})))),s(),e.addColorDivShow&&e.colorVariants&&e.isColorAttribute&&i.a.createElement("div",{className:"color-block"},e.colorVariants.map((function(t){return i.a.createElement("div",{className:"color-box",key:t.name,style:{backgroundColor:t.hex_code?t.hex_code:""},title:t.name,onClick:function(){return e.addMoreColorVariants(t,"multiple")}})}))),e.addColorDivShow&&e.colorVariants&&!e.isColorAttribute&&i.a.createElement("div",{className:"color-block"},e.colorVariants.map((function(t){return i.a.createElement("div",{className:"color-box add-text",key:t.name,style:{backgroundColor:t.hex_code?t.hex_code:""},title:t.name,onClick:function(){return e.addMoreColorVariants(t,"multiple")}},t.name)}))))):void 0:i.a.createElement(n.Fragment,null,!e.isStickerEnable&&i.a.createElement("div",{className:"listView"},i.a.createElement("div",{className:"listView-wrap"},i.a.createElement("div",{className:"listView-elements"},i.a.createElement("div",{className:"cart-variant"},i.a.createElement("div",{className:"cart-variant-color"}," ",e.language.cart.quantity," : "),i.a.createElement("div",{className:"cart-variant-size"},i.a.createElement("div",{className:"size-input qty"},i.a.createElement("div",{className:"input"},i.a.createElement("input",{type:"text",className:"form-control form-control-sm",value:e.simpleQuantityVal,onChange:function(t){return e.updateSimpleProductQuantity(t)},pattern:"[0-9]*"}))))),g(e.simpleQuantityVal))))),e.isStickerEnable&&e.showStickerSheet&&i.a.createElement(ke,{showNotification:e.showNotification,simpleQuantityVal:e.simpleQuantityVal,updateSimpleProductQuantity:e.updateSimpleProductQuantity,updateStickerSheetPrice:e.updateStickerSheetPrice,updateStickerQuantity:e.updateStickerQuantity,stickerQuantityVal:e.stickerQuantityVal,scaleUnit:e.scaleUnit,stickerPreviewStatus:e.stickerPreviewStatus}),e.checkoutPreloader&&i.a.createElement("div",{className:"loader"},i.a.createElement("div",{className:"loader-gif"},i.a.createElement("svg",{version:"1.1",id:"L4",xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",viewBox:"0 0 50 50",enableBackground:"new 0 0 0 0"},i.a.createElement("circle",{fill:"#28a745",stroke:"none",cx:"5",cy:"25",r:"5"},i.a.createElement("animate",{attributeName:"opacity",dur:"1s",values:"0;1;0",repeatCount:"indefinite",begin:"0.1"})),i.a.createElement("circle",{fill:"#28a745",stroke:"none",cx:"25",cy:"25",r:"5"},i.a.createElement("animate",{attributeName:"opacity",dur:"1s",values:"0;1;0",repeatCount:"indefinite",begin:"0.2"})),i.a.createElement("circle",{fill:"#28a745",stroke:"none",cx:"45",cy:"25",r:"5"},i.a.createElement("animate",{attributeName:"opacity",dur:"1s",values:"0;1;0",repeatCount:"indefinite",begin:"0.3"})))),i.a.createElement("h3",{className:"loader-title"},e.language.cart.prepareCart)),function(){if(e.imgUploadStat)return i.a.createElement("div",{className:"loader"},i.a.createElement("div",{className:"loader-gif"},i.a.createElement("svg",{version:"1.1",id:"L4",xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",viewBox:"0 0 50 50",enableBackground:"new 0 0 0 0"},i.a.createElement("circle",{fill:"#28a745",stroke:"none",cx:"5",cy:"25",r:"5"},i.a.createElement("animate",{attributeName:"opacity",dur:"1s",values:"0;1;0",repeatCount:"indefinite",begin:"0.1"})),i.a.createElement("circle",{fill:"#28a745",stroke:"none",cx:"25",cy:"25",r:"5"},i.a.createElement("animate",{attributeName:"opacity",dur:"1s",values:"0;1;0",repeatCount:"indefinite",begin:"0.2"})),i.a.createElement("circle",{fill:"#28a745",stroke:"none",cx:"45",cy:"25",r:"5"},i.a.createElement("animate",{attributeName:"opacity",dur:"1s",values:"0;1;0",repeatCount:"indefinite",begin:"0.3"})))),i.a.createElement("h3",{className:"loader-title"},e.language.cart.uploadToServer))}()),i.a.createElement("div",{className:"cart-option"},i.a.createElement("div",{className:"justify-content-between mt-3 d-none d-md-flex d-lg-flex d-xl-flex"+(e.isEnableRequestQuote?" hidden":"")},e.orderNotes&&e.orderNotes.is_enabled&&i.a.createElement(n.Fragment,null,i.a.createElement(de.a,{trigger:"legacy",placement:"top",target:"addNotePopup"},i.a.createElement(fe.a,null,e.language.cart.notes),i.a.createElement(pe.a,null,i.a.createElement("textarea",{className:"form-control",value:e.orderNotes.userInput,onChange:function(t){e.onChangeOrderNote(t)}}),e.maxCharAllowed&&i.a.createElement("span",null,e.language.cart.charactersLeft,": ",e.charLeft),i.a.createElement("small",{className:"form-text text-muted"},e.language.cart.orderNotes))),i.a.createElement("div",{className:"btn btn-link p-0 text-dark",id:"addNotePopup"},i.a.createElement("i",{className:"nf nf-files"})," ",e.language.cart.addNote)),e.termConditions&&e.termConditions.is_enabled&&i.a.createElement(n.Fragment,null,i.a.createElement(de.a,{trigger:"legacy",placement:"top",target:"termCondition"},i.a.createElement(pe.a,null,i.a.createElement("div",{className:"p-3",dangerouslySetInnerHTML:{__html:e.language.cart.cartTermsCondition}}))),i.a.createElement("div",{className:"custom-control custom-checkbox"},i.a.createElement("input",{type:"checkbox",className:"custom-control-input",id:"termsCustomControlAutosizing",checked:!!e.termConditions.is_default_status&&e.termConditions.is_default_status,onChange:function(t){e.onChangeTermCondition(t)}}),i.a.createElement("label",{className:"custom-control-label",htmlFor:"termsCustomControlAutosizing"},e.language.main.agree),i.a.createElement("label",{className:"pl-1 text-dark cursor-pointer text-underline",id:"termCondition"},e.language.main.tc)))),i.a.createElement("div",{className:"flex-column d-flex d-sm-flex d-md-none d-lg-none d-xl-none"+(e.isEnableRequestQuote?" hidden":"")},e.orderNotes&&e.orderNotes.is_enabled&&i.a.createElement(n.Fragment,null,i.a.createElement("div",{className:"form-group note-box"},i.a.createElement("label",{className:"pName-title"},e.language.cart.addNote),i.a.createElement("textarea",{cols:"30",rows:"2",className:"form-control",value:e.orderNotes.userInput,onChange:function(t){e.onChangeOrderNote(t)}}),i.a.createElement("small",{className:"form-text text-muted"},e.language.cart.orderNotes))),e.termConditions&&e.termConditions.is_enabled&&i.a.createElement(n.Fragment,null,i.a.createElement("div",{className:"terms-box"},i.a.createElement("div",{className:"custom-control custom-checkbox"},i.a.createElement("input",{type:"checkbox",className:"custom-control-input",id:"termsCustomControlAutosizing",checked:!!e.termConditions.is_default_status&&e.termConditions.is_default_status,onChange:function(t){e.onChangeTermCondition(t)}}),i.a.createElement("label",{className:"custom-control-label",htmlFor:"termsCustomControlAutosizing"},e.language.main.tc)),i.a.createElement("div",{className:"terms-txt",dangerouslySetInnerHTML:{__html:e.language.cart.cartTermsCondition}})))))))}return i.a.createElement("div",null)},Ne=a(3),Oe=a(27),Pe=a(856),De=a(91),Re=a(38),Te=a(418),Le=a(423),Me=function(e){return e.allowSelectAll?i.a.createElement(De.a,Object.assign({},e,{options:[e.allOption].concat(Object(ee.a)(e.options)),onChange:function(t,a){if(null!==t&&t.length>0){if(t[t.length-1].value===e.allOption.value)return e.onChange([e.allOption].concat(Object(ee.a)(e.options)));var r=[];if(t.length===e.options.length)return t.includes(e.allOption)?r=t.filter((function(t){return t.value!==e.allOption.value})):"select-option"===a.action&&(r=[e.allOption].concat(Object(ee.a)(e.options))),e.onChange(r)}return e.onChange(t)}})):i.a.createElement(De.a,e)};Me.defaultProps={allOption:{label:"Select all print method",value:""}};var Be=Me,je=a(338),Fe=a.n(je),Ue=(a(425),function(e){return i.a.createElement(Re.z.MultiValue,e,i.a.createElement("span",null,e.data.label))}),Ve=Object(Le.a)(),Ge=function(e){return i.a.createElement("div",null,i.a.createElement(Re.z.Option,e,i.a.createElement("label",null,e.label)))},qe=function(e){function t(t,a,r,n){var o,s;return"objects"===a.name?o=i.a.createElement("div",{className:"boxWrap thumbBoxWrap m-0"},(s=t.outerHTML,i.a.createElement("svg",{width:"100",height:"100",dangerouslySetInnerHTML:{__html:s}}))):"side"===a.name?o=i.a.createElement("span",null,t.prefs.sideName):"objectTitle"===a.name?o=i.a.createElement("input",{type:"text",className:"form-control form-control-sm",placeholder:"Enter title",value:t.prefs.objectTitle,onChange:function(t){return e.updateObjTitle(t,r)}}):(t.prefs.lock&&(o=a.name in t.prefs.lock?i.a.createElement("div",{className:"custom-control custom-checkbox"},i.a.createElement("input",{type:"checkbox",className:"custom-control-input",id:"lock"+r+"_"+n,value:a.name,checked:!!t.prefs.lock[a.name],onChange:function(t){return e.setLockProperty(t.target.value,t.target.checked,r)},disabled:e.selTempEditOpt&&e.selTempEditOpt.value&&e.disabledLockProp.includes(a.name)}),i.a.createElement("label",{className:"custom-control-label",htmlFor:"lock"+r+"_"+n})):"_ _"),t.prefs&&t.prefs.subType&&"graphicText"===t.prefs.subType&&"colorEdit"===a.name&&(o="_ _"),t.prefs&&t.prefs.type&&"clipart"===t.prefs.type&&"resize"===a.name&&t.prefs.restrictScaling&&(o="_ _")),o}if(!e.isCustomerDetailsForm&&e.modalIsOpen){var a=i.a.createElement("button",{className:"close",onClick:e.closeModal},"\xd7");return i.a.createElement(be.a,{isOpen:e.modalIsOpen,onOpened:e.afterOpenModal,style:{maxWidth:"1299px"},toggle:e.closeModal,centered:!0,modalClassName:"custom save-template"},e.saveTemplateLoader&&i.a.createElement(n.Fragment,null,i.a.createElement(Ae.a,null,i.a.createElement("div",{className:"loader",key:0},i.a.createElement("div",{className:"loader-gif mb-3"},i.a.createElement("svg",{width:"38",height:"38",viewBox:"0 0 38 38"},i.a.createElement("g",{fill:"none",fillRule:"evenodd"},i.a.createElement("g",{transform:"translate(1 1)",strokeWidth:"2"},i.a.createElement("circle",{strokeOpacity:".5",cx:"18",cy:"18",r:"18"}),i.a.createElement("path",{d:"M36 18c0-9.94-8.06-18-18-18"},i.a.createElement("animateTransform",{attributeName:"transform",type:"rotate",from:"0 18 18",to:"360 18 18",dur:"1s",repeatCount:"indefinite"})))))),i.a.createElement("h3",{className:"loader-title"},e.isTemplateEdit?e.language.template.updatingTemplate:e.language.template.savingTemplate),i.a.createElement("h4",{className:"loader-text"},e.language.template.pleaseWait,"...")))),!e.saveTemplateLoader&&i.a.createElement(n.Fragment,null,e.imgUploadStatus&&i.a.createElement("div",{className:"loader-wrapper"},i.a.createElement("div",{className:"loader"},i.a.createElement("div",{className:"loader-gif"},i.a.createElement("svg",{version:"1.1",id:"L4",xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",viewBox:"0 0 50 50",enableBackground:"new 0 0 0 0"},i.a.createElement("circle",{fill:"#28a745",stroke:"none",cx:"5",cy:"25",r:"5"},i.a.createElement("animate",{attributeName:"opacity",dur:"1s",values:"0;1;0",repeatCount:"indefinite",begin:"0.1"})),i.a.createElement("circle",{fill:"#28a745",stroke:"none",cx:"25",cy:"25",r:"5"},i.a.createElement("animate",{attributeName:"opacity",dur:"1s",values:"0;1;0",repeatCount:"indefinite",begin:"0.2"})),i.a.createElement("circle",{fill:"#28a745",stroke:"none",cx:"45",cy:"25",r:"5"},i.a.createElement("animate",{attributeName:"opacity",dur:"1s",values:"0;1;0",repeatCount:"indefinite",begin:"0.3"})))),i.a.createElement("h3",{className:"loader-title"},e.language.cart.uploadToServer))),i.a.createElement(Pe.a,{close:a},i.a.createElement("span",{className:"modal-title",id:"exampleModalCenterTitle"},e.isTemplateEdit?e.language.template.updateTemplate:e.language.cart.saveTemplate)),i.a.createElement(Ae.a,null,i.a.createElement("div",{className:"text-sm pb-2"},e.language.template.lockDescription),i.a.createElement("div",{className:"ani-top-btm quote-alert"+(e.isOpen?" show":" hidden")},i.a.createElement("div",{className:"txt-13 tip alert alert-"+e.type},i.a.createElement("i",{className:"alert-icon"}),i.a.createElement("span",{className:"alert-txt"},e.message))),i.a.createElement("div",{className:"table-responsive"},function(){if(e.allStageElements&&e.allStageElements.length)return i.a.createElement("table",{className:"table table-scroll table-checkbox"},i.a.createElement("thead",null,i.a.createElement("tr",null,e.lockPropertiesData.map((function(t,a){return i.a.createElement("th",{key:t.name},("objects"===t.name||"side"===t.name||"objectTitle"===t.name)&&i.a.createElement("span",null,t.label),"objects"!==t.name&&"side"!==t.name&&"objectTitle"!==t.name&&i.a.createElement(n.Fragment,null,i.a.createElement("div",{className:"custom-control custom-checkbox"+(t.isAllCheckBox?"":" hidden")},i.a.createElement("input",{type:"checkbox",className:"custom-control-input",id:"all_"+t.name,value:t.name,onChange:function(t){return e.setAllLockProperty(t.target.value,t.target.checked,a)},disabled:e.selTempEditOpt&&e.selTempEditOpt.value&&e.disabledLockProp.includes(t.name),checked:t.allchecked}),i.a.createElement("label",{className:"custom-control-label",htmlFor:"all_"+t.name},t.label)),i.a.createElement("span",{className:t.isAllCheckBox?"hidden":""},t.label)))})))),i.a.createElement("tbody",null,e.allStageElements.map((function(a,r){return i.a.createElement("tr",{key:a.id},e.lockPropertiesData.map((function(e,n){return i.a.createElement("td",{key:e.name},t(a,e,r,n))})))}))))}()),i.a.createElement("div",{className:"templateForm pb-0"},i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-lg-3 pl-0"},i.a.createElement(Fe.a,{src:e.imgUrl,crop:e.crop,ruleOfThirds:!0,keepSelection:"true",onImageLoaded:e.onImageLoaded,onComplete:e.onCropComplete,onChange:e.onCropChange})),i.a.createElement("div",{className:"col-lg-9 pr-0"},i.a.createElement("form",{className:e.displayErrors?" displayErrors":"",noValidate:!0,onSubmit:e.handleSubmit},i.a.createElement("div",{className:"form-row"},i.a.createElement("div",{className:"form-group col-3"},i.a.createElement("label",null,e.language.template.templateEditType),i.a.createElement("span",{className:"text-danger"},"*"),i.a.createElement(De.a,{className:"basic-single",value:e.selTempEditOpt,name:"tempEditType",options:e.tempEditOptions,onChange:e.tempEditTypeSelected,required:!0})),i.a.createElement("div",{className:"form-group col-3"},i.a.createElement("label",null,e.language.template.templateName),i.a.createElement("span",{className:"text-danger"},"*"),i.a.createElement("input",{className:"form-control form-control-sm inp-height",value:e.name,name:"name",placeholder:"Enter name",required:!0,onChange:e.handleInputChange})),i.a.createElement("div",{className:"form-group col-4"},i.a.createElement("label",null,"Template category"),i.a.createElement("span",{className:"text-danger"},"*"),e.catLoading?i.a.createElement(he.a,{height:58}):i.a.createElement(De.a,{closeMenuOnSelect:!1,maxMenuHeight:100,isMulti:!0,value:e.selectedCategory,onChange:e.onCategorySelect,options:e.groupedOptions,formatGroupLabel:e.formatGroupLabel,className:e.invalid?" validation-error":""})),i.a.createElement("div",{className:"form-group col-2"},i.a.createElement("label",null,e.language.template.noOfColor),i.a.createElement("span",{className:"text-danger"},"*"),i.a.createElement("input",{className:"form-control form-control-sm inp-height",value:e.noOfColors,name:"noOfColors",placeholder:"Enter name",required:!0,onChange:e.handleInputChange}))),i.a.createElement("div",{className:"form-row"},i.a.createElement("div",{className:"form-group col-4"},i.a.createElement("label",null,"Select print method"),i.a.createElement("span",{className:"text-danger"},"*"),i.a.createElement(Be,{options:e.options,isMulti:!0,maxMenuHeight:100,closeMenuOnSelect:!1,components:{Option:Ge,MultiValue:Ue,animatedComponents:Ve},onChange:e.handleChange,allowSelectAll:!0,value:e.selectedOption,className:e.printMethodInvalid?" validation-error":""})),i.a.createElement("div",{className:"form-group col-4"},i.a.createElement("label",null,e.language.template.searchTags),i.a.createElement(Te.WithContext,{tags:e.tags,autofocus:!1,allowUnique:!0,allowDragDrop:!1,handleDelete:e.handleDelete,handleAddition:e.handleAddition,delimiters:e.delimiters})," ")),i.a.createElement("div",{className:"d-flex justify-content-end"},i.a.createElement("button",{className:"btn btn-sm btn-danger mr-1",onClick:e.closeModal},e.language.main.cancel),!e.isTemplateEdit&&i.a.createElement(n.Fragment,null,i.a.createElement("button",{className:"btn btn-sm btn-success mr-1",disabled:!1===e.isUploadSuccess},e.language.template.saveAndClose),i.a.createElement("button",{className:"btn btn-sm btn-success",disabled:!1===e.isUploadSuccess},e.language.template.saveAndCreateAnother)),e.isTemplateEdit&&i.a.createElement("button",{className:"btn btn-sm btn-success mr-1",disabled:!1===e.isUploadSuccess},e.language.template.updateAndClose)))))))))}return i.a.createElement(n.Fragment,null)},He=a(12),ze=a(60),We=function(){function e(){Object(te.a)(this,e)}return Object(ae.a)(e,null,[{key:"saveTemplateDetails",value:function(e){return ze({method:"post",url:He.a.base_path+"templates",data:e})}},{key:"updateTemplateDetails",value:function(e,t){return ze({method:"post",url:He.a.base_path+"designs/"+e,data:t})}}]),e}(),Qe=[188,13],Je={display:"flex",alignItems:"center",justifyContent:"space-between",borderColor:"red !important"},Ye={backgroundColor:"#EBECF0",borderRadius:"2em",color:"#172B4D",display:"inline-block",fontSize:12,fontWeight:"normal",lineHeight:"1",minWidth:1,padding:"0.16666666666667em 0.5em",textAlign:"center"},Ze=function(e){return i.a.createElement("div",{style:Je},i.a.createElement("span",null,e.label),i.a.createElement("span",{style:Ye},e.options.length))},Xe=[],Ke=function(e){Object(re.a)(a,e);var t=Object(ne.a)(a);function a(e){var n;return Object(te.a)(this,a),(n=t.call(this,e)).handleChange=function(e){n.setState({selectedOption:e}),e&&e.length&&n.setState({printMethodInvalid:!1})},n.onCategorySelect=function(e){n.setState({selectedCategory:e}),e&&e.length&&n.setState({invalid:!1})},n.checkUploadImageList=function(e){var t=[];return n.props.imageUploadList&&n.props.imageUploadList.length&&n.props.imageUploadList[e]&&n.props.imageUploadList[e].length&&n.props.imageUploadList[e].forEach((function(e){e.imgUrl&&t.push("/assets"+e.imgUrl.split("assets").pop())})),t},n.prepareOrderInfo=function(e){var t=[],a=[],r={};return(t=Object(ee.a)(n.props.printSettings.filter((function(t){return t.id===e}))))&&t.length&&(t[0].order_data&&t[0].order_data.allowed_order_formats&&t[0].order_data.allowed_order_formats.length&&t[0].order_data.allowed_order_formats.forEach((function(e){e.name?0===e.is_disabled&&1===e.is_selected&&a.push(e.name?e.name:e):a.push(e)})),t[0].order_data.allowed_order_formats=a,r=t[0].order_data),r},n.checkSession=function(){return"localhost"===window.location.hostname||"127.0.0.1"===window.location.hostname||""===window.location.hostname||!!localStorage.getItem("currentUser")},n.clearStateObject=function(){n.setState({selectedOption:null,selectedCategory:null,name:"",noOfColors:0,description:"",tags:[],isSaveTemplate:!1})},n.tempEditTypeSelected=function(e){n.setState({selTempEditOpt:e})},n.updatePrefsOfElement=function(e,t,a,r,i,o){var s=Object(ee.a)(n.props.faceData),l=(new DOMParser).parseFromString(s[t].svg,"image/svg+xml"),c=l.getElementById(a),u=c.getAttribute("xe-props"),d=Ne.a.canvas.decodeXeprops(u);"title"===e?d.objectTitle=r:"lock"===e&&(d.lock[i]=o);var p=Ne.a.canvas.encodeXeprops(d);c.setAttribute("xe-props",p);var m=(new XMLSerializer).serializeToString(l);s[t].svg=m,n.props.dispatch(ve.x(s))},n.setIsTemplateElem=function(){for(var e,t,a,r,i,o,s,l=Object(ee.a)(n.props.faceData),c=Object(ee.a)(n.state.allStageElements),u=0;u<c.length;u++){var d;if(c[u].prefs&&("image"===c[u].prefs.type||"text"===c[u].prefs.type))if(c[u].prefs.sideIndex===n.props.canvasData.active_product_side)e="",(null===(d=e=document.getElementById(c[u].id))||void 0===d?void 0:d.prefs)&&(e.prefs.isTemplateImg=!0);else e="","",t="",a="","",i="","","","",r=(a=(t=(new DOMParser).parseFromString(l[c[u].prefs.sideIndex].svg,"image/svg+xml")).getElementById(c[u].id)).getAttribute("xe-props"),(i=Ne.a.canvas.decodeXeprops(r)).isTemplateImg=!0,o=Ne.a.canvas.encodeXeprops(i),a.setAttribute("xe-props",o),s=(new XMLSerializer).serializeToString(t),l[c[u].prefs.sideIndex].svg=s}n.props.dispatch(ve.x(l))},n.setAllLockProperty=function(e,t,a){for(var r=Object(ee.a)(n.props.faceData),i=Object(ee.a)(n.state.allStageElements),o=function(a){i[a].prefs&&i[a].prefs.lock&&Object.keys(i[a].prefs.lock).forEach((function(o){var s,l,c,u,d,p,m,h;o===e&&(i[a].prefs.lock[o]=t,i[a].prefs.sideIndex===n.props.canvasData.active_product_side?(null===(s=l=document.getElementById(i[a].id))||void 0===s?void 0:s.prefs)&&(l.prefs.lock[o]=t):(d=(u=(c=(new DOMParser).parseFromString(r[i[a].prefs.sideIndex].svg,"image/svg+xml")).getElementById(i[a].id)).getAttribute("xe-props"),(p=Ne.a.canvas.decodeXeprops(d)).lock[e]=t,m=Ne.a.canvas.encodeXeprops(p),u.setAttribute("xe-props",m),h=(new XMLSerializer).serializeToString(c),r[i[a].prefs.sideIndex].svg=h))}))},s=0;s<i.length;s++)o(s);n.setState({allStageElements:i}),n.props.dispatch(ve.x(r));var l=Object(ee.a)(n.state.lockPropertiesData);l[a].allchecked=t,n.setState({lockPropertiesData:l}),"edit"===e&&n.lockAllPropertyOfAllElements(t)},n.checkAllLockPropStatus=function(){var e=Object(ee.a)(n.state.allStageElements),t=Object(ee.a)(n.state.lockPropertiesData);t.forEach((function(t){if("objects"!==t.name&&"side"!==t.name&&"objectTitle"!==t.name){var a=0,r=0;e.forEach((function(e){Object.keys(e.prefs.lock).forEach((function(n){n===t.name&&("clipart"!==e.prefs.type||"clipart"===e.prefs.type&&"resize"!==n||"clipart"===e.prefs.type&&"resize"===n&&!e.prefs.restrictScaling)&&(e.prefs.lock[n]?a++:a--,r++)}))})),t.allchecked=a>0&&a===r,t.isAllCheckBox=!!r}})),n.setState({lockPropertiesData:t})},n.setEditTemplateData=function(){if(n.state.isTemplateEdit||n.isChangeProduct){var e=n.props.editTempDetails,t=n.state.tempEditOptions.filter((function(t){return t.value===e.is_easy_edit}))[0];n.setState({selTempEditOpt:t,name:e.name,description:e.description});var a=[];e.tags&&e.tags.length&&(e.tags.forEach((function(e){var t={id:"",text:""};t.id=e,t.text=e,a.push(t)})),n.setState((function(e){return{tags:a}})))}},n.setEditTemplateCategory=function(){if((n.state.isTemplateEdit||n.isChangeProduct)&&n.categories&&n.categories.length){var e=n.props.editTempDetails,t=[];e.categories&&e.categories.length&&(e.categories.forEach((function(e){n.categories.forEach((function(a){e===a.value&&(t.some((function(t){return t.value===e}))||t.push(a))}))})),n.setState({selectedCategory:t}))}},n.setEditTemplatePrintProfile=function(){if((n.state.isTemplateEdit||n.isChangeProduct)&&n.printProfiles&&n.printProfiles.length){var e=n.props.editTempDetails,t=[];e.print_profiles&&e.print_profiles.length&&(e.print_profiles.forEach((function(e){n.printProfiles.forEach((function(a){e.id===a.value&&t.push(a)}))})),n.setState({selectedOption:t}))}},n.getUrlParameter=function(e){return("Shopify"!==window.storeType&&"Others"!==window.storeType&&"Hosted"!==window.storeType?new URLSearchParams(window.parent.location.search):new URLSearchParams(window.location.search)).get(e)},n.setExportCaptureData=Object(ce.a)(le.a.mark((function e(){var t,a,r,i,o,s,l,c,u,d,p,m;return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props.canvasData,a=t.faceData,r="",i=!1,o=!1,s=0,t.product_details&&1===t.product_details.is_product_image?t.color&&t.color[0]&&t.color[0].hex_code&&t.color[0].hex_code[0]&&"#"===t.color[0].hex_code[0]?r=t.color[0].hex_code:t.color&&t.color[0]&&t.color[0].file_name&&(r=t.color[0].file_name):r="",l={productUrl:t.product_sides[s].image.src,productColor:r},e.next=5,Ne.a.exportFaceData(l,o,i,(function(e){}));case 5:c=Object(oe.a)(t.product_sides),e.prev=6,c.s();case 8:if((u=c.n()).done){e.next=21;break}if(d=u.value,!a[s]||!a[s].isDesigned){e.next=18;break}return t.engraveSides&&(o=!!t.engraveSides[s]&&t.engraveSides[s]),p=d.image.src,n.props.productDetails.is_variable_decoration&&(p=null),e.next=16,Ne.a.exportCaptureData(p,a[s].svg,r,o,i);case 16:m=e.sent,a[s].imgObject||a[s].designImg||(a[s].imgObject=m.imgObject,a[s].designImg=m.designImg);case 18:s++;case 19:e.next=8;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(6),c.e(e.t0);case 26:return e.prev=26,c.f(),e.finish(26);case 29:n.props.dispatch(ve.x(a));case 30:case"end":return e.stop()}}),e,null,[[6,23,26,29]])}))),n.showNotification=function(e,t){n.state.modalWarningIsOpen||n.setState({modalWarningIsOpen:!0,modalWarningMsg:t,modalWarningType:e},(function(){setTimeout((function(){n.setState({modalWarningIsOpen:!1})}),5e3)}))},n.lockAllOfPerticularElement=function(e,t,a,i){var o,s,l,c,u,d,p,m,h,g,f,v,b=Object(ee.a)(n.props.faceData),A=Object(ee.a)(n.state.allStageElements);if(null===(o=A[i])||void 0===o||null===(s=o.prefs)||void 0===s?void 0:s.lock){var y=Object(r.a)({},A[i].prefs),_=Object(r.a)({},y.lock);Object.keys(_).forEach((function(e){_[e]=a})),y.lock=Object(r.a)({},_),A[i].prefs=Object(r.a)({},y),n.setState({allStageElements:A})}e===n.props.canvasData.active_product_side?(null===(l=u=document.getElementById(t))||void 0===l||null===(c=l.prefs)||void 0===c?void 0:c.lock)&&Object.keys(u.prefs.lock).forEach((function(e){u.prefs.lock[e]=a})):(h=(m=(p=(new DOMParser).parseFromString(b[e].svg,"image/svg+xml")).getElementById(t)).getAttribute("xe-props"),(null===(d=g=Ne.a.canvas.decodeXeprops(h))||void 0===d?void 0:d.lock)&&Object.keys(g.lock).forEach((function(e){g.lock[e]=a})),f=Ne.a.canvas.encodeXeprops(g),m.setAttribute("xe-props",f),v=(new XMLSerializer).serializeToString(p),b[e].svg=v,n.props.dispatch(ve.x(b)))},n.lockAllPropertyOfAllElements=function(e){for(var t=Object(ee.a)(n.props.faceData),a=Object(ee.a)(n.state.allStageElements),r=[],i=function(i){var o,s,l,c,u,d,p;a[i].prefs&&a[i].prefs.lock&&((r=Object.keys(a[i].prefs.lock)).forEach((function(t){a[i].prefs.lock[t]=e})),a[i].prefs.sideIndex===n.props.canvasData.active_product_side?(o=document.getElementById(a[i].id),r.forEach((function(t){var a;(null===(a=o)||void 0===a?void 0:a.prefs)&&(o.prefs.lock[t]=e)}))):(c=(l=(s=(new DOMParser).parseFromString(t[a[i].prefs.sideIndex].svg,"image/svg+xml")).getElementById(a[i].id)).getAttribute("xe-props"),u=Ne.a.canvas.decodeXeprops(c),r.forEach((function(t){u.lock[t]=e})),d=Ne.a.canvas.encodeXeprops(u),l.setAttribute("xe-props",d),p=(new XMLSerializer).serializeToString(s),t[a[i].prefs.sideIndex].svg=p))},o=0;o<a.length;o++)i(o);n.setState({allStageElements:a}),n.props.dispatch(ve.x(t));var s=Object(ee.a)(n.state.lockPropertiesData);s.forEach((function(t){"allchecked"in t&&(t.allchecked=e)})),n.setState({lockPropertiesData:s})},n.setEditAllLockProperty=function(e){for(var t=Object(ee.a)(n.props.faceData),a=Object(ee.a)(n.state.allStageElements),r=0;r<a.length;r++)if(a[r].prefs&&a[r].prefs.lock)if(a[r].prefs.lock.edit=e,a[r].prefs.sideIndex===n.props.canvasData.active_product_side){var i,o=void 0;(null===(i=o=document.getElementById(a[r].id))||void 0===i?void 0:i.prefs)&&(o.prefs.lock.edit=e)}else{var s,l,c,u=void 0,d=void 0,p=void 0;s=(d=(u=(new DOMParser).parseFromString(t[a[r].prefs.sideIndex].svg,"image/svg+xml")).getElementById(a[r].id)).getAttribute("xe-props"),(p=Ne.a.canvas.decodeXeprops(s)).lock.edit=e,l=Ne.a.canvas.encodeXeprops(p),d.setAttribute("xe-props",l),c=(new XMLSerializer).serializeToString(u),t[a[r].prefs.sideIndex].svg=c}n.setState({allStageElements:a}),n.props.dispatch(ve.x(t));var m=Object(ee.a)(n.state.lockPropertiesData);m.forEach((function(t){"edit"===t.name&&"allchecked"in t&&(t.allchecked=e)})),n.setState({lockPropertiesData:m})},n.onImageLoaded=function(e){n.imageRef=e},n.onCropComplete=function(e){n.makeClientCrop(e)},n.onCropChange=function(e,t){n.setState({crop:e})},n.setTemplateThumbImg=function(){var e=n.props.canvasData,t=Object(ee.a)(n.props.faceData),a=Ne.a.canvas.getAllStageElems().length?1:0,r=!0;n.props.canvasData.product_details.is_variable_decoration&&(r=!1),a&&Ne.a.exportFaceData({productUrl:null,productColor:""},!1,!1,(function(a){var r,i;t[e.active_product_side]=a,(null===t||void 0===t?void 0:t.length)&&(null===(r=t[0])||void 0===r?void 0:r.designUrl)&&(null===(i=t[0])||void 0===i?void 0:i.isDesigned)?n.setState({templateThumb:t[0].designUrl}):n.setState({templateThumb:t[e.active_product_side].designUrl})}),!1,!0,r)},n.state={modalIsOpen:!1,selectedOption:[],selectedCategory:[],name:"",noOfColors:0,description:"",tags:[],allStageElements:[],lockPropertiesData:[{label:n.props.language.template.objects,name:"objects"},{label:n.props.language.template.side,name:"side"},{label:n.props.language.template.objectTitle,name:"objectTitle"},{label:n.props.language.template.lockColor,name:"colorEdit",allchecked:!1,isAllCheckBox:!0},{label:n.props.language.template.lockResize,name:"resize",allchecked:!1,isAllCheckBox:!0},{label:n.props.language.template.lockMove,name:"move",allchecked:!1,isAllCheckBox:!0},{label:n.props.language.template.lockRotate,name:"rotate",allchecked:!1,isAllCheckBox:!0},{label:n.props.language.template.lockFont,name:"editFont",allchecked:!1,isAllCheckBox:!0},{label:n.props.language.template.lockDelete,name:"delete",allchecked:!1,isAllCheckBox:!0},{label:n.props.language.template.lockFilter,name:"filter",allchecked:!1,isAllCheckBox:!0},{label:n.props.language.template.lockMask,name:"mask",allchecked:!1,isAllCheckBox:!0},{label:n.props.language.template.lockAll,name:"edit",allchecked:!1,isAllCheckBox:!0}],isSaveTemplate:!1,saveTemplateLoader:!1,tempEditOptions:[{label:n.props.language.template.recreate,value:0},{label:n.props.language.template.edit,value:1}],selTempEditOpt:{label:n.props.language.template.recreate,value:0},used_colors:[],isTemplateEdit:!!n.getUrlParameter("etid"),editedTempId:n.getUrlParameter("etid"),modalWarningIsOpen:!1,modalWarningMsg:"",modalWarningType:"",disabledLockProp:["mask"],crop:{unit:"%",width:99,aspect:1,x:.5,y:.5},templateThumb:""},n.openModal=n.openModal.bind(Object(ue.a)(n)),n.afterOpenModal=n.afterOpenModal.bind(Object(ue.a)(n)),n.closeModal=n.closeModal.bind(Object(ue.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(ue.a)(n)),n.handleInputChange=n.handleInputChange.bind(Object(ue.a)(n)),n.handleDelete=n.handleDelete.bind(Object(ue.a)(n)),n.handleAddition=n.handleAddition.bind(Object(ue.a)(n)),n.updateObjTitle=n.updateObjTitle.bind(Object(ue.a)(n)),n.setLockProperty=n.setLockProperty.bind(Object(ue.a)(n)),n.tempEditTypeSelected=n.tempEditTypeSelected.bind(Object(ue.a)(n)),n.printProfiles=[],n.categories=[],n.isChangeProduct=!!n.getUrlParameter("tid"),n}return Object(ae.a)(a,[{key:"componentDidMount",value:function(){}},{key:"componentDidUpdate",value:function(e){this.props.modalIsOpen&&0===this.printProfiles.length&&this.setPrintProfileData(),this.props.modalIsOpen&&0===this.categories.length&&this.formatCategoriesData(),this.state.isSaveTemplate||this.setState({isSaveTemplate:!0})}},{key:"openModal",value:function(){this.setState({modalIsOpen:!0})}},{key:"afterOpenModal",value:function(){var e=this;this.props.tempCatLoadStatus||this.props.dispatch(Object(S.j)());var t=this.props.canvasData,a=[],r=Object(ee.a)(this.props.allSideElements);r[t.active_product_side]={element:Ne.a.canvas.getAllStageElems()},r.forEach((function(t,r){t&&t.element&&t.element.length&&t.element.forEach((function(t){t.prefs.sideIndex=r,t.prefs.sideName=e.props.canvasData.product_sides[r]?e.props.canvasData.product_sides[r].name:"Side "+(r+1),a.push(t)}))}));var n=a;if(0!==n.length&&this.props.templateData&&this.props.templateData.templateEditType){var i=[];r.forEach((function(e){e.element.forEach((function(e){e.prefs&&e.prefs.lock?i.push(e):Object(ee.a)(e.children).forEach((function(t){t.prefs&&t.prefs.lock&&(t.prefs.sideIndex=e.prefs.sideIndex,t.prefs.sideName=e.prefs.sideName,i.push(t))}))}))})),n=i}if(this.isChangeProduct&&0!==n.length){var o=[];n.forEach((function(e){e&&e.prefs&&t.product_sides[e.prefs.sideIndex]&&o.push(e)})),n=o}this.setState({allStageElements:n},(function(){for(var t=document.getElementsByClassName("boxWrap thumbBoxWrap m-0").length,a="",r="",n="",i=0,o=0;o<t;o++){i=(r=(a=document.getElementsByClassName("boxWrap thumbBoxWrap m-0")[o]).children)[0].children.length-1;for(var s=0,l=a.children.length;s<l;s++)a.children[s].children[0]&&a.children[s].children[0].hasAttribute("transform")&&a.children[s].children[0].removeAttribute("transform"),a.children[0].setAttribute("preserveAspectRatio","xMinYMin meet"),n=e.state.allStageElements[o].attributes.type&&"text"===e.state.allStageElements[o].attributes.type.value||!r[0].children[0]?r[0].getBBox().x+" "+r[0].getBBox().y+" "+r[0].getBBox().width+" "+r[0].getBBox().height:"function"===typeof r[0].children[i].getBBox?r[0].children[i].getBBox().x+" "+r[0].children[i].getBBox().y+" "+r[0].children[i].getBBox().width+" "+r[0].children[i].getBBox().height:r[0].getBBox().x+" "+r[0].getBBox().y+" "+r[0].getBBox().width+" "+r[0].getBBox().height,a.children[0].setAttribute("viewBox",n)}e.checkAllLockPropStatus(),e.setEditTemplateData()}));var s=[];t.layer_data&&t.layer_data.forEach((function(e){e.forEach((function(e){e.colors.forEach((function(e){-1===s.indexOf(e)&&s.push(e)}))}))})),this.setState({noOfColors:s.length,used_colors:s}),this.setTemplateThumbImg(),this.isChangeProduct&&this.setExportCaptureData(),0===t.product_details.is_variable_decoration&&(t.color&&t.color.length?this.exportCaptureColors(t.product_sides,0,t.color[0].file_name?t.color[0].file_name:t.color[0].hex_code):this.exportCaptureColors(t.product_sides,0,""))}},{key:"closeModal",value:function(){this.setState({modalIsOpen:!1}),this.props.modalMethod(!1)}},{key:"setPrintProfileData",value:function(){var e=this;this.props.printProfiles.forEach((function(t){if(!t.is_disabled){var a={value:t.id,label:t.name};e.printProfiles.push(a)}})),this.setEditTemplatePrintProfile()}},{key:"onTagsChanged",value:function(e){this.setState({tags:e})}},{key:"formatCategoriesData",value:function(){var e=this;this.props.categories.forEach((function(t){if(!t.is_disable){var a={label:t.name,value:t.id};e.categories.push(a)}})),this.setEditTemplateCategory()}},{key:"handleInputChange",value:function(e){var t=e.target,a="number"===t.type?t.valueAsNumber:t.value,r=t.name;this.setState(Object($.a)({},r,a))}},{key:"prepareSideData",value:function(e){for(var t=this,a={product_info:{product_id:0},sides:[],env_info:""},n=this.props.canvasData,i=[],o={},s=[],l={},c=function(a){if(s={},o={},e[a]&&e[a].isDesigned)if(o={is_designed:1,assets_doc_path:t.checkUploadImageList(a),url:n.product_sides[a].image?n.product_sides[a].image.src:"",svg:e[a].svg,vdp_csv_data:[],print_papre_size_id:4,name_number:[],print_unit:n.product_details.print_unit},n.product_details&&0===n.product_details.is_variable_decoration)for(var c=function(e){l={},(l=t.prepareOrderInfo(n.product_sides[a].decoration_settings[e].activePrintProfile)).print_method_id=n.product_sides[a].decoration_settings[e].activePrintProfile,l.print_method_name=n.product_sides[a].decoration_settings[e].print_profiles.filter((function(t){return t.id===n.product_sides[a].decoration_settings[e].activePrintProfile}))?n.product_sides[a].decoration_settings[e].print_profiles.filter((function(t){return t.id===n.product_sides[a].decoration_settings[e].activePrintProfile}))[0].name:"",l.isDesigned=n.layer_data[a][e]?1:0,l.name=n.product_sides[a].decoration_settings[e].name,l.id=n.product_sides[a].decoration_settings[e].id,l.print_area=n.product_sides[a].decoration_settings[e].print_area,l.used_colors=n.layer_data[a][e]&&n.layer_data[a][e].colors&&n.layer_data[a][e].colors.length?n.layer_data[a][e].colors:[],s["bound_"+e]={},s["bound_"+e]=Object(r.a)({},l)},u=0;u<n.product_sides[a].decoration_settings.length;u++)c(u);else l={},(l=t.prepareOrderInfo(n.product_sides[a].activePrintProfile)).id=a,l.name=n.product_sides[a].name,l.isDesigned=n.layer_data[a][0]?1:0,l.print_method_id=n.product_sides[a].activePrintProfile,l.print_method_name=t.props.printProfiles.filter((function(e){return e.id===n.product_sides[a].activePrintProfile}))[0].name,l.print_area=n.product_sides[a].print_area,l.used_colors=n.layer_data[a][0]&&n.layer_data[a][0].colors&&n.layer_data[a][0].colors.length?n.layer_data[a][0].colors:[],s.bound_0={},s.bound_0=Object(r.a)({},l);else o={is_designed:0,assets_doc_path:[],url:n.product_sides[a].image.src,svg:"",vdp_csv_data:[],print_papre_size_id:4,name_number:[],print_unit:""};o.print_area=s,o.side_name=n.product_sides[a].name,i.push(o)},u=0;u<n.product_sides.length;u++)c(u);var d={platform:navigator.platform,language:navigator.language,userAgent:navigator.userAgent};return a.product_info.product_id=n.product_details.product_id,a.sides=i,a.env_info=d,a}},{key:"handleSubmit",value:function(e){var t=this;if(e.preventDefault(),this.checkSession()){this.setIsTemplateElem();var a=Object(ee.a)(this.state.allStageElements),r=this.state,n=r.name,i=r.noOfColors,o=r.description,s=r.selectedOption,l=r.tags,c=r.selectedCategory,u=r.selTempEditOpt;if(!e.target.checkValidity()||!s||s&&0===s.length||!c||c&&0===c.length)return(!c||c&&0===c.length)&&this.setState({invalid:!0}),(!s||s&&0===s.length)&&this.setState({printMethodInvalid:!0}),void this.setState({displayErrors:!0});this.setState({invalid:!1,printMethodInvalid:!1,displayErrors:!1,saveTemplateLoader:!0});var d=[];s.forEach((function(e){e.value&&d.push(e.value)}));var p=[];c.forEach((function(e){t.props.categories.forEach((function(t){t.id===e.value&&(p.push(e.value),t.subs.forEach((function(e){e.is_disable||p.push(e.id)})))}))}));var m=[];l.forEach((function(e){m.push(e.text)}));var h=this.props.canvasData,g="";h.product_details&&1===h.product_details.is_product_image?h.color&&h.color[0]&&h.color[0].hex_code&&h.color[0].hex_code[0]&&"#"===h.color[0].hex_code[0]?g=h.color[0].hex_code:h.color&&h.color[0]&&h.color[0].file_name&&(g=h.color[0].file_name):g="";var f=!1;h.engraveSides&&(f=!!h.engraveSides[h.active_product_side]&&h.engraveSides[h.active_product_side]);var v={productUrl:h.product_sides[h.active_product_side].image.src,productColor:g};if(this.props.productDetails.is_variable_decoration&&(v={productUrl:null,productColor:g}),1===this.props.productDetails.is_configurator&&0===this.props.productDetails.is_image_based){var b={productUrl:"",productColor:""},A=new Image,y=document.getElementById("configCanvas");y.width=600,y.height=600,document.body.appendChild(y);var _=y.getContext("2d"),E=document.getElementById("configurator_side_"+h.active_product_side).children[0].outerHTML;A.src="data:image/svg+xml;base64,"+window.btoa(E),A.onload=function(){_.drawImage(A,0,0,600,600),b.productUrl=y.toDataURL(),Ne.a.exportFaceData(b,f,!1,(function(e){if(0!==a.length&&t.props.templateData&&t.props.templateData.templateEditType){var r=document.getElementById("svgcontent").cloneNode(!0),s=r.getElementsByTagName("g"),l=[],c=0;Object(ee.a)(s).forEach((function(e){"layer"===e.getAttribute("class")&&Object(ee.a)(e.getElementsByTagName("g")).forEach((function(t){"template"===t.getAttribute("type")&&(c=1,l=[],(l=Array.prototype.slice.call(t.children).slice()).forEach((function(t){e.appendChild(t)}))),0!==l.length&&(e.removeChild(t),l=[])}))})),c&&(e.svg=r.outerHTML)}var g=Object(ee.a)(t.props.faceData);g[h.active_product_side]=e,e.isDesigned=Ne.a.canvas.getAllStageElems().length?1:0,e.isDesigned&&t.props.uploadedImgData[h.active_product_side]&&t.props.uploadedImgData[h.active_product_side].forEach((function(t){e.svg=e.svg.replace(t.blobUrl,t.imgUrl)}));var f=t.prepareSideData(g),v=new FormData;v.append("is_easy_edit",u.value),v.append("name",n),v.append("custome_price",12),v.append("no_of_colors",i),v.append("template_type","template"),v.append("print_profiles",d.length?JSON.stringify(d):""),v.append("used_colors",t.state.used_colors.length?JSON.stringify(t.state.used_colors):""),v.append("description",o),v.append("tags",m.length?JSON.stringify(m):""),v.append("categories",p.length?JSON.stringify(p):""),v.append("product_variant_id",h.product_extra_details.variant_id),t.state.isTemplateEdit?t.props.productDetails.is_variable_decoration?h.product_sides.forEach((function(e,a){g[a]&&g[a].isDesigned&&(v.append("design_urls[]",g[a].designImg?g[a].designImg:t.props.editTempDesignUrls[a]),f.sides[a].is_design_retain=g[a].designImg?0:1)})):h.product_sides.forEach((function(e,a){g[a]&&g[a].isDesigned&&(v.append("design_urls[]",g[a].imgObject?g[a].imgObject:t.props.editTempDesignUrls[a]),f.sides[a].is_design_retain=g[a].imgObject?0:1)})):t.props.productDetails.is_variable_decoration?h.product_sides.forEach((function(e,t){g[t]&&g[t].designImg&&g[t].isDesigned&&v.append("design_urls[]",g[t].designImg)})):h.product_sides.forEach((function(e,t){g[t]&&g[t].imgObject&&g[t].isDesigned&&v.append("design_urls[]",g[t].imgObject)}));for(var b=0;b<f.sides.length;b++)f.sides[b].configurator_info={},f.sides[b].configurator_info=t.props.configuratorSvgCartData.sides[b];v.append("design_without_product[]",t.state.croppedImageUrl),v.append("product_info",JSON.stringify(f.product_info)),v.append("sides",JSON.stringify(f.sides)),v.append("env_info",JSON.stringify(f.env_info)),v.append("template_index",h.active_product_side),v.append("face_data",JSON.stringify(g)),v.append("layer_data",JSON.stringify(h.layer_data)),v.append("selected_category_id",t.props.selProductCategory),t.state.isTemplateEdit?We.updateTemplateDetails(t.state.editedTempId,v).then((function(e){e.data.status?(t.setState({saveTemplateLoader:!1}),t.props.showNotification("success",t.props.language.template.updateMsg),localStorage.setItem("editTempRefId",t.state.editedTempId),t.closeModal()):(t.setState({saveTemplateLoader:!1}),t.showNotification("danger",t.props.language.template.updateFailedMsg),console.log("error while saving template ",e.data))})).catch((function(e){t.showNotification("danger",t.props.language.template.updateFailedMsg),t.setState({saveTemplateLoader:!1}),console.log("error",e)})):We.saveTemplateDetails(v).then((function(e){if(e.data.status){t.setState({saveTemplateLoader:!1}),t.props.showNotification("success",t.props.language.template.saveMsg),t.isChangeProduct||t.clearStateObject();var a=[];if(e.data.capture_images)for(var r=0;r<e.data.capture_images.with_product_file.length;r++){var n={template_thumb_with_product_image:e.data.capture_images.with_product_file[r].src};a.push(n)}var i={ref_id:e.data.ref_id,template_id:e.data.template_id,product_id:h.product_details.product_id,capture_images:a};localStorage.setItem("tempInfo",JSON.stringify(i)),t.isChangeProduct?localStorage.setItem("tempRefId",e.data.ref_id):localStorage.setItem("addTempRefId",e.data.ref_id),t.closeModal()}else t.setState({saveTemplateLoader:!1}),t.showNotification("danger",t.props.language.template.failedMsg),console.log("error while saving template ",e.data)})).catch((function(e){t.showNotification("danger",t.props.language.template.failedMsg),t.setState({saveTemplateLoader:!1}),console.log("error",e)}))}))}}else Ne.a.exportFaceData(v,f,!1,(function(e){if(0!==a.length&&t.props.templateData&&t.props.templateData.templateEditType){var r=document.getElementById("svgcontent").cloneNode(!0),s=r.getElementsByTagName("g"),l=[],c=0;Object(ee.a)(s).forEach((function(e){"layer"===e.getAttribute("class")&&Object(ee.a)(e.getElementsByTagName("g")).forEach((function(t){"template"===t.getAttribute("type")&&(c=1,l=[],(l=Array.prototype.slice.call(t.children).slice()).forEach((function(t){e.appendChild(t)}))),0!==l.length&&(e.removeChild(t),l=[])}))})),c&&(e.svg=r.outerHTML)}var g=Object(ee.a)(t.props.faceData);g[h.active_product_side]=e,e.isDesigned=Ne.a.canvas.getAllStageElems().length?1:0,e.isDesigned&&t.props.uploadedImgData[h.active_product_side]&&t.props.uploadedImgData[h.active_product_side].forEach((function(t){e.svg=e.svg.replace(t.blobUrl,t.imgUrl)}));var f=t.prepareSideData(g),v=new FormData;v.append("is_easy_edit",u.value),v.append("name",n),v.append("custome_price",12),v.append("no_of_colors",i),v.append("template_type","template"),v.append("print_profiles",d.length?JSON.stringify(d):""),v.append("used_colors",t.state.used_colors.length?JSON.stringify(t.state.used_colors):""),v.append("description",o),v.append("tags",m.length?JSON.stringify(m):""),v.append("categories",p.length?JSON.stringify(p):""),v.append("product_variant_id",h.product_extra_details.variant_id),t.state.isTemplateEdit?t.props.productDetails.is_variable_decoration?h.product_sides.forEach((function(e,a){g[a]&&g[a].isDesigned&&(v.append("design_urls[]",g[a].designImg?g[a].designImg:t.props.editTempDesignUrls[a]),f.sides[a].is_design_retain=g[a].designImg?0:1)})):h.product_sides.forEach((function(e,a){g[a]&&g[a].isDesigned&&(v.append("design_urls[]",g[a].imgObject?g[a].imgObject:t.props.editTempDesignUrls[a]),f.sides[a].is_design_retain=g[a].imgObject?0:1)})):t.props.productDetails.is_variable_decoration?h.product_sides.forEach((function(e,t){g[t]&&g[t].designImg&&g[t].isDesigned&&v.append("design_urls[]",g[t].designImg)})):h.product_sides.forEach((function(e,t){g[t]&&g[t].imgObject&&g[t].isDesigned&&v.append("design_urls[]",g[t].imgObject)})),v.append("design_without_product[]",t.state.croppedImageUrl),v.append("product_info",JSON.stringify(f.product_info)),v.append("sides",JSON.stringify(f.sides)),v.append("env_info",JSON.stringify(f.env_info)),v.append("template_index",h.active_product_side),v.append("face_data",JSON.stringify(g)),v.append("layer_data",JSON.stringify(h.layer_data)),v.append("selected_category_id",t.props.selProductCategory),t.state.isTemplateEdit?We.updateTemplateDetails(t.state.editedTempId,v).then((function(e){e.data.status?(t.setState({saveTemplateLoader:!1}),t.props.showNotification("success",t.props.language.template.updateMsg),localStorage.setItem("editTempRefId",t.state.editedTempId),t.closeModal()):(t.setState({saveTemplateLoader:!1}),t.showNotification("danger",t.props.language.template.updateFailedMsg),console.log("error while saving template ",e.data))})).catch((function(e){t.showNotification("danger",t.props.language.template.updateFailedMsg),t.setState({saveTemplateLoader:!1}),console.log("error",e)})):We.saveTemplateDetails(v).then((function(e){if(e.data.status){t.setState({saveTemplateLoader:!1}),t.props.showNotification("success",t.props.language.template.saveMsg),t.isChangeProduct||t.clearStateObject();var a=[];if(e.data.capture_images)for(var r=0;r<e.data.capture_images.with_product_file.length;r++){var n={template_thumb_with_product_image:e.data.capture_images.with_product_file[r].src};a.push(n)}var i={ref_id:e.data.ref_id,template_id:e.data.template_id,product_id:h.product_details.product_id,capture_images:a};localStorage.setItem("tempInfo",JSON.stringify(i)),t.isChangeProduct?localStorage.setItem("tempRefId",e.data.ref_id):localStorage.setItem("addTempRefId",e.data.ref_id),t.closeModal()}else t.setState({saveTemplateLoader:!1}),t.showNotification("danger",t.props.language.template.failedMsg),console.log("error while saving template ",e.data)})).catch((function(e){t.showNotification("danger",t.props.language.template.failedMsg),t.setState({saveTemplateLoader:!1}),console.log("error",e)}))}))}else this.showNotification("warning","Please login again")}},{key:"handleDelete",value:function(e){var t=this.state.tags;this.setState({tags:t.filter((function(t,a){return a!==e}))})}},{key:"handleAddition",value:function(e){this.setState((function(t){return{tags:[].concat(Object(ee.a)(t.tags),[e])}}))}},{key:"updateObjTitle",value:function(e,t){var a=Object(ee.a)(this.state.allStageElements),n=e.target.value,i=Object(r.a)({},a[t].prefs);if(i.objectTitle=e.target.value,a[t].prefs=Object(r.a)({},i),this.setState({allStageElements:a}),i.sideIndex===this.props.canvasData.active_product_side){var o=document.getElementById(a[t].id);(null===o||void 0===o?void 0:o.prefs)&&(o.prefs.objectTitle=n)}else this.updatePrefsOfElement("title",i.sideIndex,a[t].id,n)}},{key:"setLockProperty",value:function(e,t,a){var n=Object(ee.a)(this.state.allStageElements),i=Object(r.a)({},n[a].prefs),o=Object(r.a)({},i.lock);if(o[e]=t,i.lock=Object(r.a)({},o),n[a].prefs=Object(r.a)({},i),this.setState({allStageElements:n}),i.sideIndex===this.props.canvasData.active_product_side){var s=document.getElementById(n[a].id);(null===s||void 0===s?void 0:s.prefs)&&(s.prefs.lock[e]=t)}else this.updatePrefsOfElement("lock",i.sideIndex,n[a].id,"",e,t);"edit"===e&&this.lockAllOfPerticularElement(i.sideIndex,n[a].id,t,a),this.checkAllLockPropStatus()}},{key:"makeClientCrop",value:function(){var e=Object(ce.a)(le.a.mark((function e(t){var a;return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.imageRef&&t.width&&t.height)){e.next=5;break}return e.next=3,this.getCroppedImg(this.imageRef,t,"newFile.jpeg");case 3:a=e.sent,this.setState({croppedImageUrl:a});case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getCroppedImg",value:function(e,t,a){var r=this,n=document.createElement("canvas"),i=e.naturalWidth/e.width,o=e.naturalHeight/e.height;n.width=t.width,n.height=t.height;var s=n.getContext("2d");return s.fillStyle="#ffff",s.fillRect(0,0,n.width,n.height),s.drawImage(e,t.x*i,t.y*o,t.width*i,t.height*o,0,0,t.width,t.height),new Promise((function(e,t){n.toBlob((function(t){if(t){t.name=a;r.fileUrl=new File([t],a,{type:"image/png"}),e(r.fileUrl)}else console.error("Canvas is empty")}),"image/jpeg")}))}},{key:"exportCaptureColors",value:function(){var e=Object(ce.a)(le.a.mark((function e(t,a,r){var n,i,o,s,l,c,u,d,p,m,h=this;return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=!1,(o=this.props.canvasData).engraveSides&&(i=!!o.engraveSides[a]&&o.engraveSides[a]),!(t.length>a)){e.next=49;break}if(!o.product_details.is_variable_decoration){e.next=29;break}if(l=!1,this.props.printSettings[0].sticker&&this.props.printSettings[0].sticker.is_sticker_enabled&&(l=!0),!o.faceData[a]||!o.faceData[a].isDesigned){e.next=20;break}return e.next=10,Ne.a.canvas.checkImageUrl(o.faceData[a].svg);case 10:if(!e.sent){e.next=17;break}return e.next=14,Ne.a.canvas.convertToString(o.faceData[a].svg,l);case 14:s=e.sent,e.next=18;break;case 17:s=o.faceData[a].svg;case 18:e.next=21;break;case 20:s="";case 21:return c=!1,this.props.decoProductId&&(c=!0),e.next=25,Ne.a.exportCaptureData("",s,"#FFFFFF",i,c,l,!0);case 25:n=e.sent,u=setInterval((function(){n.imgObject&&(Xe.push(n),a++,h.exportCaptureColors(t,a,r),clearInterval(u))}),50),e.next=49;break;case 29:if(!o.faceData[a]||!o.faceData[a].isDesigned){e.next=42;break}return e.next=32,Ne.a.canvas.checkImageUrl(o.faceData[a].svg);case 32:if(!e.sent){e.next=39;break}return e.next=36,Ne.a.canvas.convertToString(o.faceData[a].svg);case 36:d=e.sent,e.next=40;break;case 39:d=o.faceData[a].svg;case 40:e.next=43;break;case 42:d="";case 43:return p=!1,this.props.decoProductId&&(p=!0),e.next=47,Ne.a.exportCaptureData(t[a].image.src,d,r,i,p,!1,!0);case 47:n=e.sent,m=setInterval((function(){n.imgObject&&(Xe.push(n),a++,h.exportCaptureColors(t,a,r),clearInterval(m))}));case 49:case"end":return e.stop()}}),e,this)})));return function(t,a,r){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.name,a=e.noOfColors,r=e.description,n=e.tags,o=e.isSaveTemplate,s=e.saveTemplateLoader,l=e.isTemplateEdit,c=e.crop,u=e.templateThumb;return i.a.createElement(qe,{openModal:this.openModal,modalIsOpen:this.props.modalIsOpen,afterOpenModal:this.afterOpenModal,closeModal:this.closeModal,options:this.printProfiles,handleChange:this.handleChange,selectedOption:this.state.selectedOption,formatGroupLabel:Ze,groupedOptions:this.categories,selectedCategory:this.state.selectedCategory,onCategorySelect:this.onCategorySelect,handleSubmit:this.handleSubmit,displayErrors:this.state.displayErrors,invalid:this.state.invalid,name:t,noOfColors:a,description:r,handleInputChange:this.handleInputChange,tags:n,handleDelete:this.handleDelete,handleAddition:this.handleAddition,delimiters:Qe,lockPropertiesData:this.state.lockPropertiesData,allStageElements:this.state.allStageElements,updateObjTitle:this.updateObjTitle,setLockProperty:this.setLockProperty,isSaveTemplate:o,saveTemplateLoader:s,catLoading:this.props.catLoading,printMethodInvalid:this.state.printMethodInvalid,tempEditOptions:this.state.tempEditOptions,selTempEditOpt:this.state.selTempEditOpt,tempEditTypeSelected:this.tempEditTypeSelected,imgUploadStatus:this.props.imageUploadStatus,language:this.props.language,isCustomerDetailsForm:this.props.isCustomerDetailsForm,isUploadSuccess:this.props.isUploadSuccess,setAllLockProperty:this.setAllLockProperty,isTemplateEdit:l,message:this.state.modalWarningMsg,type:this.state.modalWarningType,isOpen:this.state.modalWarningIsOpen,disabledLockProp:this.state.disabledLockProp,onImageLoaded:this.onImageLoaded,onCropComplete:this.onCropComplete,onCropChange:this.onCropChange,crop:c,imgUrl:u})}}]),a}(i.a.Component),$e=Object(c.b)((function(e){return{loading:e.saveTemplate.saveLoading,error:e.saveTemplate.error,categories:e.saveTemplate.cats,faceData:e.productCanvasReducer.faceData,canvasData:e.productCanvasReducer,catLoading:e.saveTemplate.loading,tempCatLoadStatus:e.saveTemplate.tempCatLoadStatus,uploadedImgData:e.ImageReducer.sides,printSettings:e.printProfileReducer.print_profile_data,language:e.languageReducer.translation_data.filter((function(t){return t.langCode===e.languageReducer.default_lang}))[0],imageUploadStatus:e.ImageReducer.loading,productDetails:e.productCanvasReducer.product_details,templateData:e.template,allSideElements:e.saveTemplate.allSideElements,editTempDetails:e.saveTemplate.editTempDetails,editTempDesignUrls:e.saveTemplate.editTempDesignUrls,selProductCategory:e.product.selProductCategory,configuratorSvgCartData:e.ConfiguratorDesignData.configuratorSvgCartData}}))(Ke),et=a(73),tt=a(419),at=a(110),rt=function(e){return i.a.createElement("div",{id:"custWarningPop"},i.a.createElement("div",{className:"txt-13 tip alert alert-"+e.type},i.a.createElement("i",{className:"alert-icon"}),i.a.createElement("span",{className:"alert-txt"},e.message),i.a.createElement("button",{type:"button",className:"close",onClick:function(){return e.closeWarningModal()}},i.a.createElement("span",{"aria-hidden":"true"},"\xd7"))))},nt=function(e){Object(re.a)(a,e);var t=Object(ne.a)(a);function a(e){var r;return Object(te.a)(this,a),(r=t.call(this)).state={},r}return Object(ae.a)(a,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return i.a.createElement(rt,{modalWarningIsOpen:this.props.modalWarningIsOpen,closeWarningModal:this.props.closeWarningModal,message:this.props.modalWarningMsg,type:this.props.modalWarningType})}}]),a}(i.a.Component),it=Object(c.b)((function(e){return{globalImageSettings:e.globalSettingReducer.global_settings_data.image_setting,language:e.languageReducer.translation_data.filter((function(t){return t.langCode===e.languageReducer.default_lang}))[0]}}))(nt),ot=Object(n.forwardRef)((function(e,t){var a=Object(at.useStripe)(),r=Object(at.useElements)(),o={style:{base:{fontSize:"16px",color:"#424770","::placeholder":{color:"#aab7c4"}},invalid:{color:"#FF0000"}}},s=Object(n.useState)(null),l=Object(V.a)(s,2),c=l[0],u=l[1],d=Object(n.useState)(!1),p=Object(V.a)(d,2),m=p[0],h=p[1],g=e.custFirstName;""!==e.custFirstName.trim()&&(g=g+" "+e.custLastName);var f={currency:"USD",email:e.custEmail,name:g,phone:e.custPh,address:{line1:e.custAddr1,line2:e.custAddr2,country:e.custCountry,state:e.custState,city:e.custCity,postal_code:e.custZip}};Object(n.useImperativeHandle)(t,(function(){return{clickPayButton:function(){document.getElementById("paymentId").click()}}}));var v=function(){var t=Object(ce.a)(le.a.mark((function t(n){var i,o;return le.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),a&&r){t.next=3;break}return t.abrupt("return");case 3:return h(!0),i=r.getElement("cardNumber"),t.next=7,a.createToken(i);case 7:o=t.sent,h(!1),o.error?(u(o.error),e.paymentError()):(u(null),e.createPayment(o.token.id,f));case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return i.a.createElement(n.Fragment,null,i.a.createElement("form",{onSubmit:v},i.a.createElement("label",null,"Card number",i.a.createElement(at.CardNumberElement,{options:o})),i.a.createElement("label",null,"Expiration date",i.a.createElement(at.CardExpiryElement,{options:o})),i.a.createElement("label",null,"CVC",i.a.createElement(at.CardCvcElement,{options:o})),i.a.createElement("button",{id:"paymentId",type:"submit",disabled:!a,className:"d-none"},m?"Processing...":"Pay"),c&&i.a.createElement("div",{className:"text-danger mt-2"},c.message)))})),st=i.a.forwardRef((function(e,t){var a=Object(n.useRef)();if(Object(n.useImperativeHandle)(t,(function(){return{updatePriceDetails:function(){a.current.clickPayButton()}}})),e.language&&e.isCustomerDetailsForm){var r=function(t){return t.toString().replace(".",e.settings.currency.separator)},o=function(){return e.settings.currency&&void 0!==e.settings.currency.is_separator_disabled&&e.settings.currency.is_separator_disabled?Math.round(e.pricingData.productPrice)+Math.round(e.pricingData.totalPrice-e.pricingData.productPrice):e.pricingData.totalPrice},s=Object(tt.a)(e.stripePubKey),l=function(){return i.a.createElement("div",{className:"priceSummary"},i.a.createElement("div",{className:"listView"},i.a.createElement("div",{className:"listView-wrap"},i.a.createElement("div",{className:"listView-elements",style:{boxShadow:"none",padding:"0px",marginBottom:"0px",background:"none"}},i.a.createElement("div",{className:"text-options"},i.a.createElement("div",{className:"text-options-left"},e.language.kiosk.subtotal),i.a.createElement("div",{className:"text-options-right"},e.settings.currency.value,r(o())," ",e.settings.currency.post_fix))),i.a.createElement("div",{className:"listView-elements",style:{boxShadow:"none",padding:"0px",marginBottom:"0px",background:"none"}},i.a.createElement("div",{className:"text-options"},i.a.createElement("div",{className:"text-options-left"},e.language.kiosk.tax),i.a.createElement("div",{className:"text-options-right"},e.language.kiosk.free))),i.a.createElement("div",{className:"listView-elements",style:{boxShadow:"none",padding:"0px",marginBottom:"0px",background:"none"}},i.a.createElement("div",{className:"text-options big"},i.a.createElement("div",{className:"text-options-left"},e.language.kiosk.totalPrice),i.a.createElement("div",{className:"text-options-right"},e.settings.currency.value,r(o())," ",e.settings.currency.post_fix))))),i.a.createElement("button",{className:e.isCustomerDetailsForm?"btn btn-success btn-lg btn-block":"hidden",disabled:1===e.isFormSubmitting||e.imgUploadStat||e.isUploadError||!e.termConditions.is_default_status,onClick:function(){return e.validateCustFormData()}},e.language.kiosk.placeOrder))},c=function(){return e.displayPaymentSection?i.a.createElement(et.b,{uuid:"c",className:"cart-details-card"},i.a.createElement(et.d,{className:"accordion-heading"},i.a.createElement(et.c,null,e.language.kiosk.payment)),i.a.createElement(et.e,{className:"accordion-body"},i.a.createElement("div",{className:"cart-address"},i.a.createElement("div",{className:"form-row"},i.a.createElement("div",{className:"col-12 col-md-12"},i.a.createElement("div",{className:"form-group"},i.a.createElement("div",{className:e.isOfflinePaymentEnabled?"custom-control custom-radio":"d-none",key:"payment1"},i.a.createElement("input",{type:"radio",id:"radiopayment1",value:"cash",name:"paymentType",className:"custom-control-input",checked:"cash"===e.paymentType,onChange:function(t){return e.setPaymentType(t)}}),i.a.createElement("label",{className:"custom-control-label cursor-pointer",htmlFor:"radiopayment1"},e.language.kiosk.cash)),i.a.createElement("div",{className:e.isOnlinePaymentEnabled?"custom-control custom-radio":"d-none",key:"payment2"},i.a.createElement("input",{type:"radio",id:"radiopayment2",value:"card",name:"paymentType",className:"custom-control-input",checked:"card"===e.paymentType,onChange:function(t){return e.setPaymentType(t)}}),i.a.createElement("label",{className:"custom-control-label cursor-pointer",htmlFor:"radiopayment2"},e.language.kiosk.card))),i.a.createElement("div",{className:"card"===e.paymentType?"":"d-none"},i.a.createElement(at.Elements,{stripe:s},i.a.createElement(ot,{ref:a,custFirstName:e.custFirstName,custLastName:e.custLastName,custPh:e.custPh,custEmail:e.custEmail,custAddr1:e.custAddr1,custAddr2:e.custAddr2,custCountry:e.custCountry,custState:e.custState,custCity:e.custCity,custZip:e.custZip,createPayment:e.createPayment,paymentError:e.paymentError})))))))):""};return i.a.createElement("div",{className:"dt-elements dt-customerDtls"+(e.isFormSubmitting?" fullGrid":"")},i.a.createElement(n.Fragment,null,i.a.createElement("div",{className:"customerForm"},i.a.createElement(it,{modalWarningIsOpen:e.modalWarningIsOpen,modalWarningMsg:e.modalWarningMsg,modalWarningType:e.modalWarningType,closeWarningModal:e.closeWarningModal}),i.a.createElement(et.a,{preExpanded:["a"]},i.a.createElement(et.b,{uuid:"a",className:"cart-details-card"},i.a.createElement(et.d,{className:"accordion-heading"},i.a.createElement(et.c,null,e.language.kiosk.enterDetails)),i.a.createElement(et.e,{className:"accordion-body"},i.a.createElement("div",{className:"customerInput"},i.a.createElement("div",{className:"form-row"},i.a.createElement("div",{className:"col-6"},i.a.createElement("div",{className:"form-group"},i.a.createElement("label",null,e.language.kiosk.firstName," ",i.a.createElement("span",{className:"text-danger"},"*")),i.a.createElement("input",{className:""===e.custFirstName.trim()&&e.isCustFormInvalid?"form-control require-field":"form-control",value:e.custFirstName,name:"custFirstName",placeholder:e.language.kiosk.firstName,autoComplete:"none",onChange:e.handleInputChange}))),i.a.createElement("div",{className:"col-6"},i.a.createElement("div",{className:"form-group"},i.a.createElement("label",null,e.language.kiosk.lastName," ",i.a.createElement("span",{className:"text-danger"},"*")),i.a.createElement("input",{className:""===e.custLastName.trim()&&e.isCustFormInvalid?"form-control require-field":"form-control",value:e.custLastName,name:"custLastName",placeholder:e.language.kiosk.lastName,autoComplete:"none",onChange:e.handleInputChange})))),i.a.createElement("div",{className:"form-row"},i.a.createElement("div",{className:"col-6"},i.a.createElement("div",{className:"form-group"},i.a.createElement("label",null,e.language.kiosk.address1," ",i.a.createElement("span",{className:"text-danger"},"*")),i.a.createElement("input",{className:""===e.custAddr1.trim()&&e.isCustFormInvalid?"form-control require-field":"form-control",value:e.custAddr1,name:"custAddr1",placeholder:e.language.kiosk.address1,autoComplete:"none",onChange:e.handleInputChange}))),i.a.createElement("div",{className:"col-6"},i.a.createElement("div",{className:"form-group"},i.a.createElement("label",null,e.language.kiosk.address2," "),i.a.createElement("input",{className:"form-control",value:e.custAddr2,name:"custAddr2",placeholder:e.language.kiosk.address2,autoComplete:"none",onChange:e.handleInputChange})))),i.a.createElement("div",{className:"form-row"},i.a.createElement("div",{className:"col-6"},i.a.createElement("div",{className:"form-group"},i.a.createElement("label",null,e.language.kiosk.country,"  ",i.a.createElement("span",{className:"text-danger"},"*")),i.a.createElement(De.a,{className:""===e.custCountry.trim()&&e.isCustFormInvalid?"basic-single require-field":"basic-single",defaultValue:e.selCountryOpt,value:e.selCountryOpt,name:"custCountry",options:e.countryList,onChange:function(t){return e.countrySelected(t)}}))),i.a.createElement("div",{className:"col-6"},i.a.createElement("div",{className:"form-group"},i.a.createElement("label",null,e.language.kiosk.state),i.a.createElement(De.a,{className:"basic-single",defaultValue:e.selStateOpt,value:e.selStateOpt,name:"custState",options:e.stateList,onChange:function(t){return e.stateSelected(t)}})))),i.a.createElement("div",{className:"form-row"},i.a.createElement("div",{className:"col-6"},i.a.createElement("div",{className:"form-group"},i.a.createElement("label",null,e.language.kiosk.city),i.a.createElement("input",{className:"form-control",value:e.custCity,name:"custCity",placeholder:e.language.kiosk.city,autoComplete:"none",onChange:e.handleInputChange}))),i.a.createElement("div",{className:"col-6"},i.a.createElement("div",{className:"form-group"},i.a.createElement("label",null,e.language.kiosk.zip," ",i.a.createElement("span",{className:"text-danger"},"*")),i.a.createElement("input",{className:""===e.custZip.trim()&&e.isCustFormInvalid?"form-control require-field":"form-control",value:e.custZip,name:"custZip",placeholder:e.language.kiosk.zip,autoComplete:"none",onChange:e.handleInputChange})))),i.a.createElement("div",{className:"form-row"},i.a.createElement("div",{className:"col-6"},i.a.createElement("div",{className:"form-group"},i.a.createElement("label",null,e.language.kiosk.email," ",i.a.createElement("span",{className:"text-danger"},"*")),i.a.createElement("input",{className:""===e.custEmail.trim()&&e.isCustFormInvalid||e.isCustEmailInvalid?"form-control require-field":"form-control",value:e.custEmail,name:"custEmail",placeholder:e.language.kiosk.email,autoComplete:"none",onChange:e.handleInputChange}))),i.a.createElement("div",{className:"col-6"},i.a.createElement("div",{className:"form-group"},i.a.createElement("label",null,e.language.kiosk.phone," ",i.a.createElement("span",{className:"text-danger"},"*")),i.a.createElement("input",{className:""===e.custPh.trim()&&e.isCustFormInvalid||e.isCustPhInvalid?"form-control require-field":"form-control",value:e.custPh,name:"custPh",placeholder:e.language.kiosk.phone,autoComplete:"none",onChange:e.handleInputChange}))))))),i.a.createElement(et.b,{uuid:"b",className:"cart-details-card"},i.a.createElement(et.d,{className:"accordion-heading"},i.a.createElement(et.c,null,e.language.kiosk.delivery)),i.a.createElement(et.e,{className:"accordion-body"},i.a.createElement("div",{className:"form-group"},i.a.createElement("div",{className:"custom-control custom-radio",key:"delivery1"},i.a.createElement("input",{type:"radio",id:"radiodelivery1",name:"deliveryTypeRadio",value:"store",className:"custom-control-input",checked:"store"===e.deliveryType,onChange:function(t){return e.setDeliveryType(t)}}),i.a.createElement("label",{className:"custom-control-label cursor-pointer",htmlFor:"radiodelivery1"},e.language.kiosk.storePickup)),i.a.createElement("div",{className:"custom-control custom-radio",key:"delivery2"},i.a.createElement("input",{type:"radio",id:"radioDelivery2",name:"deliveryTypeRadio",value:"ship",className:"custom-control-input",checked:"ship"===e.deliveryType,onChange:function(t){return e.setDeliveryType(t)}}),i.a.createElement("label",{className:"custom-control-label cursor-pointer",htmlFor:"radioDelivery2"},e.language.kiosk.hipToAddress))))),c()),l())),function(){if(e.isFormSubmitting)return i.a.createElement("div",{className:"loader"},i.a.createElement("div",{className:"loader-gif"},i.a.createElement("svg",{version:"1.1",id:"L4",xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",viewBox:"0 0 50 50",enableBackground:"new 0 0 0 0"},i.a.createElement("circle",{fill:"#28a745",stroke:"none",cx:"5",cy:"25",r:"5"},i.a.createElement("animate",{attributeName:"opacity",dur:"1s",values:"0;1;0",repeatCount:"indefinite",begin:"0.1"})),i.a.createElement("circle",{fill:"#28a745",stroke:"none",cx:"25",cy:"25",r:"5"},i.a.createElement("animate",{attributeName:"opacity",dur:"1s",values:"0;1;0",repeatCount:"indefinite",begin:"0.2"})),i.a.createElement("circle",{fill:"#28a745",stroke:"none",cx:"45",cy:"25",r:"5"},i.a.createElement("animate",{attributeName:"opacity",dur:"1s",values:"0;1;0",repeatCount:"indefinite",begin:"0.3"})))),i.a.createElement("h3",{className:"loader-title"},e.language.kiosk.placingOrder))}())}return i.a.createElement(n.Fragment,null)})),lt=function(e){if(e.language&&e.settings&&e.isOrderPlaced){return i.a.createElement("div",{className:"dt-elements dt-finish"},i.a.createElement("div",{className:"thank-you"},i.a.createElement("div",{className:"thankyou-wrap"},i.a.createElement("div",{className:"iconBox"},i.a.createElement("i",{className:"tick-icon"})),i.a.createElement("h3",{className:"title"},e.language.kiosk.orderPlaced),i.a.createElement("h5",{className:"sub-title mb-4"},e.language.kiosk.pickupItems," ",e.deliveryDate),i.a.createElement("div",{className:"ticket"},i.a.createElement("div",{className:"ticket-box"},e.language.kiosk.id,": ",i.a.createElement("span",null,"#",e.orderId))),function(){if(e.settings.kiosk_setting.thank_you_msg&&""!==e.settings.kiosk_setting.thank_you_msg)return i.a.createElement("p",{className:"thankyou-text"},e.settings.kiosk_setting.thank_you_msg)}()),i.a.createElement("div",{className:"btns"},i.a.createElement("button",{className:"btn btn-lg btn-dark",onClick:function(){return e.kioskDesignAgain(!1)}},e.language.kiosk.designAgain),i.a.createElement("button",{className:"btn btn-lg btn-light",onClick:function(){return e.kioskDesignAgain(!0)}},e.language.kiosk.exitNow))))}return i.a.createElement(n.Fragment,null)},ct=a(22),ut=a.n(ct),dt=a(420),pt=a.n(dt),mt=function(e){if("null"!==e.options&&e.options.length>0){var t,a=Object(oe.a)(e.options);try{for(a.s();!(t=a.n()).done;){if(t.value.value)return!0}}catch(r){a.e(r)}finally{a.f()}}return!1},ht=function(e){var t=!1;return e.is_required?(""===e.value.value||""===e.value)&&(t=!0):t=!1,t},gt=function(e){var t=i.a.createElement("button",{className:"close",onClick:e.closeModal},"\xd7");return i.a.createElement(be.a,{id:"quote-request-modal",isOpen:e.isRequestQuoteModal,toggle:e.closeModal,centered:!0,scrollable:!0,modalClassName:"custom"},e.formFetchingLoader&&i.a.createElement(n.Fragment,null,i.a.createElement(Ae.a,null,i.a.createElement("div",{className:"loader",key:0},i.a.createElement("div",{className:"loader-gif mb-3"},i.a.createElement("svg",{width:"38",height:"38",viewBox:"0 0 38 38"},i.a.createElement("g",{fill:"none",fillRule:"evenodd"},i.a.createElement("g",{transform:"translate(1 1)",strokeWidth:"2"},i.a.createElement("circle",{strokeOpacity:".5",cx:"18",cy:"18",r:"18"}),i.a.createElement("path",{d:"M36 18c0-9.94-8.06-18-18-18"},i.a.createElement("animateTransform",{attributeName:"transform",type:"rotate",from:"0 18 18",to:"360 18 18",dur:"1s",repeatCount:"indefinite"})))))),i.a.createElement("h3",{className:"loader-title"},"Getting Forms"),i.a.createElement("h4",{className:"loader-text"},"Please wait...")))),e.formSavingLoader&&i.a.createElement(n.Fragment,null,i.a.createElement(Ae.a,null,i.a.createElement("div",{className:"loader",key:0},i.a.createElement("div",{className:"loader-gif mb-3"},i.a.createElement("svg",{width:"38",height:"38",viewBox:"0 0 38 38"},i.a.createElement("g",{fill:"none",fillRule:"evenodd"},i.a.createElement("g",{transform:"translate(1 1)",strokeWidth:"2"},i.a.createElement("circle",{strokeOpacity:".5",cx:"18",cy:"18",r:"18"}),i.a.createElement("path",{d:"M36 18c0-9.94-8.06-18-18-18"},i.a.createElement("animateTransform",{attributeName:"transform",type:"rotate",from:"0 18 18",to:"360 18 18",dur:"1s",repeatCount:"indefinite"})))))),i.a.createElement("h3",{className:"loader-title"},"Saving Quotation"),i.a.createElement("h4",{className:"loader-text"},"Please wait...")))),e.custDetailsLoader&&!e.formFetchingLoader&&i.a.createElement(n.Fragment,null,i.a.createElement(Ae.a,null,i.a.createElement("div",{className:"loader",key:0},i.a.createElement("div",{className:"loader-gif mb-3"},i.a.createElement("svg",{width:"38",height:"38",viewBox:"0 0 38 38"},i.a.createElement("g",{fill:"none",fillRule:"evenodd"},i.a.createElement("g",{transform:"translate(1 1)",strokeWidth:"2"},i.a.createElement("circle",{strokeOpacity:".5",cx:"18",cy:"18",r:"18"}),i.a.createElement("path",{d:"M36 18c0-9.94-8.06-18-18-18"},i.a.createElement("animateTransform",{attributeName:"transform",type:"rotate",from:"0 18 18",to:"360 18 18",dur:"1s",repeatCount:"indefinite"})))))),i.a.createElement("h3",{className:"loader-title"},"Getting Customer Details"),i.a.createElement("h4",{className:"loader-text"},"Please wait...")))),!e.formFetchingLoader&&!e.formSavingLoader&&!e.custDetailsLoader&&i.a.createElement(n.Fragment,null,i.a.createElement(Pe.a,{close:t},"Request a Quote"),i.a.createElement(Ae.a,null,i.a.createElement("div",{className:"ani-top-btm quote-alert"+(e.isOpen?" show":" hidden")},i.a.createElement("div",{className:"txt-13 tip alert alert-"+e.type},i.a.createElement("i",{className:"alert-icon"}),i.a.createElement("span",{className:"alert-txt"},e.message))),i.a.createElement("form",{className:e.displayErrors?" displayErrors":"",noValidate:!0,onSubmit:e.handleSubmit},e.dynamiceFormFields.map((function(t,a){return i.a.createElement(n.Fragment,{key:a},function(e,t,a){var r="";return"text"===e.input_type?r=i.a.createElement("div",{className:"form-group"},i.a.createElement("label",{htmlFor:e.label_id},e.label_name),e.is_required?i.a.createElement("span",{className:"text-danger"},"*"):null,i.a.createElement("input",{type:"text",id:e.label_id,className:"form-control",name:"value",value:e.value,placeholder:e.placeholder,required:e.is_required,onChange:function(e){return a.handleInputChange(e,t,"text")}})):"textarea"===e.input_type?r=i.a.createElement("div",{className:"form-group"},i.a.createElement("label",{htmlFor:e.label_id},e.label_name),e.is_required?i.a.createElement("span",{className:"text-danger"},"*"):null,i.a.createElement("textarea",{className:"form-control",name:"value",id:e.label_id,value:e.value,placeholder:e.placeholder,required:e.is_required,onChange:function(e){return a.handleInputChange(e,t,"text")}})):"select option"===e.input_type?r=i.a.createElement("div",{className:"form-group"},i.a.createElement("label",{htmlFor:e.label_id},e.label_name),e.is_required?i.a.createElement("span",{className:"text-danger"},"*"):null,i.a.createElement(De.a,{className:ht(e)&&a.displayErrors?"basic-single require-field":"basic-single ",defaultValue:e.value,name:"tempEditType",options:e.options,onChange:function(e){return a.handleInputChange(e,t,"drop-down")},required:e.is_required})):"email"===e.input_type?r=i.a.createElement("div",{className:"form-group"},i.a.createElement("label",{htmlFor:e.label_id},e.label_name),e.is_required?i.a.createElement("span",{className:"text-danger"},"*"):null,i.a.createElement("input",{type:"text",id:e.label_id,name:"value",value:e.value,className:e.isInvalidEmail?"form-control require-field":"form-control",onChange:function(e){return a.handleInputChange(e,t,"email")},placeholder:e.placeholder,required:e.is_required})):"number"===e.input_type?r=i.a.createElement("div",{className:"form-group"},i.a.createElement("label",{htmlFor:e.label_id},e.label_name),e.is_required?i.a.createElement("span",{className:"text-danger"},"*"):null,i.a.createElement("input",{id:e.label_id,type:"text",value:e.value,onKeyDown:function(e){return"e"===e.key&&e.preventDefault()},className:"form-control",onChange:function(e){return a.handleInputChange(e,t,"number")},placeholder:e.placeholder,required:e.is_required})):"radio button"===e.input_type?r=i.a.createElement("div",{className:"form-group"},i.a.createElement("label",null,e.label_name),e.is_required?i.a.createElement("span",{className:"text-danger"},"*"):null,i.a.createElement("div",{className:"d-flex"},e.options.map((function(r,n){return i.a.createElement("div",{className:"custom-control custom-radio mr-2",key:n},i.a.createElement("input",{type:"radio",id:e.label_id+n,value:r.name,name:e.label_name,onChange:function(e){return a.handleInputChange(e,t,"radio")},className:"custom-control-input",required:e.is_required}),i.a.createElement("label",{className:"custom-control-label",htmlFor:e.label_id+n},r.name))}))),e.is_required&&!e.value&&a.displayErrors?i.a.createElement("span",{className:"text-danger"},"Please select the options"):null):"checkbox"===e.input_type?r=i.a.createElement("div",{className:"form-group"},0===e.options.length||"null"===e.options?i.a.createElement("div",{className:"custom-control custom-checkbox"},i.a.createElement("input",{type:"checkbox",id:e.label_id,name:"checkbox",value:e.value,checked:!!e.value,onChange:function(e){return a.handleInputChange(e,t,"checkbox")},className:"custom-control-input",required:e.is_required}),i.a.createElement("label",{className:"custom-control-label",htmlFor:e.label_id},e.label_name,e.is_required?i.a.createElement("span",{className:"text-danger"},"*"):null)):i.a.createElement(n.Fragment,null,i.a.createElement("label",{className:"label",htmlFor:e.label_id},e.label_name,e.is_required?i.a.createElement("span",{className:"text-danger"},"*"):null),i.a.createElement("div",{className:"d-flex"},e.options.map((function(r,n){return i.a.createElement("div",{className:"custom-control custom-checkbox mr-2",key:t+n},i.a.createElement("input",{type:"checkbox",id:t+n,name:"checkbox",value:r.value,checked:!!r.value,onChange:function(e){return a.handleInputChange(e,t,"checkbox",n)},className:"custom-control-input",required:e.is_required}),i.a.createElement("label",{className:"custom-control-label",htmlFor:t+n},r.name))}))),e.is_required&&!mt(e)&&a.displayErrors?i.a.createElement("span",{className:"text-danger"},"Please select atleast one option."):null),!e.is_required||e.value||!a.displayErrors||0!==e.options.length&&"null"!==e.options?null:i.a.createElement("span",{className:"text-danger"},"Please select the option")):"upload files"===e.input_type?r=i.a.createElement("div",{className:"form-group"},i.a.createElement("label",{htmlFor:e.label_id,className:"mr-2"},e.label_name,e.is_required?i.a.createElement("span",{className:"text-danger"},"*"):null,e.options.format&&e.options.format.length>0?i.a.createElement("span",{className:"text-black font-weight-bold"},"( Supproted formats are ",e.options.format,")"):null)," ",i.a.createElement("br",null),e.is_multiple_upload?i.a.createElement("input",{type:"file",name:"value",required:e.is_required,id:e.label_id,onChange:function(e){return a.handleInputChange(e,t,"files")},accept:e.options.format,multiple:!0}):i.a.createElement("input",{type:"file",id:e.label_id,name:"value",onChange:function(e){return a.handleInputChange(e,t,"files")},accept:e.options.format,required:e.is_required}),e.is_required&&!e.value&&a.displayErrors?i.a.createElement("span",{className:"text-danger"},"Please upload the files"):null,e.isInvalidFile?i.a.createElement("span",{className:"text-danger"},"Invalid File Uploaded"):null):"date picker"===e.input_type&&(r=i.a.createElement("div",{className:"form-group"},i.a.createElement("label",{htmlFor:e.label_id},e.label_name),e.is_required?i.a.createElement("span",{className:"text-danger"},"*"):null,i.a.createElement("br",null),i.a.createElement(pt.a,{format:"dd-MM-y",dayPlaceholder:"DD",monthPlaceholder:"MM",yearPlaceholder:"YYYY",showLeadingZeros:!0,className:e.is_required&&!e.value&&a.displayErrors?"form-control require-field":"form-control ",clearIcon:null,onChange:function(e){return a.handleInputChange(e,t,"date")},value:e.value}))),r}(t,a,e))})))),i.a.createElement(ye.a,null,i.a.createElement("div",{className:"d-flex justify-content-end"},i.a.createElement("button",{type:"button",className:"btn btn-success text-right pull-right",disabled:e.isButtonDisabled,onClick:e.handelQuoteRequestFormSubmit},"Request")))))},ft=0,vt=function(e){Object(re.a)(a,e);var t=Object(ne.a)(a);function a(e){var n;return Object(te.a)(this,a),(n=t.call(this,e)).fetchQuotationForm=function(){0===n.state.dynamicFormData.length&&(n.setState({isLoading:!0}),Oe.e().then((function(e){if(e&&e.status){var t=e.data.map((function(e,t){return"select option"===e.input_type.toLocaleLowerCase()&&(e.value=e.value.map((function(e){return{label:e.name,value:e.value}}))),"checkbox"===e.input_type.toLocaleLowerCase()&&"null"!==e.value&&e.value.length>0&&(e.value=e.value.map((function(e){return{name:e.name,value:!1}}))),{xe_id:e.xe_id,label_name:e.label,label_id:e.label_slug,input_type:e.input_type.toLocaleLowerCase(),placeholder:e.placeholder,is_multiple_upload:"upload files"===e.input_type.toLocaleLowerCase()&&e.value.is_multiple_upload,value:"select option"===e.input_type.toLocaleLowerCase()?e.value[0]:"",sort_order:t+1,options:e.value,isInvalidEmail:!1,isInvalidFile:!1,is_required:e.is_required,is_default:e.is_default}}));n.setState({dynamicFormData:e.data,formFieldsObj:t})}else n.showNotification("danger",n.props.language.quotation.formError);n.setState({isLoading:!1})})))},n.handleInputChange=function(e,t,a){var i,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";switch(a){case"text":i=n.state.formFieldsObj.map((function(a,r){return r===t&&(a.value=e.target.value),a}));break;case"drop-down":i=n.state.formFieldsObj.map((function(a,r){return r===t&&(a.value=e.value),a}));break;case"email":i=n.state.formFieldsObj.map((function(a,r){return r===t&&(a.value=e.target.value,a.isInvalidEmail=!n.validateEmail(e.target.value)),a}));break;case"number":var s=/^[0-9\b]+$/;s.test(e.target.value)&&(i=n.state.formFieldsObj.map((function(a,r){return r===t&&(a.value=e.target.value),a})));break;case"radio":i=n.state.formFieldsObj.map((function(a,r){return r===t&&(a.value=e.target.value),a}));break;case"checkbox":i=n.state.formFieldsObj.map((function(a,r){return r===t&&(a.options&&a.options.length>0&&"null"!==a.options&&(a.options=a.options.map((function(t,a){return a===o&&(t.value=!!e.target.checked),t}))),a.value=!!e.target.checked),a}));break;case"files":if(e.target.files.length>0){var l,c=!1,u=Object(oe.a)(e.target.files);try{for(u.s();!(l=u.n()).done;){var d=l.value;n.validInputFile(d.name,n.state.formFieldsObj[t].options.format)||(c=!0)}}catch(p){u.e(p)}finally{u.f()}i=n.state.formFieldsObj.map((function(a,r){return r!==t||c||(a.value=e.target.files),a.isInvalidFile=c,a}))}break;case"date":i=n.state.formFieldsObj.map((function(a,r){return r===t&&(a.value=e),a}));break;default:i=Object(r.a)({},n.state.formFieldsObj)}n.setState(Object(r.a)({},i))},n.validateEmail=function(e){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase())},n.validInputFile=function(e,t){var a="."+e.split(".")[1];if(!(t.length>0))return!0;var r,n=t.split(","),i=Object(oe.a)(n);try{for(i.s();!(r=i.n()).done;){if(r.value.toLocaleLowerCase()===a.toLocaleLowerCase())return!0}}catch(o){i.e(o)}finally{i.f()}return!1},n.closeModal=function(){n.setState({isLoading:!1,isSaveTemplateLoader:!1,displayErrors:!1,dynamicFormData:[],formFieldsObj:[],custDetailsLoader:!1}),n.props.saveRequestQuote(!1)},n.getFilesArrayName=function(e,t,a){var r=a;if(1===t.length)r[e]="attachment_"+ft,ft++;else if(t.length>1){for(var n=[],i=0;i<t.length;i++)n.push("attachment_"+ft),ft++;r[e]=n.join()}return r},n.getAllUniqueArray=function(e){return e.filter((function(t,a){var r=JSON.stringify(t);return a===e.findIndex((function(e){return JSON.stringify(e)===r}))}))},n.handelQuoteRequestFormSubmit=function(){var e=0,t=0,a=n.state.formFieldsObj.map((function(t){return!t.value&&t.is_required&&e++,("email"===t.input_type&&t.isInvalidEmail||"files"===t.input_type&&t.isInvalidFile)&&e++,t}));if(n.setState({formFieldsObj:a,displayErrors:e>0}),!e){var r=new FormData,i=n.getAllUniqueArray(n.props.productData()),o={};n.state.formFieldsObj.forEach((function(e){if("select option"===e.input_type)o[e.label_name]=""===e.value.value?"":e.value;else if("upload files"===e.input_type){o.attachments||(o.attachments={}),o.attachments=n.getFilesArrayName(e.label_name,e.value,o.attachments);var a,i=Object(oe.a)(e.value);try{for(i.s();!(a=i.n()).done;){var s=a.value;r.append("attachment_"+t,s),t++}}catch(m){i.e(m)}finally{i.f()}}else if("date picker"===e.input_type)if(e.value&&""!==e.value){var l=new Date(e.value.toString().replace(/-/g,"/")).toLocaleString("en-US",{year:"numeric",month:"numeric",day:"numeric"}),c=l.split("/")[1];c<10&&(c="0"+c.trim());var u=l.split("/")[0];u<10&&(u="0"+u.trim());var d=l.split("/")[2];o[e.label_name]=d+"/"+u+"/"+c}else o[e.label_name]="";else if("checkbox"===e.input_type&&e.options&&e.options.length>0&&"null"!==e.options){var p=[];e.options.forEach((function(e){e.value&&p.push(e.name)})),o[e.label_name]=p}else o[e.label_name]=e.value}));var s=[];i.forEach((function(e){for(var t={},a=0,r=Object.entries(e.options);a<r.length;a++){var n=Object(V.a)(r[a],2),i=n[0],o=n[1];i.includes("_id")||(t[i]=o)}t.qty=e.qty,t.variant_id=e.variant_id,s.push(t)}));var l={form_details:o,design_details:{custom_design_id:n.props.customDesignId},product_details:{product_id:i[0].product_id,variation:s},customer_id:n.props.customerData&&n.props.customerData.customerId?n.props.customerData.customerId:n.props.quoteCustId?n.props.quoteCustId:0,total_price:Number(n.props.pricingData.totalPrice),decoration_price:Number(n.getTotalDecoPrice()),is_quotation_enable:n.props.licenseAddOns.includes("quotation")?1:0};r.append("data",JSON.stringify(l)),n.setState({isSaveTemplateLoader:!0}),Oe.w(r).then((function(e){e&&e.data.status?(ft=0,n.setState({isSaveTemplateLoader:!1}),n.closeModal(),n.props.showNotification("success",n.props.language.quotation.saved)):(ft=0,n.setState({isSaveTemplateLoader:!1}),n.showNotification("danger",e.data.message))})).catch((function(e){ft=0,n.setState({isSaveTemplateLoader:!1}),n.showNotification("danger",n.props.language.quotation.failed)}))}},n.showNotification=function(e,t){n.state.modalWarningIsOpen||n.setState({modalWarningIsOpen:!0,modalWarningMsg:t,modalWarningType:e},(function(){setTimeout((function(){n.setState({modalWarningIsOpen:!1})}),5e3)}))},n.getTotalDecoPrice=function(){return(1===n.props.canvasData.product_details.is_variable_decoration&&"custom"===n.props.canvasData.selectedVarSize.type||1===n.props.canvasData.product_details.is_variable_decoration&&n.state.isStickerEnabled&&n.props.stickerReducer&&"sheet"===n.props.stickerReducer.selectedSheetOption?n.props.pricingData.totalPrice:n.props.pricingData.totalPrice-n.props.pricingData.productPrice-n.props.pricingData.tax).toFixed(2)},n.state={isLoading:!1,isSaveTemplateLoader:!1,displayErrors:!1,dynamicFormData:[],formFieldsObj:[],modalWarningIsOpen:!1,modalWarningMsg:"",modalWarningType:"",custDetailsLoader:!1},n}return Object(ae.a)(a,[{key:"componentDidMount",value:function(){this.props.isOpen&&(this.fetchQuotationForm(),this.props.quoteCustId&&this.fetchCustomerDetails(this.props.quoteCustId))}},{key:"fetchCustomerDetails",value:function(e){var t=this;this.setState({custDetailsLoader:!0}),Oe.o(e).then((function(e){var a;e&&e.status?(a=t.state.formFieldsObj.map((function(t){return"customername"===t.label_id&&t.is_default&&(t.value=e.data.first_name&&""!==e.data.first_name?e.data.first_name+" ":""+(e.data.last_name&&""!==e.data.last_name)?e.data.last_name:""),"customeremail"===t.label_id&&t.is_default&&(t.value=e.data.email),t})),t.setState(Object(r.a)({},a)),t.setState({custDetailsLoader:!1})):t.setState({custDetailsLoader:!1})})).catch((function(e){console.log("error"),t.setState({custDetailsLoader:!1})}))}},{key:"render",value:function(){return this.props.isOpen?i.a.createElement(gt,{isRequestQuoteModal:this.props.isOpen,closeModal:this.closeModal,displayErrors:this.state.displayErrors,formFetchingLoader:this.state.isLoading,formSavingLoader:this.state.isSaveTemplateLoader,dynamiceFormFields:this.state.formFieldsObj,handleInputChange:this.handleInputChange,isButtonDisabled:!this.props.customDesignId,handelQuoteRequestFormSubmit:this.handelQuoteRequestFormSubmit,message:this.state.modalWarningMsg,type:this.state.modalWarningType,isOpen:this.state.modalWarningIsOpen,custDetailsLoader:this.state.custDetailsLoader}):null}}]),a}(n.Component),bt=(Object(c.b)((function(e){return{language:e.languageReducer.translation_data.filter((function(t){return t.langCode===e.languageReducer.default_lang}))[0],globalSettings:e.globalSettingReducer}}))(vt),a(421)),At=a.n(bt),yt=function(e){if(0===e.teamMembers.length)return i.a.createElement("div",{className:"dt-elements dt-checkout"},i.a.createElement("div",{className:"name-number"},i.a.createElement("div",{className:"cart-details-title"},i.a.createElement(he.a,{width:100})),i.a.createElement("div",{className:"scrollable-table-wrapper"},i.a.createElement("table",{className:"table"},i.a.createElement("thead",null,i.a.createElement("tr",null,i.a.createElement("td",null,i.a.createElement(he.a,null)),i.a.createElement("td",null,i.a.createElement(he.a,null)),i.a.createElement("td",null,i.a.createElement(he.a,null)),i.a.createElement("td",null,i.a.createElement(he.a,null)),i.a.createElement("td",null,i.a.createElement(he.a,null))))))));return i.a.createElement("div",{className:"dt-elements dt-checkout"},i.a.createElement("div",{className:"name-number"},i.a.createElement("div",{className:"cart-details-title"},i.a.createElement("button",{type:"button",className:"btn btn-action",onClick:function(){return e.onChangeOrderOption(!1)}},i.a.createElement("i",{className:"nf nf-left-arrow"})),i.a.createElement("h2",{className:"pName-title",dangerouslySetInnerHTML:{__html:e.productDetail.product_name}})),i.a.createElement("div",{className:"scrollable-table-wrapper"+(e.teamMembers.length>4?" overflow-active":"")+(e.checkoutPreloader?" hidden":"")},i.a.createElement("table",{className:"table"},i.a.createElement("thead",null,e.teamMembers.map((function(t,a){return i.a.createElement(n.Fragment,{key:a},0===a&&i.a.createElement("tr",null,t.map((function(t,a){return i.a.createElement(n.Fragment,{key:a},("name"===t.type||"number"===t.type||"image"===t.type)&&i.a.createElement("th",{key:t.type},t.name),"color"===t.type&&i.a.createElement("th",{className:e.nameNumberData.allow_change_color?"":"hidden",key:t.type},t.name),"size"===t.type&&i.a.createElement("th",{className:e.nameNumberData.allow_change_size?"":"hidden",key:t.type},t.name),"quantity"===t.type&&i.a.createElement("th",{className:e.nameNumberData.allow_color_qty?"":"hidden",key:t.type},t.name),"remove"===t.type&&e.teamMembers.length>1&&i.a.createElement("th",{key:t.type},t.name))}))))}))),i.a.createElement("tbody",null,e.teamMembers.map((function(t,a){return i.a.createElement("tr",{key:a},t.map((function(t,r){return i.a.createElement(n.Fragment,{key:r},"name"===t.type&&i.a.createElement("td",null,i.a.createElement("input",{type:"text",className:"form-control form-control-sm",style:{minWidth:e.isMobileView?"120px":""},id:"inputFileName"+a,value:t.value,onChange:function(n){return e.onChangeValue(n,a,r,t.type)},autoFocus:0===r})),"number"===t.type&&i.a.createElement("td",null,i.a.createElement("input",{type:"text",className:"form-control form-control-sm",id:"inputFileNumber"+a,value:t.value,style:{maxWidth:"100px"},onChange:function(n){return e.onChangeValue(n,a,r,t.type)},pattern:"[0-9]*"})),"image"===t.type&&i.a.createElement("td",null,i.a.createElement("div",{className:"d-flex align-items-center"},i.a.createElement("figure",{className:"sponserLogo"},i.a.createElement("img",{src:t.value,height:31,width:31})," "),i.a.createElement("div",{className:"custom-file"},i.a.createElement("input",Object($.a)({type:"file",className:"custom-file-input",id:"inputGroupFile"+a,accept:"image/*",onChange:function(t){return e.onImageChange(t.target.files,a,r)}},"accept","image/*")),i.a.createElement("label",{className:"custom-file-label",htmlFor:"inputGroupFile"+a},e.language.team.upload)))),"color"===t.type&&i.a.createElement("td",{className:e.nameNumberData.allow_change_color?"":"hidden"},function(t,a,r){return i.a.createElement("div",{className:"dropdown"},e.productColors.length>1&&i.a.createElement("div",{className:"d-flex align-items-center dropdown-toggle",id:"dropdownChangeColor","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},e.productColors.map((function(e,a){return i.a.createElement(n.Fragment,{key:a},e.name===t&&""!==e.hex_code&&i.a.createElement("div",{className:"color-btn",style:{backgroundColor:e.hex_code}}),e.name===t&&""!==e.file_name&&i.a.createElement("div",{className:"color-btn",style:{backgroundImage:"url("+e.file_name+")",backgroundSize:"cover"}}),e.name===t&&""===e.file_name&&""===e.hex_code&&i.a.createElement("div",{className:"color-btn",style:{backgroundColor:"#ffff"},title:e.name}))}))),1===e.productColors.length&&i.a.createElement("div",{className:"d-flex align-items-center"},e.productColors.map((function(e){return i.a.createElement(n.Fragment,{key:e.id},e.name===t&&""!==e.hex_code&&i.a.createElement("div",{className:"color-btn",style:{backgroundColor:e.hex_code}}),e.name===t&&""!==e.file_name&&i.a.createElement("div",{className:"color-btn",style:{backgroundImage:"url("+e.file_name+")",backgroundSize:"cover"}}),e.name===t&&""===e.file_name&&""===e.hex_code&&i.a.createElement("div",{className:"color-btn",style:{backgroundColor:"#ffff"},title:e.name}))}))),i.a.createElement("div",{className:"dropdown-menu",style:{minWidth:"10.6rem"},"aria-labelledby":"dropdownChangeColor"},i.a.createElement("div",{className:"dropdown-item p-0"},i.a.createElement("div",{className:"color-block m-0"},e.productColors.map((function(o){return i.a.createElement(n.Fragment,{key:o.name},""!==o.hex_code&&t!==o.name&&i.a.createElement("div",{className:"color-box",style:{backgroundColor:o.hex_code},onClick:function(){return e.onColorChange(o,a,r)},title:o.name,key:o.id}),""!==o.file_name&&t!==o.name&&i.a.createElement("div",{className:"color-box",style:{backgroundImage:"url("+o.file_name+")",backgroundSize:"cover"},onClick:function(){return e.onColorChange(o,a,r)},title:o.name,key:o.id}),""===o.file_name&&""===o.hex_code&&t!==o.name&&i.a.createElement("div",{className:"color-box",style:{backgroundImage:"url("+o.file_name+")",backgroundSize:"cover"},onClick:function(){return e.onColorChange(o,a,r)},title:o.name,key:o.id}))}))))))}(t.value,a,r)),"size"===t.type&&i.a.createElement("td",{className:e.nameNumberData.allow_change_size?"":"hidden"},i.a.createElement("div",{className:"dropdown"},i.a.createElement("div",{className:"d-flex align-items-center justify-content-between btn btn-sm btn-default bg-light btn-block dropdown-toggle",id:"dropdownChangeColor",style:{minWidth:"60px"},"data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},t.value),e.selectedColorSize[t[e.globalColorAttribute]]&&i.a.createElement("div",{className:"dropdown-menu","aria-labelledby":"dropdownChangeColor"},e.selectedColorSize[t[e.globalColorAttribute]].map((function(t){return i.a.createElement("div",{className:"dropdown-item cursor-pointer",onClick:function(){return e.onSelectSize(t,a,r)},key:t.value},t.value)}))))),"quantity"===t.type&&i.a.createElement("td",{className:e.nameNumberData.allow_color_qty?"":"hidden"},i.a.createElement("input",{type:"text",className:"form-control form-control-sm",id:"qty"+a,value:t.value,style:{maxWidth:"60px"},onChange:function(n){return e.onChangeValue(n,a,r,t.type)},onBlur:function(t){return e.validateQty(t,a,r)},pattern:"[0-9]*"})),"remove"===t.type&&e.teamMembers.length>1&&i.a.createElement("td",{className:"text-center"},i.a.createElement("div",{className:"btn btn-danger btn-sm btn-round",onClick:function(){return e.removeMember(a,r)}},i.a.createElement("i",{className:"nxi nxi-remove"}))))})))})),e.isAddAnother&&i.a.createElement("tr",null,i.a.createElement("td",null,i.a.createElement(he.a,null)),i.a.createElement("td",null,i.a.createElement(he.a,null)),i.a.createElement("td",null,i.a.createElement(he.a,null)),i.a.createElement("td",null,i.a.createElement(he.a,null)),i.a.createElement("td",null,i.a.createElement(he.a,null)))))),e.teamMembers.length>0&&i.a.createElement("div",{className:"tableBtns"},i.a.createElement("div",{className:"d-flex"},i.a.createElement("div",{className:"btn btn-sm btn-link text-dark p-0"+(e.isAddAnother?" disabled":""),onClick:e.addAnotherPlayer},i.a.createElement("i",{className:"nf nf-plus"})," ",e.language.team.addAnother," "),e.isUploadCSV&&i.a.createElement(At.a,{className:"btn btn-sm btn-link text-dark p-0 ml-3",handleFiles:e.handleFiles,fileTypes:".csv"},i.a.createElement("button",{className:"btn btn-sm btn-link text-dark p-0 ml-3"},i.a.createElement("i",{className:"nf nf-upload"})," ",e.language.team.uploadCSV))),e.isUploadCSV&&i.a.createElement("small",{className:"sampleCsv"},i.a.createElement("button",{className:"btn btn-sm btn-dark",onClick:e.downloadCSV},e.language.team.download," ",e.language.team.sampleCSV," "))),e.checkoutPreloader&&i.a.createElement("div",{className:"loader"},i.a.createElement("div",{className:"loader-gif"},i.a.createElement("svg",{version:"1.1",id:"L4",xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",viewBox:"0 0 50 50",enableBackground:"new 0 0 0 0"},i.a.createElement("circle",{fill:"#28a745",stroke:"none",cx:"5",cy:"25",r:"5"},i.a.createElement("animate",{attributeName:"opacity",dur:"1s",values:"0;1;0",repeatCount:"indefinite",begin:"0.1"})),i.a.createElement("circle",{fill:"#28a745",stroke:"none",cx:"25",cy:"25",r:"5"},i.a.createElement("animate",{attributeName:"opacity",dur:"1s",values:"0;1;0",repeatCount:"indefinite",begin:"0.2"})),i.a.createElement("circle",{fill:"#28a745",stroke:"none",cx:"45",cy:"25",r:"5"},i.a.createElement("animate",{attributeName:"opacity",dur:"1s",values:"0;1;0",repeatCount:"indefinite",begin:"0.3"})))),i.a.createElement("h3",{className:"loader-title"},e.language.cart.prepareCart))),i.a.createElement("div",{className:"cart-option"},i.a.createElement("div",{className:"justify-content-between mt-3 d-none d-md-flex d-lg-flex d-xl-flex"},e.orderNotes&&e.orderNotes.is_enabled&&i.a.createElement(n.Fragment,null,i.a.createElement(de.a,{trigger:"legacy",placement:"top",target:"addNotePopup"},i.a.createElement(fe.a,null,e.language.cart.notes),i.a.createElement(pe.a,null,i.a.createElement("textarea",{className:"form-control",value:e.orderNotes.userInput,onChange:function(t){e.onChangeOrderNote(t)}}),e.maxCharAllowed&&i.a.createElement("span",null,e.language.cart.charactersLeft,": ",e.charLeft),i.a.createElement("small",{className:"form-text text-muted"},e.language.cart.orderNotes))),i.a.createElement("div",{className:"btn btn-link p-0 text-dark",id:"addNotePopup"},i.a.createElement("i",{className:"nf nf-files"})," ",e.language.team.addNote)),e.termConditions&&e.termConditions.is_enabled&&i.a.createElement(n.Fragment,null,i.a.createElement(de.a,{trigger:"legacy",placement:"top",target:"termCondition"},i.a.createElement(pe.a,null,i.a.createElement("div",{className:"p-3"},e.language.cart.cartTermsCondition))),i.a.createElement("div",{className:"custom-control custom-checkbox"},i.a.createElement("input",{type:"checkbox",className:"custom-control-input",id:"customControlAutosizing",checked:e.termConditions.is_default_status,onChange:function(t){e.onChangeTermCondition(t)}}),i.a.createElement("label",{className:"custom-control-label",htmlFor:"customControlAutosizing"},e.language.main.agree),i.a.createElement("label",{className:"pl-1 text-dark cursor-pointer text-underline",id:"termCondition"},e.language.main.tc)))),i.a.createElement("div",{className:"flex-column d-flex d-sm-flex d-md-none d-lg-none d-xl-none"},e.orderNotes&&e.orderNotes.is_enabled&&i.a.createElement(n.Fragment,null,i.a.createElement("div",{className:"form-group note-box"},i.a.createElement("label",{className:"pName-title"},e.language.cart.addNote),i.a.createElement("textarea",{cols:"30",rows:"2",className:"form-control",value:e.orderNotes.userInput,onChange:function(t){e.onChangeOrderNote(t)}}),i.a.createElement("small",{className:"form-text text-muted"},e.language.cart.orderNotes))),e.termConditions&&e.termConditions.is_enabled&&i.a.createElement(n.Fragment,null,i.a.createElement("div",{className:"terms-box pb-3"},i.a.createElement("label",{className:"pName-title mb-2"},e.language.main.tc),i.a.createElement("div",{className:"terms-txt"},e.language.cart.cartTermsCondition),i.a.createElement("div",{className:"custom-control custom-checkbox"},i.a.createElement("input",{type:"checkbox",className:"custom-control-input",id:"termsCustomControlAutosizing",checked:e.termConditions.is_default_status,onChange:function(t){e.onChangeTermCondition(t)}}),i.a.createElement("label",{className:"custom-control-label",htmlFor:"termsCustomControlAutosizing"},e.language.main.agree," ",e.language.main.tc)))))))},_t=[],Et=[],St=[],Ct={},xt="",wt="",kt="",It=!0,Nt=0,Ot=[],Pt=function(e){Object(re.a)(a,e);var t=Object(ne.a)(a);function a(e){var n;return Object(te.a)(this,a),(n=t.call(this,e)).onChangeValue=function(e,t,a,r){var i="";"number"===r?e.target.validity.valid?(i=""!==(i=e.target.value)?i:"",_t[t][a].value=i):_t[t][a].value=i:"quantity"===r?(e.target.validity.valid?(i=parseInt(e.target.value.replace(/^0+/,"")),i=isNaN(i)?"":i,_t[t][a].value=i):_t[t][a].value=i,n.setCartProdAttr(),n.updateColorsQuantity()):(i=e.target.value,_t[t][a].value=i),n.setState({teamMembers:_t})},n.removeMember=function(e,t){var a,r,i;if(_t.splice(e,1),n.setState({teamMembers:_t}),_t[_t.length-1].forEach((function(e){"color"===e.type&&(a=e)})),n.props.canvasData.color.forEach((function(e,t){e.name.toLowerCase()===a.name.toLowerCase()&&(r=t)})),i=JSON.parse(JSON.stringify(a)),void 0===r){for(var o=0;o<n.props.canvasData.color.length;o++){i=n.props.canvasData.color[o],r=o;break}n.props.changeProductColor(i.name,i,r),n.props.activeColorIndex(i.name)}else i.variant_id=i.variantId,n.props.changeProductColor(a.value,i,r),n.props.activeColorIndex(a.value);n.setCartProdAttr(),n.updateColorsQuantity()},n.onSelectSize=function(e,t,a){e.color,e.color_id,e.size,e.size_id,e.size;_t[t][a]=e,n.setState({teamMembers:_t}),n.setCartProdAttr()},n.onColorChange=function(e,t,a){var r,i,o,s,l=1,c=[];St&&St[e.name]&&St[e.name].length?(Et.forEach((function(t,a){t===e.name&&(r=a)})),n.props.canvasData.color.forEach((function(t,a){t.name.toLowerCase()===e.name.toLowerCase()&&(o=a)})),kt=e.name,void 0===r&&Et.push(e.name),n.props.changeProductColor(e.name,e,o),n.props.activeColorIndex(e.name),(i=JSON.parse(JSON.stringify(_t)))[t][a].value=e.name,i[t][a].id=e.attribute_id,i[t][a].variantId=e.variant_id,i[t].forEach((function(t){"size"===t.type&&(t[wt]=e.name,t[xt+"_id"]=e.attribute_id,t[xt]=St[e.name][0][xt],t[xt+"_id"]=St[e.name][0][xt+"_id"],t.value=St[e.name][0][xt])})),_t=i,n.setState({teamMembers:_t,selectedColorSize:St}),n.setCartProdAttr(),n.updateColorsQuantity()):xt&&Nt>1?Oe.h(n.state.productId,e.variant_id,xt).then((function(u){if(1===u.status){var d=[],p=u.quantities[xt];p.forEach((function(e){e.attributes.name="Size",e.attributes.type="size",e.attributes.value=e.attributes[xt],e.attributes.variantId=e.variant_id,d.push(e.attributes)})),Et.forEach((function(t,a){t===e.name&&(r=a)})),n.props.canvasData.color.forEach((function(t,a){t.name.toLowerCase()===e.name.toLowerCase()&&(l=0,o=a)})),kt=e.name,l?(Et.push(e.name),n.props.addAnotherColorCheckout(e.attribute_id,e.variant_id),c.push(e),n.props.updateCaptureSidesByColor(c,0),n.props.activeColorIndex(e.name)):(void 0===r&&Et.push(e.name),n.props.changeProductColor(e.name,p[0],o),n.props.activeColorIndex(e.name)),(i=JSON.parse(JSON.stringify(_t)))[t][a].value=e.name,i[t][a].id=e.attribute_id,i[t][a].variantId=e.variant_id,p.forEach((function(e){e.quantityVal=0})),void 0===St[e.name]&&(St[e.name]=[],St[e.name]=d,Ot[e.name]=[],Ot[e.name]=p),i[t].forEach((function(e,t){"size"===e.type&&(s=t)})),i[t][s]=d[0],_t=i,n.setState({teamMembers:_t,selectedColorSize:St}),n.setCartProdAttr(),n.updateColorsQuantity()}else console.log("Error getting color size")})):(Et.forEach((function(t,a){t===e.name&&(r=a)})),n.props.canvasData.color.forEach((function(t,a){t.name.toLowerCase()===e.name.toLowerCase()&&(l=0,o=a)})),kt=e.name,l?(Et.push(e.name),n.props.addAnotherColorCheckout(e.attribute_id,e.variant_id),c.push(e),n.props.updateCaptureSidesByColor(c,0),n.props.activeColorIndex(e.name)):(void 0===r&&Et.push(e.name),n.props.changeProductColor(e.name,e,o),n.props.activeColorIndex(e.name)),(i=JSON.parse(JSON.stringify(_t)))[t][a].value=e.name,i[t][a].id=e.attribute_id,i[t][a].variantId=e.variant_id,_t=i,n.setState({teamMembers:_t}),n.setCartProdAttr(),n.updateColorsQuantity())},n.handleFiles=function(e){_t=[],n.setState({teamMembers:_t});var t=new FileReader;t.onload=function(e){var a,r,i,o,s=n.props.selectedPrintProfileData.name_number_data,l=t.result.split("\n"),c=[],u="",d=0;l.forEach((function(e,t){if(0!==t&&e){n.setState({isAddAnother:!0}),a=JSON.parse(JSON.stringify(s)),c=[],[],r={},u="",d=0,!0,i={},o={};var l=e.split(","),p=JSON.parse(JSON.stringify(l));a.params.forEach((function(e,t){u=e.name.replace(/\s/g,""),Ct&&Ct[u]&&("image"===e.type?(e.placeholder=e.file,e.value=e.file):"number"===e.type?e.value=Number(p[t])?Number(p[t]):"":e.value=p[t],delete e.file,c.push(e),d=t)})),d++;var m=n.props.selectedPrintProfileData.name_number_data;n.props.canvasData.color_attributes.length?p[d]&&m.allow_change_color?(n.props.canvasData.color_attributes.forEach((function(e){e.name.toLowerCase()===p[d].toLowerCase()&&(r.name="Color",r.type="color",r.value=e.name,r.id=e.attribute_id,r.variantId=e.variant_id,o=e)})),JSON.stringify(r)===JSON.stringify({})&&n.props.canvasData.color_attributes.forEach((function(e){e.name.toLowerCase()===kt.toLowerCase()&&(r.name="Color",r.type="color",r.value=e.name,r.id=e.attribute_id,r.variantId=e.variant_id,o=e)})),0===Et.length&&Et.push(r.value),c.push(r),St[r.value]?(d++,p[d]&&St[r.value].forEach((function(e){e.value.toLowerCase()===p[d].toLowerCase()&&(i=e)})),JSON.stringify(i)!==JSON.stringify({})&&void 0!==p[d]||(i=St[r.value][0]),c.push(i),d++,c.push({name:"Quantity",type:"quantity",value:Number(p[d])?p[d]:1}),c.push({name:"Remove",type:"remove"}),0===_t.length?_t[0]=c:_t[_t.length]=c,n.setState({isAddAnother:!1}),n.setCartProdAttr(),n.updateColorsQuantity()):(d++,n.getSizeVariants(o,p,d,c))):(JSON.stringify(r)!==JSON.stringify({})&&void 0!==p[d]||n.props.canvasData.color_attributes.forEach((function(e){e.name.toLowerCase()===kt.toLowerCase()&&(r.name="Color",r.type="color",r.value=e.name,r.id=e.attribute_id,r.variantId=e.variant_id)})),0===Et.length&&Et.push(r.value),c.push(r),d++,p[d]&&St[r.value].forEach((function(e){e.value.toLowerCase()===p[d].toLowerCase()&&(i=e)})),JSON.stringify(i)!==JSON.stringify({})&&void 0!==p[d]||(i=St[r.value][0]),c.push(i),d++,c.push({name:"Quantity",type:"quantity",value:Number(p[d])?p[d]:1}),c.push({name:"Remove",type:"remove"}),0===_t.length?_t[0]=c:_t[_t.length]=c,void 0===St[r.value]&&(St[r.value]=[],St[r.value]=n.state.curAvailableSizes[0]),n.setState({isAddAnother:!1}),n.setCartProdAttr(),n.updateColorsQuantity()):(c.push({name:"Quantity",type:"quantity",value:1}),c.push({name:"Remove",type:"remove"}),0===_t.length?_t[0]=c:_t[_t.length]=c,n.setState({isAddAnother:!1}),n.updateColorsQuantity())}})),n.setState({teamMembers:_t,selectedColorSize:St})},t.readAsText(e[0])},n.validateQty=function(e,t,a){e.target.value<1&&(_t[t][a].value="1"),n.setState({teamMembers:_t})},n.returnAllTeamData=function(){return n.state.teamMembers},n.uploadZip=function(e){console.log("coming soon",e.target.files[0])},n.getSelectedColorList=function(){var e=[],t=[];return Object.keys(St).length&&n.props.canvasData.color_attributes.length&&(Object.keys(St).forEach((function(t){e.push(t)})),n.props.canvasData.color_attributes.forEach((function(a){e.find((function(e){return a.name===e}))&&t.push(a)}))),t},n.getQuantityByColorName=function(e){var t=0;return Object(r.a)({},St)[e]&&_t.forEach((function(a){a.find((function(t){return"color"===t.type&&t.value===e}))&&a.forEach((function(e){"quantity"===e.type&&(t+=parseInt(e.value))}))})),t},n.getTotalQuantity=function(){var e=0;return _t.length?_t.forEach((function(t){t.forEach((function(t){"quantity"===t.type&&(e+=parseInt(t.value))}))})):e=1,e},n.updateColorsQuantity=function(){var e=0,t=[],a={l:0,d:0,w:0,t:0,p:0};Nt&&(n.getSelectedColorList().forEach((function(r){e=n.getQuantityByColorName(r.name),t.push({id:r.id,name:r.name,price:r.price,qty:e}),6===r.color_type?a.l+=e:5===r.color_type?a.d+=e:4===r.color_type?a.w+=e:a.p+=e})),n.props.dispatch(ve.s(t))),a.t=n.getTotalQuantity(),n.props.dispatch(ve.q(a)).then((function(){n.props.setLayerData()}))},n.setCartProdAttr=function(){var e=0,t=[];Object.keys(Ot).forEach((function(a){Ot[a].forEach((function(e){e.quantityVal=0})),_t.forEach((function(t){t.forEach((function(r){"size"===r.type&&r[wt]===a&&(e=Number(t.filter((function(e){return"quantity"===e.type}))[0].value),Ot[a].filter((function(e){return e.name===r.value}))[0].quantityVal+=e)}))})),t.push(Object($.a)({},a,Ot[a]))}));0!==Nt&&n.props.dispatch(ve.t(t.filter((function(e){return e})))).then((function(){n.props.dispatch(Object(k.b)(n.props.canvasData.layer_data))}))},n.state={teamMembers:[],selectedColorSize:[],curAvailableSizes:[],isUploadCSV:!0,isAddAnother:!1},n.addPlayer=n.addPlayer.bind(Object(ue.a)(n)),n.onImageChange=n.onImageChange.bind(Object(ue.a)(n)),n.downloadCSV=n.downloadCSV.bind(Object(ue.a)(n)),n.addAnotherPlayer=n.addAnotherPlayer.bind(Object(ue.a)(n)),n}return Object(ae.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.updateGlobalAttributes(),(0,this.props.teamDataRef)(this),this.setState({productId:this.props.canvasData.product_details.product_id,variantId:this.props.canvasData.product_extra_details.variant_id},(function(){JSON.stringify(Ct)!==JSON.stringify(Ne.a.canvas.team)?(Ct=JSON.parse(JSON.stringify(Ne.a.canvas.team)),_t=[],St=[],e.setState({teamMembers:_t,selectedColorSize:St}),e.addPlayer()):e.setState({teamMembers:_t,selectedColorSize:St,isUploadCSV:It},(function(){e.updateColorsQuantity()})),Nt=Object.keys(e.props.canvasData.product_details.attributes).length}))}},{key:"addPlayer",value:function(){var e,t=this,a=this.props.selectedPrintProfileData.name_number_data,r=JSON.parse(JSON.stringify(a)),n={name:"Color",type:"color",value:"",id:"",variantId:""},i=[],o="",s=1;if(It=!0,r.params.forEach((function(e){o=e.name.replace(/\s/g,""),Ct&&Ct[o]&&("image"===e.type?(e.placeholder=e.file,e.value=e.file,It=!1):e.value="",delete e.file,i.push(e))})),this.setState({isUploadCSV:It}),this.props.canvasData.color_attributes.length&&"color"===this.props.canvasData.globalColorAttr.toLowerCase())if(St&&St[kt]&&St[kt].length)this.props.canvasData.color_attributes.forEach((function(e){e.name===kt&&(n.value=e.name,n.id=e.attribute_id,n.variantId=e.variant_id)})),0===Et.length&&Et.push(n.value),i.push(n),i.push(St[kt][0]),i.push({name:"Quantity",type:"quantity",value:1}),i.push({name:"Remove",type:"remove"}),0===_t.length?_t[0]=i:_t[_t.length]=i,this.setState({teamMembers:_t,isAddAnother:!1}),this.setCartProdAttr(),this.updateColorsQuantity();else if(Nt=Object.keys(this.props.canvasData.product_details.attributes).length,xt&&Nt>1)Oe.h(this.state.productId,this.state.variantId,xt).then((function(a){if(1===a.status){var r=[],o=!0,l=a.quantities[xt];l.forEach((function(t){t.attributes.name="Size",t.attributes.type="size",t.attributes.value=t.attributes[xt],t.attributes.variantId=t.variant_id,o&&(e=t.attributes,o=!1),r.push(t.attributes)})),t.props.canvasData.color_attributes.forEach((function(t){t.name===e[wt]&&(n.value=t.name,n.id=t.attribute_id,n.variantId=t.variant_id,kt=t.name)})),0===Et.length&&Et.push(n.value),i.push(n),i.push(e),s=0===_t.length&&t.props.canvasData.quantity?t.props.canvasData.quantity:1,i.push({name:"Quantity",type:"quantity",value:s}),i.push({name:"Remove",type:"remove"}),0===_t.length?_t[0]=i:_t[_t.length]=i,St[n.value]=[],St[n.value]=r,l.forEach((function(e){e.quantityVal=0})),Ot[n.value]=[],Ot[n.value]=l,t.setState({teamMembers:_t,selectedColorSize:St,curAvailableSizes:r,isAddAnother:!1}),t.setCartProdAttr(),t.updateColorsQuantity()}else console.log("Error in server",a.message)}));else{var l=this.props.canvasData.color.filter((function(e){return 1===e.isActive}));l&&l.length&&(n.value=l[0].name,n.id=l[0].attribute_id,n.variantId=l[0].variant_id,kt=l[0].name,0===Et.length&&Et.push(n.value),i.push(n)),s=0===_t.length&&this.props.canvasData.quantity?this.props.canvasData.quantity:1,i.push({name:"Quantity",type:"quantity",value:s}),i.push({name:"Remove",type:"remove"}),0===_t.length?_t[0]=i:_t[_t.length]=i,this.setState({teamMembers:_t,isAddAnother:!1}),this.setCartProdAttr(),this.updateColorsQuantity()}else i.push({name:"Quantity",type:"quantity",value:1}),i.push({name:"Remove",type:"remove"}),0===_t.length?_t[0]=i:_t[_t.length]=i,this.setState({teamMembers:_t,isAddAnother:!1}),this.updateColorsQuantity()}},{key:"onImageChange",value:function(e,t,a){var r=this,n=e[0].name.split(".").pop(),i=[];if("jpg"===n||"jpeg"===n||"png"===n){var o=_t[t][a].value;i.push(e[0]),Oe.s("",i,"carts").then((function(e){e.data.status?(_t[t][a].value=e.data.data.images[0].url,r.setState({teamMembers:_t})):(_t[t][a].value=o,r.setState({teamMembers:_t}),r.props.showNotification("danger",e.data.message))}))}else this.props.showNotification("warning",this.props.language.team.invalidImage)}},{key:"downloadCSV",value:function(){var e,t=this,a="";(e=JSON.parse(JSON.stringify(this.state.teamMembers))).splice(1,e.length),Oe.c(e).then((function(e){e.data.status?(a=e.data.data,window.open(He.a.base_path+"name-number-sample-download?file_name="+a)):t.props.showNotification("danger",e.data.message)}))}},{key:"updateGlobalAttributes",value:function(){var e=this,t=this.props.canvasData.product_details.attributes,a=this.props.globalSettings.store;Object.keys(t).forEach((function(t){(a.size===t&&e.props.canvasData.globalColorAttr!==t||e.props.canvasData.globalColorAttr!==t)&&(xt=t),a.color.toLowerCase()===t.toLowerCase()&&(wt=t)}))}},{key:"addAnotherPlayer",value:function(){var e=this;this.setState({isAddAnother:!0},(function(){e.addPlayer()}))}},{key:"getSizeVariants",value:function(e,t,a,r){var n,i,o=this,s={},l=1,c=[];return new Promise((function(u,d){Oe.h(o.state.productId,e.variant_id,xt).then((function(p){if(1===p.status){var m=[],h=p.quantities[xt];h.forEach((function(e){e.attributes.name="Size",e.attributes.type="size",e.attributes.value=e.attributes[xt],t[a]&&e.name.toLowerCase()===t[a].toLowerCase()&&(s=e.attributes),m.push(e.attributes)})),JSON.stringify(s)!==JSON.stringify({})&&void 0!==t[a]||(s=m[0]),r.push(s),a++,Et.forEach((function(t,a){t===e.name&&(n=a)})),o.props.canvasData.color.forEach((function(t,a){t.name.toLowerCase()===e.name.toLowerCase()&&(l=0,i=a)})),kt=e.name,l?(Et.push(e.name),o.props.addAnotherColorCheckout(e.attribute_id,e.variant_id),c.push(e),o.props.updateCaptureSidesByColor(c,0),o.props.activeColorIndex(e.name)):(void 0===n&&Et.push(e.name),o.props.changeProductColor(e.name,h[0],i),o.props.activeColorIndex(e.name)),r.push({name:"Quantity",type:"quantity",value:Number(t[a])?t[a]:1}),r.push({name:"Remove",type:"remove"}),0===_t.length?_t[0]=r:_t[_t.length]=r,St[e.name]=[],St[e.name]=m,h.forEach((function(e){e.quantityVal=0})),Ot[e.name]=[],Ot[e.name]=h,o.setState({teamMembers:_t,selectedColorSize:St,curAvailableSizes:m,isAddAnother:!1}),o.setCartProdAttr(),o.updateColorsQuantity(),u("success")}else d(new Error("Error in server"))}))}))}},{key:"render",value:function(){var e=this.state,t=e.isUploadCSV,a=e.isAddAnother;return i.a.createElement(yt,{nameNumberData:this.props.selectedPrintProfileData.name_number_data,addAnotherPlayer:this.addAnotherPlayer,teamMembers:this.state.teamMembers,onChangeValue:this.onChangeValue,productColors:this.props.canvasData.color_attributes,removeMember:this.removeMember,onSelectSize:this.onSelectSize,onColorChange:this.onColorChange,handleFiles:this.handleFiles,validateQty:this.validateQty,settings:this.props.globalsettings,termConditions:this.props.termConditions,onChangeTermCondition:this.props.onChangeTermCondition,orderNotes:this.props.orderNotes,language:this.props.language,checkoutPreloader:this.props.checkoutPreloader,onImageChange:this.onImageChange,globalSettings:this.props.globalSettings,selectedColorSize:this.state.selectedColorSize,isMobileView:this.props.isMobileView,productDetail:this.props.productDetail,onChangeOrderOption:this.props.onChangeOrderOption,downloadCSV:this.downloadCSV,isUploadCSV:t,isAddAnother:a,uploadZip:this.uploadZip,onChangeOrderNote:this.props.onChangeOrderNote,globalColorAttribute:wt})}}]),a}(i.a.Component),Dt=Object(c.b)((function(e){return{canvasData:e.productCanvasReducer,selectedPrintProfileData:e.printProfileReducer.print_profile_data.filter((function(t){return t.id===e.printProfileReducer.selected_print_profile}))[0],language:e.languageReducer.translation_data.filter((function(t){return t.langCode===e.languageReducer.default_lang}))[0],globalSettings:e.globalSettingReducer.global_settings_data}}))(Pt),Rt=a(39),Tt=a(129),Lt=[],Mt=[],Bt=[],jt={},Ft=[],Ut=[],Vt="",Gt=[],qt=0,Ht=[],zt=[],Wt=[],Qt={l:0,d:0,w:0,t:0,p:0},Jt=[],Yt=0,Zt=[],Xt=[],Kt=[],$t=[],ea=-1,ta=0,aa={},ra=[],na=0,ia=0,oa=0,sa=[],la="",ca=!0,ua=0,da="",pa=!1,ma=!1,ha=!1,ga=[],fa=0,va=0,ba=function(e){Object(re.a)(a,e);var t=Object(ne.a)(a);function a(e){var n;return Object(te.a)(this,a),(n=t.call(this,e)).checkMaxColorsWarn=function(e){var t=!0;return e.forEach((function(e){e.length&&e.forEach((function(e){if(e){var a=n.props.printSettings.filter((function(t){return t.id===e.printProfileId}));if(a&&a[0]&&e.colors.length&&a[0].color_data.is_max_color_allowed)e.colors.filter((function(e){return"none"!==e})).length>Number(a[0].color_data.max_colors_allowed)&&(t=!1)}}))})),t},n.checkFullColor=function(e){var t=!0;return e.forEach((function(e){e.length&&e.forEach((function(e){if(e){var a=n.props.printSettings.filter((function(t){return t.id===e.printProfileId}));a&&a[0]&&e.colors.length&&0===a[0].color_data.is_full_color&&e.colors.includes("Full")&&(t=!1)}}))})),t},n.getSimpleAttributes=function(e){var t={};return Object.keys(e).forEach((function(a){var r=a+"_id";t[a]=e[a].name,t[r]=e[a].id})),t},n.checkImageResolution=function(){var e=!0;"inline"===document.getElementById("selectorGrip_resize_nwt").getAttribute("display")&&(e=!1);var t=Ne.a.canvas.getCurrentLayerElems();return t&&t.forEach((function(t){e&&"image"===t.getAttribute("type")&&t.prefs.imageWarning&&(e=!1)})),e},n.fetchAttributesList=function(e,t,a,r){var n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;return new Promise(r?function(r,i){Oe.h(e,t,a,n).then((function(e){1===e.status?r(e.quantities):i(new Error("Error in server"))}))}:function(r,i){Oe.d(e,t,a,n).then((function(e){1===e.status?r(e.quantities):i(new Error("Error in server"))}))})},n.updateOptionList=function(e,t){Object.keys(e.options).forEach((function(a){e.options[a].forEach((function(r){!r.options&&r.selected?r.options=t:n.updateOptionList(e.options[a],t)}))}))},n.updateAttrOptionList=function(){var e=Object(ce.a)(le.a.mark((function e(t,a,r,i){var o,s,l,c,u;return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.setState({loading:!0}),a[na]===Lt.globalColorAttr){e.next=13;break}if(!(na<a.length)){e.next=11;break}return s=[],l=0,na===a.length-1&&(l=1),e.next=9,n.fetchAttributesList(Lt.product_details.product_id,r,a[na],l);case 9:(c=e.sent)&&(n.setState({loading:!1}),Zt.forEach((function(e){if(e.options){if(!c[a[na]])return;if(c[a[na]][0]&&c[a[na]][0].price)return new Promise((function(e){Object.keys(i).forEach((function(t){i[t].forEach(function(){var e=Object(ce.a)(le.a.mark((function e(t){var r,n;return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:!t.options&&t.selected&&(c[a[na]].length&&c[a[na]].forEach((function(e){1===c[a[na]].length?e.selected=!0:e.selected=!1})),r=0,n="",Object.keys(Lt.product_details.attributes).length?c[a[na]].forEach((function(e,t){0===Lt.product_details.is_variable_decoration?e.name.toString().toLowerCase()===Lt.product_details.attributes[a[na]].name.toString().toLowerCase()&&(c[a[na]][t].selected=!0,r=t):(n=Lt.product_details.attributes[a[na]].name.toString().toLowerCase(),"standard"===Lt.selectedVarSize.type&&a[na].toString().toLowerCase()===Ut.store.size.toString().toLowerCase()&&(n=Lt.selectedVarSize.selSize.name.toString().toLowerCase()),e.name.toString().toLowerCase()===n&&(c[a[na]][t].selected=!0,r=t,c[a[na]].some((function(e){return e.name===Lt.selectedVarSize.selSize.name}))&&(ua=t)))})):c[a[na]][0].selected=!0,Lt.quantity||Lt.quantity>1?c[a[na]][r].quantityVal=Lt.quantity:c[a[na]][r].quantityVal=1,t.options=c);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),1===Lt.product_details.is_variable_decoration?Lt.color_attributes&&Lt.color_attributes.length&&(s=n.updateColorSelectionList("multiple")):s=n.updateColorSelectionList("multiple"),n.setState({multiAttributeList:Zt,colorAttributes:s},(function(){n.updateQuantityForMultiAttr(),n.setCartProdAttrs(),e(!0)}))}))}));var t=0,r="";Object.keys(i).forEach((function(s){i[s].forEach((function(e){!e.options&&e.selected&&(c[a[na]].length&&c[a[na]].forEach((function(e){e.selected=!1})),Object.keys(Lt.product_details.attributes).length?c[a[na]].forEach((function(e,n){0===Lt.product_details.is_variable_decoration?e.name.toString().toLowerCase()===Lt.product_details.attributes[a[na]].name.toString().toLowerCase()&&(c[a[na]][n].selected=!0,t=n):(r=Lt.product_details.attributes[a[na]].name.toString().toLowerCase(),"standard"===Lt.selectedVarSize.type&&a[na].toString().toLowerCase()===Ut.store.size.toString().toLowerCase()&&(r=Lt.selectedVarSize.selSize.name.toString().toLowerCase()),e.name.toString().toLowerCase()===r&&(c[a[na]][n].selected=!0,t=n,c[a[na]].some((function(e){return e.name===Lt.selectedVarSize.selSize.name}))&&(ua=n)))})):c[a[na]][0].selected=!0,e.options=c)})),o=c[a[na]][t].variant_id,na++,0===Lt.product_details.is_variable_decoration?n.updateAttrOptionList(e,a,o,i[s][t].options):"standard"===Lt.selectedVarSize.type?n.updateAttrOptionList(e,a,o,i[s][ua].options):n.updateAttrOptionList(e,a,o,i[s][t].options)}))}else{c[a[na]]&&c[a[na]].length&&c[a[na]].forEach((function(e){e.selected=!1}));var l=0,u="";Object.keys(Lt.product_details.attributes).length?c[a[na]].forEach((function(e,t){0===Lt.product_details.is_variable_decoration?e.name.toString().toLowerCase()===Lt.product_details.attributes[a[na]].name.toString().toLowerCase()&&(c[a[na]][t].selected=!0,l=t):(u=Lt.product_details.attributes[a[na]].name.toString().toLowerCase(),"standard"===Lt.selectedVarSize.type&&a[na].toString().toLowerCase()===Ut.store.size.toString().toLowerCase()&&(u=Lt.selectedVarSize.selSize.name.toString().toLowerCase()),e.name.toString().toLowerCase()===u&&(c[a[na]][t].selected=!0,l=t,c[a[na]].some((function(e){return e.name===Lt.selectedVarSize.selSize.name}))&&(ua=t)))})):c[a[na]][0].selected=!0,o=c[a[na]][l].variant_id,e.options=c,na++,n.updateAttrOptionList(e,a,o,e.options)}})));case 11:e.next=17;break;case 13:return na++,u=t.options?t.options:"",e.next=17,n.updateAttrOptionList(t,a,r,u);case 17:case"end":return e.stop()}}),e)})));return function(t,a,r,n){return e.apply(this,arguments)}}(),n.addAttrOptionList=function(){var e=Object(ce.a)(le.a.mark((function e(t,a,r,i,o){var s,l,c,u,d;return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.setState({addMoreLoading:!0}),a[na]===Lt.globalColorAttr){e.next=27;break}return l=[],c=0,na===a.length-1&&(c=1),e.next=8,n.fetchAttributesList(Lt.product_details.product_id,r,a[na],c);case 8:if(!(u=e.sent)){e.next=25;break}if(n.setState({addMoreLoading:!1}),Zt[i].options){e.next=20;break}u[a[na]].length&&u[a[na]].forEach((function(e){e.selected=!1})),u[a[na]][0].selected=!0,s=u[a[na]][0].variant_id,Zt[i].options=u,na++,n.addAttrOptionList(Zt[i],a,s,i,Zt[i].options),e.next=25;break;case 20:if(!u[a[na]][0]||!u[a[na]][0].price){e.next=24;break}return e.abrupt("return",new Promise(function(){var e=Object(ce.a)(le.a.mark((function e(t,r){return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Object.keys(o).forEach((function(e){o[e].forEach((function(e){!e.options&&e.selected&&(u[a[na]].length&&u[a[na]].forEach((function(e){e.selected=!1})),u[a[na]][0].selected=!0,Lt.quantity||Lt.quantity>1?u[a[na]][0].quantityVal=Lt.quantity:u[a[na]][0].quantityVal=1,e.options=u)})),l=n.updateColorSelectionList("multiple"),n.setState({multiAttributeList:Zt,colorAttributes:l},(function(){n.updateQuantityForMultiAttr(),n.setCartProdAttrs(),t(!0)}))}));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()));case 24:Object.keys(o).forEach((function(e){o[e].forEach((function(e){!e.options&&e.selected&&(u[a[na]].length&&u[a[na]].forEach((function(e){e.selected=!1})),u[a[na]][0].selected=!0,e.options=u)})),s=u[a[na]][0].variant_id,na++,n.addAttrOptionList(Zt[i],a,s,i,o[e][0].options)}));case 25:e.next=30;break;case 27:na++,d=t.options?t.options:"",n.addAttrOptionList(t,a,r,i,d);case 30:case"end":return e.stop()}}),e)})));return function(t,a,r,n,i){return e.apply(this,arguments)}}(),n.updateColorAttributeList=function(){var e=Object(ce.a)(le.a.mark((function e(t){var a,r,i;return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=[],r=!1,!t||!Lt.globalColorAttr){e.next=17;break}if((a=t.filter((function(e){return 1===e.isActive})))&&Zt.length&&(r=!!Zt.filter((function(e){return e.name.toLowerCase()===a[0].name.toLowerCase()})).length),r){e.next=15;break}return t=a,n.props.dispatch(ve.K(a)),(Zt=[]).push({color_id:t[ia].id,name:t[ia].name,colorCode:t[ia].hex_code&&"#"===t[ia].hex_code[0]?t[ia].hex_code:t[ia].file_name}),na=0,e.next=12,n.updateAttrOptionList(t[ia],Object.keys(Lt.product_details.attributes),t[ia].variant_id);case 12:i=e.sent,ia++,i&&t.length>ia&&n.updateColorAttributeList(t);case 15:e.next=23;break;case 17:if(Zt=[],!Lt.product_details.is_variable_decoration||!t||0!==t.length){e.next=23;break}return Zt.push({color_id:"",name:"",colorCode:""}),e.next=22,n.updateAttrOptionList("",Object.keys(Lt.product_details.attributes),Lt.product_extra_details.variant_id);case 22:e.sent;case 23:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.updateColorSelectionList=function(e){var t=[],a=[];return"multiple"===e?Lt.color_attributes.forEach((function(e){Zt.find((function(t){return t.name.toString().toLowerCase()===e.name.toString().toLowerCase()}))||a.push(e)})):(Object.keys(Ft).forEach((function(e){t.push(e)})),t.length?Lt.color_attributes.forEach((function(e){t.find((function(t){return t.toString().toLowerCase()===e.name.toString().toLowerCase()}))||a.push(e)})):a=Lt.color_attributes),a},n.updateColorVariantList=function(e,t,a){var r=[],i=[],o=[],s=[],l=[];Ut.store.size;if(e){e.forEach((function(e){if(l=[],e.tier_prices&&(l=e.tier_prices),Wt[e.name]){i.push(e.name);var a=-1,s=!0,c=Ft[e.name].filter((function(e){return e.variant_id===Number(n.props.variantId)}));if(c.length&&(!n.props.cartId||"Opencart"!==n.state.storeType&&"opencart"!==n.state.storeType)&&(a=Ft[e.name].findIndex((function(e){return e.variant_id===Number(n.props.variantId)})),Lt.quantity||Lt.quantity>1?Ft[e.name][a].quantityVal=Ft[e.name][a].inventory.stock&&Ft[e.name][a].inventory.stock>0?Ft[e.name][a].quantityVal?Ft[e.name][a].quantityVal:Lt.quantity:0:Ft[e.name][a].quantityVal=1,s=!1),c.length&&(!n.props.cartId||"Opencart"===n.state.storeType&&"opencart"===n.state.storeType)&&(Lt.quantity||Lt.quantity>1?Ft[e.name][a].quantityVal=Ft[e.name][a].inventory.stock&&Ft[e.name][a].inventory.stock>0?Ft[e.name][a].quantityVal?Ft[e.name][a].quantityVal:Lt.quantity:0:Ft[e.name][a].quantityVal=1),!n.props.cartId&&("Opencart"===n.state.storeType||"opencart"===n.state.storeType)&&(a=Ft[e.name].findIndex((function(e){return e.name===Lt.product_details.attributes[Vt].name})),n.props.productDetails.attributes[Vt].name))for(var u=0;u<Ft[e.name].length;u++)Ft[e.name][u].name===Lt.product_details.attributes[Vt].name?Ft[e.name][u].quantityVal=Ft[e.name][a].quantityVal?Ft[e.name][a].quantityVal:Lt.quantity:Ft[e.name][u].quantityVal=Ft[e.name][u].quantityVal?Ft[e.name][u].quantityVal:0;(!n.props.cartId||"Opencart"!==n.state.storeType&&"opencart"!==n.state.storeType)&&(a=Ft[e.name].findIndex((function(e){return e.name===Lt.product_details.attributes[Vt].name})),Ft[e.name].forEach((function(t,r){a!==r&&(t.name===e.name?e.name:Lt.product_details.attributes[Vt].name&&s)&&(Lt.quantity&&Lt.quantity>1?t.quantityVal=t.quantityVal?t.quantityVal:Lt.quantity:e.quantityVal=1)}))),o=n.updateColorSizeList(Ft),n.setState({selectedColorSizeList:o},(function(){n.setCartProdAttrs()})),n.updateColorsQuantity()}else{var d=[{variant_id:e.variant_id,inventory:e.inventory,quantityVal:Lt.quantity||Lt.quantity>1?Lt.quantity:1,price:e.price,attributes:t,tier_prices:l}];Ft[e.name]=d,i.push(e.name),(e.hex_code||e.file_name)&&(Ht[e.name]={colorCode:"#"===e.hex_code[0]?e.hex_code:e.file_name,variantId:e.variant_id}),Wt[e.name]=!0,r.push(n.fetchSizeAndQuantity(Lt.product_details.product_id,e.variant_id?e.variant_id:Lt.product_extra_details.variant_id,e.name))}})),Object.keys(Ft).forEach((function(e){i.find((function(t){return t.toString().toLowerCase()===e.toString().toLowerCase()}))||Ft[e]&&(delete Ft[e],delete Wt[e])}));var c=n.updateColorSelectionList("");if(n.updateColorsQuantity(),s="change"===a?n.changeColorSizeList(Ft):n.updateColorSizeList(Ft),1===Lt.product_details.is_variable_decoration&&"standard"===Lt.selectedVarSize.type){var u,d,p=1,m=n.props.canvasData.varSizePrice;e.forEach((function(e,t){s.forEach((function(t,a){Object.keys(t)&&Object.keys(t)[0]===e.name&&t[e.name][0].name!==Lt.selectedVarSize.selSize.name&&(d="",u="",(u=m.filter((function(t){return t.name===e.name}))[0])&&u.sizeAttrib&&u.sizeAttrib.length&&(d=u.sizeAttrib.filter((function(e){return e.name===Lt.selectedVarSize.selSize.name}))[0]),p=t[e.name][0].quantityVal,t[e.name][0]=d||Lt.selectedVarSize.selSize,t[e.name][0].quantityVal=p)}))}))}n.setState({selectedColorSizeList:s,selectedColorDetails:Ht,changeColorName:"",colorAttributes:c},(function(){n.setCartProdAttrs()}))}return r},n.updateColorSizeList=function(e){var t=[];return Object.keys(e).forEach((function(a){var r={};r[a]=e[a],t.push(r)})),t},n.changeColorSizeList=function(e){var t=[];return t=n.updateColorSizeList(e),-1!==ea&&(t.splice(ea,0,t[t.length-1]),delete t[t.length-1],ea=-1,Ft={},t.forEach((function(e,a){Object.keys(e).forEach((function(e){Ft[e]=t[a][e]}))}))),t},n.setCheckoutPreviewImage=function(){var e=Object(ce.a)(le.a.mark((function e(t){var a,r,i,o,s,l,c,u,d,p,m,h,g;return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=[],r="",i="",Lt.color.forEach((function(e){e.isActive&&1===e.isActive&&(!qt&&Lt.product_details&&0===Lt.product_details.is_variable_decoration&&(t=e.sides?e.sides:t),(e.hex_code||e.file_name)&&(r="#"===e.hex_code[0]?e.hex_code:e.file_name))})),o=0,s=Object(oe.a)(t),e.prev=4,s.s();case 6:if((l=s.n()).done){e.next=33;break}if(c=l.value,!Lt.faceData[o]){e.next=29;break}if(i=n.replaceIdOfSvgStr(Lt.faceData[o].svg),!Lt.product_details.is_variable_decoration){e.next=14;break}a.push({image:Lt.faceData[o].captureUri?Lt.faceData[o].captureUri:Lt.faceData[o].datauri,colorCode:r,svg:i}),e.next=27;break;case 14:if(!qt){e.next=26;break}if(Lt.faceData[o].datauri&&!n.props.decoProductId){e.next=23;break}return u=!!n.props.decoProductId,d=!(!Lt.engraveSides||!Lt.engraveSides[o])&&Lt.engraveSides[o],p="",p=(null===c||void 0===c?void 0:c.is_image_overlay)?c.overlay_image:"",e.next=21,Ne.a.exportCaptureData(c.image.src,Lt.faceData[o].svg,r,d,u,!1,!0,p);case 21:m=e.sent,Lt.faceData[o].datauri=m.datauri;case 23:a.push({image:Lt.faceData[o].captureUri?Lt.faceData[o].captureUri:Lt.faceData[o].datauri,colorCode:r,svg:i}),e.next=27;break;case 26:c&&a.push({image:c.image.src,colorCode:r,svg:i});case 27:e.next=30;break;case 29:c&&(Lt.product_details.is_variable_decoration?a.push({image:"",colorCode:r,svg:""}):a.push({image:c.image.src,colorCode:r,svg:""}));case 30:o++;case 31:e.next=6;break;case 33:e.next=38;break;case 35:e.prev=35,e.t0=e.catch(4),s.e(e.t0);case 38:return e.prev=38,s.f(),e.finish(38);case 41:n.setState({selectedImageList:a},(function(){n.isQuot&&n.props.stateId&&n.updateCaptureSidesByColor(Lt.color,0)})),h=!0,g=n.props.licenceAddOns.includes("sticker"),n.props.printSettings[0].sticker&&n.props.printSettings[0].sticker.is_sticker_enabled&&g&&(h=!1),Ne.a.canvas.showHideBounds(h);case 47:case"end":return e.stop()}}),e,null,[[4,35,38,41]])})));return function(t){return e.apply(this,arguments)}}(),n.activeColorIndex=function(e){n.setState({activeColorName:e}),Lt.color.forEach((function(t){t.isActive=0,t.name.toString().toLowerCase()===e.toString().toLowerCase()&&(t.isActive=1)}))},n.replaceIdOfSvgStr=function(e){var t="",a=[],r=(new DOMParser).parseFromString(e,"image/svg+xml").getElementsByTagName("svg")[0],n=ut()(r).clone();if(n.find("*").each((function(){a.push(ut()(this).attr("id"))})),"undefined"!=typeof n[0]){t=n[0].outerHTML;for(var i=0;i<a.length;i++)a[i]&&"p"!==a[i].charAt(0)&&"background"!==a[i]&&"engrave_0"!==a[i]&&(t=t.replace(new RegExp(a[i],"g"),Ne.a.canvas.getNextId()));return t}},n.exportCaptureImg=function(e){if(!!(n.props.printSettings&&n.props.printSettings[0]&&n.props.printSettings[0].sticker&&n.props.printSettings[0].sticker.is_sticker_enabled)&&n.props.stickerReducer.stickerPreviewData&&n.props.stickerReducer.stickerPreviewData.selectedCutLine){var t=n.props.stickerReducer.stickerPreviewData.selectedCutLine,a=[];Object.keys(n.props.stickerReducer.sheetInfo).length>0&&(a=n.props.stickerReducer.sheetInfo.sheetList),"Small"!==t&&"large"!==t&&"Medium"!==t&&n.props.dispatch(ve.T({designbase64:e.designUrl,imageUrl:"",sheetList:a})),n.setState({showStickerSheet:!0,isStickerEnabled:!0})}else n.setState({showStickerSheet:!1,isStickerEnabled:!1});e.isDesigned=Ne.a.canvas.getAllStageElems().length?1:0,Lt.faceData[Lt.active_product_side]=e,fa||n.setCheckoutPreviewImage(Lt.product_sides),n.updateCaptureSidesByColor(Lt.color,0),0===Yt&&(zt=[],n.exportCaptureColors(Lt.product_sides,0,""))},n.getAddedPrice=function(e){var t;return t=1===Lt.product_details.is_variable_decoration&&"custom"===Lt.selectedVarSize.type||1===Lt.product_details.is_variable_decoration&&n.state.isStickerEnabled&&n.props.stickerReducer&&"sheet"===n.props.stickerReducer.selectedSheetOption?n.props.pricingData.totalPrice:n.props.pricingData.totalPrice-n.props.pricingData.productPrice-n.props.pricingData.tax,parseFloat(t/e).toFixed(2)||0},n.getStickerAddedPrice=function(e,t){var a,r,i=0;t.length>0&&(i=Number(t[0].price));var o=n.props.pricingData;return a=Number(o.setupPrice)+Number(o.backgroundPrice)+Number(o.clipartPrice)+Number(o.fontPrice)+Number(o.perLetterPrice)+Number(o.printPrice)+Number(o.screenPrice)+Number(o.teamPrice)+Number(o.setupPrice)+Number(o.printableColPrice)+Number(o.sleevePrice)+Number(o.uploadedImgPrice),r=Number(a)+Number(e.price)+i,parseFloat(r).toFixed(2)||0},n.getMultiAttrselectedQty=function(e){aa.attributes={},e.options&&Object.keys(e.options).forEach((function(t){e.options[t][0].price?e.options[t].forEach((function(e){e.price&&(e.selected&&(aa.quantityVal=e.quantityVal,aa.variantId=e.variant_id,aa.options=e.attributes),ra.push(e.variant_id))})):e.options[t].forEach((function(e){n.getMultiAttrselectedQty(e)}))}))},n.prepareProductData=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,a=[],r=[],i=[],o=0,s={},l=[];Kt=[];var c=!(!n.state.isStickerEnabled||!n.props.stickerReducer||"sheet"!==n.props.stickerReducer.selectedSheetOption);if(0!==Yt||c)if(Yt>2&&"simple"!==Lt.product_extra_details.type&&!c){var u=Object(ee.a)(n.state.multiAttributeList);u.forEach((function(e){e.options&&(aa={},i=[],n.getMultiAttrselectedQty(e),a.push({product_id:Lt.product_details.product_id,qty:aa.quantityVal,total_qty:aa.quantityVal,variant_id:aa.variantId,options:aa.options,added_price:n.getAddedPrice(n.getTotalMultiAttrQty()),custom_design_id:n.props.stateId?n.props.stateId:0}),Kt.push({variantIds:aa.variantId,totalVariantIds:i}))}))}else if(c){if(n.state.isStickerEnabled&&"sheet"===n.props.stickerReducer.selectedSheetOption){var d=n.props.stickerReducer.sheetInfo.sheetList.filter((function(e){return e.quantity>0})),p=n.props.stickerReducer.stickerPreviewData,m=n.props.stickerReducer.stickerSettings.material.option_list.filter((function(e){return e.name===p.selectedMaterial}));d.forEach((function(e){a.push({product_id:Lt.product_details.product_id,qty:e.quantity,total_qty:e.quantity,variant_id:Lt.product_details.product_id,options:[],added_price:n.getStickerAddedPrice(e,m),custom_design_id:n.props.stateId?n.props.stateId:0})}))}}else if(n.state.isNameNumber){e={product_id:Lt.product_details.product_id,qty:"",total_qty:"",variant_id:"",options:"",added_price:"",custom_design_id:n.props.stateId?n.props.stateId:0},sa.forEach((function(e){e.forEach((function(e){"quantity"===e.type&&(o+=e.value)}))})),sa.forEach((function(t){r=[],i=[],t.forEach((function(t){"quantity"===t.type?(e.qty=t.value,e.total_qty=t.value,e.added_price=n.getAddedPrice(o)):"color"===t.type?e.variant_id=t.variantId:"size"===t.type&&(e.variant_id=t.variantId,r.push(t.variantId),i.push(t.variantId),Kt.push({variantIds:r,totalVariantIds:i}),s={},delete(s=JSON.parse(JSON.stringify(t))).name,delete s.type,delete s.value,delete s.id,delete s.variantId,e.options=s)}));var a=JSON.parse(JSON.stringify(e));l.push(a)}));for(var h=0;h<l.length;h++)for(var g=l[h],f=h+1;f<l.length;f++){var v=l[f];g.variant_id===v.variant_id&&(g.qty=g.qty+v.qty,g.total_qty=g.total_qty+v.total_qty)}l.forEach((function(e){a.filter((function(t){return t.variant_id===e.variant_id})).length||a.push(e)}))}else n.state.selectedColorSizeList.forEach((function(e,o){Object.keys(n.state.selectedColorSizeList[o]).forEach((function(e){r=[],i=[],n.state.selectedColorSizeList[o][e]&&n.state.selectedColorSizeList[o][e].forEach((function(s,l){s.quantityVal>0?(a.push({product_id:Lt.product_details.product_id,qty:s.quantityVal,total_qty:s.quantityVal,variant_id:s.variant_id,options:s.attributes,added_price:n.getAddedPrice(n.getTotalQuantity()),custom_design_id:n.props.stateId?n.props.stateId:0}),r.push(s.variant_id)):t&&0===a.length&&l===n.state.selectedColorSizeList[o][e].length-1&&(a.push({product_id:Lt.product_details.product_id,qty:1,total_qty:1,variant_id:s.variant_id,options:s.attributes,added_price:n.getAddedPrice(1),custom_design_id:n.props.stateId?n.props.stateId:0}),r.push(s.variant_id)),i.push(s.variant_id),Kt.push({variantIds:r,totalVariantIds:i})}))}))}));else n.state.isNameNumber?(sa.forEach((function(e){e.forEach((function(e){"quantity"===e.type&&(o+=e.value)}))})),a.push({product_id:Lt.product_details.product_id,qty:o,total_qty:o,variant_id:Lt.product_details.product_id,options:[],added_price:n.getAddedPrice(o),custom_design_id:n.props.stateId?n.props.stateId:0})):a.push({product_id:Lt.product_details.product_id,qty:n.state.simpleQuantityVal,total_qty:n.state.simpleQuantityVal,variant_id:Lt.product_details.product_id,options:[],added_price:n.getAddedPrice(n.getTotalQuantity()),custom_design_id:n.props.stateId?n.props.stateId:0});var b=JSON.parse(JSON.stringify(a));return b&&b.length&&(b.forEach((function(e){1===Lt.product_details.is_variable_decoration&&"custom"===Lt.selectedVarSize.type||n.state.isStickerEnabled&&"sheet"===n.props.stickerReducer.selectedSheetOption?e.is_variable_decoration=1:e.is_variable_decoration=0})),a=Object(ee.a)(b)),a},n.checkUploadImageList=function(e){var t=[];return n.props.imageUploadList&&n.props.imageUploadList.length&&n.props.imageUploadList[e]&&n.props.imageUploadList[e].length&&n.props.imageUploadList[e].forEach((function(e){var a=e.uploadedImg?e.uploadedImg:e.imgUrl;a&&t.push("/assets"+a.split("assets").pop())})),t},n.checkOriginalImageList=function(e){var t=[];return n.props.imageUploadList&&n.props.imageUploadList.length&&n.props.imageUploadList[e]&&n.props.imageUploadList[e].length&&n.props.imageUploadList[e].forEach((function(e){var a=e.originalFileUrl;a&&t.push("/assets/user"+a.split("assets/user").pop())})),t},n.prepareDesignData=function(){var e={notes:n.state.orderNotes.userInput,product_info:{product_id:0},design_product_data:[],sides:[],env_info:"",name_number:n.state.isNameNumber?sa:[]},t=n.props.canvasData,a={},i={},o={},s={},l=[];if(n.props.printSettings[0].sticker&&n.props.printSettings[0].sticker.is_sticker_enabled){var c=n.props.stickerReducer.stickerPreviewData?n.props.stickerReducer.stickerPreviewData.selectedCutLine:"",u="",d="basic";"Small"!==c&&"Medium"!==c&&"Large"!==c||(u=n.props.stickerReducer.previewImg?n.props.stickerReducer.previewImg.svg:"",d="diecut"),l=n.props.stickerReducer.sheetInfo.sheetList.filter((function(e){return e.quantity>0})),"roll"===n.props.stickerReducer.selectedSheetOption?(Object.keys(n.props.stickerReducer.rollInfo).length>0&&((s=n.props.stickerReducer.rollInfo.selectedRoll).rollQuantity=n.props.stickerReducer.rollInfo.rollQuantity),l=[]):("sheet"===n.props.stickerReducer.selectedSheetOption||(l=[]),s={}),a={width:n.props.stickerReducer.printDimensions.width,height:n.props.stickerReducer.printDimensions.height,cutline:n.props.stickerReducer.stickerPreviewData?n.props.stickerReducer.stickerPreviewData.selectedCutLine:"",material:n.props.stickerReducer.stickerPreviewData?n.props.stickerReducer.stickerPreviewData.selectedMaterial:"",contourSvg:u,stickerType:d,sheetInfo:l,stickerOption:n.props.stickerReducer.selectedSheetOption,rollInfo:s}}1===t.product_details.is_configurator&&1===t.product_details.is_image_based?(i=n.props.configuratorCartData,t.product_sides.splice(1)):1===t.product_details.is_configurator&&0===t.product_details.is_image_based&&(o=n.props.configuratorSvgCartData);for(var p=[],m={},h=[],g={},f=function(e){if(h={},m={},t.faceData[e]&&t.faceData[e].isDesigned){var o=n.checkBlobUrl(t.faceData[e].svg,e);if(m={is_designed:1,assets_doc_path:n.checkUploadImageList(e),original_image_path:n.checkOriginalImageList(e),url:t.product_sides[e].image?t.product_sides[e].image.src:"",svg:o,vdp_csv_data:[],print_papre_size_id:4,name_number:[],print_unit:t.product_details.print_unit,stickerInfo:a,configurator:i},0===t.product_details.is_variable_decoration)for(var s=function(a){var i=t.layer_data[e].filter((function(e){return e.layerIndex===a}));g={},(g=n.prepareOrderInfo(t.product_sides[e].decoration_settings[a].activePrintProfile)).print_method_id=t.product_sides[e].decoration_settings[a].activePrintProfile;var o=t.product_sides[e].decoration_settings[a].print_profiles.filter((function(r){return r.id===t.product_sides[e].decoration_settings[a].activePrintProfile}));if(g.print_method_name=o?o[0]&&o[0].name:"",g.name=t.product_sides[e].decoration_settings[a].name,g.id=t.product_sides[e].decoration_settings[a].id,g.print_area=t.product_sides[e].decoration_settings[a].print_area,i&&i.length?(g.isDesigned=i[0].isDesigned?1:0,g.used_colors=i[0].colors&&i[0].colors.length?i[0].colors:[],g.design_width=i[0].designWidth?i[0].designWidth:0,g.design_height=i[0].designHeight?i[0].designHeight:0):(g.isDesigned=0,g.used_colors=[],g.design_width=0,g.design_height=0),t.product_sides[e].decoration_settings[a].locations){var s=JSON.parse(t.product_sides[e].decoration_settings[a].locations);g.design_x=s.x_location?s.x_location:0,g.design_y=s.y_location?s.y_location:0}h["bound_"+a]={},h["bound_"+a]=Object(r.a)({},g)},l=0;l<t.product_sides[e].decoration_settings.length;l++)s(l);else g={},g=n.prepareOrderInfo(t.product_sides[e].activePrintProfile),"custom"===t.selectedVarSize.type&&(0===e?t.product_sides[e].print_area.name="Custom size":(t.product_sides[e].print_area.name="Custom size",t.product_sides[e].print_area.width=t.product_sides[0].print_area.width,t.product_sides[e].print_area.height=t.product_sides[0].print_area.height)),g.id=e,g.name=t.product_sides[e].name,g.isDesigned=t.layer_data[e][0]?1:0,g.print_method_id=t.product_sides[e].activePrintProfile,g.print_method_name=n.props.printSettings.filter((function(a){return a.id===t.product_sides[e].activePrintProfile}))[0].profile_data.name,g.print_area=t.product_sides[e].print_area,g.used_colors=t.layer_data[e][0]&&t.layer_data[e][0].colors&&t.layer_data[e][0].colors.length?t.layer_data[e][0].colors:[],g.design_width=t.layer_data[e]&&t.layer_data[e][0]&&t.layer_data[e][0].designWidth?t.layer_data[e][0].designWidth:0,g.design_height=t.layer_data[e]&&t.layer_data[e][0]&&t.layer_data[e][0].designHeight?t.layer_data[e][0].designHeight:0,Math.sign(g.design_width)<0&&Math.sign(g.design_height)<0&&Object.keys(t.designAreaDimension).length>0&&(g.design_width=t.designAreaDimension.designWidth,g.design_height=t.designAreaDimension.designHeight),h.bound_0={},h.bound_0=Object(r.a)({},g)}else m={is_designed:0,assets_doc_path:[],url:t.product_sides[e].image.src,svg:"",vdp_csv_data:[],print_papre_size_id:4,name_number:[],print_unit:""};m.print_area=h,m.side_name=t.product_sides[e].name,m.configurator_svg=n.props.canvasData.sideThumbSvg[e],p.push(m)},v=0;v<t.product_sides.length;v++)f(v);if(e.product_info.product_id=t.product_details.product_id,Bt.length)if(n.state.isNameNumber){var b,A=[];Bt.forEach((function(e){A=[],b=[],sa.forEach((function(t){t.filter((function(t){return"color"===t.type&&e.variant_id[0]===t.variantId})).length&&(b=t.filter((function(e){return"size"===e.type}))).length&&-1===A.indexOf(b[0].variantId)&&A.push(b[0].variantId)})),e.variant_id=A.length?A:e.variant_id}))}else Bt.forEach((function(e){var t=!0;Kt.forEach((function(a){a.totalVariantIds.find((function(t){return t===e.variant_id[0]}))&&t&&(e.variant_id=a.variantIds,t=!1)}))}));Bt.forEach((function(e){1===t.product_details.is_variable_decoration&&"custom"===t.selectedVarSize.type?(e.variable_decoration_size="sticker"!==t.product_details.decoration_type?t.selectedVarSize.selSize.name:n.props.stickerReducer.printDimensions.width+" x "+n.props.stickerReducer.printDimensions.height,e.variable_decoration_unit=la):(e.variable_decoration_size="",e.variable_decoration_unit="")})),e.design_product_data=Bt,e.sides=p,e.env_info=jt,e.configurator_svg_info=o||{};var y=n.getDistinctClipartFontIds();return y&&(e.used_cliparts=y.usedCliparts,e.used_fonts=y.usedFonts),e},n.prepareOrderInfo=function(e){var t=[],a=[],r={};return(t=Object(ee.a)(n.props.printSettings.filter((function(t){return t.id===e})))).length&&(t[0].order_data&&t[0].order_data.allowed_order_formats&&t[0].order_data.allowed_order_formats.length&&t[0].order_data.allowed_order_formats.forEach((function(e){e.name?0===e.is_disabled&&1===e.is_selected&&a.push(e.name?e.name:e):a.push(e)})),t[0].order_data.allowed_order_formats=a,r=t[0].order_data),r},n.getSelectedVariantId=function(e,t){Object.keys(e).forEach((function(a){Object.keys(t).forEach((function(r){r===a&&e[a].forEach((function(e){e.selected&&(e.price?oa=e.variant_id:n.getSelectedVariantId(e.options,t))}))}))}))},n.postToCart=function(){var e="add";Mt=n.prepareProductData();var t=n.prepareDesignData(),a=n.props.cartId?n.props.cartId:0;a&&(e="update"),Oe.a(e,n.state.customerId,t,Mt,a).then((function(e){if(1===e.data.status)window.onbeforeunload=function(){},"Shopify"===n.props.canvasData.storeType||"Others"!==window.storeType||"Hosted"!==window.storeType?window.open(e.data.url,"_top"):(window.onbeforeunload=null,window.parent.location.assign(e.data.url));else{n.setState({checkoutPreloader:!1});var t="Error in server";e.data.message&&(t=e.data.message),n.props.showNotification("warning",t)}}))},n.changeActiveMultiAttrName=function(e){n.setState({activeColorName:n.state.multiAttributeList[e].name})},n.updateMultiAttrQuantity=function(e,t,a,r){var i=0;e.target.validity.valid&&(i=parseInt(e.target.value.replace(/^0+/,"")),i=isNaN(i)?0:i),$t=Object(ee.a)(n.state.multiAttributeList),n.setState({activeColorName:$t[r].name}),n.updateAttributeQty($t[r],t,a,i)},n.updateAttributeQty=function(e,t,a,r){e&&e.options&&Object.keys(e.options).forEach((function(i){if(i.toLowerCase()===t.toLowerCase())r>e.options[i][a].inventory.stock&&null!==e.options[i][a].inventory.stock&&(r=e.options[i][a].inventory.stock),e.options[i][a].quantityVal=r,n.setState({multiAttributeList:$t},(function(){n.setCartProdAttrs()})),n.updateQuantityForMultiAttr();else{var o=e.options[i].findIndex((function(e){return e.selected}));n.updateAttributeQty(e.options[i][o],t,a,r)}}))},n.updateQuantityForMultiAttr=function(){var e=0;Jt=[],Qt={l:0,d:0,w:0,t:0,p:0},Yt&&(n.getMultiAttrColorList().forEach((function(t){e=n.getQuantityByMultiAttrColor(t.name),Jt.push({id:t.id,name:t.name,price:t.price,qty:e}),6===t.color_type?Qt.l+=e:5===t.color_type?Qt.d+=e:4===t.color_type?Qt.w+=e:Qt.p+=e})),n.props.dispatch(ve.s(Jt))),Qt.t=n.getTotalMultiAttrQty(),n.props.dispatch(ve.q(Qt)).then((function(){n.props.setLayerData()}))},n.getTotalMultiAttrQty=function(){var e=0;Yt&&Object(ee.a)(n.state.multiAttributeList).forEach((function(t){t.options&&(ta=0,n.getMultiAttrQty(t),e+=ta)}));return e},n.getMultiAttrColorList=function(){var e=[],t=[];return Lt.color_attributes.length&&(e=Object(ee.a)(n.state.multiAttributeList),Lt.color_attributes.forEach((function(a){e.find((function(e){return a.name===e.name}))&&t.push(a)}))),t},n.getMultiAttrQty=function(e){e.options&&Object.keys(e.options).forEach((function(t){e.options[t][0].price?e.options[t].forEach((function(e){e.price&&e.selected&&(ta=e.quantityVal)})):e.options[t].forEach((function(e){n.getMultiAttrQty(e)}))}))},n.getQuantityByMultiAttrColor=function(e){return Object(ee.a)(n.state.multiAttributeList).forEach((function(t){t.name===e&&t.options&&(ta=0,n.getMultiAttrQty(t))})),ta},n.updateQuantity=function(e,t,a,i){var o,s=0;e&&e.target&&e.target.validity.valid?(s=parseInt(e.target.value.replace(/^0+/,"")),s=isNaN(s)?0:s):Number(e)&&(s=e);var l=Object(r.a)({},n.state.selectedColorSizeList);l[t][a].forEach((function(e){var t=e.attributes[Vt]?e.attributes[Vt]:e.attributes[Vt.toLowerCase()];t?t.toString().toLowerCase()===i.toString().toLowerCase()&&(s>e.inventory.stock&&null!==e.inventory.stock&&(s=e.inventory.stock),e.quantityVal=s):(s>e.inventory.stock&&null!==e.inventory.stock&&(s=e.inventory.stock),e.quantityVal=s)})),Ft[a]=l[t][a],o=n.updateColorSizeList(Ft),n.setState({selectedColorSizeList:o,stickerQuantityVal:s},(function(){n.setCartProdAttrs()})),n.updateColorsQuantity()},n.updateSimpleProductQuantity=function(e){var t=0;e&&e.target&&e.target.validity.valid?(t=parseInt(e.target.value.replace(/^0+/,"")),t=isNaN(t)?0:t):Number(e)&&(t=e),n.setState({simpleQuantityVal:t},(function(){n.updateColorsQuantity()}))},n.onChangeTermCondition=function(e){var t=Object(r.a)({},n.state.termConditions);t.is_default_status=e.target.checked,n.setState({termConditions:t})},n.onChangeOrderNote=function(e){var t=Object(r.a)({},n.state.orderNotes),a=e.target.value,i=null,o=null;Ut.cart&&Ut.cart.order_notes&&Ut.cart.order_notes.maximum_charecters&&(i=Ut.cart.order_notes.maximum_charecters),i?(t.userInput=a.substring(0,i),(o=i-a.length)<0&&(o=0)):t.userInput=a,n.setState({orderNotes:t,maxCharAllowed:i,charLeft:o})},n.openChooseColorDiv=function(e,t,a){ea=-1;var r="",i=!1,o=!1;e&&(r=e),"change"===t?i=!n.state.isColorDivShow:o=!n.state.addColorDivShow,ea=a,n.setState({isColorDivShow:i,changeColorName:r,addColorDivShow:o})},n.updateProductInfo=function(e){if(Yt>2)delete zt[n.state.changeColorName],Zt.forEach((function(e,t){e.name.toString().toLowerCase()===n.state.changeColorName.toString().toLowerCase()&&(Zt.splice(t,1),ia=t,delete zt[e.name],delete Ht[e.name])})),n.updateColorAttributeList(e),n.captureFromStage(),n.setState({multiAttributeList:Zt},(function(){n.setCartProdAttrs()}));else{var t;""!==n.state.changeColorName&&(delete Ft[n.state.changeColorName],delete zt[n.state.changeColorName],delete Wt[n.state.changeColorName]),n.captureFromStage();var a=n.updateGlobalAttributes("");(t=n.updateColorVariantList(e,a,"change")).length&&Promise.all(t).then((function(e){return e})).catch((function(e){return n.props.showNotification("warning",n.props.language.cart.quantityFetchError)}))}},n.loadColorVariant=function(e){n.setState({isColorDivShow:!n.state.isColorDivShow}),n.setState({activeSubAttrIndex:-1}),n.props.loadVariantOnSelect(e.attribute_id,e.variant_id,n.updateProductInfo,n.state.changeColorName)},n.addMoreColorVariants=function(){var e=Object(ce.a)(le.a.mark((function e(t,a){var r,i,o,s,l,c,u,d,p,m,h,g;return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.setState({activeColorName:t.name,activeSubAttrIndex:-1,addMoreLoading:!0}),r=[],o=[],0,[],l=[],"multiple"!==a){e.next=11;break}return s=Zt.push({color_id:t.id,name:t.name,colorCode:t.hex_code&&"#"===t.hex_code[0]?t.hex_code:t.file_name})-1,na=0,e.next=7,n.addAttrOptionList(t,Object.keys(Lt.product_details.attributes),t.variant_id,s);case 7:i=n.updateColorSelectionList("multiple"),n.setState({multiAttributeList:Zt,colorAttributes:i},(function(){n.updateQuantityForMultiAttr(),n.setCartProdAttrs()})),e.next=15;break;case 11:c=!0,u=[],d=[],p=[],Object.keys(n.state.selectedColorSizeList).forEach((function(e){t.name===e&&(c=!1),u.push(e)})),c&&(Lt.color_attributes.forEach((function(e){u.find((function(t){return e.name===t}))&&d.push(e)})),m={},t.tier_prices&&(l=t.tier_prices),1===Yt?(h=Lt.product_details.attributes,Object.keys(h).forEach((function(e){m[e+"_id"]=t.attribute_id,m[e]=t.name}))):m=n.updateGlobalAttributes(),g=[{variant_id:t.variant_id,inventory:t.inventory,quantityVal:Lt.minQty?Lt.minQty:1,price:t.price,attributes:m,tier_prices:l}],Ft[t.name]=g,Wt[t.name]=!0,d.push(t),p.push(n.fetchSizeAndQuantity(Lt.product_details.product_id,t.variant_id,t.name)),i=n.updateColorSelectionList(""),n.updateColorsQuantity(),o=n.updateColorSizeList(Ft),n.setState({selectedColorSizeList:o,changeColorName:"",colorAttributes:i},(function(){n.setCartProdAttrs()})),Promise.all(p).then((function(e){return e})).catch((function(e){return n.props.showNotification("warning",n.props.language.cart.quantityFetchError)})));case 15:n.props.addAnotherColorCheckout(t.attribute_id,t.variant_id),n.activeColorIndex(t.name),n.setCheckoutPreviewImage(Lt.product_sides),Ht[t.name]={colorCode:"#"===t.hex_code[0]?t.hex_code:t.file_name,variantId:t.variant_id},r.push(t),n.updateCaptureSidesByColor(r,0),n.setState({selectedColorDetails:Ht,addColorDivShow:!n.state.addColorDivShow});case 22:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),n.getTotalQuantity=function(){var e=0;if(Yt){var t=Object(r.a)({},Ft);Object.keys(t).length?Object.keys(t).forEach((function(a){t[a].forEach((function(t){t.quantityVal>0&&(e+=parseInt(t.quantityVal))}))})):e=1}else e=n.state.simpleQuantityVal;return e},n.getQuantityByColorName=function(e){var t=0,a=Object(r.a)({},Ft);return a[e]&&a[e].forEach((function(e){e.quantityVal>0&&(t+=parseInt(e.quantityVal))})),t},n.checkMinimumOrderQty=function(){var e=!1,t=0,a=0;return n.state.isNameNumber?(sa.forEach((function(e){e.forEach((function(e){"quantity"===e.type&&(a+=Number(e.value))}))})),t=Lt.minQty?Lt.minQty:1,a>=t&&(e=!0),{status:e,minQty:t}):(t=Lt.minQty?Lt.minQty:1,{status:e=Yt>2&&"simple"!==Lt.product_extra_details.type?n.checkMinimumQty(t):n.checkTotalQty(t),minQty:t})},n.checkMinimumQty=function(e){var t=!0;Yt&&Object(ee.a)(n.state.multiAttributeList).forEach((function(a){a.options&&(ta=0,n.getMultiAttrQty(a),ta<e&&t&&(t=!1))}));return t},n.checkTotalQty=function(e){var t=!0;if(Yt){var a=Object(r.a)({},Ft);Object.keys(a).length&&Object.keys(a).forEach((function(r){a[r].forEach((function(a){a.quantityVal>0&&a.quantityVal<e&&t&&(t=!1)}))}))}else n.state.simpleQuantityVal<e&&(t=!1);return t},n.updateColorsQuantity=function(){var e=0;Jt=[],Qt={l:0,d:0,w:0,t:0,p:0},Yt&&(n.getSelectedColorList().forEach((function(t){e=n.getQuantityByColorName(t.name),Jt.push({id:t.id,name:t.name,price:t.price,qty:e}),6===t.color_type?Qt.l+=e:5===t.color_type?Qt.d+=e:4===t.color_type?Qt.w+=e:Qt.p+=e})),n.props.dispatch(ve.s(Jt))),Qt.t=n.getTotalQuantity(),n.props.dispatch(ve.q(Qt)).then((function(){n.props.setLayerData()}))},n.getSelectedColorList=function(){var e=[],t=[];return Object.keys(Ft).length&&Lt.color_attributes.length&&(Object.keys(Ft).forEach((function(t){e.push(t)})),Lt.color_attributes.forEach((function(a){e.find((function(e){return a.name===e}))&&t.push(a)}))),t},n.removeColorItem=function(e,t){if(ca){var a,r,i,o=[],s=-1;"multiple"===t?(Zt.forEach((function(t,a){t.name.toString().toLowerCase()===e.name.toString().toLowerCase()&&(Zt.splice(a,1),delete zt[e.name],delete Ht[e.name])})),a=n.updateColorSelectionList("multiple"),n.setState({multiAttributeList:Zt,colorAttributes:a},(function(){n.updateQuantityForMultiAttr(),n.setCartProdAttrs()}))):(delete Ft[e],delete zt[e],delete Ht[e],delete Wt[e],delete ga[e],n.updateColorsQuantity(),a=n.updateColorSelectionList(""),o=n.updateColorSizeList(Ft),n.setState({selectedColorSizeList:o,selectedColorDetails:Ht,colorAttributes:a},(function(){n.setCartProdAttrs(),s=Ft[n.state.activeColorName].findIndex((function(e){return e.quantityVal>0})),-1===n.state.activeSubAttrIndex&&(-1===s?Ft[n.state.activeColorName][0].inventory&&0!==Ft[n.state.activeColorName][0].inventory.stock&&n.setState({activeSubAttrIndex:0}):Ft[n.state.activeColorName][s].inventory&&0!==Ft[n.state.activeColorName][s].inventory.stock&&n.setState({activeSubAttrIndex:s}))})));var l="multiple"===t?e.name:e;Lt.color_attributes.forEach((function(e){e.name.toString().toLowerCase()===l.toString().toLowerCase()&&(i=e.variant_id,r=e.attribute_id)})),n.props.deleteColorCheckout(r,i),n.activeColorIndex(Lt.color[Lt.color.length-1].name);var c=n.state.selectedImageList;ga[Lt.color[Lt.color.length-1].name]&&ga[Lt.color[Lt.color.length-1].name].forEach((function(e,t){c[t].image=e})),n.setState({selectedImageList:c},(function(){n.props.dispatch(ve.p(n.state.selectedImageList))}))}},n.setAttributeActiveValue=function(e,t,a){e&&e.options&&Object.keys(e.options).forEach(function(){var r=Object(ce.a)(le.a.mark((function r(i){var o,s;return le.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(i.toLowerCase()!==t.toLowerCase()){r.next=16;break}if(e.options[i].forEach((function(e){e.selected=!1,e.price&&(e.quantityVal=0)})),e.options[i][a].selected=!0,!e.options[i][a].price){r.next=7;break}Lt.quantity||Lt.quantity>1?e.options[i][a].inventory&&e.options[i][a].inventory.stock>=Lt.quantity?e.options[i][a].quantityVal=Lt.quantity:(e.options[i][a].quantityVal=0,n.props.showNotification("danger",n.props.language.cart.outOfStock?n.props.language.cart.outOfStock:"Out of Stock")):e.options[i][a].quantityVal=1,r.next=13;break;case 7:if(e.options[i][a].options){r.next=13;break}return r.next=10,n.updateAttributeOptions(e,i,a);case 10:o=r.sent,e.options[i][a].options=o,n.setState({multiAttributeList:$t},(function(){n.setCartProdAttrs()}));case 13:n.setState({multiAttributeList:$t},(function(){n.setCartProdAttrs()})),r.next=18;break;case 16:s=e.options[i].findIndex((function(e){return e.selected})),n.setAttributeActiveValue(e.options[i][s],t,a);case 18:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}())},n.updateAttributeOptions=function(){var e=Object(ce.a)(le.a.mark((function e(t,a,r){var i,o,s;return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=n.getAttributeValue(Object.keys(Lt.product_details.attributes),a))){e.next=7;break}return e.next=4,n.fetchAttributesList(Lt.product_details.product_id,t.options[a][r].variant_id,i,1,1);case 4:return(o=e.sent)[i][0].price?(o[i].forEach((function(e){e.selected=!1})),o[i][0].selected=!0,o[i][0].quantityVal=Lt.quantity?Lt.quantity:1):(s=t.options[a].findIndex((function(e){return e.selected})),t.options[a][s].options=o,n.updateAttributeOptions(t.options[a][s],i,0)),e.abrupt("return",o);case 7:case"end":return e.stop()}}),e)})));return function(t,a,r){return e.apply(this,arguments)}}(),n.getAttributeValue=function(e,t){var a="",r=!0;return e.forEach((function(n,i){n===t&&r&&(r=!1,a=e[i+1].toLowerCase()!==Lt.globalColorAttr.toLowerCase()?e[i+1]:e[i+2])})),a},n.resetAttributeView=function(e){var t,a,r,i;$t=Object(ee.a)(n.state.multiAttributeList),t=parseInt(e.target.value),i=(a=e.target[t].getAttribute("name").split("-"))[0],r=a[1],n.setState({activeColorName:$t[r].name}),n.setAttributeActiveValue($t[r],i,t)},n.getUrlParameter=function(e){return("Shopify"!==window.storeType&&"Others"!==window.storeType&&"Hosted"!==window.storeType?new URLSearchParams(window.parent.location.search):new URLSearchParams(window.location.search)).get(e)},n.changeProductColor=function(e,t,a,r){if(n.setState({activeSubAttrIndex:r}),"simple"!==Lt.product_extra_details.type){var i;for(var o in t)i=t[o];n.props.changeProductColor(e,i[r],a,r),n.activeColorIndex(e);var s=n.state.selectedImageList;ga[e]&&ga[e].forEach((function(e,t){s[t].image=e})),n.setState({selectedImageList:s},(function(){n.props.dispatch(ve.p(n.state.selectedImageList))}))}},n.proceedToReqestQuote=function(){n.setState({isQuotationModal:!0}),n.saveQuotDesign(!0)},n.saveRequestQuote=function(){var e=Object(ce.a)(le.a.mark((function e(t){return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.setState({isQuotationModal:t});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.handelQuoteRequestButtonStatus=function(){n.props.globalsettings.cart.enable_email_quote?n.setState({isEnableRequestQuote:!0}):n.setState({isEnableRequestQuote:!1})},n.setActiveColorName=function(e){n.setState({activeColorName:e})},n.checkBlobUrl=function(e,t){for(var a=0;n.props.imageUploadList&&n.props.imageUploadList[t]&&a<n.props.imageUploadList[t].length;a++)e=e.replace(n.props.imageUploadList[t][a].blobUrl,n.props.imageUploadList[t][a].imgUrl);return e},n.getDistinctClipartFontIds=function(){var e=[],t=[];return n.props.canvasData.layer_data.forEach((function(a,r){a.forEach((function(a){a.isDesigned&&(a.usedClipartId.forEach((function(t){void 0!==t&&-1===e.indexOf(t)&&e.push(t)})),a.usedFontId.forEach((function(e){void 0!==e&&-1===t.indexOf(e)&&t.push(e)})))}))})),{usedCliparts:e,usedFonts:t}},n.setVariableBoundDimention=function(){if(1===Lt.product_details.is_variable_decoration&&"custom"===Lt.selectedVarSize.type){var e=n.props.canvasData.customPrintAreaDimension.width+" x "+n.props.canvasData.customPrintAreaDimension.height;n.props.dispatch(ve.N({type:"custom",selSize:{name:e}}))}},n.setCartAttrForSignBanner=function(){if(n.setState({isCartItemsLoaded:!0}),n.setVariableBoundDimention(),Lt=n.props.canvasData,Ut=n.props.globalsettings,qt=Lt.product_details.is_product_image,0===(Yt=Object.keys(Lt.product_details.attributes).length))0===n.state.simpleQuantityVal&&n.setState({simpleQuantityVal:Lt.quantity?Lt.quantity:1});else{var e=Ut.store.size,t=e+"_id";if("simple"===Lt.product_extra_details.type){var a=[];if(Lt.product_details.attributes&&(1===Lt.product_details.is_variable_decoration&&"standard"===Lt.selectedVarSize.type&&(Lt.product_details.attributes[e].name=Lt.selectedVarSize.selSize.attributes[e],Lt.product_details.attributes[e].id=Lt.selectedVarSize.selSize.attributes[t]),Object.keys(Lt.product_details.attributes).forEach((function(e){var t=Lt.product_details.attributes[e],r={};r.attributes=n.getSimpleAttributes(Lt.product_details.attributes),r.id=t.id,r.name=t.name,r.price=Lt.product_details.price,Lt.product_details.tier_prices?r.tier_prices=Lt.product_details.tier_prices:r.tier_prices=[],Ft[Lt.color[0].name]?r.quantityVal=n.props.canvasData.totalColorQty.t:r.quantityVal=Lt.quantity?Lt.quantity:1,r.variant_id=Lt.product_details.product_id,r.inventory={max_quantity:1e4,min_quantity:1,quantity_increments:1,stock:Lt.product_extra_details.stock_quantity},a=r})),Lt.color[0]&&Lt.color[0].name)){Ft[Lt.color[0].name]=[a];var r=n.updateColorSizeList(Ft);(Lt.color[0].hex_code||Lt.color[0].file_name)&&(Ht[Lt.color[0].name]={colorCode:"#"===Lt.color[0].hex_code[0]?Lt.color[0].hex_code:Lt.color[0].file_name,variantId:Lt.product_extra_details.variant_id}),n.setState({selectedColorSizeList:r,selectedColorDetails:Ht},(function(){n.setCartProdAttrs()}))}}else{var i=n.updateGlobalAttributes();Yt>2?(ia=0,n.updateColorAttributeList(Lt.color),Xt=Object.keys(Lt.product_details.attributes)):1===Lt.product_details.is_variable_decoration&&n.updateColorVariantList(Lt.color,i)}}},n.updateStickerSheetPrice=function(e,t){var a=0,r=n.props.stickerReducer.sheetInfo.sheetList;e&&e.target&&e.target.validity.valid&&(a=parseInt(e.target.value.replace(/^0+/,"")),a=isNaN(a)?0:a),"number"===typeof t&&(r[t].quantity=a),n.props.dispatch(ve.T({designbase64:n.props.stickerReducer.sheetInfo.designbase64,imageUrl:n.props.stickerReducer.sheetInfo.imageUrl,sheetList:r})),n.props.dispatch(Object(k.b)(n.props.canvasData.layer_data));var i=r.filter((function(e){return e.quantity>0&&e.stickerQtyPerSheet>0})),o=0;i.forEach((function(e,t,a){o+=e.quantity})),(Qt={l:0,d:0,w:0,t:0,p:0}).t=o,n.props.dispatch(ve.q(Qt)).then((function(){n.props.setLayerData()}))},n.updateStickerQuantity=function(e,t){var a=0;if(e&&e.target?e.target.validity.valid&&(a=parseInt(e.target.value.replace(/^0+/,"")),a=isNaN(a)?0:a):a="number"===typeof e?e:0,n.setState({stickerQuantityVal:a}),0===Yt)n.updateSimpleProductQuantity(e);else if(Yt<=2&&0!==Yt&&"resetPrice"!==t){var i=Object.keys(n.state.selectedColorSizeList[0])[0];if(n.state.selectedColorSizeList[0][i].length>0){var o=n.state.selectedColorSizeList[0][i][0].attributes[Vt];n.updateQuantity(e,0,i,o)}}else if(Yt<=2&&0!==Yt&&"resetPrice"===t){for(var s,l=Object.keys(n.state.selectedColorSizeList[0])[0],c=Object(r.a)({},n.state.selectedColorSizeList),u=c[0][l].filter((function(e){return 0!=e.quantityVal})),d=0;d<u.length;d++){u[d].attributes[Vt]?u[d].attributes[Vt]:u[d].attributes[Vt.toLowerCase()];a>u[d].inventory.stock&&(a=u[d].inventory.stock),u[d]&&Ft[l]&&(u[d].quantityVal=a,Ft[l]=c[d][l])}s=n.updateColorSizeList(Ft),n.setState({selectedColorSizeList:s},(function(){n.setCartProdAttrs()})),n.updateColorsQuantity()}},n.setPaymentDiv=function(){Object(Ce.c)().includes("offlineKiosk")?n.setState({isOfflinePaymentEnabled:!0,isOnlinePaymentEnabled:!1,displayPaymentSection:!1,paymentType:"cash"}):Object(Ce.c)().includes("onlineKiosk")?void 0!==n.props.globalsettings.kiosk_setting.offline_payment&&n.props.globalsettings.kiosk_setting.offline_payment?(n.setState({isOfflinePaymentEnabled:!0,displayPaymentSection:!0,paymentType:"cash"}),void 0!==n.props.globalsettings.kiosk_setting.publish_key&&""!==n.props.globalsettings.kiosk_setting.publish_key&&n.setState({isOnlinePaymentEnabled:!0,stripePubKey:n.props.globalsettings.kiosk_setting.publish_key})):void 0!==n.props.globalsettings.kiosk_setting.publish_key&&""!==n.props.globalsettings.kiosk_setting.publish_key&&n.setState({isOfflinePaymentEnabled:!1,isOnlinePaymentEnabled:!0,displayPaymentSection:!0,paymentType:"card"}):n.setState({isOfflinePaymentEnabled:!0,isOnlinePaymentEnabled:!1,displayPaymentSection:!1,paymentType:"cash"})},n.handleInputChange=function(e){var t=e.target,a=t.name;n.setState(Object($.a)({},a,t.value))},n.getCountryList=function(){Oe.m().then((function(e){if(1===e.status){for(var t=[],a=0;a<e.data.length;a++)t[a]={label:e.data[a].countries_name,value:a,key:e.data[a].countries_code};n.setState({countryList:t})}}))},n.countrySelected=function(e){n.setState({selCountryOpt:{label:e.label,value:e.value},custCountry:e.label,stateList:[],selStateOpt:{label:"Select",value:0},custState:""}),Oe.p(e.key).then((function(e){if(1===e.status){for(var t=[],a=0;a<e.data.length;a++)t[a]={label:e.data[a].state_name,value:a,key:e.data[a].state_code};n.setState({stateList:t})}}))},n.stateSelected=function(e){n.setState({selStateOpt:{label:e.label,value:e.value},custState:e.label})},n.setDeliveryType=function(e){n.setState({deliveryType:e.target.value})},n.setPaymentType=function(e){n.setState({paymentType:e.target.value})},n.resetCustFormData=function(){n.setState({custFirstName:"",custLastName:"",custAddr1:"",custAddr2:"",custPh:"",custCity:"",custCountry:"",custState:"",custZip:"",custEmail:"",stateList:[],selCountryOpt:{label:"Select",value:0},selStateOpt:{label:"Select",value:0}})},n.validateCustFormData=function(){(pa=!1,ma=!1,ha=!1,""===n.state.custFirstName.trim()||""===n.state.custLastName.trim()||""===n.state.custAddr1.trim()||""===n.state.custCountry.trim()||""===n.state.custZip.trim()||""===n.state.custPh.trim()||""===n.state.custEmail.trim()?pa=!0:/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,})+$/.test(n.state.custEmail.trim())?/^[+]*[(]{0,1}[0-9]{1,4}[)]{0,1}[-\s\./0-9]*$/.test(n.state.custPh.trim())?(n.props.updateIsCustomerFormProcessing(!0),"cash"===n.state.paymentType?n.placeCustOrder():n.childRef.current&&n.childRef.current.updatePriceDetails()):ma=!0:ha=!0,pa||ma||ha)&&(document.getElementById("accordion__panel-a").removeAttribute("hidden"),document.getElementById("accordion__panel-b").setAttribute("hidden",""),document.getElementById("accordion__panel-c").setAttribute("hidden",""))},n.createPayment=function(e,t){t.total_price=n.props.pricingData.totalPrice,Oe.b(e,t).then((function(e){e.data.status?n.placeCustOrder():n.showNotification("warning",e.data.message,n.props.language.notification.warning)}))},n.paymentError=function(){n.props.updateIsCustomerFormProcessing(!1),document.getElementById("accordion__panel-a").setAttribute("hidden",""),document.getElementById("accordion__panel-b").setAttribute("hidden",""),document.getElementById("accordion__panel-c").removeAttribute("hidden")},n.placeCustOrder=function(){var e=[],t="";0===Yt?(t=Lt.product_details.product_id,e.push(n.captureSelectedColorImage(Lt.faceData,Object(ee.a)(zt),Lt.product_details.product_id))):Yt>2?Zt.forEach((function(a){oa=0,n.getSelectedVariantId(a.options,Lt.product_details.attributes),t=oa,e.push(n.captureSelectedColorImage(Lt.faceData,Object(ee.a)(zt[a.name]),t))})):Object.keys(Ft).forEach((function(a){Lt.color_attributes.forEach((function(e){a.toLowerCase()===e.name.toLowerCase()&&(t=e.variant_id)})),e.push(n.captureSelectedColorImage(Lt.faceData,Object(ee.a)(zt[a]),t))})),Promise.all(e).then((function(e){var t=n.state.custFirstName.trim();""!==n.state.custLastName.trim()&&(t=t+" "+n.state.custLastName.trim());var a=n.state.custAddr1.trim()+", ";""!==n.state.custAddr2.trim()&&(a=a+n.state.custAddr2.trim()+", "),a=a+n.state.custCountry.trim()+", ",""!==n.state.custState.trim()&&(a=a+n.state.custState.trim()+", "),""!==n.state.custCity.trim()&&(a=a+n.state.custCity.trim()+", "),a+=n.state.custZip.trim(),Mt=n.prepareProductData();var r=n.prepareDesignData(),i={name:t,phone:n.state.custPh,email:n.state.custEmail,address:a};Oe.a(n.state.action,n.state.customerId,r,Mt,0,i,n.props.isKioskFeature).then((function(e){1===e.data.status&&(Bt=[],n.resetCustFormData(),n.setState({isEnableCartBtn:!1,orderId:e.data.orderId,deliveryDate:e.data.deliveryDate}),n.props.updateIsCustomerFormProcessing(!1),n.props.updateIsOrderPlaced(!0))})).catch((function(e){n.props.updateIsCustomerFormProcessing(!1),n.showNotification("danger",e)}))}))},n.showNotification=function(e,t){n.state.modalWarningIsOpen||n.setState({modalWarningIsOpen:!0,modalWarningMsg:t,modalWarningType:e},(function(){var e=document.getElementById("custWarningPop");e.className="show",e.scrollIntoView({behavior:"smooth"}),setTimeout((function(){e.className=e.className.replace("show",""),n.setState({modalWarningIsOpen:!1})}),5e3)}))},n.closeWarningModal=function(){n.setState({modalWarningIsOpen:!1},(function(){var e=document.getElementById("custWarningPop");e.className=e.className.replace("show","")}))},n.renderKioskCustDetailsPage=function(){if(n.props.isKioskFeature)return i.a.createElement(st,{ref:n.childRef,language:n.props.language,settings:n.props.globalsettings,pricingData:n.props.pricingData,totalQty:n.props.canvasData.totalColorQty.t,currentDate:n.state.currentDate,currentTime:n.state.currentTime,countryList:n.state.countryList,stateList:n.state.stateList,isMobileView:n.props.isMobileView,imgUploadStat:n.props.imageUploadStatus,isCustomerDetailsForm:n.props.isCustomerDetailsForm,isFormSubmitting:n.props.isCustomerFormProcessing,isOrderPlaced:n.props.isOrderPlaced,isUploadError:n.state.isUploadError,termConditions:n.state.termConditions,stripePubKey:n.state.stripePubKey,custFirstName:n.state.custFirstName,custLastName:n.state.custLastName,custAddr1:n.state.custAddr1,custAddr2:n.state.custAddr2,selCountryOpt:n.state.selCountryOpt,selStateOpt:n.state.selStateOpt,custCity:n.state.custCity,custZip:n.state.custZip,custPh:n.state.custPh,custEmail:n.state.custEmail,custState:n.state.custState,custCountry:n.state.custCountry,deliveryType:n.state.deliveryType,displayPaymentSection:n.state.displayPaymentSection,isOfflinePaymentEnabled:n.state.isOfflinePaymentEnabled,isOnlinePaymentEnabled:n.state.isOnlinePaymentEnabled,paymentType:n.state.paymentType,isCustFormInvalid:pa,isCustPhInvalid:ma,isCustEmailInvalid:ha,handleInputChange:n.handleInputChange,validateCustFormData:n.validateCustFormData,modalWarningIsOpen:n.state.modalWarningIsOpen,modalWarningMsg:n.state.modalWarningMsg,modalWarningType:n.state.modalWarningType,closeWarningModal:n.closeWarningModal,countrySelected:n.countrySelected,stateSelected:n.stateSelected,setDeliveryType:n.setDeliveryType,setPaymentType:n.setPaymentType,createPayment:n.createPayment,paymentError:n.paymentError})},n.renderKioskOrderConfPage=function(){if(n.props.isKioskFeature&&n.props.isOrderPlaced)return i.a.createElement(lt,{language:n.props.language,settings:n.props.globalsettings,orderId:n.state.orderId,deliveryDate:n.state.deliveryDate,isOrderPlaced:n.props.isOrderPlaced,kioskDesignAgain:n.props.kioskDesignAgain})},n.checkUserAuthStatus=function(){var e=new URLSearchParams(window.location.search),t=0,a="";"Shopify"===n.props.canvasData.storeType?(a=new URLSearchParams(window.location.search),0!==(t=e.get("customer")?e.get("customer"):a.get("customer"))&&t||(t=0),va=t,n.proceedToReqestQuote()):n.props.customerData.customerId?n.props.dispatch(ve.i()).then((function(){n.props.customerData.customerId?(va=n.props.customerData.customerId,n.proceedToReqestQuote()):n.setState({isLogInModalOpen:!0})})):n.setState({isLogInModalOpen:!0})},n.closeAuthModal=function(){var e=Object(ce.a)(le.a.mark((function e(t){return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.setState({isLogInModalOpen:t});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.userAuthSuccess=function(e,t,a){n.props.dispatch(ve.i()),"registration"===a&&n.props.showNotification("success",n.props.language.panel.regdComplete),va=e,n.proceedToReqestQuote()},n.loadColorVariantData=function(e){var t=n.props.canvasData.color_attributes.filter((function(t){return t.name===e.target.value}));n.loadColorVariant(t[0],-1)},n.renderCheckoutPage=function(){var e,t,a,r;if(n.props.isOrderOptionsShow)return i.a.createElement(Ie,{language:n.props.language,settings:n.props.globalsettings,selectedColorSizeList:n.state.selectedColorSizeList,updateQuantity:n.updateQuantity,updateSimpleProductQuantity:n.updateSimpleProductQuantity,globalSizeAttribute:Vt,captureImageList:n.state.selectedImageList,termConditions:n.state.termConditions,onChangeTermCondition:n.onChangeTermCondition,orderNotes:n.state.orderNotes,onChangeOrderNote:n.onChangeOrderNote,openChooseColorDiv:n.openChooseColorDiv,isColorDivShow:n.state.isColorDivShow,colorVariants:n.state.colorAttributes,loadColorVariant:n.loadColorVariant,selectedColorDetails:n.state.selectedColorDetails,isProductImage:qt,addColorDivShow:n.state.addColorDivShow,addMoreColorVariants:n.addMoreColorVariants,removeColorItem:n.removeColorItem,noOfAttributes:Yt,multiAttributeList:n.state.multiAttributeList,attributeList:Xt,resetAttributeView:n.resetAttributeView,updateMultiAttrQuantity:n.updateMultiAttrQuantity,changeProductColor:n.changeProductColor,productDetail:n.props.canvasData.product_details,checkoutPreloader:n.state.checkoutPreloader,isMobileView:n.props.isMobileView,imgUploadStat:n.props.imageUploadStatus,simpleQuantityVal:n.state.simpleQuantityVal,onChangeOrderOption:n.props.onChangeOrderOption,globalColorAttribute:n.props.canvasData.globalColorAttr,maxCharAllowed:n.state.maxCharAllowed,charLeft:n.state.charLeft,isCustFormSubmitting:n.props.isCustomerFormProcessing,isOrderPlaced:n.props.isOrderPlaced,productType:n.props.canvasData.product_extra_details.type,activeColorName:n.state.activeColorName,activeSubAttrIndex:n.state.activeSubAttrIndex,changeActiveMultiAttrName:n.changeActiveMultiAttrName,selectedVarSize:n.props.canvasData.selectedVarSize,scaleUnit:la,productAttributes:n.props.canvasData.product_details.attributes,storeColorAttribute:da,loading:n.state.loading,addMoreLoading:n.state.addMoreLoading,isCustomerDetailsForm:n.props.isCustomerDetailsForm,isEnableRequestQuote:!(!n.state.isEnableRequestQuote||!n.props.pricingData.isRequestQuote)||!(!(null===(e=Ut)||void 0===e||null===(t=e.cart)||void 0===t?void 0:t.enable_email_quote)||!(null===(a=n.props.selectedPrintProfileData)||void 0===a||null===(r=a.misc_data)||void 0===r?void 0:r.force_quotation_option)),showStickerSheet:n.state.showStickerSheet,showNotification:n.props.showNotification,updateStickerSheetPrice:n.updateStickerSheetPrice,updateStickerQuantity:n.updateStickerQuantity,stickerQuantityVal:n.state.stickerQuantityVal,isStickerEnable:n.state.isStickerEnabled,stickerPreviewStatus:n.props.stickerPreviewStatus,currency:n.state.currency,currencyList:n.props.getCurrenciesList,stickerDimension:n.props.stickerReducer&&n.props.stickerReducer.printDimensions?n.props.stickerReducer.printDimensions:"",isColorAttribute:n.props.canvasData.isColorAttribute,colorAttributes:n.props.canvasData.color_attributes,loadColorVariantData:n.loadColorVariantData,totalQty:n.props.canvasData.totalColorQty.t})},n.renderSaveTempModal=function(){if(n.state.isTemplateModal)return i.a.createElement($e,{opened:n.state.open,language:n.props.language,modalIsOpen:n.state.isTemplateModal,modalMethod:n.saveTemplate,printProfiles:n.props.allPrintProfiles,isUploadSuccess:n.state.isUploadSuccess,isCustomerDetailsForm:n.props.isCustomerDetailsForm,isQuot:n.isQuot,showNotification:n.props.showNotification})},n.renderQuotePage=function(){if(n.state.isQuotationModal)return i.a.createElement(vt,{language:n.props.language,isOpen:n.state.isQuotationModal,productData:n.prepareProductData,customDesignId:n.state.customDesignId,saveRequestQuote:n.saveRequestQuote,showNotification:n.props.showNotification,canvasData:n.props.canvasData,pricingData:n.props.pricingData,customerData:n.props.customerData,licenseAddOns:n.props.licenceAddOns,quoteCustId:va})},n.renderAuthModal=function(){if(n.state.isLogInModalOpen)return i.a.createElement(Tt.default,{userAuthSuccess:n.userAuthSuccess,isOpen:n.state.isLoginModalOpen,isLogInModalOpen:n.state.isLogInModalOpen,saveDesignModal:n.closeAuthModal,showNotification:n.props.showNotification})},n.state={price:[],isEnableCartBtn:!1,action:"add",customerId:0,designData:{},productData:[],sideData:[],cartItemId:0,selectedColorSizeList:[],selectedColorDetails:[],captureImageList:[],termConditions:{},isColorDivShow:!1,colorAttributes:[],selectedImageList:[],changeColorName:"",addColorDivShow:!1,multiAttributeList:[],isTemplateModal:!1,isUploadError:!1,simpleQuantityVal:0,maxCharAllowed:null,charLeft:null,custFirstName:"",custLastName:"",custAddr1:"",custAddr2:"",custCity:"",custZip:"",custPh:"",custEmail:"",custState:"",custCountry:"",currentDate:"",currentTime:"",countryList:[],selCountryOpt:{label:"Select",value:0},stateList:[],selStateOpt:{label:"Select",value:0},orderId:"",deliveryDate:"",isOfflinePaymentEnabled:!0,isOnlinePaymentEnabled:!1,displayPaymentSection:!0,deliveryType:"store",paymentType:"cash",stripePubKey:"",isUploadSuccess:!1,isArtworkDesignSaveProcessing:!1,isQuotationModal:!1,isEnableRequestQuote:!1,customDesignId:0,isCartItemsLoaded:!1,captureStatus:!1,activeColorName:"",activeSubAttrIndex:-1,isNameNumber:!1,storeType:"",cartEditSize:n.props.cartAttrValue,loading:!1,addMoreLoading:!1,configuratorCartData:{},modalIsOpen:!1,modalWarningIsOpen:!1,modalWarningMsg:"",modalWarningType:"",isStickerEnabled:!1,showStickerSheet:!1,stickerQuantityVal:0,currencyConversionUnit:0,currency:n.props.currency,isLoginModalOpen:!1},n.addToCartClick=n.addToCartClick.bind(Object(ue.a)(n)),n.updateCartBtn=n.updateCartBtn.bind(Object(ue.a)(n)),n.proceedTocheckout=n.proceedTocheckout.bind(Object(ue.a)(n)),n.saveTemplate=n.saveTemplate.bind(Object(ue.a)(n)),n.addToCart=n.addToCart.bind(Object(ue.a)(n)),n.uploadImg=n.uploadImg.bind(Object(ue.a)(n)),n.exportCaptureColors=n.exportCaptureColors.bind(Object(ue.a)(n)),n.handleInputChange=n.handleInputChange.bind(Object(ue.a)(n)),n.validateCustFormData=n.validateCustFormData.bind(Object(ue.a)(n)),n.captureQuotDesign=n.captureQuotDesign.bind(Object(ue.a)(n)),n.changeActiveMultiAttrName=n.changeActiveMultiAttrName.bind(Object(ue.a)(n)),n.setCartAttrForSignBanner=n.setCartAttrForSignBanner.bind(Object(ue.a)(n)),n.getDistinctClipartFontIds=n.getDistinctClipartFontIds.bind(Object(ue.a)(n)),n.childRef=i.a.createRef(),n}return Object(ae.a)(a,[{key:"componentDidMount",value:function(){var e=this;(0,this.props.childRef)(this),this.storeType=Object(Ce.d)(),this.props.dispatch(Object(G.Gb)(this.storeType)),window.storeType=this.storeType;var t=new URLSearchParams(window.location.search),a="";a="Shopify"!==this.storeType&&"Others"!==window.storeType&&"Hosted"!==window.storeType?new URLSearchParams(window.parent.location.search):new URLSearchParams(window.location.search),this.isTemplate=this.getUrlParameter("temp"),this.isQuot=t.get("quot")?t.get("quot"):a.get("quot"),this.props.isKioskFeature&&this.getCountryList(),setInterval((function(){var t=(new Date).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric"}),a=t.split(",")[1],r=t.split(",")[0],n=r.split(" ")[0],i=r.split(" ")[1];i<10&&(i="0"+i.trim());var o=i+" "+n+a,s=(new Date).toLocaleString("en-US",{hour12:!0}).split(",")[1],l=s.split(":")[0];l<10&&(l="0"+l.trim());var c=l+":"+s.split(":")[1]+" "+s.split(":")[2].split(" ")[1];e.setState({currentDate:o,currentTime:c})}),1e3),this.isTemplateEdit=!!this.getUrlParameter("etid"),this.setState({storeType:this.props.storeType})}},{key:"componentWillUnmount",value:function(){(0,this.props.childRef)(void 0)}},{key:"componentDidUpdate",value:function(){var e=this;Lt=this.props.canvasData,this.state.isEnableCartBtn||!this.props.isTeamJerseyData||1===this.props.productDetails.is_configurator&&0===this.props.productDetails.is_image_based||this.addToCartClick(),0!=this.props.globalsettings.length&&0==this.state.currencyConversionUnit&&this.props.globalsettings.currency.post_fix&&this.props.getCurrenciesList.length>1&&this.props.getCurrenciesList.forEach((function(t){t.xe_id==e.props.globalsettings.currency.currencyId&&e.getUnitConversnalPrice(t.code)}))}},{key:"resetTierPriceInfoIndexData",value:function(){this.setState({activeColorName:""}),this.setState({activeSubAttrIndex:-1})}},{key:"setCartProdAttrs",value:function(){var e=this;if(this.state.isCartItemsLoaded){var t=[];Yt<=2&&0!==Yt&&this.state.selectedColorSizeList.length?this.props.dispatch(ve.t(this.state.selectedColorSizeList.filter((function(e){return e})))).then((function(){e.state.selectedColorSizeList.filter((function(e){return e})).forEach((function(e){t.push(Object.keys(e)[0])})),(""===e.state.activeColorName||-1===t.indexOf(e.state.activeColorName))&&e.setState({activeColorName:Object.keys(e.state.selectedColorSizeList[0])[0]}),e.props.dispatch(Object(k.b)(e.props.canvasData.layer_data))})):Yt>2&&0!==Yt&&this.state.multiAttributeList.length&&this.props.dispatch(ve.t(this.state.multiAttributeList.filter((function(e){return e})))).then((function(){e.state.multiAttributeList.filter((function(e){return e})).forEach((function(e){t.push(e.name)})),(""===e.state.activeColorName||-1===t.indexOf(e.state.activeColorName))&&e.setState({activeColorName:e.state.multiAttributeList[0].name}),e.props.dispatch(Object(k.b)(e.props.canvasData.layer_data))}))}}},{key:"resetCartItemsLoaded",value:function(){this.setState({isCartItemsLoaded:!1})}},{key:"fetchSizeAndQuantity",value:function(e,t,a){var r=this,n=[],i=!0,o=!0,s=-1;return this.setState({loading:!0}),new Promise((function(l,c){Vt&&Yt>1&&(ca=!1,r.props.dispatch(ve.k(!1)),Oe.h(e,t,Vt).then((function(e){if(1===e.status){r.props.dispatch(ve.k(!0)),r.setState({loading:!1,addMoreLoading:!1});var u=e.quantities[Vt];if(1===Lt.product_details.is_variable_decoration&&Vt===Ut.store.size)if("standard"===Lt.selectedVarSize.type){Yt<=2&&(u=u.filter((function(e){return e.name===Lt.selectedVarSize.selSize.name})));var d=r.props.canvasData.varSizePrice;d.forEach((function(t){t.name===a&&(t.sizeAttrib=e.quantities[Vt])})),r.props.dispatch(ve.X(d))}else"custom"===Lt.selectedVarSize.type&&Yt<=2&&Lt.product_details.attributes&&Lt.product_details.attributes[Vt]&&Lt.product_details.attributes[Vt].name&&(u=u.filter((function(e){return e.name===Lt.product_details.attributes[Vt].name})));if(u.filter((function(e){return e.variant_id===Number(r.props.variantId)})).length&&(s=u.findIndex((function(e){return e.variant_id===Number(r.props.variantId)})),(Lt.quantity||Lt.quantity>1)&&i?(u[s].quantityVal=u[s].inventory.stock&&u[s].inventory.stock>=Lt.quantity||null===u[s].inventory.stock?Lt.quantity:0,i=!1):u[s].quantityVal=1,o=!1),u.forEach((function(e,a){s!==a&&(e.variant_id===Number(t)&&o?(Lt.quantity||Lt.quantity>1)&&i?(e.inventory&&e.inventory.stock>=Lt.quantity?e.quantityVal=Lt.quantity:e.quantityVal=0,i=!1):e.quantityVal=1:e.quantityVal=0)})),1===Lt.product_details.is_variable_decoration&&Vt===Ut.store.size&&"standard"===Lt.selectedVarSize.type&&Yt<=2&&(Lt.quantity?u[0].inventory&&u[0].inventory.stock>=Lt.quantity?u[0].quantityVal=Lt.quantity:u[0].quantityVal=0:u[0].inventory&&u[0].inventory.stock>=1?u[0].quantityVal=1:u[0].quantityVal=0),r.props.cartId&&("Opencart"===r.state.storeType||"opencart"===r.state.storeType))for(var p=0;p<u.length;p++)u[p].name===r.state.cartEditSize&&u[p].inventory&&u[p].inventory.stock>=Lt.quantity?u[p].quantityVal=Lt.quantity:u[p].quantityVal=0;if(!r.props.cartId&&("Opencart"===r.state.storeType||"opencart"===r.state.storeType)&&r.props.productDetails.attributes[Vt].name)for(var m=0;m<u.length;m++)u[m].name===r.props.productDetails.attributes[Vt].name&&u[m].inventory&&u[m].inventory.stock>=Lt.quantity?u[m].quantityVal=Lt.quantity:u[m].quantityVal=0;Ft[a]=[],Ft[a]=u,n=r.updateColorSizeList(Ft),r.setState({selectedColorSizeList:n},(function(){r.setCartProdAttrs()})),r.updateColorsQuantity(),ca=!0,l("success")}else r.props.dispatch(ve.k(!0)),c(new Error("Error in server"))})))}))}},{key:"uploadImg",value:function(e,t,a){var r=this;this.setState({isUploadError:!1});var n=[],i=[],o=[],s=[],l=[],c=[];e.forEach((function(e){"image"===e.prefs.type&&"svg"!==e.prefs.imgType?(e.prefs.updatedFile||(e.prefs.updatedFile=e.prefs.intermediateFile),n.push(e.prefs.updatedFile)):a&&(e.prefs.imgSelectionType="upload"),"image"!==e.prefs.type||"svg"===e.prefs.imgType||""===e.prefs.updatedFile||0===Object.keys(e.prefs.updatedBlob).length&&e.prefs.updatedBlob.constructor===Object||e.prefs.largeSvg||e.prefs.originalImageUrl||(i.push(e.prefs.updatedBlob),o.push(e.prefs.updatedFile),s.push(e.prefs.imgExtension),l.push(e.prefs.uploadedImg)),c.push(e.prefs.originalImageUrl)})),i.length?this.props.dispatch(ve.ib(this.props.currentSideIndex,i,o,n,s,1,l,c)).then((function(e){"error"===e?(r.setState({isUploadError:!0}),r.props.showNotification("danger",r.props.language.cart.imageUploadError)):t&&t()})):t&&t()}},{key:"addToCart",value:function(){var e=Object(ce.a)(le.a.mark((function e(){var t,a,r,n,i,o,s,l,c,u,d,p,m,h=this,g=arguments;return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=g.length>0&&void 0!==g[0]?g[0]:0,this.setState({showStickerSheet:!1,stickerQuantityVal:0}),a=!1,r=[],n=!0,i=0,o=Ne.a.canvas.team,Object.keys(o).forEach((function(e){i+=o[e]})),(Lt=this.props.canvasData).faceData.forEach((function(e,t){t!==Lt.active_product_side&&e&&e.isDesigned&&(a=!0)})),!a&&!Ne.a.canvas.getAllStageElems().length||!this.props.canvasData.isUsedColExists){e.next=68;break}if("Small"!==(s=this.props.stickerReducer.stickerPreviewData?this.props.stickerReducer.stickerPreviewData.selectedCutLine:"")&&"Medium"!==s&&"Large"!==s){e.next=12;break}return e.next=12,this.props.enableSticker();case 12:if(t||(this.props.isMobileView?this.props.togglePreviewTab("2d"):this.props.togglePreviewTab("3d")),!this.checkMaxColorsWarn(Lt.layer_data)){e.next=64;break}if(!this.checkFullColor(Lt.layer_data)){e.next=60;break}if((Ut=this.props.globalsettings).image_setting&&Ut.image_setting.file_uploaded.low_resolution&&Ut.image_setting.file_uploaded.disable_cart&&(n=this.checkImageResolution()),!n){e.next=56;break}if(qt=Lt.product_details.is_product_image,Yt=Object.keys(Lt.product_details.attributes).length,0===this.props.canvasData.product_details.is_variable_decoration?this.captureFromStage():this.captureFromVariableDecoStage(),(l=Ut.cart.order_notes).userInput="",i?(this.props.onChangeOrderOption(!1,void 0,!0),this.setState({isEnableCartBtn:!0,termConditions:Ut.cart.cart_terms_condition,orderNotes:l,isNameNumber:!0})):(t||this.props.onChangeOrderOption(!0),this.setState({isEnableCartBtn:!0,termConditions:Ut.cart.cart_terms_condition,orderNotes:l,isNameNumber:!1})),jt={platform:navigator.platform,language:navigator.language,userAgent:navigator.userAgent},0!==Yt){e.next=32;break}t&&this.saveQuotDesign(),0===this.state.simpleQuantityVal&&this.setState({simpleQuantityVal:Lt.quantity?Lt.quantity:1}),e.next=54;break;case 32:if(c=Ut.store,u=c.size,u+"_id","simple"!==Lt.product_extra_details.type){e.next=38;break}d=[],Lt.product_details.attributes&&(Object.keys(Lt.product_details.attributes).forEach((function(e){var t=Lt.product_details.attributes[e],a={};a.attributes=h.getSimpleAttributes(Lt.product_details.attributes),a.id=t.id,a.name=t.name,a.price=Lt.product_details.price,Lt.product_details.tier_prices?a.tier_prices=Lt.product_details.tier_prices:a.tier_prices=[],Ft[Lt.color[0].name]?a.quantityVal=h.props.canvasData.totalColorQty.t:a.quantityVal=Lt.quantity?Lt.quantity:1,a.variant_id=Lt.product_details.product_id,a.inventory={max_quantity:1e4,min_quantity:1,quantity_increments:1,stock:Lt.product_extra_details.stock_quantity},d=a})),Lt.color[0]&&Lt.color[0].name&&(Ft[Lt.color[0].name]=[d],p=this.updateColorSizeList(Ft),(Lt.color[0].hex_code||Lt.color[0].file_name)&&(Ht[Lt.color[0].name]={colorCode:"#"===Lt.color[0].hex_code[0]?Lt.color[0].hex_code:Lt.color[0].file_name,variantId:Lt.product_extra_details.variant_id}),this.setState({selectedColorSizeList:p,selectedColorDetails:Ht},(function(){h.setCartProdAttrs()}))),t&&this.saveQuotDesign()),e.next=54;break;case 38:if(m=this.updateGlobalAttributes(),!(Yt>2)){e.next=46;break}ia=0,this.updateColorAttributeList(Lt.color),Xt=Object.keys(Lt.product_details.attributes),t&&this.saveQuotDesign(),e.next=54;break;case 46:if(!t||1!==Yt){e.next=52;break}return e.next=49,this.updateColorVariantList(Lt.color,m);case 49:this.saveQuotDesign(),e.next=54;break;case 52:(r=this.updateColorVariantList(Lt.color,m)).length?Promise.all(r).then((function(e){t&&h.saveQuotDesign()})).catch((function(e){h.setState({isArtworkDesignSaveProcessing:!1}),h.props.showNotification("warning",h.props.language.cart.quantityFetchError)})):t&&this.saveQuotDesign();case 54:e.next=58;break;case 56:this.setState({isArtworkDesignSaveProcessing:!1}),this.props.showNotification("warning",this.props.language.cart.imageQualityError);case 58:e.next=62;break;case 60:this.setState({isArtworkDesignSaveProcessing:!1}),this.props.showNotification("warning",this.props.language.cart.reduceImageColor);case 62:e.next=66;break;case 64:this.setState({isArtworkDesignSaveProcessing:!1}),this.props.showNotification("warning",this.props.language.clipart.maxColorError);case 66:e.next=70;break;case 68:this.setState({isArtworkDesignSaveProcessing:!1}),this.props.canvasData.isUsedColExists?this.props.showNotification("warning",this.props.language.cart.designError):this.props.showNotification("warning",this.props.language.cart.colorWarning);case 70:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addToCartClick",value:function(){var e=this;if(fa=0,this.setState({isCartItemsLoaded:!0}),1===this.props.productDetails.is_configurator&&0===this.props.productDetails.is_image_based){var t=[];this.productSides=[];for(var a=function(a){if(document.getElementById("configurator_side_"+a)){t.push(document.getElementById("configurator_side_"+a).children[0].outerHTML);var r=new Image,n=document.getElementById("configCanvas");n.width=600,n.height=600,document.body.appendChild(n);var i=n.getContext("2d"),o=document.getElementById("configurator_side_"+a).children[0].outerHTML;r.src="data:image/svg+xml;base64,"+window.btoa(o),r.onload=function(){i.drawImage(r,0,0,600,600),e.productSides[a]=n.toDataURL(),i.clearRect(0,0,n.width,n.height)}}},r=0;r<Lt.product_sides.length;r++)a(r);var n=setInterval((function(){e.productSides.length==Lt.product_sides.length&&(e.addToCart(),e.handelQuoteRequestButtonStatus(),e.setVariableBoundDimention(),1===e.props.productDetails.is_configurator&&0===e.props.productDetails.is_image_based&&e.props.dispatch(ve.O(t)).then((function(){e.svgConfiguratorData=e.props.configuratorSvgCartData;for(var a=0;a<e.svgConfiguratorData.sides.length;a++)e.svgConfiguratorData.sides[a].side_svg=t[a];e.props.dispatch(Object(P.t)(e.svgConfiguratorData)).then((function(){}))})),clearInterval(n))}),50)}else this.addToCart(),this.handelQuoteRequestButtonStatus(),this.setVariableBoundDimention();this.props.isKioskFeature&&this.setPaymentDiv()}},{key:"exportCaptureColors",value:function(){var e=Object(ce.a)(le.a.mark((function e(t,a,r,n){var i,o,s,l,c,u,d,p,m,h,g,f,v,b,A=this;return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=!1,l="",Lt.engraveSides&&(s=!!Lt.engraveSides[a]&&Lt.engraveSides[a]),l=(null===(i=t[a])||void 0===i?void 0:i.is_image_overlay)?t[a].overlay_image:"",!(t.length>a)){e.next=61;break}if(!Lt.product_details.is_variable_decoration){e.next=29;break}if(u=!1,this.props.printSettings[0].sticker&&this.props.printSettings[0].sticker.is_sticker_enabled&&(u=!0),!Lt.faceData[a]||!Lt.faceData[a].isDesigned){e.next=20;break}return e.next=10,Ne.a.canvas.checkImageUrl(Lt.faceData[a].svg);case 10:if(!e.sent){e.next=17;break}return e.next=14,Ne.a.canvas.convertToString(Lt.faceData[a].svg,u);case 14:c=e.sent,e.next=18;break;case 17:c=Lt.faceData[a].svg;case 18:e.next=21;break;case 20:c="";case 21:return d=!1,this.props.decoProductId&&(d=!0),e.next=25,Ne.a.exportCaptureData("",c,"#FFFFFF",s,d,u,!0,l);case 25:o=e.sent,p=setInterval((function(){o.imgObject&&(r?zt[r].push(o.imgObject):zt.push(o.imgObject),a++,A.exportCaptureColors(t,a,r,n),clearInterval(p))}),50),e.next=61;break;case 29:if(!Lt.faceData[a]||!Lt.faceData[a].isDesigned){e.next=42;break}return e.next=32,Ne.a.canvas.checkImageUrl(Lt.faceData[a].svg);case 32:if(!e.sent){e.next=39;break}return e.next=36,Ne.a.canvas.convertToString(Lt.faceData[a].svg);case 36:m=e.sent,e.next=40;break;case 39:m=Lt.faceData[a].svg;case 40:e.next=43;break;case 42:m="";case 43:if(h=!1,this.props.decoProductId&&(h=!0),1!==this.props.productDetails.is_configurator||0!==this.props.productDetails.is_image_based){e.next=57;break}return t[a]||(t[a]={image:{src:""}}),t[a].image.src=this.productSides[a],e.next=50,Ne.a.exportCaptureData(t[a].image.src,m,n,s,h,!1,!0);case 50:o=e.sent,n="",g=setInterval((function(){o.imgObject&&(zt[r].push(o.imgObject),a++,A.exportCaptureColors(t,a,r,n),clearInterval(g))})),f=document.getElementById("preview_"+Lt.active_product_side),v=document.getElementById("configurator_svg-loader_"+Lt.active_product_side),f&&v&&(v.innerHTML=f.innerHTML),e.next=61;break;case 57:return e.next=59,Ne.a.exportCaptureData(t[a].image.src,m,n,s,h,!1,!0,l);case 59:o=e.sent,b=setInterval((function(){if(o.imgObject){if(r){if(zt[r].push(o.imgObject),A.state.activeColorName&&A.state.activeColorName===r){var e=A.state.selectedImageList;e[a]&&(e[a].image=o.datauri,A.setState({selectedImageList:e},(function(){A.props.dispatch(ve.p(A.state.selectedImageList))})))}ga[r]||(ga[r]=[]),ga[r][a]=o.datauri}else zt.push(o.imgObject);a++,A.exportCaptureColors(t,a,r,n),clearInterval(b)}}));case 61:case"end":return e.stop()}}),e,this)})));return function(t,a,r,n){return e.apply(this,arguments)}}()},{key:"updateCaptureSidesByColor",value:function(){var e=Object(ce.a)(le.a.mark((function e(t,a){var r,n,i,o,s;return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.props.isTeamJerseyData)for(r=0;r<Lt.product_sides.length&&Lt.sideThumbSvg.length;r++)(n=document.getElementById("configurator_side_"+r))&&(n.outerHTML=Lt.sideThumbSvg[r]);if(!(t.length>a)){e.next=12;break}return 1===this.props.productDetails.is_configurator&&0===this.props.productDetails.is_image_based&&(t[a].hex_code=""),zt[t[a].name]=[],i=[],i=qt?Lt.product_sides:t[a].sides?t[a].sides:Lt.product_sides,Lt.product_details&&1===Lt.product_details.is_variable_decoration&&(i=Lt.product_sides),o=1===Lt.product_details.is_product_image&&t[a].hex_code?"#"===t[a].hex_code[0]?t[a].hex_code:t[a].file_name:1===Lt.product_details.is_product_image&&t[a].file_name?t[a].file_name:"",e.next=10,this.exportCaptureColors(i,0,t[a].name,o);case 10:a++,this.updateCaptureSidesByColor(t,a);case 12:if((Object.keys(zt).length||0===t.length)&&this.setState({captureStatus:!0}),!Lt.product_details.is_variable_decoration||!t||0!==t.length){e.next=18;break}return[],s=Lt.product_sides,e.next=18,this.exportCaptureColors(s,0,"","");case 18:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"updateGlobalAttributes",value:function(e){var t,a=this,r=Lt.product_details.attributes,n=Ut.store,i={};return Object.keys(r).forEach((function(e){t=[],(n.size===e&&Lt.globalColorAttr!==e||Lt.globalColorAttr!==e)&&(Vt=e),n.color===e&&(e,t=a.props.canvasData.color.filter((function(e){return 1===e.isActive}))),Vt||(Vt=e),i[e+"_id"]=t&&t.length?t[0].attribute_id:r[e].id,i[e]=t&&t.length?t[0].name:r[e].name})),this.props.dispatch(ve.z(Vt)),i}},{key:"captureFromStage",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.setState({designImg:null});var a=!1;Lt.engraveSides&&(a=!!Lt.engraveSides[Lt.active_product_side]&&Lt.engraveSides[Lt.active_product_side]);var r=!1;this.props.decoProductId&&(r=!0),this.swatchColor="";var n={productUrl:Lt.product_sides[Lt.active_product_side].image.src,productColor:this.swatchColor};if(this.props.productDetails.is_variable_decoration&&(n={productUrl:null,productColor:this.swatchColor}),1!==this.props.productDetails.is_configurator||1!==this.props.productDetails.is_image_based)if(1===this.props.productDetails.is_configurator&&0===this.props.productDetails.is_image_based){var i={productUrl:"",productColor:""},o=new Image,s=document.getElementById("configCanvas");s.width=600,s.height=600,document.body.appendChild(s);var l=s.getContext("2d"),c=document.getElementById("configurator_side_"+Lt.active_product_side).children[0].outerHTML;o.src="data:image/svg+xml;base64,"+window.btoa(c),o.onload=function(){l.drawImage(o,0,0,600,600),i.productUrl=s.toDataURL(),Ne.a.exportFaceData(i,a,r,(function(a){e.uploadImg(Ne.a.canvas.getAllStageElems().slice(),function(){}.bind(e)),a.isDesigned=Ne.a.canvas.getAllStageElems().length?1:0,e.setState({designImg:a.designUrl}),Lt.faceData[Lt.active_product_side]=a;var r=Lt.product_sides,n=setInterval((function(){if(e.productSides.length==Lt.product_sides.length){for(var a=0;a<e.productSides.length;a++)r[a].image.src=e.productSides[a];clearInterval(n),t||e.setCheckoutPreviewImage(r)}}),500);e.updateCaptureSidesByColor(Lt.color,0),0===Yt&&(zt=[],e.exportCaptureColors(r,0,""))}))}}else Ne.a.exportFaceData(n,a,r,function(){var a=Object(ce.a)(le.a.mark((function a(r){return le.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(e.uploadImg(Ne.a.canvas.getAllStageElems().slice(),function(){}.bind(e)),r.isDesigned=Ne.a.canvas.getAllStageElems().length?1:0,e.setState({designImg:r.designUrl}),Lt.faceData[Lt.active_product_side]=r,t){a.next=7;break}return a.next=7,e.setCheckoutPreviewImage(Lt.product_sides);case 7:e.isQuot&&e.props.stateId||e.updateCaptureSidesByColor(Lt.color,0),0===Yt&&(zt=[],e.exportCaptureColors(Lt.product_sides,0,""));case 9:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}());else{for(var u={x:0,y:0,height:600,width:600},d=1,p=[],m=document.getElementById("configurator_image-loader").cloneNode(!0),h=0;h<m.children.length;h++)m.getElementsByTagName("g")[h].setAttribute("transform","translate("+-u.x+","+-u.y+")scale("+d+","+d+")"),p.push(m.getElementsByTagName("g")[h].getElementsByTagName("image")[0].href.baseVal);Ne.a.exportConfiguratorPng(n,m.outerHTML,p,"true",(function(n){var i={productUrl:n,productColor:""};Ne.a.exportFaceData(i,a,r,(function(a){e.uploadImg(Ne.a.canvas.getAllStageElems().slice(),function(){}.bind(e)),a.isDesigned=Ne.a.canvas.getAllStageElems().length?1:0,e.setState({designImg:a.designUrl}),Lt.faceData[Lt.active_product_side]=a,t||e.setCheckoutPreviewImage(Lt.product_sides),e.updateCaptureSidesByColor(Lt.color,0),0===Yt&&(zt=[],e.exportCaptureColors(Lt.product_sides,0,""))}))}))}}},{key:"captureFromVariableDecoStage",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.uploadImg(Ne.a.canvas.getAllStageElems().slice(),function(){}.bind(this));var e=!1;Lt.engraveSides&&(e=!!Lt.engraveSides[Lt.active_product_side]&&Lt.engraveSides[Lt.active_product_side]);var t=!1;this.props.decoProductId&&(t=!0);var a=!1;this.props.printSettings[0].sticker&&this.props.printSettings[0].sticker.is_sticker_enabled&&(a=!0),Ne.a.exportFaceData({},e,t,this.exportCaptureImg,a,!0)}},{key:"captureSelectedColorImage",value:function(e,t,a){var r=this;return new Promise((function(n,i){if(1===Lt.product_details.is_configurator&&1===Lt.product_details.is_image_based){var o=Object(Ce.a)(e[0].datauri.split(",")[1],"image/png"),s=new File([o],t[0].name);t[0]=s}else if(1===Lt.product_details.is_configurator&&0===Lt.product_details.is_image_based)for(var l=0;l<r.productSides.length;l++){e[l]||(e[l]={}),e[l].datauri||(e[l].datauri=r.productSides[l]);var c=Object(Ce.a)(e[l].datauri.split(",")[1],"image/png");s=new File([c],t[l].name);t[l]=s}else if(r.state.isStickerEnabled){var u=r.props.stickerReducer.stickerPreviewData?r.props.stickerReducer.stickerPreviewData.selectedCutLine:"";if("Small"===u||"Medium"===u||"Large"===u){var d=Object(Ce.a)(r.props.stickerReducer.sheetInfo.designbase64.split(",")[1],"image/png");s=new File([d],t[0].name);t[0]=s}}Oe.s(e,t,"carts").then((function(e){if(1===e.data.status){for(var t=[],o=0;o<Lt.product_sides.length;o++)t.push(e.data.data.images[o]?e.data.data.images[o].url:Lt.product_sides[o].image.src);Bt.length&&Bt.forEach((function(e,t){e.variant_id===a&&Bt.splice(t,1)})),1===Lt.product_details.is_configurator&&1===Lt.product_details.is_image_based&&t.splice(1),Bt.push({variant_id:[a],design_urls:t}),Gt[a]=t,r.setState({captureImageList:Gt}),n("success")}else i(new Error("Error in server while capturing"))}))}))}},{key:"proceedTocheckout",value:function(){var e=this;if(!this.state.checkoutPreloader&&Object.keys(zt).length){if(this.teamDataRef){var t=!0,a=!1;if((sa=this.teamDataRef.returnAllTeamData()).forEach((function(e){a=!1,e.forEach((function(e){"name"!==e.type&&"number"!==e.type||""===e.value||a||(a=!0)})),a||(t=!1)})),!t&&this.state.isNameNumber)return void this.props.showNotification("warning",this.props.language.team.error)}var r=this.checkMinimumOrderQty();if(r.status||this.props.stickerReducer&&"sheet"===this.props.stickerReducer.selectedSheetOption){this.setState({checkoutPreloader:!0});var n=[],i="";if(0===Yt)n.push(this.captureSelectedColorImage(Lt.faceData,Object(ee.a)(zt),Lt.product_details.product_id));else if(Yt>2&&"simple"!==Lt.product_extra_details.type)Zt.forEach((function(t){oa=0,e.getSelectedVariantId(t.options,Lt.product_details.attributes),i=oa,Lt.product_details.is_variable_decoration&&""===t.name?n.push(e.captureSelectedColorImage(Lt.faceData,Object(ee.a)(zt),i)):n.push(e.captureSelectedColorImage(Lt.faceData,Object(ee.a)(zt[t.name]),i))}));else if(this.state.isNameNumber){var o=[];sa.forEach((function(t){t.forEach((function(t){"color"===t.type&&(Lt.color_attributes.forEach((function(e){t.value.toString().toLowerCase()===e.name.toString().toLowerCase()&&(i=e.variant_id)})),0===o.filter((function(e){return e===i})).length&&(o.push(i),n.push(e.captureSelectedColorImage(Lt.faceData,Object(ee.a)(zt[t.value]),i))))}))}))}else Object.keys(Ft).forEach((function(t){Lt.color_attributes.length?Lt.color_attributes.forEach((function(e){t.toString().toLowerCase()===e.name.toString().toLowerCase()&&Ft[t].forEach((function(e){e.quantityVal>0&&(i=e.variant_id)}))})):i=Lt.product_extra_details.variant_id,n.push(e.captureSelectedColorImage(Lt.faceData,Object(ee.a)(zt[t]),i))}));Promise.all(n).then((function(t){e.postToCart()})).catch((function(t){console.log(t),e.props.showNotification("warning",e.props.language.cart.cartError),e.setState({checkoutPreloader:!1})}))}else this.props.showNotification("warning",this.props.language.cart.minQuantityError+" "+r.minQty)}}},{key:"updateCartBtn",value:function(){this.setState({isEnableCartBtn:!1})}},{key:"saveTemplate",value:function(e){var t=0,a=Ne.a.canvas.getAllStageElems();if(0!==a.length&&this.props.templateData&&this.props.templateData.templateEditType){var r=[];a.forEach((function(e){e.prefs&&"image"===e.prefs.type&&"svg"===e.prefs.imgType&&(e.prefs.imgSelectionType="upload"),e.prefs&&e.prefs.lock?r.push(e):Object(ee.a)(e.children).forEach((function(e){e.prefs&&e.prefs.lock&&r.push(e)}))})),a=r}for(var n=0;n<a.length;n++)if(a[n].prefs&&"background"!==a[n].prefs.type){t+=1;break}t?e?(this.setState({isTemplateModal:e}),this.uploadImg(a.slice(),function(){this.setState({isUploadSuccess:!0})}.bind(this),!0)):this.setState({isTemplateModal:e}):this.props.showNotification("warning",this.props.language.cart.templateError)}},{key:"captureQuotDesign",value:function(){fa=1,this.setState({isArtworkDesignSaveProcessing:!0}),this.uploadImg(Ne.a.canvas.getAllStageElems().slice()),this.addToCart(1)}},{key:"saveQuotDesign",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!Object.keys(zt).length)return this.setState({isArtworkDesignSaveProcessing:!1}),void Ne.a.canvas.showHideBounds(!1);try{var a=setInterval((function(){if(e.props.backToModuleCallback(),!e.props.imageUploadStatus&&(!e.props.stateId||e.props.stateId&&Object.keys(zt).length)){clearInterval(a);var r=[],n="";0===Yt?r.push(e.captureSelectedColorImage(Lt.faceData,Object(ee.a)(zt),Lt.product_details.product_id)):Yt>2&&"simple"!==Lt.product_extra_details.type?Zt.forEach((function(t){oa=0,e.getSelectedVariantId(t.options,Lt.product_details.attributes),n=oa,Lt.product_details.is_variable_decoration&&""===t.name?r.push(e.captureSelectedColorImage(Lt.faceData,Object(ee.a)(zt),n)):r.push(e.captureSelectedColorImage(Lt.faceData,Object(ee.a)(zt[t.name]),n))})):Object.keys(Ft).forEach((function(t){Lt.color_attributes.length?Lt.color_attributes.forEach((function(e){t.toString().toLowerCase()===e.name.toString().toLowerCase()&&Ft[t].forEach((function(e){e.quantityVal>0&&(n=e.variant_id)}))})):n=Lt.product_extra_details.variant_id,r.push(e.captureSelectedColorImage(Lt.faceData,Object(ee.a)(zt[t]),n))})),Promise.all(r).then((function(a){Mt=e.prepareProductData(1);var r=e.prepareDesignData(),n=new FormData;n.append("template_type","artwork"),n.append("customer_id",e.state.customerId),n.append("cart_item_id",0),n.append("product_data",JSON.stringify(Mt)),n.append("design_data",JSON.stringify(r)),n.append("product_setting_id",e.props.canvasData.product_details.id),Oe.v(n).then((function(a){if(a.data.status){if(null!==localStorage.getItem("artworkData")&&localStorage.removeItem("artworkData"),!t){var n={};n.product_id=Mt[0].product_id,n.qty=Mt[0].qty,n.total_qty=Mt[0].total_qty,n.variant_id=Mt[0].variant_id,n.variant_id=Mt[0].variant_id,n.added_price=Mt[0].added_price,n.product_price=e.props.pricingData.productPrice,n.options=Mt[0].options,n.custom_design_id=a.data.custom_design_id,n.is_variable_decoration=e.props.canvasData.product_details.is_variable_decoration,n.is_custom_size=Mt[0].is_variable_decoration,n.notes=r.notes,n.product_info=r.product_info,n.design_product_data=r.design_product_data;var i=[];r.sides.forEach((function(e){i=[],[],Object.keys(e.print_area).forEach((function(t){e.print_area[t].bound_id=t,i.push(e.print_area[t])})),e.print_area=i})),n.sides=r.sides,localStorage.setItem("artworkData",JSON.stringify(n)),e.props.showNotification("success",e.props.language.cart.artworkSaved)}e.setState({isArtworkDesignSaveProcessing:!1,customDesignId:a.data.custom_design_id}),Ne.a.canvas.showHideBounds(!1)}else a.data.message?(e.props.showNotification("danger",a.data.message),e.setState({isArtworkDesignSaveProcessing:!1})):(e.props.showNotification("danger",e.props.language.cart.artworkError),e.setState({isArtworkDesignSaveProcessing:!1})),Ne.a.canvas.showHideBounds(!1)})).catch((function(t){e.props.showNotification("danger",t),e.setState({isArtworkDesignSaveProcessing:!1}),Ne.a.canvas.showHideBounds(!1)}))})).catch((function(t){console.log(t),e.props.showNotification("warning",e.props.language.cart.artworkError),e.setState({isArtworkDesignSaveProcessing:!1}),Ne.a.canvas.showHideBounds(!1)}))}}),500)}catch(r){this.setState({isArtworkDesignSaveProcessing:!1}),Ne.a.canvas.showHideBounds(!1)}}},{key:"getCurrentAttribute",value:function(e,t,a){var r=this.props.canvasData.color.filter((function(e){return 1===e.isActive}));return e?e.id:r&&r.length?r.attribute_id:t[a].id}},{key:"switchView",value:function(){var e=this;return this.props.isTeamJerseyData?i.a.createElement(Dt,{teamDataRef:function(t){return e.teamDataRef=t},language:this.props.language,settings:this.props.globalsettings,termConditions:this.state.termConditions,onChangeTermCondition:this.onChangeTermCondition,orderNotes:this.state.orderNotes,checkoutPreloader:this.state.checkoutPreloader,addAnotherColorCheckout:this.props.addAnotherColorCheckout,updateCaptureSidesByColor:this.updateCaptureSidesByColor.bind(this),activeColorIndex:this.activeColorIndex,removeColorItem:this.removeColorItem,productDetail:this.props.canvasData.product_details,onChangeOrderOption:this.props.onChangeOrderOption,onChangeOrderNote:this.onChangeOrderNote,changeProductColor:this.props.changeProductColor,isMobileView:this.props.isMobileView,setLayerData:this.props.setLayerData,showNotification:this.props.showNotification}):i.a.createElement(n.Fragment,null,this.renderCheckoutPage())}},{key:"getUnitConversnalPrice",value:function(){var e=Object(ce.a)(le.a.mark((function e(t){var a=this;return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.props.currency&&Oe.r(t,this.props.currency).then((function(e){if(1===e.data){var t=JSON.parse(e.responce),r=a.props.currency;a.setState({currencyConversionUnit:t.rates[r]})}}));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e,t,a,r;this.props.productDetails&&(void 0!==this.props.productDetails.scale_unit_id&&(la=this.props.productDetails.scale_unit_id),this.props.globalSettings&&this.props.globalSettings.unit_name===la&&(la=this.props.globalSettings.unit),this.props.globalsettings.store&&this.props.globalsettings.store.color&&(da=this.props.globalsettings.store.color));var o=this.props,s=o.language,l=o.globalsettings,c=o.splitScreenMobile,u=o.handleProfileMobile,d=o.isMobileView;return i.a.createElement(n.Fragment,null,i.a.createElement(Rt.a,{key:"cartpages"},this.switchView(),this.renderKioskCustDetailsPage(),i.a.createElement(ge,{language:s,settings:l,addToCartClick:this.addToCartClick,proceedTocheckout:this.proceedTocheckout,isEnableCartBtn:this.state.isEnableCartBtn,pricingData:this.props.pricingData,totalQty:this.props.canvasData.totalColorQty.t,isTemplate:this.isTemplate,saveTemplate:this.saveTemplate,splitScreenMobile:c,termConditions:this.state.termConditions,handleProfileMobile:u,imgUploadStat:this.props.imageUploadStatus,captureStatus:this.state.captureStatus,isMobileView:d,isUploadError:this.state.isUploadError,isOrderOptionsShow:this.props.isOrderOptionsShow,isCustomerDetailsForm:this.props.isCustomerDetailsForm,isArtworkDesignSaveProcessing:this.state.isArtworkDesignSaveProcessing,isQuot:this.isQuot,captureQuotDesign:this.captureQuotDesign,isEnableRequestQuote:!(!this.state.isEnableRequestQuote||!this.props.pricingData.isRequestQuote)||!(!(null===(e=Ut)||void 0===e||null===(t=e.cart)||void 0===t?void 0:t.enable_email_quote)||!(null===(a=this.props.selectedPrintProfileData)||void 0===a||null===(r=a.misc_data)||void 0===r?void 0:r.force_quotation_option)),proceedToReqestQuote:this.proceedToReqestQuote,isTemplateEdit:this.isTemplateEdit,conversionUnit:this.state.currencyConversionUnit,currency:this.state.currency,currencyList:this.props.getCurrenciesList,checkoutPreloader:this.state.checkoutPreloader,isDisableOrderOption:this.props.canvasData.isDisableOrderOption,cropElementStatus:this.props.cropElementStatus,checkUserAuthStatus:this.checkUserAuthStatus}),this.renderKioskOrderConfPage(),this.renderSaveTempModal(),this.renderQuotePage(),this.renderAuthModal()))}}]),a}(i.a.Component),Aa=Object(c.b)((function(e){return{currentSideIndex:e.productCanvasReducer.active_product_side,language:e.languageReducer.translation_data.filter((function(t){return t.langCode===e.languageReducer.default_lang}))[0],globalsettings:e.globalSettingReducer.global_settings_data,canvasData:e.productCanvasReducer,pricingData:e.pricingReducer,allPrintProfiles:e.printProfileReducer.print_profile_list,printSettings:e.printProfileReducer.print_profile_data,imageUploadStatus:e.ImageReducer.loading,imageUploadList:e.ImageReducer.sides,productDetails:e.productCanvasReducer.product_details,templateData:e.template,licenceAddOns:e.productCanvasReducer.licenceAddOns,storeType:e.productCanvasReducer.storeType,stickerReducer:e.StickerReducer,configuratorCartData:e.ConfiguratorDesignData.configuratorCartData,configuratorSvgCartData:e.ConfiguratorDesignData.configuratorSvgCartData,customerData:e.customerReducer?e.customerReducer.items:0,selectedPrintProfileData:e.printProfileReducer.print_profile_data.filter((function(t){return t.id===e.printProfileReducer.selected_print_profile}))[0]}}))(ba),ya=a(354),_a=(a(400),a(189),a(401),a(71));a(153),a(757);var Ea,Sa=Promise.resolve().then(a.bind(null,400)),Ca=Object(n.lazy)((function(){return Sa})),xa=Promise.resolve().then(a.bind(null,401)),wa=Object(n.lazy)((function(){return xa})),ka=!1,Ia=!1,Na=10,Oa=1;window.isEasyEdit=!1;var Pa=function(e){Object(re.a)(a,e);var t=Object(ne.a)(a);function a(e){var r;Object(te.a)(this,a),(r=t.call(this,e)).showHideSplash=function(e){r.setState({isShowSplash:e})},r.notifyRegSuccess=function(){r.setState({isKioskRegistered:1},(function(){r.props.dispatch(ve.f(r.state.productId,r.state.variantId)).then((function(){!r.props.globalSettingsData.kiosk_setting||r.state.productId||r.state.variantId||r.setState({isShowSplash:!0}),r.props.dispatch(ve.j(r.props.globalLangData)),r.props.globalAppearance&&1===r.props.globalAppearance.theme_layouts?r.layOutId="default":r.props.globalAppearance&&2===r.props.globalAppearance.theme_layouts?r.layOutId="one":r.props.globalAppearance&&3===r.props.globalAppearance.theme_layouts&&(r.layOutId="two")}))}))},r.onModSelect=function(e){r.setState({activeMod:e})},r.onProductChange=function(e,t){r.togglePreviewTab("2d"),r.state.productBasedTempId||(r.setState({isProductShow:!r.state.isProductShow,productId:e,variantId:t}),r.cartChildRef&&(r.cartChildRef.resetCartItemsLoaded(),r.cartChildRef.resetTierPriceInfoIndexData()))},r.loadProduct=function(e,t,a){r.setState({productId:e,variantId:t}),r.canvasChildRef&&r.canvasChildRef.loadProductOnCanvas(a)},r.onChangeOrderOption=function(e,t,a){!e&&t&&r.togglePreviewTab("2d"),e||a?Ne.a.canvas.setOrderOptionView(!0):Ne.a.canvas.setOrderOptionView(!1),r.props.productDetails&&0===r.props.productDetails.is_variable_decoration&&Ne.a.canvas.resizeProductImage(e),r.setState({isOrderOptionsShow:e,isCustomerDetailsForm:!!r.state.isKioskFeature&&e,isTeamJerseyData:a},(function(){if(ka!==e||Ia!==a)if(r.state.isMobileView||Ne.a.canvas.resizeStage(),Ne.a.canvas.showHideBounds(!1),r.props.productDetails&&1===r.props.productDetails.is_svg_configurator){for(var t=0;t<r.props.canvasData.product_sides.length&&r.props.canvasData.sideThumbSvg.length;t++){var n=document.getElementById("configurator_side_"+t),i=document.createElementNS("http://www.w3.org/2000/svg","svg");n&&(i.innerHTML=r.props.canvasData.sideThumbSvg[t],n.appendChild(i.lastElementChild))}var o=document.getElementById("configurator_side_"+r.props.canvasData.active_product_side),s=document.getElementById("configurator_svg-loader_"+r.props.canvasData.active_product_side);o&&s&&(s.innerHTML=o.innerHTML)}else r.props.productDetails&&1===r.props.productDetails.is_configurator&&Ne.a.canvas.resizeProductImage(e);ka=e,Ia=a})),r.cartChildRef&&r.cartChildRef.updateCartBtn(),t&&!e&&r.panelChildRef&&r.panelChildRef.backToModules(),r.canvasChildRef&&r.canvasChildRef.isCheckoutPreview(e),e&&r.panelChildRef&&r.panelChildRef.backToCurrntModule(),e||(r.setState({isCustomerFormProcessing:!1}),r.panelChildRef&&r.panelChildRef.resetDecoFormData())},r.loadVariantOnSelect=function(e,t,a,n){r.canvasChildRef&&r.canvasChildRef.loadVariantOnSelect(e,t,a,n)},r.addAnotherColorCheckout=function(e,t){r.canvasChildRef&&r.canvasChildRef.addAnotherColorCheckout(e,t)},r.deleteColorCheckout=function(e,t){r.canvasChildRef&&r.canvasChildRef.deleteColorCheckout(e,t)},r.enableEditMode=function(e){if(!r.state.isKioskFeature&&r.canvasChildRef&&"nxi nxi-eye"!==e.target.getAttribute("class")&&!e.target.closest(".dt-checkout")&&!e.target.closest(".dt-cart")){if(r.state.is3DTabOpen||r.state.isStickerPreviewOpen)return;null===e.target.getAttribute("class")&&r.onChangeOrderOption(!1),"btn btn-success w-100"!==e.target.getAttribute("class")&&"dt-elements dt-productInfo"!==e.target.getAttribute("class")&&r.canvasChildRef.enableStickerpreview(!1)}},r.enableStickerPreview=function(){return new Promise((function(e){r.canvasChildRef&&r.canvasChildRef.enableStickerpreview(!0),setTimeout((function(){e()}))}))},r.setFaceData=function(e,t){r.canvasChildRef&&r.canvasChildRef.setFaceData(e,t)},r.setLayerData=function(e){r.panelChildRef&&r.panelChildRef.setLayerData(e)},r.resetReplaceDesignIndex=function(){r.panelChildRef&&r.panelChildRef.resetReplaceDesignIndex()},r.showCanvasLoader=function(e,t){r.setState({isLoader:e,source:t})},r.setEngravePreview=function(e,t){r.panelChildRef&&r.panelChildRef.setEngravePreview(e,t)},r.openLayer=function(){r.panelChildRef&&r.panelChildRef.openExMods("layer",!0),r.handleSplitScreen("half")},r.togglePreviewTab=function(e){r.canvasChildRef&&r.canvasChildRef.togglePreviewTab(e)},r.preview3DTabStatus=function(e){r.setState({is3DTabOpen:e})},r.stickerPreviewStatus=function(e){r.setState({isStickerPreviewOpen:e})},r.backToModuleCallback=function(){r.panelChildRef&&(r.state.isFormEdit||r.panelChildRef.backToModules(),r.panelChildRef.child.current&&r.panelChildRef.child.current.props&&r.panelChildRef.child.current.props.isTempReplace&&r.panelChildRef.backToModules())},r.loadDefaultModule=function(){r.panelChildRef&&r.panelChildRef.openDefaultTab()},r.openCartView=function(){return i.a.createElement(Aa,{childRef:function(e){return r.cartChildRef=e},onChangeOrderOption:r.onChangeOrderOption,loadVariantOnSelect:r.loadVariantOnSelect,addAnotherColorCheckout:r.addAnotherColorCheckout,deleteColorCheckout:r.deleteColorCheckout,setLayerData:r.setLayerData,splitScreenMobile:r.state.splitScreenMobile,handleProfileMobile:r.handleProfileMobile,changeProductColor:r.changeProductColor,isMobileView:r.state.isMobileView,stateId:r.state.stateId,cartId:r.state.cartId,isTeamJerseyData:r.state.isTeamJerseyData,isOrderOptionsShow:r.state.isOrderOptionsShow,variantId:r.state.variantId,decoProductId:r.state.decoProductId,isCustomerDetailsForm:r.state.isCustomerDetailsForm,isCustomerFormProcessing:r.state.isCustomerFormProcessing,isOrderPlaced:r.state.isOrderPlaced,updateIsCustomerFormProcessing:r.updateIsCustomerFormProcessing,updateIsOrderPlaced:r.updateIsOrderPlaced,kioskDesignAgain:r.kioskDesignAgain,togglePreviewTab:r.togglePreviewTab,cartPageWarningStatus:r.cartPageWarningStatus,isResolutionWarn:r.state.isResolutionWarn,cartAttrValue:r.state.cartAttrValue,enableSticker:r.enableStickerPreview,showNotification:r.showNotification,isKioskFeature:r.state.isKioskFeature,stickerPreviewStatus:r.stickerPreviewStatus,currency:r.state.currency,getCurrenciesList:r.state.getCurrenciesList,backToModuleCallback:r.backToModuleCallback,cropElementStatus:r.state.cropElementStatus})},r.handleSplitScreen=function(e){r.state.isMobileView&&r.setState({splitScreenMobile:e})},r.handleProfileMobile=function(e){r.setState({isProfileMobile:e})},r.changeProdAddTemp=function(){r.state.templateId&&(r.showHideBackLoader(!0,"template"),Oe.i(r.state.templateId).then((function(e){r.applyTemplate(e.data[0]),r.props.dispatch(Object(v.x)(e.data[0].is_easy_edit)),e.data[0].is_easy_edit?window.isEasyEdit=!0:window.isEasyEdit=!1,Ne.a.canvas.selectCurrentBoundary("bound_0"),r.props.dispatch(Object(S.m)(e.data[0])),_a.a.getPredecoDetails(e.design_url).then((function(t){for(var a,n=[],i=e.data[0].design_data,o=0;o<i.length;o++)i[o].svg&&(n[o]={},n[o].svg=decodeURI(i[o].svg),n[o].isDesigned=1);if((a=n).length&&r.props.dispatch(ve.x(a)).then(r.setEditTempAllSideElments()),t&&t.layer_data){for(var s=Object(ee.a)(t.layer_data),l=0;l<s.length;l++)null===s[l]&&(s[l]=[]);r.props.dispatch(ve.C(s))}r.showHideBackLoader(!1,"template")}))})))},r.getCurrenciesList=function(){Oe.n().then((function(e){e.status&&r.setState({getCurrenciesList:e.data})}))},r.onElemChange=function(e){r.canvasChildRef&&r.canvasChildRef.onElemChange(e)},r.changeProductColor=function(e,t,a,n){r.canvasChildRef&&r.canvasChildRef.changeProductColor(e,t,a,n)},r.showHideBackLoader=function(e,t){r.canvasChildRef&&r.canvasChildRef.showHideBackLoader(e,t)},r.applyTemplate=function(e){r.canvasChildRef&&r.canvasChildRef.applyTemplate(e)},r.hideImageWarning=function(){r.canvasChildRef&&r.canvasChildRef.hideImageWarning()},r.removeBackground=function(){r.panelChildRef&&r.panelChildRef.removeBackground()},r.checkBackgroundElm=function(){r.canvasChildRef&&r.canvasChildRef.checkBackgroundElm()},r.editBackground=function(){r.panelChildRef&&r.panelChildRef.editBackground()},r.openGalleryModule=function(){r.panelChildRef&&r.panelChildRef.openGalleryModule()},r.setActiveModule=function(e){r.canvasChildRef&&r.canvasChildRef.setActiveModule(e)},r.loadPreDecoForm=function(e){r.panelChildRef&&r.panelChildRef.showDecoFormEditLoader(!1),r.state.decoProductId&&e&&(Ne.a.canvas.setIsFormEdit(!0),r.setState({isFormEdit:e},(function(){r.panelChildRef&&r.panelChildRef.openExMods("edit",!1)})),r.props.dispatch(Object(v.x)(e)),window.isEasyEdit=!!e)},r.updateIsCustomerFormProcessing=function(e){r.setState({isCustomerFormProcessing:e})},r.updateIsOrderPlaced=function(e){r.setState({isOrderPlaced:e})},r.kioskDesignAgain=function(e){var t=e;r.onChangeOrderOption(!1),t&&(t=!!r.props.globalSettingsData.kiosk_setting),r.props.dispatch(ve.m()),r.props.dispatch(ve.o()).then((function(){r.props.dispatch(ve.n()).then((function(){r.panelChildRef&&r.panelChildRef.backToModules(),r.setState({activeMod:"",isProductShow:!0,productId:null,variantId:null,isOrderOptionsShow:!1,templateId:null,decoProductId:null,stateId:null,isShowSplash:t,isCustomerDetailsForm:!1,isCustomerFormProcessing:!1,isOrderPlaced:!1,isLoginForm:!1,isMobileView:window.innerWidth<576,splitScreenMobile:"",isLoader:!1,isProfileMobile:!1,isFormEdit:!1}),Da()}))}))},r.setProductId=function(e,t){r.setState({productId:e,variantId:t})},r.setConfiguratorImage=function(e){r.canvasChildRef&&r.canvasChildRef.setConfiguratorImage(e)},r.updateConfiguratorImage=function(e){r.canvasChildRef&&r.canvasChildRef.updateConfiguratorImage(e)},r.checkSvgConfiguratorSide=function(e){r.canvasChildRef&&r.canvasChildRef.checkSvgConfiguratorSide(e)},r.setDesignId=function(e){r.setState({designId:e})},r.setDesignName=function(e){r.setState({designName:e})},r.openMyGallery=function(e){r.setState({isMyGallery:e})},r.handleConnectionChange=function(){if("online"!==(navigator.onLine?"online":"offline"))return r.setState({isDisconnected:!0},(function(){r.startTimer()}));var e=setInterval((function(){fetch(Oe.q(),{mode:"no-cors"}).then((function(){r.setState({isDisconnected:!1},(function(){return clearInterval(Ea),clearInterval(e)}))})).catch((function(){return r.setState({isDisconnected:!0},(function(){r.startTimer()}))}))}),2e3)},r.startTimer=function(){Oa=1,Na=10,r.setState({timeLeft:10}),Ea=setInterval((function(){Na>0?0===--Na&&(Oa++,Na=10*Oa):Na=10,r.setState({timeLeft:Na})}),1e3)},r.getStoreType=function(){var e=r.getrevdata(He.a.license_Key),t=e.split("|");r.storeType=t[0],r.props.dispatch(Object(G.Gb)(t[0])),window.storeType=t[0],r.checkMultiStoreLicense(e)},r.xor_encrypt=function(e,t){for(var a,r="",n=0;n<e.length;++n){a=e[n];for(var i=0;i<t.length;++i)a=String.fromCharCode(a.charCodeAt(0)^t.charCodeAt(i));r+=a}return r},r.getrevdata=function(e){var t="";try{t=atob(e),t=r.xor_encrypt(t,"*P&46X-(5u)>#12i06N%")}catch(a){console.log(a)}return t},r.setActiveColorName=function(e){r.cartChildRef&&r.cartChildRef.setActiveColorName(e)},r.updateCartAttrForSignBanner=function(){r.cartChildRef&&(r.cartChildRef.setCartAttrForSignBanner(),r.panelChildRef&&r.panelChildRef.setLayerData())},r.showNotification=function(e,t){r.canvasChildRef&&r.canvasChildRef.showNotification(e,t)},r.setGlobalSizeAttr=function(){r.cartChildRef&&r.cartChildRef.setCartAttrForSignBanner()},r.initializeConfigurator=function(e){r.panelChildRef&&r.panelChildRef.setConfiguratorStatus(e)},r.openNoCustomizationPopup=function(){r.canvasChildRef&&r.canvasChildRef.openNoCustomizationPopup()},r.editTmplate=function(){r.state.editTemplateId&&(r.showHideBackLoader(!0,"template"),Oe.i(r.state.editTemplateId).then((function(e){Ne.a.canvas.setIsTemplateEdit(!0),r.props.dispatch(Object(G.rb)(!0)),r.applyTemplate(e.data[0]),r.props.dispatch(Object(v.x)(e.data[0].is_easy_edit)),e.data[0].is_easy_edit?window.isEasyEdit=!0:window.isEasyEdit=!1,Ne.a.canvas.selectCurrentBoundary("bound_0"),r.props.dispatch(Object(S.m)(e.data[0])),e.data[0]&&e.data[0].get_design_state&&r.props.dispatch(Object(A.h)(e.data[0].get_design_state.selected_category_id)),_a.a.getPredecoDetails(e.design_url).then((function(t){for(var a,n=[],i=e.data[0].design_data,o=0;o<i.length;o++)i[o].svg&&(n[o]={},n[o].svg=decodeURI(i[o].svg),n[o].isDesigned=1);if((a=n).length&&r.props.dispatch(ve.x(a)).then(r.setEditTempAllSideElments()),t&&t.layer_data){for(var s=Object(ee.a)(t.layer_data),l=0;l<s.length;l++)null===s[l]&&(s[l]=[]);r.props.dispatch(ve.C(s))}var c=[];t.sides.forEach((function(e,a){if(e.is_designed){var r="";t.design_product_data[0].design_urls[a]&&(r=t.design_product_data[0].design_urls[a].split("/").pop()),c[a]=r}})),r.props.dispatch(Object(S.l)(c)),r.showHideBackLoader(!1,"template")}))})))},r.setEditTempAllSideElments=function(){var e=r.props.canvasData.faceData,t=[];e.forEach((function(a,n){var i;a.isDesigned&&(i=(new DOMParser).parseFromString(e[n].svg,"image/svg+xml"),t[n]={element:r.getTempAllStageElems(i)})})),r.props.dispatch(Object(S.k)(t))},r.getTempAllStageElems=function(e){var t=[],a=e.getElementById("svgcontent");return ut()(a).children().each((function(e,a){ut()(a).children().each((function(e,a){if(ut()(a).attr("xe-props")){var r=a.getAttribute("xe-props"),n=Ne.a.canvas.decodeXeprops(r);a.prefs=n,a.removeAttribute("xe-props"),t.push(a)}}))})),t},r.checkMultiStoreLicense=function(e){var t=e.split("|").pop(),a=1;(a=("Shopify"!==r.storeType&&"Others"!==r.storeType&&"Hosted"!==r.storeType?new URLSearchParams(window.parent.location.search):new URLSearchParams(window.location.search)).get("store_id"))&&(a=parseInt(a),!t.includes("multistore")&&a>1&&window.open("https://imprintnext.com/invalid-license/","_top"))},r.closeTemplateBasedProduct=function(e,t){r.setState({productBasedTempId:null},(function(){return Ne.a.canvas.resizeStage()})),r.panelChildRef&&r.panelChildRef.backToModules(),r.onProductChange(e,t),r.handleSplitScreen("")},r.loadtemplateModule=function(e,t){r.panelChildRef&&r.panelChildRef.loadSelectedModule(e,t)},r.showConfirmPrompt=function(e){return r.props.generalSettings&&r.props.generalSettings.prompt_close_window&&!ka?(e.preventDefault(),e.returnValue="Are you sure that you want to leave this page?"):null},r.changeDesignedProduct=function(e){var t,a;if(null===(t=r.props.canvasData)||void 0===t||null===(a=t.color_attributes)||void 0===a?void 0:a.length)for(var n=0;n<r.props.canvasData.color_attributes.length;n++)if(r.props.canvasData.color_attributes[n].variant_id===e){r.canvasChildRef&&r.canvasChildRef.changeStageColor(r.props.canvasData.color_attributes[n].attribute_id,e,n);break}},r.setCropElemStatus=function(e,t){if("reset"!==t){var a=r.props.canvasData.objectCropOnStage;a[r.props.canvasData.active_product_side]=e,r.props.dispatch(ve.F(a)).then((function(){var e=!r.props.canvasData.objectCropOnStage.every((function(e){return!1===e}));r.setState({cropElementStatus:e})}))}else r.setState({cropElementStatus:e})},r.storeType="",r.getStoreType();var n=new URLSearchParams(window.location.search),o="";o="Shopify"!==r.storeType&&"Others"!==r.storeType&&"Hosted"!==r.storeType?new URLSearchParams(window.parent.location.search):new URLSearchParams(window.location.search);var s=n.get("id")?n.get("id"):o.get("id"),l=n.get("vid")?n.get("vid"):o.get("vid"),c=n.get("cid")?n.get("cid"):o.get("cid"),u=n.get("tid")?n.get("tid"):o.get("tid"),d=n.get("dpid")?n.get("dpid"):o.get("dpid"),p=n.get("sid")?n.get("sid"):o.get("sid"),m=n.get("qty")?parseInt(n.get("qty")):parseInt(o.get("qty")),h=n.get("err")?parseInt(n.get("err")):parseInt(o.get("err")),g=n.get("cart_item_id")?n.get("cart_item_id"):o.get("cart_item_id"),f=n.get("did")?n.get("did"):o.get("did"),b=n.get("option_id")?n.get("option_id"):o.get("option_id"),y=n.get("attr")?n.get("attr"):o.get("attr"),_=n.get("etid")?n.get("etid"):o.get("etid"),E=n.get("kiosk")?n.get("kiosk"):o.get("kiosk"),C=n.get("store_id")?n.get("store_id"):o.get("store_id"),x=n.get("cur")?n.get("cur"):o.get("cur"),w=x?x.toUpperCase():"",k=n.get("pbti")?n.get("pbti"):o.get("pbti");return l||(l=s),c&&(c=Number(c)),k=1==parseInt(k),r.state={activeMod:"",isProductShow:!1,productId:s,variantId:s===l?s:l,isOrderOptionsShow:!1,isLoginForm:!1,minOrderQty:m,isMobileView:window.innerWidth<1023,splitScreenMobile:"",isLoader:!1,isProfileMobile:!1,templateId:u,decoProductId:d,stateId:p,isFormEdit:!1,isShowSplash:!1,isCustomerDetailsForm:!1,isCustomerFormProcessing:!1,isOrderPlaced:!1,isKioskRegistered:-1,licenseErr:h,cartId:g,isTeamJerseyData:!1,designId:"",designName:"",isDisconnected:!1,timeLeft:10,userDesignId:f,option_id:b||"",cartAttrValue:y,changeProductId:c,editTemplateId:_,isKioskFeature:!!E,isStickerPreviewOpen:!1,storeId:C||1,currency:w,getCurrenciesList:Array(),productBasedTempId:d?"":k,is3DTabOpen:!1,cropElementStatus:!1},r.layOutId="default",r}return Object(ae.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.props.dispatch(ve.A(Number(this.state.storeId))),Oe.x(Number(this.state.storeId)),this.props.dispatch(ve.f(this.state.productId,this.state.variantId)).then((function(){if(e.props.dispatch(ve.j(e.props.globalLangData)),(e.props.canvasData.licenceAddOns.includes("offlineKiosk")||e.props.canvasData.licenceAddOns.includes("onlineKiosk"))&&(e.props.canvasData.licenceAddOns.includes("onlineKiosk")?e.state.isKioskFeature&&(e.setState({isKioskRegistered:1}),!e.props.globalSettingsData.kiosk_setting||e.state.productId||e.state.variantId||e.setState({isShowSplash:!0})):(e.setState({isKioskFeature:!0}),e.state.licenseErr?e.setState({isKioskRegistered:-2}):He.a.pathLc===He.a.pathSc?(e.setState({isKioskRegistered:1}),!e.props.globalSettingsData.kiosk_setting||e.state.productId||e.state.variantId||e.setState({isShowSplash:!0})):e.setState({isKioskRegistered:0}))),e.props.globalAppearance&&1===e.props.globalAppearance.theme_layouts?e.layOutId="default":e.props.globalAppearance&&2===e.props.globalAppearance.theme_layouts&&!e.state.isMobileView?e.layOutId="one":e.props.globalAppearance&&3===e.props.globalAppearance.theme_layouts&&!e.state.isMobileView&&(e.layOutId="two"),e.props.globalAppearance&&e.props.globalAppearance.custom_css&&window.BASE_URL){var t=document.getElementsByTagName("head")[0],a=document.createElement("link");a.rel="stylesheet",a.type="text/css",a.href=window.BASE_URL+"custom.css?rvn="+Math.floor(1e8*Math.random()),t.appendChild(a)}})),Da(),this.getCurrenciesList(),this.handleConnectionChange(),window.addEventListener("online",this.handleConnectionChange),window.addEventListener("offline",this.handleConnectionChange),window.addEventListener("beforeunload",this.showConfirmPrompt)}},{key:"componentDidUpdate",value:function(){}},{key:"componentWillUnmount",value:function(){window.removeEventListener("online",this.handleConnectionChange),window.removeEventListener("offline",this.handleConnectionChange),window.removeEventListener("beforeunload",this.showConfirmPrompt)}},{key:"render",value:function(){var e,t=this,a=this.state,r=a.productId,o=a.variantId,s=a.isProductShow,l=a.isOrderOptionsShow,c=a.isOrderPlaced,u=a.minOrderQty,d=a.splitScreenMobile,p=a.isMobileView,m=a.isProfileMobile,h=a.stateId,g=a.decoProductId,f=a.isFormEdit,v=a.isShowSplash,b=a.isTeamJerseyData,A=a.userDesignId,y=a.option_id,_=a.changeProductId;return i.a.createElement(n.Fragment,null,this.state.isDisconnected&&i.a.createElement("div",{className:"alert alert-warning justify-content-center noInternet-noti"},i.a.createElement("strong",null,"Not connected. "),i.a.createElement("span",{className:"ml-1"},"Connecting in ",this.state.timeLeft," sec...")),i.a.createElement("div",{className:v?"":"container",id:"portraitMode",onClick:function(e){return t.enableEditMode(e)}},i.a.createElement("div",{className:"dt-base theme-"+this.layOutId+(s||this.state.productBasedTempId?" d-none":"")+(l?" checkout-theme":"")+(c?" final-step":"")+(b?" checkout-theme nNumber-theme":"")+(this.state.isKioskFeature?" kiosk-theme":"")},i.a.createElement(Rt.a,{key:"appcanvaspanel"},i.a.createElement(ie.b,(e={canvasChildRef:function(e){return t.canvasChildRef=e},onProductChange:this.onProductChange,productId:r,variantId:o,isOrderOptionsShow:l,isOrderPlaced:c,onChangeOrderOption:this.onChangeOrderOption,setLayerData:this.setLayerData,splitScreenMobile:d,isLoader:this.state.isLoader,showCanvasLoader:this.showCanvasLoader,resetReplaceDesignIndex:this.resetReplaceDesignIndex,isProfileMobile:m,handleProfileMobile:this.handleProfileMobile,openLayer:this.openLayer,templateId:this.templateId,changeProdAddTemp:this.changeProdAddTemp,changeProductColor:this.changeProductColor,showHideBackLoader:this.showHideBackLoader,decoProductId:g,stateId:h,loadPreDecoForm:this.loadPreDecoForm,source:this.state.source,removeBackground:this.removeBackground,editBackground:this.editBackground,loadProduct:this.loadProductOnCanvas,openGalleryModule:this.openGalleryModule,onNameNumberDetails:this.onNameNumberDetails,setEngravePreview:this.setEngravePreview,togglePreviewTab:this.togglePreviewTab,isMobileView:p,isCustomerFormProcessing:this.state.isCustomerFormProcessing},Object($.a)(e,"isOrderPlaced",this.state.isOrderPlaced),Object($.a)(e,"setConfiguratorImage",this.setConfiguratorImage),Object($.a)(e,"updateConfiguratorImage",this.updateConfiguratorImage),Object($.a)(e,"backToModuleCallback",this.backToModuleCallback),Object($.a)(e,"isTeamJerseyData",b),Object($.a)(e,"designId",this.state.designId),Object($.a)(e,"designName",this.state.designName),Object($.a)(e,"setDesignName",this.setDesignName),Object($.a)(e,"isMyGallery",this.state.isMyGallery),Object($.a)(e,"openMyGallery",this.openMyGallery),Object($.a)(e,"userDesignId",A),Object($.a)(e,"option_id",y),Object($.a)(e,"setActiveColorName",this.setActiveColorName),Object($.a)(e,"updateCartAttrForSignBanner",this.updateCartAttrForSignBanner),Object($.a)(e,"loadDefaultModule",this.loadDefaultModule),Object($.a)(e,"setGlobalSizeAttr",this.setGlobalSizeAttr),Object($.a)(e,"initializeConfigurator",this.initializeConfigurator),Object($.a)(e,"editTmplate",this.editTmplate),Object($.a)(e,"preview3DTabStatus",this.preview3DTabStatus),Object($.a)(e,"isKioskFeature",this.state.isKioskFeature),Object($.a)(e,"checkSvgConfiguratorSide",this.checkSvgConfiguratorSide),e)),i.a.createElement(ya.a,{panelChildRef:function(e){return t.panelChildRef=e},onChangeOrderOption:this.onChangeOrderOption,isOrderOptionsShow:l,isOrderPlaced:c,loadProduct:this.loadProduct,setFaceData:this.setFaceData,handleSplitScreen:this.handleSplitScreen,splitScreenMobile:d,onProductChange:this.onProductChange,productId:r,isMobileView:p,showCanvasLoader:this.showCanvasLoader,onElemChange:this.onElemChange,showHideBackLoader:this.showHideBackLoader,applyTemplate:this.applyTemplate,decoProductId:g,isFormEdit:f,checkBackgroundElm:this.checkBackgroundElm,openGalleryModule:this.openGalleryModule,urlQty:u,setActiveModule:this.setActiveModule,hideImageWarning:this.hideImageWarning,togglePreviewTab:this.togglePreviewTab,setProductId:this.setProductId,setConfiguratorImage:this.setConfiguratorImage,updateConfiguratorImage:this.updateConfiguratorImage,isTeamJerseyData:b,setDesignId:this.setDesignId,setDesignName:this.setDesignName,designId:this.state.designId,isMyGallery:this.state.isMyGallery,openMyGallery:this.openMyGallery,openNoCustomizationPopup:this.openNoCustomizationPopup,showNotification:this.showNotification,isKioskFeature:this.state.isKioskFeature,loadSelectedModule:this.loadSelectedModule,productBasedTempId:this.state.productBasedTempId,checkSvgConfiguratorSide:this.checkSvgConfiguratorSide,changeDesignedProduct:this.changeDesignedProduct,setCropElemStatus:this.setCropElemStatus}),this.openCartView())),this.state.isProductShow&&i.a.createElement(n.Suspense,{fallback:i.a.createElement("div",null,"Loading...")},i.a.createElement(Rt.a,{key:"appproduct"},i.a.createElement(Ca,{onProductChange:this.onProductChange,isKioskRegistered:this.state.isKioskRegistered,isShowSplash:v,showHideSplash:this.showHideSplash,notifyRegSuccess:this.notifyRegSuccess,productId:r||_,isMobileView:p,showNotification:this.showNotification,isKioskFeature:this.state.isKioskFeature,productBasedTempId:this.state.productBasedTempId,getCurrenciesList:this.state.getCurrenciesList,currency:this.state.currency}))),this.state.productBasedTempId&&i.a.createElement(n.Suspense,{fallback:i.a.createElement("div",null,"Loading...")},i.a.createElement(Rt.a,null,i.a.createElement(wa,{productId:r,variantId:o,closeTemplateBasedProduct:this.closeTemplateBasedProduct,showNotification:this.showNotification,isMobileView:p,applyTemplate:this.applyTemplate,loadtemplateModule:this.loadtemplateModule})))),i.a.createElement("div",{className:"container",id:"landscapeMode"},i.a.createElement("div",{className:"p-5"},i.a.createElement("figure",null,i.a.createElement("svg",{version:"1.1",id:"Layer_1",width:"120px",x:"0px",y:"0px",viewBox:"0 0 49.8 46.2",style:{enableBackground:"new 0 0 49.8 46.2"},fill:"#666"},i.a.createElement("path",{xmlns:"http://www.w3.org/2000/svg",d:"M43.8,42.4c1.3,0,2.4-1.1,2.4-2.4V21.2c0-1.3-1.1-2.4-2.4-2.4H2.4c-1.3,0-2.4,1.1-2.4,2.4V40c0,1.3,1.1,2.4,2.4,2.4H43.8z   M45.3,34.7l-0.9-0.3c-0.6-0.2-1-0.7-1-1.3v-4.8c0-0.6,0.4-1.1,1-1.3l0.9-0.3V34.7z M2.4,41.5c-0.8,0-1.4-0.6-1.4-1.4V21.2  c0-0.8,0.6-1.4,1.4-1.4h41.5c0.8,0,1.4,0.6,1.4,1.4v4.4L44,26c-1,0.3-1.6,1.2-1.6,2.2V33c0,1,0.6,1.9,1.6,2.2l1.2,0.4V40  c0,0.8-0.6,1.4-1.4,1.4L2.4,41.5L2.4,41.5z M3.8,35.3v-9.4c0-0.3-0.2-0.5-0.5-0.5s-0.5,0.2-0.5,0.5v9.4c0,0.3,0.2,0.5,0.5,0.5  S3.8,35.6,3.8,35.3z M26.2,2.4V17l0,0c0,0.3,0.2,0.5,0.5,0.5s0.5-0.2,0.5-0.5l0,0V2.4c0-0.8,0.6-1.4,1.4-1.4H33l0.4,1.2  c0.3,1,1.2,1.6,2.2,1.6h4.8c1,0,1.9-0.6,2.2-1.6L43,1h4.4c0.8,0,1.4,0.6,1.4,1.4v41.5c0,0.8-0.6,1.4-1.4,1.4H28.6  c-0.8,0-1.4-0.6-1.4-1.4l0,0c0-0.3-0.2-0.5-0.5-0.5s-0.5,0.2-0.5,0.5l0,0l0,0l0,0l0,0c0,1.3,1.1,2.4,2.4,2.4h18.8  c1.3,0,2.4-1.1,2.4-2.4V2.4c0-1.3-1.1-2.4-2.4-2.4L28.6,0C27.3,0,26.2,1.1,26.2,2.4z M34,0.9h8.1l-0.4,1c-0.2,0.6-0.7,1-1.3,1h-4.8  c-0.6,0-1.1-0.4-1.3-1L34,0.9z M17.6,1.7L20,4.1c0,0.1,0.1,0.2,0.1,0.3s0,0.2-0.1,0.3l-2.4,2.4c-0.2,0.2-0.4,0.2-0.6,0  s-0.2-0.4,0-0.6l1.7-1.7h-5.4c-3.2,0-5.9,2.6-5.9,5.9v5.7c0,0.2-0.2,0.4-0.4,0.4c-0.2,0-0.4-0.2-0.4-0.4v-5.7C6.6,7,9.6,4,13.3,4  h5.4L17,2.3c-0.2-0.2-0.2-0.4,0-0.6C17.2,1.5,17.5,1.6,17.6,1.7z"}))),i.a.createElement("h3",{className:"mt-4 mb-3"},"Please rotate your device"),i.a.createElement("p",null,"We don\u2019t support landscape mode yet. Please go back to portrait mode for the best experience."))))}}]),a}(n.Component);function Da(){null!=navigator.userAgent.match(/iPad/i)?(ut()("#portraitMode").show(),ut()("#landscapeMode").hide()):90===window.orientation||-90===window.orientation?(ut()("#portraitMode").hide(),ut()("#landscapeMode").show()):(ut()("#portraitMode").show(),ut()("#landscapeMode").hide())}ut()(document).ready((function(){ut()(window).on("orientationchange",(function(e){null!=navigator.userAgent.match(/iPad/i)?(ut()("#portraitMode").show(),ut()("#landscapeMode").hide()):90===window.orientation||-90===window.orientation?(ut()("#portraitMode").hide(),ut()("#landscapeMode").show()):(ut()("#portraitMode").show(),ut()("#landscapeMode").hide())}))}));var Ra=Object(c.b)((function(e){return{globalLangData:e.globalSettingReducer.global_settings_data.lanuage,generalSettings:e.globalSettingReducer.global_settings_data.advance_settings,globalAppearance:e.globalSettingReducer.global_settings_data.appearance,globalSettingsData:e.globalSettingReducer.global_settings_data,productDetails:e.productCanvasReducer.product_details,canvasData:e.productCanvasReducer}}))(Pa),Ta=a(60),La=a.n(Ta),Ma=a(758),Ba="",ja=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||l.compose,Fa=Object(l.createStore)(K,ja(Object(l.applyMiddleware)(u.a)));function Ua(e){for(var t="",a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=a.length,n=0;n<e;n++)t+=a.charAt(Math.floor(Math.random()*r));return t}function Va(){return Ma.sign({data:{attr1:"value 1",attr2:"testing"}},window.SECRET_KEY,{algorithm:"HS256",expiresIn:"24h",audience:window.STORE_URL,issuer:"guest-"+Ua(20)})}function Ga(e){return("Shopify"!==window.storeType&&"Others"!==window.storeType&&"Hosted"!==window.storeType?new URLSearchParams(window.parent.location.search):new URLSearchParams(window.location.search)).get(e)}La.a.interceptors.request.use((function(e){var t=Fa.getState().globalSettingReducer.store_id;""===Ba?Ba=Va():function(){var e=0;return Ma.verify(Ba,window.SECRET_KEY,(function(t,a){t&&(e=1)})),e}()&&(Ba=Va());if(e.headers.common.token="Bearer "+Ba,!e.url.includes("settings/stores/")||!e.url.includes(".json"))if("post"===e.method.toLowerCase())if(e.data instanceof FormData)e.data.append("store_id",t),(Ga("temp")||Ga("quot"))&&e.data.append("source","admin"),e.url.includes("quotation/request")&&(e.params||(e.params={}),e.params.store_id=t);else{var a={};a.store_id=t,(Ga("temp")||Ga("quot"))&&(a.source="admin"),e.data=Object(r.a)({},e.data,{},a)}else e.params||(e.params={}),e.params.store_id=t,(Ga("temp")||Ga("quot"))&&(e.params.source="admin");return e})),s.a.render(i.a.createElement(c.a,{store:Fa},i.a.createElement(Ra,null)),document.getElementById("root"))},85:function(e,t,a){"use strict";a.d(t,"g",(function(){return s})),a.d(t,"h",(function(){return l})),a.d(t,"a",(function(){return c})),a.d(t,"c",(function(){return u})),a.d(t,"b",(function(){return d})),a.d(t,"d",(function(){return p})),a.d(t,"f",(function(){return m})),a.d(t,"e",(function(){return h}));var r=a(7),n=a(4),i=a(12),o=a(60);function s(e,t){return function(a){return t||a(b()),function(e){var t=Object(n.a)({},e);return delete t.print_profile,o.get(i.a.base_path+"templates",{params:t},{headers:{"Content-Type":"application/json"}})}(e).then((function(e){return t&&(t.push.apply(t,Object(r.a)(e.data.data)),e.data.data=Object(r.a)(t)),a(A(e.data)),e.data})).catch((function(e){a(y(e))}))}}function l(e){return function(t){return t(g()),(a=e,o.get(i.a.base_path+"products/"+a,{headers:{"Content-Type":"application/json"}})).then((function(e){return t(f(e.data)),e.data})).catch((function(e){t(v(e))}));var a}}var c="FETCH_PRODUCT_BEGIN",u="FETCH_PRODUCT_SUCCESS",d="FETCH_PRODUCT_FAILURE",p="FETCH_TEMPLATE_BEGIN_PBT",m="FETCH_TEMPLATE_SUCCESS_PBT",h="FETCH_TEMPLATE_FAILURE_PBT",g=function(){return{type:c}},f=function(e){return{type:u,payload:e}},v=function(e){return{type:d,payload:{error:e}}},b=function(){return{type:p}},A=function(e){return{type:m,payload:e}},y=function(e){return{type:h,payload:{error:e}}}},86:function(e,t,a){"use strict";(function(e){function r(){return"undefined"!==typeof window}function n(e){for(var t=new ArrayBuffer(e.length),a=new Uint8Array(t),r=0;r<e.length;++r)a[r]=e[r];return t}function i(t){for(var a=new e(t.byteLength),r=new Uint8Array(t),n=0;n<a.length;++n)a[n]=r[n];return a}function o(e,t){if(!e)throw t}a.d(t,"c",(function(){return r})),a.d(t,"d",(function(){return n})),a.d(t,"a",(function(){return i})),a.d(t,"b",(function(){return o}))}).call(this,a(44).Buffer)},90:function(e,t,a){"use strict";var r=a(10),n=a(11),i=[],o=function(){function e(){Object(r.a)(this,e)}return Object(n.a)(e,null,[{key:"setFont",value:function(e){i.push(e)}},{key:"getFont",value:function(e){for(var t=0;t<i.length;t++)if(e===i[t].font_family)return i[t].glyph;return null}}]),e}();t.a=o},96:function(e,t,a){"use strict";a(667);var r=a(417),n=a.n(r);function i(e,t,a,r,n){return Math.pow(1-n,3)*e+3*Math.pow(1-n,2)*n*t+3*(1-n)*Math.pow(n,2)*a+Math.pow(n,3)*r}function o(){this.x1=Number.NaN,this.y1=Number.NaN,this.x2=Number.NaN,this.y2=Number.NaN}o.prototype.isEmpty=function(){return isNaN(this.x1)||isNaN(this.y1)||isNaN(this.x2)||isNaN(this.y2)},o.prototype.addPoint=function(e,t){"number"===typeof e&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=e,this.x2=e),e<this.x1&&(this.x1=e),e>this.x2&&(this.x2=e)),"number"===typeof t&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=t,this.y2=t),t<this.y1&&(this.y1=t),t>this.y2&&(this.y2=t))},o.prototype.addX=function(e){this.addPoint(e,null)},o.prototype.addY=function(e){this.addPoint(null,e)},o.prototype.addBezier=function(e,t,a,r,n,o,s,l){var c=[e,t],u=[a,r],d=[n,o],p=[s,l];this.addPoint(e,t),this.addPoint(s,l);for(var m=0;m<=1;m++){var h=6*c[m]-12*u[m]+6*d[m],g=-3*c[m]+9*u[m]-9*d[m]+3*p[m],f=3*u[m]-3*c[m];if(0!==g){var v=Math.pow(h,2)-4*f*g;if(!(v<0)){var b=(-h+Math.sqrt(v))/(2*g);0<b&&b<1&&(0===m&&this.addX(i(c[m],u[m],d[m],p[m],b)),1===m&&this.addY(i(c[m],u[m],d[m],p[m],b)));var A=(-h-Math.sqrt(v))/(2*g);0<A&&A<1&&(0===m&&this.addX(i(c[m],u[m],d[m],p[m],A)),1===m&&this.addY(i(c[m],u[m],d[m],p[m],A)))}}else{if(0===h)continue;var y=-f/h;0<y&&y<1&&(0===m&&this.addX(i(c[m],u[m],d[m],p[m],y)),1===m&&this.addY(i(c[m],u[m],d[m],p[m],y)))}}},o.prototype.addQuad=function(e,t,a,r,n,i){var o=e+2/3*(a-e),s=t+2/3*(r-t),l=o+1/3*(n-e),c=s+1/3*(i-t);this.addBezier(e,t,o,s,l,c,n,i)};var s=o;function l(){this.commands=[],this.fill="black",this.stroke=null,this.strokeWidth=1}l.prototype.moveTo=function(e,t){this.commands.push({type:"M",x:e,y:t})},l.prototype.lineTo=function(e,t){this.commands.push({type:"L",x:e,y:t})},l.prototype.curveTo=l.prototype.bezierCurveTo=function(e,t,a,r,n,i){this.commands.push({type:"C",x1:e,y1:t,x2:a,y2:r,x:n,y:i})},l.prototype.quadTo=l.prototype.quadraticCurveTo=function(e,t,a,r){this.commands.push({type:"Q",x1:e,y1:t,x:a,y:r})},l.prototype.close=l.prototype.closePath=function(){this.commands.push({type:"Z"})},l.prototype.extend=function(e){if(e.commands)e=e.commands;else if(e instanceof s){var t=e;return this.moveTo(t.x1,t.y1),this.lineTo(t.x2,t.y1),this.lineTo(t.x2,t.y2),this.lineTo(t.x1,t.y2),void this.close()}Array.prototype.push.apply(this.commands,e)},l.prototype.getBoundingBox=function(){for(var e=new s,t=0,a=0,r=0,n=0,i=0;i<this.commands.length;i++){var o=this.commands[i];switch(o.type){case"M":e.addPoint(o.x,o.y),t=r=o.x,a=n=o.y;break;case"L":e.addPoint(o.x,o.y),r=o.x,n=o.y;break;case"Q":e.addQuad(r,n,o.x1,o.y1,o.x,o.y),r=o.x,n=o.y;break;case"C":e.addBezier(r,n,o.x1,o.y1,o.x2,o.y2,o.x,o.y),r=o.x,n=o.y;break;case"Z":r=t,n=a;break;default:throw new Error("Unexpected path command "+o.type)}}return e.isEmpty()&&e.addPoint(0,0),e},l.prototype.draw=function(e){e.beginPath();for(var t=0;t<this.commands.length;t+=1){var a=this.commands[t];"M"===a.type?e.moveTo(a.x,a.y):"L"===a.type?e.lineTo(a.x,a.y):"C"===a.type?e.bezierCurveTo(a.x1,a.y1,a.x2,a.y2,a.x,a.y):"Q"===a.type?e.quadraticCurveTo(a.x1,a.y1,a.x,a.y):"Z"===a.type&&e.closePath()}this.fill&&(e.fillStyle=this.fill,e.fill()),this.stroke&&(e.strokeStyle=this.stroke,e.lineWidth=this.strokeWidth,e.stroke())},l.prototype.toPathData=function(e){function t(t){return Math.round(t)===t?""+Math.round(t):t.toFixed(e)}function a(){for(var e="",a=0;a<arguments.length;a+=1){var r=arguments[a];r>=0&&a>0&&(e+=" "),e+=t(r)}return e}e=void 0!==e?e:2;var r,n,i="",o="arc";this.arttype&&(o=this.arttype);for(var s=0;s<this.commands.length;s+=1)r=(n=this.commands[s]).y-this.starty,"wave"===o?(n.x<=this.totalwidth/2?n.y=r-this.maxheight-this.totalwidth*Math.sin(2*Math.PI*n.x/this.totalwidth)*this.artSize/10:n.y=r-this.maxheight+this.totalwidth*Math.sin(2*Math.PI*(this.totalwidth-n.x)/this.totalwidth)*this.artSize/10,r=n.y1-this.starty,n.x1<=this.totalwidth/2?n.y1=r-this.maxheight-this.totalwidth*Math.sin(2*Math.PI*n.x1/this.totalwidth)*this.artSize/10:n.y1=r-this.maxheight+this.totalwidth*Math.sin(2*Math.PI*(this.totalwidth-n.x1)/this.totalwidth)*this.artSize/10):"bridge"===o?(n.x<=this.totalwidth/2?n.y=r-this.maxheight-r*Math.sin(Math.PI*n.x/this.totalwidth)*this.artSize/2:n.y=r-this.maxheight-r*Math.sin(Math.PI*(this.totalwidth-n.x)/this.totalwidth)*this.artSize/2,r=n.y1-this.starty,n.x1<=this.totalwidth/2?n.y1=r-this.maxheight-r*Math.sin(Math.PI*n.x1/this.totalwidth)*this.artSize/2:n.y1=r-this.maxheight-r*Math.sin(Math.PI*(this.totalwidth-n.x1)/this.totalwidth)*this.artSize/2):"bridgedown"===o?(n.x<=this.totalwidth/2?n.y=r-this.maxheight-(r-this.height)*Math.sin(Math.PI*n.x/this.totalwidth)*this.artSize/2:n.y=r-this.maxheight-(r-this.height)*Math.sin(Math.PI*(this.totalwidth-n.x)/this.totalwidth)*this.artSize/2,r=n.y1-this.starty,n.x1<=this.totalwidth/2?n.y1=r-this.maxheight-(r-this.height)*Math.sin(Math.PI*n.x1/this.totalwidth)*this.artSize/2:n.y1=r-this.maxheight-(r-this.height)*Math.sin(Math.PI*(this.totalwidth-n.x1)/this.totalwidth)*this.artSize/2):"pinch"===o?(n.x<=this.totalwidth/2?n.y=r-this.maxheight-(r-this.height/2)*Math.sin(Math.PI*n.x/this.totalwidth)*this.artSize/2:n.y=r-this.maxheight-(r-this.height/2)*Math.sin(Math.PI*(this.totalwidth-n.x)/this.totalwidth)*this.artSize/2,r=n.y1-this.starty,n.x1<=this.totalwidth/2?n.y1=r-this.maxheight-(r-this.height/2)*Math.sin(Math.PI*n.x1/this.totalwidth)*this.artSize/2:n.y1=r-this.maxheight-(r-this.height/2)*Math.sin(Math.PI*(this.totalwidth-n.x1)/this.totalwidth)*this.artSize/2):"bulge"===o?(n.x<=this.totalwidth/2?n.y=(r-this.maxheight+(r-this.height/2)*Math.sin(Math.PI*n.x/this.totalwidth)*this.artSize)/2:n.y=(r-this.maxheight+(r-this.height/2)*Math.sin(Math.PI*(this.totalwidth-n.x)/this.totalwidth)*this.artSize)/2,r=n.y1-this.starty,n.x1<=this.totalwidth/2?n.y1=(r-this.maxheight+(r-this.height/2)*Math.sin(Math.PI*n.x1/this.totalwidth)*this.artSize)/2:n.y1=(r-this.maxheight+(r-this.height/2)*Math.sin(Math.PI*(this.totalwidth-n.x1)/this.totalwidth)*this.artSize)/2):"archdown"===o?(n.x<=this.totalwidth/2?n.y=r-this.maxheight-this.totalwidth*Math.sin(Math.PI*n.x/this.totalwidth)*this.artSize/10:n.y=r-this.maxheight-this.totalwidth*Math.sin(Math.PI*(this.totalwidth-n.x)/this.totalwidth)*this.artSize/10,r=n.y1-this.starty,n.x1<=this.totalwidth/2?n.y1=r-this.maxheight-this.totalwidth*Math.sin(Math.PI*n.x1/this.totalwidth)*this.artSize/10:n.y1=r-this.maxheight-this.totalwidth*Math.sin(Math.PI*(this.totalwidth-n.x1)/this.totalwidth)*this.artSize/10):"archup"===o?(n.x<=this.totalwidth/2?n.y=r-this.maxheight+this.totalwidth*Math.sin(Math.PI*n.x/this.totalwidth)*this.artSize/10:n.y=r-this.maxheight+this.totalwidth*Math.sin(Math.PI*(this.totalwidth-n.x)/this.totalwidth)*this.artSize/10,r=n.y1-this.starty,n.x1<=this.totalwidth/2?n.y1=r-this.maxheight+this.totalwidth*Math.sin(Math.PI*n.x1/this.totalwidth)*this.artSize/10:n.y1=r-this.maxheight+this.totalwidth*Math.sin(Math.PI*(this.totalwidth-n.x1)/this.totalwidth)*this.artSize/10):"slopeleft"===o?(n.y=r-n.x/6*this.artSize-this.maxheight/2,r=n.y1-this.starty,n.y1=r-n.x1/6*this.artSize-this.maxheight/2):"sloperight"===o?(n.y=-3*this.maxheight/2+r+n.x/6*this.artSize,r=n.y1-this.starty,n.y1=-3*this.maxheight/2+r+n.x1/6*this.artSize):"arcdown"===o?(n.x<=this.totalwidth/2?n.y=r-this.maxheight-this.totalwidth*Math.sin(Math.PI*n.x/this.totalwidth)*this.artSize/6:n.y=r-this.maxheight-this.totalwidth*Math.sin(Math.PI*(this.totalwidth-n.x)/this.totalwidth)*this.artSize/6,n.x=n.x+(r-this.maxheight/2)*Math.cos(Math.PI*n.x/this.totalwidth)*this.artSize/2,r=n.y1-this.starty,n.x1<=this.totalwidth/2?n.y1=r-this.maxheight-this.totalwidth*Math.sin(Math.PI*n.x1/this.totalwidth)*this.artSize/6:n.y1=r-this.maxheight-this.totalwidth*Math.sin(Math.PI*(this.totalwidth-n.x1)/this.totalwidth)*this.artSize/6,n.x1=n.x1+(r-this.maxheight/2)*Math.cos(Math.PI*n.x1/this.totalwidth)*this.artSize/2):"arcup"===o?(n.x<=this.totalwidth/2?n.y=r-this.maxheight+this.totalwidth*Math.sin(Math.PI*n.x/this.totalwidth)*this.artSize/6:n.y=r-this.maxheight+this.totalwidth*Math.sin(Math.PI*(this.totalwidth-n.x)/this.totalwidth)*this.artSize/6,n.x=n.x-(r-this.maxheight/2)*Math.cos(Math.PI*n.x/this.totalwidth)*this.artSize/2,r=n.y1-this.starty,n.x1<=this.totalwidth?n.y1=r-this.maxheight+this.totalwidth*Math.sin(Math.PI*n.x1/this.totalwidth)*this.artSize/6:n.y1=r-this.maxheight+this.totalwidth*Math.sin(Math.PI*(this.totalwidth-n.x1)/this.totalwidth)*this.artSize/6,n.x1=n.x1-(r-this.maxheight/2)*Math.cos(Math.PI*n.x1/this.totalwidth)*this.artSize/2):"roofb"===o?(n.x<=this.totalwidth/2?n.y=r/2+r*n.x*this.artSize/this.totalwidth-this.maxheight:n.y=r/2+r*(this.totalwidth-n.x)*this.artSize/this.totalwidth-this.maxheight,r=n.y1-this.starty,n.x1<=this.totalwidth/2?n.y1=r/2+r*n.x1*this.artSize/this.totalwidth-this.maxheight:n.y1=r/2+r*(this.totalwidth-n.x1)*this.artSize/this.totalwidth-this.maxheight):"rooft"===o?(n.x<=this.totalwidth/2?n.y=r/2+(r-this.maxheight)*n.x*this.artSize/this.totalwidth-this.maxheight/2:n.y=r/2+(r-this.maxheight)*(this.totalwidth-n.x)*this.artSize/this.totalwidth-this.maxheight/2,r=n.y1-this.starty,n.x1<=this.totalwidth/2?n.y1=r/2+(r-this.maxheight)*n.x1*this.artSize/this.totalwidth-this.maxheight/2:n.y1=r/2+(r-this.maxheight)*(this.totalwidth-n.x1)*this.artSize/this.totalwidth-this.maxheight/2):"roof"===o?(n.x<=this.totalwidth/2?n.y=r/2+(r-this.maxheight/2)*n.x*this.artSize/this.totalwidth-this.maxheight:n.y=r/2+(r-this.maxheight/2)*(this.totalwidth-n.x)*this.artSize/this.totalwidth-this.maxheight,r=n.y1-this.starty,n.x1<=this.totalwidth/2?n.y1=r/2+(r-this.maxheight/2)*n.x1*this.artSize/this.totalwidth-this.maxheight:n.y1=r/2+(r-this.maxheight/2)*(this.totalwidth-n.x1)*this.artSize/this.totalwidth-this.maxheight):"wedgebr"===o?(n.y=(r+r*n.x*this.artSize/this.totalwidth)/2-this.maxheight,r=n.y1-this.starty,n.y1=(r+r*n.x1*this.artSize/this.totalwidth)/2-this.maxheight):"wedgebl"===o&&(n.y=(r+r*(this.totalwidth-n.x)*this.artSize/this.totalwidth)/2-this.maxheight,r=n.y1-this.starty,n.y1=(r+r*(this.totalwidth-n.x1)*this.artSize/this.totalwidth)/2-this.maxheight),"M"===n.type?i+="M"+a(n.x,n.y):"L"===n.type?i+="L"+a(n.x,n.y):"C"===n.type?i+="C"+a(n.x1,n.y1,n.x2,n.y2,n.x,n.y):"Q"===n.type?i+="Q"+a(n.x1,n.y1,n.x,n.y):"Z"===n.type&&(i+="Z");return i},l.prototype.toSVG=function(e){var t='<path d="';return t+=this.toPathData(e),t+='"',t+='paint-order="stroke"',t+="id="+this.id,this.fill&&"black"!==this.fill&&(null===this.fill?t+=' fill="none"':t+=' fill="'+this.fill+'"'),this.stroke&&(t+=' stroke="'+this.stroke+'" stroke-width="'+this.strokeWidth+'"'),this.transform&&(t+=' transform="'+this.transform+'"'),t+="/>"},l.prototype.toDOMElement=function(e){var t=this.toPathData(e),a=document.createElementNS("http://www.w3.org/2000/svg","path");return a.setAttribute("d",t),a};var c=l;function u(e){throw new Error(e)}function d(e,t){e||u(t)}var p={fail:u,argument:d,assert:d},m={},h={},g={};function f(e){return function(){return e}}h.BYTE=function(e){return p.argument(e>=0&&e<=255,"Byte value should be between 0 and 255."),[e]},g.BYTE=f(1),h.CHAR=function(e){return[e.charCodeAt(0)]},g.CHAR=f(1),h.CHARARRAY=function(e){for(var t=[],a=0;a<e.length;a+=1)t[a]=e.charCodeAt(a);return t},g.CHARARRAY=function(e){return e.length},h.USHORT=function(e){return[e>>8&255,255&e]},g.USHORT=f(2),h.SHORT=function(e){return e>=32768&&(e=-(65536-e)),[e>>8&255,255&e]},g.SHORT=f(2),h.UINT24=function(e){return[e>>16&255,e>>8&255,255&e]},g.UINT24=f(3),h.ULONG=function(e){return[e>>24&255,e>>16&255,e>>8&255,255&e]},g.ULONG=f(4),h.LONG=function(e){return e>=2147483648&&(e=-(4294967296-e)),[e>>24&255,e>>16&255,e>>8&255,255&e]},g.LONG=f(4),h.FIXED=h.ULONG,g.FIXED=g.ULONG,h.FWORD=h.SHORT,g.FWORD=g.SHORT,h.UFWORD=h.USHORT,g.UFWORD=g.USHORT,h.LONGDATETIME=function(e){return[0,0,0,0,e>>24&255,e>>16&255,e>>8&255,255&e]},g.LONGDATETIME=f(8),h.TAG=function(e){return p.argument(4===e.length,"Tag should be exactly 4 ASCII characters."),[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]},g.TAG=f(4),h.Card8=h.BYTE,g.Card8=g.BYTE,h.Card16=h.USHORT,g.Card16=g.USHORT,h.OffSize=h.BYTE,g.OffSize=g.BYTE,h.SID=h.USHORT,g.SID=g.USHORT,h.NUMBER=function(e){return e>=-107&&e<=107?[e+139]:e>=108&&e<=1131?[247+((e-=108)>>8),255&e]:e>=-1131&&e<=-108?[251+((e=-e-108)>>8),255&e]:e>=-32768&&e<=32767?h.NUMBER16(e):h.NUMBER32(e)},g.NUMBER=function(e){return h.NUMBER(e).length},h.NUMBER16=function(e){return[28,e>>8&255,255&e]},g.NUMBER16=f(3),h.NUMBER32=function(e){return[29,e>>24&255,e>>16&255,e>>8&255,255&e]},g.NUMBER32=f(5),h.REAL=function(e){var t=e.toString(),a=/\.(\d*?)(?:9{5,20}|0{5,20})\d{0,2}(?:e(.+)|$)/.exec(t);if(a){var r=parseFloat("1e"+((a[2]?+a[2]:0)+a[1].length));t=(Math.round(e*r)/r).toString()}for(var n="",i=0,o=t.length;i<o;i+=1){var s=t[i];n+="e"===s?"-"===t[++i]?"c":"b":"."===s?"a":"-"===s?"e":s}for(var l=[30],c=0,u=(n+=1&n.length?"f":"ff").length;c<u;c+=2)l.push(parseInt(n.substr(c,2),16));return l},g.REAL=function(e){return h.REAL(e).length},h.NAME=h.CHARARRAY,g.NAME=g.CHARARRAY,h.STRING=h.CHARARRAY,g.STRING=g.CHARARRAY,m.UTF8=function(e,t,a){for(var r=[],n=a,i=0;i<n;i++,t+=1)r[i]=e.getUint8(t);return String.fromCharCode.apply(null,r)},m.UTF16=function(e,t,a){for(var r=[],n=a/2,i=0;i<n;i++,t+=2)r[i]=e.getUint16(t);return String.fromCharCode.apply(null,r)},h.UTF16=function(e){for(var t=[],a=0;a<e.length;a+=1){var r=e.charCodeAt(a);t[t.length]=r>>8&255,t[t.length]=255&r}return t},g.UTF16=function(e){return 2*e.length};var v={"x-mac-croatian":"\xc4\xc5\xc7\xc9\xd1\xd6\xdc\xe1\xe0\xe2\xe4\xe3\xe5\xe7\xe9\xe8\xea\xeb\xed\xec\xee\xef\xf1\xf3\xf2\xf4\xf6\xf5\xfa\xf9\xfb\xfc\u2020\xb0\xa2\xa3\xa7\u2022\xb6\xdf\xae\u0160\u2122\xb4\xa8\u2260\u017d\xd8\u221e\xb1\u2264\u2265\u2206\xb5\u2202\u2211\u220f\u0161\u222b\xaa\xba\u03a9\u017e\xf8\xbf\xa1\xac\u221a\u0192\u2248\u0106\xab\u010c\u2026\xa0\xc0\xc3\xd5\u0152\u0153\u0110\u2014\u201c\u201d\u2018\u2019\xf7\u25ca\uf8ff\xa9\u2044\u20ac\u2039\u203a\xc6\xbb\u2013\xb7\u201a\u201e\u2030\xc2\u0107\xc1\u010d\xc8\xcd\xce\xcf\xcc\xd3\xd4\u0111\xd2\xda\xdb\xd9\u0131\u02c6\u02dc\xaf\u03c0\xcb\u02da\xb8\xca\xe6\u02c7","x-mac-cyrillic":"\u0410\u0411\u0412\u0413\u0414\u0415\u0416\u0417\u0418\u0419\u041a\u041b\u041c\u041d\u041e\u041f\u0420\u0421\u0422\u0423\u0424\u0425\u0426\u0427\u0428\u0429\u042a\u042b\u042c\u042d\u042e\u042f\u2020\xb0\u0490\xa3\xa7\u2022\xb6\u0406\xae\xa9\u2122\u0402\u0452\u2260\u0403\u0453\u221e\xb1\u2264\u2265\u0456\xb5\u0491\u0408\u0404\u0454\u0407\u0457\u0409\u0459\u040a\u045a\u0458\u0405\xac\u221a\u0192\u2248\u2206\xab\xbb\u2026\xa0\u040b\u045b\u040c\u045c\u0455\u2013\u2014\u201c\u201d\u2018\u2019\xf7\u201e\u040e\u045e\u040f\u045f\u2116\u0401\u0451\u044f\u0430\u0431\u0432\u0433\u0434\u0435\u0436\u0437\u0438\u0439\u043a\u043b\u043c\u043d\u043e\u043f\u0440\u0441\u0442\u0443\u0444\u0445\u0446\u0447\u0448\u0449\u044a\u044b\u044c\u044d\u044e","x-mac-gaelic":"\xc4\xc5\xc7\xc9\xd1\xd6\xdc\xe1\xe0\xe2\xe4\xe3\xe5\xe7\xe9\xe8\xea\xeb\xed\xec\xee\xef\xf1\xf3\xf2\xf4\xf6\xf5\xfa\xf9\xfb\xfc\u2020\xb0\xa2\xa3\xa7\u2022\xb6\xdf\xae\xa9\u2122\xb4\xa8\u2260\xc6\xd8\u1e02\xb1\u2264\u2265\u1e03\u010a\u010b\u1e0a\u1e0b\u1e1e\u1e1f\u0120\u0121\u1e40\xe6\xf8\u1e41\u1e56\u1e57\u027c\u0192\u017f\u1e60\xab\xbb\u2026\xa0\xc0\xc3\xd5\u0152\u0153\u2013\u2014\u201c\u201d\u2018\u2019\u1e61\u1e9b\xff\u0178\u1e6a\u20ac\u2039\u203a\u0176\u0177\u1e6b\xb7\u1ef2\u1ef3\u204a\xc2\xca\xc1\xcb\xc8\xcd\xce\xcf\xcc\xd3\xd4\u2663\xd2\xda\xdb\xd9\u0131\xdd\xfd\u0174\u0175\u1e84\u1e85\u1e80\u1e81\u1e82\u1e83","x-mac-greek":"\xc4\xb9\xb2\xc9\xb3\xd6\xdc\u0385\xe0\xe2\xe4\u0384\xa8\xe7\xe9\xe8\xea\xeb\xa3\u2122\xee\xef\u2022\xbd\u2030\xf4\xf6\xa6\u20ac\xf9\xfb\xfc\u2020\u0393\u0394\u0398\u039b\u039e\u03a0\xdf\xae\xa9\u03a3\u03aa\xa7\u2260\xb0\xb7\u0391\xb1\u2264\u2265\xa5\u0392\u0395\u0396\u0397\u0399\u039a\u039c\u03a6\u03ab\u03a8\u03a9\u03ac\u039d\xac\u039f\u03a1\u2248\u03a4\xab\xbb\u2026\xa0\u03a5\u03a7\u0386\u0388\u0153\u2013\u2015\u201c\u201d\u2018\u2019\xf7\u0389\u038a\u038c\u038e\u03ad\u03ae\u03af\u03cc\u038f\u03cd\u03b1\u03b2\u03c8\u03b4\u03b5\u03c6\u03b3\u03b7\u03b9\u03be\u03ba\u03bb\u03bc\u03bd\u03bf\u03c0\u03ce\u03c1\u03c3\u03c4\u03b8\u03c9\u03c2\u03c7\u03c5\u03b6\u03ca\u03cb\u0390\u03b0\xad","x-mac-icelandic":"\xc4\xc5\xc7\xc9\xd1\xd6\xdc\xe1\xe0\xe2\xe4\xe3\xe5\xe7\xe9\xe8\xea\xeb\xed\xec\xee\xef\xf1\xf3\xf2\xf4\xf6\xf5\xfa\xf9\xfb\xfc\xdd\xb0\xa2\xa3\xa7\u2022\xb6\xdf\xae\xa9\u2122\xb4\xa8\u2260\xc6\xd8\u221e\xb1\u2264\u2265\xa5\xb5\u2202\u2211\u220f\u03c0\u222b\xaa\xba\u03a9\xe6\xf8\xbf\xa1\xac\u221a\u0192\u2248\u2206\xab\xbb\u2026\xa0\xc0\xc3\xd5\u0152\u0153\u2013\u2014\u201c\u201d\u2018\u2019\xf7\u25ca\xff\u0178\u2044\u20ac\xd0\xf0\xde\xfe\xfd\xb7\u201a\u201e\u2030\xc2\xca\xc1\xcb\xc8\xcd\xce\xcf\xcc\xd3\xd4\uf8ff\xd2\xda\xdb\xd9\u0131\u02c6\u02dc\xaf\u02d8\u02d9\u02da\xb8\u02dd\u02db\u02c7","x-mac-inuit":"\u1403\u1404\u1405\u1406\u140a\u140b\u1431\u1432\u1433\u1434\u1438\u1439\u1449\u144e\u144f\u1450\u1451\u1455\u1456\u1466\u146d\u146e\u146f\u1470\u1472\u1473\u1483\u148b\u148c\u148d\u148e\u1490\u1491\xb0\u14a1\u14a5\u14a6\u2022\xb6\u14a7\xae\xa9\u2122\u14a8\u14aa\u14ab\u14bb\u14c2\u14c3\u14c4\u14c5\u14c7\u14c8\u14d0\u14ef\u14f0\u14f1\u14f2\u14f4\u14f5\u1505\u14d5\u14d6\u14d7\u14d8\u14da\u14db\u14ea\u1528\u1529\u152a\u152b\u152d\u2026\xa0\u152e\u153e\u1555\u1556\u1557\u2013\u2014\u201c\u201d\u2018\u2019\u1558\u1559\u155a\u155d\u1546\u1547\u1548\u1549\u154b\u154c\u1550\u157f\u1580\u1581\u1582\u1583\u1584\u1585\u158f\u1590\u1591\u1592\u1593\u1594\u1595\u1671\u1672\u1673\u1674\u1675\u1676\u1596\u15a0\u15a1\u15a2\u15a3\u15a4\u15a5\u15a6\u157c\u0141\u0142","x-mac-ce":"\xc4\u0100\u0101\xc9\u0104\xd6\xdc\xe1\u0105\u010c\xe4\u010d\u0106\u0107\xe9\u0179\u017a\u010e\xed\u010f\u0112\u0113\u0116\xf3\u0117\xf4\xf6\xf5\xfa\u011a\u011b\xfc\u2020\xb0\u0118\xa3\xa7\u2022\xb6\xdf\xae\xa9\u2122\u0119\xa8\u2260\u0123\u012e\u012f\u012a\u2264\u2265\u012b\u0136\u2202\u2211\u0142\u013b\u013c\u013d\u013e\u0139\u013a\u0145\u0146\u0143\xac\u221a\u0144\u0147\u2206\xab\xbb\u2026\xa0\u0148\u0150\xd5\u0151\u014c\u2013\u2014\u201c\u201d\u2018\u2019\xf7\u25ca\u014d\u0154\u0155\u0158\u2039\u203a\u0159\u0156\u0157\u0160\u201a\u201e\u0161\u015a\u015b\xc1\u0164\u0165\xcd\u017d\u017e\u016a\xd3\xd4\u016b\u016e\xda\u016f\u0170\u0171\u0172\u0173\xdd\xfd\u0137\u017b\u0141\u017c\u0122\u02c7",macintosh:"\xc4\xc5\xc7\xc9\xd1\xd6\xdc\xe1\xe0\xe2\xe4\xe3\xe5\xe7\xe9\xe8\xea\xeb\xed\xec\xee\xef\xf1\xf3\xf2\xf4\xf6\xf5\xfa\xf9\xfb\xfc\u2020\xb0\xa2\xa3\xa7\u2022\xb6\xdf\xae\xa9\u2122\xb4\xa8\u2260\xc6\xd8\u221e\xb1\u2264\u2265\xa5\xb5\u2202\u2211\u220f\u03c0\u222b\xaa\xba\u03a9\xe6\xf8\xbf\xa1\xac\u221a\u0192\u2248\u2206\xab\xbb\u2026\xa0\xc0\xc3\xd5\u0152\u0153\u2013\u2014\u201c\u201d\u2018\u2019\xf7\u25ca\xff\u0178\u2044\u20ac\u2039\u203a\ufb01\ufb02\u2021\xb7\u201a\u201e\u2030\xc2\xca\xc1\xcb\xc8\xcd\xce\xcf\xcc\xd3\xd4\uf8ff\xd2\xda\xdb\xd9\u0131\u02c6\u02dc\xaf\u02d8\u02d9\u02da\xb8\u02dd\u02db\u02c7","x-mac-romanian":"\xc4\xc5\xc7\xc9\xd1\xd6\xdc\xe1\xe0\xe2\xe4\xe3\xe5\xe7\xe9\xe8\xea\xeb\xed\xec\xee\xef\xf1\xf3\xf2\xf4\xf6\xf5\xfa\xf9\xfb\xfc\u2020\xb0\xa2\xa3\xa7\u2022\xb6\xdf\xae\xa9\u2122\xb4\xa8\u2260\u0102\u0218\u221e\xb1\u2264\u2265\xa5\xb5\u2202\u2211\u220f\u03c0\u222b\xaa\xba\u03a9\u0103\u0219\xbf\xa1\xac\u221a\u0192\u2248\u2206\xab\xbb\u2026\xa0\xc0\xc3\xd5\u0152\u0153\u2013\u2014\u201c\u201d\u2018\u2019\xf7\u25ca\xff\u0178\u2044\u20ac\u2039\u203a\u021a\u021b\u2021\xb7\u201a\u201e\u2030\xc2\xca\xc1\xcb\xc8\xcd\xce\xcf\xcc\xd3\xd4\uf8ff\xd2\xda\xdb\xd9\u0131\u02c6\u02dc\xaf\u02d8\u02d9\u02da\xb8\u02dd\u02db\u02c7","x-mac-turkish":"\xc4\xc5\xc7\xc9\xd1\xd6\xdc\xe1\xe0\xe2\xe4\xe3\xe5\xe7\xe9\xe8\xea\xeb\xed\xec\xee\xef\xf1\xf3\xf2\xf4\xf6\xf5\xfa\xf9\xfb\xfc\u2020\xb0\xa2\xa3\xa7\u2022\xb6\xdf\xae\xa9\u2122\xb4\xa8\u2260\xc6\xd8\u221e\xb1\u2264\u2265\xa5\xb5\u2202\u2211\u220f\u03c0\u222b\xaa\xba\u03a9\xe6\xf8\xbf\xa1\xac\u221a\u0192\u2248\u2206\xab\xbb\u2026\xa0\xc0\xc3\xd5\u0152\u0153\u2013\u2014\u201c\u201d\u2018\u2019\xf7\u25ca\xff\u0178\u011e\u011f\u0130\u0131\u015e\u015f\u2021\xb7\u201a\u201e\u2030\xc2\xca\xc1\xcb\xc8\xcd\xce\xcf\xcc\xd3\xd4\uf8ff\xd2\xda\xdb\xd9\uf8a0\u02c6\u02dc\xaf\u02d8\u02d9\u02da\xb8\u02dd\u02db\u02c7"};m.MACSTRING=function(e,t,a,r){var n=v[r];if(void 0!==n){for(var i="",o=0;o<a;o++){var s=e.getUint8(t+o);i+=s<=127?String.fromCharCode(s):n[127&s]}return i}};var b,A="function"===typeof WeakMap&&new WeakMap;function y(e){return e>=-128&&e<=127}function _(e,t,a){for(var r=0,n=e.length;t<n&&r<64&&0===e[t];)++t,++r;return a.push(128|r-1),t}function E(e,t,a){for(var r=0,n=e.length,i=t;i<n&&r<64;){var o=e[i];if(!y(o))break;if(0===o&&i+1<n&&0===e[i+1])break;++i,++r}a.push(r-1);for(var s=t;s<i;++s)a.push(e[s]+256&255);return i}function S(e,t,a){for(var r=0,n=e.length,i=t;i<n&&r<64;){var o=e[i];if(0===o)break;if(y(o)&&i+1<n&&y(e[i+1]))break;++i,++r}a.push(64|r-1);for(var s=t;s<i;++s){var l=e[s];a.push(l+65536>>8&255,l+256&255)}return i}h.MACSTRING=function(e,t){var a=function(e){if(!b)for(var t in b={},v)b[t]=new String(t);var a=b[e];if(void 0!==a){if(A){var r=A.get(a);if(void 0!==r)return r}var n=v[e];if(void 0!==n){for(var i={},o=0;o<n.length;o++)i[n.charCodeAt(o)]=o+128;return A&&A.set(a,i),i}}}(t);if(void 0!==a){for(var r=[],n=0;n<e.length;n++){var i=e.charCodeAt(n);if(i>=128&&void 0===(i=a[i]))return;r[n]=i}return r}},g.MACSTRING=function(e,t){var a=h.MACSTRING(e,t);return void 0!==a?a.length:0},h.VARDELTAS=function(e){for(var t=0,a=[];t<e.length;){var r=e[t];t=0===r?_(e,t,a):r>=-128&&r<=127?E(e,t,a):S(e,t,a)}return a},h.INDEX=function(e){for(var t=1,a=[t],r=[],n=0;n<e.length;n+=1){var i=h.OBJECT(e[n]);Array.prototype.push.apply(r,i),t+=i.length,a.push(t)}if(0===r.length)return[0,0];for(var o=[],s=1+Math.floor(Math.log(t)/Math.log(2))/8|0,l=[void 0,h.BYTE,h.USHORT,h.UINT24,h.ULONG][s],c=0;c<a.length;c+=1){var u=l(a[c]);Array.prototype.push.apply(o,u)}return Array.prototype.concat(h.Card16(e.length),h.OffSize(s),o,r)},g.INDEX=function(e){return h.INDEX(e).length},h.DICT=function(e){for(var t=[],a=Object.keys(e),r=a.length,n=0;n<r;n+=1){var i=parseInt(a[n],0),o=e[i];t=(t=t.concat(h.OPERAND(o.value,o.type))).concat(h.OPERATOR(i))}return t},g.DICT=function(e){return h.DICT(e).length},h.OPERATOR=function(e){return e<1200?[e]:[12,e-1200]},h.OPERAND=function(e,t){var a=[];if(Array.isArray(t))for(var r=0;r<t.length;r+=1)p.argument(e.length===t.length,"Not enough arguments given for type"+t),a=a.concat(h.OPERAND(e[r],t[r]));else if("SID"===t)a=a.concat(h.NUMBER(e));else if("offset"===t)a=a.concat(h.NUMBER32(e));else if("number"===t)a=a.concat(h.NUMBER(e));else{if("real"!==t)throw new Error("Unknown operand type "+t);a=a.concat(h.REAL(e))}return a},h.OP=h.BYTE,g.OP=g.BYTE;var C="function"===typeof WeakMap&&new WeakMap;function x(e,t,a){for(var r=0;r<t.length;r+=1){var n=t[r];this[n.name]=n.value}if(this.tableName=e,this.fields=t,a)for(var i=Object.keys(a),o=0;o<i.length;o+=1){var s=i[o],l=a[s];void 0!==this[s]&&(this[s]=l)}}function w(e,t,a){void 0===a&&(a=t.length);var r=new Array(t.length+1);r[0]={name:e+"Count",type:"USHORT",value:a};for(var n=0;n<t.length;n++)r[n+1]={name:e+n,type:"USHORT",value:t[n]};return r}function k(e,t,a){var r=t.length,n=new Array(r+1);n[0]={name:e+"Count",type:"USHORT",value:r};for(var i=0;i<r;i++)n[i+1]={name:e+i,type:"TABLE",value:a(t[i],i)};return n}function I(e,t,a){var r=t.length,n=[];n[0]={name:e+"Count",type:"USHORT",value:r};for(var i=0;i<r;i++)n=n.concat(a(t[i],i));return n}function N(e){1===e.format?x.call(this,"coverageTable",[{name:"coverageFormat",type:"USHORT",value:1}].concat(w("glyph",e.glyphs))):p.assert(!1,"Can't create coverage table format 2 yet.")}function O(e){x.call(this,"scriptListTable",I("scriptRecord",e,(function(e,t){var a=e.script,r=a.defaultLangSys;return p.assert(!!r,"Unable to write GSUB: script "+e.tag+" has no default language system."),[{name:"scriptTag"+t,type:"TAG",value:e.tag},{name:"script"+t,type:"TABLE",value:new x("scriptTable",[{name:"defaultLangSys",type:"TABLE",value:new x("defaultLangSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:r.reqFeatureIndex}].concat(w("featureIndex",r.featureIndexes)))}].concat(I("langSys",a.langSysRecords,(function(e,t){var a=e.langSys;return[{name:"langSysTag"+t,type:"TAG",value:e.tag},{name:"langSys"+t,type:"TABLE",value:new x("langSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:a.reqFeatureIndex}].concat(w("featureIndex",a.featureIndexes)))}]}))))}]})))}function P(e){x.call(this,"featureListTable",I("featureRecord",e,(function(e,t){var a=e.feature;return[{name:"featureTag"+t,type:"TAG",value:e.tag},{name:"feature"+t,type:"TABLE",value:new x("featureTable",[{name:"featureParams",type:"USHORT",value:a.featureParams}].concat(w("lookupListIndex",a.lookupListIndexes)))}]})))}function D(e,t){x.call(this,"lookupListTable",k("lookup",e,(function(e){var a=t[e.lookupType];return p.assert(!!a,"Unable to write GSUB lookup type "+e.lookupType+" tables."),new x("lookupTable",[{name:"lookupType",type:"USHORT",value:e.lookupType},{name:"lookupFlag",type:"USHORT",value:e.lookupFlag}].concat(k("subtable",e.subtables,a)))})))}h.CHARSTRING=function(e){if(C){var t=C.get(e);if(void 0!==t)return t}for(var a=[],r=e.length,n=0;n<r;n+=1){var i=e[n];a=a.concat(h[i.type](i.value))}return C&&C.set(e,a),a},g.CHARSTRING=function(e){return h.CHARSTRING(e).length},h.OBJECT=function(e){var t=h[e.type];return p.argument(void 0!==t,"No encoding function for type "+e.type),t(e.value)},g.OBJECT=function(e){var t=g[e.type];return p.argument(void 0!==t,"No sizeOf function for type "+e.type),t(e.value)},h.TABLE=function(e){for(var t=[],a=e.fields.length,r=[],n=[],i=0;i<a;i+=1){var o=e.fields[i],s=h[o.type];p.argument(void 0!==s,"No encoding function for field type "+o.type+" ("+o.name+")");var l=e[o.name];void 0===l&&(l=o.value);var c=s(l);"TABLE"===o.type?(n.push(t.length),t=t.concat([0,0]),r.push(c)):t=t.concat(c)}for(var u=0;u<r.length;u+=1){var d=n[u],m=t.length;p.argument(m<65536,"Table "+e.tableName+" too big."),t[d]=m>>8,t[d+1]=255&m,t=t.concat(r[u])}return t},g.TABLE=function(e){for(var t=0,a=e.fields.length,r=0;r<a;r+=1){var n=e.fields[r],i=g[n.type];p.argument(void 0!==i,"No sizeOf function for field type "+n.type+" ("+n.name+")");var o=e[n.name];void 0===o&&(o=n.value),t+=i(o),"TABLE"===n.type&&(t+=2)}return t},h.RECORD=h.TABLE,g.RECORD=g.TABLE,h.LITERAL=function(e){return e},g.LITERAL=function(e){return e.length},x.prototype.encode=function(){return h.TABLE(this)},x.prototype.sizeOf=function(){return g.TABLE(this)},N.prototype=Object.create(x.prototype),N.prototype.constructor=N,O.prototype=Object.create(x.prototype),O.prototype.constructor=O,P.prototype=Object.create(x.prototype),P.prototype.constructor=P,D.prototype=Object.create(x.prototype),D.prototype.constructor=D;var R={Table:x,Record:x,Coverage:N,ScriptList:O,FeatureList:P,LookupList:D,ushortList:w,tableList:k,recordList:I};function T(e,t){return e.getUint8(t)}function L(e,t){return e.getUint16(t,!1)}function M(e,t){return e.getUint32(t,!1)}function B(e,t){return e.getInt16(t,!1)+e.getUint16(t+2,!1)/65535}var j={byte:1,uShort:2,short:2,uLong:4,fixed:4,longDateTime:8,tag:4};function F(e,t){this.data=e,this.offset=t,this.relativeOffset=0}F.prototype.parseByte=function(){var e=this.data.getUint8(this.offset+this.relativeOffset);return this.relativeOffset+=1,e},F.prototype.parseChar=function(){var e=this.data.getInt8(this.offset+this.relativeOffset);return this.relativeOffset+=1,e},F.prototype.parseCard8=F.prototype.parseByte,F.prototype.parseUShort=function(){var e=this.data.getUint16(this.offset+this.relativeOffset);return this.relativeOffset+=2,e},F.prototype.parseCard16=F.prototype.parseUShort,F.prototype.parseSID=F.prototype.parseUShort,F.prototype.parseOffset16=F.prototype.parseUShort,F.prototype.parseShort=function(){var e=this.data.getInt16(this.offset+this.relativeOffset);return this.relativeOffset+=2,e},F.prototype.parseF2Dot14=function(){var e=this.data.getInt16(this.offset+this.relativeOffset)/16384;return this.relativeOffset+=2,e},F.prototype.parseULong=function(){var e=M(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,e},F.prototype.parseOffset32=F.prototype.parseULong,F.prototype.parseFixed=function(){var e=B(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,e},F.prototype.parseString=function(e){var t=this.data,a=this.offset+this.relativeOffset,r="";this.relativeOffset+=e;for(var n=0;n<e;n++)r+=String.fromCharCode(t.getUint8(a+n));return r},F.prototype.parseTag=function(){return this.parseString(4)},F.prototype.parseLongDateTime=function(){var e=M(this.data,this.offset+this.relativeOffset+4);return e-=2082844800,this.relativeOffset+=8,e},F.prototype.parseVersion=function(e){var t=L(this.data,this.offset+this.relativeOffset),a=L(this.data,this.offset+this.relativeOffset+2);return this.relativeOffset+=4,void 0===e&&(e=4096),t+a/e/10},F.prototype.skip=function(e,t){void 0===t&&(t=1),this.relativeOffset+=j[e]*t},F.prototype.parseULongList=function(e){void 0===e&&(e=this.parseULong());for(var t=new Array(e),a=this.data,r=this.offset+this.relativeOffset,n=0;n<e;n++)t[n]=a.getUint32(r),r+=4;return this.relativeOffset+=4*e,t},F.prototype.parseOffset16List=F.prototype.parseUShortList=function(e){void 0===e&&(e=this.parseUShort());for(var t=new Array(e),a=this.data,r=this.offset+this.relativeOffset,n=0;n<e;n++)t[n]=a.getUint16(r),r+=2;return this.relativeOffset+=2*e,t},F.prototype.parseShortList=function(e){for(var t=new Array(e),a=this.data,r=this.offset+this.relativeOffset,n=0;n<e;n++)t[n]=a.getInt16(r),r+=2;return this.relativeOffset+=2*e,t},F.prototype.parseByteList=function(e){for(var t=new Array(e),a=this.data,r=this.offset+this.relativeOffset,n=0;n<e;n++)t[n]=a.getUint8(r++);return this.relativeOffset+=e,t},F.prototype.parseList=function(e,t){t||(t=e,e=this.parseUShort());for(var a=new Array(e),r=0;r<e;r++)a[r]=t.call(this);return a},F.prototype.parseList32=function(e,t){t||(t=e,e=this.parseULong());for(var a=new Array(e),r=0;r<e;r++)a[r]=t.call(this);return a},F.prototype.parseRecordList=function(e,t){t||(t=e,e=this.parseUShort());for(var a=new Array(e),r=Object.keys(t),n=0;n<e;n++){for(var i={},o=0;o<r.length;o++){var s=r[o],l=t[s];i[s]=l.call(this)}a[n]=i}return a},F.prototype.parseRecordList32=function(e,t){t||(t=e,e=this.parseULong());for(var a=new Array(e),r=Object.keys(t),n=0;n<e;n++){for(var i={},o=0;o<r.length;o++){var s=r[o],l=t[s];i[s]=l.call(this)}a[n]=i}return a},F.prototype.parseStruct=function(e){if("function"===typeof e)return e.call(this);for(var t=Object.keys(e),a={},r=0;r<t.length;r++){var n=t[r],i=e[n];a[n]=i.call(this)}return a},F.prototype.parseValueRecord=function(e){if(void 0===e&&(e=this.parseUShort()),0!==e){var t={};return 1&e&&(t.xPlacement=this.parseShort()),2&e&&(t.yPlacement=this.parseShort()),4&e&&(t.xAdvance=this.parseShort()),8&e&&(t.yAdvance=this.parseShort()),16&e&&(t.xPlaDevice=void 0,this.parseShort()),32&e&&(t.yPlaDevice=void 0,this.parseShort()),64&e&&(t.xAdvDevice=void 0,this.parseShort()),128&e&&(t.yAdvDevice=void 0,this.parseShort()),t}},F.prototype.parseValueRecordList=function(){for(var e=this.parseUShort(),t=this.parseUShort(),a=new Array(t),r=0;r<t;r++)a[r]=this.parseValueRecord(e);return a},F.prototype.parsePointer=function(e){var t=this.parseOffset16();if(t>0)return new F(this.data,this.offset+t).parseStruct(e)},F.prototype.parsePointer32=function(e){var t=this.parseOffset32();if(t>0)return new F(this.data,this.offset+t).parseStruct(e)},F.prototype.parseListOfLists=function(e){for(var t=this.parseOffset16List(),a=t.length,r=this.relativeOffset,n=new Array(a),i=0;i<a;i++){var o=t[i];if(0!==o)if(this.relativeOffset=o,e){for(var s=this.parseOffset16List(),l=new Array(s.length),c=0;c<s.length;c++)this.relativeOffset=o+s[c],l[c]=e.call(this);n[i]=l}else n[i]=this.parseUShortList();else n[i]=void 0}return this.relativeOffset=r,n},F.prototype.parseCoverage=function(){var e=this.offset+this.relativeOffset,t=this.parseUShort(),a=this.parseUShort();if(1===t)return{format:1,glyphs:this.parseUShortList(a)};if(2===t){for(var r=new Array(a),n=0;n<a;n++)r[n]={start:this.parseUShort(),end:this.parseUShort(),index:this.parseUShort()};return{format:2,ranges:r}}throw new Error("0x"+e.toString(16)+": Coverage format must be 1 or 2.")},F.prototype.parseClassDef=function(){var e=this.offset+this.relativeOffset,t=this.parseUShort();if(1===t)return{format:1,startGlyph:this.parseUShort(),classes:this.parseUShortList()};if(2===t)return{format:2,ranges:this.parseRecordList({start:F.uShort,end:F.uShort,classId:F.uShort})};throw new Error("0x"+e.toString(16)+": ClassDef format must be 1 or 2.")},F.list=function(e,t){return function(){return this.parseList(e,t)}},F.list32=function(e,t){return function(){return this.parseList32(e,t)}},F.recordList=function(e,t){return function(){return this.parseRecordList(e,t)}},F.recordList32=function(e,t){return function(){return this.parseRecordList32(e,t)}},F.pointer=function(e){return function(){return this.parsePointer(e)}},F.pointer32=function(e){return function(){return this.parsePointer32(e)}},F.tag=F.prototype.parseTag,F.byte=F.prototype.parseByte,F.uShort=F.offset16=F.prototype.parseUShort,F.uShortList=F.prototype.parseUShortList,F.uLong=F.offset32=F.prototype.parseULong,F.uLongList=F.prototype.parseULongList,F.struct=F.prototype.parseStruct,F.coverage=F.prototype.parseCoverage,F.classDef=F.prototype.parseClassDef;var U={reserved:F.uShort,reqFeatureIndex:F.uShort,featureIndexes:F.uShortList};F.prototype.parseScriptList=function(){return this.parsePointer(F.recordList({tag:F.tag,script:F.pointer({defaultLangSys:F.pointer(U),langSysRecords:F.recordList({tag:F.tag,langSys:F.pointer(U)})})}))||[]},F.prototype.parseFeatureList=function(){return this.parsePointer(F.recordList({tag:F.tag,feature:F.pointer({featureParams:F.offset16,lookupListIndexes:F.uShortList})}))||[]},F.prototype.parseLookupList=function(e){return this.parsePointer(F.list(F.pointer((function(){var t=this.parseUShort();p.argument(1<=t&&t<=9,"GPOS/GSUB lookup type "+t+" unknown.");var a=this.parseUShort(),r=16&a;return{lookupType:t,lookupFlag:a,subtables:this.parseList(F.pointer(e[t])),markFilteringSet:r?this.parseUShort():void 0}}))))||[]},F.prototype.parseFeatureVariationsList=function(){return this.parsePointer32((function(){var e=this.parseUShort(),t=this.parseUShort();return p.argument(1===e&&t<1,"GPOS/GSUB feature variations table unknown."),this.parseRecordList32({conditionSetOffset:F.offset32,featureTableSubstitutionOffset:F.offset32})}))||[]};var V={getByte:T,getCard8:T,getUShort:L,getCard16:L,getShort:function(e,t){return e.getInt16(t,!1)},getULong:M,getFixed:B,getTag:function(e,t){for(var a="",r=t;r<t+4;r+=1)a+=String.fromCharCode(e.getInt8(r));return a},getOffset:function(e,t,a){for(var r=0,n=0;n<a;n+=1)r<<=8,r+=e.getUint8(t+n);return r},getBytes:function(e,t,a){for(var r=[],n=t;n<a;n+=1)r.push(e.getUint8(n));return r},bytesToString:function(e){for(var t="",a=0;a<e.length;a+=1)t+=String.fromCharCode(e[a]);return t},Parser:F};function G(e,t,a){e.segments.push({end:t,start:t,delta:-(t-a),offset:0,glyphIndex:a})}var q={parse:function(e,t){var a={};a.version=V.getUShort(e,t),p.argument(0===a.version,"cmap table version should be 0."),a.numTables=V.getUShort(e,t+2);for(var r=-1,n=a.numTables-1;n>=0;n-=1){var i=V.getUShort(e,t+4+8*n),o=V.getUShort(e,t+4+8*n+2);if(3===i&&(0===o||1===o||10===o)||0===i&&(0===o||1===o||2===o||3===o||4===o)){r=V.getULong(e,t+4+8*n+4);break}}if(-1===r)throw new Error("No valid cmap sub-tables found.");var s=new V.Parser(e,t+r);if(a.format=s.parseUShort(),12===a.format)!function(e,t){var a;t.parseUShort(),e.length=t.parseULong(),e.language=t.parseULong(),e.groupCount=a=t.parseULong(),e.glyphIndexMap={};for(var r=0;r<a;r+=1)for(var n=t.parseULong(),i=t.parseULong(),o=t.parseULong(),s=n;s<=i;s+=1)e.glyphIndexMap[s]=o,o++}(a,s);else{if(4!==a.format)throw new Error("Only format 4 and 12 cmap tables are supported (found format "+a.format+").");!function(e,t,a,r,n){var i;e.length=t.parseUShort(),e.language=t.parseUShort(),e.segCount=i=t.parseUShort()>>1,t.skip("uShort",3),e.glyphIndexMap={};for(var o=new V.Parser(a,r+n+14),s=new V.Parser(a,r+n+16+2*i),l=new V.Parser(a,r+n+16+4*i),c=new V.Parser(a,r+n+16+6*i),u=r+n+16+8*i,d=0;d<i-1;d+=1)for(var p=void 0,m=o.parseUShort(),h=s.parseUShort(),g=l.parseShort(),f=c.parseUShort(),v=h;v<=m;v+=1)0!==f?(u=c.offset+c.relativeOffset-2,u+=f,u+=2*(v-h),0!==(p=V.getUShort(a,u))&&(p=p+g&65535)):p=v+g&65535,e.glyphIndexMap[v]=p}(a,s,e,t,r)}return a},make:function(e){var t,a=!0;for(t=e.length-1;t>0;t-=1){if(e.get(t).unicode>65535){console.log("Adding CMAP format 12 (needed!)"),a=!1;break}}var r=[{name:"version",type:"USHORT",value:0},{name:"numTables",type:"USHORT",value:a?1:2},{name:"platformID",type:"USHORT",value:3},{name:"encodingID",type:"USHORT",value:1},{name:"offset",type:"ULONG",value:a?12:20}];a||(r=r.concat([{name:"cmap12PlatformID",type:"USHORT",value:3},{name:"cmap12EncodingID",type:"USHORT",value:10},{name:"cmap12Offset",type:"ULONG",value:0}])),r=r.concat([{name:"format",type:"USHORT",value:4},{name:"cmap4Length",type:"USHORT",value:0},{name:"language",type:"USHORT",value:0},{name:"segCountX2",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]);var n=new R.Table("cmap",r);for(n.segments=[],t=0;t<e.length;t+=1){for(var i=e.get(t),o=0;o<i.unicodes.length;o+=1)G(n,i.unicodes[o],t);n.segments=n.segments.sort((function(e,t){return e.start-t.start}))}!function(e){e.segments.push({end:65535,start:65535,delta:1,offset:0})}(n);var s=n.segments.length,l=0,c=[],u=[],d=[],p=[],m=[],h=[];for(t=0;t<s;t+=1){var g=n.segments[t];g.end<=65535&&g.start<=65535?(c=c.concat({name:"end_"+t,type:"USHORT",value:g.end}),u=u.concat({name:"start_"+t,type:"USHORT",value:g.start}),d=d.concat({name:"idDelta_"+t,type:"SHORT",value:g.delta}),p=p.concat({name:"idRangeOffset_"+t,type:"USHORT",value:g.offset}),void 0!==g.glyphId&&(m=m.concat({name:"glyph_"+t,type:"USHORT",value:g.glyphId}))):l+=1,a||void 0===g.glyphIndex||(h=(h=(h=h.concat({name:"cmap12Start_"+t,type:"ULONG",value:g.start})).concat({name:"cmap12End_"+t,type:"ULONG",value:g.end})).concat({name:"cmap12Glyph_"+t,type:"ULONG",value:g.glyphIndex}))}if(n.segCountX2=2*(s-l),n.searchRange=2*Math.pow(2,Math.floor(Math.log(s-l)/Math.log(2))),n.entrySelector=Math.log(n.searchRange/2)/Math.log(2),n.rangeShift=n.segCountX2-n.searchRange,n.fields=n.fields.concat(c),n.fields.push({name:"reservedPad",type:"USHORT",value:0}),n.fields=n.fields.concat(u),n.fields=n.fields.concat(d),n.fields=n.fields.concat(p),n.fields=n.fields.concat(m),n.cmap4Length=14+2*c.length+2+2*u.length+2*d.length+2*p.length+2*m.length,!a){var f=16+4*h.length;n.cmap12Offset=20+n.cmap4Length,n.fields=n.fields.concat([{name:"cmap12Format",type:"USHORT",value:12},{name:"cmap12Reserved",type:"USHORT",value:0},{name:"cmap12Length",type:"ULONG",value:f},{name:"cmap12Language",type:"ULONG",value:0},{name:"cmap12nGroups",type:"ULONG",value:h.length/3}]),n.fields=n.fields.concat(h)}return n}},H=[".notdef","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","endash","dagger","daggerdbl","periodcentered","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","questiondown","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","ring","cedilla","hungarumlaut","ogonek","caron","emdash","AE","ordfeminine","Lslash","Oslash","OE","ordmasculine","ae","dotlessi","lslash","oslash","oe","germandbls","onesuperior","logicalnot","mu","trademark","Eth","onehalf","plusminus","Thorn","onequarter","divide","brokenbar","degree","thorn","threequarters","twosuperior","registered","minus","eth","multiply","threesuperior","copyright","Aacute","Acircumflex","Adieresis","Agrave","Aring","Atilde","Ccedilla","Eacute","Ecircumflex","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Ntilde","Oacute","Ocircumflex","Odieresis","Ograve","Otilde","Scaron","Uacute","Ucircumflex","Udieresis","Ugrave","Yacute","Ydieresis","Zcaron","aacute","acircumflex","adieresis","agrave","aring","atilde","ccedilla","eacute","ecircumflex","edieresis","egrave","iacute","icircumflex","idieresis","igrave","ntilde","oacute","ocircumflex","odieresis","ograve","otilde","scaron","uacute","ucircumflex","udieresis","ugrave","yacute","ydieresis","zcaron","exclamsmall","Hungarumlautsmall","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","266 ff","onedotenleader","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","commasuperior","threequartersemdash","periodsuperior","questionsmall","asuperior","bsuperior","centsuperior","dsuperior","esuperior","isuperior","lsuperior","msuperior","nsuperior","osuperior","rsuperior","ssuperior","tsuperior","ff","ffi","ffl","parenleftinferior","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","exclamdownsmall","centoldstyle","Lslashsmall","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","Dotaccentsmall","Macronsmall","figuredash","hypheninferior","Ogoneksmall","Ringsmall","Cedillasmall","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","zerosuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall","001.000","001.001","001.002","001.003","Black","Bold","Book","Light","Medium","Regular","Roman","Semibold"],z=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","","endash","dagger","daggerdbl","periodcentered","","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","","questiondown","","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","","ring","cedilla","","hungarumlaut","ogonek","caron","emdash","","","","","","","","","","","","","","","","","AE","","ordfeminine","","","","","Lslash","Oslash","OE","ordmasculine","","","","","","ae","","","","dotlessi","","","lslash","oslash","oe","germandbls"],W=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclamsmall","Hungarumlautsmall","","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","comma","hyphen","period","fraction","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","colon","semicolon","commasuperior","threequartersemdash","periodsuperior","questionsmall","","asuperior","bsuperior","centsuperior","dsuperior","esuperior","","","isuperior","","","lsuperior","msuperior","nsuperior","osuperior","","","rsuperior","ssuperior","tsuperior","","ff","fi","fl","ffi","ffl","parenleftinferior","","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdownsmall","centoldstyle","Lslashsmall","","","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","","Dotaccentsmall","","","Macronsmall","","","figuredash","hypheninferior","","","Ogoneksmall","Ringsmall","Cedillasmall","","","","onequarter","onehalf","threequarters","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","","","zerosuperior","onesuperior","twosuperior","threesuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall"],Q=[".notdef",".null","nonmarkingreturn","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quotesingle","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","grave","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","Adieresis","Aring","Ccedilla","Eacute","Ntilde","Odieresis","Udieresis","aacute","agrave","acircumflex","adieresis","atilde","aring","ccedilla","eacute","egrave","ecircumflex","edieresis","iacute","igrave","icircumflex","idieresis","ntilde","oacute","ograve","ocircumflex","odieresis","otilde","uacute","ugrave","ucircumflex","udieresis","dagger","degree","cent","sterling","section","bullet","paragraph","germandbls","registered","copyright","trademark","acute","dieresis","notequal","AE","Oslash","infinity","plusminus","lessequal","greaterequal","yen","mu","partialdiff","summation","product","pi","integral","ordfeminine","ordmasculine","Omega","ae","oslash","questiondown","exclamdown","logicalnot","radical","florin","approxequal","Delta","guillemotleft","guillemotright","ellipsis","nonbreakingspace","Agrave","Atilde","Otilde","OE","oe","endash","emdash","quotedblleft","quotedblright","quoteleft","quoteright","divide","lozenge","ydieresis","Ydieresis","fraction","currency","guilsinglleft","guilsinglright","fi","fl","daggerdbl","periodcentered","quotesinglbase","quotedblbase","perthousand","Acircumflex","Ecircumflex","Aacute","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Oacute","Ocircumflex","apple","Ograve","Uacute","Ucircumflex","Ugrave","dotlessi","circumflex","tilde","macron","breve","dotaccent","ring","cedilla","hungarumlaut","ogonek","caron","Lslash","lslash","Scaron","scaron","Zcaron","zcaron","brokenbar","Eth","eth","Yacute","yacute","Thorn","thorn","minus","multiply","onesuperior","twosuperior","threesuperior","onehalf","onequarter","threequarters","franc","Gbreve","gbreve","Idotaccent","Scedilla","scedilla","Cacute","cacute","Ccaron","ccaron","dcroat"];function J(e){this.font=e}function Y(e){this.cmap=e}function Z(e,t){this.encoding=e,this.charset=t}function X(e){switch(e.version){case 1:this.names=Q.slice();break;case 2:this.names=new Array(e.numberOfGlyphs);for(var t=0;t<e.numberOfGlyphs;t++)e.glyphNameIndex[t]<Q.length?this.names[t]=Q[e.glyphNameIndex[t]]:this.names[t]=e.names[e.glyphNameIndex[t]-Q.length];break;case 2.5:this.names=new Array(e.numberOfGlyphs);for(var a=0;a<e.numberOfGlyphs;a++)this.names[a]=Q[a+e.glyphNameIndex[a]];break;case 3:default:this.names=[]}}function K(e,t){t.lowMemory?function(e){e._IndexToUnicodeMap={};for(var t=e.tables.cmap.glyphIndexMap,a=Object.keys(t),r=0;r<a.length;r+=1){var n=a[r],i=t[n];void 0===e._IndexToUnicodeMap[i]?e._IndexToUnicodeMap[i]={unicodes:[parseInt(n)]}:e._IndexToUnicodeMap[i].unicodes.push(parseInt(n))}}(e):function(e){for(var t,a=e.tables.cmap.glyphIndexMap,r=Object.keys(a),n=0;n<r.length;n+=1){var i=r[n],o=a[i];(t=e.glyphs.get(o)).addUnicode(parseInt(i))}for(var s=0;s<e.glyphs.length;s+=1)t=e.glyphs.get(s),e.cffEncoding?e.isCIDFont?t.name="gid"+s:t.name=e.cffEncoding.charset[s]:e.glyphNames.names&&(t.name=e.glyphNames.glyphIndexToName(s))}(e)}J.prototype.charToGlyphIndex=function(e){var t=e.codePointAt(0),a=this.font.glyphs;if(a)for(var r=0;r<a.length;r+=1)for(var n=a.get(r),i=0;i<n.unicodes.length;i+=1)if(n.unicodes[i]===t)return r;return null},Y.prototype.charToGlyphIndex=function(e){return this.cmap.glyphIndexMap[e.codePointAt(0)]||0},Z.prototype.charToGlyphIndex=function(e){var t=e.codePointAt(0),a=this.encoding[t];return this.charset.indexOf(a)},X.prototype.nameToGlyphIndex=function(e){return this.names.indexOf(e)},X.prototype.glyphIndexToName=function(e){return this.names[e]};var $={line:function(e,t,a,r,n){e.beginPath(),e.moveTo(t,a),e.lineTo(r,n),e.stroke()}};function ee(e){this.bindConstructorValues(e)}ee.prototype.bindConstructorValues=function(e){this.index=e.index||0,this.name=e.name||null,this.unicode=e.unicode||void 0,this.unicodes=e.unicodes||void 0!==e.unicode?[e.unicode]:[],e.xMin&&(this.xMin=e.xMin),e.yMin&&(this.yMin=e.yMin),e.xMax&&(this.xMax=e.xMax),e.yMax&&(this.yMax=e.yMax),e.advanceWidth&&(this.advanceWidth=e.advanceWidth),Object.defineProperty(this,"path",function(e,t){var a=t||new c;return{configurable:!0,get:function(){return"function"===typeof a&&(a=a()),a},set:function(e){a=e}}}(0,e.path))},ee.prototype.addUnicode=function(e){0===this.unicodes.length&&(this.unicode=e),this.unicodes.push(e)},ee.prototype.getBoundingBox=function(){return this.path.getBoundingBox()},ee.prototype.getPath=function(e,t,a,r,n,i){var o,s;e=void 0!==e?e:0,t=void 0!==t?t:0,a=void 0!==a?a:72,r||(r={});var l=r.xScale,u=r.yScale;if(r.hinting&&n&&n.hinting&&(s=this.path&&n.hinting.exec(this,a)),s)o=n.hinting.getCommands(s),e=Math.round(e),t=Math.round(t),l=u=1;else{o=this.path.commands;var d=1/(this.path.unitsPerEm||1e3)*a;void 0===l&&(l=d),void 0===u&&(u=d)}var p=new c;p.width=this.advanceWidth||0,p.height=this.yMax-this.yMin||0,p.linenumber=i,isNaN(d)||(p.width*=d,p.height*=d),p.width>100&&(p.width=8);for(var m=0;m<o.length;m+=1){var h=o[m];"M"===h.type?(p.moveTo(e+h.x*l,t+-h.y*u),p.startx=e+h.x*d,p.starty=t+-h.y*d):"L"===h.type?p.lineTo(e+h.x*l,t+-h.y*u):"Q"===h.type?p.quadraticCurveTo(e+h.x1*l,t+-h.y1*u,e+h.x*l,t+-h.y*u):"C"===h.type?p.curveTo(e+h.x1*l,t+-h.y1*u,e+h.x2*l,t+-h.y2*u,e+h.x*l,t+-h.y*u):"Z"===h.type&&p.closePath()}return"Z"===p&&(p=" "),p},ee.prototype.getContours=function(){if(void 0===this.points)return[];for(var e=[],t=[],a=0;a<this.points.length;a+=1){var r=this.points[a];t.push(r),r.lastPointOfContour&&(e.push(t),t=[])}return p.argument(0===t.length,"There are still points left in the current contour."),e},ee.prototype.getMetrics=function(){for(var e=this.path.commands,t=[],a=[],r=0;r<e.length;r+=1){var n=e[r];"Z"!==n.type&&(t.push(n.x),a.push(n.y)),"Q"!==n.type&&"C"!==n.type||(t.push(n.x1),a.push(n.y1)),"C"===n.type&&(t.push(n.x2),a.push(n.y2))}var i={xMin:Math.min.apply(null,t),yMin:Math.min.apply(null,a),xMax:Math.max.apply(null,t),yMax:Math.max.apply(null,a),leftSideBearing:this.leftSideBearing};return isFinite(i.xMin)||(i.xMin=0),isFinite(i.xMax)||(i.xMax=this.advanceWidth),isFinite(i.yMin)||(i.yMin=0),isFinite(i.yMax)||(i.yMax=0),i.rightSideBearing=this.advanceWidth-i.leftSideBearing-(i.xMax-i.xMin),i},ee.prototype.draw=function(e,t,a,r,n){this.getPath(t,a,r,n).draw(e)},ee.prototype.drawPoints=function(e,t,a,r){function n(t,a,r,n){var i=2*Math.PI;e.beginPath();for(var o=0;o<t.length;o+=1)e.moveTo(a+t[o].x*n,r+t[o].y*n),e.arc(a+t[o].x*n,r+t[o].y*n,2,0,i,!1);e.closePath(),e.fill()}t=void 0!==t?t:0,a=void 0!==a?a:0,r=void 0!==r?r:24;for(var i=1/this.path.unitsPerEm*r,o=[],s=[],l=this.path,c=0;c<l.commands.length;c+=1){var u=l.commands[c];void 0!==u.x&&o.push({x:u.x,y:-u.y}),void 0!==u.x1&&s.push({x:u.x1,y:-u.y1}),void 0!==u.x2&&s.push({x:u.x2,y:-u.y2})}e.fillStyle="blue",n(o,t,a,i),e.fillStyle="red",n(s,t,a,i)},ee.prototype.drawMetrics=function(e,t,a,r){var n;t=void 0!==t?t:0,a=void 0!==a?a:0,r=void 0!==r?r:24,n=1/this.path.unitsPerEm*r,e.lineWidth=1,e.strokeStyle="black",$.line(e,t,-1e4,t,1e4),$.line(e,-1e4,a,1e4,a);var i=this.xMin||0,o=this.yMin||0,s=this.xMax||0,l=this.yMax||0,c=this.advanceWidth||0;e.strokeStyle="blue",$.line(e,t+i*n,-1e4,t+i*n,1e4),$.line(e,t+s*n,-1e4,t+s*n,1e4),$.line(e,-1e4,a+-o*n,1e4,a+-o*n),$.line(e,-1e4,a+-l*n,1e4,a+-l*n),e.strokeStyle="green",$.line(e,t+c*n,-1e4,t+c*n,1e4)};var te=ee;function ae(e,t,a){Object.defineProperty(e,t,{get:function(){return e[a]},set:function(t){e[a]=t},enumerable:!0,configurable:!0})}function re(e,t){if(this.font=e,this.glyphs={},Array.isArray(t))for(var a=0;a<t.length;a++){var r=t[a];r.path.unitsPerEm=e.unitsPerEm,this.glyphs[a]=r}this.length=t&&t.length||0}re.prototype.get=function(e){if(void 0===this.glyphs[e]){this.font._push(e),"function"===typeof this.glyphs[e]&&(this.glyphs[e]=this.glyphs[e]());var t=this.glyphs[e],a=this.font._IndexToUnicodeMap[e];if(a)for(var r=0;r<a.unicodes.length;r++)t.addUnicode(a.unicodes[r]);this.font.cffEncoding?this.font.isCIDFont?t.name="gid"+e:t.name=this.font.cffEncoding.charset[e]:this.font.glyphNames.names&&(t.name=this.font.glyphNames.glyphIndexToName(e)),this.glyphs[e].advanceWidth=this.font._hmtxTableData[e].advanceWidth,this.glyphs[e].leftSideBearing=this.font._hmtxTableData[e].leftSideBearing}else"function"===typeof this.glyphs[e]&&(this.glyphs[e]=this.glyphs[e]());return this.glyphs[e]},re.prototype.push=function(e,t){this.glyphs[e]=t,this.length++};var ne={GlyphSet:re,glyphLoader:function(e,t){return new te({index:t,font:e})},ttfGlyphLoader:function(e,t,a,r,n,i){return function(){var o=new te({index:t,font:e});return o.path=function(){a(o,r,n);var t=i(e.glyphs,o);return t.unitsPerEm=e.unitsPerEm,t},ae(o,"xMin","_xMin"),ae(o,"xMax","_xMax"),ae(o,"yMin","_yMin"),ae(o,"yMax","_yMax"),o}},cffGlyphLoader:function(e,t,a,r){return function(){var n=new te({index:t,font:e});return n.path=function(){var t=a(e,n,r);return t.unitsPerEm=e.unitsPerEm,t},n}}};function ie(e,t){if(e===t)return!0;if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;for(var a=0;a<e.length;a+=1)if(!ie(e[a],t[a]))return!1;return!0}return!1}function oe(e){return e.length<1240?107:e.length<33900?1131:32768}function se(e,t,a){var r,n,i=[],o=[],s=V.getCard16(e,t);if(0!==s){var l=V.getByte(e,t+2);r=t+(s+1)*l+2;for(var c=t+3,u=0;u<s+1;u+=1)i.push(V.getOffset(e,c,l)),c+=l;n=r+i[s]}else n=t+2;for(var d=0;d<i.length-1;d+=1){var p=V.getBytes(e,r+i[d],r+i[d+1]);a&&(p=a(p)),o.push(p)}return{objects:o,startOffset:t,endOffset:n}}function le(e,t){if(28===t)return e.parseByte()<<8|e.parseByte();if(29===t)return e.parseByte()<<24|e.parseByte()<<16|e.parseByte()<<8|e.parseByte();if(30===t)return function(e){for(var t="",a=["0","1","2","3","4","5","6","7","8","9",".","E","E-",null,"-"];;){var r=e.parseByte(),n=r>>4,i=15&r;if(15===n)break;if(t+=a[n],15===i)break;t+=a[i]}return parseFloat(t)}(e);if(t>=32&&t<=246)return t-139;if(t>=247&&t<=250)return 256*(t-247)+e.parseByte()+108;if(t>=251&&t<=254)return 256*-(t-251)-e.parseByte()-108;throw new Error("Invalid b0 "+t)}function ce(e,t,a){t=void 0!==t?t:0;var r=new V.Parser(e,t),n=[],i=[];for(a=void 0!==a?a:e.length;r.relativeOffset<a;){var o=r.parseByte();o<=21?(12===o&&(o=1200+r.parseByte()),n.push([o,i]),i=[]):i.push(le(r,o))}return function(e){for(var t={},a=0;a<e.length;a+=1){var r=e[a][0],n=e[a][1],i=void 0;if(i=1===n.length?n[0]:n,t.hasOwnProperty(r)&&!isNaN(t[r]))throw new Error("Object "+t+" already has key "+r);t[r]=i}return t}(n)}function ue(e,t){return t=t<=390?H[t]:e[t-391]}function de(e,t,a){for(var r,n={},i=0;i<t.length;i+=1){var o=t[i];if(Array.isArray(o.type)){var s=[];s.length=o.type.length;for(var l=0;l<o.type.length;l++)void 0===(r=void 0!==e[o.op]?e[o.op][l]:void 0)&&(r=void 0!==o.value&&void 0!==o.value[l]?o.value[l]:null),"SID"===o.type[l]&&(r=ue(a,r)),s[l]=r;n[o.name]=s}else void 0===(r=e[o.op])&&(r=void 0!==o.value?o.value:null),"SID"===o.type&&(r=ue(a,r)),n[o.name]=r}return n}var pe=[{name:"version",op:0,type:"SID"},{name:"notice",op:1,type:"SID"},{name:"copyright",op:1200,type:"SID"},{name:"fullName",op:2,type:"SID"},{name:"familyName",op:3,type:"SID"},{name:"weight",op:4,type:"SID"},{name:"isFixedPitch",op:1201,type:"number",value:0},{name:"italicAngle",op:1202,type:"number",value:0},{name:"underlinePosition",op:1203,type:"number",value:-100},{name:"underlineThickness",op:1204,type:"number",value:50},{name:"paintType",op:1205,type:"number",value:0},{name:"charstringType",op:1206,type:"number",value:2},{name:"fontMatrix",op:1207,type:["real","real","real","real","real","real"],value:[.001,0,0,.001,0,0]},{name:"uniqueId",op:13,type:"number"},{name:"fontBBox",op:5,type:["number","number","number","number"],value:[0,0,0,0]},{name:"strokeWidth",op:1208,type:"number",value:0},{name:"xuid",op:14,type:[],value:null},{name:"charset",op:15,type:"offset",value:0},{name:"encoding",op:16,type:"offset",value:0},{name:"charStrings",op:17,type:"offset",value:0},{name:"private",op:18,type:["number","offset"],value:[0,0]},{name:"ros",op:1230,type:["SID","SID","number"]},{name:"cidFontVersion",op:1231,type:"number",value:0},{name:"cidFontRevision",op:1232,type:"number",value:0},{name:"cidFontType",op:1233,type:"number",value:0},{name:"cidCount",op:1234,type:"number",value:8720},{name:"uidBase",op:1235,type:"number"},{name:"fdArray",op:1236,type:"offset"},{name:"fdSelect",op:1237,type:"offset"},{name:"fontName",op:1238,type:"SID"}],me=[{name:"subrs",op:19,type:"offset",value:0},{name:"defaultWidthX",op:20,type:"number",value:0},{name:"nominalWidthX",op:21,type:"number",value:0}];function he(e,t){return de(ce(e,0,e.byteLength),pe,t)}function ge(e,t,a,r){return de(ce(e,t,a),me,r)}function fe(e,t,a,r){for(var n=[],i=0;i<a.length;i+=1){var o=he(new DataView(new Uint8Array(a[i]).buffer),r);o._subrs=[],o._subrsBias=0;var s=o.private[0],l=o.private[1];if(0!==s&&0!==l){var c=ge(e,l+t,s,r);if(o._defaultWidthX=c.defaultWidthX,o._nominalWidthX=c.nominalWidthX,0!==c.subrs){var u=se(e,l+c.subrs+t);o._subrs=u.objects,o._subrsBias=oe(o._subrs)}o._privateDict=c}n.push(o)}return n}function ve(e,t,a){var r,n,i,o,s,l,u,d,p=new c,m=[],h=0,g=!1,f=!1,v=0,b=0;if(e.isCIDFont){var A=e.tables.cff.topDict._fdSelect[t.index],y=e.tables.cff.topDict._fdArray[A];s=y._subrs,l=y._subrsBias,u=y._defaultWidthX,d=y._nominalWidthX}else s=e.tables.cff.topDict._subrs,l=e.tables.cff.topDict._subrsBias,u=e.tables.cff.topDict._defaultWidthX,d=e.tables.cff.topDict._nominalWidthX;var _=u;function E(e,t){f&&p.closePath(),p.moveTo(e,t),f=!0}function S(){m.length%2!==0&&!g&&(_=m.shift()+d),h+=m.length>>1,m.length=0,g=!0}return function a(c){for(var u,A,y,C,x,w,k,I,N,O,P,D,R=0;R<c.length;){var T=c[R];switch(R+=1,T){case 1:case 3:S();break;case 4:m.length>1&&!g&&(_=m.shift()+d,g=!0),b+=m.pop(),E(v,b);break;case 5:for(;m.length>0;)v+=m.shift(),b+=m.shift(),p.lineTo(v,b);break;case 6:for(;m.length>0&&(v+=m.shift(),p.lineTo(v,b),0!==m.length);)b+=m.shift(),p.lineTo(v,b);break;case 7:for(;m.length>0&&(b+=m.shift(),p.lineTo(v,b),0!==m.length);)v+=m.shift(),p.lineTo(v,b);break;case 8:for(;m.length>0;)r=v+m.shift(),n=b+m.shift(),i=r+m.shift(),o=n+m.shift(),v=i+m.shift(),b=o+m.shift(),p.curveTo(r,n,i,o,v,b);break;case 10:x=m.pop()+l,(w=s[x])&&a(w);break;case 11:return;case 12:switch(T=c[R],R+=1,T){case 35:r=v+m.shift(),n=b+m.shift(),i=r+m.shift(),o=n+m.shift(),k=i+m.shift(),I=o+m.shift(),N=k+m.shift(),O=I+m.shift(),P=N+m.shift(),D=O+m.shift(),v=P+m.shift(),b=D+m.shift(),m.shift(),p.curveTo(r,n,i,o,k,I),p.curveTo(N,O,P,D,v,b);break;case 34:r=v+m.shift(),n=b,i=r+m.shift(),o=n+m.shift(),k=i+m.shift(),I=o,N=k+m.shift(),O=o,P=N+m.shift(),D=b,v=P+m.shift(),p.curveTo(r,n,i,o,k,I),p.curveTo(N,O,P,D,v,b);break;case 36:r=v+m.shift(),n=b+m.shift(),i=r+m.shift(),o=n+m.shift(),k=i+m.shift(),I=o,N=k+m.shift(),O=o,P=N+m.shift(),D=O+m.shift(),v=P+m.shift(),p.curveTo(r,n,i,o,k,I),p.curveTo(N,O,P,D,v,b);break;case 37:r=v+m.shift(),n=b+m.shift(),i=r+m.shift(),o=n+m.shift(),k=i+m.shift(),I=o+m.shift(),N=k+m.shift(),O=I+m.shift(),P=N+m.shift(),D=O+m.shift(),Math.abs(P-v)>Math.abs(D-b)?v=P+m.shift():b=D+m.shift(),p.curveTo(r,n,i,o,k,I),p.curveTo(N,O,P,D,v,b);break;default:console.log("Glyph "+t.index+": unknown operator 1200"+T),m.length=0}break;case 14:m.length>0&&!g&&(_=m.shift()+d,g=!0),f&&(p.closePath(),f=!1);break;case 18:S();break;case 19:case 20:S(),R+=h+7>>3;break;case 21:m.length>2&&!g&&(_=m.shift()+d,g=!0),b+=m.pop(),E(v+=m.pop(),b);break;case 22:m.length>1&&!g&&(_=m.shift()+d,g=!0),E(v+=m.pop(),b);break;case 23:S();break;case 24:for(;m.length>2;)r=v+m.shift(),n=b+m.shift(),i=r+m.shift(),o=n+m.shift(),v=i+m.shift(),b=o+m.shift(),p.curveTo(r,n,i,o,v,b);v+=m.shift(),b+=m.shift(),p.lineTo(v,b);break;case 25:for(;m.length>6;)v+=m.shift(),b+=m.shift(),p.lineTo(v,b);r=v+m.shift(),n=b+m.shift(),i=r+m.shift(),o=n+m.shift(),v=i+m.shift(),b=o+m.shift(),p.curveTo(r,n,i,o,v,b);break;case 26:for(m.length%2&&(v+=m.shift());m.length>0;)r=v,n=b+m.shift(),i=r+m.shift(),o=n+m.shift(),v=i,b=o+m.shift(),p.curveTo(r,n,i,o,v,b);break;case 27:for(m.length%2&&(b+=m.shift());m.length>0;)r=v+m.shift(),n=b,i=r+m.shift(),o=n+m.shift(),v=i+m.shift(),b=o,p.curveTo(r,n,i,o,v,b);break;case 28:u=c[R],A=c[R+1],m.push((u<<24|A<<16)>>16),R+=2;break;case 29:x=m.pop()+e.gsubrsBias,(w=e.gsubrs[x])&&a(w);break;case 30:for(;m.length>0&&(r=v,n=b+m.shift(),i=r+m.shift(),o=n+m.shift(),v=i+m.shift(),b=o+(1===m.length?m.shift():0),p.curveTo(r,n,i,o,v,b),0!==m.length);)r=v+m.shift(),n=b,i=r+m.shift(),o=n+m.shift(),b=o+m.shift(),v=i+(1===m.length?m.shift():0),p.curveTo(r,n,i,o,v,b);break;case 31:for(;m.length>0&&(r=v+m.shift(),n=b,i=r+m.shift(),o=n+m.shift(),b=o+m.shift(),v=i+(1===m.length?m.shift():0),p.curveTo(r,n,i,o,v,b),0!==m.length);)r=v,n=b+m.shift(),i=r+m.shift(),o=n+m.shift(),v=i+m.shift(),b=o+(1===m.length?m.shift():0),p.curveTo(r,n,i,o,v,b);break;default:T<32?console.log("Glyph "+t.index+": unknown operator "+T):T<247?m.push(T-139):T<251?(u=c[R],R+=1,m.push(256*(T-247)+u+108)):T<255?(u=c[R],R+=1,m.push(256*-(T-251)-u-108)):(u=c[R],A=c[R+1],y=c[R+2],C=c[R+3],R+=4,m.push((u<<24|A<<16|y<<8|C)/65536))}}}(a),t.advanceWidth=_,p}function be(e,t){var a,r=H.indexOf(e);return r>=0&&(a=r),(r=t.indexOf(e))>=0?a=r+H.length:(a=H.length+t.length,t.push(e)),a}function Ae(e,t,a){for(var r={},n=0;n<e.length;n+=1){var i=e[n],o=t[i.name];void 0===o||ie(o,i.value)||("SID"===i.type&&(o=be(o,a)),r[i.op]={name:i.name,type:i.type,value:o})}return r}function ye(e,t){var a=new R.Record("Top DICT",[{name:"dict",type:"DICT",value:{}}]);return a.dict=Ae(pe,e,t),a}function _e(e){var t=new R.Record("Top DICT INDEX",[{name:"topDicts",type:"INDEX",value:[]}]);return t.topDicts=[{name:"topDict_0",type:"TABLE",value:e}],t}function Ee(e){var t=[],a=e.path;t.push({name:"width",type:"NUMBER",value:e.advanceWidth});for(var r=0,n=0,i=0;i<a.commands.length;i+=1){var o=void 0,s=void 0,l=a.commands[i];if("Q"===l.type){l={type:"C",x:l.x,y:l.y,x1:1/3*r+2/3*l.x1,y1:1/3*n+2/3*l.y1,x2:1/3*l.x+2/3*l.x1,y2:1/3*l.y+2/3*l.y1}}if("M"===l.type)o=Math.round(l.x-r),s=Math.round(l.y-n),t.push({name:"dx",type:"NUMBER",value:o}),t.push({name:"dy",type:"NUMBER",value:s}),t.push({name:"rmoveto",type:"OP",value:21}),r=Math.round(l.x),n=Math.round(l.y);else if("L"===l.type)o=Math.round(l.x-r),s=Math.round(l.y-n),t.push({name:"dx",type:"NUMBER",value:o}),t.push({name:"dy",type:"NUMBER",value:s}),t.push({name:"rlineto",type:"OP",value:5}),r=Math.round(l.x),n=Math.round(l.y);else if("C"===l.type){var c=Math.round(l.x1-r),u=Math.round(l.y1-n),d=Math.round(l.x2-l.x1),p=Math.round(l.y2-l.y1);o=Math.round(l.x-l.x2),s=Math.round(l.y-l.y2),t.push({name:"dx1",type:"NUMBER",value:c}),t.push({name:"dy1",type:"NUMBER",value:u}),t.push({name:"dx2",type:"NUMBER",value:d}),t.push({name:"dy2",type:"NUMBER",value:p}),t.push({name:"dx",type:"NUMBER",value:o}),t.push({name:"dy",type:"NUMBER",value:s}),t.push({name:"rrcurveto",type:"OP",value:8}),r=Math.round(l.x),n=Math.round(l.y)}}return t.push({name:"endchar",type:"OP",value:14}),t}var Se={parse:function(e,t,a,r){a.tables.cff={};var n=function(e,t){var a={};return a.formatMajor=V.getCard8(e,t),a.formatMinor=V.getCard8(e,t+1),a.size=V.getCard8(e,t+2),a.offsetSize=V.getCard8(e,t+3),a.startOffset=t,a.endOffset=t+4,a}(e,t),i=se(e,n.endOffset,V.bytesToString),o=se(e,i.endOffset),s=se(e,o.endOffset,V.bytesToString),l=se(e,s.endOffset);a.gsubrs=l.objects,a.gsubrsBias=oe(a.gsubrs);var c=fe(e,t,o.objects,s.objects);if(1!==c.length)throw new Error("CFF table has too many fonts in 'FontSet' - count of fonts NameIndex.length = "+c.length);var u=c[0];if(a.tables.cff.topDict=u,u._privateDict&&(a.defaultWidthX=u._privateDict.defaultWidthX,a.nominalWidthX=u._privateDict.nominalWidthX),void 0!==u.ros[0]&&void 0!==u.ros[1]&&(a.isCIDFont=!0),a.isCIDFont){var d=u.fdArray,p=u.fdSelect;if(0===d||0===p)throw new Error("Font is marked as a CID font, but FDArray and/or FDSelect information is missing");var m=se(e,d+=t),h=fe(e,t,m.objects,s.objects);u._fdArray=h,p+=t,u._fdSelect=function(e,t,a,r){var n,i=[],o=new V.Parser(e,t),s=o.parseCard8();if(0===s)for(var l=0;l<a;l++){if((n=o.parseCard8())>=r)throw new Error("CFF table CID Font FDSelect has bad FD index value "+n+" (FD count "+r+")");i.push(n)}else{if(3!==s)throw new Error("CFF Table CID Font FDSelect table has unsupported format "+s);var c,u=o.parseCard16(),d=o.parseCard16();if(0!==d)throw new Error("CFF Table CID Font FDSelect format 3 range has bad initial GID "+d);for(var p=0;p<u;p++){if(n=o.parseCard8(),c=o.parseCard16(),n>=r)throw new Error("CFF table CID Font FDSelect has bad FD index value "+n+" (FD count "+r+")");if(c>a)throw new Error("CFF Table CID Font FDSelect format 3 range has bad GID "+c);for(;d<c;d++)i.push(n);d=c}if(c!==a)throw new Error("CFF Table CID Font FDSelect format 3 range has bad final GID "+c)}return i}(e,p,a.numGlyphs,h.length)}var g,f=t+u.private[1],v=ge(e,f,u.private[0],s.objects);if(a.defaultWidthX=v.defaultWidthX,a.nominalWidthX=v.nominalWidthX,0!==v.subrs){var b=f+v.subrs,A=se(e,b);a.subrs=A.objects,a.subrsBias=oe(a.subrs)}else a.subrs=[],a.subrsBias=0;r.lowMemory?(g=function(e,t){var a,r,n=[],i=V.getCard16(e,t);if(0!==i){var o=V.getByte(e,t+2);a=t+(i+1)*o+2;for(var s=t+3,l=0;l<i+1;l+=1)n.push(V.getOffset(e,s,o)),s+=o;r=a+n[i]}else r=t+2;return{offsets:n,startOffset:t,endOffset:r}}(e,t+u.charStrings),a.nGlyphs=g.offsets.length):(g=se(e,t+u.charStrings),a.nGlyphs=g.objects.length);var y=function(e,t,a,r){var n,i,o=new V.Parser(e,t);a-=1;var s=[".notdef"],l=o.parseCard8();if(0===l)for(var c=0;c<a;c+=1)n=o.parseSID(),s.push(ue(r,n));else if(1===l)for(;s.length<=a;){n=o.parseSID(),i=o.parseCard8();for(var u=0;u<=i;u+=1)s.push(ue(r,n)),n+=1}else{if(2!==l)throw new Error("Unknown charset format "+l);for(;s.length<=a;){n=o.parseSID(),i=o.parseCard16();for(var d=0;d<=i;d+=1)s.push(ue(r,n)),n+=1}}return s}(e,t+u.charset,a.nGlyphs,s.objects);if(0===u.encoding?a.cffEncoding=new Z(z,y):1===u.encoding?a.cffEncoding=new Z(W,y):a.cffEncoding=function(e,t,a){var r,n={},i=new V.Parser(e,t),o=i.parseCard8();if(0===o)for(var s=i.parseCard8(),l=0;l<s;l+=1)n[r=i.parseCard8()]=l;else{if(1!==o)throw new Error("Unknown encoding format "+o);var c=i.parseCard8();r=1;for(var u=0;u<c;u+=1)for(var d=i.parseCard8(),p=i.parseCard8(),m=d;m<=d+p;m+=1)n[m]=r,r+=1}return new Z(n,a)}(e,t+u.encoding,y),a.encoding=a.encoding||a.cffEncoding,a.glyphs=new ne.GlyphSet(a),r.lowMemory)a._push=function(r){var n=function(e,t,a,r,n){var i=V.getCard16(a,r),o=0;0!==i&&(o=r+(i+1)*V.getByte(a,r+2)+2);var s=V.getBytes(a,o+t[e],o+t[e+1]);return n&&(s=n(s)),s}(r,g.offsets,e,t+u.charStrings);a.glyphs.push(r,ne.cffGlyphLoader(a,r,ve,n))};else for(var _=0;_<a.nGlyphs;_+=1){var E=g.objects[_];a.glyphs.push(_,ne.cffGlyphLoader(a,_,ve,E))}},make:function(e,t){for(var a,r=new R.Table("CFF ",[{name:"header",type:"RECORD"},{name:"nameIndex",type:"RECORD"},{name:"topDictIndex",type:"RECORD"},{name:"stringIndex",type:"RECORD"},{name:"globalSubrIndex",type:"RECORD"},{name:"charsets",type:"RECORD"},{name:"charStringsIndex",type:"RECORD"},{name:"privateDict",type:"RECORD"}]),n=1/t.unitsPerEm,i={version:t.version,fullName:t.fullName,familyName:t.familyName,weight:t.weightName,fontBBox:t.fontBBox||[0,0,0,0],fontMatrix:[n,0,0,n,0,0],charset:999,encoding:0,charStrings:999,private:[0,999]},o=[],s=1;s<e.length;s+=1)a=e.get(s),o.push(a.name);var l=[];r.header=new R.Record("Header",[{name:"major",type:"Card8",value:1},{name:"minor",type:"Card8",value:0},{name:"hdrSize",type:"Card8",value:4},{name:"major",type:"Card8",value:1}]),r.nameIndex=function(e){var t=new R.Record("Name INDEX",[{name:"names",type:"INDEX",value:[]}]);t.names=[];for(var a=0;a<e.length;a+=1)t.names.push({name:"name_"+a,type:"NAME",value:e[a]});return t}([t.postScriptName]);var c=ye(i,l);r.topDictIndex=_e(c),r.globalSubrIndex=new R.Record("Global Subr INDEX",[{name:"subrs",type:"INDEX",value:[]}]),r.charsets=function(e,t){for(var a=new R.Record("Charsets",[{name:"format",type:"Card8",value:0}]),r=0;r<e.length;r+=1){var n=be(e[r],t);a.fields.push({name:"glyph_"+r,type:"SID",value:n})}return a}(o,l),r.charStringsIndex=function(e){for(var t=new R.Record("CharStrings INDEX",[{name:"charStrings",type:"INDEX",value:[]}]),a=0;a<e.length;a+=1){var r=e.get(a),n=Ee(r);t.charStrings.push({name:r.name,type:"CHARSTRING",value:n})}return t}(e),r.privateDict=function(e,t){var a=new R.Record("Private DICT",[{name:"dict",type:"DICT",value:{}}]);return a.dict=Ae(me,e,t),a}({},l),r.stringIndex=function(e){var t=new R.Record("String INDEX",[{name:"strings",type:"INDEX",value:[]}]);t.strings=[];for(var a=0;a<e.length;a+=1)t.strings.push({name:"string_"+a,type:"STRING",value:e[a]});return t}(l);var u=r.header.sizeOf()+r.nameIndex.sizeOf()+r.topDictIndex.sizeOf()+r.stringIndex.sizeOf()+r.globalSubrIndex.sizeOf();return i.charset=u,i.encoding=0,i.charStrings=i.charset+r.charsets.sizeOf(),i.private[1]=i.charStrings+r.charStringsIndex.sizeOf(),c=ye(i,l),r.topDictIndex=_e(c),r}};var Ce={parse:function(e,t){var a={},r=new V.Parser(e,t);return a.version=r.parseVersion(),a.fontRevision=Math.round(1e3*r.parseFixed())/1e3,a.checkSumAdjustment=r.parseULong(),a.magicNumber=r.parseULong(),p.argument(1594834165===a.magicNumber,"Font header has wrong magic number."),a.flags=r.parseUShort(),a.unitsPerEm=r.parseUShort(),a.created=r.parseLongDateTime(),a.modified=r.parseLongDateTime(),a.xMin=r.parseShort(),a.yMin=r.parseShort(),a.xMax=r.parseShort(),a.yMax=r.parseShort(),a.macStyle=r.parseUShort(),a.lowestRecPPEM=r.parseUShort(),a.fontDirectionHint=r.parseShort(),a.indexToLocFormat=r.parseShort(),a.glyphDataFormat=r.parseShort(),a},make:function(e){var t=Math.round((new Date).getTime()/1e3)+2082844800,a=t;return e.createdTimestamp&&(a=e.createdTimestamp+2082844800),new R.Table("head",[{name:"version",type:"FIXED",value:65536},{name:"fontRevision",type:"FIXED",value:65536},{name:"checkSumAdjustment",type:"ULONG",value:0},{name:"magicNumber",type:"ULONG",value:1594834165},{name:"flags",type:"USHORT",value:0},{name:"unitsPerEm",type:"USHORT",value:1e3},{name:"created",type:"LONGDATETIME",value:a},{name:"modified",type:"LONGDATETIME",value:t},{name:"xMin",type:"SHORT",value:0},{name:"yMin",type:"SHORT",value:0},{name:"xMax",type:"SHORT",value:0},{name:"yMax",type:"SHORT",value:0},{name:"macStyle",type:"USHORT",value:0},{name:"lowestRecPPEM",type:"USHORT",value:0},{name:"fontDirectionHint",type:"SHORT",value:2},{name:"indexToLocFormat",type:"SHORT",value:0},{name:"glyphDataFormat",type:"SHORT",value:0}],e)}};var xe={parse:function(e,t){var a={},r=new V.Parser(e,t);return a.version=r.parseVersion(),a.ascender=r.parseShort(),a.descender=r.parseShort(),a.lineGap=r.parseShort(),a.advanceWidthMax=r.parseUShort(),a.minLeftSideBearing=r.parseShort(),a.minRightSideBearing=r.parseShort(),a.xMaxExtent=r.parseShort(),a.caretSlopeRise=r.parseShort(),a.caretSlopeRun=r.parseShort(),a.caretOffset=r.parseShort(),r.relativeOffset+=8,a.metricDataFormat=r.parseShort(),a.numberOfHMetrics=r.parseUShort(),a},make:function(e){return new R.Table("hhea",[{name:"version",type:"FIXED",value:65536},{name:"ascender",type:"FWORD",value:0},{name:"descender",type:"FWORD",value:0},{name:"lineGap",type:"FWORD",value:0},{name:"advanceWidthMax",type:"UFWORD",value:0},{name:"minLeftSideBearing",type:"FWORD",value:0},{name:"minRightSideBearing",type:"FWORD",value:0},{name:"xMaxExtent",type:"FWORD",value:0},{name:"caretSlopeRise",type:"SHORT",value:1},{name:"caretSlopeRun",type:"SHORT",value:0},{name:"caretOffset",type:"SHORT",value:0},{name:"reserved1",type:"SHORT",value:0},{name:"reserved2",type:"SHORT",value:0},{name:"reserved3",type:"SHORT",value:0},{name:"reserved4",type:"SHORT",value:0},{name:"metricDataFormat",type:"SHORT",value:0},{name:"numberOfHMetrics",type:"USHORT",value:0}],e)}};var we={parse:function(e,t,a,r,n,i,o){o.lowMemory?function(e,t,a,r,n){var i,o;e._hmtxTableData={};for(var s=new V.Parser(t,a),l=0;l<n;l+=1)l<r&&(i=s.parseUShort(),o=s.parseShort()),e._hmtxTableData[l]={advanceWidth:i,leftSideBearing:o}}(e,t,a,r,n):function(e,t,a,r,n){for(var i,o,s=new V.Parser(e,t),l=0;l<r;l+=1){l<a&&(i=s.parseUShort(),o=s.parseShort());var c=n.get(l);c.advanceWidth=i,c.leftSideBearing=o}}(t,a,r,n,i)},make:function(e){for(var t=new R.Table("hmtx",[]),a=0;a<e.length;a+=1){var r=e.get(a),n=r.advanceWidth||0,i=r.leftSideBearing||0;t.fields.push({name:"advanceWidth_"+a,type:"USHORT",value:n}),t.fields.push({name:"leftSideBearing_"+a,type:"SHORT",value:i})}return t}};var ke={make:function(e){for(var t=new R.Table("ltag",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"numTags",type:"ULONG",value:e.length}]),a="",r=12+4*e.length,n=0;n<e.length;++n){var i=a.indexOf(e[n]);i<0&&(i=a.length,a+=e[n]),t.fields.push({name:"offset "+n,type:"USHORT",value:r+i}),t.fields.push({name:"length "+n,type:"USHORT",value:e[n].length})}return t.fields.push({name:"stringPool",type:"CHARARRAY",value:a}),t},parse:function(e,t){var a=new V.Parser(e,t),r=a.parseULong();p.argument(1===r,"Unsupported ltag table version."),a.skip("uLong",1);for(var n=a.parseULong(),i=[],o=0;o<n;o++){for(var s="",l=t+a.parseUShort(),c=a.parseUShort(),u=l;u<l+c;++u)s+=String.fromCharCode(e.getInt8(u));i.push(s)}return i}};var Ie={parse:function(e,t){var a={},r=new V.Parser(e,t);return a.version=r.parseVersion(),a.numGlyphs=r.parseUShort(),1===a.version&&(a.maxPoints=r.parseUShort(),a.maxContours=r.parseUShort(),a.maxCompositePoints=r.parseUShort(),a.maxCompositeContours=r.parseUShort(),a.maxZones=r.parseUShort(),a.maxTwilightPoints=r.parseUShort(),a.maxStorage=r.parseUShort(),a.maxFunctionDefs=r.parseUShort(),a.maxInstructionDefs=r.parseUShort(),a.maxStackElements=r.parseUShort(),a.maxSizeOfInstructions=r.parseUShort(),a.maxComponentElements=r.parseUShort(),a.maxComponentDepth=r.parseUShort()),a},make:function(e){return new R.Table("maxp",[{name:"version",type:"FIXED",value:20480},{name:"numGlyphs",type:"USHORT",value:e}])}},Ne=["copyright","fontFamily","fontSubfamily","uniqueID","fullName","version","postScriptName","trademark","manufacturer","designer","description","manufacturerURL","designerURL","license","licenseURL","reserved","preferredFamily","preferredSubfamily","compatibleFullName","sampleText","postScriptFindFontName","wwsFamily","wwsSubfamily"],Oe={0:"en",1:"fr",2:"de",3:"it",4:"nl",5:"sv",6:"es",7:"da",8:"pt",9:"no",10:"he",11:"ja",12:"ar",13:"fi",14:"el",15:"is",16:"mt",17:"tr",18:"hr",19:"zh-Hant",20:"ur",21:"hi",22:"th",23:"ko",24:"lt",25:"pl",26:"hu",27:"es",28:"lv",29:"se",30:"fo",31:"fa",32:"ru",33:"zh",34:"nl-BE",35:"ga",36:"sq",37:"ro",38:"cz",39:"sk",40:"si",41:"yi",42:"sr",43:"mk",44:"bg",45:"uk",46:"be",47:"uz",48:"kk",49:"az-Cyrl",50:"az-Arab",51:"hy",52:"ka",53:"mo",54:"ky",55:"tg",56:"tk",57:"mn-CN",58:"mn",59:"ps",60:"ks",61:"ku",62:"sd",63:"bo",64:"ne",65:"sa",66:"mr",67:"bn",68:"as",69:"gu",70:"pa",71:"or",72:"ml",73:"kn",74:"ta",75:"te",76:"si",77:"my",78:"km",79:"lo",80:"vi",81:"id",82:"tl",83:"ms",84:"ms-Arab",85:"am",86:"ti",87:"om",88:"so",89:"sw",90:"rw",91:"rn",92:"ny",93:"mg",94:"eo",128:"cy",129:"eu",130:"ca",131:"la",132:"qu",133:"gn",134:"ay",135:"tt",136:"ug",137:"dz",138:"jv",139:"su",140:"gl",141:"af",142:"br",143:"iu",144:"gd",145:"gv",146:"ga",147:"to",148:"el-polyton",149:"kl",150:"az",151:"nn"},Pe={0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:5,11:1,12:4,13:0,14:6,15:0,16:0,17:0,18:0,19:2,20:4,21:9,22:21,23:3,24:29,25:29,26:29,27:29,28:29,29:0,30:0,31:4,32:7,33:25,34:0,35:0,36:0,37:0,38:29,39:29,40:0,41:5,42:7,43:7,44:7,45:7,46:7,47:7,48:7,49:7,50:4,51:24,52:23,53:7,54:7,55:7,56:7,57:27,58:7,59:4,60:4,61:4,62:4,63:26,64:9,65:9,66:9,67:13,68:13,69:11,70:10,71:12,72:17,73:16,74:14,75:15,76:18,77:19,78:20,79:22,80:30,81:0,82:0,83:0,84:4,85:28,86:28,87:28,88:0,89:0,90:0,91:0,92:0,93:0,94:0,128:0,129:0,130:0,131:0,132:0,133:0,134:0,135:7,136:4,137:26,138:0,139:0,140:0,141:0,142:0,143:28,144:0,145:0,146:0,147:0,148:6,149:0,150:0,151:0},De={1078:"af",1052:"sq",1156:"gsw",1118:"am",5121:"ar-DZ",15361:"ar-BH",3073:"ar",2049:"ar-IQ",11265:"ar-JO",13313:"ar-KW",12289:"ar-LB",4097:"ar-LY",6145:"ary",8193:"ar-OM",16385:"ar-QA",1025:"ar-SA",10241:"ar-SY",7169:"aeb",14337:"ar-AE",9217:"ar-YE",1067:"hy",1101:"as",2092:"az-Cyrl",1068:"az",1133:"ba",1069:"eu",1059:"be",2117:"bn",1093:"bn-IN",8218:"bs-Cyrl",5146:"bs",1150:"br",1026:"bg",1027:"ca",3076:"zh-HK",5124:"zh-MO",2052:"zh",4100:"zh-SG",1028:"zh-TW",1155:"co",1050:"hr",4122:"hr-BA",1029:"cs",1030:"da",1164:"prs",1125:"dv",2067:"nl-BE",1043:"nl",3081:"en-AU",10249:"en-BZ",4105:"en-CA",9225:"en-029",16393:"en-IN",6153:"en-IE",8201:"en-JM",17417:"en-MY",5129:"en-NZ",13321:"en-PH",18441:"en-SG",7177:"en-ZA",11273:"en-TT",2057:"en-GB",1033:"en",12297:"en-ZW",1061:"et",1080:"fo",1124:"fil",1035:"fi",2060:"fr-BE",3084:"fr-CA",1036:"fr",5132:"fr-LU",6156:"fr-MC",4108:"fr-CH",1122:"fy",1110:"gl",1079:"ka",3079:"de-AT",1031:"de",5127:"de-LI",4103:"de-LU",2055:"de-CH",1032:"el",1135:"kl",1095:"gu",1128:"ha",1037:"he",1081:"hi",1038:"hu",1039:"is",1136:"ig",1057:"id",1117:"iu",2141:"iu-Latn",2108:"ga",1076:"xh",1077:"zu",1040:"it",2064:"it-CH",1041:"ja",1099:"kn",1087:"kk",1107:"km",1158:"quc",1159:"rw",1089:"sw",1111:"kok",1042:"ko",1088:"ky",1108:"lo",1062:"lv",1063:"lt",2094:"dsb",1134:"lb",1071:"mk",2110:"ms-BN",1086:"ms",1100:"ml",1082:"mt",1153:"mi",1146:"arn",1102:"mr",1148:"moh",1104:"mn",2128:"mn-CN",1121:"ne",1044:"nb",2068:"nn",1154:"oc",1096:"or",1123:"ps",1045:"pl",1046:"pt",2070:"pt-PT",1094:"pa",1131:"qu-BO",2155:"qu-EC",3179:"qu",1048:"ro",1047:"rm",1049:"ru",9275:"smn",4155:"smj-NO",5179:"smj",3131:"se-FI",1083:"se",2107:"se-SE",8251:"sms",6203:"sma-NO",7227:"sms",1103:"sa",7194:"sr-Cyrl-BA",3098:"sr",6170:"sr-Latn-BA",2074:"sr-Latn",1132:"nso",1074:"tn",1115:"si",1051:"sk",1060:"sl",11274:"es-AR",16394:"es-BO",13322:"es-CL",9226:"es-CO",5130:"es-CR",7178:"es-DO",12298:"es-EC",17418:"es-SV",4106:"es-GT",18442:"es-HN",2058:"es-MX",19466:"es-NI",6154:"es-PA",15370:"es-PY",10250:"es-PE",20490:"es-PR",3082:"es",1034:"es",21514:"es-US",14346:"es-UY",8202:"es-VE",2077:"sv-FI",1053:"sv",1114:"syr",1064:"tg",2143:"tzm",1097:"ta",1092:"tt",1098:"te",1054:"th",1105:"bo",1055:"tr",1090:"tk",1152:"ug",1058:"uk",1070:"hsb",1056:"ur",2115:"uz-Cyrl",1091:"uz",1066:"vi",1106:"cy",1160:"wo",1157:"sah",1144:"ii",1130:"yo"};function Re(e,t,a){switch(e){case 0:if(65535===t)return"und";if(a)return a[t];break;case 1:return Oe[t];case 3:return De[t]}}var Te={0:"macintosh",1:"x-mac-japanese",2:"x-mac-chinesetrad",3:"x-mac-korean",6:"x-mac-greek",7:"x-mac-cyrillic",9:"x-mac-devanagai",10:"x-mac-gurmukhi",11:"x-mac-gujarati",12:"x-mac-oriya",13:"x-mac-bengali",14:"x-mac-tamil",15:"x-mac-telugu",16:"x-mac-kannada",17:"x-mac-malayalam",18:"x-mac-sinhalese",19:"x-mac-burmese",20:"x-mac-khmer",21:"x-mac-thai",22:"x-mac-lao",23:"x-mac-georgian",24:"x-mac-armenian",25:"x-mac-chinesesimp",26:"x-mac-tibetan",27:"x-mac-mongolian",28:"x-mac-ethiopic",29:"x-mac-ce",30:"x-mac-vietnamese",31:"x-mac-extarabic"},Le={15:"x-mac-icelandic",17:"x-mac-turkish",18:"x-mac-croatian",24:"x-mac-ce",25:"x-mac-ce",26:"x-mac-ce",27:"x-mac-ce",28:"x-mac-ce",30:"x-mac-icelandic",37:"x-mac-romanian",38:"x-mac-ce",39:"x-mac-ce",40:"x-mac-ce",143:"x-mac-inuit",146:"x-mac-gaelic"};function Me(e,t,a){switch(e){case 0:return"utf-16";case 1:return Le[a]||Te[t];case 3:if(1===t||10===t)return"utf-16"}}function Be(e){var t={};for(var a in e)t[e[a]]=parseInt(a);return t}function je(e,t,a,r,n,i){return new R.Record("NameRecord",[{name:"platformID",type:"USHORT",value:e},{name:"encodingID",type:"USHORT",value:t},{name:"languageID",type:"USHORT",value:a},{name:"nameID",type:"USHORT",value:r},{name:"length",type:"USHORT",value:n},{name:"offset",type:"USHORT",value:i}])}function Fe(e,t){var a=function(e,t){var a=e.length,r=t.length-a+1;e:for(var n=0;n<r;n++)for(;n<r;n++){for(var i=0;i<a;i++)if(t[n+i]!==e[i])continue e;return n}return-1}(e,t);if(a<0){a=t.length;for(var r=0,n=e.length;r<n;++r)t.push(e[r])}return a}var Ue={parse:function(e,t,a){for(var r={},n=new V.Parser(e,t),i=n.parseUShort(),o=n.parseUShort(),s=n.offset+n.parseUShort(),l=0;l<o;l++){var c=n.parseUShort(),u=n.parseUShort(),d=n.parseUShort(),p=n.parseUShort(),h=Ne[p]||p,g=n.parseUShort(),f=n.parseUShort(),v=Re(c,d,a),b=Me(c,u,d);if(void 0!==b&&void 0!==v){var A=void 0;if(A="utf-16"===b?m.UTF16(e,s+f,g):m.MACSTRING(e,s+f,g,b)){var y=r[h];void 0===y&&(y=r[h]={}),y[v]=A}}}return 1===i&&n.parseUShort(),r},make:function(e,t){var a,r=[],n={},i=Be(Ne);for(var o in e){var s=i[o];if(void 0===s&&(s=o),a=parseInt(s),isNaN(a))throw new Error('Name table entry "'+o+'" does not exist, see nameTableNames for complete list.');n[a]=e[o],r.push(a)}for(var l=Be(Oe),c=Be(De),u=[],d=[],p=0;p<r.length;p++){var m=n[a=r[p]];for(var g in m){var f=m[g],v=1,b=l[g],A=Pe[b],y=Me(v,A,b),_=h.MACSTRING(f,y);void 0===_&&(v=0,(b=t.indexOf(g))<0&&(b=t.length,t.push(g)),A=4,_=h.UTF16(f));var E=Fe(_,d);u.push(je(v,A,b,a,_.length,E));var S=c[g];if(void 0!==S){var C=h.UTF16(f),x=Fe(C,d);u.push(je(3,1,S,a,C.length,x))}}}u.sort((function(e,t){return e.platformID-t.platformID||e.encodingID-t.encodingID||e.languageID-t.languageID||e.nameID-t.nameID}));for(var w=new R.Table("name",[{name:"format",type:"USHORT",value:0},{name:"count",type:"USHORT",value:u.length},{name:"stringOffset",type:"USHORT",value:6+12*u.length}]),k=0;k<u.length;k++)w.fields.push({name:"record_"+k,type:"RECORD",value:u[k]});return w.fields.push({name:"strings",type:"LITERAL",value:d}),w}},Ve=[{begin:0,end:127},{begin:128,end:255},{begin:256,end:383},{begin:384,end:591},{begin:592,end:687},{begin:688,end:767},{begin:768,end:879},{begin:880,end:1023},{begin:11392,end:11519},{begin:1024,end:1279},{begin:1328,end:1423},{begin:1424,end:1535},{begin:42240,end:42559},{begin:1536,end:1791},{begin:1984,end:2047},{begin:2304,end:2431},{begin:2432,end:2559},{begin:2560,end:2687},{begin:2688,end:2815},{begin:2816,end:2943},{begin:2944,end:3071},{begin:3072,end:3199},{begin:3200,end:3327},{begin:3328,end:3455},{begin:3584,end:3711},{begin:3712,end:3839},{begin:4256,end:4351},{begin:6912,end:7039},{begin:4352,end:4607},{begin:7680,end:7935},{begin:7936,end:8191},{begin:8192,end:8303},{begin:8304,end:8351},{begin:8352,end:8399},{begin:8400,end:8447},{begin:8448,end:8527},{begin:8528,end:8591},{begin:8592,end:8703},{begin:8704,end:8959},{begin:8960,end:9215},{begin:9216,end:9279},{begin:9280,end:9311},{begin:9312,end:9471},{begin:9472,end:9599},{begin:9600,end:9631},{begin:9632,end:9727},{begin:9728,end:9983},{begin:9984,end:10175},{begin:12288,end:12351},{begin:12352,end:12447},{begin:12448,end:12543},{begin:12544,end:12591},{begin:12592,end:12687},{begin:43072,end:43135},{begin:12800,end:13055},{begin:13056,end:13311},{begin:44032,end:55215},{begin:55296,end:57343},{begin:67840,end:67871},{begin:19968,end:40959},{begin:57344,end:63743},{begin:12736,end:12783},{begin:64256,end:64335},{begin:64336,end:65023},{begin:65056,end:65071},{begin:65040,end:65055},{begin:65104,end:65135},{begin:65136,end:65279},{begin:65280,end:65519},{begin:65520,end:65535},{begin:3840,end:4095},{begin:1792,end:1871},{begin:1920,end:1983},{begin:3456,end:3583},{begin:4096,end:4255},{begin:4608,end:4991},{begin:5024,end:5119},{begin:5120,end:5759},{begin:5760,end:5791},{begin:5792,end:5887},{begin:6016,end:6143},{begin:6144,end:6319},{begin:10240,end:10495},{begin:40960,end:42127},{begin:5888,end:5919},{begin:66304,end:66351},{begin:66352,end:66383},{begin:66560,end:66639},{begin:118784,end:119039},{begin:119808,end:120831},{begin:1044480,end:1048573},{begin:65024,end:65039},{begin:917504,end:917631},{begin:6400,end:6479},{begin:6480,end:6527},{begin:6528,end:6623},{begin:6656,end:6687},{begin:11264,end:11359},{begin:11568,end:11647},{begin:19904,end:19967},{begin:43008,end:43055},{begin:65536,end:65663},{begin:65856,end:65935},{begin:66432,end:66463},{begin:66464,end:66527},{begin:66640,end:66687},{begin:66688,end:66735},{begin:67584,end:67647},{begin:68096,end:68191},{begin:119552,end:119647},{begin:73728,end:74751},{begin:119648,end:119679},{begin:7040,end:7103},{begin:7168,end:7247},{begin:7248,end:7295},{begin:43136,end:43231},{begin:43264,end:43311},{begin:43312,end:43359},{begin:43520,end:43615},{begin:65936,end:65999},{begin:66e3,end:66047},{begin:66208,end:66271},{begin:127024,end:127135}];var Ge={parse:function(e,t){var a={},r=new V.Parser(e,t);a.version=r.parseUShort(),a.xAvgCharWidth=r.parseShort(),a.usWeightClass=r.parseUShort(),a.usWidthClass=r.parseUShort(),a.fsType=r.parseUShort(),a.ySubscriptXSize=r.parseShort(),a.ySubscriptYSize=r.parseShort(),a.ySubscriptXOffset=r.parseShort(),a.ySubscriptYOffset=r.parseShort(),a.ySuperscriptXSize=r.parseShort(),a.ySuperscriptYSize=r.parseShort(),a.ySuperscriptXOffset=r.parseShort(),a.ySuperscriptYOffset=r.parseShort(),a.yStrikeoutSize=r.parseShort(),a.yStrikeoutPosition=r.parseShort(),a.sFamilyClass=r.parseShort(),a.panose=[];for(var n=0;n<10;n++)a.panose[n]=r.parseByte();return a.ulUnicodeRange1=r.parseULong(),a.ulUnicodeRange2=r.parseULong(),a.ulUnicodeRange3=r.parseULong(),a.ulUnicodeRange4=r.parseULong(),a.achVendID=String.fromCharCode(r.parseByte(),r.parseByte(),r.parseByte(),r.parseByte()),a.fsSelection=r.parseUShort(),a.usFirstCharIndex=r.parseUShort(),a.usLastCharIndex=r.parseUShort(),a.sTypoAscender=r.parseShort(),a.sTypoDescender=r.parseShort(),a.sTypoLineGap=r.parseShort(),a.usWinAscent=r.parseUShort(),a.usWinDescent=r.parseUShort(),a.version>=1&&(a.ulCodePageRange1=r.parseULong(),a.ulCodePageRange2=r.parseULong()),a.version>=2&&(a.sxHeight=r.parseShort(),a.sCapHeight=r.parseShort(),a.usDefaultChar=r.parseUShort(),a.usBreakChar=r.parseUShort(),a.usMaxContent=r.parseUShort()),a},make:function(e){return new R.Table("OS/2",[{name:"version",type:"USHORT",value:3},{name:"xAvgCharWidth",type:"SHORT",value:0},{name:"usWeightClass",type:"USHORT",value:0},{name:"usWidthClass",type:"USHORT",value:0},{name:"fsType",type:"USHORT",value:0},{name:"ySubscriptXSize",type:"SHORT",value:650},{name:"ySubscriptYSize",type:"SHORT",value:699},{name:"ySubscriptXOffset",type:"SHORT",value:0},{name:"ySubscriptYOffset",type:"SHORT",value:140},{name:"ySuperscriptXSize",type:"SHORT",value:650},{name:"ySuperscriptYSize",type:"SHORT",value:699},{name:"ySuperscriptXOffset",type:"SHORT",value:0},{name:"ySuperscriptYOffset",type:"SHORT",value:479},{name:"yStrikeoutSize",type:"SHORT",value:49},{name:"yStrikeoutPosition",type:"SHORT",value:258},{name:"sFamilyClass",type:"SHORT",value:0},{name:"bFamilyType",type:"BYTE",value:0},{name:"bSerifStyle",type:"BYTE",value:0},{name:"bWeight",type:"BYTE",value:0},{name:"bProportion",type:"BYTE",value:0},{name:"bContrast",type:"BYTE",value:0},{name:"bStrokeVariation",type:"BYTE",value:0},{name:"bArmStyle",type:"BYTE",value:0},{name:"bLetterform",type:"BYTE",value:0},{name:"bMidline",type:"BYTE",value:0},{name:"bXHeight",type:"BYTE",value:0},{name:"ulUnicodeRange1",type:"ULONG",value:0},{name:"ulUnicodeRange2",type:"ULONG",value:0},{name:"ulUnicodeRange3",type:"ULONG",value:0},{name:"ulUnicodeRange4",type:"ULONG",value:0},{name:"achVendID",type:"CHARARRAY",value:"XXXX"},{name:"fsSelection",type:"USHORT",value:0},{name:"usFirstCharIndex",type:"USHORT",value:0},{name:"usLastCharIndex",type:"USHORT",value:0},{name:"sTypoAscender",type:"SHORT",value:0},{name:"sTypoDescender",type:"SHORT",value:0},{name:"sTypoLineGap",type:"SHORT",value:0},{name:"usWinAscent",type:"USHORT",value:0},{name:"usWinDescent",type:"USHORT",value:0},{name:"ulCodePageRange1",type:"ULONG",value:0},{name:"ulCodePageRange2",type:"ULONG",value:0},{name:"sxHeight",type:"SHORT",value:0},{name:"sCapHeight",type:"SHORT",value:0},{name:"usDefaultChar",type:"USHORT",value:0},{name:"usBreakChar",type:"USHORT",value:0},{name:"usMaxContext",type:"USHORT",value:0}],e)},unicodeRanges:Ve,getUnicodeRange:function(e){for(var t=0;t<Ve.length;t+=1){var a=Ve[t];if(e>=a.begin&&e<a.end)return t}return-1}};var qe={parse:function(e,t){var a={},r=new V.Parser(e,t);switch(a.version=r.parseVersion(),a.italicAngle=r.parseFixed(),a.underlinePosition=r.parseShort(),a.underlineThickness=r.parseShort(),a.isFixedPitch=r.parseULong(),a.minMemType42=r.parseULong(),a.maxMemType42=r.parseULong(),a.minMemType1=r.parseULong(),a.maxMemType1=r.parseULong(),a.version){case 1:a.names=Q.slice();break;case 2:a.numberOfGlyphs=r.parseUShort(),a.glyphNameIndex=new Array(a.numberOfGlyphs);for(var n=0;n<a.numberOfGlyphs;n++)a.glyphNameIndex[n]=r.parseUShort();a.names=[];for(var i=0;i<a.numberOfGlyphs;i++)if(a.glyphNameIndex[i]>=Q.length){var o=r.parseChar();a.names.push(r.parseString(o))}break;case 2.5:a.numberOfGlyphs=r.parseUShort(),a.offset=new Array(a.numberOfGlyphs);for(var s=0;s<a.numberOfGlyphs;s++)a.offset[s]=r.parseChar()}return a},make:function(){return new R.Table("post",[{name:"version",type:"FIXED",value:196608},{name:"italicAngle",type:"FIXED",value:0},{name:"underlinePosition",type:"FWORD",value:0},{name:"underlineThickness",type:"FWORD",value:0},{name:"isFixedPitch",type:"ULONG",value:0},{name:"minMemType42",type:"ULONG",value:0},{name:"maxMemType42",type:"ULONG",value:0},{name:"minMemType1",type:"ULONG",value:0},{name:"maxMemType1",type:"ULONG",value:0}])}},He=new Array(9);He[1]=function(){var e=this.offset+this.relativeOffset,t=this.parseUShort();return 1===t?{substFormat:1,coverage:this.parsePointer(F.coverage),deltaGlyphId:this.parseUShort()}:2===t?{substFormat:2,coverage:this.parsePointer(F.coverage),substitute:this.parseOffset16List()}:void p.assert(!1,"0x"+e.toString(16)+": lookup type 1 format must be 1 or 2.")},He[2]=function(){var e=this.parseUShort();return p.argument(1===e,"GSUB Multiple Substitution Subtable identifier-format must be 1"),{substFormat:e,coverage:this.parsePointer(F.coverage),sequences:this.parseListOfLists()}},He[3]=function(){var e=this.parseUShort();return p.argument(1===e,"GSUB Alternate Substitution Subtable identifier-format must be 1"),{substFormat:e,coverage:this.parsePointer(F.coverage),alternateSets:this.parseListOfLists()}},He[4]=function(){var e=this.parseUShort();return p.argument(1===e,"GSUB ligature table identifier-format must be 1"),{substFormat:e,coverage:this.parsePointer(F.coverage),ligatureSets:this.parseListOfLists((function(){return{ligGlyph:this.parseUShort(),components:this.parseUShortList(this.parseUShort()-1)}}))}};var ze={sequenceIndex:F.uShort,lookupListIndex:F.uShort};He[5]=function(){var e=this.offset+this.relativeOffset,t=this.parseUShort();if(1===t)return{substFormat:t,coverage:this.parsePointer(F.coverage),ruleSets:this.parseListOfLists((function(){var e=this.parseUShort(),t=this.parseUShort();return{input:this.parseUShortList(e-1),lookupRecords:this.parseRecordList(t,ze)}}))};if(2===t)return{substFormat:t,coverage:this.parsePointer(F.coverage),classDef:this.parsePointer(F.classDef),classSets:this.parseListOfLists((function(){var e=this.parseUShort(),t=this.parseUShort();return{classes:this.parseUShortList(e-1),lookupRecords:this.parseRecordList(t,ze)}}))};if(3===t){var a=this.parseUShort(),r=this.parseUShort();return{substFormat:t,coverages:this.parseList(a,F.pointer(F.coverage)),lookupRecords:this.parseRecordList(r,ze)}}p.assert(!1,"0x"+e.toString(16)+": lookup type 5 format must be 1, 2 or 3.")},He[6]=function(){var e=this.offset+this.relativeOffset,t=this.parseUShort();return 1===t?{substFormat:1,coverage:this.parsePointer(F.coverage),chainRuleSets:this.parseListOfLists((function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(ze)}}))}:2===t?{substFormat:2,coverage:this.parsePointer(F.coverage),backtrackClassDef:this.parsePointer(F.classDef),inputClassDef:this.parsePointer(F.classDef),lookaheadClassDef:this.parsePointer(F.classDef),chainClassSet:this.parseListOfLists((function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(ze)}}))}:3===t?{substFormat:3,backtrackCoverage:this.parseList(F.pointer(F.coverage)),inputCoverage:this.parseList(F.pointer(F.coverage)),lookaheadCoverage:this.parseList(F.pointer(F.coverage)),lookupRecords:this.parseRecordList(ze)}:void p.assert(!1,"0x"+e.toString(16)+": lookup type 6 format must be 1, 2 or 3.")},He[7]=function(){var e=this.parseUShort();p.argument(1===e,"GSUB Extension Substitution subtable identifier-format must be 1");var t=this.parseUShort(),a=new F(this.data,this.offset+this.parseULong());return{substFormat:1,lookupType:t,extension:He[t].call(a)}},He[8]=function(){var e=this.parseUShort();return p.argument(1===e,"GSUB Reverse Chaining Contextual Single Substitution Subtable identifier-format must be 1"),{substFormat:e,coverage:this.parsePointer(F.coverage),backtrackCoverage:this.parseList(F.pointer(F.coverage)),lookaheadCoverage:this.parseList(F.pointer(F.coverage)),substitutes:this.parseUShortList()}};var We=new Array(9);We[1]=function(e){return 1===e.substFormat?new R.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new R.Coverage(e.coverage)},{name:"deltaGlyphID",type:"USHORT",value:e.deltaGlyphId}]):new R.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:2},{name:"coverage",type:"TABLE",value:new R.Coverage(e.coverage)}].concat(R.ushortList("substitute",e.substitute)))},We[3]=function(e){return p.assert(1===e.substFormat,"Lookup type 3 substFormat must be 1."),new R.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new R.Coverage(e.coverage)}].concat(R.tableList("altSet",e.alternateSets,(function(e){return new R.Table("alternateSetTable",R.ushortList("alternate",e))}))))},We[4]=function(e){return p.assert(1===e.substFormat,"Lookup type 4 substFormat must be 1."),new R.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new R.Coverage(e.coverage)}].concat(R.tableList("ligSet",e.ligatureSets,(function(e){return new R.Table("ligatureSetTable",R.tableList("ligature",e,(function(e){return new R.Table("ligatureTable",[{name:"ligGlyph",type:"USHORT",value:e.ligGlyph}].concat(R.ushortList("component",e.components,e.components.length+1)))})))}))))};var Qe={parse:function(e,t){var a=new F(e,t=t||0),r=a.parseVersion(1);return p.argument(1===r||1.1===r,"Unsupported GSUB table version."),1===r?{version:r,scripts:a.parseScriptList(),features:a.parseFeatureList(),lookups:a.parseLookupList(He)}:{version:r,scripts:a.parseScriptList(),features:a.parseFeatureList(),lookups:a.parseLookupList(He),variations:a.parseFeatureVariationsList()}},make:function(e){return new R.Table("GSUB",[{name:"version",type:"ULONG",value:65536},{name:"scripts",type:"TABLE",value:new R.ScriptList(e.scripts)},{name:"features",type:"TABLE",value:new R.FeatureList(e.features)},{name:"lookups",type:"TABLE",value:new R.LookupList(e.lookups,We)}])}};var Je={parse:function(e,t){var a=new V.Parser(e,t),r=a.parseULong();p.argument(1===r,"Unsupported META table version."),a.parseULong(),a.parseULong();for(var n=a.parseULong(),i={},o=0;o<n;o++){var s=a.parseTag(),l=a.parseULong(),c=a.parseULong(),u=m.UTF8(e,t+l,c);i[s]=u}return i},make:function(e){var t=Object.keys(e).length,a="",r=16+12*t,n=new R.Table("meta",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"offset",type:"ULONG",value:r},{name:"numTags",type:"ULONG",value:t}]);for(var i in e){var o=a.length;a+=e[i],n.fields.push({name:"tag "+i,type:"TAG",value:i}),n.fields.push({name:"offset "+i,type:"ULONG",value:r+o}),n.fields.push({name:"length "+i,type:"ULONG",value:e[i].length})}return n.fields.push({name:"stringPool",type:"CHARARRAY",value:a}),n}};function Ye(e){return Math.log(e)/Math.log(2)|0}function Ze(e){for(;e.length%4!==0;)e.push(0);for(var t=0,a=0;a<e.length;a+=4)t+=(e[a]<<24)+(e[a+1]<<16)+(e[a+2]<<8)+e[a+3];return t%=Math.pow(2,32)}function Xe(e,t,a,r){return new R.Record("Table Record",[{name:"tag",type:"TAG",value:void 0!==e?e:""},{name:"checkSum",type:"ULONG",value:void 0!==t?t:0},{name:"offset",type:"ULONG",value:void 0!==a?a:0},{name:"length",type:"ULONG",value:void 0!==r?r:0}])}function Ke(e){var t=new R.Table("sfnt",[{name:"version",type:"TAG",value:"OTTO"},{name:"numTables",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]);t.tables=e,t.numTables=e.length;var a=Math.pow(2,Ye(t.numTables));t.searchRange=16*a,t.entrySelector=Ye(a),t.rangeShift=16*t.numTables-t.searchRange;for(var r=[],n=[],i=t.sizeOf()+Xe().sizeOf()*t.numTables;i%4!==0;)i+=1,n.push({name:"padding",type:"BYTE",value:0});for(var o=0;o<e.length;o+=1){var s=e[o];p.argument(4===s.tableName.length,"Table name"+s.tableName+" is invalid.");var l=s.sizeOf(),c=Xe(s.tableName,Ze(s.encode()),i,l);for(r.push({name:c.tag+" Table Record",type:"RECORD",value:c}),n.push({name:s.tableName+" table",type:"RECORD",value:s}),i+=l,p.argument(!isNaN(i),"Something went wrong calculating the offset.");i%4!==0;)i+=1,n.push({name:"padding",type:"BYTE",value:0})}return r.sort((function(e,t){return e.value.tag>t.value.tag?1:-1})),t.fields=t.fields.concat(r),t.fields=t.fields.concat(n),t}function $e(e,t,a){for(var r=0;r<t.length;r+=1){var n=e.charToGlyphIndex(t[r]);if(n>0)return e.glyphs.get(n).getMetrics()}return a}function et(e){for(var t=0,a=0;a<e.length;a+=1)t+=e[a];return t/e.length}var tt={make:Ke,fontToTable:function(e){for(var t,a=[],r=[],n=[],i=[],o=[],s=[],l=[],c=0,u=0,d=0,p=0,m=0,h=0;h<e.glyphs.length;h+=1){var g=e.glyphs.get(h),f=0|g.unicode;if(isNaN(g.advanceWidth))throw new Error("Glyph "+g.name+" ("+h+"): advanceWidth is not a number.");(t>f||void 0===t)&&f>0&&(t=f),c<f&&(c=f);var v=Ge.getUnicodeRange(f);if(v<32)u|=1<<v;else if(v<64)d|=1<<v-32;else if(v<96)p|=1<<v-64;else{if(!(v<123))throw new Error("Unicode ranges bits > 123 are reserved for internal usage");m|=1<<v-96}if(".notdef"!==g.name){var b=g.getMetrics();a.push(b.xMin),r.push(b.yMin),n.push(b.xMax),i.push(b.yMax),s.push(b.leftSideBearing),l.push(b.rightSideBearing),o.push(g.advanceWidth)}}var A={xMin:Math.min.apply(null,a),yMin:Math.min.apply(null,r),xMax:Math.max.apply(null,n),yMax:Math.max.apply(null,i),advanceWidthMax:Math.max.apply(null,o),advanceWidthAvg:et(o),minLeftSideBearing:Math.min.apply(null,s),maxLeftSideBearing:Math.max.apply(null,s),minRightSideBearing:Math.min.apply(null,l)};A.ascender=e.ascender,A.descender=e.descender;var y=Ce.make({flags:3,unitsPerEm:e.unitsPerEm,xMin:A.xMin,yMin:A.yMin,xMax:A.xMax,yMax:A.yMax,lowestRecPPEM:3,createdTimestamp:e.createdTimestamp}),_=xe.make({ascender:A.ascender,descender:A.descender,advanceWidthMax:A.advanceWidthMax,minLeftSideBearing:A.minLeftSideBearing,minRightSideBearing:A.minRightSideBearing,xMaxExtent:A.maxLeftSideBearing+(A.xMax-A.xMin),numberOfHMetrics:e.glyphs.length}),E=Ie.make(e.glyphs.length),S=Ge.make({xAvgCharWidth:Math.round(A.advanceWidthAvg),usWeightClass:e.tables.os2.usWeightClass,usWidthClass:e.tables.os2.usWidthClass,usFirstCharIndex:t,usLastCharIndex:c,ulUnicodeRange1:u,ulUnicodeRange2:d,ulUnicodeRange3:p,ulUnicodeRange4:m,fsSelection:e.tables.os2.fsSelection,sTypoAscender:A.ascender,sTypoDescender:A.descender,sTypoLineGap:0,usWinAscent:A.yMax,usWinDescent:Math.abs(A.yMin),ulCodePageRange1:1,sxHeight:$e(e,"xyvw",{yMax:Math.round(A.ascender/2)}).yMax,sCapHeight:$e(e,"HIKLEFJMNTZBDPRAGOQSUVWXY",A).yMax,usDefaultChar:e.hasChar(" ")?32:0,usBreakChar:e.hasChar(" ")?32:0}),C=we.make(e.glyphs),x=q.make(e.glyphs),w=e.getEnglishName("fontFamily"),k=e.getEnglishName("fontSubfamily"),I=w+" "+k,N=e.getEnglishName("postScriptName");N||(N=w.replace(/\s/g,"")+"-"+k);var O={};for(var P in e.names)O[P]=e.names[P];O.uniqueID||(O.uniqueID={en:e.getEnglishName("manufacturer")+":"+I}),O.postScriptName||(O.postScriptName={en:N}),O.preferredFamily||(O.preferredFamily=e.names.fontFamily),O.preferredSubfamily||(O.preferredSubfamily=e.names.fontSubfamily);var D=[],R=Ue.make(O,D),T=D.length>0?ke.make(D):void 0,L=qe.make(),M=Se.make(e.glyphs,{version:e.getEnglishName("version"),fullName:I,familyName:w,weightName:k,postScriptName:N,unitsPerEm:e.unitsPerEm,fontBBox:[0,A.yMin,A.ascender,A.advanceWidthMax]}),B=e.metas&&Object.keys(e.metas).length>0?Je.make(e.metas):void 0,j=[y,_,E,S,R,x,L,M,C];T&&j.push(T),e.tables.gsub&&j.push(Qe.make(e.tables.gsub)),B&&j.push(B);for(var F=Ke(j),U=Ze(F.encode()),V=F.fields,G=!1,H=0;H<V.length;H+=1)if("head table"===V[H].name){V[H].value.checkSumAdjustment=2981146554-U,G=!0;break}if(!G)throw new Error("Could not find head table with checkSum to adjust.");return F},computeCheckSum:Ze};function at(e,t){for(var a=0,r=e.length-1;a<=r;){var n=a+r>>>1,i=e[n].tag;if(i===t)return n;i<t?a=n+1:r=n-1}return-a-1}function rt(e,t){for(var a=0,r=e.length-1;a<=r;){var n=a+r>>>1,i=e[n];if(i===t)return n;i<t?a=n+1:r=n-1}return-a-1}function nt(e,t){for(var a,r=0,n=e.length-1;r<=n;){var i=r+n>>>1,o=(a=e[i]).start;if(o===t)return a;o<t?r=i+1:n=i-1}if(r>0)return t>(a=e[r-1]).end?0:a}function it(e,t){this.font=e,this.tableName=t}it.prototype={searchTag:at,binSearch:rt,getTable:function(e){var t=this.font.tables[this.tableName];return!t&&e&&(t=this.font.tables[this.tableName]=this.createDefaultTable()),t},getScriptNames:function(){var e=this.getTable();return e?e.scripts.map((function(e){return e.tag})):[]},getDefaultScriptName:function(){var e=this.getTable();if(e){for(var t=!1,a=0;a<e.scripts.length;a++){var r=e.scripts[a].tag;if("DFLT"===r)return r;"latn"===r&&(t=!0)}return t?"latn":void 0}},getScriptTable:function(e,t){var a=this.getTable(t);if(a){e=e||"DFLT";var r=a.scripts,n=at(a.scripts,e);if(n>=0)return r[n].script;if(t){var i={tag:e,script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}};return r.splice(-1-n,0,i),i.script}}},getLangSysTable:function(e,t,a){var r=this.getScriptTable(e,a);if(r){if(!t||"dflt"===t||"DFLT"===t)return r.defaultLangSys;var n=at(r.langSysRecords,t);if(n>=0)return r.langSysRecords[n].langSys;if(a){var i={tag:t,langSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]}};return r.langSysRecords.splice(-1-n,0,i),i.langSys}}},getFeatureTable:function(e,t,a,r){var n=this.getLangSysTable(e,t,r);if(n){for(var i,o=n.featureIndexes,s=this.font.tables[this.tableName].features,l=0;l<o.length;l++)if((i=s[o[l]]).tag===a)return i.feature;if(r){var c=s.length;return p.assert(0===c||a>=s[c-1].tag,"Features must be added in alphabetical order."),i={tag:a,feature:{params:0,lookupListIndexes:[]}},s.push(i),o.push(c),i.feature}}},getLookupTables:function(e,t,a,r,n){var i=this.getFeatureTable(e,t,a,n),o=[];if(i){for(var s,l=i.lookupListIndexes,c=this.font.tables[this.tableName].lookups,u=0;u<l.length;u++)(s=c[l[u]]).lookupType===r&&o.push(s);if(0===o.length&&n){s={lookupType:r,lookupFlag:0,subtables:[],markFilteringSet:void 0};var d=c.length;return c.push(s),l.push(d),[s]}}return o},getGlyphClass:function(e,t){switch(e.format){case 1:return e.startGlyph<=t&&t<e.startGlyph+e.classes.length?e.classes[t-e.startGlyph]:0;case 2:var a=nt(e.ranges,t);return a?a.classId:0}},getCoverageIndex:function(e,t){switch(e.format){case 1:var a=rt(e.glyphs,t);return a>=0?a:-1;case 2:var r=nt(e.ranges,t);return r?r.index+t-r.start:-1}},expandCoverage:function(e){if(1===e.format)return e.glyphs;for(var t=[],a=e.ranges,r=0;r<a.length;r++)for(var n=a[r],i=n.start,o=n.end,s=i;s<=o;s++)t.push(s);return t}};var ot=it;function st(e){ot.call(this,e,"gpos")}st.prototype=ot.prototype,st.prototype.init=function(){var e=this.getDefaultScriptName();this.defaultKerningTables=this.getKerningTables(e)},st.prototype.getKerningValue=function(e,t,a){for(var r=0;r<e.length;r++)for(var n=e[r].subtables,i=0;i<n.length;i++){var o=n[i],s=this.getCoverageIndex(o.coverage,t);if(!(s<0))switch(o.posFormat){case 1:for(var l=o.pairSets[s],c=0;c<l.length;c++){var u=l[c];if(u.secondGlyph===a)return u.value1&&u.value1.xAdvance||0}break;case 2:var d=this.getGlyphClass(o.classDef1,t),p=this.getGlyphClass(o.classDef2,a),m=o.classRecords[d][p];return m.value1&&m.value1.xAdvance||0}}return 0},st.prototype.getKerningTables=function(e,t){if(this.font.tables.gpos)return this.getLookupTables(e,t,"kern",2)};var lt=st;function ct(e){ot.call(this,e,"gsub")}function ut(e,t){var a=e.length;if(a!==t.length)return!1;for(var r=0;r<a;r++)if(e[r]!==t[r])return!1;return!0}function dt(e,t,a){for(var r=e.subtables,n=0;n<r.length;n++){var i=r[n];if(i.substFormat===t)return i}if(a)return r.push(a),a}ct.prototype=ot.prototype,ct.prototype.createDefaultTable=function(){return{version:1,scripts:[{tag:"DFLT",script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}}],features:[],lookups:[]}},ct.prototype.getSingle=function(e,t,a){for(var r=[],n=this.getLookupTables(t,a,e,1),i=0;i<n.length;i++)for(var o=n[i].subtables,s=0;s<o.length;s++){var l=o[s],c=this.expandCoverage(l.coverage),u=void 0;if(1===l.substFormat){var d=l.deltaGlyphId;for(u=0;u<c.length;u++){var p=c[u];r.push({sub:p,by:p+d})}}else{var m=l.substitute;for(u=0;u<c.length;u++)r.push({sub:c[u],by:m[u]})}}return r},ct.prototype.getAlternates=function(e,t,a){for(var r=[],n=this.getLookupTables(t,a,e,3),i=0;i<n.length;i++)for(var o=n[i].subtables,s=0;s<o.length;s++)for(var l=o[s],c=this.expandCoverage(l.coverage),u=l.alternateSets,d=0;d<c.length;d++)r.push({sub:c[d],by:u[d]});return r},ct.prototype.getLigatures=function(e,t,a){for(var r=[],n=this.getLookupTables(t,a,e,4),i=0;i<n.length;i++)for(var o=n[i].subtables,s=0;s<o.length;s++)for(var l=o[s],c=this.expandCoverage(l.coverage),u=l.ligatureSets,d=0;d<c.length;d++)for(var p=c[d],m=u[d],h=0;h<m.length;h++){var g=m[h];r.push({sub:[p].concat(g.components),by:g.ligGlyph})}return r},ct.prototype.addSingle=function(e,t,a,r){var n=dt(this.getLookupTables(a,r,e,1,!0)[0],2,{substFormat:2,coverage:{format:1,glyphs:[]},substitute:[]});p.assert(1===n.coverage.format,"Ligature: unable to modify coverage table format "+n.coverage.format);var i=t.sub,o=this.binSearch(n.coverage.glyphs,i);o<0&&(o=-1-o,n.coverage.glyphs.splice(o,0,i),n.substitute.splice(o,0,0)),n.substitute[o]=t.by},ct.prototype.addAlternate=function(e,t,a,r){var n=dt(this.getLookupTables(a,r,e,3,!0)[0],1,{substFormat:1,coverage:{format:1,glyphs:[]},alternateSets:[]});p.assert(1===n.coverage.format,"Ligature: unable to modify coverage table format "+n.coverage.format);var i=t.sub,o=this.binSearch(n.coverage.glyphs,i);o<0&&(o=-1-o,n.coverage.glyphs.splice(o,0,i),n.alternateSets.splice(o,0,0)),n.alternateSets[o]=t.by},ct.prototype.addLigature=function(e,t,a,r){var n=this.getLookupTables(a,r,e,4,!0)[0],i=n.subtables[0];i||(i={substFormat:1,coverage:{format:1,glyphs:[]},ligatureSets:[]},n.subtables[0]=i),p.assert(1===i.coverage.format,"Ligature: unable to modify coverage table format "+i.coverage.format);var o=t.sub[0],s=t.sub.slice(1),l={ligGlyph:t.by,components:s},c=this.binSearch(i.coverage.glyphs,o);if(c>=0){for(var u=i.ligatureSets[c],d=0;d<u.length;d++)if(ut(u[d].components,s))return;u.push(l)}else c=-1-c,i.coverage.glyphs.splice(c,0,o),i.ligatureSets.splice(c,0,[l])},ct.prototype.getFeature=function(e,t,a){if(/ss\d\d/.test(e))return this.getSingle(e,t,a);switch(e){case"aalt":case"salt":return this.getSingle(e,t,a).concat(this.getAlternates(e,t,a));case"dlig":case"liga":case"rlig":return this.getLigatures(e,t,a)}},ct.prototype.add=function(e,t,a,r){if(/ss\d\d/.test(e))return this.addSingle(e,t,a,r);switch(e){case"aalt":case"salt":return"number"===typeof t.by?this.addSingle(e,t,a,r):this.addAlternate(e,t,a,r);case"dlig":case"liga":case"rlig":return this.addLigature(e,t,a,r)}};var pt=ct,mt=a(86);function ht(e,t,a,r,n){var i;return(t&r)>0?(i=e.parseByte(),0===(t&n)&&(i=-i),i=a+i):i=(t&n)>0?a:a+e.parseShort(),i}function gt(e,t,a){var r,n,i=new V.Parser(t,a);if(e.numberOfContours=i.parseShort(),e._xMin=i.parseShort(),e._yMin=i.parseShort(),e._xMax=i.parseShort(),e._yMax=i.parseShort(),e.numberOfContours>0){for(var o=e.endPointIndices=[],s=0;s<e.numberOfContours;s+=1)o.push(i.parseUShort());e.instructionLength=i.parseUShort(),e.instructions=[];for(var l=0;l<e.instructionLength;l+=1)e.instructions.push(i.parseByte());var c=o[o.length-1]+1;r=[];for(var u=0;u<c;u+=1)if(n=i.parseByte(),r.push(n),(8&n)>0)for(var d=i.parseByte(),m=0;m<d;m+=1)r.push(n),u+=1;if(p.argument(r.length===c,"Bad flags."),o.length>0){var h,g=[];if(c>0){for(var f=0;f<c;f+=1)n=r[f],(h={}).onCurve=!!(1&n),h.lastPointOfContour=o.indexOf(f)>=0,g.push(h);for(var v=0,b=0;b<c;b+=1)n=r[b],(h=g[b]).x=ht(i,n,v,2,16),v=h.x;for(var A=0,y=0;y<c;y+=1)n=r[y],(h=g[y]).y=ht(i,n,A,4,32),A=h.y}e.points=g}else e.points=[]}else if(0===e.numberOfContours)e.points=[];else{e.isComposite=!0,e.points=[],e.components=[];for(var _=!0;_;){r=i.parseUShort();var E={glyphIndex:i.parseUShort(),xScale:1,scale01:0,scale10:0,yScale:1,dx:0,dy:0};(1&r)>0?(2&r)>0?(E.dx=i.parseShort(),E.dy=i.parseShort()):E.matchedPoints=[i.parseUShort(),i.parseUShort()]:(2&r)>0?(E.dx=i.parseChar(),E.dy=i.parseChar()):E.matchedPoints=[i.parseByte(),i.parseByte()],(8&r)>0?E.xScale=E.yScale=i.parseF2Dot14():(64&r)>0?(E.xScale=i.parseF2Dot14(),E.yScale=i.parseF2Dot14()):(128&r)>0&&(E.xScale=i.parseF2Dot14(),E.scale01=i.parseF2Dot14(),E.scale10=i.parseF2Dot14(),E.yScale=i.parseF2Dot14()),e.components.push(E),_=!!(32&r)}if(256&r){e.instructionLength=i.parseUShort(),e.instructions=[];for(var S=0;S<e.instructionLength;S+=1)e.instructions.push(i.parseByte())}}}function ft(e,t){for(var a=[],r=0;r<e.length;r+=1){var n=e[r],i={x:t.xScale*n.x+t.scale01*n.y+t.dx,y:t.scale10*n.x+t.yScale*n.y+t.dy,onCurve:n.onCurve,lastPointOfContour:n.lastPointOfContour};a.push(i)}return a}function vt(e){var t=new c;if(!e)return t;for(var a=function(e){for(var t=[],a=[],r=0;r<e.length;r+=1){var n=e[r];a.push(n),n.lastPointOfContour&&(t.push(a),a=[])}return p.argument(0===a.length,"There are still points left in the current contour."),t}(e),r=0;r<a.length;++r){var n=a[r],i=null,o=n[n.length-1],s=n[0];if(o.onCurve)t.moveTo(o.x,o.y);else if(s.onCurve)t.moveTo(s.x,s.y);else{var l={x:.5*(o.x+s.x),y:.5*(o.y+s.y)};t.moveTo(l.x,l.y)}for(var u=0;u<n.length;++u)if(i=o,o=s,s=n[(u+1)%n.length],o.onCurve)t.lineTo(o.x,o.y);else{var d=s;i.onCurve||{x:.5*(o.x+i.x),y:.5*(o.y+i.y)},s.onCurve||(d={x:.5*(o.x+s.x),y:.5*(o.y+s.y)}),t.quadraticCurveTo(o.x,o.y,d.x,d.y)}t.closePath()}return t}function bt(e,t){if(t.isComposite)for(var a=0;a<t.components.length;a+=1){var r=t.components[a],n=e.get(r.glyphIndex);if(n.getPath(),n.points){var i=void 0;if(void 0===r.matchedPoints)i=ft(n.points,r);else{if(r.matchedPoints[0]>t.points.length-1||r.matchedPoints[1]>n.points.length-1)throw Error("Matched points out of range in "+t.name);var o=t.points[r.matchedPoints[0]],s=n.points[r.matchedPoints[1]],l={xScale:r.xScale,scale01:r.scale01,scale10:r.scale10,yScale:r.yScale,dx:0,dy:0};s=ft([s],l)[0],l.dx=o.x-s.x,l.dy=o.y-s.y,i=ft(n.points,l)}t.points=t.points.concat(i)}}return vt(t.points)}var At,yt,_t,Et,St={getPath:vt,parse:function(e,t,a,r,n){return n.lowMemory?function(e,t,a,r){var n=new ne.GlyphSet(r);return r._push=function(i){var o=a[i];o!==a[i+1]?n.push(i,ne.ttfGlyphLoader(r,i,gt,e,t+o,bt)):n.push(i,ne.glyphLoader(r,i))},n}(e,t,a,r):function(e,t,a,r){for(var n=new ne.GlyphSet(r),i=0;i<a.length-1;i+=1){var o=a[i];o!==a[i+1]?n.push(i,ne.ttfGlyphLoader(r,i,gt,e,t+o,bt)):n.push(i,ne.glyphLoader(r,i))}return n}(e,t,a,r)}};function Ct(e){this.font=e,this.getCommands=function(e){return St.getPath(e).commands},this._fpgmState=this._prepState=void 0,this._errorState=0}function xt(e){return e}function wt(e){return Math.sign(e)*Math.round(Math.abs(e))}function kt(e){return Math.sign(e)*Math.round(Math.abs(2*e))/2}function It(e){return Math.sign(e)*(Math.round(Math.abs(e)+.5)-.5)}function Nt(e){return Math.sign(e)*Math.ceil(Math.abs(e))}function Ot(e){return Math.sign(e)*Math.floor(Math.abs(e))}var Pt=function(e){var t=this.srPeriod,a=this.srPhase,r=1;return e<0&&(e=-e,r=-1),e+=this.srThreshold-a,e=Math.trunc(e/t)*t,(e+=a)<0?a*r:e*r},Dt={x:1,y:0,axis:"x",distance:function(e,t,a,r){return(a?e.xo:e.x)-(r?t.xo:t.x)},interpolate:function(e,t,a,r){var n,i,o,s,l,c,u;if(!r||r===this)return n=e.xo-t.xo,i=e.xo-a.xo,l=t.x-t.xo,c=a.x-a.xo,0===(u=(o=Math.abs(n))+(s=Math.abs(i)))?void(e.x=e.xo+(l+c)/2):void(e.x=e.xo+(l*s+c*o)/u);n=r.distance(e,t,!0,!0),i=r.distance(e,a,!0,!0),l=r.distance(t,t,!1,!0),c=r.distance(a,a,!1,!0),0!==(u=(o=Math.abs(n))+(s=Math.abs(i)))?Dt.setRelative(e,e,(l*s+c*o)/u,r,!0):Dt.setRelative(e,e,(l+c)/2,r,!0)},normalSlope:Number.NEGATIVE_INFINITY,setRelative:function(e,t,a,r,n){if(r&&r!==this){var i=n?t.xo:t.x,o=n?t.yo:t.y,s=i+a*r.x,l=o+a*r.y;e.x=s+(e.y-l)/r.normalSlope}else e.x=(n?t.xo:t.x)+a},slope:0,touch:function(e){e.xTouched=!0},touched:function(e){return e.xTouched},untouch:function(e){e.xTouched=!1}},Rt={x:0,y:1,axis:"y",distance:function(e,t,a,r){return(a?e.yo:e.y)-(r?t.yo:t.y)},interpolate:function(e,t,a,r){var n,i,o,s,l,c,u;if(!r||r===this)return n=e.yo-t.yo,i=e.yo-a.yo,l=t.y-t.yo,c=a.y-a.yo,0===(u=(o=Math.abs(n))+(s=Math.abs(i)))?void(e.y=e.yo+(l+c)/2):void(e.y=e.yo+(l*s+c*o)/u);n=r.distance(e,t,!0,!0),i=r.distance(e,a,!0,!0),l=r.distance(t,t,!1,!0),c=r.distance(a,a,!1,!0),0!==(u=(o=Math.abs(n))+(s=Math.abs(i)))?Rt.setRelative(e,e,(l*s+c*o)/u,r,!0):Rt.setRelative(e,e,(l+c)/2,r,!0)},normalSlope:0,setRelative:function(e,t,a,r,n){if(r&&r!==this){var i=n?t.xo:t.x,o=n?t.yo:t.y,s=i+a*r.x,l=o+a*r.y;e.y=l+r.normalSlope*(e.x-s)}else e.y=(n?t.yo:t.y)+a},slope:Number.POSITIVE_INFINITY,touch:function(e){e.yTouched=!0},touched:function(e){return e.yTouched},untouch:function(e){e.yTouched=!1}};function Tt(e,t){this.x=e,this.y=t,this.axis=void 0,this.slope=t/e,this.normalSlope=-e/t,Object.freeze(this)}function Lt(e,t){var a=Math.sqrt(e*e+t*t);return t/=a,1===(e/=a)&&0===t?Dt:0===e&&1===t?Rt:new Tt(e,t)}function Mt(e,t,a,r){this.x=this.xo=Math.round(64*e)/64,this.y=this.yo=Math.round(64*t)/64,this.lastPointOfContour=a,this.onCurve=r,this.prevPointOnContour=void 0,this.nextPointOnContour=void 0,this.xTouched=!1,this.yTouched=!1,Object.preventExtensions(this)}Object.freeze(Dt),Object.freeze(Rt),Tt.prototype.distance=function(e,t,a,r){return this.x*Dt.distance(e,t,a,r)+this.y*Rt.distance(e,t,a,r)},Tt.prototype.interpolate=function(e,t,a,r){var n,i,o,s,l,c,u;o=r.distance(e,t,!0,!0),s=r.distance(e,a,!0,!0),n=r.distance(t,t,!1,!0),i=r.distance(a,a,!1,!0),0!==(u=(l=Math.abs(o))+(c=Math.abs(s)))?this.setRelative(e,e,(n*c+i*l)/u,r,!0):this.setRelative(e,e,(n+i)/2,r,!0)},Tt.prototype.setRelative=function(e,t,a,r,n){r=r||this;var i=n?t.xo:t.x,o=n?t.yo:t.y,s=i+a*r.x,l=o+a*r.y,c=r.normalSlope,u=this.slope,d=e.x,p=e.y;e.x=(u*d-c*s+l-p)/(u-c),e.y=u*(e.x-d)+p},Tt.prototype.touch=function(e){e.xTouched=!0,e.yTouched=!0},Mt.prototype.nextTouched=function(e){for(var t=this.nextPointOnContour;!e.touched(t)&&t!==this;)t=t.nextPointOnContour;return t},Mt.prototype.prevTouched=function(e){for(var t=this.prevPointOnContour;!e.touched(t)&&t!==this;)t=t.prevPointOnContour;return t};var Bt=Object.freeze(new Mt(0,0)),jt={cvCutIn:17/16,deltaBase:9,deltaShift:.125,loop:1,minDis:1,autoFlip:!0};function Ft(e,t){switch(this.env=e,this.stack=[],this.prog=t,e){case"glyf":this.zp0=this.zp1=this.zp2=1,this.rp0=this.rp1=this.rp2=0;case"prep":this.fv=this.pv=this.dpv=Dt,this.round=wt}}function Ut(e){for(var t=e.tZone=new Array(e.gZone.length),a=0;a<t.length;a++)t[a]=new Mt(0,0)}function Vt(e,t){var a,r=e.prog,n=e.ip,i=1;do{if(88===(a=r[++n]))i++;else if(89===a)i--;else if(64===a)n+=r[n+1]+1;else if(65===a)n+=2*r[n+1]+1;else if(a>=176&&a<=183)n+=a-176+1;else if(a>=184&&a<=191)n+=2*(a-184+1);else if(t&&1===i&&27===a)break}while(i>0);e.ip=n}function Gt(e,t){exports.DEBUG&&console.log(t.step,"SVTCA["+e.axis+"]"),t.fv=t.pv=t.dpv=e}function qt(e,t){exports.DEBUG&&console.log(t.step,"SPVTCA["+e.axis+"]"),t.pv=t.dpv=e}function Ht(e,t){exports.DEBUG&&console.log(t.step,"SFVTCA["+e.axis+"]"),t.fv=e}function zt(e,t){var a,r,n=t.stack,i=n.pop(),o=n.pop(),s=t.z2[i],l=t.z1[o];exports.DEBUG&&console.log("SPVTL["+e+"]",i,o),e?(a=s.y-l.y,r=l.x-s.x):(a=l.x-s.x,r=l.y-s.y),t.pv=t.dpv=Lt(a,r)}function Wt(e,t){var a,r,n=t.stack,i=n.pop(),o=n.pop(),s=t.z2[i],l=t.z1[o];exports.DEBUG&&console.log("SFVTL["+e+"]",i,o),e?(a=s.y-l.y,r=l.x-s.x):(a=l.x-s.x,r=l.y-s.y),t.fv=Lt(a,r)}function Qt(e){exports.DEBUG&&console.log(e.step,"POP[]"),e.stack.pop()}function Jt(e,t){var a=t.stack.pop(),r=t.z0[a],n=t.fv,i=t.pv;exports.DEBUG&&console.log(t.step,"MDAP["+e+"]",a);var o=i.distance(r,Bt);e&&(o=t.round(o)),n.setRelative(r,Bt,o,i),n.touch(r),t.rp0=t.rp1=a}function Yt(e,t){var a,r,n,i=t.z2,o=i.length-2;exports.DEBUG&&console.log(t.step,"IUP["+e.axis+"]");for(var s=0;s<o;s++)a=i[s],e.touched(a)||(r=a.prevTouched(e))!==a&&(r===(n=a.nextTouched(e))&&e.setRelative(a,a,e.distance(r,r,!1,!0),e,!0),e.interpolate(a,r,n,e))}function Zt(e,t){for(var a=t.stack,r=e?t.rp1:t.rp2,n=(e?t.z0:t.z1)[r],i=t.fv,o=t.pv,s=t.loop,l=t.z2;s--;){var c=a.pop(),u=l[c],d=o.distance(n,n,!1,!0);i.setRelative(u,u,d,o),i.touch(u),exports.DEBUG&&console.log(t.step,(t.loop>1?"loop "+(t.loop-s)+": ":"")+"SHP["+(e?"rp1":"rp2")+"]",c)}t.loop=1}function Xt(e,t){var a=t.stack,r=e?t.rp1:t.rp2,n=(e?t.z0:t.z1)[r],i=t.fv,o=t.pv,s=a.pop(),l=t.z2[t.contours[s]],c=l;exports.DEBUG&&console.log(t.step,"SHC["+e+"]",s);var u=o.distance(n,n,!1,!0);do{c!==n&&i.setRelative(c,c,u,o),c=c.nextPointOnContour}while(c!==l)}function Kt(e,t){var a,r,n=t.stack,i=e?t.rp1:t.rp2,o=(e?t.z0:t.z1)[i],s=t.fv,l=t.pv,c=n.pop();switch(exports.DEBUG&&console.log(t.step,"SHZ["+e+"]",c),c){case 0:a=t.tZone;break;case 1:a=t.gZone;break;default:throw new Error("Invalid zone")}for(var u=l.distance(o,o,!1,!0),d=a.length-2,p=0;p<d;p++)r=a[p],s.setRelative(r,r,u,l)}function $t(e,t){var a=t.stack,r=a.pop()/64,n=a.pop(),i=t.z1[n],o=t.z0[t.rp0],s=t.fv,l=t.pv;s.setRelative(i,o,r,l),s.touch(i),exports.DEBUG&&console.log(t.step,"MSIRP["+e+"]",r,n),t.rp1=t.rp0,t.rp2=n,e&&(t.rp0=n)}function ea(e,t){var a=t.stack,r=a.pop(),n=a.pop(),i=t.z0[n],o=t.fv,s=t.pv,l=t.cvt[r];exports.DEBUG&&console.log(t.step,"MIAP["+e+"]",r,"(",l,")",n);var c=s.distance(i,Bt);e&&(Math.abs(c-l)<t.cvCutIn&&(c=l),c=t.round(c)),o.setRelative(i,Bt,c,s),0===t.zp0&&(i.xo=i.x,i.yo=i.y),o.touch(i),t.rp0=t.rp1=n}function ta(e,t){var a=t.stack,r=a.pop(),n=t.z2[r];exports.DEBUG&&console.log(t.step,"GC["+e+"]",r),a.push(64*t.dpv.distance(n,Bt,e,!1))}function aa(e,t){var a=t.stack,r=a.pop(),n=a.pop(),i=t.z1[r],o=t.z0[n],s=t.dpv.distance(o,i,e,e);exports.DEBUG&&console.log(t.step,"MD["+e+"]",r,n,"->",s),t.stack.push(Math.round(64*s))}function ra(e,t){var a=t.stack,r=a.pop(),n=t.fv,i=t.pv,o=t.ppem,s=t.deltaBase+16*(e-1),l=t.deltaShift,c=t.z0;exports.DEBUG&&console.log(t.step,"DELTAP["+e+"]",r,a);for(var u=0;u<r;u++){var d=a.pop(),p=a.pop();if(s+((240&p)>>4)===o){var m=(15&p)-8;m>=0&&m++,exports.DEBUG&&console.log(t.step,"DELTAPFIX",d,"by",m*l);var h=c[d];n.setRelative(h,h,m*l,i)}}}function na(e,t){var a=t.stack,r=a.pop();exports.DEBUG&&console.log(t.step,"ROUND[]"),a.push(64*t.round(r/64))}function ia(e,t){var a=t.stack,r=a.pop(),n=t.ppem,i=t.deltaBase+16*(e-1),o=t.deltaShift;exports.DEBUG&&console.log(t.step,"DELTAC["+e+"]",r,a);for(var s=0;s<r;s++){var l=a.pop(),c=a.pop();if(i+((240&c)>>4)===n){var u=(15&c)-8;u>=0&&u++;var d=u*o;exports.DEBUG&&console.log(t.step,"DELTACFIX",l,"by",d),t.cvt[l]+=d}}}function oa(e,t){var a,r,n=t.stack,i=n.pop(),o=n.pop(),s=t.z2[i],l=t.z1[o];exports.DEBUG&&console.log(t.step,"SDPVTL["+e+"]",i,o),e?(a=s.y-l.y,r=l.x-s.x):(a=l.x-s.x,r=l.y-s.y),t.dpv=Lt(a,r)}function sa(e,t){var a=t.stack,r=t.prog,n=t.ip;exports.DEBUG&&console.log(t.step,"PUSHB["+e+"]");for(var i=0;i<e;i++)a.push(r[++n]);t.ip=n}function la(e,t){var a=t.ip,r=t.prog,n=t.stack;exports.DEBUG&&console.log(t.ip,"PUSHW["+e+"]");for(var i=0;i<e;i++){var o=r[++a]<<8|r[++a];32768&o&&(o=-(1+(65535^o))),n.push(o)}t.ip=a}function ca(e,t,a,r,n,i){var o,s,l,c,u=i.stack,d=e&&u.pop(),p=u.pop(),m=i.rp0,h=i.z0[m],g=i.z1[p],f=i.minDis,v=i.fv,b=i.dpv;l=(s=o=b.distance(g,h,!0,!0))>=0?1:-1,s=Math.abs(s),e&&(c=i.cvt[d],r&&Math.abs(s-c)<i.cvCutIn&&(s=c)),a&&s<f&&(s=f),r&&(s=i.round(s)),v.setRelative(g,h,l*s,b),v.touch(g),exports.DEBUG&&console.log(i.step,(e?"MIRP[":"MDRP[")+(t?"M":"m")+(a?">":"_")+(r?"R":"_")+(0===n?"Gr":1===n?"Bl":2===n?"Wh":"")+"]",e?d+"("+i.cvt[d]+","+c+")":"",p,"(d =",o,"->",l*s,")"),i.rp1=i.rp0,i.rp2=p,t&&(i.rp0=p)}Ct.prototype.exec=function(e,t){if("number"!==typeof t)throw new Error("Point size is not a number!");if(!(this._errorState>2)){var a=this.font,r=this._prepState;if(!r||r.ppem!==t){var n=this._fpgmState;if(!n){Ft.prototype=jt,(n=this._fpgmState=new Ft("fpgm",a.tables.fpgm)).funcs=[],n.font=a,exports.DEBUG&&(console.log("---EXEC FPGM---"),n.step=-1);try{yt(n)}catch(c){return console.log("Hinting error in FPGM:"+c),void(this._errorState=3)}}Ft.prototype=n,(r=this._prepState=new Ft("prep",a.tables.prep)).ppem=t;var i=a.tables.cvt;if(i)for(var o=r.cvt=new Array(i.length),s=t/a.unitsPerEm,l=0;l<i.length;l++)o[l]=i[l]*s;else r.cvt=[];exports.DEBUG&&(console.log("---EXEC PREP---"),r.step=-1);try{yt(r)}catch(c){this._errorState<2&&console.log("Hinting error in PREP:"+c),this._errorState=2}}if(!(this._errorState>1))try{return _t(e,r)}catch(c){return this._errorState<1&&(console.log("Hinting error:"+c),console.log("Note: further hinting errors are silenced")),void(this._errorState=1)}}},_t=function(e,t){var a,r,n,i=t.ppem/t.font.unitsPerEm,o=i,s=e.components;if(Ft.prototype=t,s){var l=t.font;r=[],a=[];for(var c=0;c<s.length;c++){var u=s[c],d=l.glyphs.get(u.glyphIndex);n=new Ft("glyf",d.instructions),exports.DEBUG&&(console.log("---EXEC COMP "+c+"---"),n.step=-1),Et(d,n,i,o);for(var p=Math.round(u.dx*i),m=Math.round(u.dy*o),h=n.gZone,g=n.contours,f=0;f<h.length;f++){var v=h[f];v.xTouched=v.yTouched=!1,v.xo=v.x=v.x+p,v.yo=v.y=v.y+m}var b=r.length;r.push.apply(r,h);for(var A=0;A<g.length;A++)a.push(g[A]+b)}e.instructions&&!n.inhibitGridFit&&((n=new Ft("glyf",e.instructions)).gZone=n.z0=n.z1=n.z2=r,n.contours=a,r.push(new Mt(0,0),new Mt(Math.round(e.advanceWidth*i),0)),exports.DEBUG&&(console.log("---EXEC COMPOSITE---"),n.step=-1),yt(n),r.length-=2)}else n=new Ft("glyf",e.instructions),exports.DEBUG&&(console.log("---EXEC GLYPH---"),n.step=-1),Et(e,n,i,o),r=n.gZone;return r},Et=function(e,t,a,r){for(var n,i,o,s=e.points||[],l=s.length,c=t.gZone=t.z0=t.z1=t.z2=[],u=t.contours=[],d=0;d<l;d++)n=s[d],c[d]=new Mt(n.x*a,n.y*r,n.lastPointOfContour,n.onCurve);for(var p=0;p<l;p++)n=c[p],i||(i=n,u.push(p)),n.lastPointOfContour?(n.nextPointOnContour=i,i.prevPointOnContour=n,i=void 0):(o=c[p+1],n.nextPointOnContour=o,o.prevPointOnContour=n);if(!t.inhibitGridFit){if(exports.DEBUG){console.log("PROCESSING GLYPH",t.stack);for(var m=0;m<l;m++)console.log(m,c[m].x,c[m].y)}if(c.push(new Mt(0,0),new Mt(Math.round(e.advanceWidth*a),0)),yt(t),c.length-=2,exports.DEBUG){console.log("FINISHED GLYPH",t.stack);for(var h=0;h<l;h++)console.log(h,c[h].x,c[h].y)}}},yt=function(e){var t=e.prog;if(t){var a,r=t.length;for(e.ip=0;e.ip<r;e.ip++){if(exports.DEBUG&&e.step++,!(a=At[t[e.ip]]))throw new Error("unknown instruction: 0x"+Number(t[e.ip]).toString(16));a(e)}}},At=[Gt.bind(void 0,Rt),Gt.bind(void 0,Dt),qt.bind(void 0,Rt),qt.bind(void 0,Dt),Ht.bind(void 0,Rt),Ht.bind(void 0,Dt),zt.bind(void 0,0),zt.bind(void 0,1),Wt.bind(void 0,0),Wt.bind(void 0,1),function(e){var t=e.stack,a=t.pop(),r=t.pop();exports.DEBUG&&console.log(e.step,"SPVFS[]",a,r),e.pv=e.dpv=Lt(r,a)},function(e){var t=e.stack,a=t.pop(),r=t.pop();exports.DEBUG&&console.log(e.step,"SPVFS[]",a,r),e.fv=Lt(r,a)},function(e){var t=e.stack,a=e.pv;exports.DEBUG&&console.log(e.step,"GPV[]"),t.push(16384*a.x),t.push(16384*a.y)},function(e){var t=e.stack,a=e.fv;exports.DEBUG&&console.log(e.step,"GFV[]"),t.push(16384*a.x),t.push(16384*a.y)},function(e){e.fv=e.pv,exports.DEBUG&&console.log(e.step,"SFVTPV[]")},function(e){var t=e.stack,a=t.pop(),r=t.pop(),n=t.pop(),i=t.pop(),o=t.pop(),s=e.z0,l=e.z1,c=s[a],u=s[r],d=l[n],p=l[i],m=e.z2[o];exports.DEBUG&&console.log("ISECT[], ",a,r,n,i,o);var h=c.x,g=c.y,f=u.x,v=u.y,b=d.x,A=d.y,y=p.x,_=p.y,E=(h-f)*(A-_)-(g-v)*(b-y),S=h*v-g*f,C=b*_-A*y;m.x=(S*(b-y)-C*(h-f))/E,m.y=(S*(A-_)-C*(g-v))/E},function(e){e.rp0=e.stack.pop(),exports.DEBUG&&console.log(e.step,"SRP0[]",e.rp0)},function(e){e.rp1=e.stack.pop(),exports.DEBUG&&console.log(e.step,"SRP1[]",e.rp1)},function(e){e.rp2=e.stack.pop(),exports.DEBUG&&console.log(e.step,"SRP2[]",e.rp2)},function(e){var t=e.stack.pop();switch(exports.DEBUG&&console.log(e.step,"SZP0[]",t),e.zp0=t,t){case 0:e.tZone||Ut(e),e.z0=e.tZone;break;case 1:e.z0=e.gZone;break;default:throw new Error("Invalid zone pointer")}},function(e){var t=e.stack.pop();switch(exports.DEBUG&&console.log(e.step,"SZP1[]",t),e.zp1=t,t){case 0:e.tZone||Ut(e),e.z1=e.tZone;break;case 1:e.z1=e.gZone;break;default:throw new Error("Invalid zone pointer")}},function(e){var t=e.stack.pop();switch(exports.DEBUG&&console.log(e.step,"SZP2[]",t),e.zp2=t,t){case 0:e.tZone||Ut(e),e.z2=e.tZone;break;case 1:e.z2=e.gZone;break;default:throw new Error("Invalid zone pointer")}},function(e){var t=e.stack.pop();switch(exports.DEBUG&&console.log(e.step,"SZPS[]",t),e.zp0=e.zp1=e.zp2=t,t){case 0:e.tZone||Ut(e),e.z0=e.z1=e.z2=e.tZone;break;case 1:e.z0=e.z1=e.z2=e.gZone;break;default:throw new Error("Invalid zone pointer")}},function(e){e.loop=e.stack.pop(),exports.DEBUG&&console.log(e.step,"SLOOP[]",e.loop)},function(e){exports.DEBUG&&console.log(e.step,"RTG[]"),e.round=wt},function(e){exports.DEBUG&&console.log(e.step,"RTHG[]"),e.round=It},function(e){var t=e.stack.pop();exports.DEBUG&&console.log(e.step,"SMD[]",t),e.minDis=t/64},function(e){exports.DEBUG&&console.log(e.step,"ELSE[]"),Vt(e,!1)},function(e){var t=e.stack.pop();exports.DEBUG&&console.log(e.step,"JMPR[]",t),e.ip+=t-1},function(e){var t=e.stack.pop();exports.DEBUG&&console.log(e.step,"SCVTCI[]",t),e.cvCutIn=t/64},void 0,void 0,function(e){var t=e.stack;exports.DEBUG&&console.log(e.step,"DUP[]"),t.push(t[t.length-1])},Qt,function(e){exports.DEBUG&&console.log(e.step,"CLEAR[]"),e.stack.length=0},function(e){var t=e.stack,a=t.pop(),r=t.pop();exports.DEBUG&&console.log(e.step,"SWAP[]"),t.push(a),t.push(r)},function(e){var t=e.stack;exports.DEBUG&&console.log(e.step,"DEPTH[]"),t.push(t.length)},function(e){var t=e.stack,a=t.pop();exports.DEBUG&&console.log(e.step,"CINDEX[]",a),t.push(t[t.length-a])},function(e){var t=e.stack,a=t.pop();exports.DEBUG&&console.log(e.step,"MINDEX[]",a),t.push(t.splice(t.length-a,1)[0])},void 0,void 0,void 0,function(e){var t=e.stack,a=t.pop(),r=t.pop();exports.DEBUG&&console.log(e.step,"LOOPCALL[]",a,r);var n=e.ip,i=e.prog;e.prog=e.funcs[a];for(var o=0;o<r;o++)yt(e),exports.DEBUG&&console.log(++e.step,o+1<r?"next loopcall":"done loopcall",o);e.ip=n,e.prog=i},function(e){var t=e.stack.pop();exports.DEBUG&&console.log(e.step,"CALL[]",t);var a=e.ip,r=e.prog;e.prog=e.funcs[t],yt(e),e.ip=a,e.prog=r,exports.DEBUG&&console.log(++e.step,"returning from",t)},function(e){if("fpgm"!==e.env)throw new Error("FDEF not allowed here");var t=e.stack,a=e.prog,r=e.ip,n=t.pop(),i=r;for(exports.DEBUG&&console.log(e.step,"FDEF[]",n);45!==a[++r];);e.ip=r,e.funcs[n]=a.slice(i+1,r)},void 0,Jt.bind(void 0,0),Jt.bind(void 0,1),Yt.bind(void 0,Rt),Yt.bind(void 0,Dt),Zt.bind(void 0,0),Zt.bind(void 0,1),Xt.bind(void 0,0),Xt.bind(void 0,1),Kt.bind(void 0,0),Kt.bind(void 0,1),function(e){for(var t=e.stack,a=e.loop,r=e.fv,n=t.pop()/64,i=e.z2;a--;){var o=t.pop(),s=i[o];exports.DEBUG&&console.log(e.step,(e.loop>1?"loop "+(e.loop-a)+": ":"")+"SHPIX[]",o,n),r.setRelative(s,s,n),r.touch(s)}e.loop=1},function(e){for(var t=e.stack,a=e.rp1,r=e.rp2,n=e.loop,i=e.z0[a],o=e.z1[r],s=e.fv,l=e.dpv,c=e.z2;n--;){var u=t.pop(),d=c[u];exports.DEBUG&&console.log(e.step,(e.loop>1?"loop "+(e.loop-n)+": ":"")+"IP[]",u,a,"<->",r),s.interpolate(d,i,o,l),s.touch(d)}e.loop=1},$t.bind(void 0,0),$t.bind(void 0,1),function(e){for(var t=e.stack,a=e.rp0,r=e.z0[a],n=e.loop,i=e.fv,o=e.pv,s=e.z1;n--;){var l=t.pop(),c=s[l];exports.DEBUG&&console.log(e.step,(e.loop>1?"loop "+(e.loop-n)+": ":"")+"ALIGNRP[]",l),i.setRelative(c,r,0,o),i.touch(c)}e.loop=1},function(e){exports.DEBUG&&console.log(e.step,"RTDG[]"),e.round=kt},ea.bind(void 0,0),ea.bind(void 0,1),function(e){var t=e.prog,a=e.ip,r=e.stack,n=t[++a];exports.DEBUG&&console.log(e.step,"NPUSHB[]",n);for(var i=0;i<n;i++)r.push(t[++a]);e.ip=a},function(e){var t=e.ip,a=e.prog,r=e.stack,n=a[++t];exports.DEBUG&&console.log(e.step,"NPUSHW[]",n);for(var i=0;i<n;i++){var o=a[++t]<<8|a[++t];32768&o&&(o=-(1+(65535^o))),r.push(o)}e.ip=t},function(e){var t=e.stack,a=e.store;a||(a=e.store=[]);var r=t.pop(),n=t.pop();exports.DEBUG&&console.log(e.step,"WS",r,n),a[n]=r},function(e){var t=e.stack,a=e.store,r=t.pop();exports.DEBUG&&console.log(e.step,"RS",r);var n=a&&a[r]||0;t.push(n)},function(e){var t=e.stack,a=t.pop(),r=t.pop();exports.DEBUG&&console.log(e.step,"WCVTP",a,r),e.cvt[r]=a/64},function(e){var t=e.stack,a=t.pop();exports.DEBUG&&console.log(e.step,"RCVT",a),t.push(64*e.cvt[a])},ta.bind(void 0,0),ta.bind(void 0,1),void 0,aa.bind(void 0,0),aa.bind(void 0,1),function(e){exports.DEBUG&&console.log(e.step,"MPPEM[]"),e.stack.push(e.ppem)},void 0,function(e){exports.DEBUG&&console.log(e.step,"FLIPON[]"),e.autoFlip=!0},void 0,void 0,function(e){var t=e.stack,a=t.pop(),r=t.pop();exports.DEBUG&&console.log(e.step,"LT[]",a,r),t.push(r<a?1:0)},function(e){var t=e.stack,a=t.pop(),r=t.pop();exports.DEBUG&&console.log(e.step,"LTEQ[]",a,r),t.push(r<=a?1:0)},function(e){var t=e.stack,a=t.pop(),r=t.pop();exports.DEBUG&&console.log(e.step,"GT[]",a,r),t.push(r>a?1:0)},function(e){var t=e.stack,a=t.pop(),r=t.pop();exports.DEBUG&&console.log(e.step,"GTEQ[]",a,r),t.push(r>=a?1:0)},function(e){var t=e.stack,a=t.pop(),r=t.pop();exports.DEBUG&&console.log(e.step,"EQ[]",a,r),t.push(a===r?1:0)},function(e){var t=e.stack,a=t.pop(),r=t.pop();exports.DEBUG&&console.log(e.step,"NEQ[]",a,r),t.push(a!==r?1:0)},function(e){var t=e.stack,a=t.pop();exports.DEBUG&&console.log(e.step,"ODD[]",a),t.push(Math.trunc(a)%2?1:0)},function(e){var t=e.stack,a=t.pop();exports.DEBUG&&console.log(e.step,"EVEN[]",a),t.push(Math.trunc(a)%2?0:1)},function(e){var t=e.stack.pop();exports.DEBUG&&console.log(e.step,"IF[]",t),t||(Vt(e,!0),exports.DEBUG&&console.log(e.step,"EIF[]"))},function(e){exports.DEBUG&&console.log(e.step,"EIF[]")},function(e){var t=e.stack,a=t.pop(),r=t.pop();exports.DEBUG&&console.log(e.step,"AND[]",a,r),t.push(a&&r?1:0)},function(e){var t=e.stack,a=t.pop(),r=t.pop();exports.DEBUG&&console.log(e.step,"OR[]",a,r),t.push(a||r?1:0)},function(e){var t=e.stack,a=t.pop();exports.DEBUG&&console.log(e.step,"NOT[]",a),t.push(a?0:1)},ra.bind(void 0,1),function(e){var t=e.stack.pop();exports.DEBUG&&console.log(e.step,"SDB[]",t),e.deltaBase=t},function(e){var t=e.stack.pop();exports.DEBUG&&console.log(e.step,"SDS[]",t),e.deltaShift=Math.pow(.5,t)},function(e){var t=e.stack,a=t.pop(),r=t.pop();exports.DEBUG&&console.log(e.step,"ADD[]",a,r),t.push(r+a)},function(e){var t=e.stack,a=t.pop(),r=t.pop();exports.DEBUG&&console.log(e.step,"SUB[]",a,r),t.push(r-a)},function(e){var t=e.stack,a=t.pop(),r=t.pop();exports.DEBUG&&console.log(e.step,"DIV[]",a,r),t.push(64*r/a)},function(e){var t=e.stack,a=t.pop(),r=t.pop();exports.DEBUG&&console.log(e.step,"MUL[]",a,r),t.push(r*a/64)},function(e){var t=e.stack,a=t.pop();exports.DEBUG&&console.log(e.step,"ABS[]",a),t.push(Math.abs(a))},function(e){var t=e.stack,a=t.pop();exports.DEBUG&&console.log(e.step,"NEG[]",a),t.push(-a)},function(e){var t=e.stack,a=t.pop();exports.DEBUG&&console.log(e.step,"FLOOR[]",a),t.push(64*Math.floor(a/64))},function(e){var t=e.stack,a=t.pop();exports.DEBUG&&console.log(e.step,"CEILING[]",a),t.push(64*Math.ceil(a/64))},na.bind(void 0,0),na.bind(void 0,1),na.bind(void 0,2),na.bind(void 0,3),void 0,void 0,void 0,void 0,function(e){var t=e.stack,a=t.pop(),r=t.pop();exports.DEBUG&&console.log(e.step,"WCVTF[]",a,r),e.cvt[r]=a*e.ppem/e.font.unitsPerEm},ra.bind(void 0,2),ra.bind(void 0,3),ia.bind(void 0,1),ia.bind(void 0,2),ia.bind(void 0,3),function(e){var t,a=e.stack.pop();switch(exports.DEBUG&&console.log(e.step,"SROUND[]",a),e.round=Pt,192&a){case 0:t=.5;break;case 64:t=1;break;case 128:t=2;break;default:throw new Error("invalid SROUND value")}switch(e.srPeriod=t,48&a){case 0:e.srPhase=0;break;case 16:e.srPhase=.25*t;break;case 32:e.srPhase=.5*t;break;case 48:e.srPhase=.75*t;break;default:throw new Error("invalid SROUND value")}a&=15,e.srThreshold=0===a?0:(a/8-.5)*t},function(e){var t,a=e.stack.pop();switch(exports.DEBUG&&console.log(e.step,"S45ROUND[]",a),e.round=Pt,192&a){case 0:t=Math.sqrt(2)/2;break;case 64:t=Math.sqrt(2);break;case 128:t=2*Math.sqrt(2);break;default:throw new Error("invalid S45ROUND value")}switch(e.srPeriod=t,48&a){case 0:e.srPhase=0;break;case 16:e.srPhase=.25*t;break;case 32:e.srPhase=.5*t;break;case 48:e.srPhase=.75*t;break;default:throw new Error("invalid S45ROUND value")}a&=15,e.srThreshold=0===a?0:(a/8-.5)*t},void 0,void 0,function(e){exports.DEBUG&&console.log(e.step,"ROFF[]"),e.round=xt},void 0,function(e){exports.DEBUG&&console.log(e.step,"RUTG[]"),e.round=Nt},function(e){exports.DEBUG&&console.log(e.step,"RDTG[]"),e.round=Ot},Qt,Qt,void 0,void 0,void 0,void 0,void 0,function(e){var t=e.stack.pop();exports.DEBUG&&console.log(e.step,"SCANCTRL[]",t)},oa.bind(void 0,0),oa.bind(void 0,1),function(e){var t=e.stack,a=t.pop(),r=0;exports.DEBUG&&console.log(e.step,"GETINFO[]",a),1&a&&(r=35),32&a&&(r|=4096),t.push(r)},void 0,function(e){var t=e.stack,a=t.pop(),r=t.pop(),n=t.pop();exports.DEBUG&&console.log(e.step,"ROLL[]"),t.push(r),t.push(a),t.push(n)},function(e){var t=e.stack,a=t.pop(),r=t.pop();exports.DEBUG&&console.log(e.step,"MAX[]",a,r),t.push(Math.max(r,a))},function(e){var t=e.stack,a=t.pop(),r=t.pop();exports.DEBUG&&console.log(e.step,"MIN[]",a,r),t.push(Math.min(r,a))},function(e){var t=e.stack.pop();exports.DEBUG&&console.log(e.step,"SCANTYPE[]",t)},function(e){var t=e.stack.pop(),a=e.stack.pop();switch(exports.DEBUG&&console.log(e.step,"INSTCTRL[]",t,a),t){case 1:return void(e.inhibitGridFit=!!a);case 2:return void(e.ignoreCvt=!!a);default:throw new Error("invalid INSTCTRL[] selector")}},void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,sa.bind(void 0,1),sa.bind(void 0,2),sa.bind(void 0,3),sa.bind(void 0,4),sa.bind(void 0,5),sa.bind(void 0,6),sa.bind(void 0,7),sa.bind(void 0,8),la.bind(void 0,1),la.bind(void 0,2),la.bind(void 0,3),la.bind(void 0,4),la.bind(void 0,5),la.bind(void 0,6),la.bind(void 0,7),la.bind(void 0,8),ca.bind(void 0,0,0,0,0,0),ca.bind(void 0,0,0,0,0,1),ca.bind(void 0,0,0,0,0,2),ca.bind(void 0,0,0,0,0,3),ca.bind(void 0,0,0,0,1,0),ca.bind(void 0,0,0,0,1,1),ca.bind(void 0,0,0,0,1,2),ca.bind(void 0,0,0,0,1,3),ca.bind(void 0,0,0,1,0,0),ca.bind(void 0,0,0,1,0,1),ca.bind(void 0,0,0,1,0,2),ca.bind(void 0,0,0,1,0,3),ca.bind(void 0,0,0,1,1,0),ca.bind(void 0,0,0,1,1,1),ca.bind(void 0,0,0,1,1,2),ca.bind(void 0,0,0,1,1,3),ca.bind(void 0,0,1,0,0,0),ca.bind(void 0,0,1,0,0,1),ca.bind(void 0,0,1,0,0,2),ca.bind(void 0,0,1,0,0,3),ca.bind(void 0,0,1,0,1,0),ca.bind(void 0,0,1,0,1,1),ca.bind(void 0,0,1,0,1,2),ca.bind(void 0,0,1,0,1,3),ca.bind(void 0,0,1,1,0,0),ca.bind(void 0,0,1,1,0,1),ca.bind(void 0,0,1,1,0,2),ca.bind(void 0,0,1,1,0,3),ca.bind(void 0,0,1,1,1,0),ca.bind(void 0,0,1,1,1,1),ca.bind(void 0,0,1,1,1,2),ca.bind(void 0,0,1,1,1,3),ca.bind(void 0,1,0,0,0,0),ca.bind(void 0,1,0,0,0,1),ca.bind(void 0,1,0,0,0,2),ca.bind(void 0,1,0,0,0,3),ca.bind(void 0,1,0,0,1,0),ca.bind(void 0,1,0,0,1,1),ca.bind(void 0,1,0,0,1,2),ca.bind(void 0,1,0,0,1,3),ca.bind(void 0,1,0,1,0,0),ca.bind(void 0,1,0,1,0,1),ca.bind(void 0,1,0,1,0,2),ca.bind(void 0,1,0,1,0,3),ca.bind(void 0,1,0,1,1,0),ca.bind(void 0,1,0,1,1,1),ca.bind(void 0,1,0,1,1,2),ca.bind(void 0,1,0,1,1,3),ca.bind(void 0,1,1,0,0,0),ca.bind(void 0,1,1,0,0,1),ca.bind(void 0,1,1,0,0,2),ca.bind(void 0,1,1,0,0,3),ca.bind(void 0,1,1,0,1,0),ca.bind(void 0,1,1,0,1,1),ca.bind(void 0,1,1,0,1,2),ca.bind(void 0,1,1,0,1,3),ca.bind(void 0,1,1,1,0,0),ca.bind(void 0,1,1,1,0,1),ca.bind(void 0,1,1,1,0,2),ca.bind(void 0,1,1,1,0,3),ca.bind(void 0,1,1,1,1,0),ca.bind(void 0,1,1,1,1,1),ca.bind(void 0,1,1,1,1,2),ca.bind(void 0,1,1,1,1,3)];var ua=Ct;function da(e){this.char=e,this.state={},this.activeState=null}function pa(e,t,a){this.contextName=a,this.startIndex=e,this.endOffset=t}function ma(e,t,a){this.contextName=e,this.openRange=null,this.ranges=[],this.checkStart=t,this.checkEnd=a}function ha(e,t){this.context=e,this.index=t,this.length=e.length,this.current=e[t],this.backtrack=e.slice(0,t),this.lookahead=e.slice(t+1)}function ga(e){this.eventId=e,this.subscribers=[]}function fa(e){var t=this,a=["start","end","next","newToken","contextStart","contextEnd","insertToken","removeToken","removeRange","replaceToken","replaceRange","composeRUD","updateContextsRanges"];a.forEach((function(e){Object.defineProperty(t.events,e,{value:new ga(e)})})),e&&a.forEach((function(a){var r=e[a];"function"===typeof r&&t.events[a].subscribe(r)}));["insertToken","removeToken","removeRange","replaceToken","replaceRange","composeRUD"].forEach((function(e){t.events[e].subscribe(t.updateContextsRanges)}))}function va(e){this.tokens=[],this.registeredContexts={},this.contextCheckers=[],this.events={},this.registeredModifiers=[],fa.call(this,e)}da.prototype.setState=function(e,t){return this.state[e]=t,this.activeState={key:e,value:this.state[e]},this.activeState},da.prototype.getState=function(e){return this.state[e]||null},va.prototype.inboundIndex=function(e){return e>=0&&e<this.tokens.length},va.prototype.composeRUD=function(e){var t=this,a=e.map((function(e){return t[e[0]].apply(t,e.slice(1).concat(!0))})),r=function(e){return"object"===typeof e&&e.hasOwnProperty("FAIL")};if(a.every(r))return{FAIL:"composeRUD: one or more operations hasn't completed successfully",report:a.filter(r)};this.dispatch("composeRUD",[a.filter((function(e){return!r(e)}))])},va.prototype.replaceRange=function(e,t,a,r){t=null!==t?t:this.tokens.length;var n=a.every((function(e){return e instanceof da}));if(!isNaN(e)&&this.inboundIndex(e)&&n){var i=this.tokens.splice.apply(this.tokens,[e,t].concat(a));return r||this.dispatch("replaceToken",[e,t,a]),[i,a]}return{FAIL:"replaceRange: invalid tokens or startIndex."}},va.prototype.replaceToken=function(e,t,a){if(!isNaN(e)&&this.inboundIndex(e)&&t instanceof da){var r=this.tokens.splice(e,1,t);return a||this.dispatch("replaceToken",[e,t]),[r[0],t]}return{FAIL:"replaceToken: invalid token or index."}},va.prototype.removeRange=function(e,t,a){t=isNaN(t)?this.tokens.length:t;var r=this.tokens.splice(e,t);return a||this.dispatch("removeRange",[r,e,t]),r},va.prototype.removeToken=function(e,t){if(!isNaN(e)&&this.inboundIndex(e)){var a=this.tokens.splice(e,1);return t||this.dispatch("removeToken",[a,e]),a}return{FAIL:"removeToken: invalid token index."}},va.prototype.insertToken=function(e,t,a){return e.every((function(e){return e instanceof da}))?(this.tokens.splice.apply(this.tokens,[t,0].concat(e)),a||this.dispatch("insertToken",[e,t]),e):{FAIL:"insertToken: invalid token(s)."}},va.prototype.registerModifier=function(e,t,a){this.events.newToken.subscribe((function(r,n){var i=[r,n],o=[r,n];if(null===t||!0===t.apply(this,i)){var s=a.apply(this,o);r.setState(e,s)}})),this.registeredModifiers.push(e)},ga.prototype.subscribe=function(e){return"function"===typeof e?this.subscribers.push(e)-1:{FAIL:"invalid '".concat(this.eventId,"' event handler")}},ga.prototype.unsubscribe=function(e){this.subscribers.splice(e,1)},ha.prototype.setCurrentIndex=function(e){this.index=e,this.current=this.context[e],this.backtrack=this.context.slice(0,e),this.lookahead=this.context.slice(e+1)},ha.prototype.get=function(e){switch(!0){case 0===e:return this.current;case e<0&&Math.abs(e)<=this.backtrack.length:return this.backtrack.slice(e)[0];case e>0&&e<=this.lookahead.length:return this.lookahead[e-1];default:return null}},va.prototype.rangeToText=function(e){if(e instanceof pa)return this.getRangeTokens(e).map((function(e){return e.char})).join("")},va.prototype.getText=function(){return this.tokens.map((function(e){return e.char})).join("")},va.prototype.getContext=function(e){var t=this.registeredContexts[e];return t||null},va.prototype.on=function(e,t){var a=this.events[e];return a?a.subscribe(t):null},va.prototype.dispatch=function(e,t){var a=this,r=this.events[e];r instanceof ga&&r.subscribers.forEach((function(e){e.apply(a,t||[])}))},va.prototype.registerContextChecker=function(e,t,a){if(this.getContext(e))return{FAIL:"context name '".concat(e,"' is already registered.")};if("function"!==typeof t)return{FAIL:"missing context start check."};if("function"!==typeof a)return{FAIL:"missing context end check."};var r=new ma(e,t,a);return this.registeredContexts[e]=r,this.contextCheckers.push(r),r},va.prototype.getRangeTokens=function(e){var t=e.startIndex+e.endOffset;return[].concat(this.tokens.slice(e.startIndex,t))},va.prototype.getContextRanges=function(e){var t=this.getContext(e);return t?t.ranges:{FAIL:"context checker '".concat(e,"' is not registered.")}},va.prototype.resetContextsRanges=function(){var e=this.registeredContexts;for(var t in e){if(e.hasOwnProperty(t))e[t].ranges=[]}},va.prototype.updateContextsRanges=function(){this.resetContextsRanges();for(var e=this.tokens.map((function(e){return e.char})),t=0;t<e.length;t++){var a=new ha(e,t);this.runContextCheck(a)}this.dispatch("updateContextsRanges",[this.registeredContexts])},va.prototype.setEndOffset=function(e,t){var a=new pa(this.getContext(t).openRange.startIndex,e,t),r=this.getContext(t).ranges;return a.rangeId="".concat(t,".").concat(r.length),r.push(a),this.getContext(t).openRange=null,a},va.prototype.runContextCheck=function(e){var t=this,a=e.index;this.contextCheckers.forEach((function(r){var n=r.contextName,i=t.getContext(n).openRange;if(!i&&r.checkStart(e)&&(i=new pa(a,null,n),t.getContext(n).openRange=i,t.dispatch("contextStart",[n,a])),i&&r.checkEnd(e)){var o=a-i.startIndex+1,s=t.setEndOffset(o,n);t.dispatch("contextEnd",[n,s])}}))},va.prototype.tokenize=function(e){this.tokens=[],this.resetContextsRanges();var t=Array.from(e);this.dispatch("start");for(var a=0;a<t.length;a++){var r=t[a],n=new ha(t,a);this.dispatch("next",[n]),this.runContextCheck(n);var i=new da(r);this.tokens.push(i),this.dispatch("newToken",[i,n])}return this.dispatch("end",[this.tokens]),this.tokens};var ba=va;function Aa(e){return/[\u0600-\u065F\u066A-\u06D2\u06FA-\u06FF]/.test(e)}function ya(e){return/[\u0630\u0690\u0621\u0631\u0661\u0671\u0622\u0632\u0672\u0692\u06C2\u0623\u0673\u0693\u06C3\u0624\u0694\u06C4\u0625\u0675\u0695\u06C5\u06E5\u0676\u0696\u06C6\u0627\u0677\u0697\u06C7\u0648\u0688\u0698\u06C8\u0689\u0699\u06C9\u068A\u06CA\u066B\u068B\u06CB\u068C\u068D\u06CD\u06FD\u068E\u06EE\u06FE\u062F\u068F\u06CF\u06EF]/.test(e)}function _a(e){return/[\u0600-\u0605\u060C-\u060E\u0610-\u061B\u061E\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED]/.test(e)}function Ea(e){return/[A-z]/.test(e)}function Sa(e){this.font=e,this.features={}}function Ca(e){this.id=e.id,this.tag=e.tag,this.substitution=e.substitution}function xa(e,t){if(!e)return-1;switch(t.format){case 1:return t.glyphs.indexOf(e);case 2:for(var a=t.ranges,r=0;r<a.length;r++){var n=a[r];if(e>=n.start&&e<=n.end){var i=e-n.start;return n.index+i}}break;default:return-1}return-1}function wa(e,t){return-1===xa(e,t.coverage)?null:e+t.deltaGlyphId}function ka(e,t){var a=xa(e,t.coverage);return-1===a?null:t.substitute[a]}function Ia(e,t){for(var a=[],r=0;r<e.length;r++){var n=e[r],i=t.current,o=xa(i=Array.isArray(i)?i[0]:i,n);-1!==o&&a.push(o)}return a.length!==e.length?-1:a}function Na(e,t){var a=t.inputCoverage.length+t.lookaheadCoverage.length+t.backtrackCoverage.length;if(e.context.length<a)return[];var r=Ia(t.inputCoverage,e);if(-1===r)return[];var n=t.inputCoverage.length-1;if(e.lookahead.length<t.lookaheadCoverage.length)return[];for(var i=e.lookahead.slice(n);i.length&&_a(i[0].char);)i.shift();var o=new ha(i,0),s=Ia(t.lookaheadCoverage,o),l=[].concat(e.backtrack);for(l.reverse();l.length&&_a(l[0].char);)l.shift();if(l.length<t.backtrackCoverage.length)return[];var c=new ha(l,0),u=Ia(t.backtrackCoverage,c),d=[];if(r.length===t.inputCoverage.length&&s.length===t.lookaheadCoverage.length&&u.length===t.backtrackCoverage.length)for(var p=0;p<t.lookupRecords.length;p++)for(var m=t.lookupRecords[p].lookupListIndex,h=this.getLookupByIndex(m),g=0;g<h.subtables.length;g++){var f=h.subtables[g],v=this.getLookupMethod(h,f);if("12"===this.getSubstitutionType(h,f))for(var b=0;b<r.length;b++){var A=v(e.get(b));A&&d.push(A)}}return d}function Oa(e,t){var a,r=xa(e.current,t.coverage);if(-1===r)return null;for(var n=t.ligatureSets[r],i=0;i<n.length;i++){a=n[i];for(var o=0;o<a.components.length;o++){if(e.lookahead[o]!==a.components[o])break;if(o===a.components.length-1)return a}}return null}function Pa(e,t){var a=xa(e,t.coverage);return-1===a?null:t.sequences[a]}Sa.prototype.getDefaultScriptFeaturesIndexes=function(){for(var e=this.font.tables.gsub.scripts,t=0;t<e.length;t++){var a=e[t];if("DFLT"===a.tag)return a.script.defaultLangSys.featureIndexes}return[]},Sa.prototype.getScriptFeaturesIndexes=function(e){if(!this.font.tables.gsub)return[];if(!e)return this.getDefaultScriptFeaturesIndexes();for(var t=this.font.tables.gsub.scripts,a=0;a<t.length;a++){var r=t[a];if(r.tag===e&&r.script.defaultLangSys)return r.script.defaultLangSys.featureIndexes;var n=r.langSysRecords;if(n)for(var i=0;i<n.length;i++){var o=n[i];if(o.tag===e)return o.langSys.featureIndexes}}return this.getDefaultScriptFeaturesIndexes()},Sa.prototype.mapTagsToFeatures=function(e,t){for(var a={},r=0;r<e.length;r++){var n=e[r].tag,i=e[r].feature;a[n]=i}this.features[t].tags=a},Sa.prototype.getScriptFeatures=function(e){var t=this.features[e];if(this.features.hasOwnProperty(e))return t;var a=this.getScriptFeaturesIndexes(e);if(!a)return null;var r=this.font.tables.gsub;return t=a.map((function(e){return r.features[e]})),this.features[e]=t,this.mapTagsToFeatures(t,e),t},Sa.prototype.getSubstitutionType=function(e,t){return e.lookupType.toString()+t.substFormat.toString()},Sa.prototype.getLookupMethod=function(e,t){var a=this;switch(this.getSubstitutionType(e,t)){case"11":return function(e){return wa.apply(a,[e,t])};case"12":return function(e){return ka.apply(a,[e,t])};case"63":return function(e){return Na.apply(a,[e,t])};case"41":return function(e){return Oa.apply(a,[e,t])};case"21":return function(e){return Pa.apply(a,[e,t])};default:throw new Error("lookupType: ".concat(e.lookupType," - ")+"substFormat: ".concat(t.substFormat," ")+"is not yet supported")}},Sa.prototype.lookupFeature=function(e){var t=e.contextParams,a=t.index,r=this.getFeature({tag:e.tag,script:e.script});if(!r)return new Error("font '".concat(this.font.names.fullName.en,"' ")+"doesn't support feature '".concat(e.tag,"' ")+"for script '".concat(e.script,"'."));for(var n=this.getFeatureLookups(r),i=[].concat(t.context),o=0;o<n.length;o++)for(var s=n[o],l=this.getLookupSubtables(s),c=0;c<l.length;c++){var u=l[c],d=this.getSubstitutionType(s,u),p=this.getLookupMethod(s,u),m=void 0;switch(d){case"11":(m=p(t.current))&&i.splice(a,1,new Ca({id:11,tag:e.tag,substitution:m}));break;case"12":(m=p(t.current))&&i.splice(a,1,new Ca({id:12,tag:e.tag,substitution:m}));break;case"63":m=p(t),Array.isArray(m)&&m.length&&i.splice(a,1,new Ca({id:63,tag:e.tag,substitution:m}));break;case"41":(m=p(t))&&i.splice(a,1,new Ca({id:41,tag:e.tag,substitution:m}));break;case"21":(m=p(t.current))&&i.splice(a,1,new Ca({id:21,tag:e.tag,substitution:m}))}t=new ha(i,a),Array.isArray(m)&&!m.length||(m=null)}return i.length?i:null},Sa.prototype.supports=function(e){if(!e.script)return!1;this.getScriptFeatures(e.script);var t=this.features.hasOwnProperty(e.script);if(!e.tag)return t;var a=this.features[e.script].some((function(t){return t.tag===e.tag}));return t&&a},Sa.prototype.getLookupSubtables=function(e){return e.subtables||null},Sa.prototype.getLookupByIndex=function(e){return this.font.tables.gsub.lookups[e]||null},Sa.prototype.getFeatureLookups=function(e){return e.lookupListIndexes.map(this.getLookupByIndex.bind(this))},Sa.prototype.getFeature=function(e){if(!this.font)return{FAIL:"No font was found"};this.features.hasOwnProperty(e.script)||this.getScriptFeatures(e.script);var t=this.features[e.script];return t?t.tags[e.tag]?this.features[e.script].tags[e.tag]:null:{FAIL:"No feature for script ".concat(e.script)}};var Da=Sa;var Ra={startCheck:function(e){var t=e.current,a=e.get(-1);return null===a&&Aa(t)||!Aa(a)&&Aa(t)},endCheck:function(e){var t=e.get(1);return null===t||!Aa(t)}};var Ta={startCheck:function(e){var t=e.current,a=e.get(-1);return(Aa(t)||_a(t))&&!Aa(a)},endCheck:function(e){var t=e.get(1);switch(!0){case null===t:return!0;case!Aa(t)&&!_a(t):var a=/\s/.test(t);if(!a)return!0;if(a){if(!e.lookahead.some((function(e){return Aa(e)||_a(e)})))return!0}break;default:return!1}}};var La={11:function(e,t,a){t[a].setState(e.tag,e.substitution)},12:function(e,t,a){t[a].setState(e.tag,e.substitution)},63:function(e,t,a){e.substitution.forEach((function(r,n){t[a+n].setState(e.tag,r)}))},41:function(e,t,a){var r=t[a];r.setState(e.tag,e.substitution.ligGlyph);for(var n=e.substitution.components.length,i=0;i<n;i++)(r=t[a+i+1]).setState("deleted",!0)}};var Ma=function(e,t,a){e instanceof Ca&&La[e.id](e,t,a)};var Ba=function(e){var t=this,a=this.featuresTags.arab,r=this.tokenizer.getRangeTokens(e);if(1!==r.length){var n=new ha(r.map((function(e){return e.getState("glyphIndex")})),0),i=new ha(r.map((function(e){return e.char})),0);r.forEach((function(e,o){if(!_a(e.char)){n.setCurrentIndex(o),i.setCurrentIndex(o);var s,l=0;switch(function(e){for(var t=[].concat(e.backtrack),a=t.length-1;a>=0;a--){var r=t[a],n=ya(r),i=_a(r);if(!n&&!i)return!0;if(n)return!1}return!1}(i)&&(l|=1),function(e){if(ya(e.current))return!1;for(var t=0;t<e.lookahead.length;t++){if(!_a(e.lookahead[t]))return!0}return!1}(i)&&(l|=2),l){case 1:s="fina";break;case 2:s="init";break;case 3:s="medi"}if(-1!==a.indexOf(s)){var c=t.query.lookupFeature({tag:s,script:"arab",contextParams:n});if(c instanceof Error)return console.info(c.message);c.forEach((function(e,t){e instanceof Ca&&(Ma(e,r,t),n.context[t]=e.substitution)}))}}}))}};function ja(e,t){return new ha(e.map((function(e){return e.activeState.value})),t||0)}var Fa=function(e){var t=this,a=this.tokenizer.getRangeTokens(e),r=ja(a);r.context.forEach((function(e,n){r.setCurrentIndex(n);var i=t.query.lookupFeature({tag:"rlig",script:"arab",contextParams:r});i.length&&(i.forEach((function(e){return Ma(e,a,n)})),r=ja(a))}))};var Ua={startCheck:function(e){var t=e.current,a=e.get(-1);return null===a&&Ea(t)||!Ea(a)&&Ea(t)},endCheck:function(e){var t=e.get(1);return null===t||!Ea(t)}};function Va(e,t){return new ha(e.map((function(e){return e.activeState.value})),t||0)}var Ga=function(e){var t=this,a=this.tokenizer.getRangeTokens(e),r=Va(a);r.context.forEach((function(e,n){r.setCurrentIndex(n);var i=t.query.lookupFeature({tag:"liga",script:"latn",contextParams:r});i.length&&(i.forEach((function(e){return Ma(e,a,n)})),r=Va(a))}))};function qa(e){this.baseDir=e||"ltr",this.tokenizer=new ba,this.featuresTags={}}function Ha(e){var t=this.contextChecks["".concat(e,"Check")];return this.tokenizer.registerContextChecker(e,t.startCheck,t.endCheck)}function za(){return Ha.call(this,"latinWord"),Ha.call(this,"arabicWord"),Ha.call(this,"arabicSentence"),this.tokenizer.tokenize(this.text)}function Wa(){var e=this;this.tokenizer.getContextRanges("arabicSentence").forEach((function(t){var a=e.tokenizer.getRangeTokens(t);e.tokenizer.replaceRange(t.startIndex,t.endOffset,a.reverse())}))}function Qa(){if(-1===this.tokenizer.registeredModifiers.indexOf("glyphIndex"))throw new Error("glyphIndex modifier is required to apply arabic presentation features.")}function Ja(){var e=this;this.featuresTags.hasOwnProperty("arab")&&(Qa.call(this),this.tokenizer.getContextRanges("arabicWord").forEach((function(t){Ba.call(e,t)})))}function Ya(){var e=this;this.featuresTags.hasOwnProperty("arab")&&(-1!==this.featuresTags.arab.indexOf("rlig")&&(Qa.call(this),this.tokenizer.getContextRanges("arabicWord").forEach((function(t){Fa.call(e,t)}))))}function Za(){var e=this;this.featuresTags.hasOwnProperty("latn")&&(-1!==this.featuresTags.latn.indexOf("liga")&&(Qa.call(this),this.tokenizer.getContextRanges("latinWord").forEach((function(t){Ga.call(e,t)}))))}qa.prototype.setText=function(e){this.text=e},qa.prototype.contextChecks={latinWordCheck:Ua,arabicWordCheck:Ra,arabicSentenceCheck:Ta},qa.prototype.registerFeatures=function(e,t){var a=this,r=t.filter((function(t){return a.query.supports({script:e,tag:t})}));this.featuresTags.hasOwnProperty(e)?this.featuresTags[e]=this.featuresTags[e].concat(r):this.featuresTags[e]=r},qa.prototype.applyFeatures=function(e,t){if(!e)throw new Error("No valid font was provided to apply features");this.query||(this.query=new Da(e));for(var a=0;a<t.length;a++){var r=t[a];this.query.supports({script:r.script})&&this.registerFeatures(r.script,r.tags)}},qa.prototype.registerModifier=function(e,t,a){this.tokenizer.registerModifier(e,t,a)},qa.prototype.checkContextReady=function(e){return!!this.tokenizer.getContext(e)},qa.prototype.applyFeaturesToContexts=function(){this.checkContextReady("arabicWord")&&(Ja.call(this),Ya.call(this)),this.checkContextReady("latinWord")&&Za.call(this),this.checkContextReady("arabicSentence")&&Wa.call(this)},qa.prototype.processText=function(e){this.text&&this.text===e||(this.setText(e),za.call(this),this.applyFeaturesToContexts())},qa.prototype.getBidiText=function(e){return this.processText(e),this.tokenizer.getText()},qa.prototype.getTextGlyphs=function(e){this.processText(e);for(var t=[],a=0;a<this.tokenizer.tokens.length;a++){var r=this.tokenizer.tokens[a];if(!r.state.deleted){var n=r.activeState.value;t.push(Array.isArray(n)?n[0]:n)}}return t};var Xa=qa;function Ka(e){(e=e||{}).empty||(Object(mt.b)(e.familyName,"When creating a new Font object, familyName is required."),Object(mt.b)(e.styleName,"When creating a new Font object, styleName is required."),Object(mt.b)(e.unitsPerEm,"When creating a new Font object, unitsPerEm is required."),Object(mt.b)(e.ascender,"When creating a new Font object, ascender is required."),Object(mt.b)(e.descender,"When creating a new Font object, descender is required."),Object(mt.b)(e.descender<0,"Descender should be negative (e.g. -512)."),this.names={fontFamily:{en:e.familyName||" "},fontSubfamily:{en:e.styleName||" "},fullName:{en:e.fullName||e.familyName+" "+e.styleName},postScriptName:{en:e.postScriptName||(e.familyName+e.styleName).replace(/\s/g,"")},designer:{en:e.designer||" "},designerURL:{en:e.designerURL||" "},manufacturer:{en:e.manufacturer||" "},manufacturerURL:{en:e.manufacturerURL||" "},license:{en:e.license||" "},licenseURL:{en:e.licenseURL||" "},version:{en:e.version||"Version 0.1"},description:{en:e.description||" "},copyright:{en:e.copyright||" "},trademark:{en:e.trademark||" "}},this.unitsPerEm=e.unitsPerEm||1e3,this.ascender=e.ascender,this.descender=e.descender,this.createdTimestamp=e.createdTimestamp,this.tables={os2:{usWeightClass:e.weightClass||this.usWeightClasses.MEDIUM,usWidthClass:e.widthClass||this.usWidthClasses.MEDIUM,fsSelection:e.fsSelection||this.fsSelectionValues.REGULAR}}),this.supported=!0,this.glyphs=new ne.GlyphSet(this,e.glyphs||[]),this.encoding=new J(this),this.position=new lt(this),this.substitution=new pt(this),this.tables=this.tables||{},this._push=null,this._hmtxTableData={},Object.defineProperty(this,"hinting",{get:function(){return this._hinting?this._hinting:"truetype"===this.outlinesFormat?this._hinting=new ua(this):void 0}})}Ka.prototype.hasChar=function(e){return null!==this.encoding.charToGlyphIndex(e)},Ka.prototype.charToGlyphIndex=function(e){return this.encoding.charToGlyphIndex(e)},Ka.prototype.charToGlyph=function(e){var t=this.charToGlyphIndex(e),a=this.glyphs.get(t);return a||(a=this.glyphs.get(0)),a},Ka.prototype.updateFeatures=function(e){return this.defaultRenderOptions.features.map((function(t){return"latn"===t.script?{script:"latn",tags:t.tags.filter((function(t){return e[t]}))}:t}))},Ka.prototype.stringToGlyphs=function(e,t){var a=this,r=new Xa;r.registerModifier("glyphIndex",null,(function(e){return a.charToGlyphIndex(e.char)}));var n=t?this.updateFeatures(t.features):this.defaultRenderOptions.features;r.applyFeatures(this,n);for(var i=r.getTextGlyphs(e),o=i.length,s=new Array(o),l=this.glyphs.get(0),c=0;c<o;c+=1)s[c]=this.glyphs.get(i[c])||l;return s},Ka.prototype.nameToGlyphIndex=function(e){return this.glyphNames.nameToGlyphIndex(e)},Ka.prototype.nameToGlyph=function(e){var t=this.nameToGlyphIndex(e),a=this.glyphs.get(t);return a||(a=this.glyphs.get(0)),a},Ka.prototype.glyphIndexToName=function(e){return this.glyphNames.glyphIndexToName?this.glyphNames.glyphIndexToName(e):""},Ka.prototype.getKerningValue=function(e,t){e=e.index||e,t=t.index||t;var a=this.position.defaultKerningTables;return a?this.position.getKerningValue(a,e,t):this.kerningPairs[e+","+t]||0},Ka.prototype.defaultRenderOptions={kerning:!0,features:[{script:"arab",tags:["init","medi","fina","rlig"]},{script:"latn",tags:["liga","rlig"]}]},Ka.prototype.forEachGlyph=function(e,t,a,r,n,i){t=void 0!==t?t:0,a=void 0!==a?a:0,r=void 0!==r?r:72,n=n||this.defaultRenderOptions;var o,s=1/this.unitsPerEm*r,l=this.stringToGlyphs(e);if(n.kerning){var c=n.script||this.position.getDefaultScriptName();o=this.position.getKerningTables(c,n.language)}for(var u=0;u<l.length;u+=1){var d=l[u];if(i.call(this,d,t,a,r,n),d.advanceWidth&&(t+=d.advanceWidth*s),n.kerning&&u<l.length-1)t+=(o?this.position.getKerningValue(o,d.index,l[u+1].index):this.getKerningValue(d,l[u+1]))*s;n.letterSpacing?t+=n.letterSpacing*r:n.tracking&&(t+=n.tracking/1e3*r)}return t},Ka.prototype.getPath=function(e,t,a,r,n){var i=this;if(e){for(var o=[],s=e.split("\n"),l=function(){var e=new c;i.forEachGlyph(s[u],t,u*r*n.lineSpacing,r,n,(function(t,a,r,i){var o=t.getPath(a,r,i,n,this,u);e.extend(o),e.height=o.height,e.linenumber=o.linenumber,e.startx=o.startx,e.starty=o.starty,e.width=o.width})),s[u]&&o.push(e)},u=0;u<s.length;u++)l();return o}},Ka.prototype.getPaths=function(e,t,a,r,n){if(e){for(var i=[],o=e.split("\n"),s=0;s<o.length;s++)this.forEachGlyph(o[s],t,s*r*n.lineSpacing,r,n,(function(e,t,a,r){var o=e.getPath(t,a,r,n,this,s);i.push(o)}));return i}},Ka.prototype.getAdvanceWidth=function(e,t,a){return this.forEachGlyph(e,0,0,t,a,(function(){}))},Ka.prototype.draw=function(e,t,a,r,n,i){this.getPath(t,a,r,n,i).draw(e)},Ka.prototype.drawPoints=function(e,t,a,r,n,i){this.forEachGlyph(t,a,r,n,i,(function(t,a,r,n){t.drawPoints(e,a,r,n)}))},Ka.prototype.drawMetrics=function(e,t,a,r,n,i){this.forEachGlyph(t,a,r,n,i,(function(t,a,r,n){t.drawMetrics(e,a,r,n)}))},Ka.prototype.getEnglishName=function(e){var t=this.names[e];if(t)return t.en},Ka.prototype.validate=function(){var e=[],t=this;function a(t,a){t||e.push(a)}function r(e){var r=t.getEnglishName(e);a(r&&r.trim().length>0,"No English "+e+" specified.")}r("fontFamily"),r("weightName"),r("manufacturer"),r("copyright"),r("version"),a(this.unitsPerEm>0,"No unitsPerEm specified.")},Ka.prototype.toTables=function(){return tt.fontToTable(this)},Ka.prototype.toBuffer=function(){return console.warn("Font.toBuffer is deprecated. Use Font.toArrayBuffer instead."),this.toArrayBuffer()},Ka.prototype.toArrayBuffer=function(){for(var e=this.toTables().encode(),t=new ArrayBuffer(e.length),a=new Uint8Array(t),r=0;r<e.length;r++)a[r]=e[r];return t},Ka.prototype.download=function(e){var t=this.getEnglishName("fontFamily"),r=this.getEnglishName("fontSubfamily");e=e||t.replace(/\s/g,"")+"-"+r+".otf";var n=this.toArrayBuffer();if(Object(mt.c)())if(window.URL=window.URL||window.webkitURL,window.URL){var i=new DataView(n),o=new Blob([i],{type:"font/opentype"}),s=document.createElement("a");s.href=window.URL.createObjectURL(o),s.download=e;var l=document.createEvent("MouseEvents");l.initEvent("click",!0,!1),s.dispatchEvent(l)}else console.warn("Font file could not be downloaded. Try using a different browser.");else{var c=a(222),u=Object(mt.a)(n);c.writeFileSync(e,u)}},Ka.prototype.fsSelectionValues={ITALIC:1,UNDERSCORE:2,NEGATIVE:4,OUTLINED:8,STRIKEOUT:16,BOLD:32,REGULAR:64,USER_TYPO_METRICS:128,WWS:256,OBLIQUE:512},Ka.prototype.usWidthClasses={ULTRA_CONDENSED:1,EXTRA_CONDENSED:2,CONDENSED:3,SEMI_CONDENSED:4,MEDIUM:5,SEMI_EXPANDED:6,EXPANDED:7,EXTRA_EXPANDED:8,ULTRA_EXPANDED:9},Ka.prototype.usWeightClasses={THIN:100,EXTRA_LIGHT:200,LIGHT:300,NORMAL:400,MEDIUM:500,SEMI_BOLD:600,BOLD:700,EXTRA_BOLD:800,BLACK:900};var $a=Ka;function er(e,t){var a=JSON.stringify(e),r=256;for(var n in t){var i=parseInt(n);if(i&&!(i<256)){if(JSON.stringify(t[n])===a)return i;r<=i&&(r=i+1)}}return t[r]=e,r}function tr(e,t,a){var r=er(t.name,a);return[{name:"tag_"+e,type:"TAG",value:t.tag},{name:"minValue_"+e,type:"FIXED",value:t.minValue<<16},{name:"defaultValue_"+e,type:"FIXED",value:t.defaultValue<<16},{name:"maxValue_"+e,type:"FIXED",value:t.maxValue<<16},{name:"flags_"+e,type:"USHORT",value:0},{name:"nameID_"+e,type:"USHORT",value:r}]}function ar(e,t,a){var r={},n=new V.Parser(e,t);return r.tag=n.parseTag(),r.minValue=n.parseFixed(),r.defaultValue=n.parseFixed(),r.maxValue=n.parseFixed(),n.skip("uShort",1),r.name=a[n.parseUShort()]||{},r}function rr(e,t,a,r){for(var n=[{name:"nameID_"+e,type:"USHORT",value:er(t.name,r)},{name:"flags_"+e,type:"USHORT",value:0}],i=0;i<a.length;++i){var o=a[i].tag;n.push({name:"axis_"+e+" "+o,type:"FIXED",value:t.coordinates[o]<<16})}return n}function nr(e,t,a,r){var n={},i=new V.Parser(e,t);n.name=r[i.parseUShort()]||{},i.skip("uShort",1),n.coordinates={};for(var o=0;o<a.length;++o)n.coordinates[a[o].tag]=i.parseFixed();return n}var ir={make:function(e,t){var a=new R.Table("fvar",[{name:"version",type:"ULONG",value:65536},{name:"offsetToData",type:"USHORT",value:0},{name:"countSizePairs",type:"USHORT",value:2},{name:"axisCount",type:"USHORT",value:e.axes.length},{name:"axisSize",type:"USHORT",value:20},{name:"instanceCount",type:"USHORT",value:e.instances.length},{name:"instanceSize",type:"USHORT",value:4+4*e.axes.length}]);a.offsetToData=a.sizeOf();for(var r=0;r<e.axes.length;r++)a.fields=a.fields.concat(tr(r,e.axes[r],t));for(var n=0;n<e.instances.length;n++)a.fields=a.fields.concat(rr(n,e.instances[n],e.axes,t));return a},parse:function(e,t,a){var r=new V.Parser(e,t),n=r.parseULong();p.argument(65536===n,"Unsupported fvar table version.");var i=r.parseOffset16();r.skip("uShort",1);for(var o=r.parseUShort(),s=r.parseUShort(),l=r.parseUShort(),c=r.parseUShort(),u=[],d=0;d<o;d++)u.push(ar(e,t+i+d*s,a));for(var m=[],h=t+i+o*s,g=0;g<l;g++)m.push(nr(e,h+g*c,u,a));return{axes:u,instances:m}}},or=new Array(10);or[1]=function(){var e=this.offset+this.relativeOffset,t=this.parseUShort();return 1===t?{posFormat:1,coverage:this.parsePointer(F.coverage),value:this.parseValueRecord()}:2===t?{posFormat:2,coverage:this.parsePointer(F.coverage),values:this.parseValueRecordList()}:void p.assert(!1,"0x"+e.toString(16)+": GPOS lookup type 1 format must be 1 or 2.")},or[2]=function(){var e=this.offset+this.relativeOffset,t=this.parseUShort();p.assert(1===t||2===t,"0x"+e.toString(16)+": GPOS lookup type 2 format must be 1 or 2.");var a=this.parsePointer(F.coverage),r=this.parseUShort(),n=this.parseUShort();if(1===t)return{posFormat:t,coverage:a,valueFormat1:r,valueFormat2:n,pairSets:this.parseList(F.pointer(F.list((function(){return{secondGlyph:this.parseUShort(),value1:this.parseValueRecord(r),value2:this.parseValueRecord(n)}}))))};if(2===t){var i=this.parsePointer(F.classDef),o=this.parsePointer(F.classDef),s=this.parseUShort(),l=this.parseUShort();return{posFormat:t,coverage:a,valueFormat1:r,valueFormat2:n,classDef1:i,classDef2:o,class1Count:s,class2Count:l,classRecords:this.parseList(s,F.list(l,(function(){return{value1:this.parseValueRecord(r),value2:this.parseValueRecord(n)}})))}}},or[3]=function(){return{error:"GPOS Lookup 3 not supported"}},or[4]=function(){return{error:"GPOS Lookup 4 not supported"}},or[5]=function(){return{error:"GPOS Lookup 5 not supported"}},or[6]=function(){return{error:"GPOS Lookup 6 not supported"}},or[7]=function(){return{error:"GPOS Lookup 7 not supported"}},or[8]=function(){return{error:"GPOS Lookup 8 not supported"}},or[9]=function(){return{error:"GPOS Lookup 9 not supported"}};var sr=new Array(10);var lr={parse:function(e,t){var a=new F(e,t=t||0),r=a.parseVersion(1);return p.argument(1===r||1.1===r,"Unsupported GPOS table version "+r),1===r?{version:r,scripts:a.parseScriptList(),features:a.parseFeatureList(),lookups:a.parseLookupList(or)}:{version:r,scripts:a.parseScriptList(),features:a.parseFeatureList(),lookups:a.parseLookupList(or),variations:a.parseFeatureVariationsList()}},make:function(e){return new R.Table("GPOS",[{name:"version",type:"ULONG",value:65536},{name:"scripts",type:"TABLE",value:new R.ScriptList(e.scripts)},{name:"features",type:"TABLE",value:new R.FeatureList(e.features)},{name:"lookups",type:"TABLE",value:new R.LookupList(e.lookups,sr)}])}};var cr={parse:function(e,t){var a=new V.Parser(e,t),r=a.parseUShort();if(0===r)return function(e){var t={};e.skip("uShort");var a=e.parseUShort();p.argument(0===a,"Unsupported kern sub-table version."),e.skip("uShort",2);var r=e.parseUShort();e.skip("uShort",3);for(var n=0;n<r;n+=1){var i=e.parseUShort(),o=e.parseUShort(),s=e.parseShort();t[i+","+o]=s}return t}(a);if(1===r)return function(e){var t={};e.skip("uShort"),e.parseULong()>1&&console.warn("Only the first kern subtable is supported."),e.skip("uLong");var a=255&e.parseUShort();if(e.skip("uShort"),0===a){var r=e.parseUShort();e.skip("uShort",3);for(var n=0;n<r;n+=1){var i=e.parseUShort(),o=e.parseUShort(),s=e.parseShort();t[i+","+o]=s}}return t}(a);throw new Error("Unsupported kern table version ("+r+").")}};var ur={parse:function(e,t,a,r){for(var n=new V.Parser(e,t),i=r?n.parseUShort:n.parseULong,o=[],s=0;s<a+1;s+=1){var l=i.call(n);r&&(l*=2),o.push(l)}return o}};function dr(e,t){a(222).readFile(e,(function(e,a){if(e)return t(e.message);t(null,Object(mt.d)(a))}))}function pr(e,t){var a=new XMLHttpRequest;a.open("get",e,!0),a.responseType="arraybuffer",a.onload=function(){return a.response?t(null,a.response):t("Font could not be loaded: "+a.statusText)},a.onerror=function(){t("Font could not be loaded")},a.send()}function mr(e,t){for(var a=[],r=12,n=0;n<t;n+=1){var i=V.getTag(e,r),o=V.getULong(e,r+4),s=V.getULong(e,r+8),l=V.getULong(e,r+12);a.push({tag:i,checksum:o,offset:s,length:l,compression:!1}),r+=16}return a}function hr(e,t){if("WOFF"===t.compression){var a=new Uint8Array(e.buffer,t.offset+2,t.compressedLength-2),r=new Uint8Array(t.length);if(n()(a,r),r.byteLength!==t.length)throw new Error("Decompression error: "+t.tag+" decompressed length doesn't match recorded length");return{data:new DataView(r.buffer,0),offset:0}}return{data:e,offset:t.offset}}function gr(e,t){var a,r;t=void 0===t||null===t?{}:t;var n,i,o,s,l,c,u,d,p,m,h,g,f=new $a({empty:!0}),v=new DataView(e,0),b=[],A=V.getTag(v,0);if(A===String.fromCharCode(0,1,0,0)||"true"===A||"typ1"===A)f.outlinesFormat="truetype",b=mr(v,n=V.getUShort(v,4));else if("OTTO"===A)f.outlinesFormat="cff",b=mr(v,n=V.getUShort(v,4));else{if("wOFF"!==A)throw new Error("Unsupported OpenType signature "+A);var y=V.getTag(v,4);if(y===String.fromCharCode(0,1,0,0))f.outlinesFormat="truetype";else{if("OTTO"!==y)throw new Error("Unsupported OpenType flavor "+A);f.outlinesFormat="cff"}b=function(e,t){for(var a=[],r=44,n=0;n<t;n+=1){var i=V.getTag(e,r),o=V.getULong(e,r+4),s=V.getULong(e,r+8),l=V.getULong(e,r+12),c=void 0;c=s<l&&"WOFF",a.push({tag:i,offset:o,compression:c,compressedLength:s,length:l}),r+=20}return a}(v,n=V.getUShort(v,12))}for(var _=0;_<n;_+=1){var E=b[_],S=void 0;switch(E.tag){case"cmap":S=hr(v,E),f.tables.cmap=q.parse(S.data,S.offset),f.encoding=new Y(f.tables.cmap);break;case"cvt ":S=hr(v,E),g=new V.Parser(S.data,S.offset),f.tables.cvt=g.parseShortList(E.length/2);break;case"fvar":o=E;break;case"fpgm":S=hr(v,E),g=new V.Parser(S.data,S.offset),f.tables.fpgm=g.parseByteList(E.length);break;case"head":S=hr(v,E),f.tables.head=Ce.parse(S.data,S.offset),f.unitsPerEm=f.tables.head.unitsPerEm,a=f.tables.head.indexToLocFormat;break;case"hhea":S=hr(v,E),f.tables.hhea=xe.parse(S.data,S.offset),f.ascender=f.tables.hhea.ascender,f.descender=f.tables.hhea.descender,f.numberOfHMetrics=f.tables.hhea.numberOfHMetrics;break;case"hmtx":u=E;break;case"ltag":S=hr(v,E),r=ke.parse(S.data,S.offset);break;case"maxp":S=hr(v,E),f.tables.maxp=Ie.parse(S.data,S.offset),f.numGlyphs=f.tables.maxp.numGlyphs;break;case"name":m=E;break;case"OS/2":S=hr(v,E),f.tables.os2=Ge.parse(S.data,S.offset);break;case"post":S=hr(v,E),f.tables.post=qe.parse(S.data,S.offset),f.glyphNames=new X(f.tables.post);break;case"prep":S=hr(v,E),g=new V.Parser(S.data,S.offset),f.tables.prep=g.parseByteList(E.length);break;case"glyf":s=E;break;case"loca":p=E;break;case"CFF ":i=E;break;case"kern":d=E;break;case"GPOS":l=E;break;case"GSUB":c=E;break;case"meta":h=E}}var C=hr(v,m);if(f.tables.name=Ue.parse(C.data,C.offset,r),f.names=f.tables.name,s&&p){var x=0===a,w=hr(v,p),k=ur.parse(w.data,w.offset,f.numGlyphs,x),I=hr(v,s);f.glyphs=St.parse(I.data,I.offset,k,f,t)}else{if(!i)throw new Error("Font doesn't contain TrueType or CFF outlines.");var N=hr(v,i);Se.parse(N.data,N.offset,f,t)}var O=hr(v,u);if(we.parse(f,O.data,O.offset,f.numberOfHMetrics,f.numGlyphs,f.glyphs,t),K(f,t),d){var P=hr(v,d);f.kerningPairs=cr.parse(P.data,P.offset)}else f.kerningPairs={};if(l){var D=hr(v,l);f.tables.gpos=lr.parse(D.data,D.offset),f.position.init()}if(c){var R=hr(v,c);f.tables.gsub=Qe.parse(R.data,R.offset)}if(o){var T=hr(v,o);f.tables.fvar=ir.parse(T.data,T.offset,f.names)}if(h){var L=hr(v,h);f.tables.meta=Je.parse(L.data,L.offset),f.metas=f.tables.meta}return f}function fr(e,t,a){("undefined"===typeof window?dr:pr)(e,(function(e,r){if(e)return t(e);var n;try{n=gr(r,a)}catch(i){return t(i,null)}return t(null,n)}))}a.d(t,"a",(function(){return fr}))},98:function(e,t,a){"use strict";var r=a(27);function n(e){return function(t){t(d()),function(e,t){var a={status:-1,lang_list:[],def_lang:"english",lang_data:[],is_multi_lang:0};a.is_multi_lang=e.is_multi_lang,a.lang_list=e.lang_list,a.def_lang=e.default.email,a.def_lang_obj=e.default,a.status=1,Promise.all(e.lang_list.map((function(e){var t,n="lang_"+e.name.toLowerCase()+".json";return Object(r.j)(n).then((function(r){r.status&&((t=r.data).langCode=e.name,a.lang_data.push(t))}))}))).then((function(){t(a)}))}(e,(function(e){1===e.status?t(p(e)):t(m(e))}))}}function i(e){return function(t){t(h()),t(g(e))}}a.d(t,"g",(function(){return n})),a.d(t,"f",(function(){return i})),a.d(t,"c",(function(){return o})),a.d(t,"e",(function(){return s})),a.d(t,"d",(function(){return l})),a.d(t,"a",(function(){return c})),a.d(t,"b",(function(){return u}));var o="FETCH_LANGUAGE_BEGIN",s="FETCH_LANGUAGE_SUCCESS",l="FETCH_LANGUAGE_FAILURE",c="CHANGE_LANGUAGE_BEGIN",u="CHANGE_LANGUAGE_SUCCESS",d=function(){return{type:o}},p=function(e){return{type:s,payload:e}},m=function(e){return{type:l,payload:e}},h=function(){return{type:c}},g=function(e){return{type:u,payload:e}}},99:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAlgAAAJ2CAMAAAC0HgyoAAAKQWlDQ1BJQ0MgUHJvZmlsZQAASA2dlndUU9kWh8+9N73QEiIgJfQaegkg0jtIFQRRiUmAUAKGhCZ2RAVGFBEpVmRUwAFHhyJjRRQLg4Ji1wnyEFDGwVFEReXdjGsJ7601896a/cdZ39nnt9fZZ+9917oAUPyCBMJ0WAGANKFYFO7rwVwSE8vE9wIYEAEOWAHA4WZmBEf4RALU/L09mZmoSMaz9u4ugGS72yy/UCZz1v9/kSI3QyQGAApF1TY8fiYX5QKUU7PFGTL/BMr0lSkyhjEyFqEJoqwi48SvbPan5iu7yZiXJuShGlnOGbw0noy7UN6aJeGjjAShXJgl4GejfAdlvVRJmgDl9yjT0/icTAAwFJlfzOcmoWyJMkUUGe6J8gIACJTEObxyDov5OWieAHimZ+SKBIlJYqYR15hp5ejIZvrxs1P5YjErlMNN4Yh4TM/0tAyOMBeAr2+WRQElWW2ZaJHtrRzt7VnW5mj5v9nfHn5T/T3IevtV8Sbsz55BjJ5Z32zsrC+9FgD2JFqbHbO+lVUAtG0GQOXhrE/vIADyBQC03pzzHoZsXpLE4gwnC4vs7GxzAZ9rLivoN/ufgm/Kv4Y595nL7vtWO6YXP4EjSRUzZUXlpqemS0TMzAwOl89k/fcQ/+PAOWnNycMsnJ/AF/GF6FVR6JQJhIlou4U8gViQLmQKhH/V4X8YNicHGX6daxRodV8AfYU5ULhJB8hvPQBDIwMkbj96An3rWxAxCsi+vGitka9zjzJ6/uf6Hwtcim7hTEEiU+b2DI9kciWiLBmj34RswQISkAd0oAo0gS4wAixgDRyAM3AD3iAAhIBIEAOWAy5IAmlABLJBPtgACkEx2AF2g2pwANSBetAEToI2cAZcBFfADXALDIBHQAqGwUswAd6BaQiC8BAVokGqkBakD5lC1hAbWgh5Q0FQOBQDxUOJkBCSQPnQJqgYKoOqoUNQPfQjdBq6CF2D+qAH0CA0Bv0BfYQRmALTYQ3YALaA2bA7HAhHwsvgRHgVnAcXwNvhSrgWPg63whfhG/AALIVfwpMIQMgIA9FGWAgb8URCkFgkAREha5EipAKpRZqQDqQbuY1IkXHkAwaHoWGYGBbGGeOHWYzhYlZh1mJKMNWYY5hWTBfmNmYQM4H5gqVi1bGmWCesP3YJNhGbjS3EVmCPYFuwl7ED2GHsOxwOx8AZ4hxwfrgYXDJuNa4Etw/XjLuA68MN4SbxeLwq3hTvgg/Bc/BifCG+Cn8cfx7fjx/GvyeQCVoEa4IPIZYgJGwkVBAaCOcI/YQRwjRRgahPdCKGEHnEXGIpsY7YQbxJHCZOkxRJhiQXUiQpmbSBVElqIl0mPSa9IZPJOmRHchhZQF5PriSfIF8lD5I/UJQoJhRPShxFQtlOOUq5QHlAeUOlUg2obtRYqpi6nVpPvUR9Sn0vR5Mzl/OX48mtk6uRa5Xrl3slT5TXl3eXXy6fJ18hf0r+pvy4AlHBQMFTgaOwVqFG4bTCPYVJRZqilWKIYppiiWKD4jXFUSW8koGStxJPqUDpsNIlpSEaQtOledK4tE20Otpl2jAdRzek+9OT6cX0H+i99AllJWVb5SjlHOUa5bPKUgbCMGD4M1IZpYyTjLuMj/M05rnP48/bNq9pXv+8KZX5Km4qfJUilWaVAZWPqkxVb9UU1Z2qbapP1DBqJmphatlq+9Uuq43Pp893ns+dXzT/5PyH6rC6iXq4+mr1w+o96pMamhq+GhkaVRqXNMY1GZpumsma5ZrnNMe0aFoLtQRa5VrntV4wlZnuzFRmJbOLOaGtru2nLdE+pN2rPa1jqLNYZ6NOs84TXZIuWzdBt1y3U3dCT0svWC9fr1HvoT5Rn62fpL9Hv1t/ysDQINpgi0GbwaihiqG/YZ5ho+FjI6qRq9Eqo1qjO8Y4Y7ZxivE+41smsImdSZJJjclNU9jU3lRgus+0zwxr5mgmNKs1u8eisNxZWaxG1qA5wzzIfKN5m/krCz2LWIudFt0WXyztLFMt6ywfWSlZBVhttOqw+sPaxJprXWN9x4Zq42Ozzqbd5rWtqS3fdr/tfTuaXbDdFrtOu8/2DvYi+yb7MQc9h3iHvQ732HR2KLuEfdUR6+jhuM7xjOMHJ3snsdNJp9+dWc4pzg3OowsMF/AX1C0YctFx4bgccpEuZC6MX3hwodRV25XjWuv6zE3Xjed2xG3E3dg92f24+ysPSw+RR4vHlKeT5xrPC16Il69XkVevt5L3Yu9q76c+Oj6JPo0+E752vqt9L/hh/QL9dvrd89fw5/rX+08EOASsCegKpARGBFYHPgsyCRIFdQTDwQHBu4IfL9JfJFzUFgJC/EN2hTwJNQxdFfpzGC4sNKwm7Hm4VXh+eHcELWJFREPEu0iPyNLIR4uNFksWd0bJR8VF1UdNRXtFl0VLl1gsWbPkRoxajCCmPRYfGxV7JHZyqffS3UuH4+ziCuPuLjNclrPs2nK15anLz66QX8FZcSoeGx8d3xD/iRPCqeVMrvRfuXflBNeTu4f7kufGK+eN8V34ZfyRBJeEsoTRRJfEXYljSa5JFUnjAk9BteB1sl/ygeSplJCUoykzqdGpzWmEtPi000IlYYqwK10zPSe9L8M0ozBDuspp1e5VE6JA0ZFMKHNZZruYjv5M9UiMJJslg1kLs2qy3mdHZZ/KUcwR5vTkmuRuyx3J88n7fjVmNXd1Z752/ob8wTXuaw6thdauXNu5Tnddwbrh9b7rj20gbUjZ8MtGy41lG99uit7UUaBRsL5gaLPv5sZCuUJR4b0tzlsObMVsFWzt3WazrWrblyJe0fViy+KK4k8l3JLr31l9V/ndzPaE7b2l9qX7d+B2CHfc3em681iZYlle2dCu4F2t5czyovK3u1fsvlZhW3FgD2mPZI+0MqiyvUqvakfVp+qk6oEaj5rmvep7t+2d2sfb17/fbX/TAY0DxQc+HhQcvH/I91BrrUFtxWHc4azDz+ui6rq/Z39ff0TtSPGRz0eFR6XHwo911TvU1zeoN5Q2wo2SxrHjccdv/eD1Q3sTq+lQM6O5+AQ4ITnx4sf4H++eDDzZeYp9qukn/Z/2ttBailqh1tzWibakNml7THvf6YDTnR3OHS0/m/989Iz2mZqzymdLz5HOFZybOZ93fvJCxoXxi4kXhzpXdD66tOTSna6wrt7LgZevXvG5cqnbvfv8VZerZ645XTt9nX297Yb9jdYeu56WX+x+aem172296XCz/ZbjrY6+BX3n+l37L972un3ljv+dGwOLBvruLr57/17cPel93v3RB6kPXj/Mejj9aP1j7OOiJwpPKp6qP6391fjXZqm99Oyg12DPs4hnj4a4Qy//lfmvT8MFz6nPK0a0RupHrUfPjPmM3Xqx9MXwy4yX0+OFvyn+tveV0auffnf7vWdiycTwa9HrmT9K3qi+OfrW9m3nZOjk03dp76anit6rvj/2gf2h+2P0x5Hp7E/4T5WfjT93fAn88ngmbWbm3/eE8/syOll+AAAACXBIWXMAAAsTAAALEwEAmpwYAAABjFBMVEW4uLi5ubm6urq7u7q7u7u8vLu8vLy9vLy9vby9vb2+vr2+vr6/vr6/v76/v7/Av7/AwL/AwMDBwMDBwcDBwcHCwcHCwsHCwsLDw8LDw8PEw8PExMPExMTFxMTFxcTFxcXGxcXGxsXGxsbHxsbHx8bIx8fIyMfIyMjJyMjJycjKycnKysnLysrLy8rMy8vMzMvNzMvNzMzNzczOzczOzs3Pzs3Pzs7Pz87Qz87Qz8/Q0M/R0M/R0dDS0dDS0tHT0tHT09LU09LU1NPV1NPV1dTW1dTW1tXX1tXX19XX19bY19bY2NbY2NfZ2NfZ2dfZ2dja2dja2tja2tnb2tnb29nc29rc3Nrd3Nvd3dve3dze3tzf3tzf3t3f393g397g4N7h4N7h4N/h4d/i4eDi4uDj4uDj4uHj4+Hk4+Hk4+Lk5OLl5OLl5OPl5ePm5ePm5eTm5uTn5uTn5uXn5+Xo5+Xo5+bo6Obp6Obp6Ofq6efq6ejq6ujr6ujr6uns6+ns6+rt7Oru7evv7uzw7+0LvgbIAAAVDUlEQVR42u3da0PTZgOA4aRWHEM7BQUUXx0bqIgORRQnICrilM0Nhyg4wKGCCAyGQyuKpUn++As8Sduc2qQppWnu+8tGLWmgFzk8OVTSiPYgiV8BAYuARcAiAhYBi4BFBCwCFgGLCFgELAIWEbAIWAQsImARsAhYRMAiYBGwiIBFwCJgEQGLgEXAIgIWAYuARQQsAhYBiwhYBCwCFhGwCFgELCJgEbAIWETAImARsIiARcAiYBEBi4BFwCICFgGLgEUELAIWAYsIWAQsAhYRsAhYBCwiYBGwCFhEwCJgEbCIgEXAImARAYuARcAiAhYBi4BFBCwCFgGLCFgELAIWEbAIWAQsAhYRsAhYBCwiYBGwCFhEwCJgEbCIgEXAImARAYuARcAiAhYBi4BFBCwCFgGLCFgELAIWEbAIWAQsImARsAhYRMAiYBGwiIBFwCJgEQGLgEXAIgIWAYuARQQsAhYBiwhYBCwCFhGwCFgELCJgEbAIWETAImARsIiARcAiYBEBi4BFwCICFgGLgEUUFlhvnpOn3gDLV+ck8tQ5YAELWMACFrCABSxgAQtYwAIWsIAFLGABC1jAAhawgAUsYAELWMACFrCABSxgAQtYwAIWsIAFLGABC1jAAhawgAUsYAELWMACFrCABSxgAQtYwAIWsIAFLJ+wrvZHqqvAKhOsVS1SrQILWMACFrCABSxgAQtYwAIWsIAFLGABC1jAAhawgAUsYAELWMACFrCABSxgAQtYwAIWsIAFLGABC1jAAhawgAUsYAELWBUDKzl5/0ZX59VbIy9TwAJWiWAt9CZypnDy/idgASswLPV5k20inUvAAlYwWO+aHSfTtQksYBUPSx10m078L2ABq1hYqdY8UxoEFrCKg/X5eN6btXSrwAJWEbBSxwvcBqgHWMDyD0v9vuANpu4DC1i+YQ16uHXZa2AByyesBS/3xDusAAtYvmCpzZ7utjgILGD5gvXc2208Y5vAApYfWI0ebxB7G1jA8gHrrdc7Dx9SgQUs77B6Pd/TehpYwPIO67BnWL3AApZnWB+834W/HljA8gxrwsfnO6SBBSyvsIZ8wFoGFrC8wurxAWsKWMDyCuuyD1jjwAKWV1idPmA9ARawvMLq8gHrefA5nh8FVjRg3fQBaybwDKcT8SSwIgHroQ9Y64Fn+IoktQMrErBmvLuSAx8snNjDLTVgVRaslHdYp4PO7sbB3cvJPgMrArC0Js+wgp7qp7bt5bsMrAqDNVS2gfdfjAk9BVYEYCW9ujoe9J2XjSnVbAKr+mFpHR5hBRyBUnLOVO0EVgRgLXpzVRfwMp2+Eg+1AqvSYWk/leNA4az5NOevwKp+WF/iHlz9EGxOU3XmyV0CVvXD0iYLu6rZCDanl6wT/AtY1Q9LGyg46D4bbEbHbFOsTQGr+mGpXXu7gZV0WNl2ASsC98dSu/MurwK6Us/szbkSwKp4WJp2L8/2VcD1oMvg/rdbwIrCzW1f1blMpzXgdru2JLvcJxBYkbhrcvq2E4BvA5/ortS7zeEssKIAa3tAa6DGenzwj+C3xbrhfs+tNLAiAWt7M3vq+rHMJvvpwVJ8esB0nlm8DqyIwNpdJS69GB99NvO+NDeX2TyUbx5fASs6sEpb/nMnEgqwgFVMvxcYef0ZWMAqovVYoYNF88AClv99gZMFj24fU4AFLL95uYF8P7CA5bN5T2cQvgMWsPyNWyS8XaShAAtYfrpS1vt8AysqsLzfhHIZWMDSWyg4Li+up/dUowosYO32LtZZAINxPb2n7gILWDt92D4Loiu/LD+3R5LkFWABS9O+Ht09Ty+frFXZDyypWQUWsJTT4gVu5HlKo+SvIWBFHpZ60XiFPtfn9Pt0JclrwIo6rJ8Lj0DNSr5rUYEVbVjDhXfnUnX+YUnDwIo0LMvnsTp+uv2lIlxJ8jqwIgzrjXVv76H9OU+lojqjAiuysNbs18o/tj4nGS8OlvQIWFGF9eVI4Q9Ccb6e3kuxD8CKJqx0s4c7htyXiq4VWJGEpba7vFLujR+X5OJh2VerwIoCrGuuO3QvMs9RjgVwJR1IAit6sO7mGSrI3JLohhSoNmBFDtaYlzv+TUsBGwVWxGDN5t92ir3eeVL+6+m9FN8AVqRg/XOg0FjBzpWnF6TAnQdWlGB9qi28rFnU/pBK0BiwogMrddzLWmwiVgpY8S/AigospVUqYxeBFRFY6k9SWXsGrGjAGiivqyI/dQ5YYYP1WCp3l4AVAVhTUvmbBFbVw1qI7QOsb1LAqnJY6zXSfvQTsKoblrg0dR+aBlY1wzIuTS1//j91DljhgZW9NLX8dQOremH9LO1jL4FVrbAe7KcrqS4NrOqE9Vza33qAVZWw3sj7DMvnB+0AKxyw1uL77UpKpIFVdbC+HJb2v5vAqjZYLpemlrs5YFUXLNdLU8vcUQVYVQXrmlQh9QGrmmDdkyqmt8CqHlhjleNKalCAVS2w/pYrCJb3D9oBVoXDKnhpaplbAlZVwPJwaWp5O6EAqwpgebo0tbzdAVb4YZX30lRvyf8AK+yw1MtSBdakAivksAakimwIWOGG9bgyXUnyKrDCDGtKqtROqcAKL6x9uTTVY8PACi2sfbo01ePK8D2wQgpr3y5N9dZpFVihhLV/l6Z67CGwwghrPy9N9VZsHVghhHVTqvi+V4EVOlgPpBD0G7DCBut5GFxJsSSwwgXrjRwKWNKPwAoVrAq4NNVjo8AKEazPh8PiKv8H7QCrsmBVyKWp3moHVlhgVcqlqR4bA1ZIYClroSoJrJAd0gl/wAIWsIAFLGABC1jAAhawgAUsYAELWMACFrCABSxgAQtYwAIWsIAFLGABC1jAAhawgAUsYAELWMACFrCABSxgAQtYwAIWsIAFLGABC1jAKjWsM+ci1RlglQkWAQtYwAIWsIBFwAIWsIAFLGARsIAFLGABC1gELGABC1jAAhawgAUsYAELWMACFrCABSxgAQtYwAIWsIAFLGABC1jAAhawgAUsYAELWMACFrCABSxgAStvyVXyVBJYFKWARcAiYBGwiIBFwCJgEQGLgEXAIgIWAYuARQQsAhYBiwhYBCwCFhGwCFgELCJgEbAIWPtdrSwacnvCW/Hv06V5uV/F1O4BotphxfVbE8jrLk+YF/8+VZqXeySmdgcQUYEltQELWHsBSxoHFrD2AtahFLCAtQewpB5gAWsvYEnzwALWXsA6rgILWHsAS7oPLGCVFJYs3u/YB2ABq5SwLjWIN7wdWMAqJayuOX1l+BxYwColLK1HvOO1KT+w1OTczNSrNaWUsBSnqaXThSasfE6mlBL+XtQtFVilgJWqFW/5Dc+wkvdb9U0zqan/XbGw0q93mhNv5mzPie1Jyg3d09l3detJZ2LnWxIdv6VcTD3vOSnmJN7S/WTT9bX/He5sOpJo7hgqMLNb491NB3a2OE/2vFCAFRCWNqEjWfAGa7XTfH/9U9PFwfpH7DXs/O9MQ3ZyR1/p7gZi2QdjAw7v84fumHlOWmccX3n6dPYp9U934P5Qu12j9XnrV+ScicVvJYEVDJZ2QfwqG1UPsNRB2f7RDZ8DwVK6zZMb3vnXhTrzg40b1nVkr31GpNP/2l73i+UTOE5u7/+e2D2QZVn6DVgnJg8qwAoE61Ms5x3NDyv1g9OHgtS8CQBL+dE6ue2D4tM2NQ3mja2NesePJ4m9tLzsUq1tZhedYG00OUzt+L/ACgJLG9HflWQhWFvNzh83I08VDUtps+tIvnFYGpkOaKYbXD74Jma2MB+zPyW+aoe1Xus4tfgCsILAUk85fRyRHZZqLK9iV54uflhfenb9kCFrrlhYYj0ot/b0dZ0w3s/2b8R/D5/vvnwqY2wtZ2p9xuKn59nb/z6uvHzUYTytNfdF32cOL9S2d3V3HBH/X1dnhfU5s+I9Mzgy9lv/mYysdWAFgKWt6L/HifywBvWn3crspSkjMbfRCm+wxNv3YGv3oWXTAvHK6u6Dm7d1M7eyE9vUH7qTXT9uXte/bTlnu8lYrnUt6jseOZtzObBUA1KPsbW4ccvYtlOAFQCWdlvnkc4HS+cnT+ZOZk3/Y+8uHtbZTYc1XG12GTgjHklkJ/ZQPPKn6RWGxYP3bH8INa+yD83VOsAaEo8czF3sztWIB38BVhBYSkL8GnvzwdJXhKPm6azpq5vVYmFdzNkbnc24yt3euyYe+5R5oF0cjrKMbIrt74vZ8TZ9jGvFNEhRa4P1UTyv5r1pcotiWXxQAVYAWJl39J07rHmXo4qj+c4WLAwrkbuUVI2NItOQ1GvxWHaP75DjwJtYZJ3JfH3T8czreRusbuvkTYvFP4AVBJbWpQ+lq66w9GcsWiekHtP374qDZX7f9bGH0+YxJvHg75k1pljCWA+9TIqBqsx3iZ/wrHVOei2wvrj8Yah19r0BYPmG9dW2TWGBlY65nQahj1ZMFwUrbvaoLz0em785Zj5pLLn75Y/Wl5gxw5pwma1PFlhiQSfbB9rviyemgRUEljaujyR8coE1Lb58Zp/ShviXvqJgXTY/rc8+tLBdjfl71fROtiXkEzOsa87LNU1rM8M65fYHsy7m5RWwAsHSf99Shwss8ZbLTn+/YhT8+6JgjZifJnZPZYuGg7uPDhT4ic6bYX1n/QHNs2LASjnOx261Fb1fGBpYH/QhqUlnWGfdtzgui2VDUbBmzU8TIwRHNKclVn5Yyj3JBEtsiEm/2p+5YII14349iZB6DVjBYBkDQXVpR1hx6yhltjvimUoxsN47wTrhC9bWPy8e3TpfI5lhLYovHQ4JpE2w9C2pDYcJ33I4HgEs/7DURtMQtxlW2mlMUu939/emIKyvTrCavcHaej1yq6Mpbjl9wbSPmDP4ZfnRDVj6iY5tDh01r1uBVSQs7Z3+3iw5wPrPcc1l2u7/rxhY6WJhfXnQ4njg2HDwWHzpdDpoIhfWOalAx4AVFJa+7JeaVTusReezAXMXDqvFwFKKg5Xqk10cGLB+yZ5IaK0hF9b/CsGqA1ZgWOm6nF0kM6w5x3GA4Eus4mDN1dne/4YHwyZY4gDgQc1tL9aA1VwI1jfACgxLm9IHszZssN6IrxxPfXvsvjmzN7AmLMuU1htP1o2B2pOmXRHHXVXTaTMnC8GqAVZwWNolKXMk13FV6HiXh6EAe4XFwFrOrAaPdo+8XDcmYYYlDvXJTvMSy4UlTpn55q1ri8AqAawv8Qwnx413x+sVxFHEuFYuWPp5iVK3eavODOuJ68b7pmm44bz7tlhlFy5YxrkK24NZjsMNj5wmJdYmLeWCNetyPrQZ1rTrGMhrE6zrlX1EsGpgGWdT9lsHSMWpKlcdpqTIHs6bKSGsHsfzwoytKgPWiuuh8XsmWMN5dneBVTpY2pq+AbNsgdXmOqijHxQZKxes42KZalvJ9Zlg6efaDNln5X8mWLPuxwqBVUpY2l39QtQ5Myz9uM2K/Rv0E5yS5YIl5F+3vUSreaC80WUFvW4+bWbLcuw9p7N1O00DqzSwjEsQfjLD0hdg9gN2+gl1BY58lA6W26Jo0zxAaoz2rrv8HWROmxFH12X7FfqLXv5ggOUZljEWKplh6SdUxmxvwJM8m/V7COuu9RX6LbD0ddwVy9PeyxZYj20XYehdqOhDhSGEZWwdW05Nvmu/3mL3fRaHamNb5YKln0960eXPIQNB/0uQXptnt9l6zrt+amzMuv844WXTEVh+YKVqnWClYo77WfqCYlArGywxuiGbB/rn41ZYxinTtbkrQ+Wc/fIvfeuxzbw3sHxAXOuhAqtksEyHTLKjRfoAe2zavo8vHUqXD5Z+EeT3Od+qDGUG47N3kVG+0w/2ZU/JWGp0uGDVOEJ6OXdeZnSoL9grLCEs4wY0ZliK8a70ZLZnV4wFwKRWPljvjZtzLRmb7cM5x6Rj2Wuy5w1t5ya2twzVD+NibuPWC1aNa9/qJ43F05p+SZL12kVgBYT1KeYAS1uPZ29x8OfkxGh/U/6PINgjWMaFaNuzcXdsfOSmcV7WpHB0YqDf2A4cz/GWPR9w0gpLP8VmZ7V5eWj0z4e9meVa/RawSgrL2D6x3G1mLuZ8AsA5taywvtY53fFmUsvcy6M2s053OGtrNGWDZeyYWEtU8s3XwgnLuAGN5f5YC463++nycBl6SU+bWTlom4eji5lTpHNgaauNVn/j+oCX+fy9P5zOGzy9qQGrxLAyN6Cx3NFvo8P26z/41MvLlfZEv49N1rvv7ew8KC02WJo6Ylq8/bhmXO9ab36JJdud1+Qh7uhXTJfad3K/aO6XdpH16OzfraZf/+Ehb+cF/HVut+wF9R/F5C1v3tjugz9bvvny7qO5I0rKcE3ObZAG9DGozQu2G9NsP/Wvq9/pd8C9vZz9m7HiVcdMN3OL929oGrDK2sdHnfU7a45Yw4Wh+X0b5klP9rYk4rXHzt9+lTMP70fvDT2esy1qlE//JVPmnUCHz/9cvNd2RJbkg0c77ryu/HtyV+mHjatpNayz/qfLQWz9BwvLj8Gn2FdaA0638g1fwKq0xEbi38CioloQuwu27a0t2fXuJsCiwi27XP7xwHLjP2CRr/RT8TstD2/EK/tsGGBVfOLCLsvGVOqk040EgUXe028pcSD37vUL9WG9dgJYFZNqXD3f+kyMom88NT5fpUUFFhXdavZkjHjiRCL71bcbGrCo+GadT/NJrGnAoiCtOH1aXMemBiwKuJ31NGFh1TJVJT8asPaZ1lxvo3EWX6zlzlLV/GDA2v+U1bnpyZm5pFpNPxSwCFgELAIWEbAIWAQsImARsAhYRMAiYBGwiIBFwCJgEQGLgEXAIgIWAYuARQQsAhYBiwhYBCwCFhGwCFgELCJgEbAIWETAImARsIiARcAiYBEBi4BFwCICFgGLgEUELAIWAYsIWAQsAhYRsAhYBCwiYBGwCFhEwCJgEbCIgEXAImARAYuARcAiAhYBi4BFBCwCFgGLCFgELAIWEbAIWAQsImARsAhYRMAiYBGwiIBFwCJgEbCIgEXAImARAYuARcAiAhYBi4BFBCwCFgGLCFgELAIWEbAIWAQsImARsAhYRMAiYBGwiIBFwCJgEQGLgEXAIgIWAYuARQQsAhYBiwhYBCwCFhGwCFgELCJgEbAIWETAImARsIiARcAiYBEBi4BFwCICFgGLgEUELAIWAYsIWAQsAhYRsAhYBCwiYFF5+j/1hYy0o/NtpAAAAABJRU5ErkJggg=="}},[[426,17,18]]]);